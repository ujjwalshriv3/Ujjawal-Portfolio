/*! For license information please see main.56994b0f.js.LICENSE.txt */
(()=>{var __webpack_modules__={8:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(2284);function r(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=(0,n.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}function a(e,t,i){return(t=r(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},39:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=i(2540)},64:function(e){e.exports=function(){"use strict";function e(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}function t(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(t,i){return t.get(e(t,i))}function n(e,i,n){t(e,i),i.set(e,n)}function r(t,i,n){return t.set(e(t,i),n),n}const a=100,s={},o=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},l=e=>new Promise(t=>{if(!e)return t();const i=window.scrollX,n=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{o(),t()},a),window.scrollTo(i,n)}),c="swal2-",h=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((e,t)=>(e[t]=c+t,e),{}),u=["success","warning","info","question","error"].reduce((e,t)=>(e[t]=c+t,e),{}),d="SweetAlert2:",p=e=>e.charAt(0).toUpperCase()+e.slice(1),f=e=>{console.warn("".concat(d," ").concat("object"===typeof e?e.join(" "):e))},m=e=>{console.error("".concat(d," ").concat(e))},g=[],v=e=>{g.includes(e)||(g.push(e),f(e))},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v('"'.concat(e,'" is deprecated and will be removed in the next major release.').concat(t?' Use "'.concat(t,'" instead.'):""))},b=e=>"function"===typeof e?e():e,x=e=>e&&"function"===typeof e.toPromise,w=e=>x(e)?e.toPromise():Promise.resolve(e),A=e=>e&&Promise.resolve(e)===e,S=()=>document.body.querySelector(".".concat(h.container)),_=e=>{const t=S();return t?t.querySelector(e):null},E=e=>_(".".concat(e)),C=()=>E(h.popup),M=()=>E(h.icon),T=()=>E(h["icon-content"]),P=()=>E(h.title),D=()=>E(h["html-container"]),O=()=>E(h.image),k=()=>E(h["progress-steps"]),I=()=>E(h["validation-message"]),R=()=>_(".".concat(h.actions," .").concat(h.confirm)),L=()=>_(".".concat(h.actions," .").concat(h.cancel)),z=()=>_(".".concat(h.actions," .").concat(h.deny)),B=()=>E(h["input-label"]),j=()=>_(".".concat(h.loader)),F=()=>E(h.actions),N=()=>E(h.footer),U=()=>E(h["timer-progress-bar"]),V=()=>E(h.close),W='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',H=()=>{const e=C();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),i=Array.from(t).sort((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),n=parseInt(t.getAttribute("tabindex")||"0");return i>n?1:i<n?-1:0}),n=e.querySelectorAll(W),r=Array.from(n).filter(e=>"-1"!==e.getAttribute("tabindex"));return[...new Set(i.concat(r))].filter(e=>he(e))},G=()=>Q(document.body,h.shown)&&!Q(document.body,h["toast-shown"])&&!Q(document.body,h["no-backdrop"]),q=()=>{const e=C();return!!e&&Q(e,h.toast)},Y=()=>{const e=C();return!!e&&e.hasAttribute("data-loading")},X=(e,t)=>{if(e.textContent="",t){const i=(new DOMParser).parseFromString(t,"text/html"),n=i.querySelector("head");n&&Array.from(n.childNodes).forEach(t=>{e.appendChild(t)});const r=i.querySelector("body");r&&Array.from(r.childNodes).forEach(t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})}},Q=(e,t)=>{if(!t)return!1;const i=t.split(/\s+/);for(let n=0;n<i.length;n++)if(!e.classList.contains(i[n]))return!1;return!0},K=(e,t)=>{Array.from(e.classList).forEach(i=>{Object.values(h).includes(i)||Object.values(u).includes(i)||Object.values(t.showClass||{}).includes(i)||e.classList.remove(i)})},Z=(e,t,i)=>{if(K(e,t),!t.customClass)return;const n=t.customClass[i];n&&("string"===typeof n||n.forEach?te(e,n):f("Invalid type of customClass.".concat(i,'! Expected string or iterable object, got "').concat(typeof n,'"')))},J=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(h.popup," > .").concat(h[t]));case"checkbox":return e.querySelector(".".concat(h.popup," > .").concat(h.checkbox," input"));case"radio":return e.querySelector(".".concat(h.popup," > .").concat(h.radio," input:checked"))||e.querySelector(".".concat(h.popup," > .").concat(h.radio," input:first-child"));case"range":return e.querySelector(".".concat(h.popup," > .").concat(h.range," input"));default:return e.querySelector(".".concat(h.popup," > .").concat(h.input))}},$=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ee=(e,t,i)=>{e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(t=>{Array.isArray(e)?e.forEach(e=>{i?e.classList.add(t):e.classList.remove(t)}):i?e.classList.add(t):e.classList.remove(t)}))},te=(e,t)=>{ee(e,t,!0)},ie=(e,t)=>{ee(e,t,!1)},ne=(e,t)=>{const i=Array.from(e.children);for(let n=0;n<i.length;n++){const e=i[n];if(e instanceof HTMLElement&&Q(e,t))return e}},re=(e,t,i)=>{i==="".concat(parseInt("".concat(i)))&&(i=parseInt(i)),i||0===parseInt("".concat(i))?e.style.setProperty(t,"number"===typeof i?"".concat(i,"px"):i):e.style.removeProperty(t)},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},se=e=>{e&&(e.style.display="none")},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver(()=>{ce(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},le=(e,t,i,n)=>{const r=e.querySelector(t);r&&r.style.setProperty(i,n)},ce=function(e,t){t?ae(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):se(e)},he=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ue=()=>!he(R())&&!he(z())&&!he(L()),de=e=>!!(e.scrollHeight>e.clientHeight),pe=(e,t)=>{let i=e;for(;i&&i!==t;){if(de(i))return!0;i=i.parentElement}return!1},fe=e=>{const t=window.getComputedStyle(e),i=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return i>0||n>0},me=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=U();i&&he(i)&&(t&&(i.style.transition="none",i.style.width="100%"),setTimeout(()=>{i.style.transition="width ".concat(e/1e3,"s linear"),i.style.width="0%"},10))},ge=()=>{const e=U();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const i=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width="".concat(i,"%")},ve=()=>"undefined"===typeof window||"undefined"===typeof document,ye='\n <div aria-labelledby="'.concat(h.title,'" aria-describedby="').concat(h["html-container"],'" class="').concat(h.popup,'" tabindex="-1">\n   <button type="button" class="').concat(h.close,'"></button>\n   <ul class="').concat(h["progress-steps"],'"></ul>\n   <div class="').concat(h.icon,'"></div>\n   <img class="').concat(h.image,'" />\n   <h2 class="').concat(h.title,'" id="').concat(h.title,'"></h2>\n   <div class="').concat(h["html-container"],'" id="').concat(h["html-container"],'"></div>\n   <input class="').concat(h.input,'" id="').concat(h.input,'" />\n   <input type="file" class="').concat(h.file,'" />\n   <div class="').concat(h.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(h.select,'" id="').concat(h.select,'"></select>\n   <div class="').concat(h.radio,'"></div>\n   <label class="').concat(h.checkbox,'">\n     <input type="checkbox" id="').concat(h.checkbox,'" />\n     <span class="').concat(h.label,'"></span>\n   </label>\n   <textarea class="').concat(h.textarea,'" id="').concat(h.textarea,'"></textarea>\n   <div class="').concat(h["validation-message"],'" id="').concat(h["validation-message"],'"></div>\n   <div class="').concat(h.actions,'">\n     <div class="').concat(h.loader,'"></div>\n     <button type="button" class="').concat(h.confirm,'"></button>\n     <button type="button" class="').concat(h.deny,'"></button>\n     <button type="button" class="').concat(h.cancel,'"></button>\n   </div>\n   <div class="').concat(h.footer,'"></div>\n   <div class="').concat(h["timer-progress-bar-container"],'">\n     <div class="').concat(h["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),be=()=>{const e=S();return!!e&&(e.remove(),ie([document.documentElement,document.body],[h["no-backdrop"],h["toast-shown"],h["has-column"]]),!0)},xe=()=>{s.currentInstance.resetValidationMessage()},we=()=>{const e=C(),t=ne(e,h.input),i=ne(e,h.file),n=e.querySelector(".".concat(h.range," input")),r=e.querySelector(".".concat(h.range," output")),a=ne(e,h.select),s=e.querySelector(".".concat(h.checkbox," input")),o=ne(e,h.textarea);t.oninput=xe,i.onchange=xe,a.onchange=xe,s.onchange=xe,o.oninput=xe,n.oninput=()=>{xe(),r.value=n.value},n.onchange=()=>{xe(),r.value=n.value}},Ae=e=>"string"===typeof e?document.querySelector(e):e,Se=e=>{const t=C();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},_e=e=>{"rtl"===window.getComputedStyle(e).direction&&te(S(),h.rtl)},Ee=e=>{const t=be();if(ve())return void m("SweetAlert2 requires document to initialize");const i=document.createElement("div");i.className=h.container,t&&te(i,h["no-transition"]),X(i,ye),i.dataset.swal2Theme=e.theme;const n=Ae(e.target);n.appendChild(i),e.topLayer&&(i.setAttribute("popover",""),i.showPopover()),Se(e),_e(n),we()},Ce=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"===typeof e?Me(e,t):e&&X(t,e)},Me=(e,t)=>{e.jquery?Te(t,e):X(t,e.toString())},Te=(e,t)=>{if(e.textContent="",0 in t)for(let i=0;i in t;i++)e.appendChild(t[i].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Pe=(e,t)=>{const i=F(),n=j();i&&n&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?ae(i):se(i),Z(i,t,"actions"),De(i,n,t),X(n,t.loaderHtml||""),Z(n,t,"loader"))};function De(e,t,i){const n=R(),r=z(),a=L();n&&r&&a&&(Ie(n,"confirm",i),Ie(r,"deny",i),Ie(a,"cancel",i),Oe(n,r,a,i),i.reverseButtons&&(i.toast?(e.insertBefore(a,n),e.insertBefore(r,n)):(e.insertBefore(a,t),e.insertBefore(r,t),e.insertBefore(n,t))))}function Oe(e,t,i,n){n.buttonsStyling?(te([e,t,i],h.styled),n.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",n.confirmButtonColor),n.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",n.denyButtonColor),n.cancelButtonColor&&i.style.setProperty("--swal2-cancel-button-background-color",n.cancelButtonColor),ke(e),ke(t),ke(i)):ie([e,t,i],h.styled)}function ke(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const i=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/," ".concat(i)))}function Ie(e,t,i){const n=p(t);ce(e,i["show".concat(n,"Button")],"inline-block"),X(e,i["".concat(t,"ButtonText")]||""),e.setAttribute("aria-label",i["".concat(t,"ButtonAriaLabel")]||""),e.className=h[t],Z(e,i,"".concat(t,"Button"))}const Re=(e,t)=>{const i=V();i&&(X(i,t.closeButtonHtml||""),Z(i,t,"closeButton"),ce(i,t.showCloseButton),i.setAttribute("aria-label",t.closeButtonAriaLabel||""))},Le=(e,t)=>{const i=S();i&&(ze(i,t.backdrop),Be(i,t.position),je(i,t.grow),Z(i,t,"container"))};function ze(e,t){"string"===typeof t?e.style.background=t:t||te([document.documentElement,document.body],h["no-backdrop"])}function Be(e,t){t&&(t in h?te(e,h[t]):(f('The "position" parameter is not valid, defaulting to "center"'),te(e,h.center)))}function je(e,t){t&&te(e,h["grow-".concat(t)])}var Fe={innerParams:new WeakMap,domCache:new WeakMap};const Ne=["input","file","range","select","radio","checkbox","textarea"],Ue=(e,t)=>{const i=C();if(!i)return;const n=Fe.innerParams.get(e),r=!n||t.input!==n.input;Ne.forEach(e=>{const n=ne(i,h[e]);n&&(He(e,t.inputAttributes),n.className=h[e],r&&se(n))}),t.input&&(r&&Ve(t),Ge(t))},Ve=e=>{if(!e.input)return;if(!Ke[e.input])return void m("Unexpected type of input! Expected ".concat(Object.keys(Ke).join(" | "),', got "').concat(e.input,'"'));const t=Xe(e.input);if(!t)return;const i=Ke[e.input](t,e);ae(t),e.inputAutoFocus&&setTimeout(()=>{$(i)})},We=e=>{for(let t=0;t<e.attributes.length;t++){const i=e.attributes[t].name;["id","type","value","style"].includes(i)||e.removeAttribute(i)}},He=(e,t)=>{const i=C();if(!i)return;const n=J(i,e);if(n){We(n);for(const e in t)n.setAttribute(e,t[e])}},Ge=e=>{if(!e.input)return;const t=Xe(e.input);t&&Z(t,e,"input")},qe=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ye=(e,t,i)=>{if(i.inputLabel){const n=document.createElement("label"),r=h["input-label"];n.setAttribute("for",e.id),n.className=r,"object"===typeof i.customClass&&te(n,i.customClass.inputLabel),n.innerText=i.inputLabel,t.insertAdjacentElement("beforebegin",n)}},Xe=e=>{const t=C();if(t)return ne(t,h[e]||h.input)},Qe=(e,t)=>{["string","number"].includes(typeof t)?e.value="".concat(t):A(t)||f('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof t,'"'))},Ke={};Ke.text=Ke.email=Ke.password=Ke.number=Ke.tel=Ke.url=Ke.search=Ke.date=Ke["datetime-local"]=Ke.time=Ke.week=Ke.month=(e,t)=>(Qe(e,t.inputValue),Ye(e,e,t),qe(e,t),e.type=t.input,e),Ke.file=(e,t)=>(Ye(e,e,t),qe(e,t),e),Ke.range=(e,t)=>{const i=e.querySelector("input"),n=e.querySelector("output");return Qe(i,t.inputValue),i.type=t.input,Qe(n,t.inputValue),Ye(i,e,t),e},Ke.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const i=document.createElement("option");X(i,t.inputPlaceholder),i.value="",i.disabled=!0,i.selected=!0,e.appendChild(i)}return Ye(e,e,t),e},Ke.radio=e=>(e.textContent="",e),Ke.checkbox=(e,t)=>{const i=J(C(),"checkbox");i.value="1",i.checked=Boolean(t.inputValue);const n=e.querySelector("span");return X(n,t.inputPlaceholder||t.inputLabel),i},Ke.textarea=(e,t)=>{Qe(e,t.inputValue),qe(e,t),Ye(e,e,t);const i=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(C()).width);new MutationObserver(()=>{if(!document.body.contains(e))return;const r=e.offsetWidth+i(e);r>n?C().style.width="".concat(r,"px"):re(C(),"width",t.width)}).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Ze=(e,t)=>{const i=D();i&&(oe(i),Z(i,t,"htmlContainer"),t.html?(Ce(t.html,i),ae(i,"block")):t.text?(i.textContent=t.text,ae(i,"block")):se(i),Ue(e,t))},Je=(e,t)=>{const i=N();i&&(oe(i),ce(i,Boolean(t.footer),"block"),t.footer&&Ce(t.footer,i),Z(i,t,"footer"))},$e=(e,t)=>{const i=Fe.innerParams.get(e),n=M();if(n){if(i&&t.icon===i.icon)return rt(n,t),void et(n,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(u).indexOf(t.icon))return m('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"')),void se(n);ae(n),rt(n,t),et(n,t),te(n,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",tt)}else se(n)}},et=(e,t)=>{for(const[i,n]of Object.entries(u))t.icon!==i&&ie(e,n);te(e,t.icon&&u[t.icon]),at(e,t),tt(),Z(e,t,"icon")},tt=()=>{const e=C();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),i=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<i.length;n++)i[n].style.backgroundColor=t},it=e=>"\n  ".concat(e.animation?'<div class="swal2-success-circular-line-left"></div>':"",'\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div>\n  ').concat(e.animation?'<div class="swal2-success-fix"></div>':"","\n  ").concat(e.animation?'<div class="swal2-success-circular-line-right"></div>':"","\n"),nt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',rt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let i=e.innerHTML,n="";t.iconHtml?n=st(t.iconHtml):"success"===t.icon?(n=it(t),i=i.replace(/ style=".*?"/g,"")):"error"===t.icon?n=nt:t.icon&&(n=st({question:"?",warning:"!",info:"i"}[t.icon])),i.trim()!==n.trim()&&X(e,n)},at=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const i of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])le(e,i,"background-color",t.iconColor);le(e,".swal2-success-ring","border-color",t.iconColor)}},st=e=>'<div class="'.concat(h["icon-content"],'">').concat(e,"</div>"),ot=(e,t)=>{const i=O();i&&(t.imageUrl?(ae(i,""),i.setAttribute("src",t.imageUrl),i.setAttribute("alt",t.imageAlt||""),re(i,"width",t.imageWidth),re(i,"height",t.imageHeight),i.className=h.image,Z(i,t,"image")):se(i))};let lt=!1,ct=0,ht=0,ut=0,dt=0;const pt=e=>{e.addEventListener("mousedown",mt),document.body.addEventListener("mousemove",gt),e.addEventListener("mouseup",vt),e.addEventListener("touchstart",mt),document.body.addEventListener("touchmove",gt),e.addEventListener("touchend",vt)},ft=e=>{e.removeEventListener("mousedown",mt),document.body.removeEventListener("mousemove",gt),e.removeEventListener("mouseup",vt),e.removeEventListener("touchstart",mt),document.body.removeEventListener("touchmove",gt),e.removeEventListener("touchend",vt)},mt=e=>{const t=C();if(e.target===t||M().contains(e.target)){lt=!0;const i=yt(e);ct=i.clientX,ht=i.clientY,ut=parseInt(t.style.insetInlineStart)||0,dt=parseInt(t.style.insetBlockStart)||0,te(t,"swal2-dragging")}},gt=e=>{const t=C();if(lt){let{clientX:i,clientY:n}=yt(e);t.style.insetInlineStart="".concat(ut+(i-ct),"px"),t.style.insetBlockStart="".concat(dt+(n-ht),"px")}},vt=()=>{const e=C();lt=!1,ie(e,"swal2-dragging")},yt=e=>{let t=0,i=0;return e.type.startsWith("mouse")?(t=e.clientX,i=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,i=e.touches[0].clientY),{clientX:t,clientY:i}},bt=(e,t)=>{const i=S(),n=C();if(i&&n){if(t.toast){re(i,"width",t.width),n.style.width="100%";const e=j();e&&n.insertBefore(e,M())}else re(n,"width",t.width);re(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),se(I()),xt(n,t),t.draggable&&!t.toast?(te(n,h.draggable),pt(n)):(ie(n,h.draggable),ft(n))}},xt=(e,t)=>{const i=t.showClass||{};e.className="".concat(h.popup," ").concat(he(e)?i.popup:""),t.toast?(te([document.documentElement,document.body],h["toast-shown"]),te(e,h.toast)):te(e,h.modal),Z(e,t,"popup"),"string"===typeof t.customClass&&te(e,t.customClass),t.icon&&te(e,h["icon-".concat(t.icon)])},wt=(e,t)=>{const i=k();if(!i)return;const{progressSteps:n,currentProgressStep:r}=t;n&&0!==n.length&&void 0!==r?(ae(i),i.textContent="",r>=n.length&&f("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((e,a)=>{const s=At(e);if(i.appendChild(s),a===r&&te(s,h["active-progress-step"]),a!==n.length-1){const e=St(t);i.appendChild(e)}})):se(i)},At=e=>{const t=document.createElement("li");return te(t,h["progress-step"]),X(t,e),t},St=e=>{const t=document.createElement("li");return te(t,h["progress-step-line"]),e.progressStepsDistance&&re(t,"width",e.progressStepsDistance),t},_t=(e,t)=>{const i=P();i&&(oe(i),ce(i,Boolean(t.title||t.titleText),"block"),t.title&&Ce(t.title,i),t.titleText&&(i.innerText=t.titleText),Z(i,t,"title"))},Et=(e,t)=>{bt(e,t),Le(e,t),wt(e,t),$e(e,t),ot(e,t),_t(e,t),Re(e,t),Ze(e,t),Pe(e,t),Je(e,t);const i=C();"function"===typeof t.didRender&&i&&t.didRender(i),s.eventEmitter.emit("didRender",i)},Ct=()=>he(C()),Mt=()=>{var e;return null===(e=R())||void 0===e?void 0:e.click()},Tt=()=>{var e;return null===(e=z())||void 0===e?void 0:e.click()},Pt=()=>{var e;return null===(e=L())||void 0===e?void 0:e.click()},Dt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ot=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},kt=(e,t,i)=>{Ot(e),t.toast||(e.keydownHandler=e=>zt(t,e,i),e.keydownTarget=t.keydownListenerCapture?window:C(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},It=(e,t)=>{var i;const n=H();if(n.length)return-2===(e+=t)&&(e=n.length-1),e===n.length?e=0:-1===e&&(e=n.length-1),void n[e].focus();null===(i=C())||void 0===i||i.focus()},Rt=["ArrowRight","ArrowDown"],Lt=["ArrowLeft","ArrowUp"],zt=(e,t,i)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Bt(t,e):"Tab"===t.key?jt(t):[...Rt,...Lt].includes(t.key)?Ft(t.key):"Escape"===t.key&&Nt(t,e,i)))},Bt=(e,t)=>{if(!b(t.allowEnterKey))return;const i=J(C(),t.input);if(e.target&&i&&e.target instanceof HTMLElement&&e.target.outerHTML===i.outerHTML){if(["textarea","file"].includes(t.input))return;Mt(),e.preventDefault()}},jt=e=>{const t=e.target,i=H();let n=-1;for(let r=0;r<i.length;r++)if(t===i[r]){n=r;break}e.shiftKey?It(n,-1):It(n,1),e.stopPropagation(),e.preventDefault()},Ft=e=>{const t=F(),i=R(),n=z(),r=L();if(!t||!i||!n||!r)return;const a=[i,n,r];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const s=Rt.includes(e)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;if(o){for(let e=0;e<t.children.length;e++){if(o=o[s],!o)return;if(o instanceof HTMLButtonElement&&he(o))break}o instanceof HTMLButtonElement&&o.focus()}},Nt=(e,t,i)=>{e.preventDefault(),b(t.allowEscapeKey)&&i(Dt.esc)};var Ut={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Vt=()=>{const e=S();Array.from(document.body.children).forEach(t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},Wt=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Ht="undefined"!==typeof window&&!!window.GestureEvent,Gt=()=>{if(Ht&&!Q(document.body,h.iosfix)){const e=document.body.scrollTop;document.body.style.top="".concat(-1*e,"px"),te(document.body,h.iosfix),qt()}},qt=()=>{const e=S();if(!e)return;let t;e.ontouchstart=e=>{t=Yt(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Yt=e=>{const t=e.target,i=S(),n=D();return!(!i||!n)&&!Xt(e)&&!Qt(e)&&(t===i||!(de(i)||!(t instanceof HTMLElement)||pe(t,n)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||de(n)&&n.contains(t)))},Xt=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Qt=e=>e.touches&&e.touches.length>1,Kt=()=>{if(Q(document.body,h.iosfix)){const e=parseInt(document.body.style.top,10);ie(document.body,h.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Zt=()=>{const e=document.createElement("div");e.className=h["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Jt=null;const $t=e=>{null===Jt&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Jt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Jt+Zt(),"px"))},ei=()=>{null!==Jt&&(document.body.style.paddingRight="".concat(Jt,"px"),Jt=null)};function ti(e,t,i,n){q()?hi(e,n):(l(i).then(()=>hi(e,n)),Ot(s)),Ht?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),G()&&(ei(),Kt(),Wt()),ii()}function ii(){ie([document.documentElement,document.body],[h.shown,h["height-auto"],h["no-backdrop"],h["toast-shown"]])}function ni(e){e=oi(e);const t=Ut.swalPromiseResolve.get(this),i=ri(this);this.isAwaitingPromise?e.isDismissed||(si(this),t(e)):i&&t(e)}const ri=e=>{const t=C();if(!t)return!1;const i=Fe.innerParams.get(e);if(!i||Q(t,i.hideClass.popup))return!1;ie(t,i.showClass.popup),te(t,i.hideClass.popup);const n=S();return ie(n,i.showClass.backdrop),te(n,i.hideClass.backdrop),li(e,t,i),!0};function ai(e){const t=Ut.swalPromiseReject.get(this);si(this),t&&t(e)}const si=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Fe.innerParams.get(e)||e._destroy())},oi=e=>"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),li=(e,t,i)=>{var n;const r=S(),a=fe(t);"function"===typeof i.willClose&&i.willClose(t),null===(n=s.eventEmitter)||void 0===n||n.emit("willClose",t),a?ci(e,t,r,i.returnFocus,i.didClose):ti(e,r,i.returnFocus,i.didClose)},ci=(e,t,i,n,r)=>{s.swalCloseEventFinishedCallback=ti.bind(null,e,i,n,r);const a=function(e){var i;e.target===t&&(null===(i=s.swalCloseEventFinishedCallback)||void 0===i||i.call(s),delete s.swalCloseEventFinishedCallback,t.removeEventListener("animationend",a),t.removeEventListener("transitionend",a))};t.addEventListener("animationend",a),t.addEventListener("transitionend",a)},hi=(e,t)=>{setTimeout(()=>{var i;"function"===typeof t&&t.bind(e.params)(),null===(i=s.eventEmitter)||void 0===i||i.emit("didClose"),e._destroy&&e._destroy()})},ui=e=>{let t=C();if(t||new mr,t=C(),!t)return;const i=j();q()?se(M()):di(t,e),ae(i),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},di=(e,t)=>{const i=F(),n=j();i&&n&&(!t&&he(R())&&(t=R()),ae(i),t&&(se(t),n.setAttribute("data-button-to-replace",t.className),i.insertBefore(n,t)),te([e,i],h.loading))},pi=(e,t)=>{"select"===t.input||"radio"===t.input?yi(e,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(x(t.inputValue)||A(t.inputValue))&&(ui(R()),bi(e,t))},fi=(e,t)=>{const i=e.getInput();if(!i)return null;switch(t.input){case"checkbox":return mi(i);case"radio":return gi(i);case"file":return vi(i);default:return t.inputAutoTrim?i.value.trim():i.value}},mi=e=>e.checked?1:0,gi=e=>e.checked?e.value:null,vi=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,yi=(e,t)=>{const i=C();if(!i)return;const n=e=>{"select"===t.input?xi(i,Ai(e),t):"radio"===t.input&&wi(i,Ai(e),t)};x(t.inputOptions)||A(t.inputOptions)?(ui(R()),w(t.inputOptions).then(t=>{e.hideLoading(),n(t)})):"object"===typeof t.inputOptions?n(t.inputOptions):m("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof t.inputOptions))},bi=(e,t)=>{const i=e.getInput();i&&(se(i),w(t.inputValue).then(n=>{i.value="number"===t.input?"".concat(parseFloat(n)||0):"".concat(n),ae(i),i.focus(),e.hideLoading()}).catch(t=>{m("Error in inputValue promise: ".concat(t)),i.value="",ae(i),i.focus(),e.hideLoading()}))};function xi(e,t,i){const n=ne(e,h.select);if(!n)return;const r=(e,t,n)=>{const r=document.createElement("option");r.value=n,X(r,t),r.selected=Si(n,i.inputValue),e.appendChild(r)};t.forEach(e=>{const t=e[0],i=e[1];if(Array.isArray(i)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,n.appendChild(e),i.forEach(t=>r(e,t[1],t[0]))}else r(n,i,t)}),n.focus()}function wi(e,t,i){const n=ne(e,h.radio);if(!n)return;t.forEach(e=>{const t=e[0],r=e[1],a=document.createElement("input"),s=document.createElement("label");a.type="radio",a.name=h.radio,a.value=t,Si(t,i.inputValue)&&(a.checked=!0);const o=document.createElement("span");X(o,r),o.className=h.label,s.appendChild(a),s.appendChild(o),n.appendChild(s)});const r=n.querySelectorAll("input");r.length&&r[0].focus()}const Ai=e=>{const t=[];return e instanceof Map?e.forEach((e,i)=>{let n=e;"object"===typeof n&&(n=Ai(n)),t.push([i,n])}):Object.keys(e).forEach(i=>{let n=e[i];"object"===typeof n&&(n=Ai(n)),t.push([i,n])}),t},Si=(e,t)=>!!t&&t.toString()===e.toString(),_i=e=>{const t=Fe.innerParams.get(e);e.disableButtons(),t.input?Mi(e,"confirm"):ki(e,!0)},Ei=e=>{const t=Fe.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Mi(e,"deny"):Pi(e,!1)},Ci=(e,t)=>{e.disableButtons(),t(Dt.cancel)},Mi=(e,t)=>{const i=Fe.innerParams.get(e);if(!i.input)return void m('The "input" parameter is needed to be set when using returnInputValueOn'.concat(p(t)));const n=e.getInput(),r=fi(e,i);i.inputValidator?Ti(e,r,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(i.validationMessage||n.validationMessage)):"deny"===t?Pi(e,r):ki(e,r)},Ti=(e,t,i)=>{const n=Fe.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>w(n.inputValidator(t,n.validationMessage))).then(n=>{e.enableButtons(),e.enableInput(),n?e.showValidationMessage(n):"deny"===i?Pi(e,t):ki(e,t)})},Pi=(e,t)=>{const i=Fe.innerParams.get(e||void 0);i.showLoaderOnDeny&&ui(z()),i.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>w(i.preDeny(t,i.validationMessage))).then(i=>{!1===i?(e.hideLoading(),si(e)):e.close({isDenied:!0,value:"undefined"===typeof i?t:i})}).catch(t=>Oi(e||void 0,t))):e.close({isDenied:!0,value:t})},Di=(e,t)=>{e.close({isConfirmed:!0,value:t})},Oi=(e,t)=>{e.rejectPromise(t)},ki=(e,t)=>{const i=Fe.innerParams.get(e||void 0);i.showLoaderOnConfirm&&ui(),i.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>w(i.preConfirm(t,i.validationMessage))).then(i=>{he(I())||!1===i?(e.hideLoading(),si(e)):Di(e,"undefined"===typeof i?t:i)}).catch(t=>Oi(e||void 0,t))):Di(e,t)};function Ii(){const e=Fe.innerParams.get(this);if(!e)return;const t=Fe.domCache.get(this);se(t.loader),q()?e.icon&&ae(M()):Ri(t),ie([t.popup,t.actions],h.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Ri=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?ae(t[0],"inline-block"):ue()&&se(e.actions)};function Li(){const e=Fe.innerParams.get(this),t=Fe.domCache.get(this);return t?J(t.popup,e.input):null}function zi(e,t,i){const n=Fe.domCache.get(e);t.forEach(e=>{n[e].disabled=i})}function Bi(e,t){const i=C();if(i&&e)if("radio"===e.type){const e=i.querySelectorAll('[name="'.concat(h.radio,'"]'));for(let i=0;i<e.length;i++)e[i].disabled=t}else e.disabled=t}function ji(){zi(this,["confirmButton","denyButton","cancelButton"],!1)}function Fi(){zi(this,["confirmButton","denyButton","cancelButton"],!0)}function Ni(){Bi(this.getInput(),!1)}function Ui(){Bi(this.getInput(),!0)}function Vi(e){const t=Fe.domCache.get(this),i=Fe.innerParams.get(this);X(t.validationMessage,e),t.validationMessage.className=h["validation-message"],i.customClass&&i.customClass.validationMessage&&te(t.validationMessage,i.customClass.validationMessage),ae(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",h["validation-message"]),$(n),te(n,h.inputerror))}function Wi(){const e=Fe.domCache.get(this);e.validationMessage&&se(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ie(t,h.inputerror))}const Hi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Gi=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],qi={allowEnterKey:void 0},Yi=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Xi=e=>Object.prototype.hasOwnProperty.call(Hi,e),Qi=e=>-1!==Gi.indexOf(e),Ki=e=>qi[e],Zi=e=>{Xi(e)||f('Unknown parameter "'.concat(e,'"'))},Ji=e=>{Yi.includes(e)&&f('The parameter "'.concat(e,'" is incompatible with toasts'))},$i=e=>{const t=Ki(e);t&&y(e,t)},en=e=>{!1===e.backdrop&&e.allowOutsideClick&&f('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&f('Invalid theme "'.concat(e.theme,'"'));for(const t in e)Zi(t),e.toast&&Ji(t),$i(t)};function tn(e){const t=S(),i=C(),n=Fe.innerParams.get(this);if(!i||Q(i,n.hideClass.popup))return void f("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=nn(e),a=Object.assign({},n,r);en(a),t.dataset.swal2Theme=a.theme,Et(this,a),Fe.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const nn=e=>{const t={};return Object.keys(e).forEach(i=>{Qi(i)?t[i]=e[i]:f("Invalid parameter to update: ".concat(i))}),t};function rn(){const e=Fe.domCache.get(this),t=Fe.innerParams.get(this);t?(e.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),s.eventEmitter.emit("didDestroy"),an(this)):sn(this)}const an=e=>{sn(e),delete e.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},sn=e=>{e.isAwaitingPromise?(on(Fe,e),e.isAwaitingPromise=!0):(on(Ut,e),on(Fe,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},on=(e,t)=>{for(const i in e)e[i].delete(t)};var ln=Object.freeze({__proto__:null,_destroy:rn,close:ni,closeModal:ni,closePopup:ni,closeToast:ni,disableButtons:Fi,disableInput:Ui,disableLoading:Ii,enableButtons:ji,enableInput:Ni,getInput:Li,handleAwaitingPromise:si,hideLoading:Ii,rejectPromise:ai,resetValidationMessage:Wi,showValidationMessage:Vi,update:tn});const cn=(e,t,i)=>{e.toast?hn(e,t,i):(pn(t),fn(t),mn(e,t,i))},hn=(e,t,i)=>{t.popup.onclick=()=>{e&&(un(e)||e.timer||e.input)||i(Dt.close)}},un=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let dn=!1;const pn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(dn=!0)}}},fn=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(dn=!0)}}},mn=(e,t,i)=>{t.container.onclick=n=>{dn?dn=!1:n.target===t.container&&b(e.allowOutsideClick)&&i(Dt.backdrop)}},gn=e=>"object"===typeof e&&e.jquery,vn=e=>e instanceof Element||gn(e),yn=e=>{const t={};return"object"!==typeof e[0]||vn(e[0])?["title","html","icon"].forEach((i,n)=>{const r=e[n];"string"===typeof r||vn(r)?t[i]=r:void 0!==r&&m("Unexpected type of ".concat(i,'! Expected "string" or "Element", got ').concat(typeof r))}):Object.assign(t,e[0]),t};function bn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new this(...t)}function xn(e){class t extends(this){_main(t,i){return super._main(t,Object.assign({},e,i))}}return t}const wn=()=>s.timeout&&s.timeout.getTimerLeft(),An=()=>{if(s.timeout)return ge(),s.timeout.stop()},Sn=()=>{if(s.timeout){const e=s.timeout.start();return me(e),e}},_n=()=>{const e=s.timeout;return e&&(e.running?An():Sn())},En=e=>{if(s.timeout){const t=s.timeout.increase(e);return me(t,!0),t}},Cn=()=>!(!s.timeout||!s.timeout.isRunning());let Mn=!1;const Tn={};function Pn(){Tn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Mn||(document.body.addEventListener("click",Dn),Mn=!0)}const Dn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in Tn){const i=t.getAttribute(e);if(i)return void Tn[e].fire({template:i})}};class On{constructor(){this.events={}}_getHandlersByEventName(e){return"undefined"===typeof this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const i=this._getHandlersByEventName(e);i.includes(t)||i.push(t)}once(e,t){var i=this;const n=function(){i.removeListener(e,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];t.apply(i,a)};this.on(e,n)}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this._getHandlersByEventName(e).forEach(e=>{try{e.apply(this,i)}catch(m){console.error(m)}})}removeListener(e,t){const i=this._getHandlersByEventName(e),n=i.indexOf(t);n>-1&&i.splice(n,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}}s.eventEmitter=new On;const kn=(e,t)=>{s.eventEmitter.on(e,t)},In=(e,t)=>{s.eventEmitter.once(e,t)},Rn=(e,t)=>{e?t?s.eventEmitter.removeListener(e,t):s.eventEmitter.removeAllListeners(e):s.eventEmitter.reset()};var Ln=Object.freeze({__proto__:null,argsToParams:yn,bindClickHandler:Pn,clickCancel:Pt,clickConfirm:Mt,clickDeny:Tt,enableLoading:ui,fire:bn,getActions:F,getCancelButton:L,getCloseButton:V,getConfirmButton:R,getContainer:S,getDenyButton:z,getFocusableElements:H,getFooter:N,getHtmlContainer:D,getIcon:M,getIconContent:T,getImage:O,getInputLabel:B,getLoader:j,getPopup:C,getProgressSteps:k,getTimerLeft:wn,getTimerProgressBar:U,getTitle:P,getValidationMessage:I,increaseTimer:En,isDeprecatedParameter:Ki,isLoading:Y,isTimerRunning:Cn,isUpdatableParameter:Qi,isValidParameter:Xi,isVisible:Ct,mixin:xn,off:Rn,on:kn,once:In,resumeTimer:Sn,showLoading:ui,stopTimer:An,toggleTimer:_n});class zn{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Bn=["swal-title","swal-html","swal-footer"],jn=e=>{const t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const i=t.content;return qn(i),Object.assign(Fn(i),Nn(i),Un(i),Vn(i),Wn(i),Hn(i),Gn(i,Bn))},Fn=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(e=>{Yn(e,["name","value"]);const i=e.getAttribute("name"),n=e.getAttribute("value");i&&n&&("boolean"===typeof Hi[i]?t[i]="false"!==n:"object"===typeof Hi[i]?t[i]=JSON.parse(n):t[i]=n)}),t},Nn=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(e=>{const i=e.getAttribute("name"),n=e.getAttribute("value");i&&n&&(t[i]=new Function("return ".concat(n))())}),t},Un=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(e=>{Yn(e,["type","color","aria-label"]);const i=e.getAttribute("type");i&&["confirm","cancel","deny"].includes(i)&&(t["".concat(i,"ButtonText")]=e.innerHTML,t["show".concat(p(i),"Button")]=!0,e.hasAttribute("color")&&(t["".concat(i,"ButtonColor")]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t["".concat(i,"ButtonAriaLabel")]=e.getAttribute("aria-label")))}),t},Vn=e=>{const t={},i=e.querySelector("swal-image");return i&&(Yn(i,["src","width","height","alt"]),i.hasAttribute("src")&&(t.imageUrl=i.getAttribute("src")||void 0),i.hasAttribute("width")&&(t.imageWidth=i.getAttribute("width")||void 0),i.hasAttribute("height")&&(t.imageHeight=i.getAttribute("height")||void 0),i.hasAttribute("alt")&&(t.imageAlt=i.getAttribute("alt")||void 0)),t},Wn=e=>{const t={},i=e.querySelector("swal-icon");return i&&(Yn(i,["type","color"]),i.hasAttribute("type")&&(t.icon=i.getAttribute("type")),i.hasAttribute("color")&&(t.iconColor=i.getAttribute("color")),t.iconHtml=i.innerHTML),t},Hn=e=>{const t={},i=e.querySelector("swal-input");i&&(Yn(i,["type","label","placeholder","value"]),t.input=i.getAttribute("type")||"text",i.hasAttribute("label")&&(t.inputLabel=i.getAttribute("label")),i.hasAttribute("placeholder")&&(t.inputPlaceholder=i.getAttribute("placeholder")),i.hasAttribute("value")&&(t.inputValue=i.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(e=>{Yn(e,["value"]);const i=e.getAttribute("value");if(!i)return;const n=e.innerHTML;t.inputOptions[i]=n})),t},Gn=(e,t)=>{const i={};for(const n in t){const r=t[n],a=e.querySelector(r);a&&(Yn(a,[]),i[r.replace(/^swal-/,"")]=a.innerHTML.trim())}return i},qn=e=>{const t=Bn.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(e=>{const i=e.tagName.toLowerCase();t.includes(i)||f("Unrecognized element <".concat(i,">"))})},Yn=(e,t)=>{Array.from(e.attributes).forEach(i=>{-1===t.indexOf(i.name)&&f(['Unrecognized attribute "'.concat(i.name,'" on <').concat(e.tagName.toLowerCase(),">."),"".concat(t.length?"Allowed attributes are: ".concat(t.join(", ")):"To set the value, use HTML within the element.")])})},Xn=10,Qn=e=>{const t=S(),i=C();"function"===typeof e.willOpen&&e.willOpen(i),s.eventEmitter.emit("willOpen",i);const n=window.getComputedStyle(document.body).overflowY;$n(t,i,e),setTimeout(()=>{Zn(t,i)},Xn),G()&&(Jn(t,e.scrollbarPadding,n),Vt()),q()||s.previousActiveElement||(s.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout(()=>e.didOpen(i)),s.eventEmitter.emit("didOpen",i)},Kn=e=>{const t=C();if(e.target!==t)return;const i=S();t.removeEventListener("animationend",Kn),t.removeEventListener("transitionend",Kn),i.style.overflowY="auto",ie(i,h["no-transition"])},Zn=(e,t)=>{fe(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Kn),t.addEventListener("transitionend",Kn)):e.style.overflowY="auto"},Jn=(e,t,i)=>{Gt(),t&&"hidden"!==i&&$t(i),setTimeout(()=>{e.scrollTop=0})},$n=(e,t,i)=>{te(e,i.showClass.backdrop),i.animation?(t.style.setProperty("opacity","0","important"),ae(t,"grid"),setTimeout(()=>{te(t,i.showClass.popup),t.style.removeProperty("opacity")},Xn)):ae(t,"grid"),te([document.documentElement,document.body],h.shown),i.heightAuto&&i.backdrop&&!i.toast&&te([document.documentElement,document.body],h["height-auto"])};var er={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function tr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=er.email),"url"===e.input&&(e.inputValidator=er.url))}function ir(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(f('Target parameter is not valid, defaulting to "body"'),e.target="body")}function nr(e){tr(e),e.showLoaderOnConfirm&&!e.preConfirm&&f("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),ir(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ee(e)}let rr;var ar=new WeakMap;class sr{constructor(){if(n(this,ar,void 0),"undefined"===typeof window)return;rr=this;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const a=Object.freeze(this.constructor.argsToParams(t));this.params=a,this.isAwaitingPromise=!1,r(ar,this,this._main(rr.params))}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(en(Object.assign({},t,e)),s.currentInstance){const e=Ut.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:t}=s.currentInstance;s.currentInstance._destroy(),t||e({isDismissed:!0}),G()&&Wt()}s.currentInstance=rr;const i=lr(e,t);nr(i),Object.freeze(i),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);const n=cr(rr);return Et(rr,i),Fe.innerParams.set(rr,i),or(rr,n,i)}then(e){return i(ar,this).then(e)}finally(e){return i(ar,this).finally(e)}}const or=(e,t,i)=>new Promise((n,r)=>{const a=t=>{e.close({isDismissed:!0,dismiss:t,isConfirmed:!1,isDenied:!1})};Ut.swalPromiseResolve.set(e,n),Ut.swalPromiseReject.set(e,r),t.confirmButton.onclick=()=>{_i(e)},t.denyButton.onclick=()=>{Ei(e)},t.cancelButton.onclick=()=>{Ci(e,a)},t.closeButton.onclick=()=>{a(Dt.close)},cn(i,t,a),kt(s,i,a),pi(e,i),Qn(i),hr(s,i,a),ur(t,i),setTimeout(()=>{t.container.scrollTop=0})}),lr=(e,t)=>{const i=jn(e),n=Object.assign({},Hi,t,i,e);return n.showClass=Object.assign({},Hi.showClass,n.showClass),n.hideClass=Object.assign({},Hi.hideClass,n.hideClass),!1===n.animation&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},cr=e=>{const t={popup:C(),container:S(),actions:F(),confirmButton:R(),denyButton:z(),cancelButton:L(),loader:j(),closeButton:V(),validationMessage:I(),progressSteps:k()};return Fe.domCache.set(e,t),t},hr=(e,t,i)=>{const n=U();se(n),t.timer&&(e.timeout=new zn(()=>{i("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(ae(n),Z(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&me(t.timer)})))},ur=(e,t)=>{if(!t.toast)return b(t.allowEnterKey)?void(dr(e)||pr(e,t)||It(-1,1)):(y("allowEnterKey"),void fr())},dr=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const i of t)if(i instanceof HTMLElement&&he(i))return i.focus(),!0;return!1},pr=(e,t)=>t.focusDeny&&he(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&he(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!he(e.confirmButton))&&(e.confirmButton.focus(),!0),fr=()=>{document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};sr.prototype.disableButtons=Fi,sr.prototype.enableButtons=ji,sr.prototype.getInput=Li,sr.prototype.disableInput=Ui,sr.prototype.enableInput=Ni,sr.prototype.hideLoading=Ii,sr.prototype.disableLoading=Ii,sr.prototype.showValidationMessage=Vi,sr.prototype.resetValidationMessage=Wi,sr.prototype.close=ni,sr.prototype.closePopup=ni,sr.prototype.closeModal=ni,sr.prototype.closeToast=ni,sr.prototype.rejectPromise=ai,sr.prototype.update=tn,sr.prototype._destroy=rn,Object.assign(sr,Ln),Object.keys(ln).forEach(e=>{sr[e]=function(){return rr&&rr[e]?rr[e](...arguments):null}}),sr.DismissReason=Dt,sr.version="11.26.3";const mr=sr;return mr.default=mr,mr}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var i=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=t);else try{i.innerHTML=t}catch(e){i.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')},219:(e,t,i)=>{"use strict";var n=i(3763),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?s:o[e.$$typeof]||r}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(f){var r=p(i);r&&r!==f&&e(t,r,n)}var s=h(i);u&&(s=s.concat(u(i)));for(var o=l(t),m=l(i),g=0;g<s.length;++g){var v=s[g];if(!a[v]&&(!n||!n[v])&&(!m||!m[v])&&(!o||!o[v])){var y=d(i,v);try{c(t,v,y)}catch(b){}}}}return t}},446:(e,t,i)=>{var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),u=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return h.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var i=a.test(e);return i||s.test(e)?o(e.slice(2),i?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,i){var n,r,a,s,o,l,c=0,h=!1,u=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var i=n,a=r;return n=r=void 0,c=t,s=e.apply(a,i)}function b(e){var i=e-l;return void 0===l||i>=t||i<0||u&&e-c>=a}function x(){var e=f();if(b(e))return w(e);o=setTimeout(x,function(e){var i=t-(e-l);return u?p(i,a-(e-c)):i}(e))}function w(e){return o=void 0,v&&n?y(e):(n=r=void 0,s)}function A(){var e=f(),i=b(e);if(n=arguments,r=this,l=e,i){if(void 0===o)return function(e){return c=e,o=setTimeout(x,t),h?y(e):s}(l);if(u)return o=setTimeout(x,t),y(l)}return void 0===o&&(o=setTimeout(x,t)),s}return t=g(t)||0,m(i)&&(h=!!i.leading,a=(u="maxWait"in i)?d(g(i.maxWait)||0,t):a,v="trailing"in i?!!i.trailing:v),A.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=r=o=void 0},A.flush=function(){return void 0===o?s:w(f())},A}},457:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.A});var n=i(7868)},528:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case r:case s:case a:case h:case u:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case o:return e;default:return t}}case n:return t}}}t.vM=c,t.lD=d},553:(e,t,i)=>{"use strict";var n=i(4994);t.A=void 0;var r=n(i(39)),a=i(579);t.A=(0,r.default)([(0,a.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,a.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology")},579:(e,t,i)=>{"use strict";e.exports=i(1153)},1153:(e,t,i)=>{"use strict";var n=i(5043),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,a={},c=null,h=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:h,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1238:(e,t)=>{"use strict";t.Y=function(e,t){return o(e).some(function(e){var i=e.inverse,n="all"===e.type||t.type===e.type;if(n&&i||!n&&!i)return!1;var r=e.expressions.every(function(e){var i=e.feature,n=e.modifier,r=e.value,a=t[i];if(!a)return!1;switch(i){case"orientation":case"scan":return a.toLowerCase()===r.toLowerCase();case"width":case"height":case"device-width":case"device-height":r=h(r),a=h(a);break;case"resolution":r=c(r),a=c(a);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":r=l(r),a=l(a);break;case"grid":case"color":case"color-index":case"monochrome":r=parseInt(r,10)||1,a=parseInt(a,10)||0}switch(n){case"min":return a>=r;case"max":return a<=r;default:return a===r}});return r&&!i||!r&&i})};var i=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,n=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,r=/^(?:(min|max)-)?(.+)/,a=/(em|rem|px|cm|mm|in|pt|pc)?$/,s=/(dpi|dpcm|dppx)?$/;function o(e){return e.split(",").map(function(e){var t=(e=e.trim()).match(i),a=t[1],s=t[2],o=t[3]||"",l={};return l.inverse=!!a&&"not"===a.toLowerCase(),l.type=s?s.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],l.expressions=o.map(function(e){var t=e.match(n),i=t[1].toLowerCase().match(r);return{modifier:i[1],feature:i[2],value:t[2]}}),l})}function l(e){var t,i=Number(e);return i||(i=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),i}function c(e){var t=parseFloat(e);switch(String(e).match(s)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function h(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},1497:(e,t,i)=>{"use strict";var n=i(3218);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,a,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return i.PropTypes=i,i}},1602:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalStyles:()=>Ke,StyledEngineProvider:()=>Qe,ThemeContext:()=>Oe,css:()=>Ge,default:()=>Ze,internal_processStyles:()=>Je,internal_serializeStyles:()=>et,keyframes:()=>qe});var n=i(8168),r=i(5043),a=i.t(r,2);var s=function(){function e(e){var t=this;this._insertTag=function(e){var i;i=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,i),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{i.insertRule(e,i.cssRules.length)}catch(n){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),o=Math.abs,l=String.fromCharCode,c=Object.assign;function h(e){return e.trim()}function u(e,t,i){return e.replace(t,i)}function d(e,t){return e.indexOf(t)}function p(e,t){return 0|e.charCodeAt(t)}function f(e,t,i){return e.slice(t,i)}function m(e){return e.length}function g(e){return e.length}function v(e,t){return t.push(e),e}var y=1,b=1,x=0,w=0,A=0,S="";function _(e,t,i,n,r,a,s){return{value:e,root:t,parent:i,type:n,props:r,children:a,line:y,column:b,length:s,return:""}}function E(e,t){return c(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function C(){return A=w>0?p(S,--w):0,b--,10===A&&(b=1,y--),A}function M(){return A=w<x?p(S,w++):0,b++,10===A&&(b=1,y++),A}function T(){return p(S,w)}function P(){return w}function D(e,t){return f(S,e,t)}function O(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function k(e){return y=b=1,x=m(S=e),w=0,[]}function I(e){return S="",e}function R(e){return h(D(w-1,B(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(A=T())&&A<33;)M();return O(e)>2||O(A)>3?"":" "}function z(e,t){for(;--t&&M()&&!(A<48||A>102||A>57&&A<65||A>70&&A<97););return D(e,P()+(t<6&&32==T()&&32==M()))}function B(e){for(;M();)switch(A){case e:return w;case 34:case 39:34!==e&&39!==e&&B(A);break;case 40:41===e&&B(e);break;case 92:M()}return w}function j(e,t){for(;M()&&e+A!==57&&(e+A!==84||47!==T()););return"/*"+D(t,w-1)+"*"+l(47===e?e:M())}function F(e){for(;!O(T());)M();return D(e,w)}var N="-ms-",U="-moz-",V="-webkit-",W="comm",H="rule",G="decl",q="@keyframes";function Y(e,t){for(var i="",n=g(e),r=0;r<n;r++)i+=t(e[r],r,e,t)||"";return i}function X(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case G:return e.return=e.return||e.value;case W:return"";case q:return e.return=e.value+"{"+Y(e.children,n)+"}";case H:e.value=e.props.join(",")}return m(i=Y(e.children,n))?e.return=e.value+"{"+i+"}":""}function Q(e){return I(K("",null,null,null,[""],e=k(e),0,[0],e))}function K(e,t,i,n,r,a,s,o,c){for(var h=0,f=0,g=s,y=0,b=0,x=0,w=1,A=1,S=1,_=0,E="",D=r,O=a,k=n,I=E;A;)switch(x=_,_=M()){case 40:if(108!=x&&58==p(I,g-1)){-1!=d(I+=u(R(_),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:I+=R(_);break;case 9:case 10:case 13:case 32:I+=L(x);break;case 92:I+=z(P()-1,7);continue;case 47:switch(T()){case 42:case 47:v(J(j(M(),P()),t,i),c);break;default:I+="/"}break;case 123*w:o[h++]=m(I)*S;case 125*w:case 59:case 0:switch(_){case 0:case 125:A=0;case 59+f:-1==S&&(I=u(I,/\f/g,"")),b>0&&m(I)-g&&v(b>32?$(I+";",n,i,g-1):$(u(I," ","")+";",n,i,g-2),c);break;case 59:I+=";";default:if(v(k=Z(I,t,i,h,f,r,o,E,D=[],O=[],g),a),123===_)if(0===f)K(I,t,k,k,D,a,g,o,O);else switch(99===y&&110===p(I,3)?100:y){case 100:case 108:case 109:case 115:K(e,k,k,n&&v(Z(e,k,k,0,0,r,o,E,r,D=[],g),O),r,O,g,o,n?D:O);break;default:K(I,k,k,k,[""],O,0,o,O)}}h=f=b=0,w=S=1,E=I="",g=s;break;case 58:g=1+m(I),b=x;default:if(w<1)if(123==_)--w;else if(125==_&&0==w++&&125==C())continue;switch(I+=l(_),_*w){case 38:S=f>0?1:(I+="\f",-1);break;case 44:o[h++]=(m(I)-1)*S,S=1;break;case 64:45===T()&&(I+=R(M())),y=T(),f=g=m(E=I+=F(P())),_++;break;case 45:45===x&&2==m(I)&&(w=0)}}return a}function Z(e,t,i,n,r,a,s,l,c,d,p){for(var m=r-1,v=0===r?a:[""],y=g(v),b=0,x=0,w=0;b<n;++b)for(var A=0,S=f(e,m+1,m=o(x=s[b])),E=e;A<y;++A)(E=h(x>0?v[A]+" "+S:u(S,/&\f/g,v[A])))&&(c[w++]=E);return _(e,t,i,0===r?H:l,c,d,p)}function J(e,t,i){return _(e,t,i,W,l(A),f(e,2,-2),0)}function $(e,t,i,n){return _(e,t,i,G,f(e,0,n),f(e,n+1,-1),n)}var ee=function(e,t,i){for(var n=0,r=0;n=r,r=T(),38===n&&12===r&&(t[i]=1),!O(r);)M();return D(e,w)},te=function(e,t){return I(function(e,t){var i=-1,n=44;do{switch(O(n)){case 0:38===n&&12===T()&&(t[i]=1),e[i]+=ee(w-1,t,i);break;case 2:e[i]+=R(n);break;case 4:if(44===n){e[++i]=58===T()?"&\f":"",t[i]=e[i].length;break}default:e[i]+=l(n)}}while(n=M());return e}(k(e),t))},ie=new WeakMap,ne=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,i=e.parent,n=e.column===i.column&&e.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ie.get(i))&&!n){ie.set(e,!0);for(var r=[],a=te(t,r),s=i.props,o=0,l=0;o<a.length;o++)for(var c=0;c<s.length;c++,l++)e.props[l]=r[o]?a[o].replace(/&\f/g,s[c]):s[c]+" "+a[o]}}},re=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ae(e,t){switch(function(e,t){return 45^p(e,0)?(((t<<2^p(e,0))<<2^p(e,1))<<2^p(e,2))<<2^p(e,3):0}(e,t)){case 5103:return V+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return V+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return V+e+U+e+N+e+e;case 6828:case 4268:return V+e+N+e+e;case 6165:return V+e+N+"flex-"+e+e;case 5187:return V+e+u(e,/(\w+).+(:[^]+)/,V+"box-$1$2"+N+"flex-$1$2")+e;case 5443:return V+e+N+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return V+e+N+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return V+e+N+u(e,"shrink","negative")+e;case 5292:return V+e+N+u(e,"basis","preferred-size")+e;case 6060:return V+"box-"+u(e,"-grow","")+V+e+N+u(e,"grow","positive")+e;case 4554:return V+u(e,/([^-])(transform)/g,"$1"+V+"$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,V+"$1"),/(image-set)/,V+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,V+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,V+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+V+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,V+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(m(e)-1-t>6)switch(p(e,t+1)){case 109:if(45!==p(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1"+V+"$2-$3$1"+U+(108==p(e,t+3)?"$3":"$2-$3"))+e;case 115:return~d(e,"stretch")?ae(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==p(e,t+1))break;case 6444:switch(p(e,m(e)-3-(~d(e,"!important")&&10))){case 107:return u(e,":",":"+V)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+V+(45===p(e,14)?"inline-":"")+"box$3$1"+V+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(p(e,t+11)){case 114:return V+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return V+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return V+e+N+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return V+e+N+e+e}return e}var se=[function(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=ae(e.value,e.length);break;case q:return Y([E(e,{value:u(e.value,"@","@"+V)})],n);case H:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Y([E(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Y([E(e,{props:[u(t,/:(plac\w+)/,":"+V+"input-$1")]}),E(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),E(e,{props:[u(t,/:(plac\w+)/,N+"input-$1")]})],n)}return""})}}],oe=function(e){var t=e.key;if("css"===t){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n,r,a=e.stylisPlugins||se,o={},l=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),i=1;i<t.length;i++)o[t[i]]=!0;l.push(e)});var c,h,u=[X,(h=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],d=function(e){var t=g(e);return function(i,n,r,a){for(var s="",o=0;o<t;o++)s+=e[o](i,n,r,a)||"";return s}}([ne,re].concat(a,u));r=function(e,t,i,n){c=i,Y(Q(e?e+"{"+t.styles+"}":t.styles),d),n&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new s({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:r};return p.sheet.hydrate(l),p};function le(e,t,i){var n="";return i.split(" ").forEach(function(i){void 0!==e[i]?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var ce=function(e,t,i){var n=e.key+"-"+t.name;!1===i&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},he=function(e,t,i){ce(e,t,i);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var r=t;do{e.insert(t===r?"."+n:"",r,e.sheet,!0),r=r.next}while(void 0!==r)}};var ue={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function de(e){var t=Object.create(null);return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}var pe=!1,fe=/[A-Z]|^ms/g,me=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ge=function(e){return 45===e.charCodeAt(1)},ve=function(e){return null!=e&&"boolean"!==typeof e},ye=de(function(e){return ge(e)?e:e.replace(fe,"-$&").toLowerCase()}),be=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(me,function(e,t,i){return Ae={name:t,styles:i,next:Ae},t})}return 1===ue[e]||ge(e)||"number"!==typeof t||0===t?t:t+"px"},xe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function we(e,t,i){if(null==i)return"";var n=i;if(void 0!==n.__emotion_styles)return n;switch(typeof i){case"boolean":return"";case"object":var r=i;if(1===r.anim)return Ae={name:r.name,styles:r.styles,next:Ae},r.name;var a=i;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)Ae={name:s.name,styles:s.styles,next:Ae},s=s.next;return a.styles+";"}return function(e,t,i){var n="";if(Array.isArray(i))for(var r=0;r<i.length;r++)n+=we(e,t,i[r])+";";else for(var a in i){var s=i[a];if("object"!==typeof s){var o=s;null!=t&&void 0!==t[o]?n+=a+"{"+t[o]+"}":ve(o)&&(n+=ye(a)+":"+be(a,o)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&pe)throw new Error(xe);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=we(e,t,s);switch(a){case"animation":case"animationName":n+=ye(a)+":"+l+";";break;default:n+=a+"{"+l+"}"}}else for(var c=0;c<s.length;c++)ve(s[c])&&(n+=ye(a)+":"+be(a,s[c])+";")}}return n}(e,t,i);case"function":if(void 0!==e){var o=Ae,l=i(e);return Ae=o,we(e,t,l)}}var c=i;if(null==t)return c;var h=t[c];return void 0!==h?h:c}var Ae,Se=/label:\s*([^\s;{]+)\s*(;|$)/g;function _e(e,t,i){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,r="";Ae=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,r+=we(i,t,a)):r+=a[0];for(var s=1;s<e.length;s++){if(r+=we(i,t,e[s]),n)r+=a[s]}Se.lastIndex=0;for(var o,l="";null!==(o=Se.exec(r));)l+="-"+o[1];var c=function(e){for(var t,i=0,n=0,r=e.length;r>=4;++n,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),i=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(r){case 3:i^=(255&e.charCodeAt(n+2))<<16;case 2:i^=(255&e.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(r)+l;return{name:c,styles:r,next:Ae}}var Ee=!!a.useInsertionEffect&&a.useInsertionEffect,Ce=Ee||function(e){return e()},Me=Ee||r.useLayoutEffect,Te=r.createContext("undefined"!==typeof HTMLElement?oe({key:"css"}):null),Pe=Te.Provider,De=function(e){return(0,r.forwardRef)(function(t,i){var n=(0,r.useContext)(Te);return e(t,n,i)})},Oe=r.createContext({});var ke={}.hasOwnProperty,Ie="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Re=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return ce(t,i,n),Ce(function(){return he(t,i,n)}),null},Le=De(function(e,t,i){var n=e.css;"string"===typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var a=e[Ie],s=[n],o="";"string"===typeof e.className?o=le(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var l=_e(s,void 0,r.useContext(Oe));o+=t.key+"-"+l.name;var c={};for(var h in e)ke.call(e,h)&&"css"!==h&&h!==Ie&&(c[h]=e[h]);return c.className=o,i&&(c.ref=i),r.createElement(r.Fragment,null,r.createElement(Re,{cache:t,serialized:l,isStringTag:"string"===typeof a}),r.createElement(a,c))}),ze=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Be=de(function(e){return ze.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),je=function(e){return"theme"!==e},Fe=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Be:je},Ne=function(e,t,i){var n;if(t){var r=t.shouldForwardProp;n=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof n&&i&&(n=e.__emotion_forwardProp),n},Ue=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return ce(t,i,n),Ce(function(){return he(t,i,n)}),null},Ve=function e(t,i){var a,s,o=t.__emotion_real===t,l=o&&t.__emotion_base||t;void 0!==i&&(a=i.label,s=i.target);var c=Ne(t,i,o),h=c||Fe(l),u=!h("as");return function(){var d=arguments,p=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&p.push("label:"+a+";"),null==d[0]||void 0===d[0].raw)p.push.apply(p,d);else{var f=d[0];p.push(f[0]);for(var m=d.length,g=1;g<m;g++)p.push(d[g],f[g])}var v=De(function(e,t,i){var n=u&&e.as||l,a="",o=[],d=e;if(null==e.theme){for(var f in d={},e)d[f]=e[f];d.theme=r.useContext(Oe)}"string"===typeof e.className?a=le(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var m=_e(p.concat(o),t.registered,d);a+=t.key+"-"+m.name,void 0!==s&&(a+=" "+s);var g=u&&void 0===c?Fe(n):h,v={};for(var y in e)u&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=a,i&&(v.ref=i),r.createElement(r.Fragment,null,r.createElement(Ue,{cache:t,serialized:m,isStringTag:"string"===typeof n}),r.createElement(n,v))});return v.displayName=void 0!==a?a:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",v.defaultProps=t.defaultProps,v.__emotion_real=v,v.__emotion_base=l,v.__emotion_styles=p,v.__emotion_forwardProp=c,Object.defineProperty(v,"toString",{value:function(){return"."+s}}),v.withComponent=function(t,r){return e(t,(0,n.A)({},i,r,{shouldForwardProp:Ne(v,r,!0)})).apply(void 0,p)},v}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){Ve[e]=Ve(e)});i(219);var We=function(e,t){var i=arguments;if(null==t||!ke.call(t,"css"))return r.createElement.apply(void 0,i);var n=i.length,a=new Array(n);a[0]=Le,a[1]=function(e,t){var i={};for(var n in t)ke.call(t,n)&&(i[n]=t[n]);return i[Ie]=e,i}(e,t);for(var s=2;s<n;s++)a[s]=i[s];return r.createElement.apply(null,a)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(We||(We={}));var He=De(function(e,t){var i=_e([e.styles],void 0,r.useContext(Oe)),n=r.useRef();return Me(function(){var e=t.key+"-global",r=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,s=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return t.sheet.tags.length&&(r.before=t.sheet.tags[0]),null!==s&&(a=!0,s.setAttribute("data-emotion",e),r.hydrate([s])),n.current=[r,a],function(){r.flush()}},[t]),Me(function(){var e=n.current,r=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&he(t,i.next,!0),r.tags.length){var a=r.tags[r.tags.length-1].nextElementSibling;r.before=a,r.flush()}t.insert("",i,r,!1)}},[t,i.name]),null});function Ge(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return _e(t)}function qe(){var e=Ge.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Ye=i(579);const Xe=new Map;function Qe(e){const{injectFirst:t,enableCssLayer:i,children:n}=e,a=r.useMemo(()=>{const e="".concat(t,"-").concat(i);if("object"===typeof document&&Xe.has(e))return Xe.get(e);const n=function(e,t){const i=oe({key:"css",prepend:e});if(t){const e=i.insert;i.insert=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i[1].styles.match(/^@layer\s+[^{]*$/)||(i[1].styles="@layer mui {".concat(i[1].styles,"}")),e(...i)}}return i}(t,i);return Xe.set(e,n),n},[t,i]);return t||i?(0,Ye.jsx)(Pe,{value:a,children:n}):n}function Ke(e){const{styles:t,defaultTheme:i={}}=e,n="function"===typeof t?e=>{return t(void 0===(n=e)||null===n||0===Object.keys(n).length?i:e);var n}:t;return(0,Ye.jsx)(He,{styles:n})}function Ze(e,t){return Ve(e,t)}const Je=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},$e=[];function et(e){return $e[0]=e,_e($e)}},1725:(e,t,i)=>{"use strict";var n=i(1238).Y,r="undefined"!==typeof window?window.matchMedia:null;function a(e,t,i){var a,s=this;function o(e){s.matches=e.matches,s.media=e.media}r&&!i&&(a=r.call(window,e)),a?(this.matches=a.matches,this.media=a.media,a.addListener(o)):(this.matches=n(e,t),this.media=e),this.addListener=function(e){a&&a.addListener(e)},this.removeListener=function(e){a&&a.removeListener(e)},this.dispose=function(){a&&a.removeListener(o)}}e.exports=function(e,t,i){return new a(e,t,i)}},1867:(e,t,i)=>{"use strict";var n=i(4994);t.A=void 0;var r=n(i(39)),a=i(579);t.A=(0,r.default)((0,a.jsx)("path",{d:"M7 3H4v3H2V1h5zm15 3V1h-5v2h3v3zM7 21H4v-3H2v5h5zm13-3v3h-3v2h5v-5zm-1 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2zM15 8H9v2h6zm0 3H9v2h6zm0 3H9v2h6z"}),"DocumentScanner")},2123:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var a,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))i.call(a,c)&&(o[c]=a[c]);if(t){s=t(a);for(var h=0;h<s.length;h++)n.call(a,s[h])&&(o[s[h]]=a[s[h]])}}return o}},2284:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}i.d(t,{A:()=>n})},2540:(e,t,i)=>{"use strict";i.r(t),i.d(t,{capitalize:()=>r.A,createChainedFunction:()=>a,createSvgIcon:()=>s.A,debounce:()=>o,deprecatedPropType:()=>l,isMuiElement:()=>u,ownerDocument:()=>p,ownerWindow:()=>f,requirePropFactory:()=>m,setRef:()=>v,unstable_ClassNameGenerator:()=>B,unstable_useEnhancedEffect:()=>b,unstable_useId:()=>A,unsupportedProp:()=>S,useControlled:()=>_,useEventCallback:()=>E,useForkRef:()=>C,useIsFocusVisible:()=>z});var n=i(9386),r=i(6803);const a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t)=>null==t?e:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)},()=>{})};var s=i(8693);const o=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];clearTimeout(t),t=setTimeout(()=>{e.apply(this,r)},i)}return n.clear=()=>{clearTimeout(t)},n};const l=function(e,t){return()=>null};var c=i(5043),h=i.t(c,2);const u=function(e,t){var i,n;return c.isValidElement(e)&&-1!==t.indexOf(null!=(i=e.type.muiName)?i:null==(n=e.type)||null==(n=n._payload)||null==(n=n.value)?void 0:n.muiName)};function d(e){return e&&e.ownerDocument||document}const p=d;const f=function(e){return d(e).defaultView||window};const m=function(e,t){return()=>null};function g(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const v=g,y="undefined"!==typeof window?c.useLayoutEffect:c.useEffect,b=y;let x=0;const w=h["useId".toString()];const A=function(e){if(void 0!==w){const t=w();return null!=e?e:t}return function(e){const[t,i]=c.useState(e),n=e||t;return c.useEffect(()=>{null==t&&(x+=1,i("mui-".concat(x)))},[t]),n}(e)};const S=function(e,t,i,n,r){return null};const _=function(e){let{controlled:t,default:i,name:n,state:r="value"}=e;const{current:a}=c.useRef(void 0!==t),[s,o]=c.useState(i);return[a?t:s,c.useCallback(e=>{a||o(e)},[])]};const E=function(e){const t=c.useRef(e);return y(()=>{t.current=e}),c.useRef(function(){return(0,t.current)(...arguments)}).current};const C=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c.useMemo(()=>t.every(e=>null==e)?null:e=>{t.forEach(t=>{g(t,e)})},t)};class M{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new M}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}let T=!0,P=!1;const D=new M,O={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function k(e){e.metaKey||e.altKey||e.ctrlKey||(T=!0)}function I(){T=!1}function R(){"hidden"===this.visibilityState&&P&&(T=!0)}function L(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(i){}return T||function(e){const{type:t,tagName:i}=e;return!("INPUT"!==i||!O[t]||e.readOnly)||"TEXTAREA"===i&&!e.readOnly||!!e.isContentEditable}(t)}const z=function(){const e=c.useCallback(e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",k,!0),t.addEventListener("mousedown",I,!0),t.addEventListener("pointerdown",I,!0),t.addEventListener("touchstart",I,!0),t.addEventListener("visibilitychange",R,!0))},[]),t=c.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!L(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(P=!0,D.start(100,()=>{P=!1}),t.current=!1,!0)},ref:e}},B={configure:e=>{n.A.configure(e)}}},2730:(e,t,i)=>{"use strict";var n=i(5043),r=i(7067);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,i,n,r,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,i,n){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!u.call(f,e)||!u.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var z,B=Object.assign;function j(e){if(void 0===z)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var F=!1;function N(e,t){if(!e||F)return"";F=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=n.stack.split("\n"),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||r[s]!==a[o]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=N(e.type,!1);case 11:return e=N(e.type.render,!1);case 1:return e=N(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case A:return"Portal";case E:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return V(e(t))}catch(i){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var i=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function K(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=H(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Z(e,t);var i=H(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&X(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+H(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(a(92));if(te(i)){if(1<i.length)throw Error(a(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:H(i)}}function ae(e,t){var i=H(t.value),n=H(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=fe(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(de).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]})});var ge=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ae=null,Se=null;function _e(e){if(e=mr(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=vr(t),we(e.stateNode,e.type,t))}}function Ee(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function Ce(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Me(e,t){return e(t)}function Te(){}var Pe=!1;function De(e,t,i){if(Pe)return e(t,i);Pe=!0;try{return Me(e,t,i)}finally{Pe=!1,(null!==Ae||null!==Se)&&(Te(),Ce())}}function Oe(e,t){var i=e.stateNode;if(null===i)return null;var n=vr(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(a(231,t,typeof i));return i}var ke=!1;if(h)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(eh){ke=!1}function Re(e,t,i,n,r,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(h){this.onError(h)}}var Le=!1,ze=null,Be=!1,je=null,Fe={onError:function(e){Le=!0,ze=e}};function Ne(e,t,i,n,r,a,s,o,l){Le=!1,ze=null,Re.apply(Fe,arguments)}function Ue(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(n=r.return)){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return We(r),e;if(s===n)return We(r),t;s=s.sibling}throw Error(a(188))}if(i.return!==n.return)i=r,n=s;else{for(var o=!1,l=r.child;l;){if(l===i){o=!0,i=r,n=s;break}if(l===n){o=!0,n=r,i=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===i){o=!0,i=s,n=r;break}if(l===n){o=!0,n=s,i=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(i.alternate!==n)throw Error(a(190))}if(3!==i.tag)throw Error(a(188));return i.stateNode.current===i?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ke=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,$e=r.unstable_UserBlockingPriority,et=r.unstable_NormalPriority,tt=r.unstable_LowPriority,it=r.unstable_IdlePriority,nt=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ot|0)|0},st=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,a=e.pingedLanes,s=268435455&i;if(0!==s){var o=s&~r;0!==o?n=ht(o):0!==(a&=s)&&(n=ht(a))}else 0!==(s=i&~r)?n=ht(s):0!==a&&(n=ht(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-at(t)),n|=e[i],t&=~r;return n}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function gt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-at(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,At,St,_t,Et=!1,Ct=[],Mt=null,Tt=null,Pt=null,Dt=new Map,Ot=new Map,kt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,i,n,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=mr(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function zt(e){var t=fr(e.target);if(null!==t){var i=Ue(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Ve(i)))return e.blockedOn=t,void _t(e.priority,function(){At(i)})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=mr(i))&&wt(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);be=n,i.target.dispatchEvent(n),be=null,t.shift()}return!0}function jt(e,t,i){Bt(e)&&i.delete(t)}function Ft(){Et=!1,null!==Mt&&Bt(Mt)&&(Mt=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Pt&&Bt(Pt)&&(Pt=null),Dt.forEach(jt),Ot.forEach(jt)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Ut(e){function t(t){return Nt(t,e)}if(0<Ct.length){Nt(Ct[0],e);for(var i=1;i<Ct.length;i++){var n=Ct[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Mt&&Nt(Mt,e),null!==Tt&&Nt(Tt,e),null!==Pt&&Nt(Pt,e),Dt.forEach(t),Ot.forEach(t),i=0;i<kt.length;i++)(n=kt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<kt.length&&null===(i=kt[0]).blockedOn;)zt(i),null===i.blockedOn&&kt.shift()}var Vt=x.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,i,n){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=1,qt(e,t,i,n)}finally{yt=r,Vt.transition=a}}function Gt(e,t,i,n){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=4,qt(e,t,i,n)}finally{yt=r,Vt.transition=a}}function qt(e,t,i,n){if(Wt){var r=Xt(e,t,i,n);if(null===r)Nn(e,t,n,Yt,i),Rt(e,n);else if(function(e,t,i,n,r){switch(t){case"focusin":return Mt=Lt(Mt,e,t,i,n,r),!0;case"dragenter":return Tt=Lt(Tt,e,t,i,n,r),!0;case"mouseover":return Pt=Lt(Pt,e,t,i,n,r),!0;case"pointerover":var a=r.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,i,n,r)),!0;case"gotpointercapture":return a=r.pointerId,Ot.set(a,Lt(Ot.get(a)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==r;){var a=mr(r);if(null!==a&&xt(a),null===(a=Xt(e,t,i,n))&&Nn(e,t,n,Yt,i),a===r)break;r=a}null!==r&&n.stopPropagation()}else Nn(e,t,n,null,i)}}var Yt=null;function Xt(e,t,i,n){if(Yt=null,null!==(e=fr(e=xe(n))))if(null===(t=Ue(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case $e:return 4;case et:case tt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,Jt=null;function $t(){if(Jt)return Jt;var e,t,i=Zt,n=i.length,r="value"in Kt?Kt.value:Kt.textContent,a=r.length;for(e=0;e<n&&i[e]===r[e];e++);var s=n-e;for(t=1;t<=s&&i[n-t]===r[a-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function ei(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ti(){return!0}function ii(){return!1}function ni(e){function t(t,i,n,r,a){for(var s in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ti:ii,this.isPropagationStopped=ii,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var ri,ai,si,oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=ni(oi),ci=B({},oi,{view:0,detail:0}),hi=ni(ci),ui=B({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ai,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&"mousemove"===e.type?(ri=e.screenX-si.screenX,ai=e.screenY-si.screenY):ai=ri=0,si=e),ri)},movementY:function(e){return"movementY"in e?e.movementY:ai}}),di=ni(ui),pi=ni(B({},ui,{dataTransfer:0})),fi=ni(B({},ci,{relatedTarget:0})),mi=ni(B({},oi,{animationName:0,elapsedTime:0,pseudoElement:0})),gi=ni(B({},oi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vi=ni(B({},oi,{data:0})),yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xi[e])&&!!t[e]}function Ai(){return wi}var Si=ni(B({},ci,{key:function(e){if(e.key){var t=yi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ei(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ai,charCode:function(e){return"keypress"===e.type?ei(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ei(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_i=ni(B({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ei=ni(B({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ai})),Ci=ni(B({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mi=ni(B({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ti=[9,13,27,32],Pi=h&&"CompositionEvent"in window,Di=null;h&&"documentMode"in document&&(Di=document.documentMode);var Oi=h&&"TextEvent"in window&&!Di,ki=h&&(!Pi||Di&&8<Di&&11>=Di),Ii=String.fromCharCode(32),Ri=!1;function Li(e,t){switch(e){case"keyup":return-1!==Ti.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bi=!1;var ji={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ji[e.type]:"textarea"===t}function Ni(e,t,i,n){Ee(n),0<(t=Vn(t,"onChange")).length&&(i=new li("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Ui=null,Vi=null;function Wi(e){Rn(e,0)}function Hi(e){if(Y(gr(e)))return e}function Gi(e,t){if("change"===e)return t}var qi=!1;if(h){var Yi;if(h){var Xi="oninput"in document;if(!Xi){var Qi=document.createElement("div");Qi.setAttribute("oninput","return;"),Xi="function"===typeof Qi.oninput}Yi=Xi}else Yi=!1;qi=Yi&&(!document.documentMode||9<document.documentMode)}function Ki(){Ui&&(Ui.detachEvent("onpropertychange",Zi),Vi=Ui=null)}function Zi(e){if("value"===e.propertyName&&Hi(Vi)){var t=[];Ni(t,Vi,e,xe(e)),De(Wi,t)}}function Ji(e,t,i){"focusin"===e?(Ki(),Vi=i,(Ui=t).attachEvent("onpropertychange",Zi)):"focusout"===e&&Ki()}function $i(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hi(Vi)}function en(e,t){if("click"===e)return Hi(t)}function tn(e,t){if("input"===e||"change"===e)return Hi(t)}var nn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function rn(e,t){if(nn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!u.call(t,r)||!nn(e[r],t[r]))return!1}return!0}function an(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sn(e,t){var i,n=an(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=an(n)}}function on(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?on(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ln(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=X((e=t.contentWindow).document)}return t}function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hn(e){var t=ln(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&on(i.ownerDocument.documentElement,i)){if(null!==n&&cn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,a=Math.min(n.start,r);n=void 0===n.end?a:Math.min(n.end,r),!e.extend&&a>n&&(r=n,n=a,a=r),r=sn(i,a);var s=sn(i,n);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var un=h&&"documentMode"in document&&11>=document.documentMode,dn=null,pn=null,fn=null,mn=!1;function gn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;mn||null==dn||dn!==X(n)||("selectionStart"in(n=dn)&&cn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},fn&&rn(fn,n)||(fn=n,0<(n=Vn(pn,"onSelect")).length&&(t=new li("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=dn)))}function vn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var yn={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},bn={},xn={};function wn(e){if(bn[e])return bn[e];if(!yn[e])return e;var t,i=yn[e];for(t in i)if(i.hasOwnProperty(t)&&t in xn)return bn[e]=i[t];return e}h&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);var An=wn("animationend"),Sn=wn("animationiteration"),_n=wn("animationstart"),En=wn("transitionend"),Cn=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){Cn.set(e,t),l(t,[e])}for(var Pn=0;Pn<Mn.length;Pn++){var Dn=Mn[Pn];Tn(Dn.toLowerCase(),"on"+(Dn[0].toUpperCase()+Dn.slice(1)))}Tn(An,"onAnimationEnd"),Tn(Sn,"onAnimationIteration"),Tn(_n,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(En,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kn=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function In(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,s,o,l,c){if(Ne.apply(this,arguments),Le){if(!Le)throw Error(a(198));var h=ze;Le=!1,ze=null,Be||(Be=!0,je=h)}}(n,t,void 0,e),e.currentTarget=null}function Rn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;In(r,o,c),a=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;In(r,o,c),a=l}}}if(Be)throw e=je,Be=!1,je=null,e}function Ln(e,t){var i=t[ur];void 0===i&&(i=t[ur]=new Set);var n=e+"__bubble";i.has(n)||(Fn(t,e,2,!1),i.add(n))}function zn(e,t,i){var n=0;t&&(n|=4),Fn(i,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Bn]){e[Bn]=!0,s.forEach(function(t){"selectionchange"!==t&&(kn.has(t)||zn(t,!1,e),zn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,zn("selectionchange",!1,t))}}function Fn(e,t,i,n){switch(Qt(t)){case 1:var r=Ht;break;case 4:r=Gt;break;default:r=qt}i=r.bind(null,t,i,e),r=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Nn(e,t,i,n,r){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==o;){if(null===(s=fr(o)))return;if(5===(l=s.tag)||6===l){n=a=s;continue e}o=o.parentNode}}n=n.return}De(function(){var n=a,r=xe(i),s=[];e:{var o=Cn.get(e);if(void 0!==o){var l=li,c=e;switch(e){case"keypress":if(0===ei(i))break e;case"keydown":case"keyup":l=Si;break;case"focusin":c="focus",l=fi;break;case"focusout":c="blur",l=fi;break;case"beforeblur":case"afterblur":l=fi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ei;break;case An:case Sn:case _n:l=mi;break;case En:l=Ci;break;case"scroll":l=hi;break;case"wheel":l=Mi;break;case"copy":case"cut":case"paste":l=gi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_i}var h=0!==(4&t),u=!h&&"scroll"===e,d=h?null!==o?o+"Capture":null:o;h=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Oe(f,d))&&h.push(Un(f,m,p)))),u)break;f=f.return}0<h.length&&(o=new l(o,c,null,i,r),s.push({event:o,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||i===be||!(c=i.relatedTarget||i.fromElement)||!fr(c)&&!c[hr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?fr(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=di,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=_i,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==l?o:gr(l),p=null==c?o:gr(c),(o=new h(m,f+"leave",l,i,r)).target=u,o.relatedTarget=p,m=null,fr(r)===n&&((h=new h(d,f+"enter",c,i,r)).target=p,h.relatedTarget=u,m=h),u=m,l&&c)e:{for(d=c,f=0,p=h=l;p;p=Wn(p))f++;for(p=0,m=d;m;m=Wn(m))p++;for(;0<f-p;)h=Wn(h),f--;for(;0<p-f;)d=Wn(d),p--;for(;f--;){if(h===d||null!==d&&h===d.alternate)break e;h=Wn(h),d=Wn(d)}h=null}else h=null;null!==l&&Hn(s,o,l,h,!1),null!==c&&null!==u&&Hn(s,u,c,h,!0)}if("select"===(l=(o=n?gr(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Gi;else if(Fi(o))if(qi)g=tn;else{g=$i;var v=Ji}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=en);switch(g&&(g=g(e,n))?Ni(s,g,i,r):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=n?gr(n):window,e){case"focusin":(Fi(v)||"true"===v.contentEditable)&&(dn=v,pn=n,fn=null);break;case"focusout":fn=pn=dn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,gn(s,i,r);break;case"selectionchange":if(un)break;case"keydown":case"keyup":gn(s,i,r)}var y;if(Pi)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bi?Li(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(ki&&"ko"!==i.locale&&(Bi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bi&&(y=$t()):(Zt="value"in(Kt=r)?Kt.value:Kt.textContent,Bi=!0)),0<(v=Vn(n,b)).length&&(b=new vi(b,e,null,i,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=zi(i))&&(b.data=y))),(y=Oi?function(e,t){switch(e){case"compositionend":return zi(t);case"keypress":return 32!==t.which?null:(Ri=!0,Ii);case"textInput":return(e=t.data)===Ii&&Ri?null:e;default:return null}}(e,i):function(e,t){if(Bi)return"compositionend"===e||!Pi&&Li(e,t)?(e=$t(),Jt=Zt=Kt=null,Bi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ki&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Vn(n,"onBeforeInput")).length&&(r=new vi("onBeforeInput","beforeinput",null,i,r),s.push({event:r,listeners:n}),r.data=y))}Rn(s,t)})}function Un(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Vn(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Oe(e,i))&&n.unshift(Un(e,a,r)),null!=(a=Oe(e,t))&&n.push(Un(e,a,r))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hn(e,t,i,n,r){for(var a=t._reactName,s=[];null!==i&&i!==n;){var o=i,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Oe(i,a))&&s.unshift(Un(i,l,o)):r||null!=(l=Oe(i,a))&&s.push(Un(i,l,o))),i=i.return}0!==s.length&&e.push({event:t,listeners:s})}var Gn=/\r\n?/g,qn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Gn,"\n").replace(qn,"")}function Xn(e,t,i){if(t=Yn(t),Yn(e)!==t&&i)throw Error(a(425))}function Qn(){}var Kn=null,Zn=null;function Jn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $n="function"===typeof setTimeout?setTimeout:void 0,er="function"===typeof clearTimeout?clearTimeout:void 0,tr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof tr?function(e){return tr.resolve(null).then(e).catch(nr)}:$n;function nr(e){setTimeout(function(){throw e})}function rr(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)){if(0===n)return e.removeChild(r),void Ut(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=r}while(i);Ut(t)}function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function sr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var or=Math.random().toString(36).slice(2),lr="__reactFiber$"+or,cr="__reactProps$"+or,hr="__reactContainer$"+or,ur="__reactEvents$"+or,dr="__reactListeners$"+or,pr="__reactHandles$"+or;function fr(e){var t=e[lr];if(t)return t;for(var i=e.parentNode;i;){if(t=i[hr]||i[lr]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=sr(e);null!==e;){if(i=e[lr])return i;e=sr(e)}return t}i=(e=i).parentNode}return null}function mr(e){return!(e=e[lr]||e[hr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function gr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function vr(e){return e[cr]||null}var yr=[],br=-1;function xr(e){return{current:e}}function wr(e){0>br||(e.current=yr[br],yr[br]=null,br--)}function Ar(e,t){br++,yr[br]=e.current,e.current=t}var Sr={},_r=xr(Sr),Er=xr(!1),Cr=Sr;function Mr(e,t){var i=e.type.contextTypes;if(!i)return Sr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in i)a[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Tr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){wr(Er),wr(_r)}function Dr(e,t,i){if(_r.current!==Sr)throw Error(a(168));Ar(_r,t),Ar(Er,i)}function Or(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(a(108,W(e)||"Unknown",r));return B({},i,n)}function kr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Cr=_r.current,Ar(_r,e),Ar(Er,Er.current),!0}function Ir(e,t,i){var n=e.stateNode;if(!n)throw Error(a(169));i?(e=Or(e,t,Cr),n.__reactInternalMemoizedMergedChildContext=e,wr(Er),wr(_r),Ar(_r,e)):wr(Er),Ar(Er,i)}var Rr=null,Lr=!1,zr=!1;function Br(e){null===Rr?Rr=[e]:Rr.push(e)}function jr(){if(!zr&&null!==Rr){zr=!0;var e=0,t=yt;try{var i=Rr;for(yt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}Rr=null,Lr=!1}catch(r){throw null!==Rr&&(Rr=Rr.slice(e+1)),qe(Je,jr),r}finally{yt=t,zr=!1}}return null}var Fr=[],Nr=0,Ur=null,Vr=0,Wr=[],Hr=0,Gr=null,qr=1,Yr="";function Xr(e,t){Fr[Nr++]=Vr,Fr[Nr++]=Ur,Ur=e,Vr=t}function Qr(e,t,i){Wr[Hr++]=qr,Wr[Hr++]=Yr,Wr[Hr++]=Gr,Gr=e;var n=qr;e=Yr;var r=32-at(n)-1;n&=~(1<<r),i+=1;var a=32-at(t)+r;if(30<a){var s=r-r%5;a=(n&(1<<s)-1).toString(32),n>>=s,r-=s,qr=1<<32-at(t)+r|i<<r|n,Yr=a+e}else qr=1<<a|i<<r|n,Yr=e}function Kr(e){null!==e.return&&(Xr(e,1),Qr(e,1,0))}function Zr(e){for(;e===Ur;)Ur=Fr[--Nr],Fr[Nr]=null,Vr=Fr[--Nr],Fr[Nr]=null;for(;e===Gr;)Gr=Wr[--Hr],Wr[Hr]=null,Yr=Wr[--Hr],Wr[Hr]=null,qr=Wr[--Hr],Wr[Hr]=null}var Jr=null,$r=null,ea=!1,ta=null;function ia(e,t){var i=Mc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function na(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Jr=e,$r=ar(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Jr=e,$r=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Gr?{id:qr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Mc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,Jr=e,$r=null,!0);default:return!1}}function ra(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$r;if(t){var i=t;if(!na(e,t)){if(ra(e))throw Error(a(418));t=ar(i.nextSibling);var n=Jr;t&&na(e,t)?ia(n,i):(e.flags=-4097&e.flags|2,ea=!1,Jr=e)}}else{if(ra(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,Jr=e}}}function sa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Jr=e}function oa(e){if(e!==Jr)return!1;if(!ea)return sa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jn(e.type,e.memoizedProps)),t&&(t=$r)){if(ra(e))throw la(),Error(a(418));for(;t;)ia(e,t),t=ar(t.nextSibling)}if(sa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){$r=ar(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}$r=null}}else $r=Jr?ar(e.stateNode.nextSibling):null;return!0}function la(){for(var e=$r;e;)e=ar(e.nextSibling)}function ca(){$r=Jr=null,ea=!1}function ha(e){null===ta?ta=[e]:ta.push(e)}var ua=x.ReactCurrentBatchConfig;function da(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(a(309));var n=i.stateNode}if(!n)throw Error(a(147,e));var r=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!i._owner)throw Error(a(290,e))}return e}function pa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fa(e){return(0,e._init)(e._payload)}function ma(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Ic(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){var a=i.type;return a===S?u(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===k&&fa(a)===t.type)?((n=r(t,i.props)).ref=da(e,t,i),n.return=e,n):((n=Dc(i.type,i.key,i.props,null,e.mode,n)).ref=da(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Rc(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function u(e,t,i,n,a){return null===t||7!==t.tag?((t=Oc(i,e.mode,n,a)).return=e,t):((t=r(t,i)).return=e,t)}function d(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(i=Dc(t.type,t.key,t.props,null,e.mode,i)).ref=da(e,null,t),i.return=e,i;case A:return(t=Rc(t,e.mode,i)).return=e,t;case k:return d(e,(0,t._init)(t._payload),i)}if(te(t)||L(t))return(t=Oc(t,e.mode,i,null)).return=e,t;pa(e,t)}return null}function p(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===r?c(e,t,i,n):null;case A:return i.key===r?h(e,t,i,n):null;case k:return p(e,t,(r=i._init)(i._payload),n)}if(te(i)||L(i))return null!==r?null:u(e,t,i,n,null);pa(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r);case A:return h(t,e=e.get(null===n.key?i:n.key)||null,n,r);case k:return f(e,t,i,(0,n._init)(n._payload),r)}if(te(n)||L(n))return u(t,e=e.get(i)||null,n,r,null);pa(t,n)}return null}function m(r,a,o,l){for(var c=null,h=null,u=a,m=a=0,g=null;null!==u&&m<o.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(r,u,o[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(r,u),a=s(v,a,m),null===h?c=v:h.sibling=v,h=v,u=g}if(m===o.length)return i(r,u),ea&&Xr(r,m),c;if(null===u){for(;m<o.length;m++)null!==(u=d(r,o[m],l))&&(a=s(u,a,m),null===h?c=u:h.sibling=u,h=u);return ea&&Xr(r,m),c}for(u=n(r,u);m<o.length;m++)null!==(g=f(u,r,m,o[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=s(g,a,m),null===h?c=g:h.sibling=g,h=g);return e&&u.forEach(function(e){return t(r,e)}),ea&&Xr(r,m),c}function g(r,o,l,c){var h=L(l);if("function"!==typeof h)throw Error(a(150));if(null==(l=h.call(l)))throw Error(a(151));for(var u=h=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(r,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(r,m),o=s(b,o,g),null===u?h=b:u.sibling=b,u=b,m=v}if(y.done)return i(r,m),ea&&Xr(r,g),h;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,c))&&(o=s(y,o,g),null===u?h=y:u.sibling=y,u=y);return ea&&Xr(r,g),h}for(m=n(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=s(y,o,g),null===u?h=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(r,e)}),ea&&Xr(r,g),h}return function e(n,a,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,h=a;null!==h;){if(h.key===c){if((c=s.type)===S){if(7===h.tag){i(n,h.sibling),(a=r(h,s.props.children)).return=n,n=a;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===k&&fa(c)===h.type){i(n,h.sibling),(a=r(h,s.props)).ref=da(n,h,s),a.return=n,n=a;break e}i(n,h);break}t(n,h),h=h.sibling}s.type===S?((a=Oc(s.props.children,n.mode,l,s.key)).return=n,n=a):((l=Dc(s.type,s.key,s.props,null,n.mode,l)).ref=da(n,a,s),l.return=n,n=l)}return o(n);case A:e:{for(h=s.key;null!==a;){if(a.key===h){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){i(n,a.sibling),(a=r(a,s.children||[])).return=n,n=a;break e}i(n,a);break}t(n,a),a=a.sibling}(a=Rc(s,n.mode,l)).return=n,n=a}return o(n);case k:return e(n,a,(h=s._init)(s._payload),l)}if(te(s))return m(n,a,s,l);if(L(s))return g(n,a,s,l);pa(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(i(n,a.sibling),(a=r(a,s)).return=n,n=a):(i(n,a),(a=Ic(s,n.mode,l)).return=n,n=a),o(n)):i(n,a)}}var ga=ma(!0),va=ma(!1),ya=xr(null),ba=null,xa=null,wa=null;function Aa(){wa=xa=ba=null}function Sa(e){var t=ya.current;wr(ya),e._currentValue=t}function _a(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Ea(e,t){ba=e,wa=xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mo=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===xa){if(null===ba)throw Error(a(308));xa=e,ba.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var Ma=null;function Ta(e){null===Ma?Ma=[e]:Ma.push(e)}function Pa(e,t,i,n){var r=t.interleaved;return null===r?(i.next=i,Ta(t)):(i.next=r.next,r.next=i),t.interleaved=i,Da(e,n)}function Da(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Oa=!1;function ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&_l)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Da(e,i)}return null===(r=n.interleaved)?(t.next=t,Ta(n)):(t.next=r.next,r.next=t),n.interleaved=t,Da(e,i)}function za(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}function Ba(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,a=null;if(null!==(i=i.firstBaseUpdate)){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===a?r=a=s:a=a.next=s,i=i.next}while(null!==i);null===a?r=a=t:a=a.next=t}else r=a=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ja(e,t,i,n){var r=e.updateQueue;Oa=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==a){var u=r.baseState;for(s=0,h=c=l=null,o=a;;){var d=o.lane,p=o.eventTime;if((n&d)===d){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=i,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,u,d):f)||void 0===d)break e;u=B({},u,d);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,l=u):h=h.next=p,s|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===h&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);kl|=s,e.lanes=s,e.memoizedState=u}}function Fa(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(a(191,r));r.call(n)}}}var Na={},Ua=xr(Na),Va=xr(Na),Wa=xr(Na);function Ha(e){if(e===Na)throw Error(a(174));return e}function Ga(e,t){switch(Ar(Wa,t),Ar(Va,e),Ar(Ua,Na),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wr(Ua),Ar(Ua,t)}function qa(){wr(Ua),wr(Va),wr(Wa)}function Ya(e){Ha(Wa.current);var t=Ha(Ua.current),i=le(t,e.type);t!==i&&(Ar(Va,e),Ar(Ua,i))}function Xa(e){Va.current===e&&(wr(Ua),wr(Va))}var Qa=xr(0);function Ka(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Za=[];function Ja(){for(var e=0;e<Za.length;e++)Za[e]._workInProgressVersionPrimary=null;Za.length=0}var $a=x.ReactCurrentDispatcher,es=x.ReactCurrentBatchConfig,ts=0,is=null,ns=null,rs=null,as=!1,ss=!1,os=0,ls=0;function cs(){throw Error(a(321))}function hs(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!nn(e[i],t[i]))return!1;return!0}function us(e,t,i,n,r,s){if(ts=s,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Xs:Qs,e=i(n,r),ss){s=0;do{if(ss=!1,os=0,25<=s)throw Error(a(301));s+=1,rs=ns=null,t.updateQueue=null,$a.current=Ks,e=i(n,r)}while(ss)}if($a.current=Ys,t=null!==ns&&null!==ns.next,ts=0,rs=ns=is=null,as=!1,t)throw Error(a(300));return e}function ds(){var e=0!==os;return os=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rs?is.memoizedState=rs=e:rs=rs.next=e,rs}function fs(){if(null===ns){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=ns.next;var t=null===rs?is.memoizedState:rs.next;if(null!==t)rs=t,ns=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ns=e).memoizedState,baseState:ns.baseState,baseQueue:ns.baseQueue,queue:ns.queue,next:null},null===rs?is.memoizedState=rs=e:rs=rs.next=e}return rs}function ms(e,t){return"function"===typeof t?t(e):t}function gs(e){var t=fs(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=ns,r=n.baseQueue,s=i.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,i.pending=null}if(null!==r){s=r.next,n=n.baseState;var l=o=null,c=null,h=s;do{var u=h.lane;if((ts&u)===u)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=d,o=n):c=c.next=d,is.lanes|=u,kl|=u}h=h.next}while(null!==h&&h!==s);null===c?o=n:c.next=l,nn(n,t.memoizedState)||(mo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{s=r.lane,is.lanes|=s,kl|=s,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function vs(e){var t=fs(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(null!==r){i.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);nn(s,t.memoizedState)||(mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function ys(){}function bs(e,t){var i=is,n=fs(),r=t(),s=!nn(n.memoizedState,r);if(s&&(n.memoizedState=r,mo=!0),n=n.queue,Os(As.bind(null,i,n,e),[e]),n.getSnapshot!==t||s||null!==rs&&1&rs.memoizedState.tag){if(i.flags|=2048,Cs(9,ws.bind(null,i,n,r,t),void 0,null),null===El)throw Error(a(349));0!==(30&ts)||xs(i,t,r)}return r}function xs(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function ws(e,t,i,n){t.value=i,t.getSnapshot=n,Ss(t)&&_s(e)}function As(e,t,i){return i(function(){Ss(t)&&_s(e)})}function Ss(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!nn(e,i)}catch(n){return!0}}function _s(e){var t=Da(e,1);null!==t&&Jl(t,e,1,-1)}function Es(e){var t=ps();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t.queue=e,e=e.dispatch=Ws.bind(null,is,e),[t.memoizedState,e]}function Cs(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Ms(){return fs().memoizedState}function Ts(e,t,i,n){var r=ps();is.flags|=e,r.memoizedState=Cs(1|t,i,void 0,void 0===n?null:n)}function Ps(e,t,i,n){var r=fs();n=void 0===n?null:n;var a=void 0;if(null!==ns){var s=ns.memoizedState;if(a=s.destroy,null!==n&&hs(n,s.deps))return void(r.memoizedState=Cs(t,i,a,n))}is.flags|=e,r.memoizedState=Cs(1|t,i,a,n)}function Ds(e,t){return Ts(8390656,8,e,t)}function Os(e,t){return Ps(2048,8,e,t)}function ks(e,t){return Ps(4,2,e,t)}function Is(e,t){return Ps(4,4,e,t)}function Rs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ls(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ps(4,4,Rs.bind(null,t,e),i)}function zs(){}function Bs(e,t){var i=fs();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&hs(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function js(e,t){var i=fs();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&hs(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Fs(e,t,i){return 0===(21&ts)?(e.baseState&&(e.baseState=!1,mo=!0),e.memoizedState=i):(nn(i,t)||(i=ft(),is.lanes|=i,kl|=i,e.baseState=!0),t)}function Ns(e,t){var i=yt;yt=0!==i&&4>i?i:4,e(!0);var n=es.transition;es.transition={};try{e(!1),t()}finally{yt=i,es.transition=n}}function Us(){return fs().memoizedState}function Vs(e,t,i){var n=Zl(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Hs(e))Gs(t,i);else if(null!==(i=Pa(e,t,i,n))){Jl(i,e,n,Kl()),qs(i,t,n)}}function Ws(e,t,i){var n=Zl(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Hs(e))Gs(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,i);if(r.hasEagerState=!0,r.eagerState=o,nn(o,s)){var l=t.interleaved;return null===l?(r.next=r,Ta(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(i=Pa(e,t,r,n))&&(Jl(i,e,n,r=Kl()),qs(i,t,n))}}function Hs(e){var t=e.alternate;return e===is||null!==t&&t===is}function Gs(e,t){ss=as=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function qs(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}var Ys={readContext:Ca,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},Xs={readContext:Ca,useCallback:function(e,t){return ps().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Ds,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ts(4194308,4,Rs.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ts(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ts(4,2,e,t)},useMemo:function(e,t){var i=ps();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=ps();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Vs.bind(null,is,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ps().memoizedState=e},useState:Es,useDebugValue:zs,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=Es(!1),t=e[0];return e=Ns.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=is,r=ps();if(ea){if(void 0===i)throw Error(a(407));i=i()}else{if(i=t(),null===El)throw Error(a(349));0!==(30&ts)||xs(n,t,i)}r.memoizedState=i;var s={value:i,getSnapshot:t};return r.queue=s,Ds(As.bind(null,n,s,e),[e]),n.flags|=2048,Cs(9,ws.bind(null,n,s,i,t),void 0,null),i},useId:function(){var e=ps(),t=El.identifierPrefix;if(ea){var i=Yr;t=":"+t+"R"+(i=(qr&~(1<<32-at(qr)-1)).toString(32)+i),0<(i=os++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=ls++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qs={readContext:Ca,useCallback:Bs,useContext:Ca,useEffect:Os,useImperativeHandle:Ls,useInsertionEffect:ks,useLayoutEffect:Is,useMemo:js,useReducer:gs,useRef:Ms,useState:function(){return gs(ms)},useDebugValue:zs,useDeferredValue:function(e){return Fs(fs(),ns.memoizedState,e)},useTransition:function(){return[gs(ms)[0],fs().memoizedState]},useMutableSource:ys,useSyncExternalStore:bs,useId:Us,unstable_isNewReconciler:!1},Ks={readContext:Ca,useCallback:Bs,useContext:Ca,useEffect:Os,useImperativeHandle:Ls,useInsertionEffect:ks,useLayoutEffect:Is,useMemo:js,useReducer:vs,useRef:Ms,useState:function(){return vs(ms)},useDebugValue:zs,useDeferredValue:function(e){var t=fs();return null===ns?t.memoizedState=e:Fs(t,ns.memoizedState,e)},useTransition:function(){return[vs(ms)[0],fs().memoizedState]},useMutableSource:ys,useSyncExternalStore:bs,useId:Us,unstable_isNewReconciler:!1};function Zs(e,t){if(e&&e.defaultProps){for(var i in t=B({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function Js(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:B({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var $s={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Kl(),r=Zl(e),a=Ra(n,r);a.payload=t,void 0!==i&&null!==i&&(a.callback=i),null!==(t=La(e,a,r))&&(Jl(t,e,r,n),za(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Kl(),r=Zl(e),a=Ra(n,r);a.tag=1,a.payload=t,void 0!==i&&null!==i&&(a.callback=i),null!==(t=La(e,a,r))&&(Jl(t,e,r,n),za(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Kl(),n=Zl(e),r=Ra(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=La(e,r,n))&&(Jl(t,e,n,i),za(t,e,n))}};function eo(e,t,i,n,r,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!rn(i,n)||!rn(r,a))}function to(e,t,i){var n=!1,r=Sr,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(r=Tr(t)?Cr:_r.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Mr(e,r):Sr),t=new t(i,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$s,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&$s.enqueueReplaceState(t,t.state,null)}function no(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs={},ka(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ca(a):(a=Tr(t)?Cr:_r.current,r.context=Mr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Js(e,t,a,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&$s.enqueueReplaceState(r,r.state,null),ja(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ro(e,t){try{var i="",n=t;do{i+=U(n),n=n.return}while(n);var r=i}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ao(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function so(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var oo="function"===typeof WeakMap?WeakMap:Map;function lo(e,t,i){(i=Ra(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Nl||(Nl=!0,Ul=n),so(0,t)},i}function co(e,t,i){(i=Ra(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){so(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(i.callback=function(){so(0,t),"function"!==typeof n&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ho(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new oo;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=wc.bind(null,e,t,i),t.then(e,e))}function uo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function po(e,t,i,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Ra(-1,1)).tag=2,La(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var fo=x.ReactCurrentOwner,mo=!1;function go(e,t,i,n){t.child=null===e?va(t,null,i,n):ga(t,e.child,i,n)}function vo(e,t,i,n,r){i=i.render;var a=t.ref;return Ea(t,r),n=us(e,t,i,n,a,r),i=ds(),null===e||mo?(ea&&i&&Kr(t),t.flags|=1,go(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,No(e,t,r))}function yo(e,t,i,n,r){if(null===e){var a=i.type;return"function"!==typeof a||Tc(a)||void 0!==a.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Dc(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bo(e,t,a,n,r))}if(a=e.child,0===(e.lanes&r)){var s=a.memoizedProps;if((i=null!==(i=i.compare)?i:rn)(s,n)&&e.ref===t.ref)return No(e,t,r)}return t.flags|=1,(e=Pc(a,n)).ref=t.ref,e.return=t,t.child=e}function bo(e,t,i,n,r){if(null!==e){var a=e.memoizedProps;if(rn(a,n)&&e.ref===t.ref){if(mo=!1,t.pendingProps=n=a,0===(e.lanes&r))return t.lanes=e.lanes,No(e,t,r);0!==(131072&e.flags)&&(mo=!0)}}return Ao(e,t,i,n,r)}function xo(e,t,i){var n=t.pendingProps,r=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Pl,Tl),Tl|=i;else{if(0===(1073741824&i))return e=null!==a?a.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Pl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:i,Ar(Pl,Tl),Tl|=n}else null!==a?(n=a.baseLanes|i,t.memoizedState=null):n=i,Ar(Pl,Tl),Tl|=n;return go(e,t,r,i),t.child}function wo(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,i,n,r){var a=Tr(i)?Cr:_r.current;return a=Mr(t,a),Ea(t,r),i=us(e,t,i,n,a,r),n=ds(),null===e||mo?(ea&&n&&Kr(t),t.flags|=1,go(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,No(e,t,r))}function So(e,t,i,n,r){if(Tr(i)){var a=!0;kr(t)}else a=!1;if(Ea(t,r),null===t.stateNode)Fo(e,t),to(t,i,n),no(t,i,n,r),n=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=i.contextType;"object"===typeof c&&null!==c?c=Ca(c):c=Mr(t,c=Tr(i)?Cr:_r.current);var h=i.getDerivedStateFromProps,u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==n||l!==c)&&io(t,s,n,c),Oa=!1;var d=t.memoizedState;s.state=d,ja(t,n,s,r),l=t.memoizedState,o!==n||d!==l||Er.current||Oa?("function"===typeof h&&(Js(t,i,h,n),l=t.memoizedState),(o=Oa||eo(t,i,o,n,d,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Ia(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Zs(t.type,o),s.props=c,u=t.pendingProps,d=s.context,"object"===typeof(l=i.contextType)&&null!==l?l=Ca(l):l=Mr(t,l=Tr(i)?Cr:_r.current);var p=i.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||d!==l)&&io(t,s,n,l),Oa=!1,d=t.memoizedState,s.state=d,ja(t,n,s,r);var f=t.memoizedState;o!==u||d!==f||Er.current||Oa?("function"===typeof p&&(Js(t,i,p,n),f=t.memoizedState),(c=Oa||eo(t,i,c,n,d,f,l)||!1)?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return _o(e,t,i,n,a,r)}function _o(e,t,i,n,r,a){wo(e,t);var s=0!==(128&t.flags);if(!n&&!s)return r&&Ir(t,i,!1),No(e,t,a);n=t.stateNode,fo.current=t;var o=s&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=ga(t,e.child,null,a),t.child=ga(t,null,o,a)):go(e,t,o,a),t.memoizedState=n.state,r&&Ir(t,i,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Ga(e,t.containerInfo)}function Co(e,t,i,n,r){return ca(),ha(r),t.flags|=256,go(e,t,i,n),t.child}var Mo,To,Po,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,i){var n,r=t.pendingProps,s=Qa.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ar(Qa,1&s),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=kc(l,r,0,null),e=Oc(e,r,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ko(i),t.memoizedState=Oo,e):Ro(t,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,i,n,r,s,o){if(i)return 256&t.flags?(t.flags&=-257,Lo(e,t,o,n=ao(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,r=t.mode,n=kc({mode:"visible",children:n.children},r,0,null),(s=Oc(s,r,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&ga(t,e.child,null,o),t.child.memoizedState=ko(o),t.memoizedState=Oo,s);if(0===(1&t.mode))return Lo(e,t,o,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var l=n.dgst;return n=l,Lo(e,t,o,n=ao(s=Error(a(419)),n,void 0))}if(l=0!==(o&e.childLanes),mo||l){if(null!==(n=El)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|o))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Da(e,r),Jl(n,e,r,-1))}return uc(),Lo(e,t,o,n=ao(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,$r=ar(r.nextSibling),Jr=t,ea=!0,ta=null,null!==e&&(Wr[Hr++]=qr,Wr[Hr++]=Yr,Wr[Hr++]=Gr,qr=e.id,Yr=e.overflow,Gr=t),t=Ro(t,n.children),t.flags|=4096,t)}(e,t,l,r,n,s,i);if(o){o=r.fallback,l=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?o=Pc(n,o):(o=Oc(o,l,i,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?ko(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~i,t.memoizedState=Oo,r}return e=(o=e.child).sibling,r=Pc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function Ro(e,t){return(t=kc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Lo(e,t,i,n){return null!==n&&ha(n),ga(t,e.child,null,i),(e=Ro(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_a(e.return,t,i)}function Bo(e,t,i,n,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailMode=r)}function jo(e,t,i){var n=t.pendingProps,r=n.revealOrder,a=n.tail;if(go(e,t,n.children,i),0!==(2&(n=Qa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,i,t);else if(19===e.tag)zo(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ar(Qa,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===Ka(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Bo(t,!1,r,i,a);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ka(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Bo(t,!0,i,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function No(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),kl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(i=Pc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Pc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Uo(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Wo(e,t,i){var n=t.pendingProps;switch(Zr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return Tr(t.type)&&Pr(),Vo(t),null;case 3:return n=t.stateNode,qa(),wr(Er),wr(_r),Ja(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(oa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(ic(ta),ta=null))),To(e,t),Vo(t),null;case 5:Xa(t);var r=Ha(Wa.current);if(i=t.type,null!==e&&null!=t.stateNode)Po(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Vo(t),null}if(e=Ha(Ua.current),oa(t)){n=t.stateNode,i=t.type;var s=t.memoizedProps;switch(n[lr]=t,n[cr]=s,e=0!==(1&t.mode),i){case"dialog":Ln("cancel",n),Ln("close",n);break;case"iframe":case"object":case"embed":Ln("load",n);break;case"video":case"audio":for(r=0;r<On.length;r++)Ln(On[r],n);break;case"source":Ln("error",n);break;case"img":case"image":case"link":Ln("error",n),Ln("load",n);break;case"details":Ln("toggle",n);break;case"input":K(n,s),Ln("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ln("invalid",n);break;case"textarea":re(n,s),Ln("invalid",n)}for(var l in ve(i,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ln("scroll",n)}switch(i){case"input":q(n),$(n,s,!0);break;case"textarea":q(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Qn)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[lr]=t,e[cr]=n,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(i,n),i){case"dialog":Ln("cancel",e),Ln("close",e),r=n;break;case"iframe":case"object":case"embed":Ln("load",e),r=n;break;case"video":case"audio":for(r=0;r<On.length;r++)Ln(On[r],e);r=n;break;case"source":Ln("error",e),r=n;break;case"img":case"image":case"link":Ln("error",e),Ln("load",e),r=n;break;case"details":Ln("toggle",e),r=n;break;case"input":K(e,n),r=Q(e,n),Ln("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=B({},n,{value:void 0}),Ln("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),Ln("invalid",e)}for(s in ve(i,r),c=r)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?me(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&he(e,h):"children"===s?"string"===typeof h?("textarea"!==i||""!==h)&&ue(e,h):"number"===typeof h&&ue(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ln("scroll",e):null!=h&&b(e,s,h,l))}switch(i){case"input":q(e),$(e,n,!1);break;case"textarea":q(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?ie(e,!!n.multiple,s,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Qn)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(i=Ha(Wa.current),Ha(Ua.current),oa(t)){if(n=t.stateNode,i=t.memoizedProps,n[lr]=t,(s=n.nodeValue!==i)&&null!==(e=Jr))switch(e.tag){case 3:Xn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,i,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[lr]=t,t.stateNode=n}return Vo(t),null;case 13:if(wr(Qa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$r&&0!==(1&t.mode)&&0===(128&t.flags))la(),ca(),t.flags|=98560,s=!1;else if(s=oa(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[lr]=t}else ca(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),s=!1}else null!==ta&&(ic(ta),ta=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Dl&&(Dl=3):uc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return qa(),To(e,t),null===e&&jn(t.stateNode.containerInfo),Vo(t),null;case 10:return Sa(t.type._context),Vo(t),null;case 19:if(wr(Qa),null===(s=t.memoizedState))return Vo(t),null;if(n=0!==(128&t.flags),null===(l=s.rendering))if(n)Uo(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ka(e))){for(t.flags|=128,Uo(s,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(s=i).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ar(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==s.tail&&Ke()>jl&&(t.flags|=128,n=!0,Uo(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Ka(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Uo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ea)return Vo(t),null}else 2*Ke()-s.renderingStartTime>jl&&1073741824!==i&&(t.flags|=128,n=!0,Uo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=s.last)?i.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ke(),t.sibling=null,i=Qa.current,Ar(Qa,n?1&i|2:1&i),t):(Vo(t),null);case 22:case 23:return oc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ho(e,t){switch(Zr(t),t.tag){case 1:return Tr(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return qa(),wr(Er),wr(_r),Ja(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(wr(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ca()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wr(Qa),null;case 4:return qa(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return oc(),null;default:return null}}Mo=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},To=function(){},Po=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Ha(Ua.current);var a,s=null;switch(i){case"input":r=Q(e,r),n=Q(e,n),s=[];break;case"select":r=B({},r,{value:void 0}),n=B({},n,{value:void 0}),s=[];break;case"textarea":r=ne(e,r),n=ne(e,n),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(h in ve(i,n),i=null,r)if(!n.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var l=r[h];for(a in l)l.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(o.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var c=n[h];if(l=null!=r?r[h]:void 0,n.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(s||(s=[]),s.push(h,i)),i=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(o.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ln("scroll",e),s||l===c||(s=[])):(s=s||[]).push(h,c))}i&&(s=s||[]).push("style",i);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Do=function(e,t,i,n){i!==n&&(t.flags|=4)};var Go=!1,qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Qo(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){xc(e,t,n)}else i.current=null}function Ko(e,t,i){try{i()}catch(n){xc(e,t,n)}}var Zo=!1;function Jo(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&Ko(t,i,a)}r=r.next}while(r!==n)}}function $o(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function el(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function tl(e){var t=e.alternate;null!==t&&(e.alternate=null,tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[lr],delete t[cr],delete t[ur],delete t[dr],delete t[pr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function rl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(rl(e,t,i),e=e.sibling;null!==e;)rl(e,t,i),e=e.sibling}function al(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(al(e,t,i),e=e.sibling;null!==e;)al(e,t,i),e=e.sibling}var sl=null,ol=!1;function ll(e,t,i){for(i=i.child;null!==i;)cl(e,t,i),i=i.sibling}function cl(e,t,i){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(nt,i)}catch(o){}switch(i.tag){case 5:qo||Qo(i,t);case 6:var n=sl,r=ol;sl=null,ll(e,t,i),ol=r,null!==(sl=n)&&(ol?(e=sl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):sl.removeChild(i.stateNode));break;case 18:null!==sl&&(ol?(e=sl,i=i.stateNode,8===e.nodeType?rr(e.parentNode,i):1===e.nodeType&&rr(e,i),Ut(e)):rr(sl,i.stateNode));break;case 4:n=sl,r=ol,sl=i.stateNode.containerInfo,ol=!0,ll(e,t,i),sl=n,ol=r;break;case 0:case 11:case 14:case 15:if(!qo&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var a=r,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&Ko(i,t,s),r=r.next}while(r!==n)}ll(e,t,i);break;case 1:if(!qo&&(Qo(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(o){xc(i,t,o)}ll(e,t,i);break;case 21:ll(e,t,i);break;case 22:1&i.mode?(qo=(n=qo)||null!==i.memoizedState,ll(e,t,i),qo=n):ll(e,t,i);break;default:ll(e,t,i)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Yo),t.forEach(function(t){var n=_c.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))})}}function ul(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ol=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ol=!0;break e}l=l.return}if(null===sl)throw Error(a(160));cl(s,o,r),sl=null,ol=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(h){xc(r,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)dl(t,e),t=t.sibling}function dl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ul(t,e),pl(e),4&n){try{Jo(3,e,e.return),$o(3,e)}catch(g){xc(e,e.return,g)}try{Jo(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:ul(t,e),pl(e),512&n&&null!==i&&Qo(i,i.return);break;case 5:if(ul(t,e),pl(e),512&n&&null!==i&&Qo(i,i.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(g){xc(e,e.return,g)}}if(4&n&&null!=(r=e.stateNode)){var s=e.memoizedProps,o=null!==i?i.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(r,s),ye(l,o);var h=ye(l,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];"style"===u?me(r,d):"dangerouslySetInnerHTML"===u?he(r,d):"children"===u?ue(r,d):b(r,u,d,h)}switch(l){case"input":J(r,s);break;case"textarea":ae(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ie(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ie(r,!!s.multiple,s.defaultValue,!0):ie(r,!!s.multiple,s.multiple?[]:"",!1))}r[cr]=s}catch(g){xc(e,e.return,g)}}break;case 6:if(ul(t,e),pl(e),4&n){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){xc(e,e.return,g)}}break;case 3:if(ul(t,e),pl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:ul(t,e),pl(e);break;case 13:ul(t,e),pl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Ke())),4&n&&hl(e);break;case 22:if(u=null!==i&&null!==i.memoizedState,1&e.mode?(qo=(h=qo)||u,ul(t,e),qo=h):ul(t,e),pl(e),8192&n){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(d=Xo=u;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:Jo(4,p,p.return);break;case 1:Qo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,i=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xc(n,i,g)}}break;case 5:Qo(p,p.return);break;case 22:if(null!==p.memoizedState){vl(d);continue}}null!==f?(f.return=p,Xo=f):vl(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{r=d.stateNode,h?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){xc(e,e.return,g)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ul(t,e),pl(e),4&n&&hl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(il(i)){var n=i;break e}i=i.return}throw Error(a(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(ue(r,""),n.flags&=-33),al(e,nl(e),r);break;case 3:case 4:var s=n.stateNode.containerInfo;rl(e,nl(e),s);break;default:throw Error(a(161))}}catch(o){xc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function fl(e,t,i){Xo=e,ml(e,t,i)}function ml(e,t,i){for(var n=0!==(1&e.mode);null!==Xo;){var r=Xo,a=r.child;if(22===r.tag&&n){var s=null!==r.memoizedState||Go;if(!s){var o=r.alternate,l=null!==o&&null!==o.memoizedState||qo;o=Go;var c=qo;if(Go=s,(qo=l)&&!c)for(Xo=r;null!==Xo;)l=(s=Xo).child,22===s.tag&&null!==s.memoizedState?yl(r):null!==l?(l.return=s,Xo=l):yl(r);for(;null!==a;)Xo=a,ml(a,t,i),a=a.sibling;Xo=r,Go=o,qo=c}gl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Xo=a):gl(e)}}function gl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qo||$o(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!qo)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:Zs(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fa(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Fa(t,o,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(a(163))}qo||512&t.flags&&el(t)}catch(p){xc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(i=t.sibling)){i.return=t.return,Xo=i;break}Xo=t.return}}function vl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Xo=i;break}Xo=t.return}}function yl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{$o(4,t)}catch(l){xc(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(l){xc(t,r,l)}}var a=t.return;try{el(t)}catch(l){xc(t,a,l)}break;case 5:var s=t.return;try{el(t)}catch(l){xc(t,s,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var bl,xl=Math.ceil,wl=x.ReactCurrentDispatcher,Al=x.ReactCurrentOwner,Sl=x.ReactCurrentBatchConfig,_l=0,El=null,Cl=null,Ml=0,Tl=0,Pl=xr(0),Dl=0,Ol=null,kl=0,Il=0,Rl=0,Ll=null,zl=null,Bl=0,jl=1/0,Fl=null,Nl=!1,Ul=null,Vl=null,Wl=!1,Hl=null,Gl=0,ql=0,Yl=null,Xl=-1,Ql=0;function Kl(){return 0!==(6&_l)?Ke():-1!==Xl?Xl:Xl=Ke()}function Zl(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Ml?Ml&-Ml:null!==ua.transition?(0===Ql&&(Ql=ft()),Ql):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Jl(e,t,i,n){if(50<ql)throw ql=0,Yl=null,Error(a(185));gt(e,i,n),0!==(2&_l)&&e===El||(e===El&&(0===(2&_l)&&(Il|=i),4===Dl&&nc(e,Ml)),$l(e,n),1===i&&0===_l&&0===(1&t.mode)&&(jl=Ke()+500,Lr&&jr()))}function $l(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-at(a),o=1<<s,l=r[s];-1===l?0!==(o&i)&&0===(o&n)||(r[s]=dt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=ut(e,e===El?Ml:0);if(0===n)null!==i&&Ye(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Ye(i),1===t)0===e.tag?function(e){Lr=!0,Br(e)}(rc.bind(null,e)):Br(rc.bind(null,e)),ir(function(){0===(6&_l)&&jr()}),i=null;else{switch(bt(n)){case 1:i=Je;break;case 4:i=$e;break;case 16:default:i=et;break;case 536870912:i=it}i=Ec(i,ec.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function ec(e,t){if(Xl=-1,Ql=0,0!==(6&_l))throw Error(a(327));var i=e.callbackNode;if(yc()&&e.callbackNode!==i)return null;var n=ut(e,e===El?Ml:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=dc(e,n);else{t=n;var r=_l;_l|=2;var s=hc();for(El===e&&Ml===t||(Fl=null,jl=Ke()+500,lc(e,t));;)try{fc();break}catch(l){cc(e,l)}Aa(),wl.current=s,_l=r,null!==Cl?t=0:(El=null,Ml=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(n=r,t=tc(e,r))),1===t)throw i=Ol,lc(e,0),nc(e,n),$l(e,Ke()),i;if(6===t)nc(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],a=r.getSnapshot;r=r.value;try{if(!nn(a(),r))return!1}catch(o){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=dc(e,n))&&(0!==(s=pt(e))&&(n=s,t=tc(e,s))),1===t))throw i=Ol,lc(e,0),nc(e,n),$l(e,Ke()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:vc(e,zl,Fl);break;case 3:if(nc(e,n),(130023424&n)===n&&10<(t=Bl+500-Ke())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&n)!==n){Kl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$n(vc.bind(null,e,zl,Fl),t);break}vc(e,zl,Fl);break;case 4:if(nc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-at(n);s=1<<o,(o=t[o])>r&&(r=o),n&=~s}if(n=r,10<(n=(120>(n=Ke()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xl(n/1960))-n)){e.timeoutHandle=$n(vc.bind(null,e,zl,Fl),n);break}vc(e,zl,Fl);break;default:throw Error(a(329))}}}return $l(e,Ke()),e.callbackNode===i?ec.bind(null,e):null}function tc(e,t){var i=Ll;return e.current.memoizedState.isDehydrated&&(lc(e,t).flags|=256),2!==(e=dc(e,t))&&(t=zl,zl=i,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function nc(e,t){for(t&=~Rl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-at(t),n=1<<i;e[i]=-1,t&=~n}}function rc(e){if(0!==(6&_l))throw Error(a(327));yc();var t=ut(e,0);if(0===(1&t))return $l(e,Ke()),null;var i=dc(e,t);if(0!==e.tag&&2===i){var n=pt(e);0!==n&&(t=n,i=tc(e,n))}if(1===i)throw i=Ol,lc(e,0),nc(e,t),$l(e,Ke()),i;if(6===i)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,zl,Fl),$l(e,Ke()),null}function ac(e,t){var i=_l;_l|=1;try{return e(t)}finally{0===(_l=i)&&(jl=Ke()+500,Lr&&jr())}}function sc(e){null!==Hl&&0===Hl.tag&&0===(6&_l)&&yc();var t=_l;_l|=1;var i=Sl.transition,n=yt;try{if(Sl.transition=null,yt=1,e)return e()}finally{yt=n,Sl.transition=i,0===(6&(_l=t))&&jr()}}function oc(){Tl=Pl.current,wr(Pl)}function lc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,er(i)),null!==Cl)for(i=Cl.return;null!==i;){var n=i;switch(Zr(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Pr();break;case 3:qa(),wr(Er),wr(_r),Ja();break;case 5:Xa(n);break;case 4:qa();break;case 13:case 19:wr(Qa);break;case 10:Sa(n.type._context);break;case 22:case 23:oc()}i=i.return}if(El=e,Cl=e=Pc(e.current,null),Ml=Tl=t,Dl=0,Ol=null,Rl=Il=kl=0,zl=Ll=null,null!==Ma){for(t=0;t<Ma.length;t++)if(null!==(n=(i=Ma[t]).interleaved)){i.interleaved=null;var r=n.next,a=i.pending;if(null!==a){var s=a.next;a.next=r,n.next=s}i.pending=n}Ma=null}return e}function cc(e,t){for(;;){var i=Cl;try{if(Aa(),$a.current=Ys,as){for(var n=is.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}as=!1}if(ts=0,rs=ns=is=null,ss=!1,os=0,Al.current=null,null===i||null===i.return){Dl=1,Ol=t,Cl=null;break}e:{var s=e,o=i.return,l=i,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,u=l,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=uo(o);if(null!==f){f.flags&=-257,po(f,o,l,0,t),1&f.mode&&ho(s,h,t),c=h;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ho(s,h,t),uc();break e}c=Error(a(426))}else if(ea&&1&l.mode){var v=uo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),po(v,o,l,0,t),ha(ro(c,l));break e}}s=c=ro(c,l),4!==Dl&&(Dl=2),null===Ll?Ll=[s]:Ll.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,lo(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,co(s,l,t));break e}}s=s.return}while(null!==s)}gc(i)}catch(x){t=x,Cl===i&&null!==i&&(Cl=i=i.return);continue}break}}function hc(){var e=wl.current;return wl.current=Ys,null===e?Ys:e}function uc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||0===(268435455&kl)&&0===(268435455&Il)||nc(El,Ml)}function dc(e,t){var i=_l;_l|=2;var n=hc();for(El===e&&Ml===t||(Fl=null,lc(e,t));;)try{pc();break}catch(r){cc(e,r)}if(Aa(),_l=i,wl.current=n,null!==Cl)throw Error(a(261));return El=null,Ml=0,Dl}function pc(){for(;null!==Cl;)mc(Cl)}function fc(){for(;null!==Cl&&!Xe();)mc(Cl)}function mc(e){var t=bl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?gc(e):Cl=t,Al.current=null}function gc(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Wo(i,t,Tl)))return void(Cl=i)}else{if(null!==(i=Ho(i,t)))return i.flags&=32767,void(Cl=i);if(null===e)return Dl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Dl&&(Dl=5)}function vc(e,t,i){var n=yt,r=Sl.transition;try{Sl.transition=null,yt=1,function(e,t,i,n){do{yc()}while(null!==Hl);if(0!==(6&_l))throw Error(a(327));i=e.finishedWork;var r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-at(i),a=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~a}}(e,s),e===El&&(Cl=El=null,Ml=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Wl||(Wl=!0,Ec(et,function(){return yc(),null})),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=Sl.transition,Sl.transition=null;var o=yt;yt=1;var l=_l;_l|=4,Al.current=null,function(e,t){if(Kn=Wt,cn(e=ln())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch(w){i=null;break e}var o=0,l=-1,c=-1,h=0,u=0,d=e,p=null;t:for(;;){for(var f;d!==i||0!==r&&3!==d.nodeType||(l=o+r),d!==s||0!==n&&3!==d.nodeType||(c=o+n),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===i&&++h===r&&(l=o),p===s&&++u===n&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zn={focusedElem:e,selectionRange:i},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Zs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=Zo,Zo=!1}(e,i),dl(i,e),hn(Zn),Wt=!!Kn,Zn=Kn=null,e.current=i,fl(i,e,r),Qe(),_l=l,yt=o,Sl.transition=s}else e.current=i;if(Wl&&(Wl=!1,Hl=e,Gl=r),s=e.pendingLanes,0===s&&(Vl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),$l(e,Ke()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(Nl)throw Nl=!1,e=Ul,Ul=null,e;0!==(1&Gl)&&0!==e.tag&&yc(),s=e.pendingLanes,0!==(1&s)?e===Yl?ql++:(ql=0,Yl=e):ql=0,jr()}(e,t,i,n)}finally{Sl.transition=r,yt=n}return null}function yc(){if(null!==Hl){var e=bt(Gl),t=Sl.transition,i=yt;try{if(Sl.transition=null,yt=16>e?16:e,null===Hl)var n=!1;else{if(e=Hl,Hl=null,Gl=0,0!==(6&_l))throw Error(a(331));var r=_l;for(_l|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(Xo=h;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:Jo(8,u,s)}var d=u.child;if(null!==d)d.return=u,Xo=d;else for(;null!==Xo;){var p=(u=Xo).sibling,f=u.return;if(tl(u),u===h){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:Jo(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xo=y;break e}Xo=s.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:$o(9,l)}}catch(A){xc(l,l.return,A)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(_l=r,jr(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(nt,e)}catch(A){}n=!0}return n}finally{yt=i,Sl.transition=t}}return!1}function bc(e,t,i){e=La(e,t=lo(0,t=ro(i,t),1),1),t=Kl(),null!==e&&(gt(e,1,t),$l(e,t))}function xc(e,t,i){if(3===e.tag)bc(e,e,i);else for(;null!==t;){if(3===t.tag){bc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Vl||!Vl.has(n))){t=La(t,e=co(t,e=ro(i,e),1),1),e=Kl(),null!==t&&(gt(t,1,e),$l(t,e));break}}t=t.return}}function wc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=Kl(),e.pingedLanes|=e.suspendedLanes&i,El===e&&(Ml&i)===i&&(4===Dl||3===Dl&&(130023424&Ml)===Ml&&500>Ke()-Bl?lc(e,0):Rl|=i),$l(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var i=Kl();null!==(e=Da(e,t))&&(gt(e,t,i),$l(e,i))}function Sc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ac(e,i)}function _c(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Ac(e,i)}function Ec(e,t){return qe(e,t)}function Cc(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,i,n){return new Cc(e,t,i,n)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var i=e.alternate;return null===i?((i=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Dc(e,t,i,n,r,s){var o=2;if(n=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Oc(i.children,r,s,t);case _:o=8,r|=8;break;case E:return(e=Mc(12,i,t,2|r)).elementType=E,e.lanes=s,e;case P:return(e=Mc(13,i,t,r)).elementType=P,e.lanes=s,e;case D:return(e=Mc(19,i,t,r)).elementType=D,e.lanes=s,e;case I:return kc(i,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case M:o=9;break e;case T:o=11;break e;case O:o=14;break e;case k:o=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mc(o,i,t,r)).elementType=e,t.type=n,t.lanes=s,t}function Oc(e,t,i,n){return(e=Mc(7,e,n,t)).lanes=i,e}function kc(e,t,i,n){return(e=Mc(22,e,n,t)).elementType=I,e.lanes=i,e.stateNode={isHidden:!1},e}function Ic(e,t,i){return(e=Mc(6,e,null,t)).lanes=i,e}function Rc(e,t,i){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lc(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,i,n,r,a,s,o,l){return e=new Lc(e,t,i,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Mc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(a),e}function Bc(e){if(!e)return Sr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var i=e.type;if(Tr(i))return Or(e,i,t)}return t}function jc(e,t,i,n,r,a,s,o,l){return(e=zc(i,n,!0,e,0,a,0,o,l)).context=Bc(null),i=e.current,(a=Ra(n=Kl(),r=Zl(i))).callback=void 0!==t&&null!==t?t:null,La(i,a,r),e.current.lanes=r,gt(e,r,n),$l(e,n),e}function Fc(e,t,i,n){var r=t.current,a=Kl(),s=Zl(r);return i=Bc(i),null===t.context?t.context=i:t.pendingContext=i,(t=Ra(a,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=La(r,t,s))&&(Jl(e,r,s,a),za(e,r,s)),s}function Nc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Uc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Vc(e,t){Uc(e,t),(e=e.alternate)&&Uc(e,t)}bl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)mo=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return mo=!1,function(e,t,i){switch(t.tag){case 3:Eo(t),ca();break;case 5:Ya(t);break;case 1:Tr(t.type)&&kr(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Ar(ya,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ar(Qa,1&Qa.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Io(e,t,i):(Ar(Qa,1&Qa.current),null!==(e=No(e,t,i))?e.sibling:null);Ar(Qa,1&Qa.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return jo(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(Qa,Qa.current),n)break;return null;case 22:case 23:return t.lanes=0,xo(e,t,i)}return No(e,t,i)}(e,t,i);mo=0!==(131072&e.flags)}else mo=!1,ea&&0!==(1048576&t.flags)&&Qr(t,Vr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Fo(e,t),e=t.pendingProps;var r=Mr(t,_r.current);Ea(t,i),r=us(null,t,n,e,r,i);var s=ds();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tr(n)?(s=!0,kr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ka(t),r.updater=$s,t.stateNode=r,r._reactInternals=t,no(t,n,e,i),t=_o(null,t,n,!0,s,i)):(t.tag=0,ea&&s&&Kr(t),go(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Fo(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===O)return 14}return 2}(n),e=Zs(n,e),r){case 0:t=Ao(null,t,n,e,i);break e;case 1:t=So(null,t,n,e,i);break e;case 11:t=vo(null,t,n,e,i);break e;case 14:t=yo(null,t,n,Zs(n.type,e),i);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Ao(e,t,n,r=t.elementType===n?r:Zs(n,r),i);case 1:return n=t.type,r=t.pendingProps,So(e,t,n,r=t.elementType===n?r:Zs(n,r),i);case 3:e:{if(Eo(t),null===e)throw Error(a(387));n=t.pendingProps,r=(s=t.memoizedState).element,Ia(e,t),ja(t,n,null,i);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Co(e,t,n,i,r=ro(Error(a(423)),t));break e}if(n!==r){t=Co(e,t,n,i,r=ro(Error(a(424)),t));break e}for($r=ar(t.stateNode.containerInfo.firstChild),Jr=t,ea=!0,ta=null,i=va(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(ca(),n===r){t=No(e,t,i);break e}go(e,t,n,i)}t=t.child}return t;case 5:return Ya(t),null===e&&aa(t),n=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,Jn(n,r)?o=null:null!==s&&Jn(n,s)&&(t.flags|=32),wo(e,t),go(e,t,o,i),t.child;case 6:return null===e&&aa(t),null;case 13:return Io(e,t,i);case 4:return Ga(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ga(t,null,n,i):go(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,vo(e,t,n,r=t.elementType===n?r:Zs(n,r),i);case 7:return go(e,t,t.pendingProps,i),t.child;case 8:case 12:return go(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Ar(ya,n._currentValue),n._currentValue=o,null!==s)if(nn(s.value,o)){if(s.children===r.children&&!Er.current){t=No(e,t,i);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Ra(-1,i&-i)).tag=2;var h=s.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}s.lanes|=i,null!==(c=s.alternate)&&(c.lanes|=i),_a(s.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),_a(o,i,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}go(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Ea(t,i),n=n(r=Ca(r)),t.flags|=1,go(e,t,n,i),t.child;case 14:return r=Zs(n=t.type,t.pendingProps),yo(e,t,n,r=Zs(n.type,r),i);case 15:return bo(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Zs(n,r),Fo(e,t),t.tag=1,Tr(n)?(e=!0,kr(t)):e=!1,Ea(t,i),to(t,n,r),no(t,n,r,i),_o(null,t,n,!0,e,i);case 19:return jo(e,t,i);case 22:return xo(e,t,i)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Hc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Qc(e,t,i,n,r){var a=i._reactRootContainer;if(a){var s=a;if("function"===typeof r){var o=r;r=function(){var e=Nc(s);o.call(e)}}Fc(t,s,e,r)}else s=function(e,t,i,n,r){if(r){if("function"===typeof n){var a=n;n=function(){var e=Nc(s);a.call(e)}}var s=jc(t,n,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[hr]=s.current,jn(8===e.nodeType?e.parentNode:e),sc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var o=n;n=function(){var e=Nc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[hr]=l.current,jn(8===e.nodeType?e.parentNode:e),sc(function(){Fc(t,l,i,n)}),l}(i,t,e,r,n);return Nc(s)}Gc.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Fc(e,t,null,null)},Gc.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sc(function(){Fc(null,e,null,null)}),t[hr]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var i=0;i<kt.length&&0!==t&&t<kt[i].priority;i++);kt.splice(i,0,e),0===i&&zt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ht(t.pendingLanes);0!==i&&(vt(t,1|i),$l(t,Ke()),0===(6&_l)&&(jl=Ke()+500,jr()))}break;case 13:sc(function(){var t=Da(e,1);if(null!==t){var i=Kl();Jl(t,e,1,i)}}),Vc(e,1)}},wt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)Jl(t,e,134217728,Kl());Vc(e,134217728)}},At=function(e){if(13===e.tag){var t=Zl(e),i=Da(e,t);if(null!==i)Jl(i,e,t,Kl());Vc(e,t)}},St=function(){return yt},_t=function(e,t){var i=yt;try{return yt=e,t()}finally{yt=i}},we=function(e,t,i){switch(t){case"input":if(J(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=vr(n);if(!r)throw Error(a(90));Y(n),J(n,r)}}}break;case"textarea":ae(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Me=ac,Te=sc;var Kc={usingClientEntryPoint:!1,Events:[mr,gr,vr,Ee,Ce,ac]},Zc={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jc={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{nt=$c.inject(Jc),rt=$c}catch(eh){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kc,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(a(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:A,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!qc(e))throw Error(a(299));var i=!1,n="",r=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,i,0,n,r),e[hr]=t.current,jn(8===e.nodeType?e.parentNode:e),new Hc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return sc(e)},t.hydrate=function(e,t,i){if(!Yc(t))throw Error(a(200));return Qc(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!qc(e))throw Error(a(405));var n=null!=i&&i.hydratedSources||null,r=!1,s="",o=Wc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onRecoverableError&&(o=i.onRecoverableError)),t=jc(t,null,e,1,null!=i?i:null,r,0,s,o),e[hr]=t.current,jn(e),n)for(e=0;e<n.length;e++)r=(r=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new Gc(t)},t.render=function(e,t,i){if(!Yc(t))throw Error(a(200));return Qc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(sc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[hr]=null})}),!0)},t.unstable_batchedUpdates=ac,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Yc(i))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3360:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Es:()=>Cloud,ci:()=>renderSimpleIcon,fB:()=>fetchSimpleIcons});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5043),_csstools_convert_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6299);function asyncGeneratorStep(e,t,i,n,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var a=e.apply(t,i);function s(e){asyncGeneratorStep(a,n,r,s,o,"next",e)}function o(e){asyncGeneratorStep(a,n,r,s,o,"throw",e)}s(void 0)})}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},_extends.apply(null,arguments)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var a=t&&t.prototype instanceof v?t:v,s=Object.create(a.prototype),o=new D(n||[]);return r(s,"_invoke",{value:C(e,i,o)}),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function y(){}function b(){}var x={};c(x,s,function(){return this});var w=Object.getPrototypeOf,A=w&&w(w(O([])));A&&A!==i&&n.call(A,s)&&(x=A);var S=b.prototype=v.prototype=Object.create(x);function _(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){function i(r,a,s,o){var l=u(e[r],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,s,o)},function(e){i("throw",e,s,o)}):t.resolve(h).then(function(e){c.value=e,s(c)},function(e){return i("throw",e,s,o)})}o(l.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return a=a?a.then(r,r):r()}})}function C(t,i,n){var r=d;return function(a,s){if(r===f)throw Error("Generator is already running");if(r===m){if("throw"===a)throw s;return{value:e,done:!0}}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var l=M(o,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(t,i,n);if("normal"===c.type){if(r=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=m,n.method="throw",n.arg=c.arg)}}}function M(t,i){var n=i.method,r=t.iterator[n];if(r===e)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=e,M(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=u(r,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,g;var s=a.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function O(t){if(t||""===t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,r(S,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},_(E.prototype),c(E.prototype,o,function(){return this}),t.AsyncIterator=E,t.async=function(e,i,n,r,a){void 0===a&&(a=Promise);var s=new E(h(e,i,n,r),a);return t.isGeneratorFunction(i)?s:s.next().then(function(e){return e.done?e.value:s.next()})},_(S),c(S,l,"Generator"),c(S,s,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return o.type="throw",o.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),P(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;P(i)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:O(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}var tagCanvasString="(function(){\"use strict\"; var r,C,p=Math.abs,o=Math.sin,l=Math.cos,g=Math.max,h=Math.min,af=Math.ceil,E=Math.sqrt,w=Math.pow,I={},D={},R={0:\"0,\",1:\"17,\",2:\"34,\",3:\"51,\",4:\"68,\",5:\"85,\",6:\"102,\",7:\"119,\",8:\"136,\",9:\"153,\",a:\"170,\",A:\"170,\",b:\"187,\",B:\"187,\",c:\"204,\",C:\"204,\",d:\"221,\",D:\"221,\",e:\"238,\",E:\"238,\",f:\"255,\",F:\"255,\"},f,d,b,T,z,F,M,c=document,v,e,P,j={};for(r=0;r<256;++r)C=r.toString(16),r<16&&(C='0'+C),D[C]=D[C.toUpperCase()]=r.toString()+',';function n(a){return typeof a!='undefined'}function B(a){return typeof a=='object'&&a!=null}function G(a,c,b){return isNaN(a)?b:h(b,g(c,a))}function x(){return!1}function q(){return(new Date).valueOf()}function ak(c,d){var b=[],e=c.length,a;for(a=0;a<e;++a)b.push(c[a]);return b.sort(d),b}function ai(a){for(var b=a.length-1,d,c;b;)c=~~(Math.random()*b),d=a[b],a[b]=a[c],a[c]=d,--b}function ag(){var a=window.AudioContext||window.webkitAudioContext;if(e=new a,!e){e='off';return}return e}function $(u,a,t,s,r,q,p){var j=s,h=r,i=t*.01,n=80*i,m=100*i,o=40*i,l=30*i,c=l/2,b=j+n,f=b-o,k=h+m,d=k-l,g=h+l,e=h+m/2;if(a.setTransform(1,0,0,1,0,0),a.setLineDash([]),a.globalAlpha=1,a.strokeStyle=p,a.lineWidth=q,a.lineJoin='round',a.beginPath(),a.moveTo(f,g),a.lineTo(f,d),a.moveTo(b,k),a.lineTo(f,d),a.lineTo(j,d),a.lineTo(j,g),a.lineTo(f,g),a.lineTo(b,h),u){a.lineTo(b,g),a.moveTo(b,d),a.lineTo(b,k),a.moveTo(b-c,e-c),a.lineTo(b+c,e+c),a.moveTo(b+c,e-c),a.lineTo(b-c,e+c),a.stroke();return}a.closePath(),a.stroke()}function s(a,b,c){this.x=a,this.y=b,this.z=c}z=s.prototype,z.length=function(){return E(this.x*this.x+this.y*this.y+this.z*this.z)},z.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},z.cross=function(a){var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,d=this.x*a.y-this.y*a.x;return new s(b,c,d)},z.angle=function(b){var c=this.dot(b),a;return c==0?Math.PI/2:(a=c/(this.length()*b.length()),a>=1)?0:a<=-1?Math.PI:Math.acos(a)},z.unit=function(){var a=this.length();return new s(this.x/a,this.y/a,this.z/a)};function ay(b,a){a=a*Math.PI/180,b=b*Math.PI/180;var c=o(b)*l(a),d=-o(a),e=-l(b)*l(a);return new s(c,d,e)}function m(a){this[1]={1:a[0],2:a[1],3:a[2]},this[2]={1:a[3],2:a[4],3:a[5]},this[3]={1:a[6],2:a[7],3:a[8]}}T=m.prototype,m.Identity=function(){return new m([1,0,0,0,1,0,0,0,1])},m.Rotation=function(e,a){var c=o(e),d=l(e),b=1-d;return new m([d+w(a.x,2)*b,a.x*a.y*b-a.z*c,a.x*a.z*b+a.y*c,a.y*a.x*b+a.z*c,d+w(a.y,2)*b,a.y*a.z*b-a.x*c,a.z*a.x*b-a.y*c,a.z*a.y*b+a.x*c,d+w(a.z,2)*b])},T.mul=function(c){var d=[],a,b,e=c.xform?1:0;for(a=1;a<=3;++a)for(b=1;b<=3;++b)e?d.push(this[a][1]*c[1][b]+this[a][2]*c[2][b]+this[a][3]*c[3][b]):d.push(this[a][b]*c);return new m(d)},T.xform=function(b){var a={},c=b.x,d=b.y,e=b.z;return a.x=c*this[1][1]+d*this[2][1]+e*this[3][1],a.y=c*this[1][2]+d*this[2][2]+e*this[3][2],a.z=c*this[1][3]+d*this[2][3]+e*this[3][3],a};function aB(g,j,k,m,f){var a,b,c,d,e=[],h=2/g,i;i=Math.PI*(3-E(5)+(parseFloat(f)?parseFloat(f):0));for(a=0;a<g;++a)b=a*h-1+h/2,c=E(1-b*b),d=a*i,e.push([l(d)*c*j,b*k,o(d)*c*m]);return e}function U(n,p,m,k,h,g){var b,f=[],i=2/n,j,a,d,c,e;j=Math.PI*(3-E(5)+(parseFloat(g)?parseFloat(g):0));for(a=0;a<n;++a)d=a*i-1+i/2,b=a*j,c=l(b),e=o(b),f.push(p?[d*m,c*k,e*h]:[c*m,d*k,e*h]);return f}function aa(k,e,f,h,i,j){var b,g=[],m=Math.PI*2/e,a,c,d;for(a=0;a<e;++a)b=a*m,c=l(b),d=o(b),g.push(k?[j*f,c*h,d*i]:[c*f,j*h,d*i]);return g}function ax(a,b,c,d,e){return U(a,0,b,c,d,e)}function aH(a,b,c,d,e){return U(a,1,b,c,d,e)}function aG(b,c,d,e,a){return a=isNaN(a)?0:a*1,aa(0,b,c,d,e,a)}function aF(b,c,d,e,a){return a=isNaN(a)?0:a*1,aa(1,b,c,d,e,a)}function av(b){var a=new Image;a.onload=function(){var c=a.width/2,d=a.height/2;b.centreFunc=function(b,g,h,e,f){b.setTransform(1,0,0,1,0,0),b.globalAlpha=1,b.drawImage(a,e-c,f-d)}},a.src=b.centreImage}function aE(a,c){var b=a,d,e,f=(c*1).toPrecision(3)+')';return a[0]==='#'?(I[a]||(a.length===4?I[a]='rgba('+R[a[1]]+R[a[2]]+R[a[3]]:I[a]='rgba('+D[a.substr(1,2)]+D[a.substr(3,2)]+D[a.substr(5,2)]),b=I[a]+f):a.substr(0,4)==='rgb('||a.substr(0,4)==='hsl('?b=a.replace('(','a(').replace(')',','+f):(a.substr(0,5)==='rgba('||a.substr(0,5)==='hsla(')&&(d=a.lastIndexOf(',')+1,e=a.indexOf(')'),c*=parseFloat(a.substring(d,e)),b=a.substr(0,d)+c.toPrecision(3)+')'),b}function k(b,d){if(window.G_vmlCanvasManager)return null;var a=c.createElement('canvas');return a.width=b,a.height=d,a}function aD(){var b=k(3,3),a,c;return!!b&&(a=b.getContext('2d'),a.strokeStyle='#000',a.shadowColor='#fff',a.shadowBlur=3,a.globalAlpha=0,a.strokeRect(2,2,2,2),a.globalAlpha=1,c=a.getImageData(2,2,1,1),b=null,c.data[0]>0)}function aC(a,c,f,d){var e=a.createLinearGradient(0,0,c,0),b;for(b in d)e.addColorStop(1-b,d[b]);a.fillStyle=e,a.fillRect(0,f,c,1)}function L(a,m,j){var l=1024,d=1,e=a.weightGradient,i,f,b,c;if(a.gCanvas)f=a.gCanvas.getContext('2d'),d=a.gCanvas.height;else{if(B(e[0])?d=e.length:e=[e],a.gCanvas=i=k(l,d),!i)return null;f=i.getContext('2d');for(b=0;b<d;++b)aC(f,l,b,e[b])}return j=g(h(j||0,d-1),0),c=f.getImageData(~~((l-1)*m),j,1,1).data,'rgba('+c[0]+','+c[1]+','+c[2]+','+c[3]/255+')'}function Y(b,i,q,k,o,n,h,d,a,g,f,l){var m=o+(d||0)+(a.length&&a[0]<0?p(a[0]):0),j=n+(d||0)+(a.length&&a[1]<0?p(a[1]):0),c,e;b.font=i,b.textBaseline='top',b.fillStyle=q,h&&(b.shadowColor=h),d&&(b.shadowBlur=d),a.length&&(b.shadowOffsetX=a[0],b.shadowOffsetY=a[1]);for(c=0;c<k.length;++c)e=0,f&&('right'==l?e=g-f[c]:'centre'==l&&(e=(g-f[c])/2)),b.fillText(k[c],m+e,j),j+=parseInt(i)}function y(d,a,b,f,e,c,g){c?(d.beginPath(),d.moveTo(a,b+e-c),d.arcTo(a,b,a+c,b,c),d.arcTo(a+f,b,a+f,b+c,c),d.arcTo(a+f,b+e,a+f-c,b+e,c),d.arcTo(a,b+e,a,b+e-c,c),d.closePath(),d[g?'stroke':'fill']()):d[g?'strokeRect':'fillRect'](a,b,f,e)}function O(a,b,c,d,e,f,g,h,i){this.strings=a,this.font=b,this.width=c,this.height=d,this.maxWidth=e,this.stringWidths=f,this.align=g,this.valign=h,this.scale=i}M=O.prototype,M.SetImage=function(a,b,c,d,e,f,g,h){this.image=a,this.iwidth=b*this.scale,this.iheight=c*this.scale,this.ipos=d,this.ipad=e*this.scale,this.iscale=h,this.ialign=f,this.ivalign=g},M.Align=function(c,d,a){var b=0;return a=='right'||a=='bottom'?b=d-c:a!='left'&&a!='top'&&(b=(d-c)/2),b},M.Create=function(G,D,F,b,A,m,q,j,E){var o,e,f,a,l,s,i,u,v,r,w,n,c,d,x,B=p(q[0]),C=p(q[1]),t,z;return j=g(j,B+m,C+m),l=2*(j+b),i=2*(j+b),e=this.width+l,f=this.height+i,v=r=j+b,this.image&&(w=n=j+b,c=this.iwidth,d=this.iheight,this.ipos=='top'||this.ipos=='bottom'?(c<this.width?w+=this.Align(c,this.width,this.ialign):v+=this.Align(this.width,c,this.align),this.ipos=='top'?r+=d+this.ipad:n+=this.height+this.ipad,e=g(e,c+l),f+=d+this.ipad):(d<this.height?n+=this.Align(d,this.height,this.ivalign):r+=this.Align(this.height,d,this.valign),this.ipos=='right'?w+=this.width+this.ipad:v+=c+this.ipad,e+=c+this.ipad,f=g(f,d+i))),o=k(e,f),!o?null:(l=i=b/2,s=e-b,u=f-b,x=h(E,s/2,u/2),a=o.getContext('2d'),D&&(a.fillStyle=D,y(a,l,i,s,u,x)),b&&(a.strokeStyle=F,a.lineWidth=b,y(a,l,i,s,u,x,!0)),(m||B||C)&&(t=k(e,f),t&&(z=a,a=t.getContext('2d'))),Y(a,this.font,G,this.strings,v,r,0,0,[],this.maxWidth,this.stringWidths,this.align),this.image&&a.drawImage(this.image,w,n,c,d),z&&(a=z,A&&(a.shadowColor=A),m&&(a.shadowBlur=m),a.shadowOffsetX=q[0],a.shadowOffsetY=q[1],a.drawImage(t,0,0)),o)};function H(a,c,d){var b=k(c,d),e;return b?(e=b.getContext('2d'),e.drawImage(a,(c-a.width)/2,(d-a.height)/2),b):null}function S(e,b,c){var a=k(b,c),d;return a?(d=a.getContext('2d'),d.drawImage(e,0,0,b,c),a):null}function W(n,u,t,e,s,c,v,d,r,w){var g=u+(2*d+c)*e,f=t+(2*d+c)*e,l=k(g,f),b,i,q,m,j,o,a,p;return l?(c*=e,r*=e,i=q=c/2,m=g-c,j=f-c,d=d*e+i,b=l.getContext('2d'),p=h(r,m/2,j/2),s&&(b.fillStyle=s,y(b,i,q,m,j,p)),c&&(b.strokeStyle=v,b.lineWidth=c,y(b,i,q,m,j,p,!0)),w?(o=k(g,f),a=o.getContext('2d'),a.drawImage(n,d,d,u,t),a.globalCompositeOperation='source-in',a.fillStyle=v,a.fillRect(0,0,g,f),a.globalCompositeOperation='destination-over',a.drawImage(l,0,0),a.globalCompositeOperation='source-over',b.drawImage(o,0,0)):b.drawImage(n,d,d,n.width,n.height),{image:l,width:g/e,height:f/e}):null}function at(l,f,c,d,j){var e,a,b=parseFloat(f),i=g(c,d);return e=k(c,d),!e?null:(f.indexOf('%')>0?b=i*b/100:b=b*j,a=e.getContext('2d'),a.globalCompositeOperation='source-over',a.fillStyle='#fff',b>=i/2?(b=h(c,d)/2,a.beginPath(),a.moveTo(c/2,d/2),a.arc(c/2,d/2,b,0,2*Math.PI,!1),a.fill(),a.closePath()):(b=h(c/2,d/2,b),y(a,0,0,c,d,b,!0),a.fill()),a.globalCompositeOperation='source-in',a.drawImage(l,0,0,c,d),e)}function ao(q,m,i,b,h,a,c){var g=p(c[0]),f=p(c[1]),j=m+(g>a?g+a:a*2)*b,l=i+(f>a?f+a:a*2)*b,n=b*((a||0)+(c[0]<0?g:0)),o=b*((a||0)+(c[1]<0?f:0)),e,d;return e=k(j,l),!e?null:(d=e.getContext('2d'),h&&(d.shadowColor=h),a&&(d.shadowBlur=a*b),c&&(d.shadowOffsetX=c[0]*b,d.shadowOffsetY=c[1]*b),d.drawImage(q,n,o,m,i),{image:e,width:j/b,height:l/b})}function ae(m,o,l){var c=parseInt(m.toString().length*l),h=parseInt(l*2*m.length),j=k(c,h),g,i,e,f,b,d,n,a;if(!j)return null;g=j.getContext('2d'),g.fillStyle='#000',g.fillRect(0,0,c,h),Y(g,l+'px '+o,'#fff',m,0,0,0,0,[],'centre'),i=g.getImageData(0,0,c,h),e=i.width,f=i.height,a={min:{x:e,y:f},max:{x:-1,y:-1}};for(d=0;d<f;++d)for(b=0;b<e;++b)n=(d*e+b)*4,i.data[n+1]>0&&(b<a.min.x&&(a.min.x=b),b>a.max.x&&(a.max.x=b),d<a.min.y&&(a.min.y=d),d>a.max.y&&(a.max.y=d));return e!=c&&(a.min.x*=c/e,a.max.x*=c/e),f!=h&&(a.min.y*=c/f,a.max.y*=c/f),j=null,a}function Q(a){return\"'\"+a.replace(/('|\")/g,'').replace(/s*,s*/g,\"', '\")+\"'\"}function t(b,d,a){a=a||c,a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent('on'+b,d)}function am(b,d,a){a=a||c,a.removeEventListener?a.removeEventListener(b,d):a.detachEvent('on'+b,d)}function A(g,e,j,a,b){var l=b.imageScale,h,c,k,m,f,d;if(!e.complete)return t('load',function(){A(g,e,j,a,b)},e);if(!g.complete)return t('load',function(){A(g,e,j,a,b)},g);if(j&&!j.complete)return t('load',function(){A(g,e,j,a,b)},j);e.width=e.width,e.height=e.height,l&&(g.width=e.width*l,g.height=e.height*l),a.iw=g.width,a.ih=g.height,b.txtOpt&&(c=g,h=b.zoomMax*b.txtScale,f=a.iw*h,d=a.ih*h,f<e.naturalWidth||d<e.naturalHeight?(c=S(g,f,d),c&&(a.fimage=c)):(f=a.iw,d=a.ih,h=1),parseFloat(b.imageRadius)&&(a.image=a.fimage=g=at(a.image,b.imageRadius,f,d,h)),a.HasText()||(b.shadow&&(c=ao(a.image,f,d,h,b.shadow,b.shadowBlur,b.shadowOffset),c&&(a.fimage=c.image,a.w=c.width,a.h=c.height)),(b.bgColour||b.bgOutlineThickness)&&(k=b.bgColour=='tag'?i(a.a,'background-color'):b.bgColour,m=b.bgOutline=='tag'?i(a.a,'color'):b.bgOutline||b.textColour,f=a.fimage.width,d=a.fimage.height,b.outlineMethod=='colour'&&(c=W(a.fimage,f,d,h,k,b.bgOutlineThickness,a.outline.colour,b.padding,b.bgRadius,1),c&&(a.oimage=c.image)),c=W(a.fimage,f,d,h,k,b.bgOutlineThickness,m,b.padding,b.bgRadius),c&&(a.fimage=c.image,a.w=c.width,a.h=c.height)),b.outlineMethod=='size'&&(b.outlineIncrease>0?(a.iw+=2*b.outlineIncrease,a.ih+=2*b.outlineIncrease,f=h*a.iw,d=h*a.ih,c=S(a.fimage,f,d),a.oimage=c,a.fimage=H(a.fimage,a.oimage.width,a.oimage.height)):(f=h*(a.iw+2*b.outlineIncrease),d=h*(a.ih+2*b.outlineIncrease),c=S(a.fimage,f,d),a.oimage=H(c,a.fimage.width,a.fimage.height))))),a.alt=j,a.Init()}function i(a,d){var b=c.defaultView,e=d.replace(/-([a-z])/g,function(a){return a.charAt(1).toUpperCase()});return b&&b.getComputedStyle&&b.getComputedStyle(a,null).getPropertyValue(d)||a.currentStyle&&a.currentStyle[e]}function aj(c,d,e){var b=1,a;return d?b=1*(c.getAttribute(d)||e):(a=i(c,'font-size'))&&(b=a.indexOf('px')>-1&&a.replace('px','')*1||a.indexOf('pt')>-1&&a.replace('pt','')*1.25||a*3.3),b}function u(a){return a.target&&n(a.target.id)?a.target.id:a.srcElement.parentNode.id}function K(a,c){var b,d,e=parseInt(i(c,'width'))/c.width,f=parseInt(i(c,'height'))/c.height;return n(a.offsetX)?b={x:a.offsetX,y:a.offsetY}:(d=X(c.id),n(a.changedTouches)&&(a=a.changedTouches[0]),a.pageX&&(b={x:a.pageX-d.x,y:a.pageY-d.y})),b&&e&&f&&(b.x/=e,b.y/=f),b}function an(c){var d=c.target||c.fromElement.parentNode,b=a.tc[d.id];b&&(b.mx=b.my=-1,b.UnFreeze(),b.EndDrag())}function ad(e){var g,c=a,b,d,f=u(e);for(g in c.tc)b=c.tc[g],b.tttimer&&(clearTimeout(b.tttimer),b.tttimer=null);f&&c.tc[f]&&(b=c.tc[f],(d=K(e,b.canvas))&&(b.mx=d.x,b.my=d.y,b.Drag(e,d)),b.drawn=0)}function ap(b){var e=a,f=c.addEventListener?0:1,d=u(b);d&&b.button==f&&e.tc[d]&&e.tc[d].BeginDrag(b)}function aq(b){var f=a,g=c.addEventListener?0:1,e=u(b),d;e&&b.button==g&&f.tc[e]&&(d=f.tc[e],ad(b),!d.EndDrag()&&!d.touchState&&d.Clicked(b))}function ar(c){var e=u(c),b=e&&a.tc[e],d;b&&c.changedTouches&&(c.touches.length==1&&b.touchState==0?(b.touchState=1,b.BeginDrag(c),(d=K(c,b.canvas))&&(b.mx=d.x,b.my=d.y,b.drawn=0)):c.targetTouches.length==2&&b.pinchZoom?(b.touchState=3,b.EndDrag(),b.BeginPinch(c)):(b.EndDrag(),b.EndPinch(),b.touchState=0))}function ac(c){var d=u(c),b=d&&a.tc[d];if(b&&c.changedTouches){switch(b.touchState){case 1:b.Draw(),b.Clicked();break;break;case 2:b.EndDrag();break;case 3:b.EndPinch()}b.touchState=0}}function au(c){var f,e=a,b,d,g=u(c);for(f in e.tc)b=e.tc[f],b.tttimer&&(clearTimeout(b.tttimer),b.tttimer=null);if(b=g&&e.tc[g],b&&c.changedTouches&&b.touchState){switch(b.touchState){case 1:case 2:(d=K(c,b.canvas))&&(b.mx=d.x,b.my=d.y,b.Drag(c,d)&&(b.touchState=2));break;case 3:b.Pinch(c)}b.drawn=0}}function ab(b){var d=a,c=u(b);c&&d.tc[c]&&(b.cancelBubble=!0,b.returnValue=!1,b.preventDefault&&b.preventDefault(),d.tc[c].Wheel((b.wheelDelta||b.detail)>0))}function aw(d){var c,b=a;clearTimeout(b.scrollTimer);for(c in b.tc)b.tc[c].Pause();b.scrollTimer=setTimeout(function(){var b,c=a;for(b in c.tc)c.tc[b].Resume()},b.scrollPause)}function al(){Z(q())}function Z(b){var c=a.tc,d;a.NextFrame(a.interval),b=b||q();for(d in c)c[d].Draw(b)}function az(){requestAnimationFrame(Z)}function aA(a){setTimeout(al,a)}function X(f){var g=c.getElementById(f),b=g.getBoundingClientRect(),a=c.documentElement,d=c.body,e=window,h=e.pageXOffset||a.scrollLeft,i=e.pageYOffset||a.scrollTop,j=a.clientLeft||d.clientLeft,k=a.clientTop||d.clientTop;return{x:b.left+h-j,y:b.top+i-k}}function aI(a,b,d,e){var c=a.radius*a.z1/(a.z1+a.z2+b.z);return{x:b.x*c*d,y:b.y*c*e,z:b.z,w:(a.z1-b.z)/a.z2}}function V(a){this.e=a,this.br=0,this.line=[],this.text=[],this.original=a.innerText||a.textContent}F=V.prototype,F.Empty=function(){for(var a=0;a<this.text.length;++a)if(this.text[a].length)return!1;return!0},F.Lines=function(c){var e=c?1:0,b,d,a;c=c||this.e,b=c.childNodes,d=b.length;for(a=0;a<d;++a)b[a].nodeName=='BR'?(this.text.push(this.line.join(' ')),this.br=1):b[a].nodeType==3?this.br?(this.line=[b[a].nodeValue],this.br=0):this.line.push(b[a].nodeValue):this.Lines(b[a]);return e||this.br||this.text.push(this.line.join(' ')),this.text},F.SplitWidth=function(h,e,f,g){var c,b,a,d=[];e.font=g+'px '+f;for(c=0;c<this.text.length;++c){a=this.text[c].split(/s+/),this.line=[a[0]];for(b=1;b<a.length;++b)e.measureText(this.line.join(' ')+' '+a[b]).width>h?(d.push(this.line.join(' ')),this.line=[a[b]]):this.line.push(a[b]);d.push(this.line.join(' '))}return this.text=d};function _(a,b){this.ts=null,this.tc=a,this.tag=b,this.x=this.y=this.w=this.h=this.sc=1,this.z=0,this.pulse=1,this.pulsate=a.pulsateTo<1,this.colour=a.outlineColour,this.adash=~~a.outlineDash,this.agap=~~a.outlineDashSpace||this.adash,this.aspeed=a.outlineDashSpeed*1,this.colour=='tag'?this.colour=i(b.a,'color'):this.colour=='tagbg'&&(this.colour=i(b.a,'background-color')),this.Draw=this.pulsate?this.DrawPulsate:this.DrawSimple,this.radius=a.outlineRadius|0,this.SetMethod(a.outlineMethod,a.altImage)}f=_.prototype,f.SetMethod=function(a,d){var b={block:['PreDraw','DrawBlock'],colour:['PreDraw','DrawColour'],outline:['PostDraw','DrawOutline'],classic:['LastDraw','DrawOutline'],size:['PreDraw','DrawSize'],none:['LastDraw']},c=b[a]||b.outline;a=='none'?this.Draw=function(){return 1}:this.drawFunc=this[c[1]],this[c[0]]=this.Draw,d&&(this.RealPreDraw=this.PreDraw,this.PreDraw=this.DrawAlt)},f.Update=function(d,e,i,j,a,f,g,h){var b=this.tc.outlineOffset,c=2*b;this.x=a*d+g-b,this.y=a*e+h-b,this.w=a*i+c,this.h=a*j+c,this.sc=a,this.z=f},f.Ants=function(k){if(!this.adash)return;var b=this.adash,c=this.agap,a=this.aspeed,j=b+c,h=0,g=b,f=c,i=0,d=0,e;a&&(d=p(a)*(q()-this.ts)/50,a<0&&(d=864e4-d),a=~~d%j),a?(b>=a?(h=b-a,g=a):(f=j-a,i=c-f),e=[h,f,g,i]):e=[b,c],k.setLineDash(e)},f.DrawOutline=function(a,d,e,b,c,f){var g=h(this.radius,c/2,b/2);a.strokeStyle=f,this.Ants(a),y(a,d,e,b,c,g,!0)},f.DrawSize=function(i,n,m,l,k,j,a,h,g){var f=a.w,e=a.h,c,b,d;return this.pulsate?(a.image?d=(a.image.height+this.tc.outlineIncrease)/a.image.height:d=a.oscale,b=a.fimage||a.image,c=1+(d-1)*(1-this.pulse),a.h*=c,a.w*=c):b=a.oimage,a.alpha=1,a.Draw(i,h,g,b),a.h=e,a.w=f,1},f.DrawColour=function(d,h,i,e,f,g,a,b,c){return a.oimage?(this.pulse<1?(a.alpha=1-w(this.pulse,2),a.Draw(d,b,c,a.fimage),a.alpha=this.pulse):a.alpha=1,a.Draw(d,b,c,a.oimage),1):this[a.image?'DrawColourImage':'DrawColourText'](d,h,i,e,f,g,a,b,c)},f.DrawColourText=function(f,h,i,j,g,e,a,b,c){var d=a.colour;return a.colour=e,a.alpha=1,a.Draw(f,b,c),a.colour=d,1},f.DrawColourImage=function(a,q,p,o,n,m,i,r,l){var f=a.canvas,e=~~g(q,0),d=~~g(p,0),c=h(f.width-e,o)+.5|0,b=h(f.height-d,n)+.5|0,j;return v?(v.width=c,v.height=b):v=k(c,b),!v?this.SetMethod('outline'):(j=v.getContext('2d'),j.drawImage(f,e,d,c,b,0,0,c,b),a.clearRect(e,d,c,b),this.pulsate?i.alpha=1-w(this.pulse,2):i.alpha=1,i.Draw(a,r,l),a.setTransform(1,0,0,1,0,0),a.save(),a.beginPath(),a.rect(e,d,c,b),a.clip(),a.globalCompositeOperation='source-in',a.fillStyle=m,a.fillRect(e,d,c,b),a.restore(),a.globalAlpha=1,a.globalCompositeOperation='destination-over',a.drawImage(v,0,0,c,b,e,d,c,b),a.globalCompositeOperation='source-over',1)},f.DrawAlt=function(b,a,c,d,f,g){var e=this.RealPreDraw(b,a,c,d,f,g);return a.alt&&(a.DrawImage(b,c,d,a.alt),e=1),e},f.DrawBlock=function(a,d,e,b,c,f){var g=h(this.radius,c/2,b/2);a.fillStyle=f,y(a,d,e,b,c,g)},f.DrawSimple=function(a,b,c,d,e,f){var g=this.tc;return a.setTransform(1,0,0,1,0,0),a.strokeStyle=this.colour,a.lineWidth=g.outlineThickness,a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0,a.globalAlpha=f?e:1,this.drawFunc(a,this.x,this.y,this.w,this.h,this.colour,b,c,d)},f.DrawPulsate=function(h,d,e,f){var g=q()-this.ts,c=this.tc,b=c.pulsateTo+(1-c.pulsateTo)*(.5+l(2*Math.PI*g/(1e3*c.pulsateTime))/2);return this.pulse=b=a.Smooth(1,b),this.DrawSimple(h,d,e,f,b,1)},f.Active=function(d,a,b){var c=a>=this.x&&b>=this.y&&a<=this.x+this.w&&b<=this.y+this.h;return c?this.ts=this.ts||q():this.ts=null,c},f.PreDraw=f.PostDraw=f.LastDraw=x;function J(a,h,c,b,e,f,g,d,i,j,k,l,m,n){this.tc=a,this.image=null,this.text=h,this.text_original=n,this.line_widths=[],this.title=c.title||null,this.a=c,this.position=new s(b[0],b[1],b[2]),this.x=this.y=this.z=0,this.w=e,this.h=f,this.colour=g||a.textColour,this.bgColour=d||a.bgColour,this.bgRadius=i|0,this.bgOutline=j||this.colour,this.bgOutlineThickness=k|0,this.textFont=l||a.textFont,this.padding=m|0,this.sc=this.alpha=1,this.weighted=!a.weight,this.outline=new _(a,this),this.audio=null}d=J.prototype,d.Init=function(b){var a=this.tc;this.textHeight=a.textHeight,this.HasText()?this.Measure(a.ctxt,a):(this.w=this.iw,this.h=this.ih),this.SetShadowColour=a.shadowAlpha?this.SetShadowColourAlpha:this.SetShadowColourFixed,this.SetDraw(a)},d.Draw=x,d.HasText=function(){return this.text&&this.text[0].length>0},d.EqualTo=function(a){var b=a.getElementsByTagName('img');return this.a.href!=a.href?0:b.length?this.image.src==b[0].src:(a.innerText||a.textContent)==this.text_original},d.SetImage=function(a){this.image=this.fimage=a},d.SetAudio=function(a){this.audio=a,this.audio.load()},d.SetDraw=function(a){this.Draw=this.fimage?a.ie>7?this.DrawImageIE:this.DrawImage:this.DrawText,a.noSelect&&(this.CheckActive=x)},d.MeasureText=function(d){var a,e=this.text.length,b=0,c;for(a=0;a<e;++a)this.line_widths[a]=c=d.measureText(this.text[a]).width,b=g(b,c);return b},d.Measure=function(e,a){var f=ae(this.text,this.textFont,this.textHeight),b,k,h,i,g,l,j,c,d;j=f?f.max.y+f.min.y:this.textHeight,e.font=this.font=this.textHeight+'px '+this.textFont,l=this.MeasureText(e),a.txtOpt&&(b=a.txtScale,k=b*this.textHeight,h=k+'px '+this.textFont,i=[b*a.shadowOffset[0],b*a.shadowOffset[1]],e.font=h,g=this.MeasureText(e),d=new O(this.text,h,g+b,b*j+b,g,this.line_widths,a.textAlign,a.textVAlign,b),this.image&&d.SetImage(this.image,this.iw,this.ih,a.imagePosition,a.imagePadding,a.imageAlign,a.imageVAlign,a.imageScale),c=d.Create(this.colour,this.bgColour,this.bgOutline,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius),a.outlineMethod=='colour'?this.oimage=d.Create(this.outline.colour,this.bgColour,this.outline.colour,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius):a.outlineMethod=='size'&&(f=ae(this.text,this.textFont,this.textHeight+a.outlineIncrease),k=f.max.y+f.min.y,h=b*(this.textHeight+a.outlineIncrease)+'px '+this.textFont,e.font=h,g=this.MeasureText(e),d=new O(this.text,h,g+b,b*k+b,g,this.line_widths,a.textAlign,a.textVAlign,b),this.image&&d.SetImage(this.image,this.iw+a.outlineIncrease,this.ih+a.outlineIncrease,a.imagePosition,a.imagePadding,a.imageAlign,a.imageVAlign,a.imageScale),this.oimage=d.Create(this.colour,this.bgColour,this.bgOutline,b*this.bgOutlineThickness,a.shadow,b*a.shadowBlur,i,b*this.padding,b*this.bgRadius),this.oscale=this.oimage.width/c.width,a.outlineIncrease>0?c=H(c,this.oimage.width,this.oimage.height):this.oimage=H(this.oimage,c.width,c.height)),c&&(this.fimage=c,l=this.fimage.width/b,j=this.fimage.height/b),this.SetDraw(a),a.txtOpt=!!this.fimage),this.h=j,this.w=l},d.SetFont=function(a,b,c,d){this.textFont=a,this.colour=b,this.bgColour=c,this.bgOutline=d,this.Measure(this.tc.ctxt,this.tc)},d.SetWeight=function(c){var b=this.tc,e=b.weightMode.split(/[, ]/),d,a,f=c.length;if(!this.HasText())return;this.weighted=!0;for(a=0;a<f;++a)d=e[a]||'size','both'==d?(this.Weight(c[a],b.ctxt,b,'size',b.min_weight[a],b.max_weight[a],a),this.Weight(c[a],b.ctxt,b,'colour',b.min_weight[a],b.max_weight[a],a)):this.Weight(c[a],b.ctxt,b,d,b.min_weight[a],b.max_weight[a],a);this.Measure(b.ctxt,b)},d.Weight=function(b,i,a,d,f,h,e){b=isNaN(b)?1:b;var c=(b-f)/(h-f);'colour'==d?this.colour=L(a,c,e):'bgcolour'==d?this.bgColour=L(a,c,e):'bgoutline'==d?this.bgOutline=L(a,c,e):'outline'==d?this.outline.colour=L(a,c,e):'size'==d&&(a.weightSizeMin>0&&a.weightSizeMax>a.weightSizeMin?this.textHeight=a.weightSize*(a.weightSizeMin+(a.weightSizeMax-a.weightSizeMin)*c):this.textHeight=g(1,b*a.weightSize))},d.SetShadowColourFixed=function(a,b,c){a.shadowColor=b},d.SetShadowColourAlpha=function(a,b,c){a.shadowColor=aE(b,c)},d.DrawText=function(a,h,i){var e=this.tc,g=this.x,f=this.y,c=this.sc,b,d;a.globalAlpha=this.alpha,a.fillStyle=this.colour,e.shadow&&this.SetShadowColour(a,e.shadow,this.alpha),a.font=this.font,g+=h/c,f+=i/c-this.h/2;for(b=0;b<this.text.length;++b)d=g,'right'==e.textAlign?d+=this.w/2-this.line_widths[b]:'centre'==e.textAlign?d-=this.line_widths[b]/2:d-=this.w/2,a.setTransform(c,0,0,c,c*d,c*f),a.fillText(this.text[b],0,0),f+=this.textHeight},d.DrawImage=function(b,i,k,l){var e=this.x,f=this.y,a=this.sc,j=l||this.fimage,c=this.w,d=this.h,g=this.alpha,h=this.shadow;b.globalAlpha=g,h&&this.SetShadowColour(b,h,g),e+=i/a-c/2,f+=k/a-d/2,b.setTransform(a,0,0,a,a*e,a*f),b.drawImage(j,0,0,c,d)},d.DrawImageIE=function(b,d,e){var c=this.fimage,a=this.sc,f=c.width=this.w*a,g=c.height=this.h*a,h=this.x*a+d-f/2,i=this.y*a+e-g/2;b.setTransform(1,0,0,1,0,0),b.globalAlpha=this.alpha,b.drawImage(c,h,i)},d.Calc=function(g,e){var a,b=this.tc,d=b.minBrightness,f=b.maxBrightness,c=b.max_radius;return a=g.xform(this.position),this.xformed=a,a=aI(b,a,b.stretchX,b.stretchY),this.x=a.x,this.y=a.y,this.z=a.z,this.sc=a.w,this.alpha=e*G(d+(f-d)*(c-this.z)/(2*c),0,1),this.xformed},d.UpdateActive=function(h,e,f){var a=this.outline,b=this.w,c=this.h,d=this.x-b/2,g=this.y-c/2;return a.Update(d,g,b,c,this.sc,this.z,e,f),a},d.CheckActive=function(a,d,e){var b=this.tc,c=this.UpdateActive(a,d,e);return c.Active(a,b.mx,b.my)?c:null},d.Clicked=function(f){var b=this.a,a=b.target,d=b.href,e;if(a!=''&&a!='_self'){if(self.frames[a])self.frames[a].document.location=d;else{try{if(top.frames[a]){top.frames[a].document.location=d;return}}catch(a){}window.open(d,a)}return}if(c.createEvent){if(e=c.createEvent('MouseEvents'),e.initMouseEvent('click',1,1,window,0,0,0,0,0,0,0,0,0,0,null),!b.dispatchEvent(e))return}else if(b.fireEvent)if(!b.fireEvent('onclick'))return;c.location=d},d.StopAudio=function(){this.audio&&this.playing&&this.audio.pause(),this.stopped=1,this.playing=0},d.PlayAudio=function(){if(e==='off'||this.tc.audioOff)return;if(!e&&!ag())return;var a=this.tc.audio,c=this.tc.gain,d='suspended',b;if(this.audio)if(this.track||(this.track=e.createMediaElementSource(this.audio),this.gain=e.createGain(),this.track.connect(this.gain),this.gain.connect(e.destination)),a=this.audio,c=this.gain,!a.paused)return 1;if(a){if(e.state==d&&e.resume(),e.state==d)return;return c.gain.value=h(2,g(0,this.tc.audioVolume*1)),a.currentTime=0,this.stopped=0,b=a.play(),b!==void 0&&b.then(a=>{this.stopped?this.audio.pause():this.playing=1}),1}};function a(f,o,k){var d,i,b=c.getElementById(f),l=['id','class','innerHTML'];if(!b)throw 0;if(n(window.G_vmlCanvasManager)&&(b=window.G_vmlCanvasManager.initElement(b),this.ie=parseFloat(navigator.appVersion.split('MSIE')[1])),b&&(!b.getContext||!b.getContext('2d').fillText)){i=c.createElement('DIV');for(d=0;d<l.length;++d)i[l[d]]=b[l[d]];throw b.parentNode.insertBefore(i,b),b.parentNode.removeChild(b),0}for(d in a.options)this[d]=k&&n(k[d])?k[d]:n(a[d])?a[d]:a.options[d];if(this.canvas=b,this.ctxt=b.getContext('2d'),this.z1=250/g(this.depth,.001),this.z2=this.z1/this.zoom,this.radius=h(b.height,b.width)*.0075,this.max_radius=100,this.max_weight=[],this.min_weight=[],this.textFont=this.textFont&&Q(this.textFont),this.textHeight*=1,this.imageRadius=this.imageRadius.toString(),this.pulsateTo=G(this.pulsateTo,0,1),this.minBrightness=G(this.minBrightness,0,1),this.maxBrightness=G(this.maxBrightness,this.minBrightness,1),this.ctxt.textBaseline='top',this.lx=(this.lock+'').indexOf('x')+1,this.ly=(this.lock+'').indexOf('y')+1,this.frozen=this.dx=this.dy=this.fixedAnim=this.touchState=0,this.fixedAlpha=1,this.source=o||f,this.repeatTags=h(64,~~this.repeatTags),this.minTags=h(200,~~this.minTags),~~this.scrollPause>0?a.scrollPause=~~this.scrollPause:this.scrollPause=0,this.minTags>0&&this.repeatTags<1&&(d=this.GetTags().length)&&(this.repeatTags=af(this.minTags/d)-1),this.transform=m.Identity(),this.startTime=this.time=q(),this.mx=this.my=-1,this.centreImage&&av(this),this.Animate=this.dragControl?this.AnimateDrag:this.AnimatePosition,this.animTiming=typeof a[this.animTiming]=='function'?a[this.animTiming]:a.Smooth,this.shadowBlur||this.shadowOffset[0]||this.shadowOffset[1]?(this.ctxt.shadowColor=this.shadow,this.shadow=this.ctxt.shadowColor,this.shadowAlpha=aD()):delete this.shadow,this.activeAudio===!1?e='off':this.activeAudio&&this.LoadAudio(),this.Load(),o&&this.hideTags&&function(b){a.loaded?b.HideTags():t('load',function(){b.HideTags()},window)}(this),this.yaw=this.initial?this.initial[0]*this.maxSpeed:0,this.pitch=this.initial?this.initial[1]*this.maxSpeed:0,this.tooltip?(this.ctitle=b.title,b.title='',this.tooltip=='native'?this.Tooltip=this.TooltipNative:(this.Tooltip=this.TooltipDiv,this.ttdiv||(this.ttdiv=c.createElement('div'),this.ttdiv.className=this.tooltipClass,this.ttdiv.style.position='absolute',this.ttdiv.style.zIndex=b.style.zIndex+1,t('mouseover',function(a){a.target.style.display='none'},this.ttdiv),c.body.appendChild(this.ttdiv)))):this.Tooltip=this.TooltipNone,!this.noMouse&&!j[f]){j[f]=[['mousemove',ad],['mouseout',an],['mouseup',aq],['touchstart',ar],['touchend',ac],['touchcancel',ac],['touchmove',au]],this.dragControl&&(j[f].push(['mousedown',ap]),j[f].push(['selectstart',x])),this.wheelZoom&&(j[f].push(['mousewheel',ab]),j[f].push(['DOMMouseScroll',ab])),this.scrollPause&&j[f].push(['scroll',aw,window]);for(d=0;d<j[f].length;++d)i=j[f][d],t(i[0],i[1],i[2]?i[2]:b)}a.started||(a.NextFrame=window.requestAnimationFrame?az:aA,a.interval=this.interval,a.NextFrame(this.interval),a.started=1)}b=a.prototype,b.SourceElements=function(){return c.querySelectorAll?c.querySelectorAll('#'+this.source):[c.getElementById(this.source)]},b.HideTags=function(){var b=this.SourceElements(),a;for(a=0;a<b.length;++a)b[a].style.display='none'},b.GetTags=function(){var e=this.SourceElements(),c,f=[],a,b,d;for(d=0;d<=this.repeatTags;++d)for(a=0;a<e.length;++a){c=e[a].getElementsByTagName('a');for(b=0;b<c.length;++b)f.push(c[b])}return f},b.Message=function(j){var g=[],a,f,b=j.split(''),d,e,h,i;for(a=0;a<b.length;++a)b[a]!=' '&&(f=a-b.length/2,d=c.createElement('A'),d.href='#',d.innerText=b[a],h=100*o(f/9),i=-100*l(f/9),e=new J(this,b[a],d,[h,0,i],2,18,'#000','#fff',0,0,0,'monospace',2,b[a]),e.Init(),g.push(e));return g},b.AddAudio=function(b,c){if(e==='off')return;var a=b.getElementsByTagName('audio');a.length&&(c.SetAudio(a[0]),this.hasAudio=1)},b.CreateTag=function(b){var e,c,a,f,d,g,h,j,k=[0,0,0],l;if('text'!=this.imageMode)if(e=b.getElementsByTagName('img'),e.length)if(c=new Image,c.src=e[0].src,!this.imageMode)return a=new J(this,\"\",b,k,0,0),a.SetImage(c),A(c,e[0],e[1],a,this),this.AddAudio(b,a),a;if('image'!=this.imageMode&&(d=new V(b),f=d.Lines(),d.Empty()?d=null:(g=this.textFont||Q(i(b,'font-family')),this.splitWidth&&(f=d.SplitWidth(this.splitWidth,this.ctxt,g,this.textHeight)),h=this.bgColour=='tag'?i(b,'background-color'):this.bgColour,j=this.bgOutline=='tag'?i(b,'color'):this.bgOutline)),d||c)return a=new J(this,f,b,k,2,this.textHeight+2,this.textColour||i(b,'color'),h,this.bgRadius,j,this.bgOutlineThickness,g,this.padding,d&&d.original),c?(a.SetImage(c),A(c,e[0],e[1],a,this)):a.Init(),this.AddAudio(b,a),a},b.UpdateTag=function(a,b){var c=this.textColour||i(b,'color'),d=this.textFont||Q(i(b,'font-family')),e=this.bgColour=='tag'?i(b,'background-color'):this.bgColour,f=this.bgOutline=='tag'?i(b,'color'):this.bgOutline;a.a=b,a.title=b.title,(a.colour!=c||a.textFont!=d||a.bgColour!=e||a.bgOutline!=f)&&a.SetFont(d,c,e,f)},b.Weight=function(d){var f=d.length,c,b,a,e=[],g,h=this.weightFrom?this.weightFrom.split(/[, ]/):[null],i=h.length;for(b=0;b<f;++b){e[b]=[];for(a=0;a<i;++a)c=aj(d[b].a,h[a],this.textHeight),(!this.max_weight[a]||c>this.max_weight[a])&&(this.max_weight[a]=c),(!this.min_weight[a]||c<this.min_weight[a])&&(this.min_weight[a]=c),e[b][a]=c}for(a=0;a<i;++a)this.max_weight[a]>this.min_weight[a]&&(g=1);if(g)for(b=0;b<f;++b)d[b].SetWeight(e[b])},b.Load=function(){var c=this.GetTags(),b=[],d,k,l,h,i,j,f,a,e=[],m={sphere:aB,vcylinder:ax,hcylinder:aH,vring:aG,hring:aF};if(c.length){e.length=c.length;for(a=0;a<c.length;++a)e[a]=a;this.shuffleTags&&ai(e),h=100*this.radiusX,i=100*this.radiusY,j=100*this.radiusZ,this.max_radius=g(h,g(i,j));for(a=0;a<c.length;++a)k=this.CreateTag(c[e[a]]),k&&b.push(k);this.weight&&this.Weight(b,!0),this.shapeArgs?this.shapeArgs[0]=b.length:(l=this.shape.toString().split(/[(),]/),d=l.shift(),typeof window[d]=='function'?this.shape=window[d]:this.shape=m[d]||m.sphere,this.shapeArgs=[b.length,h,i,j].concat(l)),f=this.shape.apply(this,this.shapeArgs),this.listLength=b.length;for(a=0;a<b.length;++a)b[a].position=new s(f[a][0],f[a][1],f[a][2])}this.noTagsMessage&&!b.length&&(a=this.imageMode&&this.imageMode!='both'?this.imageMode+' ':'',b=this.Message('No '+a+'tags')),this.taglist=b},b.Update=function(){var e=this.GetTags(),d=[],j=this.taglist,k,f=[],c=[],h,i,g,a,b;if(!this.shapeArgs)return this.Load();if(e.length){g=this.listLength=e.length,i=j.length;for(a=0;a<i;++a)d.push(j[a]),c.push(a);for(a=0;a<g;++a){for(b=0,k=0;b<i;++b)j[b].EqualTo(e[a])&&(this.UpdateTag(d[b],e[a]),k=c[b]=-1);k||f.push(a)}for(a=0,b=0;a<i;++a)c[b]==-1?c.splice(b,1):++b;if(c.length){for(ai(c);c.length&&f.length;)a=c.shift(),b=f.shift(),d[a]=this.CreateTag(e[b]);for(c.sort(function(a,b){return a-b});c.length;)d.splice(c.pop(),1)}for(b=d.length/(f.length+1),a=0;f.length;)d.splice(af(++a*b),0,this.CreateTag(e[f.shift()]));this.shapeArgs[0]=g=d.length,h=this.shape.apply(this,this.shapeArgs);for(a=0;a<g;++a)d[a].position=new s(h[a][0],h[a][1],h[a][2]);this.weight&&this.Weight(d)}this.taglist=d},b.SetShadow=function(a){a.shadowBlur=this.shadowBlur,a.shadowOffsetX=this.shadowOffset[0],a.shadowOffsetY=this.shadowOffset[1]},b.LoadAudio=function(){if(!e&&!ag())return;this.audio=c.createElement('audio'),this.audio.src=this.activeAudio,this.track=e.createMediaElementSource(this.audio),this.gain=e.createGain(),this.track.connect(this.gain),this.gain.connect(e.destination),this.hasAudio=1,P=function(a){e.resume(),c.removeEventListener('click',P)},c.addEventListener('click',P)},b.ShowAudioIcon=function(){var a=this.audioIconSize,c=this.canvas,d=this.ctxt,k=c.width-a-3,f=c.height-a-3,g=this.audioIconThickness,h='#000',i='#fff',j=this.audioIconDark,b=this.audioOff,l='suspended';if(!e)return;b||(b=e.state===l),this.audioIcon&&this.hasAudio&&($(b,d,a,k,f,g+1,j?i:h),$(b,d,a,k,f,g,j?h:i))},b.CheckAudioIcon=function(){var a=this.audioIconSize,b=this.canvas,c=this.audioIconThickness/2,d=b.width-a-3-c,e=b.height-a-3-c;if(this.audioIcon&&this.mx>=d&&this.my>=e)return!0},b.ToggleAudio=function(){var a=this.audioOff||e&&e.state==='suspended';a||this.currentAudio&&this.currentAudio.StopAudio(),this.audioOff=!a},b.Draw=function(s){if(this.paused)return;var l=this.canvas,i=l.width,j=l.height,q=0,p=(s-this.time)*a.interval/1e3,h=i/2+this.offsetX,g=j/2+this.offsetY,d=this.ctxt,b,f,c,o=-1,e=this.taglist,k=e.length,t=this.active&&this.active.tag,m='',u=this.frontSelect,r=this.centreFunc==x,n;if(this.time=s,this.frozen&&this.drawn)return this.Animate(i,j,p);n=this.AnimateFixed(),d.setTransform(1,0,0,1,0,0);for(c=0;c<k;++c)e[c].Calc(this.transform,this.fixedAlpha);if(e=ak(e,function(a,b){return b.z-a.z}),n&&this.fixedAnim.active)b=this.fixedAnim.tag.UpdateActive(d,h,g);else if(this.active=null,this.CheckAudioIcon())m='pointer';else{for(c=0;c<k;++c)f=this.mx>=0&&this.my>=0&&this.taglist[c].CheckActive(d,h,g),f&&f.sc>q&&(!u||f.z<=0)&&(b=f,o=c,b.tag=this.taglist[c],q=f.sc);this.active=b}this.txtOpt||this.shadow&&this.SetShadow(d),d.clearRect(0,0,i,j);for(c=0;c<k;++c){if(!r&&e[c].z<=0){try{this.centreFunc(d,i,j,h,g)}catch(a){alert(a),this.centreFunc=x}r=!0}b&&b.tag==e[c]&&b.PreDraw(d,e[c],h,g)||e[c].Draw(d,h,g),b&&b.tag==e[c]&&b.PostDraw(d)}this.freezeActive&&b?this.Freeze():(this.UnFreeze(),this.drawn=k==this.listLength),this.fixedCallback&&(this.fixedCallback(this,this.fixedCallbackTag),this.fixedCallback=null),n||this.Animate(i,j,p),b&&(b.LastDraw(d),b.tag!=t&&(this.currentAudio&&this.currentAudio!=b.tag&&this.currentAudio.StopAudio(),b.tag.PlayAudio()&&(this.currentAudio=b.tag)),m=this.activeCursor),l.style.cursor=m,this.Tooltip(b,this.taglist[o]),this.audioIcon&&this.ShowAudioIcon()},b.TooltipNone=function(){},b.TooltipNative=function(b,a){b?this.canvas.title=a&&a.title?a.title:'':this.canvas.title=this.ctitle},b.SetTTDiv=function(c,d){var a=this,b=a.ttdiv.style;c!=a.ttdiv.innerHTML&&(b.display='none'),a.ttdiv.innerHTML=c,d&&(d.title=a.ttdiv.innerHTML),b.display=='none'&&!a.tttimer&&(a.tttimer=setTimeout(function(){var c=X(a.canvas.id);b.display='block',b.left=c.x+a.mx+'px',b.top=c.y+a.my+24+'px',a.tttimer=null},a.tooltipDelay))},b.TooltipDiv=function(b,a){b&&a&&a.title?this.SetTTDiv(a.title,a):!b&&this.mx!=-1&&this.my!=-1&&this.ctitle.length?this.SetTTDiv(this.ctitle):this.ttdiv.style.display='none'},b.Transform=function(c,a,b){if(a||b){var d=o(a),e=l(a),f=o(b),g=l(b),h=new m([g,0,f,0,1,0,-f,0,g]),i=new m([1,0,0,0,e,-d,0,d,e]);c.transform=c.transform.mul(h.mul(i))}},b.AnimateFixed=function(){var a,b,c,d,e;return!!(this.fadeIn&&(b=q()-this.startTime,b>=this.fadeIn?(this.fadeIn=0,this.fixedAlpha=1):this.fixedAlpha=b/this.fadeIn),this.fixedAnim)&&(this.fixedAnim.transform||(this.fixedAnim.transform=this.transform),a=this.fixedAnim,b=q()-a.t0,c=a.angle,d,e=this.animTiming(a.t,b),this.transform=a.transform,b>=a.t?(this.fixedCallbackTag=a.tag,this.fixedCallback=a.cb,this.fixedAnim=this.yaw=this.pitch=0):c*=e,d=m.Rotation(c,a.axis),this.transform=this.transform.mul(d),this.fixedAnim!=0)},b.AnimatePosition=function(g,h,f){var a=this,d=a.mx,e=a.my,b,c;!a.frozen&&d>=0&&e>=0&&d<g&&e<h?(b=a.maxSpeed,c=a.reverse?-1:1,a.lx||(a.yaw=(d*2*b/g-b)*c*f),a.ly||(a.pitch=(e*2*b/h-b)*-c*f),a.initial=null):a.initial||(a.frozen&&!a.freezeDecel?a.yaw=a.pitch=0:a.Decel(a)),this.Transform(a,a.pitch,a.yaw)},b.AnimateDrag=function(d,e,c){var a=this,b=100*c*a.maxSpeed/a.max_radius/a.zoom;a.dx||a.dy?(a.lx||(a.yaw=a.dx*b/a.stretchX),a.ly||(a.pitch=a.dy*-b/a.stretchY),a.dx=a.dy=0,a.initial=null):a.initial||a.Decel(a),this.Transform(a,a.pitch,a.yaw)},b.Freeze=function(){this.frozen||(this.preFreeze=[this.yaw,this.pitch],this.frozen=1,this.drawn=0)},b.UnFreeze=function(){this.frozen&&(this.yaw=this.preFreeze[0],this.pitch=this.preFreeze[1],this.frozen=0)},b.Decel=function(a){var b=a.minSpeed,c=p(a.yaw),d=p(a.pitch);!a.lx&&c>b&&(a.yaw=c>a.z0?a.yaw*a.decel:0),!a.ly&&d>b&&(a.pitch=d>a.z0?a.pitch*a.decel:0)},b.Zoom=function(a){this.z2=this.z1*(1/a),this.drawn=0},b.Clicked=function(b){if(this.CheckAudioIcon()){this.ToggleAudio();return}var a=this.active;try{a&&a.tag&&(this.clickToFront===!1||this.clickToFront===null?a.tag.Clicked(b):this.TagToFront(a.tag,this.clickToFront,function(){a.tag.Clicked(b)},!0))}catch(a){}},b.Wheel=function(a){var b=this.zoom+this.zoomStep*(a?1:-1);this.zoom=h(this.zoomMax,g(this.zoomMin,b)),this.Zoom(this.zoom)},b.BeginDrag=function(a){this.down=K(a,this.canvas),a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault()},b.Drag=function(e,a){if(this.dragControl&&this.down){var d=this.dragThreshold*this.dragThreshold,b=a.x-this.down.x,c=a.y-this.down.y;(this.dragging||b*b+c*c>d)&&(this.dx=b,this.dy=c,this.dragging=1,this.down=a)}return this.dragging},b.EndDrag=function(){var a=this.dragging;return this.dragging=this.down=null,a};function ah(a){var b=a.targetTouches[0],c=a.targetTouches[1];return E(w(c.pageX-b.pageX,2)+w(c.pageY-b.pageY,2))}b.BeginPinch=function(a){this.pinched=[ah(a),this.zoom],a.preventDefault&&a.preventDefault()},b.Pinch=function(d){var b,c,a=this.pinched;if(!a)return;c=ah(d),b=a[1]*c/a[0],this.zoom=h(this.zoomMax,g(this.zoomMin,b)),this.Zoom(this.zoom)},b.EndPinch=function(a){this.pinched=null},b.Pause=function(){this.paused=!0},b.Resume=function(){this.paused=!1},b.SetSpeed=function(a){this.initial=a,this.yaw=a[0]*this.maxSpeed,this.pitch=a[1]*this.maxSpeed},b.FindTag=function(a){if(!n(a))return null;if(n(a.index)&&(a=a.index),!B(a))return this.taglist[a];var c,d,b;n(a.id)?(c='id',d=a.id):n(a.text)&&(c='innerText',d=a.text);for(b=0;b<this.taglist.length;++b)if(this.taglist[b].a[c]==d)return this.taglist[b]},b.RotateTag=function(a,h,i,j,f,g){var b=a.Calc(this.transform,1),c=new s(b.x,b.y,b.z),d=ay(i,h),e=c.angle(d),k=c.cross(d).unit();e==0?(this.fixedCallbackTag=a,this.fixedCallback=f):this.fixedAnim={angle:-e,axis:k,t:j,t0:q(),cb:f,tag:a,active:g}},b.TagToFront=function(a,b,c,d){this.RotateTag(a,0,0,b,c,d)},b.Volume=function(a){this.audioVolume=a*1},a.Start=function(b,c,d){a.Delete(b),a.tc[b]=new a(b,c,d)};function N(c,b){a.tc[b]&&a.tc[b][c]()}a.Linear=function(a,b){return b/a},a.Smooth=function(a,b){return.5-l(b*Math.PI/a)/2},a.Pause=function(a){N('Pause',a)},a.Resume=function(a){N('Resume',a)},a.Reload=function(a){N('Load',a)},a.Update=function(a){N('Update',a)},a.SetSpeed=function(c,b){return!!(B(b)&&a.tc[c]&&!isNaN(b[0])&&!isNaN(b[1]))&&(a.tc[c].SetSpeed(b),!0)},a.TagToFront=function(c,b){return!!B(b)&&(b.lat=b.lng=0,a.RotateTag(c,b))},a.RotateTag=function(c,b){if(B(b)&&a.tc[c]){isNaN(b.time)&&(b.time=500);var d=a.tc[c].FindTag(b);if(d)return a.tc[c].RotateTag(d,b.lat,b.lng,b.time,b.callback,b.active),!0}return!1},a.Delete=function(b){var d,e;if(j[b])if(e=c.getElementById(b),e)for(d=0;d<j[b].length;++d)am(j[b][d][0],j[b][d][1],e);delete j[b],delete a.tc[b]},a.tc={},a.options={z1:2e4,z2:2e4,z0:2e-4,freezeActive:!1,freezeDecel:!1,activeCursor:'pointer',pulsateTo:1,pulsateTime:3,reverse:!1,depth:.5,maxSpeed:.05,minSpeed:0,decel:.95,interval:20,minBrightness:.1,maxBrightness:1,outlineColour:'#ffff99',outlineThickness:2,outlineOffset:5,outlineMethod:'outline',outlineRadius:0,textColour:'#ff99ff',textHeight:15,textFont:'Helvetica, Arial, sans-serif',shadow:'#000',shadowBlur:0,shadowOffset:[0,0],initial:null,hideTags:!0,zoom:1,weight:!1,weightMode:'size',weightFrom:null,weightSize:1,weightSizeMin:null,weightSizeMax:null,weightGradient:{0:'#f00',0.33:'#ff0',0.66:'#0f0',1:'#00f'},txtOpt:!0,txtScale:2,frontSelect:!1,wheelZoom:!0,zoomMin:.3,zoomMax:3,zoomStep:.05,shape:'sphere',lock:null,tooltip:null,tooltipDelay:300,tooltipClass:'tctooltip',radiusX:1,radiusY:1,radiusZ:1,stretchX:1,stretchY:1,offsetX:0,offsetY:0,shuffleTags:!1,noSelect:!1,noMouse:!1,imageScale:1,paused:!1,dragControl:!1,dragThreshold:4,centreFunc:x,splitWidth:0,animTiming:'Smooth',clickToFront:!1,fadeIn:0,padding:0,bgColour:null,bgRadius:0,bgOutline:null,bgOutlineThickness:0,outlineIncrease:4,textAlign:'centre',textVAlign:'middle',imageMode:null,imagePosition:null,imagePadding:2,imageAlign:'centre',imageVAlign:'middle',noTagsMessage:!0,centreImage:null,pinchZoom:!1,repeatTags:0,minTags:0,imageRadius:0,scrollPause:!1,outlineDash:0,outlineDashSpace:0,outlineDashSpeed:1,activeAudio:'',audioVolume:1,audioIcon:1,audioIconSize:20,audioIconThickness:2,audioIconDark:0,altImage:0};for(r in a.options)a[r]=a.options[r];window.TagCanvas=a,t('load',function(){a.loaded=1},window)})()",s=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},guid=function(){return""+s()+s()+"-"+s()+"-"+s()+"-"+s()+"-"+s()+s()+s()},UseInViewport=function(e){var t=e.cb,i=e.children,n=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function(){var e=new IntersectionObserver(function(e){t(e.some(function(e){return e.isIntersecting}))},{root:null,rootMargin:"0px",threshold:.1});return null!=n&&n.current&&e.observe(n.current),function(){e.disconnect()}},[t]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:n},i)},isScriptLoaded=!1,tr=function(e){try{e()}catch(t){try{e()}catch(t){}}},CloudWrapped=function CloudWrapped(_ref){var _ref$options=_ref.options,options=void 0===_ref$options?{}:_ref$options,_ref$containerProps=_ref.containerProps,containerProps=void 0===_ref$containerProps?{}:_ref$containerProps,_ref$canvasProps=_ref.canvasProps,canvasProps=void 0===_ref$canvasProps?{}:_ref$canvasProps,children=_ref.children,_ref$id=_ref.id,id=void 0===_ref$id?guid():_ref$id,state=react__WEBPACK_IMPORTED_MODULE_0__.useRef({canvasContainerId:"canvas-container-"+id,canvasId:"canvas-"+id,hasStarted:!1}).current,_React$useState=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),mounted=_React$useState[0],setMounted=_React$useState[1];react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function(){return setMounted(!0),function(){return tr(function(){eval("TagCanvas.Delete('"+state.canvasId+"')")})}},[]);var supportsTouch="undefined"!==typeof window&&("ontouchstart"in window||navigator.maxTouchPoints),ops=JSON.stringify(_extends({dragControl:!!supportsTouch,maxSpeed:supportsTouch?.01:.05,textFont:null,textColour:null},options)),onVisibilityChange=function onVisibilityChange(isVisible){return tr(function(){if(isVisible&&mounted)if(isScriptLoaded||(eval(tagCanvasString),isScriptLoaded=!0),state.hasStarted)eval("TagCanvas.Resume('"+state.canvasId+"')");else try{eval("TagCanvas.Start('"+state.canvasId+"', null, "+ops+")"),state.hasStarted=!0}catch(e){var el=document.getElementById(state.canvasContainerId);throw el&&(el.style.display="none"),e}else state.hasStarted&&eval("TagCanvas.Pause('"+state.canvasId+"')")})};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(UseInViewport,{cb:onVisibilityChange},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",Object.assign({id:state.canvasContainerId},containerProps),react__WEBPACK_IMPORTED_MODULE_0__.createElement("canvas",Object.assign({id:state.canvasId,style:{width:"100%",maxWidth:"70vh"},width:1e3,height:1e3},canvasProps),children)))},Cloud=function(e){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CloudWrapped,Object.assign({},e,{key:guid()}))},addHash=function(e){return"#"===e[0]?e:"#"+e},renderSimpleIcon=function(e){var t=e.aProps,i=void 0===t?{}:t,n=e.bgHex,r=void 0===n?"#fff":n,a=e.fallbackHex,s=void 0===a?"#000":a,o=e.icon,l=e.imgProps,c=void 0===l?{}:l,h=e.minContrastRatio,u=void 0===h?1:h,d=e.size,p=void 0===d?42:d,f=addHash(o.hex),m=addHash(r),g=addHash(s),v=((0,_csstools_convert_colors__WEBPACK_IMPORTED_MODULE_1__.yX)(m,f)>u?(0,_csstools_convert_colors__WEBPACK_IMPORTED_MODULE_1__.xp)(f):(0,_csstools_convert_colors__WEBPACK_IMPORTED_MODULE_1__.xp)(g)).map(function(e){return Math.round(e/100*255)}),y='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" style="fill: rgb('+v[0]+", "+v[1]+", "+v[2]+');" viewBox="0 0 24 24" height="'+p+'px" width="'+p+'px"> <title>'+o.title+'</title> <path d="'+o.path+'"></path> </svg>',b=_extends({key:guid(),title:o.title,style:{cursor:"pointer"}},i),x=_extends({height:p,width:p,alt:o.title,src:y},c);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",Object.assign({},b),react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",Object.assign({},x)))},svgToPath=function(e){var t=e.indexOf('d="'),i=e.indexOf('"',t+3);return e.substring(t+3,i)},url="https://cdn.jsdelivr.net/npm/simple-icons@14.0.0/icons/",cache={},fallback="",getSlugPath=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var i,n,r,a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cache[t]){e.next=15;break}return e.prev=1,i=""+url+t+".svg",e.next=5,fetch(i,{cache:"force-cache"});case 5:return n=e.sent,e.next=8,n.text();case 8:r=e.sent,a=svgToPath(r),cache[t]=a,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:if(!cache[t]){e.next=17;break}return e.abrupt("return",cache[t]);case 17:return e.abrupt("return",fallback);case 18:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),getSlugsPath=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var i;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={},t.forEach(function(e){i[e]=e}),e.next=4,Promise.all(Object.keys(i).map(getSlugPath));case 4:return e.abrupt("return",t.map(function(e){var t;return{slug:e,path:null!=(t=cache[e])?t:fallback}}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),TITLE_TO_SLUG_REPLACEMENTS={"+":"plus",".":"dot","&":"and","\u0111":"d","\u0127":"h","\u0131":"i","\u0138":"k","\u0140":"l","\u0142":"l","\xdf":"ss","\u0167":"t"},TITLE_TO_SLUG_CHARS_REGEX=RegExp("["+Object.keys(TITLE_TO_SLUG_REPLACEMENTS).join("")+"]","g"),TITLE_TO_SLUG_RANGE_REGEX=/[^a-z0-9]/g,getSlug=function(e){return e.title.toLowerCase().replace(TITLE_TO_SLUG_CHARS_REGEX,function(e){return TITLE_TO_SLUG_REPLACEMENTS[e]}).normalize("NFD").replace(TITLE_TO_SLUG_RANGE_REGEX,"")},url$1="https://raw.githubusercontent.com/simple-icons/simple-icons/14.0.0/_data/simple-icons.json",cache$1,fallback$1="#000",primeCache=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,i;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(cache$1){e.next=14;break}return e.prev=1,e.next=4,fetch(url$1,{cache:"force-cache"});case 4:return t=e.sent,e.next=7,t.json();case 7:i=e.sent,cache$1={},i.forEach(function(e){var t,i=getSlug({title:e.title});cache$1[i]={hex:addHash(null!=(t=e.hex)?t:fallback$1),title:e.title,slug:i}}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}},e,null,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),getSlugHexs=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,primeCache();case 2:return e.abrupt("return",{hexs:t.map(function(e){var t,i,n,r;return{slug:e,hex:cache$1&&null!=(t=null==(i=cache$1[e])?void 0:i.hex)?t:fallback$1,title:cache$1&&null!=(n=null==(r=cache$1[e])?void 0:r.title)?n:"icon"}}),cache:cache$1});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fetchSimpleIcons=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var i,n,r,a,s,o,l;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.slugs,e.next=3,Promise.all([getSlugsPath(i),getSlugHexs(i)]);case 3:return n=e.sent,r=n[0],a=n[1],s=a.hexs,o=a.cache,l={},s.forEach(function(e){l[e.slug]=e}),r.forEach(function(e){l[e.slug].path=e.path}),i.forEach(function(e){var t=l[e];t.hex&&t.path||delete l[e]}),e.abrupt("return",{simpleIcons:l,allIcon:o});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},3382:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l,getFunctionName:()=>a});var n=i(528);const r=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function a(e){const t="".concat(e).match(r);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||a(e)||t}function o(e,t,i){const n=s(t);return e.displayName||(""!==n?"".concat(i,"(").concat(n,")"):i)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case n.vM:return o(e,e.render,"ForwardRef");case n.lD:return o(e,e.type,"memo");default:return}}}},3695:(e,t,i)=>{"use strict";t.A=void 0;var n=o(i(5043)),r=o(i(5173)),a=o(i(8139)),s=i(4687);function o(e){return e&&e.__esModule?e:{default:e}}const l=e=>{let{children:t="",className:i="",contentArrowStyle:r=null,contentStyle:o=null,date:l="",dateClassName:c="",icon:h=null,iconClassName:u="",iconOnClick:d=null,onTimelineElementClick:p=null,iconStyle:f=null,id:m="",position:g="",style:v=null,textClassName:y="",intersectionObserverProps:b={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:x=!1}=e;return n.default.createElement(s.InView,b,e=>{let{inView:s,ref:b}=e;return n.default.createElement("div",{ref:b,id:m,className:(0,a.default)(i,"vertical-timeline-element",{"vertical-timeline-element--left":"left"===g,"vertical-timeline-element--right":"right"===g,"vertical-timeline-element--no-children":""===t}),style:v},n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{style:f,onClick:d,className:(0,a.default)(u,"vertical-timeline-element-icon",{"bounce-in":s||x,"is-hidden":!(s||x)})},h),n.default.createElement("div",{style:o,onClick:p,className:(0,a.default)(y,"vertical-timeline-element-content",{"bounce-in":s||x,"is-hidden":!(s||x)})},n.default.createElement("div",{style:r,className:"vertical-timeline-element-content-arrow"}),t,n.default.createElement("span",{className:(0,a.default)(c,"vertical-timeline-element-date")},l))))})};l.propTypes={children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]),className:r.default.string,contentArrowStyle:r.default.shape({}),contentStyle:r.default.shape({}),date:r.default.node,dateClassName:r.default.string,icon:r.default.element,iconClassName:r.default.string,iconStyle:r.default.shape({}),iconOnClick:r.default.func,onTimelineElementClick:r.default.func,id:r.default.string,position:r.default.string,style:r.default.shape({}),textClassName:r.default.string,visible:r.default.bool,intersectionObserverProps:r.default.shape({root:r.default.object,rootMargin:r.default.string,threshold:r.default.number,triggerOnce:r.default.bool})};var c=l;t.A=c},3763:(e,t,i)=>{"use strict";e.exports=i(4983)},3815:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(9172);const r=function(e,t){return t?(0,n.A)(e,t,{clone:!1}):e}},4120:(e,t,i)=>{"use strict";e.exports={VerticalTimeline:i(8455).A,VerticalTimelineElement:i(3695).A}},4202:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function y(){}function b(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,A=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)A.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:i,type:e,key:s,ref:o,props:a,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var M=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return s=s(l=e),e=""===a?"."+T(l,0):a,w(s)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),P(s,t,r,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(M,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var h=a+T(o=e[c],c);l+=P(o,t,r,h,s)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,h=a+T(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,i){if(null==e)return e;var n=[],r=0;return P(e,n,"","",function(e){return t.call(i,e,r++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},I={transition:null},R={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,i){D(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=a,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)A.call(t,c)&&!_.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:i,type:e.type,key:a,ref:s,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,i){return k.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,i){return k.current.useReducer(e,t,i)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return k.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},4341:(e,t,i)=>{"use strict";var n=i(579),r=i(5043),a=function(){return a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function s(e,t){var i,n;switch(t.type){case"TYPE":return a(a({},e),{speed:t.speed,text:null===(i=t.payload)||void 0===i?void 0:i.substring(0,e.text.length+1)});case"DELAY":return a(a({},e),{speed:t.payload});case"DELETE":return a(a({},e),{speed:t.speed,text:null===(n=t.payload)||void 0===n?void 0:n.substring(0,e.text.length-1)});case"COUNT":return a(a({},e),{count:e.count+1});default:return e}}var o=function(e){var t=e.words,i=void 0===t?["Hello World!","This is","a simple Typewriter"]:t,n=e.loop,a=void 0===n?1:n,o=e.typeSpeed,l=void 0===o?80:o,c=e.deleteSpeed,h=void 0===c?50:c,u=e.delaySpeed,d=void 0===u?1500:u,p=e.onLoopDone,f=e.onType,m=e.onDelete,g=e.onDelay,v=r.useReducer(s,{speed:l,text:"",count:0}),y=v[0],b=y.speed,x=y.text,w=y.count,A=v[1],S=r.useRef(0),_=r.useRef(!1),E=r.useRef(!1),C=r.useRef(!1),M=r.useRef(!1),T=r.useCallback(function(){var e=w%i.length,t=i[e];E.current?(A({type:"DELETE",payload:t,speed:h}),""===x&&(E.current=!1,A({type:"COUNT"}))):(A({type:"TYPE",payload:t,speed:l}),C.current=!0,x===t&&(A({type:"DELAY",payload:d}),C.current=!1,M.current=!0,setTimeout(function(){M.current=!1,E.current=!0},d),a>0&&(S.current+=1,S.current/i.length===a&&(M.current=!1,_.current=!0)))),C.current&&f&&f(S.current),E.current&&m&&m(),M.current&&g&&g()},[w,d,h,a,l,i,x,f,m,g]);return r.useEffect(function(){var e=setTimeout(T,b);return _.current&&clearTimeout(e),function(){return clearTimeout(e)}},[T,b]),r.useEffect(function(){p&&_.current&&p()},[p]),[x,{isType:C.current,isDelay:M.current,isDelete:E.current,isDone:_.current}]};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var l=r.memo(function(e){var t=e.cursorBlinking,i=void 0===t||t,r=e.cursorStyle,s=void 0===r?"|":r,o=e.cursorColor,l=void 0===o?"inherit":o;return n.jsx("span",a({style:{color:l},className:"".concat("styles-module_blinkingCursor__yugAC"," ").concat(i?"styles-module_blinking__9VXRT":"")},{children:s}))});t.cU=function(e){var t=e.words,i=void 0===t?["Hello World!","This is","a simple Typewriter"]:t,r=e.loop,a=void 0===r?1:r,s=e.typeSpeed,c=void 0===s?80:s,h=e.deleteSpeed,u=void 0===h?50:h,d=e.delaySpeed,p=void 0===d?1500:d,f=e.cursor,m=void 0!==f&&f,g=e.cursorStyle,v=void 0===g?"|":g,y=e.cursorColor,b=void 0===y?"inherit":y,x=e.cursorBlinking,w=void 0===x||x,A=e.onLoopDone,S=e.onType,_=e.onDelay,E=e.onDelete,C=o({words:i,loop:a,typeSpeed:c,deleteSpeed:u,delaySpeed:p,onLoopDone:A,onType:S,onDelay:_,onDelete:E})[0];return n.jsxs(n.Fragment,{children:[n.jsx("span",{children:C}),m&&n.jsx(l,{cursorStyle:v,cursorColor:b,cursorBlinking:w})]})}},4391:(e,t,i)=>{"use strict";var n=i(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4612:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,r=e[n];if(!(0<a(r,t)))break e;e[n]=t,e[i]=r,i=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length,s=r>>>1;n<s;){var o=2*(n+1)-1,l=e[o],c=o+1,h=e[c];if(0>a(l,i))c<r&&0>a(h,l)?(e[n]=h,e[c]=i,n=c):(e[n]=l,e[o]=i,n=o);else{if(!(c<r&&0>a(h,i)))break e;e[n]=h,e[c]=i,n=c}}}return t}function a(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=n(h);null!==t;){if(null===t.callback)r(h);else{if(!(t.startTime<=e))break;r(h),t.sortIndex=t.expirationTime,i(c,t)}t=n(h)}}function w(e){if(g=!1,x(e),!m)if(null!==n(c))m=!0,I(A);else{var t=n(h);null!==t&&R(w,t.startTime-e)}}function A(e,i){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var a=p;try{for(x(i),d=n(c);null!==d&&(!(d.expirationTime>i)||e&&!P());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var o=s(d.expirationTime<=i);i=t.unstable_now(),"function"===typeof o?d.callback=o:d===n(c)&&r(c),x(i)}else r(c);d=n(c)}if(null!==d)var l=!0;else{var u=n(h);null!==u&&R(w,u.startTime-i),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,C=-1,M=5,T=-1;function P(){return!(t.unstable_now()-T<M)}function D(){if(null!==E){var e=t.unstable_now();T=e;var i=!0;try{i=E(!0,e)}finally{i?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(D)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,k=O.port2;O.port1.onmessage=D,S=function(){k.postMessage(null)}}else S=function(){v(D,0)};function I(e){E=e,_||(_=!0,S())}function R(e,i){C=v(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(A))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,i(h,e),null===n(c)&&e===n(h)&&(g?(y(C),C=-1):g=!0,R(w,a-s))):(e.sortIndex=o,i(c,e),m||f||(m=!0,I(A))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,i)=>{"use strict";i.r(t),i.d(t,{InView:()=>m,default:()=>m,defaultFallbackInView:()=>h,observe:()=>d,useInView:()=>g});var n=i(5043);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=new Map,o=new WeakMap,l=0,c=void 0;function h(e){c=e}function u(e){return Object.keys(e).sort().filter(function(t){return void 0!==e[t]}).map(function(t){return t+"_"+("root"===t?(i=e.root)?(o.has(i)||(l+=1,o.set(i,l.toString())),o.get(i)):"0":e[t]);var i}).toString()}function d(e,t,i,n){if(void 0===i&&(i={}),void 0===n&&(n=c),"undefined"===typeof window.IntersectionObserver&&void 0!==n){var r=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"===typeof i.threshold?i.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var a=function(e){var t=u(e),i=s.get(t);if(!i){var n,r=new Map,a=new IntersectionObserver(function(t){t.forEach(function(t){var i,a=t.isIntersecting&&n.some(function(e){return t.intersectionRatio>=e});e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(i=r.get(t.target))||i.forEach(function(e){e(a,t)})})},e);n=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:a,elements:r},s.set(t,i)}return i}(i),o=a.id,l=a.observer,h=a.elements,d=h.get(e)||[];return h.has(e)||h.set(e,d),d.push(t),l.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(h.delete(e),l.unobserve(e)),0===h.size&&(l.disconnect(),s.delete(o))}}var p=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function f(e){return"function"!==typeof e.children}var m=function(e){var t,i;function s(t){var i;return(i=e.call(this,t)||this).node=null,i._unobserveCb=null,i.handleNode=function(e){i.node&&(i.unobserve(),e||i.props.triggerOnce||i.props.skip||i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=e||null,i.observeNode()},i.handleChange=function(e,t){e&&i.props.triggerOnce&&i.unobserve(),f(i.props)||i.setState({inView:e,entry:t}),i.props.onChange&&i.props.onChange(e,t)},i.state={inView:!!t.initialInView,entry:void 0},i}i=e,(t=s).prototype=Object.create(i.prototype),t.prototype.constructor=t,a(t,i);var o=s.prototype;return o.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},o.componentWillUnmount=function(){this.unobserve(),this.node=null},o.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,i=e.root,n=e.rootMargin,r=e.trackVisibility,a=e.delay,s=e.fallbackInView;this._unobserveCb=d(this.node,this.handleChange,{threshold:t,root:i,rootMargin:n,trackVisibility:r,delay:a},s)}},o.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},o.render=function(){if(!f(this.props)){var e=this.state,t=e.inView,i=e.entry;return this.props.children({inView:t,entry:i,ref:this.handleNode})}var a=this.props,s=a.children,o=a.as,l=function(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(a,p);return n.createElement(o||"div",r({ref:this.handleNode},l),s)},s}(n.Component);function g(e){var t=void 0===e?{}:e,i=t.threshold,r=t.delay,a=t.trackVisibility,s=t.rootMargin,o=t.root,l=t.triggerOnce,c=t.skip,h=t.initialInView,u=t.fallbackInView,p=n.useRef(),f=n.useState({inView:!!h}),m=f[0],g=f[1],v=n.useCallback(function(e){void 0!==p.current&&(p.current(),p.current=void 0),c||e&&(p.current=d(e,function(e,t){g({inView:e,entry:t}),t.isIntersecting&&l&&p.current&&(p.current(),p.current=void 0)},{root:o,rootMargin:s,threshold:i,trackVisibility:a,delay:r},u))},[Array.isArray(i)?i.toString():i,o,s,l,c,a,u,r]);(0,n.useEffect)(function(){p.current||!m.entry||l||c||g({inView:!!h})});var y=[v,m.inView,m.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}m.displayName="InView",m.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},4853:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(8587),r=i(8168);const a=["values","unit","step"],s=e=>{const t=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return t.sort((e,t)=>e.val-t.val),t.reduce((e,t)=>(0,r.A)({},e,{[t.key]:t.val}),{})};function o(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:o=5}=e,l=(0,n.A)(e,a),c=s(t),h=Object.keys(c);function u(e){const n="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(n).concat(i,")")}function d(e){const n="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(n-o/100).concat(i,")")}function p(e,n){const r=h.indexOf(n);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof t[h[r]]?t[h[r]]:n)-o/100).concat(i,")")}return(0,r.A)({keys:h,values:c,up:u,down:d,between:p,only:function(e){return h.indexOf(e)+1<h.length?p(e,h[h.indexOf(e)+1]):u(e)},not:function(e){const t=h.indexOf(e);return 0===t?u(h[1]):t===h.length-1?d(h[t]):p(e,h[h.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},l)}},4893:e=>{e.exports=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i},e.exports.__esModule=!0,e.exports.default=e.exports},4983:(e,t)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,o=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case u:case a:case o:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case r:return t}}}function A(e){return w(e)===u}t.AsyncMode=h,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=o,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return A(e)||w(e)===h},t.isConcurrentMode=A,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===o},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===u||e===o||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=w},4989:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.A,private_createBreakpoints:()=>r.A,unstable_applyStyles:()=>a.A});var n=i(8280),r=i(4853),a=i(9703)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5043:(e,t,i)=>{"use strict";e.exports=i(4202)},5047:e=>{"use strict";var t={linear:function(e,t,i,n){return(i-t)*e/n+t},easeInQuad:function(e,t,i,n){return(i-t)*(e/=n)*e+t},easeOutQuad:function(e,t,i,n){return-(i-t)*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,i,n){var r=i-t;return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,n){return(i-t)*(e/=n)*e*e+t},easeOutCubic:function(e,t,i,n){return(i-t)*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,i,n){var r=i-t;return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,n){return(i-t)*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,i,n){return-(i-t)*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,i,n){var r=i-t;return(e/=n/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,n){return(i-t)*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,i,n){return(i-t)*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,n){var r=i-t;return(e/=n/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,n){var r=i-t;return-r*Math.cos(e/n*(Math.PI/2))+r+t},easeOutSine:function(e,t,i,n){return(i-t)*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,i,n){return-(i-t)/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,i,n){return 0==e?t:(i-t)*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,i,n){var r=i-t;return e==n?t+r:r*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,i,n){var r=i-t;return 0===e?t:e===n?t+r:(e/=n/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,i,n){return-(i-t)*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,i,n){return(i-t)*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,i,n){var r=i-t;return(e/=n/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,i,n){var r,a,s,o=i-t;return s=1.70158,0===e?t:1===(e/=n)?t+o:((a=0)||(a=.3*n),(r=o)<Math.abs(o)?(r=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e*n-s)*(2*Math.PI)/a)+t)},easeOutElastic:function(e,t,i,n){var r,a,s,o=i-t;return s=1.70158,0===e?t:1===(e/=n)?t+o:((a=0)||(a=.3*n),(r=o)<Math.abs(o)?(r=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/r),r*Math.pow(2,-10*e)*Math.sin((e*n-s)*(2*Math.PI)/a)+o+t)},easeInOutElastic:function(e,t,i,n){var r,a,s,o=i-t;return s=1.70158,0===e?t:2===(e/=n/2)?t+o:((a=0)||(a=n*(.3*1.5)),(r=o)<Math.abs(o)?(r=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*n-s)*(2*Math.PI)/a)*-.5+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*n-s)*(2*Math.PI)/a)*.5+o+t)},easeInBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),(i-t)*(e/=n)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),(i-t)*((e=e/n-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,i,n,r){var a=i-t;return void 0===r&&(r=1.70158),(e/=n/2)<1?a/2*(e*e*((1+(r*=1.525))*e-r))+t:a/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:function(e,i,n,r){var a=n-i;return a-t.easeOutBounce(r-e,0,a,r)+i},easeOutBounce:function(e,t,i,n){var r=i-t;return(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,i,n,r){var a=n-i;return e<r/2?.5*t.easeInBounce(2*e,0,a,r)+i:.5*t.easeOutBounce(2*e-r,0,a,r)+.5*a+i}};e.exports=t},5173:(e,t,i)=>{e.exports=i(1497)()},6299:(e,t,i)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}i.d(t,{xp:()=>g,yX:()=>y});const r=1e8,a=(Math.abs,Math.atan2,Math.cbrt,Math.cos,Math.exp,Math.floor,Math.max),s=Math.min,o=(Math.PI,Math.pow);Math.sin,Math.sqrt,o(6,3),o(29,3),o(29,3),o(3,3);function l(e,t){return function(e,t){const i=a(e,t),n=s(e,t);return(i*r+.05*r)/(n*r+.05*r)}(c(...e),c(...t))}function c(e,t,i){return(h(e)*p+h(t)*f+h(i)*m)/r}const h=e=>e<=3.928?e/d:u(e),u=e=>o((e+5.5)/105.5,2.4),d=1292,p=.2126*r,f=.7152*r,m=.0722*r;function g(e){const t=n(e.match(v)||[],9),i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],h=t[8];if(void 0!==o||void 0!==i)return[void 0!==o?parseInt(o,16):parseInt(i+i,16),void 0!==l?parseInt(l,16):parseInt(r+r,16),void 0!==c?parseInt(c,16):parseInt(a+a,16),void 0!==h?parseInt(h,16):void 0!==s?parseInt(s+s,16):255].map(e=>100*e/255)}const v=/^#?(?:([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?|([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?)$/i;function y(e,t){return l(g(e),g(t))}},6366:e=>{var t="undefined"!==typeof Element,i="function"===typeof Map,n="function"===typeof Set,r="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var o,l,c,h;if(Array.isArray(e)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(!a(e[l],s[l]))return!1;return!0}if(i&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(h=e.entries();!(l=h.next()).done;)if(!s.has(l.value[0]))return!1;for(h=e.entries();!(l=h.next()).done;)if(!a(l.value[1],s.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(h=e.entries();!(l=h.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!a(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return a(e,t)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}}},6803:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=i(7598).A},7067:(e,t,i)=>{"use strict";e.exports=i(4612)},7162:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>o,BO:()=>s,Yn:()=>a});var n=i(7598),r=i(9751);function a(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&i){const i="vars.".concat(t).split(".").reduce((e,t)=>e&&e[t]?e[t]:null,e);if(null!=i)return i}return t.split(".").reduce((e,t)=>e&&null!=e[t]?e[t]:null,e)}function s(e,t,i){let n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;return n="function"===typeof e?e(i):Array.isArray(e)?e[i]||r:a(e,i)||r,t&&(n=t(n,r,e)),n}const o=function(e){const{prop:t,cssProperty:i=e.prop,themeKey:o,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],h=a(e.theme,o)||{};return(0,r.NI)(e,c,e=>{let r=s(h,l,e);return e===r&&"string"===typeof e&&(r=s(h,l,"".concat(t).concat("default"===e?"":(0,n.A)(e)),e)),!1===i?r:{[i]:r}})};return c.propTypes={},c.filterProps=[t],c}},7266:(e,t,i)=>{"use strict";var n=i(4994);t.e$=f,t.eM=function(e,t){const i=d(e),n=d(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)},t.a=m;var r=n(i(457)),a=n(i(9214));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,a.default)(e,t,i)}function o(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let i=e.match(t);return i&&1===i[0].length&&(i=i.map(e=>e+e)),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(o(e));const t=e.indexOf("("),i=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(i))throw new Error((0,r.default)(9,e));let n,a=e.substring(t+1,e.length-1);if("color"===i){if(a=a.split(" "),n=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n))throw new Error((0,r.default)(10,n))}else a=a.split(",");return a=a.map(e=>parseFloat(e)),{type:i,values:a,colorSpace:n}}const c=e=>{const t=l(e);return t.values.slice(0,3).map((e,i)=>-1!==t.type.indexOf("hsl")&&0!==i?"".concat(e,"%"):e).join(" ")};function h(e){const{type:t,colorSpace:i}=e;let{values:n}=e;return-1!==t.indexOf("rgb")?n=n.map((e,t)=>t<3?parseInt(e,10):e):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==t.indexOf("color")?"".concat(i," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function u(e){e=l(e);const{values:t}=e,i=t[0],n=t[1]/100,r=t[2]/100,a=n*Math.min(r,1-r),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return r-a*Math.max(Math.min(t-3,9-t,1),-1)};let o="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(o+="a",c.push(t[3])),h({type:o,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(u(e)).values:e.values;return t=t.map(t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,h(e)}function f(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return h(e)}function m(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(-1!==e.type.indexOf("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return h(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return d(e)>.5?f(e,t):m(e,t)}},7324:e=>{e.exports=function(e,t,i,n){var r=i?i.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var c=a[l];if(!o(c))return!1;var h=e[c],u=t[c];if(!1===(r=i?i.call(n,h,u,c):void 0)||void 0===r&&h!==u)return!1}return!0}},7598:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(7868);function r(e){if("string"!==typeof e)throw new Error((0,n.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7758:(e,t,i)=>{"use strict";i.d(t,{A:()=>R});var n=i(8604),r=i(7162),a=i(3815);const s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce((e,t)=>(t.filterProps.forEach(i=>{e[i]=t}),e),{}),r=e=>Object.keys(e).reduce((t,i)=>n[i]?(0,a.A)(t,n[i](e)):t,{});return r.propTypes={},r.filterProps=t.reduce((e,t)=>e.concat(t.filterProps),[]),r};var o=i(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,r.Ay)({prop:e,themeKey:"borders",transform:t})}const h=c("border",l),u=c("borderTop",l),d=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),b=c("borderLeftColor"),x=c("outline",l),w=c("outlineColor"),A=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,n.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),i=e=>({borderRadius:(0,n._W)(t,e)});return(0,o.NI)(e,e.borderRadius,i)}return null};A.propTypes={},A.filterProps=["borderRadius"];s(h,u,d,p,f,m,g,v,y,b,A,x,w);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,n.MA)(e.theme,"spacing",8,"gap"),i=e=>({gap:(0,n._W)(t,e)});return(0,o.NI)(e,e.gap,i)}return null};S.propTypes={},S.filterProps=["gap"];const _=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,n.MA)(e.theme,"spacing",8,"columnGap"),i=e=>({columnGap:(0,n._W)(t,e)});return(0,o.NI)(e,e.columnGap,i)}return null};_.propTypes={},_.filterProps=["columnGap"];const E=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,n.MA)(e.theme,"spacing",8,"rowGap"),i=e=>({rowGap:(0,n._W)(t,e)});return(0,o.NI)(e,e.rowGap,i)}return null};E.propTypes={},E.filterProps=["rowGap"];s(S,_,E,(0,r.Ay)({prop:"gridColumn"}),(0,r.Ay)({prop:"gridRow"}),(0,r.Ay)({prop:"gridAutoFlow"}),(0,r.Ay)({prop:"gridAutoColumns"}),(0,r.Ay)({prop:"gridAutoRows"}),(0,r.Ay)({prop:"gridTemplateColumns"}),(0,r.Ay)({prop:"gridTemplateRows"}),(0,r.Ay)({prop:"gridTemplateAreas"}),(0,r.Ay)({prop:"gridArea"}));function C(e,t){return"grey"===t?t:e}s((0,r.Ay)({prop:"color",themeKey:"palette",transform:C}),(0,r.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:C}),(0,r.Ay)({prop:"backgroundColor",themeKey:"palette",transform:C}));function M(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const T=(0,r.Ay)({prop:"width",transform:M}),P=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var i,n;const r=(null==(i=e.theme)||null==(i=i.breakpoints)||null==(i=i.values)?void 0:i[t])||o.zu[t];return r?"px"!==(null==(n=e.theme)||null==(n=n.breakpoints)?void 0:n.unit)?{maxWidth:"".concat(r).concat(e.theme.breakpoints.unit)}:{maxWidth:r}:{maxWidth:M(t)}};return(0,o.NI)(e,e.maxWidth,t)}return null};P.filterProps=["maxWidth"];const D=(0,r.Ay)({prop:"minWidth",transform:M}),O=(0,r.Ay)({prop:"height",transform:M}),k=(0,r.Ay)({prop:"maxHeight",transform:M}),I=(0,r.Ay)({prop:"minHeight",transform:M}),R=((0,r.Ay)({prop:"size",cssProperty:"width",transform:M}),(0,r.Ay)({prop:"size",cssProperty:"height",transform:M}),s(T,P,D,O,k,I,(0,r.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:A},color:{themeKey:"palette",transform:C},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:C},backgroundColor:{themeKey:"palette",transform:C},p:{style:n.Ms},pt:{style:n.Ms},pr:{style:n.Ms},pb:{style:n.Ms},pl:{style:n.Ms},px:{style:n.Ms},py:{style:n.Ms},padding:{style:n.Ms},paddingTop:{style:n.Ms},paddingRight:{style:n.Ms},paddingBottom:{style:n.Ms},paddingLeft:{style:n.Ms},paddingX:{style:n.Ms},paddingY:{style:n.Ms},paddingInline:{style:n.Ms},paddingInlineStart:{style:n.Ms},paddingInlineEnd:{style:n.Ms},paddingBlock:{style:n.Ms},paddingBlockStart:{style:n.Ms},paddingBlockEnd:{style:n.Ms},m:{style:n.Lc},mt:{style:n.Lc},mr:{style:n.Lc},mb:{style:n.Lc},ml:{style:n.Lc},mx:{style:n.Lc},my:{style:n.Lc},margin:{style:n.Lc},marginTop:{style:n.Lc},marginRight:{style:n.Lc},marginBottom:{style:n.Lc},marginLeft:{style:n.Lc},marginX:{style:n.Lc},marginY:{style:n.Lc},marginInline:{style:n.Lc},marginInlineStart:{style:n.Lc},marginInlineEnd:{style:n.Lc},marginBlock:{style:n.Lc},marginBlockStart:{style:n.Lc},marginBlockEnd:{style:n.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:E},columnGap:{style:_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:M},maxWidth:{style:P},minWidth:{transform:M},height:{transform:M},maxHeight:{transform:M},minHeight:{transform:M},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},7868:(e,t,i)=>{"use strict";function n(e){let t="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}i.d(t,{A:()=>n})},7918:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.A});var n=i(7598)},7950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(2730)},8052:(e,t,i)=>{"use strict";var n=i(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:i=g,rootShouldForwardProp:n=f,slotShouldForwardProp:l=f}=e,h=e=>(0,c.default)((0,r.default)({},e,{theme:y((0,r.default)({},e,{defaultTheme:i,themeId:t}))}));return h.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,e=>e.filter(e=>!(null!=e&&e.__mui_systemSx)));const{name:u,slot:p,skipVariantsResolver:m,skipSx:g,overridesResolver:w=b(v(p))}=c,A=(0,a.default)(c,d),S=u&&u.startsWith("Mui")||p?"components":"custom",_=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,E=g||!1;let C=f;"Root"===p||"root"===p?C=n:p?C=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const M=(0,s.default)(e,(0,r.default)({shouldForwardProp:C,label:undefined},A)),T=e=>"function"===typeof e&&e.__emotion_real!==e||(0,o.isPlainObject)(e)?n=>{const a=y({theme:n.theme,defaultTheme:i,themeId:t});return x(e,(0,r.default)({},n,{theme:a}),a.modularCssLayers?S:void 0)}:e,P=function(n){let a=T(n);for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];const c=o?o.map(T):[];u&&w&&c.push(e=>{const n=y((0,r.default)({},e,{defaultTheme:i,themeId:t}));if(!n.components||!n.components[u]||!n.components[u].styleOverrides)return null;const a=n.components[u].styleOverrides,s={};return Object.entries(a).forEach(t=>{let[i,a]=t;s[i]=x(a,(0,r.default)({},e,{theme:n}),n.modularCssLayers?"theme":void 0)}),w(e,s)}),u&&!_&&c.push(e=>{var n;const a=y((0,r.default)({},e,{defaultTheme:i,themeId:t}));return x({variants:null==a||null==(n=a.components)||null==(n=n[u])?void 0:n.variants},(0,r.default)({},e,{theme:a}),a.modularCssLayers?"theme":void 0)}),E||c.push(h);const d=c.length-o.length;if(Array.isArray(n)&&d>0){const e=new Array(d).fill("");a=[...n,...e],a.raw=[...n.raw,...e]}const p=M(a,...c);return e.muiName&&(p.muiName=e.muiName),p};return M.withConfig&&(P.withConfig=M.withConfig),P}};var r=n(i(4634)),a=n(i(4893)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,i&&i.set(e,n),n}(i(1602)),o=i(9482),l=(n(i(7918)),n(i(3382)),n(i(4989))),c=n(i(9265));const h=["ownerState"],u=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function m(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles="@layer ".concat(t,"{").concat(String(e.styles),"}")),e}const g=(0,l.default)(),v=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:i,themeId:n}=e;return r=i,0===Object.keys(r).length?t:i[n]||i;var r}function b(e){return e?(t,i)=>i[e]:null}function x(e,t,i){let{ownerState:n}=t,o=(0,a.default)(t,h);const l="function"===typeof e?e((0,r.default)({ownerState:n},o)):e;if(Array.isArray(l))return l.flatMap(e=>x(e,(0,r.default)({ownerState:n},o),i));if(l&&"object"===typeof l&&Array.isArray(l.variants)){const{variants:e=[]}=l;let t=(0,a.default)(l,u);return e.forEach(e=>{let a=!0;if("function"===typeof e.props?a=e.props((0,r.default)({ownerState:n},o,n)):Object.keys(e.props).forEach(t=>{(null==n?void 0:n[t])!==e.props[t]&&o[t]!==e.props[t]&&(a=!1)}),a){Array.isArray(t)||(t=[t]);const a="function"===typeof e.style?e.style((0,r.default)({ownerState:n},o,n)):e.style;t.push(i?m((0,s.internal_serializeStyles)(a),i):a)}}),t}return i?m((0,s.internal_serializeStyles)(l),i):l}},8139:(e,t)=>{var i;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=s(e,a(i)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)n.call(e,i)&&e[i]&&(t=s(t,i));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},8161:(e,t,i)=>{"use strict";var n,r=i(5043),a=(n=r)&&"object"===typeof n&&"default"in n?n.default:n;function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,i){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof i&&"function"!==typeof i)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!==typeof n)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function h(){l=e(c.map(function(e){return e.props})),u.canUseDOM?t(l):i&&(l=i(l))}var u=function(e){var t,i;function r(){return e.apply(this,arguments)||this}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r.peek=function(){return l},r.rewind=function(){if(r.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var s=r.prototype;return s.UNSAFE_componentWillMount=function(){c.push(this),h()},s.componentDidUpdate=function(){h()},s.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),h()},s.render=function(){return a.createElement(n,this.props)},r}(r.PureComponent);return s(u,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),s(u,"canUseDOM",o),u}}},8168:(e,t,i)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(null,arguments)}i.d(t,{A:()=>n})},8280:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=i(8168),r=i(8587),a=i(9172),s=i(4853);const o={borderRadius:4};var l=i(8604);var c=i(8812),h=i(7758),u=i(9703);const d=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:i={},spacing:p,shape:f={}}=e,m=(0,r.A)(e,d),g=(0,s.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(0===i.length?[1]:i).map(e=>{const i=t(e);return"number"===typeof i?"".concat(i,"px"):i}).join(" ")};return i.mui=!0,i}(p);let y=(0,a.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,n.A)({mode:"light"},i),spacing:v,shape:(0,n.A)({},o,f)},m);y.applyStyles=u.A;for(var b=arguments.length,x=new Array(b>1?b-1:0),w=1;w<b;w++)x[w-1]=arguments[w];return y=x.reduce((e,t)=>(0,a.A)(e,t),y),y.unstable_sxConfig=(0,n.A)({},h.A,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},y}},8455:(e,t,i)=>{"use strict";t.A=void 0;var n=s(i(5043)),r=s(i(5173)),a=s(i(8139));function s(e){return e&&e.__esModule?e:{default:e}}const o=e=>{let{animate:t=!0,className:i="",layout:r="2-columns",lineColor:s="#FFF",children:o}=e;return"object"===typeof window&&document.documentElement.style.setProperty("--line-color",s),n.default.createElement("div",{className:(0,a.default)(i,"vertical-timeline",{"vertical-timeline--animate":t,"vertical-timeline--two-columns":"2-columns"===r,"vertical-timeline--one-column-left":"1-column"===r||"1-column-left"===r,"vertical-timeline--one-column-right":"1-column-right"===r})},o)};o.propTypes={children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]).isRequired,className:r.default.string,animate:r.default.bool,layout:r.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:r.default.string};var l=o;t.A=l},8587:(e,t,i)=>{"use strict";function n(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}i.d(t,{A:()=>n})},8604:(e,t,i)=>{"use strict";i.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>y,Ms:()=>b});var n=i(9751),r=i(7162),a=i(3815);const s={m:"margin",p:"padding"},o={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return i=>(void 0===t[i]&&(t[i]=e(i)),t[i])}(e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,i]=e.split(""),n=s[t],r=o[i]||"";return Array.isArray(r)?r.map(e=>n+e):[n+r]}),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...h,...u];function p(e,t,i,n){var a;const s=null!=(a=(0,r.Yn)(e,t,!1))?a:i;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const i=e(Math.abs(t));return t>=0?i:"number"===typeof i?-i:"-".concat(i)}function g(e,t,i,r){if(-1===t.indexOf(i))return null;const a=function(e,t){return i=>e.reduce((e,n)=>(e[n]=m(t,i),e),{})}(c(i),r),s=e[i];return(0,n.NI)(e,s,a)}function v(e,t){const i=f(e.theme);return Object.keys(e).map(n=>g(e,t,n,i)).reduce(a.A,{})}function y(e){return v(e,h)}function b(e){return v(e,u)}function x(e){return v(e,d)}y.propTypes={},y.filterProps=h,b.propTypes={},b.filterProps=u,x.propTypes={},x.filterProps=d},8613:function(e,t){var i;!function(t,i){"use strict";"object"===typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!==typeof window?window:this,function(n,r){"use strict";var a=[],s=Object.getPrototypeOf,o=a.slice,l=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},c=a.push,h=a.indexOf,u={},d=u.toString,p=u.hasOwnProperty,f=p.toString,m=f.call(Object),g={},v=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,i){var n,r,a=(i=i||b).createElement("script");if(a.text=e,t)for(n in x)(r=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,r);i.head.appendChild(a).parentNode.removeChild(a)}function A(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?u[d.call(e)]||"object":typeof e}var S="3.7.1",_=/HTML$/i,E=function(e,t){return new E.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,i=A(e);return!v(e)&&!y(e)&&("array"===i||0===t||"number"===typeof t&&t>0&&t-1 in e)}function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:S,constructor:E,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,i,n,r,a,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"===typeof s&&(c=s,s=arguments[o]||{},o++),"object"===typeof s||v(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=e[t],"__proto__"!==t&&s!==n&&(c&&n&&(E.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[t],a=r&&!Array.isArray(i)?[]:r||E.isPlainObject(i)?i:{},r=!1,s[t]=E.extend(c,a,n)):void 0!==n&&(s[t]=n));return s},E.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"===typeof(i=p.call(t,"constructor")&&t.constructor)&&f.call(i)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){w(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(C(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},text:function(e){var t,i="",n=0,r=e.nodeType;if(!r)for(;t=e[n++];)i+=E.text(t);return 1===r||11===r?e.textContent:9===r?e.documentElement.textContent:3===r||4===r?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(C(Object(e))?E.merge(i,"string"===typeof e?[e]:e):c.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:h.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!_.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,s=!i;r<a;r++)!t(e[r],r)!==s&&n.push(e[r]);return n},map:function(e,t,i){var n,r,a=0,s=[];if(C(e))for(n=e.length;a<n;a++)null!=(r=t(e[a],a,i))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&s.push(r);return l(s)},guid:1,support:g}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var T=a.pop,P=a.sort,D=a.splice,O="[\\x20\\t\\r\\n\\f]",k=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");E.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(I,R)};var L=b,z=c;!function(){var e,t,i,r,s,l,c,u,d,f,m=z,v=E.expando,y=0,b=0,x=ee(),w=ee(),A=ee(),S=ee(),_=function(e,t){return e===t&&(s=!0),0},C="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+O+"*("+I+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+O+"*\\]",B=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(O+"+","g"),F=new RegExp("^"+O+"*,"+O+"*"),N=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),U=new RegExp(O+"|>"),V=new RegExp(B),W=new RegExp("^"+I+"$"),H={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+C+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Q=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),K=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},Z=function(){le()},J=de(function(e){return!0===e.disabled&&M(e,"fieldset")},{dir:"parentNode",next:"legend"});try{m.apply(a=o.call(L.childNodes),L.childNodes),a[L.childNodes.length].nodeType}catch(be){m={apply:function(e,t){z.apply(e,o.call(t))},call:function(e){z.apply(e,o.call(arguments,1))}}}function $(e,t,i,n){var r,a,s,o,c,h,p,f=t&&t.ownerDocument,y=t?t.nodeType:9;if(i=i||[],"string"!==typeof e||!e||1!==y&&9!==y&&11!==y)return i;if(!n&&(le(t),t=t||l,u)){if(11!==y&&(c=Y.exec(e)))if(r=c[1]){if(9===y){if(!(s=t.getElementById(r)))return i;if(s.id===r)return m.call(i,s),i}else if(f&&(s=f.getElementById(r))&&$.contains(t,s)&&s.id===r)return m.call(i,s),i}else{if(c[2])return m.apply(i,t.getElementsByTagName(e)),i;if((r=c[3])&&t.getElementsByClassName)return m.apply(i,t.getElementsByClassName(r)),i}if(!S[e+" "]&&(!d||!d.test(e))){if(p=e,f=t,1===y&&(U.test(e)||N.test(e))){for((f=X.test(e)&&oe(t.parentNode)||t)==t&&g.scope||((o=t.getAttribute("id"))?o=E.escapeSelector(o):t.setAttribute("id",o=v)),a=(h=he(e)).length;a--;)h[a]=(o?"#"+o:":scope")+" "+ue(h[a]);p=h.join(",")}try{return m.apply(i,f.querySelectorAll(p)),i}catch(b){S(e,!0)}finally{o===v&&t.removeAttribute("id")}}}return ye(e.replace(k,"$1"),t,i,n)}function ee(){var e=[];return function i(n,r){return e.push(n+" ")>t.cacheLength&&delete i[e.shift()],i[n+" "]=r}}function te(e){return e[v]=!0,e}function ie(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(be){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ne(e){return function(t){return M(t,"input")&&t.type===e}}function re(e){return function(t){return(M(t,"input")||M(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te(function(t){return t=+t,te(function(i,n){for(var r,a=e([],i.length,t),s=a.length;s--;)i[r=a[s]]&&(i[r]=!(n[r]=i[r]))})})}function oe(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function le(e){var i,n=e?e.ownerDocument||e:L;return n!=l&&9===n.nodeType&&n.documentElement?(c=(l=n).documentElement,u=!E.isXMLDoc(l),f=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&L!=l&&(i=l.defaultView)&&i.top!==i&&i.addEventListener("unload",Z),g.getById=ie(function(e){return c.appendChild(e).id=E.expando,!l.getElementsByName||!l.getElementsByName(E.expando).length}),g.disconnectedMatch=ie(function(e){return f.call(e,"*")}),g.scope=ie(function(){return l.querySelectorAll(":scope")}),g.cssHas=ie(function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(be){return!0}}),g.getById?(t.filter.ID=function(e){var t=e.replace(Q,K);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&u){var i=t.getElementById(e);return i?[i]:[]}}):(t.filter.ID=function(e){var t=e.replace(Q,K);return function(e){var i="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&u){var i,n,r,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(r=t.getElementsByName(e),n=0;a=r[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&u)return t.getElementsByClassName(e)},d=[],ie(function(e){var t;c.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+O+"*(?:value|"+C+")"),e.querySelectorAll("[id~="+v+"-]").length||d.push("~="),e.querySelectorAll("a#"+v+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")}),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),_=function(e,t){if(e===t)return s=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===i?e===l||e.ownerDocument==L&&$.contains(L,e)?-1:t===l||t.ownerDocument==L&&$.contains(L,t)?1:r?h.call(r,e)-h.call(r,t):0:4&i?-1:1)},l):l}for(e in $.matches=function(e,t){return $(e,null,null,t)},$.matchesSelector=function(e,t){if(le(e),u&&!S[t+" "]&&(!d||!d.test(t)))try{var i=f.call(e,t);if(i||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(be){S(t,!0)}return $(t,l,null,[e]).length>0},$.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),E.contains(e,t)},$.attr=function(e,i){(e.ownerDocument||e)!=l&&le(e);var n=t.attrHandle[i.toLowerCase()],r=n&&p.call(t.attrHandle,i.toLowerCase())?n(e,i,!u):void 0;return void 0!==r?r:e.getAttribute(i)},$.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,i=[],n=0,a=0;if(s=!g.sortStable,r=!g.sortStable&&o.call(e,0),P.call(e,_),s){for(;t=e[a++];)t===e[a]&&(n=i.push(a));for(;n--;)D.call(e,i[n],1)}return r=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(o.apply(this)))},t=E.expr={cacheLength:50,createPseudo:te,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,K),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,K),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||$.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&$.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return H.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=he(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,K).toLowerCase();return"*"===e?function(){return!0}:function(e){return M(e,t)}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&x(e,function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=$.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r.replace(j," ")+" ").indexOf(i)>-1:"|="===t&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,h,u,d,p,f=a!==s?"nextSibling":"previousSibling",m=t.parentNode,g=o&&t.nodeName.toLowerCase(),b=!l&&!o,x=!1;if(m){if(a){for(;f;){for(u=t;u=u[f];)if(o?M(u,g):1===u.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&b){for(x=(d=(c=(h=m[v]||(m[v]={}))[e]||[])[0]===y&&c[1])&&c[2],u=d&&m.childNodes[d];u=++d&&u&&u[f]||(x=d=0)||p.pop();)if(1===u.nodeType&&++x&&u===t){h[e]=[y,d,x];break}}else if(b&&(x=d=(c=(h=t[v]||(t[v]={}))[e]||[])[0]===y&&c[1]),!1===x)for(;(u=++d&&u&&u[f]||(x=d=0)||p.pop())&&(!(o?M(u,g):1===u.nodeType)||!++x||(b&&((h=u[v]||(u[v]={}))[e]=[y,x]),u!==t)););return(x-=r)===n||x%n===0&&x/n>=0}}},PSEUDO:function(e,i){var n,r=t.pseudos[e]||t.setFilters[e.toLowerCase()]||$.error("unsupported pseudo: "+e);return r[v]?r(i):r.length>1?(n=[e,e,"",i],t.setFilters.hasOwnProperty(e.toLowerCase())?te(function(e,t){for(var n,a=r(e,i),s=a.length;s--;)e[n=h.call(e,a[s])]=!(t[n]=a[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:te(function(e){var t=[],i=[],n=ve(e.replace(k,"$1"));return n[v]?te(function(e,t,i,r){for(var a,s=n(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,r,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}}),has:te(function(e){return function(t){return $(e,t).length>0}}),contains:te(function(e){return e=e.replace(Q,K),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}}),lang:te(function(e){return W.test(e||"")||$.error("unsupported lang: "+e),e=e.replace(Q,K).toLowerCase(),function(t){var i;do{if(i=u?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return M(e,"input")&&!!e.checked||M(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){return M(e,"input")&&"button"===e.type||M(e,"button")},text:function(e){var t;return M(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se(function(){return[0]}),last:se(function(e,t){return[t-1]}),eq:se(function(e,t,i){return[i<0?i+t:i]}),even:se(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:se(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:se(function(e,t,i){var n;for(n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e}),gt:se(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ne(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=re(e);function ce(){}function he(e,i){var n,r,a,s,o,l,c,h=w[e+" "];if(h)return i?0:h.slice(0);for(o=e,l=[],c=t.preFilter;o;){for(s in n&&!(r=F.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=N.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(k," ")}),o=o.slice(n.length)),t.filter)!(r=H[s].exec(o))||c[s]&&!(r=c[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return i?o.length:o?$.error(e):w(e,l).slice(0)}function ue(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function de(e,t,i){var n=t.dir,r=t.next,a=r||n,s=i&&"parentNode"===a,o=b++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r);return!1}:function(t,i,l){var c,h,u=[y,o];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(h=t[v]||(t[v]={}),r&&M(t,r))t=t[n]||t;else{if((c=h[a])&&c[0]===y&&c[1]===o)return u[2]=c[2];if(h[a]=u,u[2]=e(t,i,l))return!0}return!1}}function pe(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function fe(e,t,i,n,r){for(var a,s=[],o=0,l=e.length,c=null!=t;o<l;o++)(a=e[o])&&(i&&!i(a,n,r)||(s.push(a),c&&t.push(o)));return s}function me(e,t,i,n,r,a){return n&&!n[v]&&(n=me(n)),r&&!r[v]&&(r=me(r,a)),te(function(a,s,o,l){var c,u,d,p,f=[],g=[],v=s.length,y=a||function(e,t,i){for(var n=0,r=t.length;n<r;n++)$(e,t[n],i);return i}(t||"*",o.nodeType?[o]:o,[]),b=!e||!a&&t?y:fe(y,f,e,o,l);if(i?i(b,p=r||(a?e:v||n)?[]:s,o,l):p=b,n)for(c=fe(p,g),n(c,[],o,l),u=c.length;u--;)(d=c[u])&&(p[g[u]]=!(b[g[u]]=d));if(a){if(r||e){if(r){for(c=[],u=p.length;u--;)(d=p[u])&&c.push(b[u]=d);r(null,p=[],c,l)}for(u=p.length;u--;)(d=p[u])&&(c=r?h.call(a,d):f[u])>-1&&(a[c]=!(s[c]=d))}}else p=fe(p===s?p.splice(v,p.length):p),r?r(null,s,p,l):m.apply(s,p)})}function ge(e){for(var n,r,a,s=e.length,o=t.relative[e[0].type],l=o||t.relative[" "],c=o?1:0,u=de(function(e){return e===n},l,!0),d=de(function(e){return h.call(n,e)>-1},l,!0),p=[function(e,t,r){var a=!o&&(r||t!=i)||((n=t).nodeType?u(e,t,r):d(e,t,r));return n=null,a}];c<s;c++)if(r=t.relative[e[c].type])p=[de(pe(p),r)];else{if((r=t.filter[e[c].type].apply(null,e[c].matches))[v]){for(a=++c;a<s&&!t.relative[e[a].type];a++);return me(c>1&&pe(p),c>1&&ue(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(k,"$1"),r,c<a&&ge(e.slice(c,a)),a<s&&ge(e=e.slice(a)),a<s&&ue(e))}p.push(r)}return pe(p)}function ve(e,n){var r,a=[],s=[],o=A[e+" "];if(!o){for(n||(n=he(e)),r=n.length;r--;)(o=ge(n[r]))[v]?a.push(o):s.push(o);o=A(e,function(e,n){var r=n.length>0,a=e.length>0,s=function(s,o,c,h,d){var p,f,g,v=0,b="0",x=s&&[],w=[],A=i,S=s||a&&t.find.TAG("*",d),_=y+=null==A?1:Math.random()||.1,C=S.length;for(d&&(i=o==l||o||d);b!==C&&null!=(p=S[b]);b++){if(a&&p){for(f=0,o||p.ownerDocument==l||(le(p),c=!u);g=e[f++];)if(g(p,o||l,c)){m.call(h,p);break}d&&(y=_)}r&&((p=!g&&p)&&v--,s&&x.push(p))}if(v+=b,r&&b!==v){for(f=0;g=n[f++];)g(x,w,o,c);if(s){if(v>0)for(;b--;)x[b]||w[b]||(w[b]=T.call(h));w=fe(w)}m.apply(h,w),d&&!s&&w.length>0&&v+n.length>1&&E.uniqueSort(h)}return d&&(y=_,i=A),x};return r?te(s):s}(s,a)),o.selector=e}return o}function ye(e,i,n,r){var a,s,o,l,c,h="function"===typeof e&&e,d=!r&&he(e=h.selector||e);if(n=n||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===i.nodeType&&u&&t.relative[s[1].type]){if(!(i=(t.find.ID(o.matches[0].replace(Q,K),i)||[])[0]))return n;h&&(i=i.parentNode),e=e.slice(s.shift().value.length)}for(a=H.needsContext.test(e)?0:s.length;a--&&(o=s[a],!t.relative[l=o.type]);)if((c=t.find[l])&&(r=c(o.matches[0].replace(Q,K),X.test(s[0].type)&&oe(i.parentNode)||i))){if(s.splice(a,1),!(e=r.length&&ue(s)))return m.apply(n,r),n;break}}return(h||ve(e,d))(r,i,!u,n,!i||X.test(e)&&oe(i.parentNode)||i),n}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,g.sortStable=v.split("").sort(_).join("")===v,le(),g.sortDetached=ie(function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))}),E.find=$,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,$.compile=ve,$.select=ye,$.setDocument=le,$.tokenize=he,$.escape=E.escapeSelector,$.getText=E.text,$.isXML=E.isXMLDoc,$.selectors=E.expr,$.support=E.support,$.uniqueSort=E.uniqueSort}();var B=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(i))break;n.push(e)}return n},j=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},F=E.expr.match.needsContext,N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,i){return v(t)?E.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?E.grep(e,function(e){return e===t!==i}):"string"!==typeof t?E.grep(e,function(e){return h.call(t,e)>-1!==i}):E.filter(t,e,i)}E.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?E.find.matchesSelector(n,e)?[n]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!==typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<n;t++)if(E.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)E.find(e,r[t],i);return n>1?E.uniqueSort(i):i},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"===typeof e&&F.test(e)?E(e):e||[],!1).length}});var V,W=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||V,"string"===typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:W.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),N.test(n[1])&&E.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=b.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==i.ready?i.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,V=E(b);var H=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0};function q(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,a=[],s="string"!==typeof e&&E(e);if(!F.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&E.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"===typeof e?h.call(E(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,i){return B(e,"parentNode",i)},next:function(e){return q(e,"nextSibling")},prev:function(e){return q(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,i){return B(e,"nextSibling",i)},prevUntil:function(e,t,i){return B(e,"previousSibling",i)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(M(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(e,t){E.fn[e]=function(i,n){var r=E.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"===typeof n&&(r=E.filter(n,r)),this.length>1&&(G[e]||E.uniqueSort(r),H.test(e)&&r.reverse()),this.pushStack(r)}});var Y=/[^\x20\t\r\n\f]+/g;function X(e){return e}function Q(e){throw e}function K(e,t,i,n){var r;try{e&&v(r=e.promise)?r.call(e).done(t).fail(i):e&&v(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return E.each(e.match(Y)||[],function(e,i){t[i]=!0}),t}(e):E.extend({},e);var t,i,n,r,a=[],s=[],o=-1,l=function(){for(r=r||e.once,n=t=!0;s.length;o=-1)for(i=s.shift();++o<a.length;)!1===a[o].apply(i[0],i[1])&&e.stopOnFalse&&(o=a.length,i=!1);e.memory||(i=!1),t=!1,r&&(a=i?[]:"")},c={add:function(){return a&&(i&&!t&&(o=a.length-1,s.push(i)),function t(i){E.each(i,function(i,n){v(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==A(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return E.each(arguments,function(e,t){for(var i;(i=E.inArray(t,a,i))>-1;)a.splice(i,1),i<=o&&o--}),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=i="",this},disabled:function(){return!a},lock:function(){return r=s=[],i||t||(a=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return E.Deferred(function(i){E.each(t,function(t,n){var r=v(e[n[4]])&&e[n[4]];a[n[1]](function(){var e=r&&r.apply(this,arguments);e&&v(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,i,r){var a=0;function s(e,t,i,r){return function(){var o=this,l=arguments,c=function(){var n,c;if(!(e<a)){if((n=i.apply(o,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"===typeof n||"function"===typeof n)&&n.then,v(c)?r?c.call(n,s(a,t,X,r),s(a,t,Q,r)):(a++,c.call(n,s(a,t,X,r),s(a,t,Q,r),s(a,t,X,t.notifyWith))):(i!==X&&(o=void 0,l=[n]),(r||t.resolveWith)(o,l))}},h=r?c:function(){try{c()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,h.error),e+1>=a&&(i!==Q&&(o=void 0,l=[n]),t.rejectWith(o,l))}};e?h():(E.Deferred.getErrorHook?h.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(h.error=E.Deferred.getStackHook()),n.setTimeout(h))}}return E.Deferred(function(n){t[0][3].add(s(0,n,v(r)?r:X,n.notifyWith)),t[1][3].add(s(0,n,v(e)?e:X)),t[2][3].add(s(0,n,v(i)?i:Q))}).promise()},promise:function(e){return null!=e?E.extend(e,r):r}},a={};return E.each(t,function(e,n){var s=n[2],o=n[5];r[n[1]]=s.add,o&&s.add(function(){i=o},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=s.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,i=t,n=Array(i),r=o.call(arguments),a=E.Deferred(),s=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?o.call(arguments):i,--t||a.resolveWith(n,r)}};if(t<=1&&(K(e,a.done(s(i)).resolve,a.reject,!t),"pending"===a.state()||v(r[i]&&r[i].then)))return a.then();for(;i--;)K(r[i],s(i),a.reject);return a.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Z.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){n.setTimeout(function(){throw e})};var J=E.Deferred();function $(){b.removeEventListener("DOMContentLoaded",$),n.removeEventListener("load",$),E.ready()}E.fn.ready=function(e){return J.then(e).catch(function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||J.resolveWith(b,[E]))}}),E.ready.then=J.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",$),n.addEventListener("load",$));var ee=function(e,t,i,n,r,a,s){var o=0,l=e.length,c=null==i;if("object"===A(i))for(o in r=!0,i)ee(e,t,o,i[o],!0,a,s);else if(void 0!==n&&(r=!0,v(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(E(e),i)})),t))for(;o<l;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return r?e:c?t.call(e):l?t(e[0],i):a},te=/^-ms-/,ie=/-([a-z])/g;function ne(e,t){return t.toUpperCase()}function re(e){return e.replace(te,"ms-").replace(ie,ne)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=E.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"===typeof t)r[re(t)]=i;else for(n in t)r[re(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,i){return void 0===t||t&&"string"===typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(re):(t=re(t))in n?[t]:t.match(Y)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||E.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var oe=new se,le=new se,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,he=/[A-Z]/g;function ue(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(he,"-$&").toLowerCase(),"string"===typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ce.test(e)?JSON.parse(e):e)}(i)}catch(r){}le.set(e,t,i)}else i=void 0;return i}E.extend({hasData:function(e){return le.hasData(e)||oe.hasData(e)},data:function(e,t,i){return le.access(e,t,i)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,i){return oe.access(e,t,i)},_removeData:function(e,t){oe.remove(e,t)}}),E.fn.extend({data:function(e,t){var i,n,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=le.get(a),1===a.nodeType&&!oe.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=re(n.slice(5)),ue(a,n,r[n]));oe.set(a,"hasDataAttrs",!0)}return r}return"object"===typeof e?this.each(function(){le.set(this,e)}):ee(this,function(t){var i;if(a&&void 0===t)return void 0!==(i=le.get(a,e))||void 0!==(i=ue(a,e))?i:void 0;this.each(function(){le.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){le.remove(this,e)})}}),E.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=oe.get(e,t),i&&(!n||Array.isArray(i)?n=oe.access(e,t,E.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=E.queue(e,t),n=i.length,r=i.shift(),a=E._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){E.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return oe.get(e,i)||oe.access(e,i,{empty:E.Callbacks("once memory").add(function(){oe.remove(e,[t+"queue",i])})})}}),E.fn.extend({queue:function(e,t){var i=2;return"string"!==typeof e&&(t=e,e="fx",i--),arguments.length<i?E.queue(this[0],e):void 0===t?this:this.each(function(){var i=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=E.Deferred(),a=this,s=this.length,o=function(){--n||r.resolveWith(a,[a])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=oe.get(a[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],me=b.documentElement,ge=function(e){return E.contains(e.ownerDocument,e)},ve={composed:!0};me.getRootNode&&(ge=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===E.css(e,"display")};function be(e,t,i,n){var r,a,s=20,o=n?function(){return n.cur()}:function(){return E.css(e,t,"")},l=o(),c=i&&i[3]||(E.cssNumber[t]?"":"px"),h=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+l)&&pe.exec(E.css(e,t));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;s--;)E.style(e,t,h+c),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),h/=a;h*=2,E.style(e,t,h+c),i=i||[]}return i&&(h=+h||+l||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=r)),r}var xe={};function we(e){var t,i=e.ownerDocument,n=e.nodeName,r=xe[n];return r||(t=i.body.appendChild(i.createElement(n)),r=E.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),xe[n]=r,r)}function Ae(e,t){for(var i,n,r=[],a=0,s=e.length;a<s;a++)(n=e[a]).style&&(i=n.style.display,t?("none"===i&&(r[a]=oe.get(n,"display")||null,r[a]||(n.style.display="")),""===n.style.display&&ye(n)&&(r[a]=we(n))):"none"!==i&&(r[a]="none",oe.set(n,"display",i)));for(a=0;a<s;a++)null!=r[a]&&(e[a].style.display=r[a]);return e}E.fn.extend({show:function(){return Ae(this,!0)},hide:function(){return Ae(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each(function(){ye(this)?E(this).show():E(this).hide()})}});var Se=/^(?:checkbox|radio)$/i,_e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",g.option=!!e.lastChild}();var Ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Me(e,t){var i;return i="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?E.merge([e],i):i}function Te(e,t){for(var i=0,n=e.length;i<n;i++)oe.set(e[i],"globalEval",!t||oe.get(t[i],"globalEval"))}Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,g.option||(Ce.optgroup=Ce.option=[1,"<select multiple='multiple'>","</select>"]);var Pe=/<|&#?\w+;/;function De(e,t,i,n,r){for(var a,s,o,l,c,h,u=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if("object"===A(a))E.merge(d,a.nodeType?[a]:a);else if(Pe.test(a)){for(s=s||u.appendChild(t.createElement("div")),o=(_e.exec(a)||["",""])[1].toLowerCase(),l=Ce[o]||Ce._default,s.innerHTML=l[1]+E.htmlPrefilter(a)+l[2],h=l[0];h--;)s=s.lastChild;E.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(t.createTextNode(a));for(u.textContent="",p=0;a=d[p++];)if(n&&E.inArray(a,n)>-1)r&&r.push(a);else if(c=ge(a),s=Me(u.appendChild(a),"script"),c&&Te(s),i)for(h=0;a=s[h++];)Ee.test(a.type||"")&&i.push(a);return u}var Oe=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Ie(){return!1}function Re(e,t,i,n,r,a){var s,o;if("object"===typeof t){for(o in"string"!==typeof i&&(n=n||i,i=void 0),t)Re(e,o,i,n,t[o],a);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"===typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Ie;else if(!r)return e;return 1===a&&(s=r,r=function(e){return E().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=E.guid++)),e.each(function(){E.event.add(this,t,r,n,i)})}function Le(e,t,i){i?(oe.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var i,n=oe.get(this,t);if(1&e.isTrigger&&this[t]){if(n)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(n=o.call(arguments),oe.set(this,t,n),this[t](),i=oe.get(this,t),oe.set(this,t,!1),n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else n&&(oe.set(this,t,E.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=ke)}})):void 0===oe.get(e,t)&&E.event.add(e,t,ke)}E.event={global:{},add:function(e,t,i,n,r){var a,s,o,l,c,h,u,d,p,f,m,g=oe.get(e);if(ae(e))for(i.handler&&(i=(a=i).handler,r=a.selector),r&&E.find.matchesSelector(me,r),i.guid||(i.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return"undefined"!==typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Y)||[""]).length;c--;)p=m=(o=Oe.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p&&(u=E.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=E.event.special[p]||{},h=E.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:f.join(".")},a),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),E.event.global[p]=!0)},remove:function(e,t,i,n,r){var a,s,o,l,c,h,u,d,p,f,m,g=oe.hasData(e)&&oe.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(Y)||[""]).length;c--;)if(p=m=(o=Oe.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=E.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)h=d[a],!r&&m!==h.origType||i&&i.guid!==h.guid||o&&!o.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(a,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(e,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,f,g.handle)||E.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[c],i,n,!0);E.isEmptyObject(l)&&oe.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,a,s,o=new Array(arguments.length),l=E.event.fix(e),c=(oe.get(this,"events")||Object.create(null))[l.type]||[],h=E.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(s=E.event.handlers.call(this,l,c),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(n=((E.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,r,a,s,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],s={},i=0;i<l;i++)void 0===s[r=(n=t[i]).selector+" "]&&(s[r]=n.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),s[r]&&a.push(n);a.length&&o.push({elem:c,handlers:a})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Se.test(t.type)&&t.click&&M(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return Se.test(t.type)&&t.click&&M(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return Se.test(t.type)&&t.click&&M(t,"input")&&oe.get(t,"click")||M(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(e,t){function i(e){if(b.documentMode){var i=oe.get(this,"handle"),n=E.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,i(e),n.target===n.currentTarget&&i(n)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var n;if(Le(this,e,!0),!b.documentMode)return!1;(n=oe.get(this,t))||this.addEventListener(t,i),oe.set(this,t,(n||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=oe.get(this,t)-1)?oe.set(this,t,e):(this.removeEventListener(t,i),oe.remove(this,t))},_default:function(t){return oe.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,r=b.documentMode?this:n,a=oe.get(r,t);a||(b.documentMode?this.addEventListener(t,i):n.addEventListener(e,i,!0)),oe.set(r,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=b.documentMode?this:n,a=oe.get(r,t)-1;a?oe.set(r,t,a):(b.documentMode?this.removeEventListener(t,i):n.removeEventListener(e,i,!0),oe.remove(r,t))}}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),E.fn.extend({on:function(e,t,i,n){return Re(this,e,t,i,n)},one:function(e,t,i,n){return Re(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,E(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!==typeof t||(i=t,t=void 0),!1===i&&(i=Ie),this.each(function(){E.event.remove(this,e,i,t)})}});var ze=/<script|<style|<link/i,Be=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Fe(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ve(e,t){var i,n,r,a,s,o;if(1===t.nodeType){if(oe.hasData(e)&&(o=oe.get(e).events))for(r in oe.remove(t,"handle events"),o)for(i=0,n=o[r].length;i<n;i++)E.event.add(t,r,o[r][i]);le.hasData(e)&&(a=le.access(e),s=E.extend({},a),le.set(t,s))}}function We(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Se.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function He(e,t,i,n){t=l(t);var r,a,s,o,c,h,u=0,d=e.length,p=d-1,f=t[0],m=v(f);if(m||d>1&&"string"===typeof f&&!g.checkClone&&Be.test(f))return e.each(function(r){var a=e.eq(r);m&&(t[0]=f.call(this,r,a.html())),He(a,t,i,n)});if(d&&(a=(r=De(t,e[0].ownerDocument,!1,e,n)).firstChild,1===r.childNodes.length&&(r=a),a||n)){for(o=(s=E.map(Me(r,"script"),Ne)).length;u<d;u++)c=r,u!==p&&(c=E.clone(c,!0,!0),o&&E.merge(s,Me(c,"script"))),i.call(e[u],c,u);if(o)for(h=s[s.length-1].ownerDocument,E.map(s,Ue),u=0;u<o;u++)c=s[u],Ee.test(c.type||"")&&!oe.access(c,"globalEval")&&E.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):w(c.textContent.replace(je,""),c,h))}return e}function Ge(e,t,i){for(var n,r=t?E.filter(t,e):e,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||E.cleanData(Me(n)),n.parentNode&&(i&&ge(n)&&Te(Me(n,"script")),n.parentNode.removeChild(n));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,a,s,o=e.cloneNode(!0),l=ge(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(s=Me(o),n=0,r=(a=Me(e)).length;n<r;n++)We(a[n],s[n]);if(t)if(i)for(a=a||Me(e),s=s||Me(o),n=0,r=a.length;n<r;n++)Ve(a[n],s[n]);else Ve(e,o);return(s=Me(o,"script")).length>0&&Te(s,!l&&Me(e,"script")),o},cleanData:function(e){for(var t,i,n,r=E.event.special,a=0;void 0!==(i=e[a]);a++)if(ae(i)){if(t=i[oe.expando]){if(t.events)for(n in t.events)r[n]?E.event.remove(i,n):E.removeEvent(i,n,t.handle);i[oe.expando]=void 0}i[le.expando]&&(i[le.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return ee(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Fe(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Fe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return ee(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!ze.test(e)&&!Ce[(_e.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(E.cleanData(Me(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,function(t){var i=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(Me(this)),i&&i.replaceChild(t,this))},e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(e){for(var i,n=[],r=E(e),a=r.length-1,s=0;s<=a;s++)i=s===a?this:this.clone(!0),E(r[s])[t](i),c.apply(n,i.get());return this.pushStack(n)}});var qe=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ye=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Qe=function(e,t,i){var n,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in n=i.call(e),t)e.style[r]=a[r];return n},Ke=new RegExp(fe.join("|"),"i");function Ze(e,t,i){var n,r,a,s,o=Ye.test(t),l=e.style;return(i=i||Xe(e))&&(s=i.getPropertyValue(t)||i[t],o&&s&&(s=s.replace(k,"$1")||void 0),""!==s||ge(e)||(s=E.style(e,t)),!g.pixelBoxStyles()&&qe.test(s)&&Ke.test(t)&&(n=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=i.width,l.width=n,l.minWidth=r,l.maxWidth=a)),void 0!==s?s+"":s}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(c).appendChild(h);var e=n.getComputedStyle(h);i="1%"!==e.top,l=12===t(e.marginLeft),h.style.right="60%",s=36===t(e.right),r=36===t(e.width),h.style.position="absolute",a=12===t(h.offsetWidth/3),me.removeChild(c),h=null}}function t(e){return Math.round(parseFloat(e))}var i,r,a,s,o,l,c=b.createElement("div"),h=b.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===h.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,i,r;return null==o&&(e=b.createElement("table"),t=b.createElement("tr"),i=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",me.appendChild(e).appendChild(t).appendChild(i),r=n.getComputedStyle(t),o=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),o}}))}();var $e=["Webkit","Moz","ms"],et=b.createElement("div").style,tt={};function it(e){var t=E.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=$e.length;i--;)if((e=$e[i]+t)in et)return e}(e)||e)}var nt=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function st(e,t,i){var n=pe.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function ot(e,t,i,n,r,a){var s="width"===t?1:0,o=0,l=0,c=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(c+=E.css(e,i+fe[s],!0,r)),n?("content"===i&&(l-=E.css(e,"padding"+fe[s],!0,r)),"margin"!==i&&(l-=E.css(e,"border"+fe[s]+"Width",!0,r))):(l+=E.css(e,"padding"+fe[s],!0,r),"padding"!==i?l+=E.css(e,"border"+fe[s]+"Width",!0,r):o+=E.css(e,"border"+fe[s]+"Width",!0,r));return!n&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l+c}function lt(e,t,i){var n=Xe(e),r=(!g.boxSizingReliable()||i)&&"border-box"===E.css(e,"boxSizing",!1,n),a=r,s=Ze(e,t,n),o="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(s)){if(!i)return s;s="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&M(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===E.css(e,"boxSizing",!1,n),(a=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+ot(e,t,i||(r?"border":"content"),a,n,s)+"px"}function ct(e,t,i,n,r){return new ct.prototype.init(e,t,i,n,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ze(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=re(t),l=Ye.test(t),c=e.style;if(l||(t=it(o)),s=E.cssHooks[t]||E.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:c[t];"string"===(a=typeof i)&&(r=pe.exec(i))&&r[1]&&(i=be(e,t,r),a="number"),null!=i&&i===i&&("number"!==a||l||(i+=r&&r[3]||(E.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var r,a,s,o=re(t);return Ye.test(t)||(t=it(o)),(s=E.cssHooks[t]||E.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=Ze(e,t,n)),"normal"===r&&t in at&&(r=at[t]),""===i||i?(a=parseFloat(r),!0===i||isFinite(a)?a||0:r):r}}),E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,i,n){if(i)return!nt.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,n):Qe(e,rt,function(){return lt(e,t,n)})},set:function(e,i,n){var r,a=Xe(e),s=!g.scrollboxSize()&&"absolute"===a.position,o=(s||n)&&"border-box"===E.css(e,"boxSizing",!1,a),l=n?ot(e,t,n,o,a):0;return o&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-ot(e,t,"border",!1,a)-.5)),l&&(r=pe.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=E.css(e,t)),st(0,i,l)}}}),E.cssHooks.marginLeft=Je(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"===typeof i?i.split(" "):[i];n<4;n++)r[e+fe[n]+t]=a[n]||a[n-2]||a[0];return r}},"margin"!==e&&(E.cssHooks[e+t].set=st)}),E.fn.extend({css:function(e,t){return ee(this,function(e,t,i){var n,r,a={},s=0;if(Array.isArray(t)){for(n=Xe(e),r=t.length;s<r;s++)a[t[s]]=E.css(e,t[s],!1,n);return a}return void 0!==i?E.style(e,t,i):E.css(e,t)},e,t,arguments.length>1)}}),E.Tween=ct,ct.prototype={constructor:ct,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(E.cssNumber[i]?"":"px")},cur:function(){var e=ct.propHooks[this.prop];return e&&e.get?e.get(this):ct.propHooks._default.get(this)},run:function(e){var t,i=ct.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ct.propHooks._default.set(this),this}},ct.prototype.init.prototype=ct.prototype,ct.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},ct.propHooks.scrollTop=ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ct.prototype.init,E.fx.step={};var ht,ut,dt=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ft(){ut&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ft):n.setTimeout(ft,E.fx.interval),E.fx.tick())}function mt(){return n.setTimeout(function(){ht=void 0}),ht=Date.now()}function gt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=fe[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function vt(e,t,i){for(var n,r=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),a=0,s=r.length;a<s;a++)if(n=r[a].call(i,t,e))return n}function yt(e,t,i){var n,r,a=0,s=yt.prefilters.length,o=E.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ht||mt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),a=0,s=c.tweens.length;a<s;a++)c.tweens[a].run(n);return o.notifyWith(e,[c,n,i]),n<1&&s?i:(s||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},i),originalProperties:t,originalOptions:i,startTime:ht||mt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=E.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),h=c.props;for(!function(e,t){var i,n,r,a,s;for(i in e)if(r=t[n=re(i)],a=e[i],Array.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(s=E.cssHooks[n])&&"expand"in s)for(i in a=s.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(h,c.opts.specialEasing);a<s;a++)if(n=yt.prefilters[a].call(c,e,h,c.opts))return v(n.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return E.map(h,vt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(yt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return be(i.elem,e,pe.exec(t),i),i}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(Y);for(var i,n=0,r=e.length;n<r;n++)i=e[n],yt.tweeners[i]=yt.tweeners[i]||[],yt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,a,s,o,l,c,h,u="width"in t||"height"in t,d=this,p={},f=e.style,m=e.nodeType&&ye(e),g=oe.get(e,"fxshow");for(n in i.queue||(null==(s=E._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,E.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[n],dt.test(r)){if(delete t[n],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||E.style(e,n)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(n in u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=oe.get(e,"display")),"none"===(h=E.css(e,"display"))&&(c?h=c:(Ae([e],!0),c=e.style.display||c,h=E.css(e,"display"),Ae([e]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===E.css(e,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=oe.access(e,"fxshow",{display:c}),a&&(g.hidden=!m),m&&Ae([e],!0),d.done(function(){for(n in m||Ae([e]),oe.remove(e,"fxshow"),p)E.style(e,n,p[n])})),l=vt(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),E.speed=function(e,t,i){var n=e&&"object"===typeof e?E.extend({},e):{complete:i||!i&&t||v(e)&&e,duration:e,easing:i&&t||t&&!v(t)&&t};return E.fx.off?n.duration=0:"number"!==typeof n.duration&&(n.duration in E.fx.speeds?n.duration=E.fx.speeds[n.duration]:n.duration=E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=E.isEmptyObject(e),a=E.speed(t,i,n),s=function(){var t=yt(this,E.extend({},e),a);(r||oe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!==typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=E.timers,s=oe.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&pt.test(r)&&n(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));!t&&i||E.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=oe.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=E.timers,s=n?n.length:0;for(i.finish=!0,E.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),E.each(["toggle","show","hide"],function(e,t){var i=E.fn[t];E.fn[t]=function(e,n,r){return null==e||"boolean"===typeof e?i.apply(this,arguments):this.animate(gt(t,!0),e,n,r)}}),E.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),E.timers=[],E.fx.tick=function(){var e,t=0,i=E.timers;for(ht=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||E.fx.stop(),ht=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ut||(ut=!0,ft())},E.fx.stop=function(){ut=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var bt,xt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return ee(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof e.getAttribute?E.prop(e,t,i):(1===a&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=E.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&M(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Y);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return!1===t?E.removeAttr(e,i):e.setAttribute(i,i),i}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var i=xt[t]||E.find.attr;xt[t]=function(e,t,n){var r,a,s=t.toLowerCase();return n||(a=xt[s],xt[s]=r,r=null!=i(e,t,n)?s:null,xt[s]=a),r}});var wt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;function St(e){return(e.match(Y)||[]).join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(Y)||[]}E.fn.extend({prop:function(e,t){return ee(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,i,n,r,a,s;return v(e)?this.each(function(t){E(this).addClass(e.call(this,t,_t(this)))}):(t=Et(e)).length?this.each(function(){if(n=_t(this),i=1===this.nodeType&&" "+St(n)+" "){for(a=0;a<t.length;a++)r=t[a],i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=St(i),n!==s&&this.setAttribute("class",s)}}):this},removeClass:function(e){var t,i,n,r,a,s;return v(e)?this.each(function(t){E(this).removeClass(e.call(this,t,_t(this)))}):arguments.length?(t=Et(e)).length?this.each(function(){if(n=_t(this),i=1===this.nodeType&&" "+St(n)+" "){for(a=0;a<t.length;a++)for(r=t[a];i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=St(i),n!==s&&this.setAttribute("class",s)}}):this:this.attr("class","")},toggleClass:function(e,t){var i,n,r,a,s=typeof e,o="string"===s||Array.isArray(e);return v(e)?this.each(function(i){E(this).toggleClass(e.call(this,i,_t(this),t),t)}):"boolean"===typeof t&&o?t?this.addClass(e):this.removeClass(e):(i=Et(e),this.each(function(){if(o)for(a=E(this),r=0;r<i.length;r++)n=i[r],a.hasClass(n)?a.removeClass(n):a.addClass(n);else void 0!==e&&"boolean"!==s||((n=_t(this))&&oe.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":oe.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+St(_t(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;E.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=v(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,E(this).val()):e)?r="":"number"===typeof r?r+="":Array.isArray(r)&&(r=E.map(r,function(e){return null==e?"":e+""})),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"===typeof(i=r.value)?i.replace(Ct,""):null==i?"":i:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:St(E.text(e))}},select:{get:function(e){var t,i,n,r=e.options,a=e.selectedIndex,s="select-one"===e.type,o=s?null:[],l=s?a+1:r.length;for(n=a<0?l:s?a:0;n<l;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!M(i.parentNode,"optgroup"))){if(t=E(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=E.makeArray(t),s=r.length;s--;)((n=r[s]).selected=E.inArray(E.valHooks.option.get(n),a)>-1)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},g.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Mt=n.location,Tt={guid:Date.now()},Pt=/\?/;E.parseXML=function(e){var t,i;if(!e||"string"!==typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(r){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||E.error("Invalid XML: "+(i?E.map(i.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,i,r){var a,s,o,l,c,h,u,d,f=[i||b],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(s=d=o=i=i||b,3!==i.nodeType&&8!==i.nodeType&&!Dt.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[E.expando]?e:new E.Event(m,"object"===typeof e&&e)).isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:E.makeArray(t,[e]),u=E.event.special[m]||{},r||!u.trigger||!1!==u.trigger.apply(i,t))){if(!r&&!u.noBubble&&!y(i)){for(l=u.delegateType||m,Dt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),o=s;o===(i.ownerDocument||b)&&f.push(o.defaultView||o.parentWindow||n)}for(a=0;(s=f[a++])&&!e.isPropagationStopped();)d=s,e.type=a>1?l:u.bindType||m,(h=(oe.get(s,"events")||Object.create(null))[e.type]&&oe.get(s,"handle"))&&h.apply(s,t),(h=c&&s[c])&&h.apply&&ae(s)&&(e.result=h.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),t)||!ae(i)||c&&v(i[m])&&!y(i)&&((o=i[c])&&(i[c]=null),E.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,Ot),i[m](),e.isPropagationStopped()&&d.removeEventListener(m,Ot),E.event.triggered=void 0,o&&(i[c]=o)),e.result}},simulate:function(e,t,i){var n=E.extend(new E.Event,i,{type:e,isSimulated:!0});E.event.trigger(n,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return E.event.trigger(e,t,i,!0)}});var kt=/\[\]$/,It=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function zt(e,t,i,n){var r;if(Array.isArray(t))E.each(t,function(t,r){i||kt.test(e)?n(e,r):zt(e+"["+("object"===typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==A(t))n(e,t);else for(r in t)zt(e+"["+r+"]",t[r],i,n)}E.param=function(e,t){var i,n=[],r=function(e,t){var i=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){r(this.name,this.value)});else for(i in e)zt(i,e[i],t,r);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Lt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var i=E(this).val();return null==i?null:Array.isArray(i)?E.map(i,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:i.replace(It,"\r\n")}}).get()}});var Bt=/%20/g,jt=/#.*$/,Ft=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,Vt=/^\/\//,Wt={},Ht={},Gt="*/".concat("*"),qt=b.createElement("a");function Yt(e){return function(t,i){"string"!==typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(Y)||[];if(v(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Xt(e,t,i,n){var r={},a=e===Ht;function s(o){var l;return r[o]=!0,E.each(e[o]||[],function(e,o){var c=o(t,i,n);return"string"!==typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Qt(e,t){var i,n,r=E.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&E.extend(!0,e,n),e}qt.href=Mt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,E.ajaxSettings),t):Qt(E.ajaxSettings,e)},ajaxPrefilter:Yt(Wt),ajaxTransport:Yt(Ht),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var i,r,a,s,o,l,c,h,u,d,p=E.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?E(f):E.event,g=E.Deferred(),v=E.Callbacks("once memory"),y=p.statusCode||{},x={},w={},A="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Nt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||A;return i&&i.abort(t),_(0,t),this}};if(g.promise(S),p.url=((e||p.url||Mt.href)+"").replace(Vt,Mt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Y)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=qt.protocol+"//"+qt.host!==l.protocol+"//"+l.host}catch(C){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!==typeof p.data&&(p.data=E.param(p.data,p.traditional)),Xt(Wt,p,t,S),c)return S;for(u in(h=E.event&&p.global)&&0===E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ut.test(p.type),r=p.url.replace(jt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Bt,"+")):(d=p.url.slice(r.length),p.data&&(p.processData||"string"===typeof p.data)&&(r+=(Pt.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Ft,"$1"),d=(Pt.test(r)?"&":"?")+"_="+Tt.guid+++d),p.url=r+d),p.ifModified&&(E.lastModified[r]&&S.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&S.setRequestHeader("If-None-Match",E.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Gt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||c))return S.abort();if(A="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),i=Xt(Ht,p,t,S)){if(S.readyState=1,h&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(o=n.setTimeout(function(){S.abort("timeout")},p.timeout));try{c=!1,i.send(x,_)}catch(C){if(c)throw C;_(-1,C)}}else _(-1,"No Transport");function _(e,t,s,l){var u,d,b,x,w,A=t;c||(c=!0,o&&n.clearTimeout(o),i=void 0,a=l||"",S.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(x=function(e,t,i){for(var n,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),i[a]}(p,S,s)),!u&&E.inArray("script",p.dataTypes)>-1&&E.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(e,t,i,n){var r,a,s,o,l,c={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=h.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=h.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=c[l+" "+a]||c["* "+a]))for(r in c)if((o=r.split(" "))[1]===a&&(s=c[l+" "+o[0]]||c["* "+o[0]])){!0===s?s=c[r]:!0!==c[r]&&(a=o[0],h.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(C){return{state:"parsererror",error:s?C:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(p,x,S,u),u?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=w),(w=S.getResponseHeader("etag"))&&(E.etag[r]=w)),204===e||"HEAD"===p.type?A="nocontent":304===e?A="notmodified":(A=x.state,d=x.data,u=!(b=x.error))):(b=A,!e&&A||(A="error",e<0&&(e=0))),S.status=e,S.statusText=(t||A)+"",u?g.resolveWith(f,[d,A,S]):g.rejectWith(f,[S,A,b]),S.statusCode(y),y=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[S,p,u?d:b]),v.fireWith(f,[S,A]),h&&(m.trigger("ajaxComplete",[S,p]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,i){return E.get(e,t,i,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,t){E[t]=function(e,i,n,r){return v(i)&&(r=r||n,n=i,i=void 0),E.ajax(E.extend({url:e,type:t,dataType:r,data:i,success:n},E.isPlainObject(e)&&e))}}),E.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),E._evalUrl=function(e,t,i){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,i)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return v(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=v(e);return this.each(function(i){E(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},Zt=E.ajaxSettings.xhr();g.cors=!!Zt&&"withCredentials"in Zt,g.ajax=Zt=!!Zt,E.ajaxTransport(function(e){var t,i;if(g.cors||Zt&&!e.crossDomain)return{send:function(r,a){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!==typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Kt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!==typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),i=o.onerror=o.ontimeout=t("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,r){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){i&&i()}}});var Jt=[],$t=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||E.expando+"_"+Tt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,i){var r,a,s,o=!1!==e.jsonp&&($t.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace($t,"$1"+r):!1!==e.jsonp&&(e.url+=(Pt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||E.error(r+" was not called"),s[0]},e.dataTypes[0]="json",a=n[r],n[r]=function(){s=arguments},i.always(function(){void 0===a?E(n).removeProp(r):n[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(r)),s&&v(a)&&a(s[0]),s=a=void 0}),"script"}),g.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,i){return"string"!==typeof e?[]:("boolean"===typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?((n=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(n)):t=b),a=!i&&[],(r=N.exec(e))?[t.createElement(r[1])]:(r=De([e],t,a),a&&a.length&&E(a).remove(),E.merge([],r.childNodes)));var n,r,a},E.fn.load=function(e,t,i){var n,r,a,s=this,o=e.indexOf(" ");return o>-1&&(n=St(e.slice(o)),e=e.slice(0,o)),v(t)?(i=t,t=void 0):t&&"object"===typeof t&&(r="POST"),s.length>0&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?E("<div>").append(E.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,a||[e.responseText,t,e])})}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(e,t,i){var n,r,a,s,o,l,c=E.css(e,"position"),h=E(e),u={};"static"===c&&(e.style.position="relative"),o=h.offset(),a=E.css(e,"top"),l=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(s=(n=h.position()).top,r=n.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),v(t)&&(t=t.call(e,i,E.extend({},o))),null!=t.top&&(u.top=t.top-o.top+s),null!=t.left&&(u.left=t.left-o.left+r),"using"in t?t.using.call(e,u):h.css(u)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===E.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(n,"marginTop",!0),left:t.left-r.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||me})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;E.fn[e]=function(n){return ee(this,function(e,n,r){var a;if(y(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:r,i?r:a.pageYOffset):e[n]=r},e,n,arguments.length)}}),E.each(["top","left"],function(e,t){E.cssHooks[t]=Je(g.pixelPosition,function(e,i){if(i)return i=Ze(e,t),qe.test(i)?E(e).position()[t]+"px":i})}),E.each({Height:"height",Width:"width"},function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){E.fn[n]=function(r,a){var s=arguments.length&&(i||"boolean"!==typeof r),o=i||(!0===r||!0===a?"margin":"border");return ee(this,function(t,i,r){var a;return y(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?E.css(t,i,o):E.style(t,i,r,o)},t,s?r:void 0,s)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){E.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});var ei=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var i,n,r;if("string"===typeof t&&(i=e[t],t=e,e=i),v(e))return n=o.call(arguments,2),r=function(){return e.apply(t||this,n.concat(o.call(arguments)))},r.guid=e.guid=e.guid||E.guid++,r},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=M,E.isFunction=v,E.isWindow=y,E.camelCase=re,E.type=A,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(ei,"$1")},void 0===(i=function(){return E}.apply(t,[]))||(e.exports=i);var ti=n.jQuery,ii=n.$;return E.noConflict=function(e){return n.$===E&&(n.$=ii),e&&n.jQuery===E&&(n.jQuery=ti),E},"undefined"===typeof r&&(n.jQuery=n.$=E),E})},8693:(e,t,i)=>{"use strict";i.d(t,{A:()=>oe});var n=i(8168),r=i(5043),a=i(8587);function s(e){var t,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(i=s(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}const o=function(){for(var e,t,i=0,n="",r=arguments.length;i<r;i++)(e=arguments[i])&&(t=s(e))&&(n&&(n+=" "),n+=t);return n};var l=i(6803);function c(e,t){const i=(0,n.A)({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))i[r]=(0,n.A)({},e[r],i[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const a=e[r]||{},s=t[r];i[r]={},s&&Object.keys(s)?a&&Object.keys(a)?(i[r]=(0,n.A)({},s),Object.keys(a).forEach(e=>{i[r][e]=c(a[e],s[e])})):i[r]=s:i[r]=a}else void 0===i[r]&&(i[r]=e[r])}),i}var h=i(579);const u=r.createContext(void 0);function d(e){let{props:t,name:i}=e;return function(e){const{theme:t,name:i,props:n}=e;if(!t||!t.components||!t.components[i])return n;const r=t.components[i];return r.defaultProps?c(r.defaultProps,n):r.styleOverrides||r.variants?n:c(r,n)}({props:t,name:i,theme:{components:r.useContext(u)}})}var p=i(8052),f=i(7868),m=i(9172),g=i(7758),v=i(8812),y=i(8280);var b=i(7266);const x={black:"#000",white:"#fff"},w={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},A={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},S={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},_={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},E={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},C={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},M={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},T=["mode","contrastThreshold","tonalOffset"],P={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:x.white,default:x.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},D={text:{primary:x.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:x.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function O(e,t,i,n){const r=n.light||n,a=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=(0,b.a)(e.main,r):"dark"===t&&(e.dark=(0,b.e$)(e.main,a)))}function k(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:r=.2}=e,s=(0,a.A)(e,T),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:E[200],light:E[50],dark:E[400]}:{main:E[700],light:E[400],dark:E[800]}}(t),l=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:A[200],light:A[50],dark:A[400]}:{main:A[500],light:A[300],dark:A[700]}}(t),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:S[500],light:S[300],dark:S[700]}:{main:S[700],light:S[400],dark:S[800]}}(t),h=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:C[400],light:C[300],dark:C[700]}:{main:C[700],light:C[500],dark:C[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:M[400],light:M[300],dark:M[700]}:{main:M[800],light:M[500],dark:M[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_[400],light:_[300],dark:_[700]}:{main:"#ed6c02",light:_[500],dark:_[900]}}(t);function p(e){return(0,b.eM)(e,D.text.primary)>=i?D.text.primary:P.text.primary}const g=e=>{let{color:t,name:i,mainShade:a=500,lightShade:s=300,darkShade:o=700}=e;if(t=(0,n.A)({},t),!t.main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error((0,f.A)(11,i?" (".concat(i,")"):"",a));if("string"!==typeof t.main)throw new Error((0,f.A)(12,i?" (".concat(i,")"):"",JSON.stringify(t.main)));return O(t,"light",s,r),O(t,"dark",o,r),t.contrastText||(t.contrastText=p(t.main)),t},v={dark:D,light:P};return(0,m.A)((0,n.A)({common:(0,n.A)({},x),mode:t,primary:g({color:o,name:"primary"}),secondary:g({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:c,name:"error"}),warning:g({color:d,name:"warning"}),info:g({color:h,name:"info"}),success:g({color:u,name:"success"}),grey:w,contrastThreshold:i,getContrastText:p,augmentColor:g,tonalOffset:r},v[t]),s)}const I=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const R={textTransform:"uppercase"},L='"Roboto", "Helvetica", "Arial", sans-serif';function z(e,t){const i="function"===typeof t?t(e):t,{fontFamily:r=L,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:c=500,fontWeightBold:h=700,htmlFontSize:u=16,allVariants:d,pxToRem:p}=i,f=(0,a.A)(i,I);const g=s/14,v=p||(e=>"".concat(e/u*g,"rem")),y=(e,t,i,a,s)=>{return(0,n.A)({fontFamily:r,fontWeight:e,fontSize:v(t),lineHeight:i},r===L?{letterSpacing:"".concat((o=a/t,Math.round(1e5*o)/1e5),"em")}:{},s,d);var o},b={h1:y(o,96,1.167,-1.5),h2:y(o,60,1.2,-.5),h3:y(l,48,1.167,0),h4:y(l,34,1.235,.25),h5:y(l,24,1.334,0),h6:y(c,20,1.6,.15),subtitle1:y(l,16,1.75,.15),subtitle2:y(c,14,1.57,.1),body1:y(l,16,1.5,.15),body2:y(l,14,1.43,.15),button:y(c,14,1.75,.4,R),caption:y(l,12,1.66,.4),overline:y(l,12,2.66,1,R),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,m.A)((0,n.A)({htmlFontSize:u,pxToRem:v,fontFamily:r,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:c,fontWeightBold:h},b),f,{clone:!1})}function B(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const j=["none",B(0,2,1,-1,0,1,1,0,0,1,3,0),B(0,3,1,-2,0,2,2,0,0,1,5,0),B(0,3,3,-2,0,3,4,0,0,1,8,0),B(0,2,4,-1,0,4,5,0,0,1,10,0),B(0,3,5,-1,0,5,8,0,0,1,14,0),B(0,3,5,-1,0,6,10,0,0,1,18,0),B(0,4,5,-2,0,7,10,1,0,2,16,1),B(0,5,5,-3,0,8,10,1,0,3,14,2),B(0,5,6,-3,0,9,12,1,0,3,16,2),B(0,6,6,-3,0,10,14,1,0,4,18,3),B(0,6,7,-4,0,11,15,1,0,4,20,3),B(0,7,8,-4,0,12,17,2,0,5,22,4),B(0,7,8,-4,0,13,19,2,0,5,24,4),B(0,7,9,-4,0,14,21,2,0,5,26,4),B(0,8,9,-5,0,15,22,2,0,6,28,5),B(0,8,10,-5,0,16,24,2,0,6,30,5),B(0,8,11,-5,0,17,26,2,0,6,32,5),B(0,9,11,-5,0,18,28,2,0,7,34,6),B(0,9,12,-6,0,19,29,2,0,7,36,6),B(0,10,13,-6,0,20,31,3,0,8,38,7),B(0,10,13,-6,0,21,33,3,0,8,40,7),B(0,10,14,-6,0,22,35,3,0,8,42,7),B(0,11,14,-7,0,23,36,3,0,9,44,8),B(0,11,15,-7,0,24,38,3,0,9,46,8)],F=["duration","easing","delay"],N={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},U={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function V(e){return"".concat(Math.round(e),"ms")}function W(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function H(e){const t=(0,n.A)({},N,e.easing),i=(0,n.A)({},U,e.duration);return(0,n.A)({getAutoHeightDuration:W,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:r=i.standard,easing:s=t.easeInOut,delay:o=0}=n;(0,a.A)(n,F);return(Array.isArray(e)?e:[e]).map(e=>"".concat(e," ").concat("string"===typeof r?r:V(r)," ").concat(s," ").concat("string"===typeof o?o:V(o))).join(",")}},e,{easing:t,duration:i})}const G={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},q=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:i={},transitions:r={},typography:s={}}=e,o=(0,a.A)(e,q);if(e.vars&&void 0===e.generateCssVars)throw new Error((0,f.A)(18));const l=k(i),c=(0,y.A)(e);let h=(0,m.A)(c,{mixins:(u=c.breakpoints,d=t,(0,n.A)({toolbar:{minHeight:56,[u.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[u.up("sm")]:{minHeight:64}}},d)),palette:l,shadows:j.slice(),typography:z(l,s),transitions:H(r),zIndex:(0,n.A)({},G)});var u,d;h=(0,m.A)(h,o);for(var p=arguments.length,b=new Array(p>1?p-1:0),x=1;x<p;x++)b[x-1]=arguments[x];return h=b.reduce((e,t)=>(0,m.A)(e,t),h),h.unstable_sxConfig=(0,n.A)({},g.A,null==o?void 0:o.unstable_sxConfig),h.unstable_sx=function(e){return(0,v.A)({sx:e,theme:this})},h}const X=Y();const Q=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},K=e=>Q(e)&&"classes"!==e,Z=(0,p.Ay)({themeId:"$$material",defaultTheme:X,rootShouldForwardProp:K});var J=i(9386);const $={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ee(e,t){const i=$[t];return i?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(i):"".concat(J.A.generate(e),"-").concat(t)}function te(e){return ee("MuiSvgIcon",e)}!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n={};t.forEach(t=>{n[t]=ee(e,t,i)})}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ie=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],ne=e=>{const{color:t,fontSize:i,classes:n}=e;return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n={};return Object.keys(e).forEach(r=>{n[r]=e[r].reduce((e,n)=>{if(n){const r=t(n);""!==r&&e.push(r),i&&i[n]&&e.push(i[n])}return e},[]).join(" ")}),n}({root:["root","inherit"!==t&&"color".concat((0,l.A)(t)),"fontSize".concat((0,l.A)(i))]},te,n)},re=Z("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,"inherit"!==i.color&&t["color".concat((0,l.A)(i.color))],t["fontSize".concat((0,l.A)(i.fontSize))]]}})(e=>{let{theme:t,ownerState:i}=e;var n,r,a,s,o,l,c,h,u,d,p,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:i.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(n=t.transitions)||null==(r=n.create)?void 0:r.call(n,"fill",{duration:null==(a=t.transitions)||null==(a=a.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(o=s.pxToRem)?void 0:o.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(h=t.typography)||null==(u=h.pxToRem)?void 0:u.call(h,35))||"2.1875rem"}[i.fontSize],color:null!=(d=null==(p=(t.vars||t).palette)||null==(p=p[i.color])?void 0:p.main)?d:{action:null==(f=(t.vars||t).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[i.color]}}),ae=r.forwardRef(function(e,t){const i=d({props:e,name:"MuiSvgIcon"});const{children:s,className:l,color:c="inherit",component:u="svg",fontSize:p="medium",htmlColor:f,inheritViewBox:m=!1,titleAccess:g,viewBox:v="0 0 24 24"}=i,y=(0,a.A)(i,ie),b=r.isValidElement(s)&&"svg"===s.type,x=(0,n.A)({},i,{color:c,component:u,fontSize:p,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:v,hasSvgAsChild:b}),w={};m||(w.viewBox=v);const A=ne(x);return(0,h.jsxs)(re,(0,n.A)({as:u,className:o(A.root,l),focusable:"false",color:f,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},w,y,b&&s.props,{ownerState:x,children:[b?s.props.children:s,g?(0,h.jsx)("title",{children:g}):null]}))});ae.muiName="SvgIcon";const se=ae;function oe(e,t){function i(i,r){return(0,h.jsx)(se,(0,n.A)({"data-testid":"".concat(t,"Icon"),ref:r},i,{children:e}))}return i.muiName=se.muiName,r.memo(r.forwardRef(i))}},8812:(e,t,i)=>{"use strict";i.d(t,{A:()=>h,k:()=>l});var n=i(7598),r=i(3815),a=i(7162),s=i(9751),o=i(7758);function l(){function e(e,t,i,r){const o={[e]:t,theme:i},l=r[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:h,transform:u,style:d}=l;if(null==t)return null;if("typography"===h&&"inherit"===t)return{[e]:t};const p=(0,a.Yn)(i,h)||{};if(d)return d(o);return(0,s.NI)(o,t,t=>{let i=(0,a.BO)(p,u,t);return t===i&&"string"===typeof t&&(i=(0,a.BO)(p,u,"".concat(e).concat("default"===t?"":(0,n.A)(t)),t)),!1===c?i:{[c]:i}})}return function t(i){var n;const{sx:a,theme:l={},nested:c}=i||{};if(!a)return null;const h=null!=(n=l.unstable_sxConfig)?n:o.A;function u(i){let n=i;if("function"===typeof i)n=i(l);else if("object"!==typeof i)return i;if(!n)return null;const a=(0,s.EU)(l.breakpoints),o=Object.keys(a);let u=a;return Object.keys(n).forEach(i=>{const a=(o=n[i],c=l,"function"===typeof o?o(c):o);var o,c;if(null!==a&&void 0!==a)if("object"===typeof a)if(h[i])u=(0,r.A)(u,e(i,a,l,h));else{const e=(0,s.NI)({theme:l},a,e=>({[i]:e}));!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce((e,t)=>e.concat(Object.keys(t)),[]),r=new Set(n);return t.every(e=>r.size===Object.keys(e).length)}(e,a)?u=(0,r.A)(u,e):u[i]=t({sx:a,theme:l,nested:!0})}else u=(0,r.A)(u,e(i,a,l,h))}),!c&&l.modularCssLayers?{"@layer sx":(0,s.vf)(o,u)}:(0,s.vf)(o,u)}return Array.isArray(a)?a.map(u):u(a)}}const c=l();c.filterProps=["sx"];const h=c},9172:(e,t,i)=>{"use strict";i.d(t,{A:()=>o,Q:()=>a});var n=i(8168),r=i(5043);function a(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(r.isValidElement(e)||!a(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=s(e[i])}),t}function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=i.clone?(0,n.A)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach(n=>{r.isValidElement(t[n])?l[n]=t[n]:a(t[n])&&Object.prototype.hasOwnProperty.call(e,n)&&a(e[n])?l[n]=o(e[n],t[n],i):i.clone?l[n]=a(t[n])?s(t[n]):t[n]:l[n]=t[n]}),l}},9214:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,i))}},9265:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.A,extendSxProp:()=>h,unstable_createStyleFunctionSx:()=>n.k,unstable_defaultSxConfig:()=>o.A});var n=i(8812),r=i(8168),a=i(8587),s=i(9172),o=i(7758);const l=["sx"],c=e=>{var t,i;const n={systemProps:{},otherProps:{}},r=null!=(t=null==e||null==(i=e.theme)?void 0:i.unstable_sxConfig)?t:o.A;return Object.keys(e).forEach(t=>{r[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]}),n};function h(e){const{sx:t}=e,i=(0,a.A)(e,l),{systemProps:n,otherProps:o}=c(i);let h;return h=Array.isArray(t)?[n,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,s.Q)(e)?(0,r.A)({},n,e):n}:(0,r.A)({},n,t),(0,r.A)({},o,{sx:h})}},9386:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const n=e=>e,r=(()=>{let e=n;return{configure(t){e=t},generate:t=>e(t),reset(){e=n}}})()},9482:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.A,isPlainObject:()=>n.Q});var n=i(9172)},9703:(e,t,i)=>{"use strict";function n(e,t){const i=this;if(i.vars&&"function"===typeof i.getColorSchemeSelector){const n=i.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[n]:t}}return i.palette.mode===e?t:{}}i.d(t,{A:()=>n})},9751:(e,t,i)=>{"use strict";i.d(t,{EU:()=>s,NI:()=>a,vf:()=>o,zu:()=>n});const n={xs:0,sm:600,md:900,lg:1200,xl:1536},r={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(n[e],"px)")};function a(e,t,i){const a=e.theme||{};if(Array.isArray(t)){const e=a.breakpoints||r;return t.reduce((n,r,a)=>(n[e.up(e.keys[a])]=i(t[a]),n),{})}if("object"===typeof t){const e=a.breakpoints||r;return Object.keys(t).reduce((r,a)=>{if(-1!==Object.keys(e.values||n).indexOf(a)){r[e.up(a)]=i(t[a],a)}else{const e=a;r[e]=t[e]}return r},{})}return i(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce((t,i)=>(t[e.up(i)]={},t),{}))||{}}function o(e,t){return e.reduce((e,t)=>{const i=e[t];return(!i||0===Object.keys(i).length)&&delete e[t],e},t)}},9810:(e,t,i)=>{"use strict";var n=i(4994);t.A=void 0;var r=n(i(39)),a=i(579);t.A=(0,r.default)([(0,a.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,a.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"===typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"===typeof i.then)return i}var r=Object.create(null);__webpack_require__.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&i;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,__webpack_require__.d(r,a),r}})(),__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((t,i)=>(__webpack_require__.f[i](e,t),t),[])),__webpack_require__.u=e=>"static/js/"+e+"."+{23:"b1bd107e",160:"4fbc0650",208:"7fc5c8c5",293:"bc59732f",312:"52c2f608",516:"9d6de86e",519:"6aa65b94",653:"b50e2a88",885:"04677621",917:"29c7b13b",946:"376cd19c"}[e]+".chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ujjawal-portfolio:";__webpack_require__.l=(i,n,r,a)=>{if(e[i])e[i].push(n);else{var s,o;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){s=h;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+r),s.src=i),e[i]=[n];var u=(t,n)=>{s.onerror=s.onload=null,clearTimeout(d);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(n)),t)return t(n)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),o&&document.head.appendChild(s)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/Ujjawal-Portfolio/",(()=>{var e={792:0};__webpack_require__.f.j=(t,i)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var r=new Promise((i,r)=>n=e[t]=[i,r]);i.push(n[2]=r);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,i=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,n[1](s)}},"chunk-"+t,t)}};var t=(t,i)=>{var n,r,[a,s,o]=i,l=0;if(a.some(t=>0!==e[t])){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(o)o(__webpack_require__)}for(t&&t(i);l<a.length;l++)r=a[l],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunkujjawal_portfolio=self.webpackChunkujjawal_portfolio||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e,t=__webpack_require__(5043),i=__webpack_require__.t(t,2),n=__webpack_require__(4391);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,i,n){return void 0===i&&(i=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?u(t):t,{state:i,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:i="",hash:n=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function u(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function d(t,i,n,o){void 0===o&&(o={});let{window:u=document.defaultView,v5Compat:d=!1}=o,p=u.history,f=e.Pop,m=null,g=v();function v(){return(p.state||{idx:null}).idx}function y(){f=e.Pop;let t=v(),i=null==t?null:t-g;g=t,m&&m({action:f,location:x.location,delta:i})}function b(e){let t="null"!==u.location.origin?u.location.origin:u.location.href,i="string"===typeof e?e:h(e);return i=i.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}null==g&&(g=0,p.replaceState(r({},p.state,{idx:g}),""));let x={get action(){return f},get location(){return t(u,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(a,y),m=e,()=>{u.removeEventListener(a,y),m=null}},createHref:e=>i(u,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,i){f=e.Push;let r=c(x.location,t,i);n&&n(r,t),g=v()+1;let a=l(r,g),s=x.createHref(r);try{p.pushState(a,"",s)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;u.location.assign(s)}d&&m&&m({action:f,location:x.location,delta:1})},replace:function(t,i){f=e.Replace;let r=c(x.location,t,i);n&&n(r,t),g=v();let a=l(r,g),s=x.createHref(r);p.replaceState(a,"",s),d&&m&&m({action:f,location:x.location,delta:0})},go:e=>p.go(e)};return x}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,i){return void 0===i&&(i="/"),m(e,t,i,!1)}function m(e,t,i,n){let r=P(("string"===typeof t?u(t):t).pathname||"/",i);if(null==r)return null;let a=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every((e,i)=>e===t[i]);return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=T(r);s=C(a[o],e,n)}return s}function g(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===n&&(n="");let r=(e,r,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let l=R([n,o.relativePath]),c=i.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:E(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let n of v(e.path))r(e,t,n);else r(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[i,...n]=t,r=i.endsWith("?"),a=i.replace(/\?$/,"");if(0===n.length)return r?[a,""]:[a];let s=v(n.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),r&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,b=3,x=2,w=1,A=10,S=-2,_=e=>"*"===e;function E(e,t){let i=e.split("/"),n=i.length;return i.some(_)&&(n+=S),t&&(n+=x),i.filter(e=>!_(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?w:A),n)}function C(e,t,i){void 0===i&&(i=!1);let{routesMeta:n}=e,r={},a="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",h=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&i&&!n[n.length-1].route.index&&(h=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(r,h.params),s.push({params:r,pathname:R([a,h.pathname]),pathnameBase:L(R([a,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(a=R([a,h.pathnameBase]))}return s}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);o("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,i)=>(n.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let a=new RegExp(r,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),r=t.match(i);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),l=r.slice(1),c=n.reduce((e,t,i)=>{let{paramName:n,isOptional:r}=t;if("*"===n){let e=l[i]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[i];return e[n]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:a,pathnameBase:s,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&"/"!==n?null:e.slice(i)||"/"}function D(e,t,i,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function k(e,t){let i=O(e);return t?i.map((e,t)=>t===i.length-1?e.pathname:e.pathnameBase):i.map(e=>e.pathnameBase)}function I(e,t,i,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=u(e):(a=r({},e),s(!a.pathname||!a.pathname.includes("?"),D("?","pathname","search",a)),s(!a.pathname||!a.pathname.includes("#"),D("#","pathname","hash",a)),s(!a.search||!a.search.includes("#"),D("#","search","hash",a)));let o,l=""===e||""===a.pathname,c=l?"/":a.pathname;if(null==c)o=i;else{let e=t.length-1;if(!n&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}o=e>=0?t[e]:"/"}let h=function(e,t){void 0===t&&(t="/");let{pathname:i,search:n="",hash:r=""}="string"===typeof e?u(e):e,a=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)}),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:a,search:z(n),hash:B(r)}}(a,o),d=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&i.endsWith("/");return h.pathname.endsWith("/")||!d&&!p||(h.pathname+="/"),h}const R=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const F=["post","put","patch","delete"],N=(new Set(F),["get",...F]);new Set(N),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},U.apply(this,arguments)}const V=t.createContext(null);const W=t.createContext(null);const H=t.createContext(null);const G=t.createContext(null);const q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function X(){return null!=t.useContext(G)}function Q(){return X()||s(!1),t.useContext(G).location}function K(e){t.useContext(H).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext(q);return e?function(){let{router:e}=le(se.UseNavigateStable),i=he(oe.UseNavigateStable),n=t.useRef(!1);K(()=>{n.current=!0});let r=t.useCallback(function(t,r){void 0===r&&(r={}),n.current&&("number"===typeof t?e.navigate(t):e.navigate(t,U({fromRouteId:i},r)))},[e,i]);return r}():function(){X()||s(!1);let e=t.useContext(V),{basename:i,future:n,navigator:r}=t.useContext(H),{matches:a}=t.useContext(q),{pathname:o}=Q(),l=JSON.stringify(k(a,n.v7_relativeSplatPath)),c=t.useRef(!1);K(()=>{c.current=!0});let h=t.useCallback(function(t,n){if(void 0===n&&(n={}),!c.current)return;if("number"===typeof t)return void r.go(t);let a=I(t,JSON.parse(l),o,"path"===n.relative);null==e&&"/"!==i&&(a.pathname="/"===a.pathname?i:R([i,a.pathname])),(n.replace?r.replace:r.push)(a,n.state,n)},[i,r,l,o,e]);return h}()}const J=t.createContext(null);function $(e,i){let{relative:n}=void 0===i?{}:i,{future:r}=t.useContext(H),{matches:a}=t.useContext(q),{pathname:s}=Q(),o=JSON.stringify(k(a,r.v7_relativeSplatPath));return t.useMemo(()=>I(e,JSON.parse(o),s,"path"===n),[e,o,s,n])}function ee(i,n,r,a){X()||s(!1);let{navigator:o}=t.useContext(H),{matches:l}=t.useContext(q),c=l[l.length-1],h=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let p,m=Q();if(n){var g;let e="string"===typeof n?u(n):n;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||s(!1),p=e}else p=m;let v=p.pathname||"/",y=v;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=f(i,{pathname:y});let x=ae(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:R([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:R([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,a);return n&&x?t.createElement(G.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:e.Pop}},x):x}function te(){let e=function(){var e;let i=t.useContext(Y),n=ce(oe.UseRouteError),r=he(oe.UseRouteError);if(void 0!==i)return i;return null==(e=n.errors)?void 0:e[r]}(),i=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},i),n?t.createElement("pre",{style:a},n):null,null)}const ie=t.createElement(te,null);class ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(q.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:i,match:n,children:r}=e,a=t.useContext(V);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(q.Provider,{value:i},r)}function ae(e,i,n,r){var a;if(void 0===i&&(i=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===i.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(a=n)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let h=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){h=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,r,a)=>{let s,o=!1,d=null,p=null;var f;n&&(s=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||ie,h&&(u<0&&0===a?(f="route-fallback",!1||ue[f]||(ue[f]=!0),o=!0,p=null):u===a&&(o=!0,p=r.route.hydrateFallbackElement||null)));let m=i.concat(l.slice(0,a+1)),g=()=>{let i;return i=s?d:o?p:r.route.Component?t.createElement(r.route.Component,null):r.route.element?r.route.element:e,t.createElement(re,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:i})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?t.createElement(ne,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),oe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oe||{});function le(e){let i=t.useContext(V);return i||s(!1),i}function ce(e){let i=t.useContext(W);return i||s(!1),i}function he(e){let i=function(){let e=t.useContext(q);return e||s(!1),e}(),n=i.matches[i.matches.length-1];return n.route.id||s(!1),n.route.id}const ue={};function de(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function pe(e){return function(e){let i=t.useContext(q).outlet;return i?t.createElement(J.Provider,{value:e},i):i}(e.context)}function fe(e){s(!1)}function me(i){let{basename:n="/",children:r=null,location:a,navigationType:o=e.Pop,navigator:l,static:c=!1,future:h}=i;X()&&s(!1);let d=n.replace(/^\/*/,"/"),p=t.useMemo(()=>({basename:d,navigator:l,static:c,future:U({v7_relativeSplatPath:!1},h)}),[d,h,l,c]);"string"===typeof a&&(a=u(a));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=a,b=t.useMemo(()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:o}},[d,f,m,g,v,y,o]);return null==b?null:t.createElement(H.Provider,{value:p},t.createElement(G.Provider,{children:r,value:b}))}function ge(e){let{children:t,location:i}=e;return ee(ve(t),i)}new Promise(()=>{});t.Component;function ve(e,i){void 0===i&&(i=[]);let n=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let a=[...i,r];if(e.type===t.Fragment)return void n.push.apply(n,ve(e.props.children,a));e.type!==fe&&s(!1),e.props.index&&e.props.children&&s(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,a)),n.push(o)}),n}var ye=__webpack_require__(8),be=__webpack_require__(8587);function xe(e,t){if(null==e)return{};var i,n,r=(0,be.A)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var we=__webpack_require__(1725),Ae=__webpack_require__.n(we),Se=/[A-Z]/g,_e=/^ms-/,Ee={};function Ce(e){return"-"+e.toLowerCase()}const Me=function(e){if(Ee.hasOwnProperty(e))return Ee[e];var t=e.replace(Se,Ce);return Ee[e]=_e.test(t)?"-"+t:t};function Te(e,t){if(e===t)return!0;if(!e||!t)return!1;const i=Object.keys(e),n=Object.keys(t),r=i.length;if(n.length!==r)return!1;for(let a=0;a<r;a++){const n=i[a];if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1}return!0}var Pe=__webpack_require__(5173),De=__webpack_require__.n(Pe);const Oe=De().oneOfType([De().string,De().number]),ke={all:De().bool,grid:De().bool,aural:De().bool,braille:De().bool,handheld:De().bool,print:De().bool,projection:De().bool,screen:De().bool,tty:De().bool,tv:De().bool,embossed:De().bool},Ie={orientation:De().oneOf(["portrait","landscape"]),scan:De().oneOf(["progressive","interlace"]),aspectRatio:De().string,deviceAspectRatio:De().string,height:Oe,deviceHeight:Oe,width:Oe,deviceWidth:Oe,color:De().bool,colorIndex:De().bool,monochrome:De().bool,resolution:Oe,type:Object.keys(ke)},{type:Re}=Ie,Le=xe(Ie,["type"]),ze=(0,ye.A)({minAspectRatio:De().string,maxAspectRatio:De().string,minDeviceAspectRatio:De().string,maxDeviceAspectRatio:De().string,minHeight:Oe,maxHeight:Oe,minDeviceHeight:Oe,maxDeviceHeight:Oe,minWidth:Oe,maxWidth:Oe,minDeviceWidth:Oe,maxDeviceWidth:Oe,minColor:De().number,maxColor:De().number,minColorIndex:De().number,maxColorIndex:De().number,minMonochrome:De().number,maxMonochrome:De().number,minResolution:Oe,maxResolution:Oe},Le);var Be={all:(0,ye.A)((0,ye.A)({},ke),ze),types:ke,matchers:Ie,features:ze};const je=e=>{const t=[];return Object.keys(Be.all).forEach(i=>{const n=e[i];null!=n&&t.push(((e,t)=>{const i=Me(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?i:!1===t?"not ".concat(i):"(".concat(i,": ").concat(t,")")})(i,n))}),t.join(" and ")},Fe=(0,t.createContext)(void 0),Ne=e=>{if(!e)return;return Object.keys(e).reduce((t,i)=>(t[Me(i)]=e[i],t),{})},Ue=()=>{const e=(0,t.useRef)(!1);return(0,t.useEffect)(()=>{e.current=!0},[]),e.current},Ve=e=>{const i=()=>(e=>e.query||je(e))(e),[n,r]=(0,t.useState)(i);return(0,t.useEffect)(()=>{const e=i();n!==e&&r(e)},[e]),n},We=(e,i,n)=>{const r=(e=>{const i=(0,t.useContext)(Fe),n=()=>Ne(e)||Ne(i),[r,a]=(0,t.useState)(n);return(0,t.useEffect)(()=>{const e=n();Te(r,e)||a(e)},[e,i]),r})(i),a=Ve(e);if(!a)throw new Error("Invalid or missing MediaQuery!");const s=((e,i)=>{const n=()=>Ae()(e,i||{},!!i),[r,a]=(0,t.useState)(n),s=Ue();return(0,t.useEffect)(()=>{if(s){const e=n();return a(e),()=>{e&&e.dispose()}}},[e,i]),r})(a,r),o=(e=>{const[i,n]=(0,t.useState)(e.matches);return(0,t.useEffect)(()=>{const t=e=>{n(e.matches)};return e.addListener(t),n(e.matches),()=>{e.removeListener(t)}},[e]),i})(s),l=Ue();return(0,t.useEffect)(()=>{l&&n&&n(o)},[o]),(0,t.useEffect)(()=>()=>{s&&s.dispose()},[]),o};var He=__webpack_require__(579);const Ge=()=>(0,He.jsx)("div",{className:"mt-1.1",children:(0,He.jsx)(pe,{})});var qe=__webpack_require__(4341);const Ye=window.innerWidth<=375,Xe=window.innerWidth<=768,Qe=window.innerWidth<=1023,Ke=window.innerWidth<=1150,Ze=window.innerWidth<=1800,Je={textAlign:"center",fontWeight:"500",fontSize:Ye?"31.5px":Xe?"32px":Qe?"33.5px":Ze?"37px":"34px",color:"#E73E0D",position:"relative",marginLeft:Ye?"0.5rem":Xe?"0.8rem":Qe?"1":"0.5rem",transform:Ye?"translateY(860%)":Xe||Qe||Ke?"translateY(800%)":Ze?"translateY(900%)":"translateY(720%)",fontFamily:Ye||Xe||Qe?"'Tangerine', cursive":"'Vidaloka', serif"},$e=e=>(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("svg",(0,ye.A)((0,ye.A)({x:0,y:0,width:700,height:700,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 700 700"},e),{},{children:[(0,He.jsx)("g",{clipPath:"url(#clip-path)",children:(0,He.jsx)("path",{className:"tree",d:"M561.709 203c-2.089 2.442 -10.445 5.589 -11.857 1.736 -1.383 -3.826 -5.236 5.942 -9.062 3.826 -3.826 -2.089 -14.298 -6.268 -14.977 -2.442 -0.706 3.853 -4.883 7.326 -6.621 5.236s-8.709 -9.768 -5.915 -11.857 3.853 -8.004 -1.383 -6.268 -4.178 -9.415 0 -11.504c2.687 -1.33 3.853 -2.794 6.268 1.058s5.942 -0.706 5.942 -3.473 2.442 -6.621 4.883 -6.621 9.768 2.794 12.562 7.326 4.178 12.209 8.357 13.24c4.151 1.03 13.919 7.298 11.802 9.74m-55.43 5.589c-6.268 -2.442 -2.794 9.768 -10.798 5.236 -8.03 -4.53 -8.357 -6.621 -8.709 -10.798s-12.562 -4.53 -0.706 -10.445c3.147 -1.574 10.473 -2.089 10.121 1.383 -0.353 3.419 -9.768 5.887 0.706 6.621 9.768 0.706 -5.915 4.883 14.651 3.473 2.768 -0.19 1.03 6.973 -5.264 4.53m-19.508 29.302c-3.853 1.383 -5.236 3.473 -6.621 1.736 0 0 5.589 -8.004 7.678 -7.326 2.062 0.678 2.768 4.178 -1.058 5.589m-8.383 10.445c-4.53 4.883 -3.473 7.326 -1.736 10.445 1.736 3.147 -10.445 -5.915 -4.53 -13.945 1.655 -2.253 10.798 -1.383 6.268 3.5m-9.768 -54.4c-3.826 -1.383 -0.353 -8.709 1.736 -13.24 1.574 -3.391 2.089 -9.062 5.589 -4.53s1.736 9.415 -0.353 12.209c-2.089 2.768 0.923 8.438 -6.973 5.562m-5.562 -5.806c-2.442 0 -4.449 -1.764 -4.449 -3.934s1.981 -3.934 4.449 -3.934c2.442 0 4.449 1.764 4.449 3.961 -0.027 2.143 -2.008 3.907 -4.449 3.907m-0.353 70.651c-1.383 1.736 -2.442 -4.53 -6.621 -4.178s-8.709 -1.736 -6.268 -6.268c0 0 7.326 -2.442 10.121 1.736 2.768 4.178 4.151 6.973 2.768 8.709m-13.945 -72.17c-2.442 1.736 -2.442 -2.442 -9.768 1.736s-7.678 -1.383 -6.268 -3.826c2.713 -4.747 4.53 -6.268 8.709 -6.268s12.209 -3.5 13.593 3.147c1.411 6.621 8.628 15.247 5.236 16.387 -8.357 2.768 -9.062 -12.915 -11.504 -11.178m-9.17 117.372c-5.4 -4.124 0.353 -4.938 0.353 -4.938s2.904 0.272 3.907 1.547c2.279 2.822 1.166 7.515 -4.26 3.391m2.768 34.81c-2.604 1.872 -8.33 1.33 -5.155 -2.957 3.174 -4.313 5.779 -0.055 5.779 -0.055s0.515 2.17 -0.624 3.011m-11.368 -44.442c-1.736 -0.353 -8.357 -4.883 -13.24 -4.883s-8.357 3.147 -9.415 -1.383c-0.543 -2.415 4.883 -5.589 7.326 -6.621s7.326 -3.826 8.357 -6.621 4.53 -3.826 5.589 1.736c1.058 5.589 13.945 9.768 12.562 13.593 -1.438 3.826 -9.442 4.53 -11.178 4.178m3.527 41.838s-1.736 1.383 -2.985 0.706c-2.794 -1.547 -4.747 -6.973 0.489 -5.915 5.236 1.03 2.496 5.209 2.496 5.209m-10.5 -31.011c-2.794 -1.736 -7.326 -1.058 -8.357 1.736 -1.058 2.794 -5.236 6.294 -8.709 2.442 -3.5 -3.826 -1.383 -12.534 4.883 -8.709 3.228 1.953 14.651 -6.268 16.034 -4.178 1.357 2.062 -1.085 10.445 -3.853 8.709m1.519 23.659c-0.298 3.202 0.244 6.159 -2.225 4.206 -2.089 -1.628 -1.709 -11.043 1.33 -9.279s1.194 1.872 0.896 5.074m-21.055 -180.209c-4.883 3.147 -6.973 2.794 -9.415 2.442s-3.147 5.589 -5.589 0.353c-1.085 -2.306 9.062 -5.915 12.562 -5.915 3.473 0 6.268 -5.942 8.357 -2.794s2.089 9.768 -1.411 12.915c-5.589 5.019 -0.977 -9.279 -4.504 -7m-13.349 145.915c-5.453 -1.6 -14.706 1.764 -9.062 -4.911 4.287 -5.047 5.753 -12.4 10.202 -6.077 1.926 2.713 8.14 13.702 -1.14 10.989m-0.244 26.67c-3.5 -0.353 -9.089 -8.166 -7.326 -8.357 3.147 -0.353 6.621 -2.442 9.062 0.353 2.442 2.768 1.736 8.357 -1.736 8.004m-14.298 16.713c-6.621 10.473 -12.915 5.236 -14.298 3.826 -1.383 -1.383 -6.268 -11.151 -0.706 -14.977 3.445 -2.387 3.826 -9.415 9.415 -4.883s12.209 5.589 5.589 16.034m-26.86 -54.725c3.066 -2.849 0.353 -8.357 6.973 -3.826s4.53 10.121 1.764 10.445c-2.794 0.353 -13.945 -1.736 -8.736 -6.621m-8.004 -9.415c-1.058 -4.178 -2.089 -6.973 0 -9.768 0.923 -1.247 6.268 -2.442 7.326 -0.706s6.268 2.089 6.621 5.236 -5.915 3.147 -7.326 4.53c-1.383 1.411 -5.562 4.883 -6.621 0.706m1.736 42.19c-4.883 3.5 -10.445 6.621 -13.24 3.147a22.4 22.4 0 0 0 -9.415 -6.973c-3.473 -1.383 -2.442 -11.151 -1.03 -12.209 1.791 -1.33 5.589 -1.736 8.709 -1.383 3.147 0.353 12.562 0.706 15.683 6.973s4.178 6.945 -0.706 10.445m-35.923 -52.636c-1.736 -4.883 3.853 -10.121 4.53 -11.504 0.706 -1.383 5.589 -8.004 9.768 -4.53 4.206 3.5 -2.089 6.621 -2.442 9.415s3.826 -1.03 6.294 8.736c2.442 9.768 -6.838 4.232 -9.415 6.973 -5.236 5.534 -6.973 -4.232 -8.736 -9.089m-3.419 -77.868c-2.74 -1.166 -1.709 -4.043 -0.515 -6.132s3.527 -0.515 3.527 -0.515c0.136 0.651 3.798 4.585 2.74 5.887s-3.011 1.953 -5.753 0.76m-8.411 -45.581c-3.826 0.706 -4.883 -5.915 0 -6.268s7.326 8.03 6.973 9.062c-0.949 2.849 -3.147 -3.473 -6.973 -2.794m5.209 33.834c0 4.883 -1.383 8.03 -4.178 8.03s-9.062 3.256 -11.504 3.473c-3.473 0.353 -0.353 1.383 -5.589 -2.442 -5.209 -3.826 -2.442 -1.383 1.058 -6.621 3.473 -5.236 5.589 -1.736 13.593 -5.236 8.03 -3.473 6.621 -2.089 6.621 2.794m-12.887 149.577c-2.794 0.353 -8.03 -5.589 -11.151 -5.236s-5.589 6.268 -10.798 4.883c-5.236 -1.411 -8.383 -5.589 -8.004 -9.415 0.353 -3.826 -3.147 -6.268 0.353 -9.062 3.174 -2.551 8.357 7.326 12.209 3.826 3.826 -3.5 7.326 -2.794 11.151 -2.794 3.853 0 17.445 2.089 16.74 8.03 -0.732 5.915 -7.706 9.415 -10.5 9.768m-33.834 -46.721c-3.907 -1.574 -6.621 -6.973 0.706 -5.942 7.326 1.058 3.5 5.236 3.5 5.236s-2.442 1.383 -4.206 0.706m5.97 0.732c2.659 -3.256 7.787 0.136 7.787 0.136 1.492 2.577 2.387 8.085 -0.651 6.81s-9.794 -3.69 -7.136 -6.945m36.926 -60.721c1.764 2.794 1.764 5.942 -1.383 4.883s-4.883 1.058 -7.326 1.736c-2.442 0.706 -7.651 -1.221 -7.326 -4.178 0.706 -6.268 14.298 -5.209 16.034 -2.442m-6.973 47.426c1.058 4.883 -0.353 6.973 -3.473 6.268 -3.147 -0.706 -4.178 3.826 -10.121 4.53s-10.989 -8.547 -10.989 -11.341c2.089 -3.5 10.989 -3.662 14.813 -6.104 3.853 -2.415 8.709 1.764 9.768 6.647m-27.184 -43.568c0.706 -6.973 2.794 -1.736 6.621 0 3.853 1.736 11.504 4.178 0.706 6.621 -3.419 0.787 -8.03 0.353 -7.326 -6.621m6.621 -135.279c3.555 -3.555 2.794 3.147 9.062 3.5s16.36 0 16.034 4.178c-0.706 9.062 13.674 6.973 13.24 11.504 -0.706 7.678 -9.415 9.062 -10.445 11.151s-8.03 0.706 -7.326 8.03 -5.589 -1.221 -6.621 -4.178c-2.089 -5.915 6.294 -9.062 4.883 -12.209 -1.383 -3.147 -6.973 5.589 -10.121 2.089s-6.973 -0.706 -4.178 -7.678 1.058 -5.915 -2.442 -7.326c-3.473 -1.383 -3.473 -7.678 -2.089 -9.062m12.887 -13.945c4.53 1.058 13.24 2.794 12.209 7.678s-4.53 6.268 -6.268 2.794c-1.736 -3.5 -0.353 -5.942 -6.621 -5.942s-7.326 1.411 -7.326 -1.383c0 -2.225 3.473 -4.206 8.004 -3.147m34.864 54.047c-2.659 3.879 -3.934 4.992 -4.423 5.264 0.434 0.081 1.357 0.813 1.981 4.857 1.03 6.621 -1.383 10.445 -2.442 9.415 -1.03 -1.058 -6.621 -4.178 -6.268 -9.768s6.268 -9.062 1.058 -10.121c-5.236 -1.03 -5.915 2.442 -6.621 -2.794 -0.434 -3.174 -0.353 -4.53 7.326 -4.178 7.651 0.353 13.919 0.706 9.387 7.326m6.647 59.609c5.589 4.178 6.621 -2.794 9.062 0s1.058 6.973 -2.089 8.383c-3.147 1.383 -6.268 -1.058 -10.121 -1.058s-3.826 -0.706 -3.473 -2.794c0.326 -2.062 1.03 -8.709 6.621 -4.53m5.562 -66.934c2.794 -3.826 1.058 -6.973 5.942 -5.915s3.473 8.709 3.147 11.504c-0.353 2.794 -5.236 2.442 -6.973 4.53s-4.53 2.089 -5.236 -0.706c-0.706 -2.74 0.326 -5.589 3.121 -9.415m11.151 86.117c-1.736 3.5 -4.53 8.736 -6.621 8.736s-2.794 -3.826 -5.942 -5.589c-3.147 -1.736 -4.53 0 -4.178 -4.53 0.136 -1.736 2.089 -3.826 8.03 -3.147 5.915 0.706 10.445 1.03 8.709 4.53m1.411 -19.534c2.089 0.162 12.915 0.706 11.504 6.621 -1.411 5.942 -4.53 6.973 -7.326 6.973s-3.826 -6.268 -6.268 -7.678c-2.442 -1.383 -2.794 -6.268 2.089 -5.915m6.621 -67.64c1.981 -0.489 -0.353 -12.209 2.089 -11.504s6.973 5.589 11.504 6.268c4.53 0.706 5.915 2.794 2.089 5.589s-5.209 3.147 -5.589 6.621c-0.353 3.473 -4.53 4.178 -5.236 1.383s-2.794 -5.236 -4.883 -2.442c-2.062 2.822 -6.945 -4.151 0.027 -5.915m13.593 95.53c-0.706 2.442 -0.706 5.942 -5.236 5.589s-13.593 3.147 -4.883 -6.268c2.062 -2.198 10.826 -1.764 10.121 0.678m10.121 -40.074c3.473 -1.736 4.53 9.062 1.383 9.415s-11.857 3.826 -12.915 5.589c-1.03 1.736 -5.589 1.383 -5.589 -0.353 0 -8.357 4.883 -4.178 7.326 -4.178 2.47 -0.027 6.294 -8.736 9.794 -10.473m1.736 -17.445c2.089 -1.383 12.915 -2.794 12.209 0.706 -0.706 3.473 -8.03 9.062 -10.445 8.03 -2.47 -1.058 -3.853 -7.353 -1.764 -8.736m16.985 4.096c2.713 -4.802 4.585 -1.004 4.585 -1.004s0.298 2.062 -0.651 3.093c-2.143 2.279 -6.647 2.713 -3.934 -2.089m1.14 63.896c0 4.178 -3.5 4.178 -5.942 2.442s-4.883 -6.268 -10.798 -5.589 -17.419 2.794 -8.004 -8.004c2.551 -2.93 6.621 -5.236 9.415 -3.147s5.236 10.121 8.03 8.03c2.768 -2.117 7.298 2.089 7.298 6.268m-2.415 -81.938c3.121 2.794 -4.53 11.857 -7.678 8.03 -0.027 0 4.53 -10.826 7.678 -8.03m26.047 -16.904c2.904 1.113 1.519 4.747 -0.76 6.404 -2.306 1.628 -4.802 1.166 -4.802 1.166 -2.523 -4.313 2.659 -8.683 5.562 -7.57m0.434 -33.291c-1.03 -3.826 3.853 -5.915 5.589 -3.826s6.268 8.709 3.147 10.121c-3.147 1.383 -9.768 8.357 -12.887 5.236 -3.011 -3.011 5.183 -7.706 4.151 -11.53m18.124 36.953c2.089 -1.736 6.268 0 1.411 2.089 -4.883 2.089 2.442 4.883 4.883 6.621s4.178 4.53 1.383 4.53 -5.562 3.147 -9.062 3.826c-3.473 0.706 -8.709 -3.473 -9.768 -11.504 -1.058 -8.004 9.551 -4.232 11.151 -5.562m-1.383 -49.515c4.53 -1.383 5.942 2.089 6.973 3.826 1.058 1.736 -8.357 8.383 -10.121 4.178 -0.949 -2.253 -1.383 -6.621 3.147 -8.004m12.183 75.996c-1.383 1.736 -8.709 1.411 -10.473 3.853 -1.736 2.442 -9.415 2.442 -9.768 0.706s-1.736 -3.147 -0.706 -4.53c1.194 -1.574 12.562 1.058 14.651 -1.736 2.117 -2.822 7.706 -0.027 6.294 1.709m-4.178 -31.364c0.353 -1.383 4.53 -3.5 4.178 0 -0.353 3.473 -2.089 3.826 -5.236 2.794 -3.121 -1.058 0.624 -0.977 1.058 -2.794m5.834 37.198c2.253 -3.174 3.798 -0.651 3.798 -0.651s0.272 1.357 -0.543 2.034c-1.791 1.519 -5.508 1.791 -3.256 -1.383m26.589 -39.64c1.33 -2.47 8.736 -0.353 7.678 2.089 -1.03 2.442 -1.03 9.062 -4.53 4.53s-5.915 -1.383 -3.147 -6.621m10.527 60.504c2.253 -3.174 3.798 -0.651 3.798 -0.651s0.272 1.383 -0.543 2.062c-1.764 1.492 -5.481 1.764 -3.256 -1.411m3.772 -56.326c2.523 -1.628 5.942 -7.326 4.53 -1.383 -1.411 5.915 7.678 1.383 4.178 7.678 -3.473 6.268 -6.268 6.621 -6.268 5.589s4.53 -5.915 -1.03 -7.326c-5.589 -1.411 -8.383 -0.027 -1.411 -4.558m11.747 9.062c2.253 -3.174 3.798 -0.651 3.798 -0.651s0.244 1.383 -0.543 2.062c-1.791 1.492 -5.508 1.791 -3.256 -1.411m4.938 57.113s0.244 1.383 -0.543 2.062c-1.764 1.519 -5.481 1.791 -3.228 -1.383 2.225 -3.202 3.772 -0.678 3.772 -0.678m37.253 -18.043c2.225 -3.174 3.798 -0.651 3.798 -0.651s0.272 1.357 -0.543 2.062c-1.791 1.492 -5.508 1.764 -3.256 -1.411m-37.74 136.066c3.772 -0.19 11.992 -1.004 10.879 3.445s-8.14 3.555 -8.14 3.555c-2.849 -1.845 -6.511 -6.81 -2.74 -7m15.194 -22.411c1.466 -1.683 5.589 -2.442 7.326 0.353s3.147 3.147 5.589 3.147 2.442 3.147 1.058 5.942c-1.411 2.794 2.089 4.883 -2.442 6.621s-3.473 6.268 -6.973 -0.353 0 -8.709 -3.121 -11.504c-3.202 -2.822 -3.879 -1.438 -1.438 -4.206m20.566 -6.973c2.36 -5.426 4.883 -5.236 5.915 -2.442s5.942 11.504 1.736 11.857c-4.178 0.353 -2.442 7.326 -6.621 4.178s-6.268 -2.794 -6.973 -6.973c-0.678 -4.178 3.5 -1.058 5.942 -6.621m48.674 24.228c1.981 1.004 1.03 4.341 -0.515 5.806 -1.547 1.492 -3.256 1.085 -3.256 1.085 -1.736 -3.934 1.791 -7.896 3.772 -6.891m-343.624 4.341c-5.589 -1.383 -9.415 -3.473 -10.121 -8.709s-6.973 -12.209 -5.589 -14.298 3.147 -2.794 3.826 -4.178c1.547 -3.093 4.883 -6.621 7.678 -1.736s6.973 7.326 7.326 11.151 2.442 19.183 -3.121 17.772m-16.74 18.151c-3.826 0.706 -10.011 -2.17 -4.178 -4.178 9.062 -3.147 0 -10.121 -3.5 -11.151 -3.473 -1.03 -9.415 -1.03 -11.504 -5.562s-8.357 0.353 -8.709 2.089 -2.442 6.294 -6.268 5.589 -4.883 1.411 -3.473 -2.442c0.596 -1.628 5.942 -0.706 6.268 -3.5 0.353 -2.794 1.736 -6.268 4.53 -6.268s6.621 -4.883 10.798 -3.826c4.178 1.03 9.415 9.415 11.504 11.857s12.562 8.709 16.74 12.562 6.268 1.411 6.268 4.53 -14.651 -0.407 -18.477 0.298m-39.383 -69.754c-1.736 -4.178 -1.383 3.853 -4.178 2.442 -2.794 -1.383 -3.147 -1.03 -2.794 -3.473 0.217 -1.438 2.089 -3.147 6.621 -3.5s10.826 6.973 9.415 8.357c-1.411 1.411 -7.326 0.379 -9.062 -3.826m-8.383 65.225c0.353 4.883 -7.678 5.236 -8.709 3.826 -1.221 -1.628 -2.089 -6.973 1.383 -10.473 3.473 -3.473 14.651 -4.883 13.945 -2.442 -0.678 2.442 -6.973 4.206 -6.621 9.089m-10.445 -78.464c0.353 -1.736 -3.147 -6.268 -1.058 -8.004 1.9 -1.574 10.473 3.5 7.326 5.942 -3.147 2.415 -6.621 3.798 -6.268 2.062m-2.442 10.826c-2.442 -0.706 -4.178 -3.147 -3.121 -5.236 1.004 -2.008 3.826 -2.442 5.236 0 1.357 2.442 0.326 5.915 -2.117 5.236m-0.353 64.14c-4.883 6.268 -9.062 5.236 -5.589 -1.03 1.709 -3.066 10.473 -5.236 5.589 1.03m-0.706 13.593c-4.883 6.268 -9.062 5.236 -5.589 -1.03 1.709 -3.066 10.473 -5.236 5.589 1.03m-9.062 -66.228c-1.383 -2.442 -0.706 -4.883 -0.706 -4.883 4.53 -2.089 8.357 3.5 6.973 6.268 -1.383 2.794 -4.883 1.058 -6.268 -1.383m4.178 -111.593c-2.089 -4.883 -5.562 -9.062 -2.089 -12.209 1.655 -1.492 8.383 0 9.062 1.736 0.706 1.736 5.236 10.445 3.5 12.534 -1.736 2.143 -8.383 2.822 -10.473 -2.062m-9.062 -52.283c1.004 -1.981 9.062 4.883 6.621 8.03 -2.442 3.121 -8.357 -4.558 -6.621 -8.03m37.306 143.283c-1.736 0.706 -10.798 2.089 -11.504 -1.736 0.055 0.298 9.415 -8.736 11.504 -8.357 3.826 0.678 1.736 9.415 0 10.093m0 -44.604c0 2.089 1.058 5.915 -4.178 5.236 -5.236 -0.706 -9.415 -2.089 -9.062 -5.236s3.853 -4.178 6.973 -4.178 6.973 -5.589 8.709 -3.147 -2.442 5.209 -2.442 7.326m11.151 -63.109c1.383 4.178 3.5 4.883 0.353 8.357s4.178 8.709 -1.736 10.121c-5.915 1.383 -7.326 -5.942 -12.562 -6.268 -5.236 -0.353 -13.24 -2.089 -13.24 -5.915s-6.621 -5.942 -4.53 -11.151c0.923 -2.279 9.768 0.706 11.151 -1.383s4.53 -1.736 5.236 2.794 3.853 4.883 6.621 2.442c2.794 -2.496 7.326 -3.174 8.709 1.004m9.089 55.783c3.121 -0.353 4.178 -5.915 8.03 -5.236 3.826 0.706 4.883 -10.121 9.415 -5.589s-6.973 6.621 -7.326 13.945 -9.062 5.589 -10.473 2.794c-1.383 -2.794 -3.473 -4.53 -5.915 -1.03s-8.709 4.53 -6.973 -0.353 1.736 -6.268 1.736 -6.268c0.706 -2.089 -2.794 -5.915 1.058 -6.621 3.798 -0.706 7.298 8.709 10.445 8.357m-2.47 -38.717c2.253 -3.391 9.062 -1.736 13.24 -1.383s4.53 5.236 2.089 7.326 -0.706 11.151 -6.268 8.383c-5.562 -2.822 -14.624 -5.942 -9.062 -14.326m-6.945 81.938c1.085 -1.357 6.973 1.058 8.357 0.706 1.411 -0.353 0.706 6.621 -1.736 8.03 -2.442 1.383 -7.326 2.442 -7.326 0.353 0 -2.117 -0.706 -7.326 0.706 -9.089m1.736 59.636c0 3.147 -6.268 2.442 -7.326 0.353 0 0 7.326 -3.5 7.326 -0.353m-0.706 -11.857c0 -5.942 -8.004 3.853 -5.236 -6.268 0.678 -2.415 4.883 -0.706 7.326 -5.236s4.883 -3.826 8.357 -1.383c3.5 2.442 8.709 5.915 7.326 8.709s4.53 12.209 2.442 14.298 -11.151 0 -12.562 -3.121c-1.383 -3.174 -7.651 -1.085 -7.651 -7m27.864 -69.511s-2.551 9.632 -6.647 7.353c-4.096 -2.253 2.876 -7.841 6.647 -7.353m3.5 -5.453c2.089 -1.383 6.621 -4.883 6.973 -2.442s0 4.883 -1.736 7.678 -5.915 3.473 -7.326 1.058c-1.383 -2.47 2.089 -6.294 2.089 -6.294m5.236 -27.891c2.794 -1.03 8.357 -1.03 6.621 1.736 -1.736 2.794 -5.236 9.062 -8.03 5.915 -2.768 -3.121 1.411 -7.651 1.411 -7.651m-91 72.17c-2.089 1.058 -2.089 -4.178 -2.089 -4.178 1.411 -0.353 4.178 3.121 2.089 4.178m-24.039 -34.159c-3.826 2.442 -17.419 5.915 -17.772 -3.147 -0.109 -2.985 6.268 -4.178 12.209 -3.121 5.915 1.03 9.387 3.798 5.562 6.268M105.322 244.84c-1.736 4.53 -4.53 6.621 -7.326 4.178s-4.53 -1.736 -7.326 -3.121 3.826 -4.178 3.147 -5.942c-0.706 -1.736 1.058 -2.794 1.058 -2.794 3.473 -1.03 6.621 2.089 9.415 1.058s2.794 2.089 1.03 6.621m537.996 -44.957c-1.03 -5.942 -7.326 -10.445 -14.298 -2.089s-4.341 0.081 -11.151 3.473c-7.678 3.826 -9.062 1.383 -14.977 -3.147 -3.202 -2.442 -3.826 -16.034 -8.981 -8.817 -7.244 10.174 -5.236 -4.883 -8.466 -6.187 -6.973 -2.794 -11.857 2.089 -14.651 5.236s-12.562 1.736 -16.74 -5.589 3.147 -9.415 5.236 -5.915 9.768 -0.353 5.915 -5.589c-3.826 -5.236 13.945 -7.326 20.566 -9.768s0 -6.268 -5.589 -5.915 -8.709 1.058 -11.151 -5.589c-2.442 -6.621 -5.236 -4.883 -6.621 -3.473 -1.383 1.383 -3.473 6.621 -11.151 0.706s2.794 -9.062 6.268 -5.915 5.236 -8.709 11.151 -8.357 14.298 3.473 20.213 3.147c5.942 -0.353 9.415 3.826 2.442 4.883 -6.973 1.03 -5.236 7.326 -2.089 9.062s8.357 -7.326 13.24 -3.826 10.121 -1.383 18.477 2.794 8.357 1.058 12.209 -0.706c3.826 -1.736 9.062 -3.473 8.709 -8.004s-9.062 0 -13.24 -8.03c-2.659 -5.074 -8.709 -2.794 -14.977 -1.736s-9.415 7.326 -11.857 2.442 15.683 -11.151 16.74 -15.683 -3.5 1.383 -5.236 -4.53 -5.589 -4.178 -11.151 -3.826c-5.589 0.353 -8.357 -4.883 -12.534 -5.236s-7.326 7.326 -14.651 6.973 -4.883 -6.621 -9.415 -11.151 1.058 -11.151 5.236 -2.442 5.589 4.53 9.415 2.089c3.853 -2.442 7.678 -6.268 14.298 -0.353s5.562 1.058 9.768 -1.058c4.178 -2.089 5.236 -6.621 2.442 -6.621s-16.387 -2.089 -9.062 -5.589c5.372 -2.551 4.178 -3.989 0.515 -7.081 -2.523 -2.117 -5.291 -1.166 -4.694 -4.096 0.272 -1.302 -4.096 -6.077 -7.272 -5.481s-10.717 2.822 -9.794 -6.376c0.706 -6.973 -2.577 -0.949 -6.104 -1.383s-6.621 7.136 -8.547 0.353c-2.279 -8.113 -11.423 2.306 -11.883 1.872 -0.732 -0.706 -1.709 5.915 -5.97 5.345 -4.287 -0.596 -10.989 7.76 -9.904 2.279s-2.387 0.136 -3.609 0.272c-6.268 0.706 -14.298 4.883 -2.442 12.887 11.857 8.03 0.353 7.326 -6.621 9.062s-3.5 7.326 -0.706 10.473 -2.089 11.151 -5.589 3.5c-3.473 -7.678 -5.589 -3.147 -10.121 0.353 -4.53 3.473 -2.794 -4.53 -0.706 -4.53s2.794 0.353 5.942 -9.062 -15.33 -20.566 -16.034 -26.86c-0.706 -6.268 -4.53 -11.504 -8.357 -8.357s-6.621 1.736 -10.798 -3.147 -5.589 2.794 -8.03 2.089 -7.678 -0.706 -13.24 3.5c-14.596 10.961 3.826 8.709 6.621 11.857 6.294 7.081 -1.736 9.768 -5.589 5.236 -3.826 -4.53 -4.883 -1.03 -7.326 -0.706 -2.442 0.353 -5.942 -1.736 -8.357 -4.178 -2.442 -2.442 -6.621 -6.268 -10.121 -1.383 -3.473 4.883 -7.298 2.442 -13.945 -4.178 -6.621 -6.621 -7.651 -1.736 -8.709 2.442 -1.03 4.178 -9.768 3.473 -12.562 4.178s-9.415 10.798 -15.683 -2.089 5.589 -13.24 13.24 -11.504c7.678 1.736 1.736 -10.121 12.562 -9.415 10.798 0.706 3.5 2.794 13.593 6.268 10.121 3.5 5.236 -6.621 12.915 -5.915s3.473 -5.589 13.593 -11.504c5.996 -3.5 -8.709 -8.709 -16.387 -6.973s-8.357 -1.736 -12.915 -4.178c-4.53 -2.442 -10.121 -3.147 -13.945 0.706 -9.768 9.768 -9.415 0.353 -9.415 -4.178s-14.977 -12.887 -22.302 -13.945 -20.213 12.887 -24.066 8.357c-3.826 -4.53 -8.357 -1.03 -17.772 0 -9.415 1.058 -4.883 4.53 -0.353 8.383 4.53 3.826 -2.794 4.178 -6.621 3.473s-7.298 4.53 2.794 6.973c10.121 2.442 1.736 5.589 -2.089 5.589s-9.415 3.5 -14.977 10.473c-5.589 6.973 -9.415 5.236 -15.683 3.826 -6.268 -1.383 0 -13.945 3.5 -13.24 3.473 0.706 13.593 -5.589 11.151 -12.209s-2.442 -4.883 5.236 -10.445c7.678 -5.589 0 -10.121 -3.473 -11.504 -3.5 -1.383 -9.768 6.268 -13.24 2.089s-6.973 -4.178 -11.151 -4.178 -3.717 7.109 -9.062 2.089c-1.383 -1.302 -3.039 -2.306 -4.883 -3.066s-5.1 -3.609 -5.996 -1.628c-2.008 4.368 -7.57 -10.636 -8.275 0.162 -0.19 2.985 -3.826 1.058 -5.236 -0.706 -1.981 -2.47 -5.589 2.089 -7.868 1.492 -4.07 -1.085 -6.485 3.039 -8.519 2.36 -3.147 -1.058 -11.747 -9.279 -15.683 -1.058 -3.826 8.03 6.268 2.794 5.236 8.03 -1.058 5.236 4.883 8.709 1.736 12.209s-14.977 5.589 -22.655 -0.353c-7.678 -5.915 -11.504 5.236 -12.915 11.151 -1.383 5.942 11.151 4.53 12.915 8.03 1.736 3.473 14.651 -2.442 23.36 1.383 8.709 3.853 -7.326 3.5 -8.03 6.621 -0.678 3.147 7.326 -0.706 9.415 4.178s5.589 0 11.151 4.53c5.589 4.53 10.121 1.058 15.004 -1.383s11.151 3.473 10.473 6.973c-0.706 3.473 -4.53 2.442 -7.678 5.915 -3.121 3.5 -7.678 -5.915 -12.562 1.736 -4.883 7.678 9.415 0.353 11.504 4.883s6.621 3.826 7.678 5.562 -7.326 7.326 -12.209 9.768 -8.709 5.236 -17.093 3.826c-8.357 -1.383 4.178 -12.209 -6.268 -13.24 -3.147 -0.326 -10.798 -2.794 -10.121 -7.326 0.706 -4.53 -14.298 -19.86 -18.477 -23.36s1.058 13.593 -4.883 13.24c-5.915 -0.353 -13.593 -12.209 -24.066 -19.534 -4.938 -3.445 -10.121 -1.058 -14.596 -2.632 -2.415 -0.841 -6.511 4.721 -7.162 2.117 -2.632 -10.662 -5.753 2.93 -7.515 1.547 -2.687 -2.143 -4.043 4.151 -7.326 1.736 -2.659 -1.953 -2.957 4.423 -3.473 9.768 -1.03 10.473 -5.589 4.178 -16.387 5.915s-10.798 13.593 -10.121 17.772c0.706 4.178 -1.736 7.678 -8.004 5.236s0.353 -7.678 -5.236 -9.768 -18.83 14.651 -18.83 18.477 10.473 -2.089 16.387 6.621c3.5 5.128 14.298 -1.058 18.124 2.794 3.826 3.826 15.004 -4.53 18.124 -8.357 3.147 -3.826 10.121 -4.53 15.004 -5.236s5.589 8.03 5.589 10.826 9.062 0.706 5.942 9.062c-1.33 3.5 -5.236 2.794 -19.86 3.826 -14.651 1.058 3.147 5.589 2.442 9.062 -0.706 3.5 -13.593 2.089 -17.093 6.268 -3.473 4.178 11.504 13.24 16.74 15.33s18.83 -9.768 21.977 -6.268 4.883 9.062 10.445 13.593c5.589 4.53 8.03 5.589 0 13.593 -8.194 8.004 -21.109 -2.117 -21.109 -2.117 -8.357 -1.736 -12.887 -6.268 -17.772 1.058 -3.011 4.53 -1.383 11.151 -5.589 14.298 -4.178 3.147 -7.624 -5.942 -13.945 -5.236 -11.775 1.302 -11.232 -9.659 -16.74 -11.504 -3.473 -1.166 -15.085 10.473 -14.651 -2.904 0.543 -16.17 -8.574 0.136 -11.504 -2.306 -6.539 -5.481 -11.232 7.326 -14.353 -1.574 -1.221 -3.445 -7 1.519 -9.36 2.985 -5.589 3.473 0 13.945 -5.915 14.298s-4.178 3.473 -8.357 7.326c-4.178 3.826 0 8.357 -2.442 10.121 -2.442 1.736 -1.981 7.162 -0.706 8.03 3.147 2.089 3.826 -10.445 7.678 -2.089s-9.415 10.473 -11.504 7.326 -4.883 -12.209 -6.973 -3.147c-1.655 7.217 -10.798 9.768 -10.121 13.24 1.357 6.783 10.121 1.058 16.034 -1.058 5.942 -2.089 5.589 8.709 5.589 15.683s8.03 4.883 10.121 6.621 5.236 4.178 9.062 4.53 7.678 -6.621 0.353 -7.678c-7.326 -1.03 0 -6.268 -8.357 -5.589 -8.357 0.706 -3.473 -7.326 -1.383 -4.883s9.768 0.706 16.034 1.736c6.268 1.058 7.678 10.121 13.24 9.768 2.794 -0.162 6.268 -0.706 6.621 3.147s-3.147 9.768 -1.03 10.473c1.357 0.461 2.089 -6.268 7.326 -8.03 5.236 -1.736 3.853 7.678 4.883 12.915s-5.236 0.706 -5.942 8.03 3.853 4.53 7.678 1.736c10.473 -7.596 7.326 4.883 12.887 5.589 10.527 1.302 8.004 -6.621 14.298 -8.03 6.268 -1.383 9.768 -3.473 12.887 -6.268 3.147 -2.794 9.415 -3.473 15.33 2.089 5.915 5.589 8.03 6.621 12.562 4.53 6.051 -2.794 4.883 4.883 2.442 7.678s-16.74 2.089 -24.419 1.058c-7.651 -1.058 -13.24 5.942 -9.415 6.621 3.826 0.706 9.415 4.178 4.883 6.268s-3.473 6.268 -8.004 5.915 -9.415 -10.445 -14.651 1.411 9.062 19.534 20.213 15.33c11.151 -4.178 14.651 -0.353 16.034 3.826s14.651 7.489 14.651 7.489c6.268 13.593 -5.753 2.604 -9.415 1.574s-7.841 7.326 -15.683 6.268 -10.445 2.632 -8.357 4.178c2.089 1.574 6.294 5.753 0 8.357 -6.268 2.604 -3.147 9.93 -6.268 13.077 -3.147 3.147 -1.574 8.383 4.178 8.383s19.887 -1.03 21.977 2.604c2.089 3.662 16.74 0 16.74 0 14.136 0 -1.03 8.357 0.515 12.562 1.574 4.178 29.817 -1.058 35.57 2.604s-1.03 12.019 2.632 14.109 11.504 -7.326 7.326 -14.651 2.604 -4.178 1.058 -10.989c-1.574 -6.783 14.109 -10.989 21.434 -9.93s12.562 -1.574 11.504 6.268 7.841 1.574 12.019 3.147 4.178 -5.753 -0.515 -8.9c-4.694 -3.121 4.178 -7.841 6.81 -9.415 2.604 -1.574 -6.268 -4.694 8.9 -10.473 15.166 -5.753 26.67 1.574 37.659 9.415s6.268 29.302 3.147 42.353c-3.147 13.077 -9.442 21.706 -13.077 28.244 -5.453 9.768 -12.86 14.19 -25.911 16.198 -104.485 9.117 -144.07 38.202 -144.07 38.202s78.953 -33.996 217.027 -33.996c102.124 0 204.411 33.996 204.411 33.996s-51.74 -26.698 -146.187 -38.391c-4.966 -3.473 -5.643 -4.883 -6.268 -7.76 -0.706 -3.147 -7.678 -7.19 -12.915 -14.162 -5.209 -6.973 -3.826 -17.772 0.353 -27.187s7.326 -24.066 16.387 -27.891 6.621 -8.709 9.062 -10.798 8.03 -8.004 11.151 -1.058c3.147 6.973 -4.53 0.353 -10.445 5.236 -5.942 4.883 4.883 3.853 6.621 8.709 1.736 4.883 8.357 4.883 11.504 4.178s5.589 1.058 3.5 4.178c-2.089 3.147 -3.826 4.883 -2.794 8.709 1.058 3.826 7.326 2.794 10.798 -0.706s2.089 -4.178 5.589 -1.058c3.5 3.147 2.794 -3.5 7.678 -4.883 4.883 -1.411 2.794 -3.147 4.53 -5.942 1.764 -2.794 6.621 -2.442 9.415 -0.353s0.706 8.383 2.442 3.853 5.942 -0.706 5.942 -0.706c4.53 5.589 5.589 -2.794 11.504 -1.736 10.364 1.817 9.415 -1.03 14.651 -3.121s5.589 -3.5 8.709 2.089c3.147 5.589 2.794 3.5 12.562 3.853s17.093 -11.151 20.213 -15.33c3.147 -4.178 6.621 -3.826 3.853 -12.915 -2.794 -9.062 -9.415 2.442 -12.209 -6.621s-10.445 -2.442 -12.887 -9.415 8.383 -2.794 11.504 -4.53c3.147 -1.736 6.268 7.326 10.826 6.973 4.53 -0.353 10.445 4.178 13.593 0.706s-3.473 -5.236 -6.621 -9.768 4.53 -4.53 7.678 -1.736 4.53 1.411 10.798 1.736c6.294 0.353 8.357 8.03 10.798 5.236s-4.883 -4.53 2.442 -9.415 6.973 -0.678 13.268 -0.353c6.268 0.353 6.973 -9.415 9.415 -14.298s1.383 -6.973 -3.147 -9.062 -5.915 2.089 -8.03 -4.53c-2.089 -6.621 -5.915 -7.678 -10.445 -5.915 -4.53 1.736 -14.651 -1.058 -14.298 -5.942s-8.709 -6.621 -14.298 -7.326 -11.151 -1.058 -12.209 -5.942c-1.03 -4.883 -3.473 -5.915 -9.062 -5.915s-7.326 1.736 -11.504 -3.826c-4.178 -5.589 -10.121 -3.147 -14.651 0.706 -4.53 3.826 -2.089 8.03 -7.326 9.415 -5.236 1.411 -6.621 -6.973 -1.736 -10.798s7.326 -2.442 4.53 -6.973 0 -3.147 2.442 -7.678 7.326 -1.383 7.678 3.826c0.353 5.236 8.709 2.794 12.562 2.442 3.826 -0.353 9.062 -2.442 9.768 2.089s5.236 3.147 12.562 0.353 15.004 5.942 17.772 6.621c2.794 0.706 1.736 -4.53 5.915 -8.709 3.256 -3.228 -3.121 -1.736 -4.883 -6.973 -1.736 -5.236 3.473 -5.915 10.473 -1.058 6.973 4.883 3.826 9.062 7.678 10.826 3.826 1.736 8.709 7.326 16.034 0s7.326 -1.383 14.651 -5.942c7.326 -4.53 14.651 0 17.772 -4.53 3.147 -4.53 3.5 -3.826 13.24 0 9.768 3.826 6.268 -2.794 5.942 -16.034 -0.353 -13.24 5.589 -7.326 5.589 -12.209s-4.694 -1.383 -5.725 -7.298"})}),(0,He.jsx)("clipPath",{id:"clip-path",children:(0,He.jsx)("path",{className:"circle-mask",fill:"#E73E0D",d:"M629.482 195.905c-6.983 8.397 -4.353 0.078 -11.171 3.5 -7.673 3.85 -9.073 1.4 -15.001 -3.153 -3.202 -2.453 -3.842 -16.106 -8.987 -8.854 -7.249 10.223 -5.247 -4.914 -8.463 -6.202 -6.973 -2.797 -11.859 2.1 -14.657 5.256 -2.786 3.153 -12.559 1.75 -16.745 -5.606s3.142 -9.456 5.242 -5.95c2.089 3.506 9.768 -0.35 5.93 -5.606 -3.842 -5.25 13.954 -7.344 20.58 -9.803 6.63 -2.45 0 -6.303 -5.583 -5.95 -5.58 0.344 -8.723 1.053 -11.159 -5.606 -2.442 -6.647 -5.236 -4.897 -6.633 -3.494 -1.4 1.394 -3.486 6.647 -11.159 0.697s2.786 -9.106 6.278 -5.95c3.48 3.15 5.23 -8.761 11.165 -8.403 5.93 0.344 14.304 3.494 20.233 3.147 5.933 -0.35 9.428 3.85 2.442 4.903 -6.973 1.05 -5.23 7.35 -2.092 9.1s8.373 -7.353 13.259 -3.85c4.894 3.5 10.121 -1.4 18.495 2.803 8.373 4.2 8.373 1.047 12.215 -0.7 3.83 -1.747 9.073 -3.5 8.718 -8.053 -0.347 -4.553 -9.076 0 -13.262 -8.058 -2.647 -5.09 -8.721 -2.797 -14.998 -1.75 -6.273 1.053 -9.421 7.356 -11.862 2.456 -2.444 -4.908 15.69 -11.206 16.745 -15.758 1.047 -4.556 -3.492 1.4 -5.23 -4.556 -1.744 -5.95 -5.586 -4.197 -11.171 -3.85 -5.58 0.35 -8.373 -4.897 -12.559 -5.253 -4.186 -0.347 -7.323 7.353 -14.651 7.003 -7.328 -0.344 -4.886 -6.647 -9.423 -11.206 -4.542 -4.547 1.05 -11.206 5.23 -2.447 4.192 8.75 5.586 4.547 9.423 2.1 3.842 -2.45 7.678 -6.303 14.309 -0.35 6.626 5.95 5.576 1.053 9.771 -1.056 4.186 -2.1 5.233 -6.647 2.439 -6.647 -2.786 0 -16.395 -2.1 -9.076 -5.606 5.386 -2.575 4.178 -4.012 0.518 -7.104 -2.513 -2.122 -5.291 -1.172 -4.704 -4.102 0.274 -1.31 -4.091 -6.104 -7.283 -5.502 -3.182 0.605 -10.728 2.843 -9.814 -6.406 0.7 -7.003 -2.58 -0.949 -6.107 -1.394 -3.527 -0.451 -6.623 7.179 -8.544 0.347 -2.29 -8.151 -11.434 2.317 -11.886 1.872 -0.741 -0.706 -1.701 5.95 -5.982 5.369 -4.292 -0.589 -10.991 7.79 -9.904 2.288 1.079 -5.505 -2.395 0.139 -3.627 0.277 -6.283 0.697 -14.312 4.897 -2.444 12.95 11.865 8.058 0.35 7.356 -6.626 9.106 -6.98 1.753 -3.494 7.356 -0.7 10.506 2.789 3.153 -2.092 11.206 -5.583 3.506 -3.486 -7.706 -5.586 -3.15 -10.118 0.35 -4.542 3.5 -2.789 -4.553 -0.7 -4.553 2.092 0 2.792 0.35 5.933 -9.1 3.136 -9.456 -15.357 -20.661 -16.051 -26.964 -0.7 -6.306 -4.53 -11.561 -8.373 -8.408 -3.844 3.153 -6.63 1.75 -10.818 -3.156 -4.186 -4.897 -5.586 2.803 -8.028 2.106 -2.439 -0.7 -7.673 -0.7 -13.259 3.506 -14.608 10.994 3.842 8.75 6.633 11.903 6.306 7.119 -1.747 9.808 -5.586 5.25 -3.836 -4.553 -4.886 -1.047 -7.323 -0.697 -2.442 0.347 -5.936 -1.756 -8.373 -4.2 -2.442 -2.456 -6.633 -6.303 -10.126 -1.406 -3.48 4.897 -7.318 2.45 -13.957 -4.2 -6.621 -6.647 -7.668 -1.75 -8.721 2.453 -1.047 4.2 -9.771 3.5 -12.562 4.2 -2.786 0.703 -9.418 10.853 -15.704 -2.1 -6.276 -12.956 5.589 -13.306 13.259 -11.556 7.678 1.75 1.744 -10.153 12.562 -9.456 10.818 0.708 3.497 2.808 13.607 6.306 10.126 3.506 5.242 -6.653 12.915 -5.95 7.673 0.697 3.486 -5.606 13.609 -11.558 5.993 -3.529 -8.723 -8.753 -16.395 -7.003 -7.683 1.75 -8.373 -1.75 -12.915 -4.203 -4.533 -2.45 -10.118 -3.153 -13.957 0.697 -9.778 9.817 -9.426 0.353 -9.426 -4.203 0 -4.547 -15.001 -12.95 -22.324 -14.003 -7.33 -1.053 -20.24 12.956 -24.083 8.403 -3.836 -4.55 -8.373 -1.047 -17.79 0 -9.428 1.056 -4.883 4.553 -0.35 8.408 4.536 3.844 -2.792 4.203 -6.633 3.494 -3.833 -0.697 -7.321 4.558 2.797 7.006 10.118 2.45 1.744 5.606 -2.097 5.606s-9.418 3.506 -15.001 10.506c-5.589 7.003 -9.421 5.256 -15.704 3.85 -6.273 -1.4 0 -14.006 3.494 -13.303 3.486 0.697 13.609 -5.608 11.165 -12.258 -2.442 -6.653 -2.442 -4.897 5.233 -10.503 7.673 -5.6 0 -10.153 -3.486 -11.556 -3.494 -1.4 -9.773 6.3 -13.259 2.1s-6.973 -4.2 -11.162 -4.2c-4.186 0 -3.731 7.133 -9.078 2.1 -1.394 -1.316 -3.049 -2.317 -4.892 -3.084s-5.103 -3.613 -6.01 -1.641c-2.008 4.379 -7.589 -10.682 -8.289 0.171 -0.193 2.988 -3.836 1.053 -5.23 -0.7 -1.987 -2.477 -5.58 2.1 -7.876 1.487 -4.073 -1.093 -6.482 3.049 -8.525 2.369 -3.142 -1.053 -11.761 -9.323 -15.704 -1.053 -3.836 8.056 6.278 2.803 5.236 8.056 -1.05 5.25 4.886 8.75 1.744 12.253 -3.144 3.506 -15.004 5.606 -22.677 -0.35 -7.678 -5.95 -11.518 5.25 -12.915 11.2 -1.4 5.956 11.168 4.558 12.915 8.061 1.744 3.494 14.648 -2.453 23.377 1.394 8.718 3.856 -7.328 3.506 -8.028 6.658 -0.689 3.15 7.328 -0.706 9.418 4.2 2.1 4.897 5.592 0 11.171 4.547 5.58 4.558 10.118 1.053 15.004 -1.394 4.883 -2.456 11.168 3.494 10.473 7 -0.697 3.5 -4.542 2.447 -7.68 5.95 -3.136 3.506 -7.678 -5.95 -12.562 1.75 -4.88 7.706 9.426 0.35 11.515 4.908 2.092 4.547 6.628 3.844 7.678 5.594 1.05 1.753 -7.328 7.353 -12.209 9.811 -4.886 2.447 -8.728 5.25 -17.101 3.85 -8.371 -1.403 4.186 -12.258 -6.283 -13.306 -3.142 -0.321 -10.809 -2.803 -10.115 -7.356 0.697 -4.558 -14.304 -19.958 -18.49 -23.458 -4.186 -3.506 1.047 13.658 -4.886 13.306 -5.93 -0.356 -13.604 -12.258 -24.077 -19.608 -4.938 -3.476 -10.118 -1.056 -14.619 -2.635 -2.423 -0.854 -6.525 4.747 -7.171 2.135 -2.635 -10.706 -5.771 2.953 -7.515 1.55 -2.689 -2.155 -4.059 4.162 -7.33 1.75 -2.67 -1.961 -2.954 4.428 -3.486 9.808 -1.042 10.506 -5.578 4.2 -16.398 5.95s-10.818 13.658 -10.118 17.858 -1.744 7.7 -8.026 5.25c-6.283 -2.447 0.353 -7.7 -5.236 -9.8 -5.583 -2.1 -18.843 14.708 -18.843 18.561 0 3.844 10.471 -2.1 16.401 6.653 3.492 5.149 14.304 -1.053 18.145 2.797 3.836 3.85 15.001 -4.553 18.145 -8.406 3.136 -3.85 10.118 -4.553 15.001 -5.256 4.889 -0.697 5.58 8.053 5.58 10.858 0 2.797 9.078 0.697 5.936 9.106 -1.324 3.524 -5.242 2.797 -19.89 3.85 -14.657 1.05 3.144 5.6 2.444 9.1 -0.7 3.506 -13.615 2.1 -17.101 6.303 -3.489 4.206 11.515 13.306 16.751 15.406 5.226 2.1 18.84 -9.803 21.983 -6.303 3.142 3.506 4.886 9.103 10.465 13.658 5.58 4.558 8.026 5.6 0 13.656 -8.026 8.053 -20.937 -2.1 -20.937 -2.1 -8.371 -1.756 -12.909 -6.303 -17.79 1.053 -3.023 4.547 -1.397 11.2 -5.583 14.356 -4.186 3.153 -7.63 -5.958 -13.954 -5.256 -11.775 1.316 -11.252 -9.71 -16.751 -11.556 -3.476 -1.161 -15.11 10.522 -14.668 -2.927 0.538 -16.241 -8.571 0.15 -11.507 -2.323 -6.541 -5.516 -11.249 7.356 -14.353 -1.585 -1.212 -3.471 -7.014 1.513 -9.369 2.985 -5.583 3.5 0 14.008 -5.93 14.358 -5.928 0.353 -4.186 3.497 -8.373 7.356 -4.186 3.847 0 8.403 -2.45 10.153 -2.436 1.75 -1.994 7.182 -0.694 8.053 3.144 2.1 3.839 -10.506 7.676 -2.1 3.842 8.403 -9.418 10.506 -11.515 7.356 -2.089 -3.156 -4.876 -12.258 -6.976 -3.156 -1.666 7.237 -10.815 9.808 -10.123 13.306 1.365 6.812 10.123 1.05 16.054 -1.053 5.933 -2.1 5.58 8.761 5.58 15.758 0 7.006 8.033 4.903 10.121 6.653 2.092 1.753 5.23 4.2 9.073 4.556 3.83 0.35 7.673 -6.656 0.344 -7.708 -7.323 -1.042 0 -6.297 -8.373 -5.6s-3.486 -7.35 -1.389 -4.9c2.089 2.447 9.762 0.697 16.045 1.75 6.28 1.047 7.676 10.153 13.259 9.803 2.808 -0.174 6.28 -0.706 6.63 3.147 0.344 3.858 -3.144 9.806 -1.044 10.508 1.359 0.456 2.089 -6.306 7.321 -8.056 5.242 -1.747 3.842 7.706 4.892 12.956 1.039 5.253 -5.236 0.706 -5.936 8.056 -0.694 7.356 3.842 4.553 7.678 1.75 10.476 -7.64 7.328 4.906 12.909 5.606 10.529 1.319 8.018 -6.656 14.304 -8.058 6.283 -1.4 9.771 -3.5 12.909 -6.303s9.423 -3.497 15.351 2.103 8.026 6.65 12.568 4.553c6.051 -2.803 4.878 4.903 2.436 7.706 -2.436 2.803 -16.743 2.094 -24.424 1.05 -7.668 -1.05 -13.254 5.953 -9.412 6.65 3.83 0.706 9.412 4.203 4.876 6.306 -4.53 2.097 -3.486 6.297 -8.021 5.947 -4.536 -0.353 -9.428 -10.506 -14.657 1.403 -5.228 11.906 9.073 19.611 20.237 15.411s14.654 -0.356 16.054 3.847c1.394 4.203 14.651 7.529 14.651 7.529 6.28 13.656 -5.757 2.624 -9.423 1.571 -3.665 -1.05 -7.853 7.361 -15.701 6.308 -7.853 -1.056 -10.468 2.629 -8.373 4.203s6.286 5.771 0 8.403c-6.278 2.624 -3.136 9.979 -6.278 13.129 -3.136 3.153 -1.571 8.408 4.183 8.408s3.665 111.875 3.665 111.875h421.761s-9.167 -116.602 -6.037 -120.802c3.142 -4.203 6.633 -3.858 3.842 -12.961s-9.423 2.453 -12.215 -6.65 -10.471 -2.453 -12.912 -9.45c-2.439 -7.006 8.378 -2.794 11.515 -4.556 3.139 -1.75 6.283 7.35 10.821 7.006 4.53 -0.35 10.462 4.197 13.607 0.7 3.139 -3.503 -3.489 -5.253 -6.628 -9.808 -3.144 -4.547 4.536 -4.547 7.676 -1.75 3.139 2.803 4.539 1.406 10.812 1.75 6.283 0.356 8.373 8.056 10.815 5.253 2.442 -2.794 -4.88 -4.544 2.442 -9.453 7.328 -4.9 6.978 -0.694 13.265 -0.344 6.278 0.344 6.973 -9.453 9.423 -14.356 2.442 -4.908 1.389 -7.011 -3.142 -9.103 -4.542 -2.1 -5.93 2.092 -8.028 -4.553 -2.089 -6.661 -5.93 -7.706 -10.462 -5.95 -4.539 1.75 -14.654 -1.056 -14.309 -5.956 0.353 -4.906 -8.721 -6.656 -14.301 -7.35 -5.583 -0.703 -11.165 -1.056 -12.215 -5.956 -1.05 -4.906 -3.486 -5.95 -9.068 -5.95 -5.586 0 -7.326 1.75 -11.515 -3.853s-10.126 -3.153 -14.657 0.7c-4.536 3.85 -2.092 8.053 -7.328 9.453 -5.23 1.406 -6.628 -7.006 -1.742 -10.853 4.883 -3.856 7.326 -2.45 4.533 -7.006s0 -3.153 2.442 -7.7c2.436 -4.55 7.323 -1.403 7.678 3.85 0.347 5.25 8.723 2.797 12.562 2.45 3.83 -0.35 9.073 -2.45 9.773 2.1 0.694 4.553 5.23 3.153 12.562 0.347 7.323 -2.797 15.001 5.956 17.79 6.656 2.797 0.7 1.744 -4.556 5.93 -8.758 3.254 -3.254 -3.133 -1.753 -4.88 -7 -1.75 -5.256 3.48 -5.953 10.465 -1.053 6.978 4.903 3.836 9.103 7.673 10.858 3.842 1.75 8.728 7.35 16.045 0 7.328 -7.353 7.328 -1.406 14.657 -5.956 7.328 -4.553 14.657 0 17.795 -4.553s3.494 -3.85 13.262 0 6.278 -2.797 5.936 -16.108c-0.35 -13.306 5.583 -7.35 5.583 -12.253s-4.536 -1.397 -5.58 -7.347c-1.056 -5.964 -7.339 -10.511 -14.315 -2.108"})})]})),(0,He.jsx)("div",{style:Je,children:(0,He.jsx)(qe.cU,{words:["Ujjawal Shrivastava"],loop:!0,cursor:!0,cursorStyle:"_",typeSpeed:90,deleteSpeed:45,delaySpeed:1e3})})]});var et=__webpack_require__(8613),tt=__webpack_require__.n(et),it=__webpack_require__(7950),nt=__webpack_require__.t(it,2);function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},rt.apply(this,arguments)}function at(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const st=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ot=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(ine){}const lt=t.createContext({isTransitioning:!1});new Map;const ct=i.startTransition;nt.flushSync,i.useId;function ht(e){let{basename:i,children:n,future:r,window:a}=e,s=t.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),d(function(e,t){let{pathname:i,search:n,hash:r}=e.location;return c("",{pathname:i,search:n,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,o)));let l=s.current,[u,p]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=t.useCallback(e=>{f&&ct?ct(()=>p(e)):p(e)},[p,f]);return t.useLayoutEffect(()=>l.listen(m),[l,m]),t.useEffect(()=>de(r),[r]),t.createElement(me,{basename:i,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const ut="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,dt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=t.forwardRef(function(e,i){let n,{onClick:r,relative:a,reloadDocument:o,replace:l,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f}=e,m=at(e,st),{basename:g}=t.useContext(H),v=!1;if("string"===typeof d&&dt.test(d)&&(n=d,ut))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),i=P(t.pathname,g);t.origin===e.origin&&null!=i?d=i+t.search+t.hash:v=!0}catch(ine){}let y=function(e,i){let{relative:n}=void 0===i?{}:i;X()||s(!1);let{basename:r,navigator:a}=t.useContext(H),{hash:o,pathname:l,search:c}=$(e,{relative:n}),h=l;return"/"!==r&&(h="/"===l?r:R([r,l])),a.createHref({pathname:h,search:c,hash:o})}(d,{relative:a}),b=function(e,i){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=void 0===i?{}:i,c=Z(),u=Q(),d=$(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let i=void 0!==r?r:h(u)===h(d);c(e,{replace:i,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,s,o,l])}(d,{replace:l,state:c,target:u,preventScrollReset:p,relative:a,viewTransition:f});return t.createElement("a",rt({},m,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:i,target:u}))});const ft=t.forwardRef(function(e,i){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:h,children:u}=e,d=at(e,ot),p=$(c,{relative:d.relative}),f=Q(),m=t.useContext(W),{navigator:g,basename:v}=t.useContext(H),y=null!=m&&function(e,i){void 0===i&&(i={});let n=t.useContext(lt);null==n&&s(!1);let{basename:r}=vt(mt.useViewTransitionState),a=$(e,{relative:i.relative});if(!n.isTransitioning)return!1;let o=P(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=P(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=M(a.pathname,l)||null!=M(a.pathname,o)}(p)&&!0===h,b=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,x=f.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&v&&(w=P(w,v)||w);const A="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,_=x===b||!o&&x.startsWith(b)&&"/"===x.charAt(A),E=null!=w&&(w===b||!o&&w.startsWith(b)&&"/"===w.charAt(b.length)),C={isActive:_,isPending:E,isTransitioning:y},T=_?n:void 0;S="function"===typeof a?a(C):[a,_?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let D="function"===typeof l?l(C):l;return t.createElement(pt,rt({},d,{"aria-current":T,className:S,ref:i,style:D,to:c,viewTransition:h}),"function"===typeof u?u(C):u)});var mt,gt;function vt(e){let i=t.useContext(V);return i||s(!1),i}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(mt||(mt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(gt||(gt={}));function yt(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy(function(){return e(...arguments)},{get:(i,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}function bt(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const xt=e=>Array.isArray(e);function wt(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function At(e){return"string"===typeof e||Array.isArray(e)}function St(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function _t(e,t,i,n){if("function"===typeof t){const[r,a]=St(n);t=t(void 0!==i?i:e.custom,r,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,a]=St(n);t=t(void 0!==i?i:e.custom,r,a)}return t}function Et(e,t,i){const n=e.getProps();return _t(n,t,void 0!==i?i:n.custom,e)}const Ct=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mt=["initial",...Ct];function Tt(e){let t;return()=>(void 0===t&&(t=e()),t)}const Pt=Tt(()=>void 0!==window.ScrollTimeline);class Dt{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(i=>Pt()&&i.attachTimeline?i.attachTimeline(e):"function"===typeof t?t(i):void 0);return()=>{i.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ot extends Dt{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function kt(e,t){return e?e[t]||e.default||e:void 0}const It=2e4;function Rt(e){let t=0;let i=e.next(t);for(;!i.done&&t<It;)t+=50,i=e.next(t);return t>=It?1/0:t}function Lt(e){return"function"===typeof e}function zt(e,t){e.timeline=t,e.onfinish=null}const Bt=e=>Array.isArray(e)&&"number"===typeof e[0],jt={linearEasing:void 0};function Ft(e,t){const i=Tt(e);return()=>{var e;return null!==(e=jt[t])&&void 0!==e?e:i()}}const Nt=Ft(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(ine){return!1}return!0},"linearEasing"),Ut=(e,t,i)=>{const n=t-e;return 0===n?1:(i-e)/n},Vt=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n="";const r=Math.max(Math.round(t/i),2);for(let a=0;a<r;a++)n+=e(Ut(0,r-1,a))+", ";return"linear(".concat(n.substring(0,n.length-2),")")};function Wt(e){return Boolean("function"===typeof e&&Nt()||!e||"string"===typeof e&&(e in Gt||Nt())||Bt(e)||Array.isArray(e)&&e.every(Wt))}const Ht=e=>{let[t,i,n,r]=e;return"cubic-bezier(".concat(t,", ").concat(i,", ").concat(n,", ").concat(r,")")},Gt={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ht([0,.65,.55,1]),circOut:Ht([.55,0,1,.45]),backIn:Ht([.31,.01,.66,-.59]),backOut:Ht([.33,1.53,.69,.99])};function qt(e,t){return e?"function"===typeof e&&Nt()?Vt(e,t):Bt(e)?Ht(e):Array.isArray(e)?e.map(e=>qt(e,t)||Gt.easeOut):Gt[e]:void 0}const Yt={x:!1,y:!1};function Xt(){return Yt.x||Yt.y}function Qt(e,t){const i=function(e,t,i){var n;if(e instanceof Element)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const a=null!==(n=null===i||void 0===i?void 0:i[e])&&void 0!==n?n:r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),n=new AbortController;return[i,(0,ye.A)((0,ye.A)({passive:!0},t),{},{signal:n.signal}),()=>n.abort()]}function Kt(e){return t=>{"touch"===t.pointerType||Xt()||e(t)}}const Zt=(e,t)=>!!t&&(e===t||Zt(e,t.parentElement)),Jt=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,$t=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ei=new WeakSet;function ti(e){return t=>{"Enter"===t.key&&e(t)}}function ii(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ni(e){return Jt(e)&&!Xt()}function ri(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,r,a]=Qt(e,i),s=e=>{const n=e.currentTarget;if(!ni(e)||ei.has(n))return;ei.add(n);const a=t(e),s=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),ni(e)&&ei.has(n)&&(ei.delete(n),"function"===typeof a&&a(e,{success:t}))},o=e=>{s(e,i.useGlobalTarget||Zt(n,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return n.forEach(e=>{(function(e){return $t.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(i.useGlobalTarget?window:e).addEventListener("pointerdown",s,r),e.addEventListener("focus",e=>((e,t)=>{const i=e.currentTarget;if(!i)return;const n=ti(()=>{if(ei.has(i))return;ii(i,"down");const e=ti(()=>{ii(i,"up")});i.addEventListener("keyup",e,t),i.addEventListener("blur",()=>ii(i,"cancel"),t)});i.addEventListener("keydown",n,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",n),t)})(e,r),r)}),a}const ai=e=>1e3*e,si=e=>e/1e3,oi=e=>e;const li=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ci=new Set(li),hi=new Set(["width","height","top","left","right","bottom",...li]),ui=e=>xt(e)?e[e.length-1]||0:e,di=!1,pi=!1;const fi=["read","resolveKeyframes","update","preRender","render","postRender"];function mi(e,t){let i=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>i=!0,s=fi.reduce((e,t)=>(e[t]=function(e){let t=new Set,i=new Set,n=!1,r=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(t){a.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:function(e){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?t:i;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),r.has(e)||r.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{s=e,n?r=!0:(n=!0,[t,i]=[i,t],t.forEach(o),t.clear(),n=!1,r&&(r=!1,l.process(e)))}};return l}(a),e),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:u,postRender:d}=s,p=()=>{const a=pi?r.timestamp:performance.now();i=!1,r.delta=n?1e3/60:Math.max(Math.min(a-r.timestamp,40),1),r.timestamp=a,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),u.process(r),d.process(r),r.isProcessing=!1,i&&t&&(n=!1,e(p))},f=fi.reduce((t,a)=>{const o=s[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||(i=!0,n=!0,r.isProcessing||e(p)),o.schedule(t,a,s)},t},{});return{schedule:f,cancel:e=>{for(let t=0;t<fi.length;t++)s[fi[t]].cancel(e)},state:r,steps:s}}const{schedule:gi,cancel:vi,state:yi,steps:bi}=mi("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:oi,!0);let xi;function wi(){xi=void 0}const Ai={now:()=>(void 0===xi&&Ai.set(yi.isProcessing||pi?yi.timestamp:performance.now()),xi),set:e=>{xi=e,queueMicrotask(wi)}};function Si(e,t){-1===e.indexOf(t)&&e.push(t)}function _i(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}class Ei{constructor(){this.subscriptions=[]}add(e){return Si(this.subscriptions,e),()=>_i(this.subscriptions,e)}notify(e,t,i){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,i);else for(let r=0;r<n;r++){const n=this.subscriptions[r];n&&n(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Ci(e,t){return t?e*(1e3/t):0}const Mi={current:void 0};class Ti{constructor(e){var t=this;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Ai.now();t.updatedAt!==n&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),i&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Ai.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ei);const i=this.events[e].add(t);return"change"===e?()=>{i(),gi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Mi.current&&Mi.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ai.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Ci(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pi(e,t){return new Ti(e,t)}const Di=["transitionEnd","transition"];function Oi(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,Pi(i))}function ki(e,t){let i=Et(e,t)||{},{transitionEnd:n={},transition:r={}}=i,a=xe(i,Di);a=(0,ye.A)((0,ye.A)({},a),n);for(const s in a){Oi(e,s,ui(a[s]))}}const Ii=e=>Boolean(e&&e.getVelocity);function Ri(e,t){const i=e.getValue("willChange");if(n=i,Boolean(Ii(n)&&n.add))return i.add(t);var n}const Li=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),zi="data-"+Li("framerAppearId");function Bi(e){return e.props[zi]}const ji=!1,Fi=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e;function Ni(e,t,i,n){if(e===t&&i===n)return oi;const r=t=>function(e,t,i,n,r){let a,s,o=0;do{s=t+(i-t)/2,a=Fi(s,n,r)-e,a>0?i=s:t=s}while(Math.abs(a)>1e-7&&++o<12);return s}(t,0,1,e,i);return e=>0===e||1===e?e:Fi(r(e),t,n)}const Ui=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Vi=e=>t=>1-e(1-t),Wi=Ni(.33,1.53,.69,.99),Hi=Vi(Wi),Gi=Ui(Hi),qi=e=>(e*=2)<1?.5*Hi(e):.5*(2-Math.pow(2,-10*(e-1))),Yi=e=>1-Math.sin(Math.acos(e)),Xi=Vi(Yi),Qi=Ui(Yi),Ki=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Zi(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Ki(e))}const Ji=(e,t,i)=>i>t?t:i<e?e:i,$i={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},en=(0,ye.A)((0,ye.A)({},$i),{},{transform:e=>Ji(0,1,e)}),tn=(0,ye.A)((0,ye.A)({},$i),{},{default:1}),nn=e=>Math.round(1e5*e)/1e5,rn=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const an=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,sn=(e,t)=>i=>Boolean("string"===typeof i&&an.test(i)&&i.startsWith(e)||t&&!function(e){return null==e}(i)&&Object.prototype.hasOwnProperty.call(i,t)),on=(e,t,i)=>n=>{if("string"!==typeof n)return n;const[r,a,s,o]=n.match(rn);return{[e]:parseFloat(r),[t]:parseFloat(a),[i]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},ln=(0,ye.A)((0,ye.A)({},$i),{},{transform:e=>Math.round((e=>Ji(0,255,e))(e))}),cn={test:sn("rgb","red"),parse:on("red","green","blue"),transform:e=>{let{red:t,green:i,blue:n,alpha:r=1}=e;return"rgba("+ln.transform(t)+", "+ln.transform(i)+", "+ln.transform(n)+", "+nn(en.transform(r))+")"}};const hn={test:sn("#"),parse:function(e){let t="",i="",n="",r="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,i+=i,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}},transform:cn.transform},un=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),dn=un("deg"),pn=un("%"),fn=un("px"),mn=un("vh"),gn=un("vw"),vn=(0,ye.A)((0,ye.A)({},pn),{},{parse:e=>pn.parse(e)/100,transform:e=>pn.transform(100*e)}),yn={test:sn("hsl","hue"),parse:on("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:i,lightness:n,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+pn.transform(nn(i))+", "+pn.transform(nn(n))+", "+nn(en.transform(r))+")"}},bn={test:e=>cn.test(e)||hn.test(e)||yn.test(e),parse:e=>cn.test(e)?cn.parse(e):yn.test(e)?yn.parse(e):hn.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?cn.transform(e):yn.transform(e)},xn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const wn="number",An="color",Sn=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function _n(e){const t=e.toString(),i=[],n={color:[],number:[],var:[]},r=[];let a=0;const s=t.replace(Sn,e=>(bn.test(e)?(n.color.push(a),r.push(An),i.push(bn.parse(e))):e.startsWith("var(")?(n.var.push(a),r.push("var"),i.push(e)):(n.number.push(a),r.push(wn),i.push(parseFloat(e))),++a,"${}")).split("${}");return{values:i,split:s,indexes:n,types:r}}function En(e){return _n(e).values}function Cn(e){const{split:t,types:i}=_n(e),n=t.length;return e=>{let r="";for(let a=0;a<n;a++)if(r+=t[a],void 0!==e[a]){const t=i[a];r+=t===wn?nn(e[a]):t===An?bn.transform(e[a]):e[a]}return r}}const Mn=e=>"number"===typeof e?0:e;const Tn={test:function(e){var t,i;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(rn))||void 0===t?void 0:t.length)||0)+((null===(i=e.match(xn))||void 0===i?void 0:i.length)||0)>0},parse:En,createTransformer:Cn,getAnimatableNone:function(e){const t=En(e);return Cn(e)(t.map(Mn))}},Pn=new Set(["brightness","contrast","saturate","opacity"]);function Dn(e){const[t,i]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=i.match(rn)||[];if(!n)return e;const r=i.replace(n,"");let a=Pn.has(t)?1:0;return n!==i&&(a*=100),t+"("+a+r+")"}const On=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,kn=(0,ye.A)((0,ye.A)({},Tn),{},{getAnimatableNone:e=>{const t=e.match(On);return t?t.map(Dn).join(" "):e}}),In={borderWidth:fn,borderTopWidth:fn,borderRightWidth:fn,borderBottomWidth:fn,borderLeftWidth:fn,borderRadius:fn,radius:fn,borderTopLeftRadius:fn,borderTopRightRadius:fn,borderBottomRightRadius:fn,borderBottomLeftRadius:fn,width:fn,maxWidth:fn,height:fn,maxHeight:fn,top:fn,right:fn,bottom:fn,left:fn,padding:fn,paddingTop:fn,paddingRight:fn,paddingBottom:fn,paddingLeft:fn,margin:fn,marginTop:fn,marginRight:fn,marginBottom:fn,marginLeft:fn,backgroundPositionX:fn,backgroundPositionY:fn},Rn={rotate:dn,rotateX:dn,rotateY:dn,rotateZ:dn,scale:tn,scaleX:tn,scaleY:tn,scaleZ:tn,skew:dn,skewX:dn,skewY:dn,distance:fn,translateX:fn,translateY:fn,translateZ:fn,x:fn,y:fn,z:fn,perspective:fn,transformPerspective:fn,opacity:en,originX:vn,originY:vn,originZ:fn},Ln=(0,ye.A)((0,ye.A)({},$i),{},{transform:Math.round}),zn=(0,ye.A)((0,ye.A)((0,ye.A)({},In),Rn),{},{zIndex:Ln,size:fn,fillOpacity:en,strokeOpacity:en,numOctaves:Ln}),Bn=(0,ye.A)((0,ye.A)({},zn),{},{color:bn,backgroundColor:bn,outlineColor:bn,fill:bn,stroke:bn,borderColor:bn,borderTopColor:bn,borderRightColor:bn,borderBottomColor:bn,borderLeftColor:bn,filter:kn,WebkitFilter:kn}),jn=e=>Bn[e];function Fn(e,t){let i=jn(e);return i!==kn&&(i=Tn),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const Nn=new Set(["auto","none","0"]);const Un=e=>e===$i||e===fn,Vn=(e,t)=>parseFloat(e.split(", ")[t]),Wn=(e,t)=>(i,n)=>{let{transform:r}=n;if("none"===r||!r)return 0;const a=r.match(/^matrix3d\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);if(a)return Vn(a[1],t);{const t=r.match(/^matrix\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);return t?Vn(t[1],e):0}},Hn=new Set(["x","y","z"]),Gn=li.filter(e=>!Hn.has(e));const qn={width:(e,t)=>{let{x:i}=e,{paddingLeft:n="0",paddingRight:r="0"}=t;return i.max-i.min-parseFloat(n)-parseFloat(r)},height:(e,t)=>{let{y:i}=e,{paddingTop:n="0",paddingBottom:r="0"}=t;return i.max-i.min-parseFloat(n)-parseFloat(r)},top:(e,t)=>{let{top:i}=t;return parseFloat(i)},left:(e,t)=>{let{left:i}=t;return parseFloat(i)},bottom:(e,t)=>{let{y:i}=e,{top:n}=t;return parseFloat(n)+(i.max-i.min)},right:(e,t)=>{let{x:i}=e,{left:n}=t;return parseFloat(n)+(i.max-i.min)},x:Wn(4,13),y:Wn(5,14)};qn.translateX=qn.x,qn.translateY=qn.y;const Yn=new Set;let Xn=!1,Qn=!1;function Kn(){if(Qn){const e=Array.from(Yn).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),i=new Map;t.forEach(e=>{const t=function(e){const t=[];return Gn.forEach(i=>{const n=e.getValue(i);void 0!==n&&(t.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))}),t}(e);t.length&&(i.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=i.get(e);t&&t.forEach(t=>{let[i,n]=t;var r;null===(r=e.getValue(i))||void 0===r||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Qn=!1,Xn=!1,Yn.forEach(e=>e.complete()),Yn.clear()}function Zn(){Yn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Qn=!0)})}class Jn{constructor(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=n,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Yn.add(this),Xn||(Xn=!0,gi.read(Zn),gi.resolveKeyframes(Kn))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:n}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null===n||void 0===n?void 0:n.get(),a=e[e.length-1];if(void 0!==r)e[0]=r;else if(i&&t){const n=i.readValue(t,a);void 0!==n&&null!==n&&(e[0]=n)}void 0===e[0]&&(e[0]=a),n&&void 0===r&&n.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Yn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Yn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let $n=oi,er=oi;const tr=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),ir=e=>t=>"string"===typeof t&&t.startsWith(e),nr=ir("--"),rr=ir("var(--"),ar=e=>!!rr(e)&&sr.test(e.split("/*")[0].trim()),sr=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,or=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function lr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;er(i<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[n,r]=function(e){const t=or.exec(e);if(!t)return[,];const[,i,n,r]=t;return["--".concat(null!==i&&void 0!==i?i:n),r]}(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const e=a.trim();return tr(e)?parseFloat(e):e}return ar(r)?lr(r,t,i+1):r}const cr=e=>t=>t.test(e),hr=[$i,fn,pn,dn,gn,mn,{test:e=>"auto"===e,parse:e=>e}],ur=e=>hr.find(cr(e));class dr extends Jn{constructor(e,t,i,n,r){super(e,t,i,n,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let i=e[o];if("string"===typeof i&&(i=i.trim(),ar(i))){const n=lr(i,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!hi.has(i)||2!==e.length)return;const[n,r]=e,a=ur(n),s=ur(r);if(a!==s)if(Un(a)&&Un(s))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let n=0;n<e.length;n++)Zi(e[n])&&i.push(n);i.length&&function(e,t,i){let n,r=0;for(;r<e.length&&!n;){const t=e[r];"string"===typeof t&&!Nn.has(t)&&_n(t).values.length&&(n=e[r]),r++}if(n&&i)for(const a of t)e[a]=Fn(i,n)}(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;"height"===i&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qn[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(i,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(i);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,s=n[a];n[a]=qn[i](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(e=>{let[i,n]=e;t.getValue(i).set(n)}),this.resolveNoneKeyframes()}}const pr=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Tn.test(e)&&"0"!==e||e.startsWith("url(")));function fr(e,t,i,n){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],s=pr(r,t),o=pr(a,t);return $n(s===o,"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(a,'". ').concat(r," is not an animatable value - to enable this animation set ").concat(r," to a value animatable to ").concat(a," via the `style` property.")),!(!s||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}(e)||("spring"===i||Lt(i))&&n)}const mr=e=>null!==e;function gr(e,t,i){let{repeat:n,repeatType:r="loop"}=t;const a=e.filter(mr),s=n&&"loop"!==r&&n%2===1?0:a.length-1;return s&&void 0!==i?i:a[s]}const vr=["autoplay","delay","type","repeat","repeatDelay","repeatType"];class yr{constructor(e){let{autoplay:t=!0,delay:i=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:s="loop"}=e,o=xe(e,vr);this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ai.now(),this.options=(0,ye.A)({autoplay:t,delay:i,type:n,repeat:r,repeatDelay:a,repeatType:s},o),this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Zn(),Kn()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Ai.now(),this.hasAttemptedResolve=!0;const{name:i,type:n,velocity:r,delay:a,onComplete:s,onUpdate:o,isGenerator:l}=this.options;if(!l&&!fr(e,i,n,r)){if(ji||!a)return o&&o(gr(e,this.options,t)),s&&s(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved=(0,ye.A)({keyframes:e,finalKeyframe:t},c),this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const br=(e,t,i)=>e+(t-e)*i;function xr(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function wr(e,t){return i=>i>0?t:e}const Ar=(e,t,i)=>{const n=e*e,r=i*(t*t-n)+n;return r<0?0:Math.sqrt(r)},Sr=[hn,cn,yn];function _r(e){const t=(e=>Sr.find(t=>t.test(e)))(e);if($n(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")),!Boolean(t))return!1;let i=t.parse(e);return t===yn&&(i=function(e){let{hue:t,saturation:i,lightness:n,alpha:r}=e;t/=360,i/=100,n/=100;let a=0,s=0,o=0;if(i){const e=n<.5?n*(1+i):n+i-n*i,r=2*n-e;a=xr(r,e,t+1/3),s=xr(r,e,t),o=xr(r,e,t-1/3)}else a=s=o=n;return{red:Math.round(255*a),green:Math.round(255*s),blue:Math.round(255*o),alpha:r}}(i)),i}const Er=(e,t)=>{const i=_r(e),n=_r(t);if(!i||!n)return wr(e,t);const r=(0,ye.A)({},i);return e=>(r.red=Ar(i.red,n.red,e),r.green=Ar(i.green,n.green,e),r.blue=Ar(i.blue,n.blue,e),r.alpha=br(i.alpha,n.alpha,e),cn.transform(r))},Cr=(e,t)=>i=>t(e(i)),Mr=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(Cr)},Tr=new Set(["none","hidden"]);function Pr(e,t){return i=>br(e,t,i)}function Dr(e){return"number"===typeof e?Pr:"string"===typeof e?ar(e)?wr:bn.test(e)?Er:Ir:Array.isArray(e)?Or:"object"===typeof e?bn.test(e)?Er:kr:wr}function Or(e,t){const i=[...e],n=i.length,r=e.map((e,i)=>Dr(e)(e,t[i]));return e=>{for(let t=0;t<n;t++)i[t]=r[t](e);return i}}function kr(e,t){const i=(0,ye.A)((0,ye.A)({},e),t),n={};for(const r in i)void 0!==e[r]&&void 0!==t[r]&&(n[r]=Dr(e[r])(e[r],t[r]));return e=>{for(const t in n)i[t]=n[t](e);return i}}const Ir=(e,t)=>{const i=Tn.createTransformer(t),n=_n(e),r=_n(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?Tr.has(e)&&!r.values.length||Tr.has(t)&&!n.values.length?function(e,t){return Tr.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}(e,t):Mr(Or(function(e,t){var i;const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][r[s]],l=null!==(i=e.values[o])&&void 0!==i?i:0;n[a]=l,r[s]++}return n}(n,r),r.values),i):($n(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),wr(e,t))};function Rr(e,t,i){if("number"===typeof e&&"number"===typeof t&&"number"===typeof i)return br(e,t,i);return Dr(e)(e,t)}function Lr(e,t,i){const n=Math.max(t-5,0);return Ci(i-e(n),t-n)}const zr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Br=.001;function jr(e){let t,i,{duration:n=zr.duration,bounce:r=zr.bounce,velocity:a=zr.velocity,mass:s=zr.mass}=e;$n(n<=ai(zr.maxDuration),"Spring duration must be 10 seconds or less");let o=1-r;o=Ji(zr.minDamping,zr.maxDamping,o),n=Ji(zr.minDuration,zr.maxDuration,si(n)),o<1?(t=e=>{const t=e*o,i=t*n,r=t-a,s=Nr(e,o),l=Math.exp(-i);return Br-r/s*l},i=e=>{const i=e*o*n,r=i*a+a,s=Math.pow(o,2)*Math.pow(e,2)*n,l=Math.exp(-i),c=Nr(Math.pow(e,2),o);return(-t(e)+Br>0?-1:1)*((r-s)*l)/c}):(t=e=>Math.exp(-e*n)*((e-a)*n+1)-.001,i=e=>Math.exp(-e*n)*(n*n*(a-e)));const l=function(e,t,i){let n=i;for(let r=1;r<Fr;r++)n-=e(n)/t(n);return n}(t,i,5/n);if(n=ai(n),isNaN(l))return{stiffness:zr.stiffness,damping:zr.damping,duration:n};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:n}}}const Fr=12;function Nr(e,t){return e*Math.sqrt(1-t*t)}const Ur=["duration","bounce"],Vr=["stiffness","damping","mass"];function Wr(e,t){return t.some(t=>void 0!==e[t])}function Hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zr.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zr.bounce;const i="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:r}=i;const a=i.keyframes[0],s=i.keyframes[i.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:h,duration:u,velocity:d,isResolvedFromDuration:p}=function(e){let t=(0,ye.A)({velocity:zr.velocity,stiffness:zr.stiffness,damping:zr.damping,mass:zr.mass,isResolvedFromDuration:!1},e);if(!Wr(e,Vr)&&Wr(e,Ur))if(e.visualDuration){const i=e.visualDuration,n=2*Math.PI/(1.2*i),r=n*n,a=2*Ji(.05,1,1-(e.bounce||0))*Math.sqrt(r);t=(0,ye.A)((0,ye.A)({},t),{},{mass:zr.mass,stiffness:r,damping:a})}else{const i=jr(e);t=(0,ye.A)((0,ye.A)((0,ye.A)({},t),i),{},{mass:zr.mass}),t.isResolvedFromDuration=!0}return t}((0,ye.A)((0,ye.A)({},i),{},{velocity:-si(i.velocity||0)})),f=d||0,m=c/(2*Math.sqrt(l*h)),g=s-a,v=si(Math.sqrt(l/h)),y=Math.abs(g)<5;let b;if(n||(n=y?zr.restSpeed.granular:zr.restSpeed.default),r||(r=y?zr.restDelta.granular:zr.restDelta.default),m<1){const e=Nr(v,m);b=t=>{const i=Math.exp(-m*v*t);return s-i*((f+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>s-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(m*m-1);b=t=>{const i=Math.exp(-m*v*t),n=Math.min(e*t,300);return s-i*((f+m*v*g)*Math.sinh(n)+e*g*Math.cosh(n))/e}}const x={calculatedDuration:p&&u||null,next:e=>{const t=b(e);if(p)o.done=e>=u;else{let i=0;m<1&&(i=0===e?ai(f):Lr(b,e,t));const a=Math.abs(i)<=n,l=Math.abs(s-t)<=r;o.done=a&&l}return o.value=o.done?s:t,o},toString:()=>{const e=Math.min(Rt(x),It),t=Vt(t=>x.next(e*t).value,e,30);return e+"ms "+t}};return x}function Gr(e){let{keyframes:t,velocity:i=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:h=.5,restSpeed:u}=e;const d=t[0],p={done:!1,value:d},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=n*i;const g=d+m,v=void 0===o?g:o(g);v!==g&&(m=v-d);const y=e=>-m*Math.exp(-e/r),b=e=>v+y(e),x=e=>{const t=y(e),i=b(e);p.done=Math.abs(t)<=h,p.value=p.done?v:i};let w,A;const S=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(w=e,A=Hr({keyframes:[p.value,f(p.value)],velocity:Lr(b,e,p.value),damping:a,stiffness:s,restDelta:h,restSpeed:u}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return A||void 0!==w||(t=!0,x(e),S(e)),void 0!==w&&e>=w?A.next(e-w):(!t&&x(e),p)}}}const qr=Ni(.42,0,1,1),Yr=Ni(0,0,.58,1),Xr=Ni(.42,0,.58,1),Qr={linear:oi,easeIn:qr,easeInOut:Xr,easeOut:Yr,circIn:Yi,circInOut:Qi,circOut:Xi,backIn:Hi,backInOut:Gi,backOut:Wi,anticipate:qi},Kr=e=>{if(Bt(e)){er(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,i,n,r]=e;return Ni(t,i,n,r)}return"string"===typeof e?(er(void 0!==Qr[e],"Invalid easing type '".concat(e,"'")),Qr[e]):e};function Zr(e,t){let{clamp:i=!0,ease:n,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(er(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,i){const n=[],r=i||Rr,a=e.length-1;for(let s=0;s<a;s++){let i=r(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||oi:t;i=Mr(e,i)}n.push(i)}return n}(t,n,r),l=o.length,c=i=>{if(s&&i<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(i<e[n+1]);n++);const r=Ut(e[n],e[n+1],i);return o[n](r)};return i?t=>c(Ji(e[0],e[a-1],t)):c}function Jr(e){const t=[0];return function(e,t){const i=e[e.length-1];for(let n=1;n<=t;n++){const r=Ut(0,t,n);e.push(br(i,1,r))}}(t,e.length-1),t}function $r(e){let{duration:t=300,keyframes:i,times:n,ease:r="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(Kr):Kr(r),s={done:!1,value:i[0]},o=function(e,t){return e.map(e=>e*t)}(n&&n.length===i.length?n:Jr(i),t),l=Zr(o,i,{ease:Array.isArray(a)?a:(c=i,h=a,c.map(()=>h||Xr).splice(0,c.length-1))});var c,h;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const ea=e=>{const t=t=>{let{timestamp:i}=t;return e(i)};return{start:()=>gi.update(t,!0),stop:()=>vi(t),now:()=>yi.isProcessing?yi.timestamp:Ai.now()}},ta={decay:Gr,inertia:Gr,tween:$r,keyframes:$r,spring:Hr},ia=e=>e/100;class na extends yr{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:i,element:n,keyframes:r}=this.options,a=(null===n||void 0===n?void 0:n.KeyframeResolver)||Jn;this.resolver=new a(r,(e,t)=>this.onKeyframesResolved(e,t),t,i,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:r,velocity:a=0}=this.options,s=Lt(t)?t:ta[t]||$r;let o,l;s!==$r&&"number"!==typeof e[0]&&(o=Mr(ia,Rr(e[0],e[1])),e=[0,100]);const c=s((0,ye.A)((0,ye.A)({},this.options),{},{keyframes:e}));"mirror"===r&&(l=s((0,ye.A)((0,ye.A)({},this.options),{},{keyframes:[...e].reverse(),velocity:-a}))),null===c.calculatedDuration&&(c.calculatedDuration=Rt(c));const{calculatedDuration:h}=c,u=h+n;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:h,resolvedDuration:u,totalDuration:u*(i+1)-n}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:i}=this;if(!i){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:n,generator:r,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:h}=i;if(null===this.startTime)return r.next(0);const{delay:u,repeat:d,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-u*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let y=this.currentTime,b=r;if(d){const e=Math.min(this.currentTime,c)/h;let t=Math.floor(e),i=e%1;!i&&e>=1&&(i=1),1===i&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===p?(i=1-i,f&&(i-=f/h)):"mirror"===p&&(b=a)),y=Ji(0,1,i)*h}const x=v?{done:!1,value:o[0]}:b.next(y);s&&(x.value=s(x.value));let{done:w}=x;v||null===l||(w=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const A=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return A&&void 0!==n&&(x.value=gr(o,this.options,n)),m&&m(x.value),A&&this.finish(),x}get duration(){const{resolved:e}=this;return e?si(e.calculatedDuration):0}get time(){return si(this.currentTime)}set time(e){e=ai(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=si(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=ea,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!==i&&void 0!==i?i:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ra=new Set(["opacity","clipPath","filter","transform"]);const aa=Tt(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sa=["onComplete","onUpdate","motionValue","element"],oa=["motionValue","onUpdate","onComplete","element"];const la={anticipate:qi,backInOut:Gi,circInOut:Qi};class ca extends yr{constructor(e){super(e);const{name:t,motionValue:i,element:n,keyframes:r}=this.options;this.resolver=new dr(r,(e,t)=>this.onKeyframesResolved(e,t),t,i,n),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:n,ease:r,type:a,motionValue:s,name:o,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;var c;if("string"===typeof r&&Nt()&&r in la&&(r=la[r]),Lt((c=this.options).type)||"spring"===c.type||!Wt(c.ease)){const t=this.options,{onComplete:s,onUpdate:o,motionValue:l,element:c}=t,h=xe(t,sa),u=function(e,t){const i=new na((0,ye.A)((0,ye.A)({},t),{},{keyframes:e,repeat:0,delay:0,isGenerator:!0}));let n={done:!1,value:e[0]};const r=[];let a=0;for(;!n.done&&a<2e4;)n=i.sample(a),r.push(n.value),a+=10;return{times:void 0,keyframes:r,duration:a-10,ease:"linear"}}(e,h);1===(e=u.keyframes).length&&(e[1]=e[0]),i=u.duration,n=u.times,r=u.ease,a="keyframes"}const h=function(e,t,i){let{delay:n=0,duration:r=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:i};l&&(c.offset=l);const h=qt(o,r);return Array.isArray(h)&&(c.easing=h),e.animate(c,{delay:n,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:"reverse"===s?"alternate":"normal"})}(s.owner.current,o,e,(0,ye.A)((0,ye.A)({},this.options),{},{duration:i,times:n,ease:r}));return h.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(zt(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:i}=this.options;s.set(gr(e,this.options,t)),i&&i(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:n,type:a,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return si(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return si(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=ai(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return oi;const{animation:i}=t;zt(i,e)}else this.pendingTimeline=e;return oi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:n,type:r,ease:a,times:s}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const e=this.options,{motionValue:t,onUpdate:o,onComplete:l,element:c}=e,h=xe(e,oa),u=new na((0,ye.A)((0,ye.A)({},h),{},{keyframes:i,duration:n,type:r,ease:a,times:s,isGenerator:!0})),d=ai(this.time);t.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:n,repeatType:r,damping:a,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return aa()&&i&&ra.has(i)&&!o&&!l&&!n&&"mirror"!==r&&0!==a&&"inertia"!==s}}const ha={type:"spring",stiffness:500,damping:25,restSpeed:10},ua={type:"keyframes",duration:.8},da={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pa=(e,t)=>{let{keyframes:i}=t;return i.length>2?ua:ci.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===i[1]?2*Math.sqrt(550):30,restSpeed:10}:ha:da},fa=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const ma=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return s=>{const o=kt(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=ai(l);let h=(0,ye.A)((0,ye.A)({keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:r});(function(e){let{when:t,delay:i,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:h}=e,u=xe(e,fa);return!!Object.keys(u).length})(o)||(h=(0,ye.A)((0,ye.A)({},h),pa(e,h))),h.duration&&(h.duration=ai(h.duration)),h.repeatDelay&&(h.repeatDelay=ai(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let u=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(h.duration=0,0===h.delay&&(u=!0)),(ji||di)&&(u=!0,h.duration=0,h.delay=0),u&&!a&&void 0!==t.get()){const e=gr(h.keyframes,o);if(void 0!==e)return gi.update(()=>{h.onUpdate(e),h.onComplete()}),new Ot([])}return!a&&ca.supports(h)?new ca(h):new na(h)}},ga=["transition","transitionEnd"];function va(e,t){let{protectedKeys:i,needsAnimating:n}=e;const r=i.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,r}function ya(e,t){let{delay:i=0,transitionOverride:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o}=t,l=xe(t,ga);n&&(s=n);const c=[],h=r&&e.animationState&&e.animationState.getState()[r];for(const u in l){const t=e.getValue(u,null!==(a=e.latestValues[u])&&void 0!==a?a:null),n=l[u];if(void 0===n||h&&va(h,u))continue;const r=(0,ye.A)({delay:i},kt(s||{},u));let o=!1;if(window.MotionHandoffAnimation){const t=Bi(e);if(t){const e=window.MotionHandoffAnimation(t,u,gi);null!==e&&(r.startTime=e,o=!0)}}Ri(e,u),t.start(ma(u,t,n,e.shouldReduceMotion&&hi.has(u)?{type:!1}:r,e,o));const d=t.animation;d&&c.push(d)}return o&&Promise.all(c).then(()=>{gi.update(()=>{o&&ki(e,o)})}),c}function ba(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const r=Et(e,t,"exit"===i.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(a=i.transitionOverride);const s=r?()=>Promise.all(ya(e,r,i)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:s,staggerDirection:o}=a;return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const s=[],o=(e.variantChildren.size-1)*n,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n};return Array.from(e.variantChildren).sort(xa).forEach((e,n)=>{e.notify("AnimationStart",t),s.push(ba(e,t,(0,ye.A)((0,ye.A)({},a),{},{delay:i+l(n)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(s)}(e,t,r+n,s,o,i)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[s,o]:[o,s];return e().then(()=>t())}return Promise.all([s(),o(i.delay)])}function xa(e,t){return e.sortNodePosition(t)}function wa(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>ba(e,t,n));i=Promise.all(r)}else if("string"===typeof t)i=ba(e,t,n);else{const r="function"===typeof t?Et(e,t,n.custom):t;i=Promise.all(ya(e,r,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}const Aa=Mt.length;function Sa(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Sa(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let i=0;i<Aa;i++){const n=Mt[i],r=e.props[n];(At(r)||!1===r)&&(t[n]=r)}return t}const _a=["transition","transitionEnd"],Ea=[...Ct].reverse(),Ca=Ct.length;function Ma(e){let t=function(e){return t=>Promise.all(t.map(t=>{let{animation:i,options:n}=t;return wa(e,i,n)}))}(e),i=Da(),n=!0;const r=t=>(i,n)=>{var r;const a=Et(e,n,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,n=xe(a,_a);i=(0,ye.A)((0,ye.A)((0,ye.A)({},i),n),t)}return i};function a(a){const{props:s}=e,o=Sa(e.parent)||{},l=[],c=new Set;let h={},u=1/0;for(let t=0;t<Ca;t++){const d=Ea[t],p=i[d],f=void 0!==s[d]?s[d]:o[d],m=At(f),g=d===a?p.isActive:null;!1===g&&(u=t);let v=f===o[d]&&f!==s[d]&&m;if(v&&n&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=(0,ye.A)({},h),!p.isActive&&null===g||!f&&!p.prevProp||bt(f)||"boolean"===typeof f)continue;const y=Ta(p.prevProp,f);let b=y||d===a&&p.isActive&&!v&&m||t>u&&m,x=!1;const w=Array.isArray(f)?f:[f];let A=w.reduce(r(d),{});!1===g&&(A={});const{prevResolvedValues:S={}}=p,_=(0,ye.A)((0,ye.A)({},S),A),E=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),p.needsAnimating[t]=!0;const i=e.getValue(t);i&&(i.liveStyle=!1)};for(const e in _){const t=A[e],i=S[e];if(h.hasOwnProperty(e))continue;let n=!1;n=xt(t)&&xt(i)?!wt(t,i):t!==i,n?void 0!==t&&null!==t?E(e):c.add(e):void 0!==t&&c.has(e)?E(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=A,p.isActive&&(h=(0,ye.A)((0,ye.A)({},h),A)),n&&e.blockInitialAnimation&&(b=!1);b&&(!(v&&y)||x)&&l.push(...w.map(e=>({animation:e,options:{type:d}})))}if(c.size){const t={};c.forEach(i=>{const n=e.getBaseTarget(i),r=e.getValue(i);r&&(r.liveStyle=!0),t[i]=null!==n&&void 0!==n?n:null}),l.push({animation:t})}let d=Boolean(l.length);return!n||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(d=!1),n=!1,d?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,n){var r;if(i[t].isActive===n)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach(e=>{var i;return null===(i=e.animationState)||void 0===i?void 0:i.setActive(t,n)}),i[t].isActive=n;const s=a(t);for(const e in i)i[e].protectedKeys={};return s},setAnimateFunction:function(i){t=i(e)},getState:()=>i,reset:()=>{i=Da(),n=!0}}}function Ta(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!wt(t,e)}function Pa(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Da(){return{animate:Pa(!0),whileInView:Pa(),whileHover:Pa(),whileTap:Pa(),whileDrag:Pa(),whileFocus:Pa(),exit:Pa()}}class Oa{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ka=0;const Ia={animation:{Feature:class extends Oa{constructor(e){super(e),e.animationState||(e.animationState=Ma(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Oa{constructor(){super(...arguments),this.id=ka++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function Ra(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i)}function La(e){return{point:{x:e.pageX,y:e.pageY}}}function za(e,t,i,n){return Ra(e,t,(e=>t=>Jt(t)&&e(t,La(t)))(i),n)}const Ba=(e,t)=>Math.abs(e-t);class ja{constructor(e,t){let{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Ua(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,i=function(e,t){const i=Ba(e.x,t.x),n=Ba(e.y,t.y);return Math.sqrt(i**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!i)return;const{point:n}=e,{timestamp:r}=yi;this.history.push((0,ye.A)((0,ye.A)({},n),{},{timestamp:r}));const{onStart:a,onMove:s}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Fa(t,this.transformPagePoint),gi.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:i,onSessionEnd:n,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Ua("pointercancel"===e.type?this.lastMoveEventInfo:Fa(t,this.transformPagePoint),this.history);this.startEvent&&i&&i(e,a),n&&n(e,a)},!Jt(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=n||window;const a=Fa(La(e),this.transformPagePoint),{point:s}=a,{timestamp:o}=yi;this.history=[(0,ye.A)((0,ye.A)({},s),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,Ua(a,this.history)),this.removeListeners=Mr(za(this.contextWindow,"pointermove",this.handlePointerMove),za(this.contextWindow,"pointerup",this.handlePointerUp),za(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vi(this.updatePoint)}}function Fa(e,t){return t?{point:t(e.point)}:e}function Na(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ua(e,t){let{point:i}=e;return{point:i,delta:Na(i,Wa(t)),offset:Na(i,Va(t)),velocity:Ha(t,.1)}}function Va(e){return e[0]}function Wa(e){return e[e.length-1]}function Ha(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,n=null;const r=Wa(e);for(;i>=0&&(n=e[i],!(r.timestamp-n.timestamp>ai(t)));)i--;if(!n)return{x:0,y:0};const a=si(r.timestamp-n.timestamp);if(0===a)return{x:0,y:0};const s={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Ga(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function qa(e){return e.max-e.min}function Ya(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=n,e.originPoint=br(t.min,t.max,e.origin),e.scale=qa(i)/qa(t),e.translate=br(i.min,i.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Xa(e,t,i,n){Ya(e.x,t.x,i.x,n?n.originX:void 0),Ya(e.y,t.y,i.y,n?n.originY:void 0)}function Qa(e,t,i){e.min=i.min+t.min,e.max=e.min+qa(t)}function Ka(e,t,i){e.min=t.min-i.min,e.max=e.min+qa(t)}function Za(e,t,i){Ka(e.x,t.x,i.x),Ka(e.y,t.y,i.y)}function Ja(e,t,i){return{min:void 0!==t?e.min+t:void 0,max:void 0!==i?e.max+i-(e.max-e.min):void 0}}function $a(e,t){let i=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,n]=[n,i]),{min:i,max:n}}const es=.35;function ts(e,t,i){return{min:is(e,t),max:is(e,i)}}function is(e,t){return"number"===typeof e?e:e[t]||0}const ns=()=>({x:{min:0,max:0},y:{min:0,max:0}});function rs(e){return[e("x"),e("y")]}function as(e){let{top:t,left:i,right:n,bottom:r}=e;return{x:{min:i,max:n},y:{min:t,max:r}}}function ss(e){return void 0===e||1===e}function os(e){let{scale:t,scaleX:i,scaleY:n}=e;return!ss(t)||!ss(i)||!ss(n)}function ls(e){return os(e)||cs(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cs(e){return hs(e.x)||hs(e.y)}function hs(e){return e&&"0%"!==e}function us(e,t,i){return i+t*(e-i)}function ds(e,t,i,n,r){return void 0!==r&&(e=us(e,r,n)),us(e,i,n)+t}function ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=ds(e.min,t,i,n,r),e.max=ds(e.max,t,i,n,r)}function fs(e,t){let{x:i,y:n}=t;ps(e.x,i.translate,i.scale,i.originPoint),ps(e.y,n.translate,n.scale,n.originPoint)}const ms=.999999999999,gs=1.0000000000001;function vs(e,t){e.min=e.min+t,e.max=e.max+t}function ys(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;ps(e,t,i,br(e.min,e.max,r),n)}function bs(e,t){ys(e.x,t.x,t.scaleX,t.scale,t.originX),ys(e.y,t.y,t.scaleY,t.scale,t.originY)}function xs(e,t){return as(function(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const ws=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},As=new WeakMap;class Ss{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new ja(e,{onSessionStart:e=>{const{dragSnapToOrigin:i}=this.getProps();i?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(La(e).point)},onStart:(e,t)=>{const{drag:i,dragPropagation:n,onDragStart:r}=this.getProps();if(i&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=i)||"y"===a?Yt[a]?null:(Yt[a]=!0,()=>{Yt[a]=!1}):Yt.x||Yt.y?null:(Yt.x=Yt.y=!0,()=>{Yt.x=Yt.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rs(e=>{let t=this.getAxisMotionValue(e).get()||0;if(pn.test(t)){const{projection:i}=this.visualElement;if(i&&i.layout){const n=i.layout.layoutBox[e];if(n){t=qa(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&gi.postRender(()=>r(e,t)),Ri(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:i,dragDirectionLock:n,onDirectionLock:r,onDrag:a}=this.getProps();if(!i&&!this.openDragLock)return;const{offset:s}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=null;Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x");return i}(s),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>rs(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:ws(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=t;this.startAnimation(n);const{onDragEnd:r}=this.getProps();r&&gi.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:n}=this.getProps();if(!i||!_s(e,n,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=function(e,t,i){let{min:n,max:r}=t;return void 0!==n&&e<n?e=i?br(n,e,i.min):Math.max(e,n):void 0!==r&&e>r&&(e=i?br(r,e,i.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Ga(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,t){let{top:i,left:n,bottom:r,right:a}=t;return{x:Ja(e.x,n,a),y:Ja(e.y,i,r)}}(n.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es;return!1===e?e=0:!0===e&&(e=es),{x:ts(e,"left","right"),y:ts(e,"top","bottom")}}(i),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&rs(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const i={};return void 0!==t.min&&(i.min=t.min-e.min),void 0!==t.max&&(i.max=t.max-e.min),i}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ga(e))return!1;const i=e.current;er(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const r=function(e,t,i){const n=xs(e,i),{scroll:r}=t;return r&&(vs(n.x,r.offset.x),vs(n.y,r.offset.y)),n}(i,n.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:$a(e.x,t.x),y:$a(e.y,t.y)}}(n.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:i}=e;return{top:i.min,right:t.max,bottom:i.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=as(e))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:n,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=rs(s=>{if(!_s(s,t,this.currentDirection))return;let l=o&&o[s]||{};a&&(l={min:0,max:0});const c=n?200:1e6,h=n?40:1e7,u=(0,ye.A)((0,ye.A)({type:"inertia",velocity:i?e[s]:0,bounceStiffness:c,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(s,u)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Ri(this.visualElement,e),i.start(ma(e,i,0,t,this.visualElement,!1))}stopAnimation(){rs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rs(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),i=this.visualElement.getProps(),n=i[t];return n||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){rs(t=>{const{drag:i}=this.getProps();if(!_s(t,i,this.currentDirection))return;const{projection:n}=this.visualElement,r=this.getAxisMotionValue(t);if(n&&n.layout){const{min:i,max:a}=n.layout.layoutBox[t];r.set(e[t]-br(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ga(t)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};rs(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const i=t.get();n[e]=function(e,t){let i=.5;const n=qa(e),r=qa(t);return r>n?i=Ut(t.min,t.max-n,e.min):n>r&&(i=Ut(e.min,e.max-r,t.min)),Ji(0,1,i)}({min:i,max:i},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),rs(t=>{if(!_s(t,e,null))return;const i=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];i.set(br(r,a,n[t]))})}addListeners(){if(!this.visualElement.current)return;As.set(this.visualElement,this);const e=za(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:i=!0}=this.getProps();t&&i&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ga(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,n=i.addEventListener("measure",t);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gi.read(t);const r=Ra(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:i}=e;this.isDragging&&i&&(rs(e=>{const i=this.getAxisMotionValue(e);i&&(this.originPoint[e]+=t[e].translate,i.set(i.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),n(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:a=es,dragMomentum:s=!0}=e;return(0,ye.A)((0,ye.A)({},e),{},{drag:t,dragDirectionLock:i,dragPropagation:n,dragConstraints:r,dragElastic:a,dragMomentum:s})}}function _s(e,t,i){return(!0===t||t===e)&&(null===i||i===e)}const Es=e=>(t,i)=>{e&&gi.postRender(()=>e(t,i))};const Cs=(0,t.createContext)(null);function Ms(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const i=(0,t.useContext)(Cs);if(null===i)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=i,s=(0,t.useId)();(0,t.useEffect)(()=>{e&&a(s)},[e]);const o=(0,t.useCallback)(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Ts=(0,t.createContext)({}),Ps=(0,t.createContext)({}),Ds={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Os(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ks={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!fn.test(e))return e;e=parseFloat(e)}const i=Os(e,t.target.x),n=Os(e,t.target.y);return"".concat(i,"% ").concat(n,"%")}},Is={correct:(e,t)=>{let{treeScale:i,projectionDelta:n}=t;const r=e,a=Tn.parse(e);if(a.length>5)return r;const s=Tn.createTransformer(e),o="number"!==typeof a[0]?1:0,l=n.x.scale*i.x,c=n.y.scale*i.y;a[0+o]/=l,a[1+o]/=c;const h=br(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=h),"number"===typeof a[3+o]&&(a[3+o]/=h),s(a)}},Rs={};const{schedule:Ls,cancel:zs}=mi(queueMicrotask,!1);class Bs extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:n}=this.props,{projection:r}=e;var a;a=Fs,Object.assign(Rs,a),r&&(t.group&&t.group.add(r),i&&i.register&&n&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions((0,ye.A)((0,ye.A)({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),Ds.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:n,isPresent:r}=this.props,a=i.projection;return a?(a.isPresent=r,n||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||gi.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ls.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function js(e){const[i,n]=Ms(),r=(0,t.useContext)(Ts);return(0,He.jsx)(Bs,(0,ye.A)((0,ye.A)({},e),{},{layoutGroup:r,switchLayoutGroup:(0,t.useContext)(Ps),isPresent:i,safeToRemove:n}))}const Fs={borderRadius:(0,ye.A)((0,ye.A)({},ks),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ks,borderTopRightRadius:ks,borderBottomLeftRadius:ks,borderBottomRightRadius:ks,boxShadow:Is};const Ns=(e,t)=>e.depth-t.depth;class Us{constructor(){this.children=[],this.isDirty=!1}add(e){Si(this.children,e),this.isDirty=!0}remove(e){_i(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ns),this.isDirty=!1,this.children.forEach(e)}}function Vs(e,t){const i=Ai.now(),n=r=>{let{timestamp:a}=r;const s=a-i;s>=t&&(vi(n),e(s-t))};return gi.read(n,!0),()=>vi(n)}function Ws(e){const t=Ii(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const Hs=["TopLeft","TopRight","BottomLeft","BottomRight"],Gs=Hs.length,qs=e=>"string"===typeof e?parseFloat(e):e,Ys=e=>"number"===typeof e||fn.test(e);function Xs(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Qs=Zs(0,.5,Xi),Ks=Zs(.5,.95,oi);function Zs(e,t,i){return n=>n<e?0:n>t?1:i(Ut(e,t,n))}function Js(e,t){e.min=t.min,e.max=t.max}function $s(e,t){Js(e.x,t.x),Js(e.y,t.y)}function eo(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function to(e,t,i,n,r){return e=us(e-=t,1/i,n),void 0!==r&&(e=us(e,1/r,n)),e}function io(e,t,i,n,r){let[a,s,o]=i;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;pn.test(t)&&(t=parseFloat(t),t=br(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let o=br(a.min,a.max,n);e===a&&(o-=t),e.min=to(e.min,t,i,o,r),e.max=to(e.max,t,i,o,r)}(e,t[a],t[s],t[o],t.scale,n,r)}const no=["x","scaleX","originX"],ro=["y","scaleY","originY"];function ao(e,t,i,n){io(e.x,t,no,i?i.x:void 0,n?n.x:void 0),io(e.y,t,ro,i?i.y:void 0,n?n.y:void 0)}function so(e){return 0===e.translate&&1===e.scale}function oo(e){return so(e.x)&&so(e.y)}function lo(e,t){return e.min===t.min&&e.max===t.max}function co(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ho(e,t){return co(e.x,t.x)&&co(e.y,t.y)}function uo(e){return qa(e.x)/qa(e.y)}function po(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fo{constructor(){this.members=[]}add(e){Si(this.members,e),e.scheduleRender()}remove(e){if(_i(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let i;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){i=e;break}}return!!i&&(this.promote(i),!0)}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const mo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},go="undefined"!==typeof window&&void 0!==window.MotionDebug,vo=["","X","Y","Z"],yo={visibility:"hidden"};let bo=0;function xo(e,t,i,n){const{latestValues:r}=t;r[e]&&(i[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function wo(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=Bi(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",gi,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&wo(n)}function Ao(e){let{attachResizeListener:t,defaultParent:i,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===i||void 0===i?void 0:i();this.id=bo++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,go&&(mo.totalNodes=mo.resolvedTargetDeltas=mo.recalculatedProjection=0),this.nodes.forEach(Eo),this.nodes.forEach(ko),this.nodes.forEach(Io),this.nodes.forEach(Co),go&&window.MotionDebug.record(mo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new Us)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ei),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t&&t.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var n;this.isSVG=(n=e)instanceof SVGElement&&"svg"!==n.tagName,this.instance=e;const{layoutId:r,layout:a,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(a||r)&&(this.isLayoutDirty=!0),t){let i;const n=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,i&&i(),i=Vs(n,250),Ds.hasAnimatedSinceResize&&(Ds.hasAnimatedSinceResize=!1,this.nodes.forEach(Oo))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||a)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:i,hasRelativeTargetChanged:n,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||s.getDefaultTransition()||Fo,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!ho(this.targetLayout,r)||n,h=!i&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||h||i&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,h);const e=(0,ye.A)((0,ye.A)({},kt(a,"layout")),{},{onPlay:o,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else i||Oo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ro),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wo(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:i}=this.options;if(void 0===t&&!i)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(To);this.isUpdating||this.nodes.forEach(Po),this.isUpdating=!1,this.nodes.forEach(Do),this.nodes.forEach(So),this.nodes.forEach(_o),this.clearAllSnapshots();const e=Ai.now();yi.delta=Ji(0,1e3/60,e-yi.timestamp),yi.timestamp=e,yi.isProcessing=!0,bi.update.process(yi),bi.preRender.process(yi),bi.render.process(yi),yi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ls.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mo),this.sharedNodes.forEach(Lo)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i=0;i<this.path.length;i++){this.path[i].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!oo(this.projectionDelta),i=this.getTransformTemplate(),n=i?i(this.latestValues,""):void 0,r=n!==this.prevTransformTemplateValue;e&&(t||ls(this.latestValues)||r)&&(a(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let i=this.removeElementScroll(t);var n;return e&&(i=this.removeTransform(i)),Vo((n=i).x),Vo(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const i=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Ho))){const{scroll:e}=this.root;e&&(vs(i.x,e.offset.x),vs(i.y,e.offset.y))}return i}removeElementScroll(e){var t;const i={x:{min:0,max:0},y:{min:0,max:0}};if($s(i,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return i;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:r,options:a}=t;t!==this.root&&r&&a.layoutScroll&&(r.wasRoot&&$s(i,e),vs(i.x,r.offset.x),vs(i.y,r.offset.y))}return i}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={x:{min:0,max:0},y:{min:0,max:0}};$s(i,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&bs(i,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),ls(e.latestValues)&&bs(i,e.latestValues)}return ls(this.latestValues)&&bs(i,this.latestValues),i}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};$s(t,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];if(!e.instance)continue;if(!ls(e.latestValues))continue;os(e.latestValues)&&e.updateSnapshot();const n=ns();$s(n,e.measurePageBox()),ao(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return ls(this.latestValues)&&ao(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,ye.A)((0,ye.A)((0,ye.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==i;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:a}=this.options;if(this.layout&&(r||a)){if(this.resolvedRelativeTargetAt=yi.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Za(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,o=this.relativeTarget,l=this.relativeParent.target,Qa(s.x,o.x,l.x),Qa(s.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):$s(this.target,this.layout.layoutBox),fs(this.target,this.targetDelta)):$s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Za(this.relativeTargetOrigin,this.target,e.target),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}go&&mo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!os(this.parent.latestValues)&&!cs(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),i=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===yi.timestamp&&(n=!1),n)return;const{layout:r,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!a)return;$s(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=i.length;if(!r)return;let a,s;t.x=t.y=1;for(let o=0;o<r;o++){a=i[o],s=a.projectionDelta;const{visualElement:r}=a.options;r&&r.props.style&&"contents"===r.props.style.display||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&bs(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,fs(e,s)),n&&ls(a.latestValues)&&bs(e,a.latestValues))}t.x<gs&&t.x>ms&&(t.x=1),t.y<gs&&t.y>ms&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,i),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(eo(this.prevProjectionDelta.x,this.projectionDelta.x),eo(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Xa(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&po(this.projectionDelta.x,this.prevProjectionDelta.x)&&po(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),go&&mo.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.snapshot,n=i?i.latestValues:{},r=(0,ye.A)({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},o=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,h=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(jo));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const i=t/1e3;zo(a.x,e.x,i),zo(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Za(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,i,n){Bo(e.x,t.x,i.x,n),Bo(e.y,t.y,i.y,n)}(this.relativeTarget,this.relativeTargetOrigin,s,i),u&&function(e,t){return lo(e.x,t.x)&&lo(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),$s(u,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,i,n,r,a){r?(e.opacity=br(0,void 0!==i.opacity?i.opacity:1,Qs(n)),e.opacityExit=br(void 0!==t.opacity?t.opacity:1,0,Ks(n))):a&&(e.opacity=br(void 0!==t.opacity?t.opacity:1,void 0!==i.opacity?i.opacity:1,n));for(let s=0;s<Gs;s++){const r="border".concat(Hs[s],"Radius");let a=Xs(t,r),o=Xs(i,r);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||Ys(a)===Ys(o)?(e[r]=Math.max(br(qs(a),qs(o),n),0),(pn.test(o)||pn.test(a))&&(e[r]+="%")):e[r]=o)}(t.rotate||i.rotate)&&(e.rotate=br(t.rotate||0,i.rotate||0,n))}(r,n,this.latestValues,i,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gi.update(()=>{Ds.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,i){const n=Ii(e)?e:Pi(e);return n.start(ma("",n,t,i)),n.animation}(0,1e3,(0,ye.A)((0,ye.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:i,layout:n,latestValues:r}=e;if(t&&i&&n){if(this!==e&&this.layout&&n&&Wo(this.options.animationType,this.layout.layoutBox,n.layoutBox)){i=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=qa(this.layout.layoutBox.x);i.x.min=e.target.x.min,i.x.max=i.x.min+t;const n=qa(this.layout.layoutBox.y);i.y.min=e.target.y.min,i.y.max=i.y.min+n}$s(t,i),bs(t,r),Xa(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new fo);this.sharedNodes.get(e).add(t);const i=t.options.initialPromotionConfig;t.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getStack();n&&n.promote(this,i),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:i}=e;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(t=!0),!t)return;const n={};i.z&&xo("z",e,n,this.animationValues);for(let r=0;r<vo.length;r++)xo("rotate".concat(vo[r]),e,n,this.animationValues),xo("skew".concat(vo[r]),e,n,this.animationValues);e.render();for(const r in n)e.setStaticValue(r,n[r]),this.animationValues&&(this.animationValues[r]=n[r]);e.scheduleRender()}getProjectionStyles(e){var t,i;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yo;const n={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=Ws(null===e||void 0===e?void 0:e.pointerEvents)||"",n.transform=r?r(this.latestValues,""):"none",n;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Ws(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!ls(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),n.transform=function(e,t,i){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y,s=(null===i||void 0===i?void 0:i.z)||0;if((r||a||s)&&(n="translate3d(".concat(r,"px, ").concat(a,"px, ").concat(s,"px) ")),1===t.x&&1===t.y||(n+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),i){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:a,skewX:s,skewY:o}=i;e&&(n="perspective(".concat(e,"px) ").concat(n)),t&&(n+="rotate(".concat(t,"deg) ")),r&&(n+="rotateX(".concat(r,"deg) ")),a&&(n+="rotateY(".concat(a,"deg) ")),s&&(n+="skewX(".concat(s,"deg) ")),o&&(n+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+="scale(".concat(o,", ").concat(l,")")),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),r&&(n.transform=r(s,n.transform));const{x:o,y:l}=this.projectionDelta;n.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?n.opacity=a===this?null!==(i=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:n.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in Rs){if(void 0===s[c])continue;const{correct:e,applyTo:t}=Rs[c],i="none"===n.transform?s[c]:e(s[c],a);if(t){const e=t.length;for(let r=0;r<e;r++)n[t[r]]=i}else n[c]=i}return this.options.layoutId&&(n.pointerEvents=a===this?Ws(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(To),this.root.sharedNodes.clear()}}}function So(e){e.updateLayout()}function _o(e){var t;const i=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:r}=e.options,a=i.source!==e.layout.source;"size"===r?rs(e=>{const n=a?i.measuredBox[e]:i.layoutBox[e],r=qa(n);n.min=t[e].min,n.max=n.min+r}):Wo(r,i.layoutBox,t)&&rs(n=>{const r=a?i.measuredBox[n]:i.layoutBox[n],s=qa(t[n]);r.max=r.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Xa(s,t,i.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Xa(o,e.applyTransform(n,!0),i.measuredBox):Xa(o,t,i.layoutBox);const l=!oo(s);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:r,layout:a}=n;if(r&&a){const s={x:{min:0,max:0},y:{min:0,max:0}};Za(s,i.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Za(o,t,a.layoutBox),ho(s,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:i,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Eo(e){go&&mo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Co(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Mo(e){e.clearSnapshot()}function To(e){e.clearMeasurements()}function Po(e){e.isLayoutDirty=!1}function Do(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Oo(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ko(e){e.resolveTargetDelta()}function Io(e){e.calcProjection()}function Ro(e){e.resetSkewAndRotation()}function Lo(e){e.removeLeadSnapshot()}function zo(e,t,i){e.translate=br(t.translate,0,i),e.scale=br(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function Bo(e,t,i,n){e.min=br(t.min,i.min,n),e.max=br(t.max,i.max,n)}function jo(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Fo={duration:.45,ease:[.4,0,.1,1]},No=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Uo=No("applewebkit/")&&!No("chrome/")?Math.round:oi;function Vo(e){e.min=Uo(e.min),e.max=Uo(e.max)}function Wo(e,t,i){return"position"===e||"preserve-aspect"===e&&(n=uo(t),r=uo(i),a=.2,!(Math.abs(n-r)<=a));var n,r,a}function Ho(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Go=Ao({attachResizeListener:(e,t)=>Ra(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qo={current:void 0},Yo=Ao({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!qo.current){const e=new Go({});e.mount(window),e.setOptions({layoutScroll:!0}),qo.current=e}return qo.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Xo={pan:{Feature:class extends Oa{constructor(){super(...arguments),this.removePointerDownListener=oi}onPointerDown(e){this.session=new ja(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ws(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:Es(e),onStart:Es(t),onMove:i,onEnd:(e,t)=>{delete this.session,n&&gi.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=za(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Oa{constructor(e){super(e),this.removeGroupControls=oi,this.removeListeners=oi,this.controls=new Ss(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oi}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Yo,MeasureLayout:js}};function Qo(e,t,i){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===i);const r=n["onHover"+i];r&&gi.postRender(()=>r(t,La(t)))}function Ko(e,t,i){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===i);const r=n["onTap"+("End"===i?"":i)];r&&gi.postRender(()=>r(t,La(t)))}const Zo=["root"],Jo=new WeakMap,$o=new WeakMap,el=e=>{const t=Jo.get(e.target);t&&t(e)},tl=e=>{e.forEach(el)};function il(e,t,i){const n=function(e){let{root:t}=e,i=xe(e,Zo);const n=t||document;$o.has(n)||$o.set(n,{});const r=$o.get(n),a=JSON.stringify(i);return r[a]||(r[a]=new IntersectionObserver(tl,(0,ye.A)({root:t},i))),r[a]}(t);return Jo.set(e,i),n.observe(e),()=>{Jo.delete(e),n.unobserve(e)}}const nl={some:0,all:1};const rl={inView:{Feature:class extends Oa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:n="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:"number"===typeof n?n:nl[n]};return il(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:i,onViewportLeave:n}=this.node.getProps(),a=t?i:n;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,i=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:i={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==i[e]}(e,t));i&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Oa{mount(){const{current:e}=this.node;e&&(this.unmount=ri(e,e=>(Ko(this.node,e,"Start"),(e,t)=>{let{success:i}=t;return Ko(this.node,e,i?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Oa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(ine){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mr(Ra(this.node.current,"focus",()=>this.onFocus()),Ra(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Oa{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[n,r,a]=Qt(e,i),s=Kt(e=>{const{target:i}=e,n=t(e);if("function"!==typeof n||!i)return;const a=Kt(e=>{n(e),i.removeEventListener("pointerleave",a)});i.addEventListener("pointerleave",a,r)});return n.forEach(e=>{e.addEventListener("pointerenter",s,r)}),a}(e,e=>(Qo(this.node,e,"Start"),e=>Qo(this.node,e,"End"))))}unmount(){}}}},al={layout:{ProjectionNode:Yo,MeasureLayout:js}},sl=(0,t.createContext)({strict:!1}),ol=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ll=(0,t.createContext)({});function cl(e){return bt(e.animate)||Mt.some(t=>At(e[t]))}function hl(e){return Boolean(cl(e)||e.variants)}function ul(e){const{initial:i,animate:n}=function(e,t){if(cl(e)){const{initial:t,animate:i}=e;return{initial:!1===t||At(t)?t:void 0,animate:At(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(ll));return(0,t.useMemo)(()=>({initial:i,animate:n}),[dl(i),dl(n)])}function dl(e){return Array.isArray(e)?e.join(" "):e}const pl="undefined"!==typeof window,fl={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ml={};for(const ane in fl)ml[ane]={isEnabled:e=>fl[ane].some(t=>!!e[t])};const gl=Symbol.for("motionComponentSymbol");function vl(e,i,n){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),i&&(t?i.mount(t):i.unmount()),n&&("function"===typeof n?n(t):Ga(n)&&(n.current=t))},[i])}const yl=pl?t.useLayoutEffect:t.useEffect;function bl(e,i,n,r,a){var s,o;const{visualElement:l}=(0,t.useContext)(ll),c=(0,t.useContext)(sl),h=(0,t.useContext)(Cs),u=(0,t.useContext)(ol).reducedMotion,d=(0,t.useRef)(null);r=r||c.renderer,!d.current&&r&&(d.current=r(e,{visualState:i,parent:l,props:n,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:u}));const p=d.current,f=(0,t.useContext)(Ps);!p||p.projection||!a||"html"!==p.type&&"svg"!==p.type||function(e,t,i,n){const{layoutId:r,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:xl(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:Boolean(s)||o&&Ga(o),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}(d.current,n,a,f);const m=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{p&&m.current&&p.update(n,h)});const g=n[zi],v=(0,t.useRef)(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,g)));return yl(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Ls.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())}),(0,t.useEffect)(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)}),v.current=!1))}),p}function xl(e){if(e)return!1!==e.options.allowProjection?e.projection:xl(e.parent)}function wl(e){let{preloadedFeatures:i,createVisualElement:n,useRender:r,useVisualState:a,Component:s}=e;var o,l;function c(e,i){let o;const l=(0,ye.A)((0,ye.A)((0,ye.A)({},(0,t.useContext)(ol)),e),{},{layoutId:Al(e)}),{isStatic:c}=l,h=ul(e),u=a(e,c);if(!c&&pl){!function(){(0,t.useContext)(sl).strict;0}();const e=function(e){const{drag:t,layout:i}=ml;if(!t&&!i)return{};const n=(0,ye.A)((0,ye.A)({},t),i);return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===i||void 0===i?void 0:i.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);o=e.MeasureLayout,h.visualElement=bl(s,u,l,n,e.ProjectionNode)}return(0,He.jsxs)(ll.Provider,{value:h,children:[o&&h.visualElement?(0,He.jsx)(o,(0,ye.A)({visualElement:h.visualElement},l)):null,r(s,e,vl(u,h.visualElement,i),u,c,h.visualElement)]})}i&&function(e){for(const t in e)ml[t]=(0,ye.A)((0,ye.A)({},ml[t]),e[t])}(i),c.displayName="motion.".concat("string"===typeof s?s:"create(".concat(null!==(l=null!==(o=s.displayName)&&void 0!==o?o:s.name)&&void 0!==l?l:"",")"));const h=(0,t.forwardRef)(c);return h[gl]=s,h}function Al(e){let{layoutId:i}=e;const n=(0,t.useContext)(Ts).id;return n&&void 0!==i?n+"-"+i:i}const Sl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _l(e){return"string"===typeof e&&!e.includes("-")&&!!(Sl.indexOf(e)>-1||/[A-Z]/.test(e))}function El(e){const i=(0,t.useRef)(null);return null===i.current&&(i.current=e()),i.current}const Cl=["transitionEnd","transition"];const Ml=e=>(i,n)=>{const r=(0,t.useContext)(ll),a=(0,t.useContext)(Cs),s=()=>function(e,t,i,n){let{scrapeMotionValuesFromProps:r,createRenderState:a,onUpdate:s}=e;const o={latestValues:Tl(t,i,n,r),renderState:a()};return s&&(o.onMount=e=>s((0,ye.A)({props:t,current:e},o)),o.onUpdate=e=>s(e)),o}(e,i,r,a);return n?s():El(s)};function Tl(e,t,i,n){const r={},a=n(e,{});for(const d in a)r[d]=Ws(a[d]);let{initial:s,animate:o}=e;const l=cl(e),c=hl(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let h=!!i&&!1===i.initial;h=h||!1===s;const u=h?o:s;if(u&&"boolean"!==typeof u&&!bt(u)){const t=Array.isArray(u)?u:[u];for(let i=0;i<t.length;i++){const n=_t(e,t[i]);if(n){const{transitionEnd:e,transition:t}=n,i=xe(n,Cl);for(const n in i){let e=i[n];if(Array.isArray(e)){e=e[h?e.length-1:0]}null!==e&&(r[n]=e)}for(const n in e)r[n]=e[n]}}}return r}const Pl=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Dl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ol=li.length;function kl(e,t,i){const{style:n,vars:r,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const e=t[l];if(ci.has(l))s=!0;else if(nr(l))r[l]=e;else{const t=Pl(e,zn[l]);l.startsWith("origin")?(o=!0,a[l]=t):n[l]=t}}if(t.transform||(s||i?n.transform=function(e,t,i){let n="",r=!0;for(let a=0;a<Ol;a++){const s=li[a],o=e[s];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(s.startsWith("scale")?1:0):0===parseFloat(o),!l||i){const e=Pl(o,zn[s]);l||(r=!1,n+="".concat(Dl[s]||s,"(").concat(e,") ")),i&&(t[s]=e)}}return n=n.trim(),i?n=i(t,r?"":n):r&&(n="none"),n}(t,e.transform,i):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:i=0}=a;n.transformOrigin="".concat(e," ").concat(t," ").concat(i)}}const Il={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rl={offset:"strokeDashoffset",array:"strokeDasharray"};function Ll(e,t,i){return"string"===typeof e?e:fn.transform(t+i*e)}const zl=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Bl(e,t,i,n){let{attrX:r,attrY:a,attrScale:s,originX:o,originY:l,pathLength:c,pathSpacing:h=1,pathOffset:u=0}=t;if(kl(e,xe(t,zl),n),i)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:p,dimensions:f}=e;d.transform&&(f&&(p.transform=d.transform),delete d.transform),f&&(void 0!==o||void 0!==l||p.transform)&&(p.transformOrigin=function(e,t,i){const n=Ll(t,e.x,e.width),r=Ll(i,e.y,e.height);return"".concat(n," ").concat(r)}(f,void 0!==o?o:.5,void 0!==l?l:.5)),void 0!==r&&(d.x=r),void 0!==a&&(d.y=a),void 0!==s&&(d.scale=s),void 0!==c&&function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=r?Il:Rl;e[a.offset]=fn.transform(-n);const s=fn.transform(t),o=fn.transform(i);e[a.array]="".concat(s," ").concat(o)}(d,c,h,u,!1)}const jl=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Fl=()=>(0,ye.A)((0,ye.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Nl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Ul(e,t,i,n){let{style:r,vars:a}=t;Object.assign(e.style,r,n&&n.getProjectionStyles(i));for(const s in a)e.style.setProperty(s,a[s])}const Vl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wl(e,t,i,n){Ul(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(Vl.has(r)?r:Li(r),t.attrs[r])}function Hl(e,t){let{layout:i,layoutId:n}=t;return ci.has(e)||e.startsWith("origin")||(i||void 0!==n)&&(!!Rs[e]||"opacity"===e)}function Gl(e,t,i){var n;const{style:r}=e,a={};for(const s in r)(Ii(r[s])||t.style&&Ii(t.style[s])||Hl(s,e)||void 0!==(null===(n=null===i||void 0===i?void 0:i.getValue(s))||void 0===n?void 0:n.liveStyle))&&(a[s]=r[s]);return a}function ql(e,t,i){const n=Gl(e,t,i);for(const r in e)if(Ii(e[r])||Ii(t[r])){n[-1!==li.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}const Yl=["x","y","width","height","cx","cy","r"],Xl={useVisualState:Ml({scrapeMotionValuesFromProps:ql,createRenderState:Fl,onUpdate:e=>{let{props:t,prevProps:i,current:n,renderState:r,latestValues:a}=e;if(!n)return;let s=!!t.drag;if(!s)for(const l in a)if(ci.has(l)){s=!0;break}if(!s)return;let o=!i;if(i)for(let l=0;l<Yl.length;l++){const e=Yl[l];t[e]!==i[e]&&(o=!0)}o&&gi.read(()=>{!function(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(ine){t.dimensions={x:0,y:0,width:0,height:0}}}(n,r),gi.render(()=>{Bl(r,a,Nl(n.tagName),t.transformTemplate),Wl(n,r)})})}})},Ql={useVisualState:Ml({scrapeMotionValuesFromProps:Gl,createRenderState:jl})};function Kl(e,t,i){for(const n in t)Ii(t[n])||Hl(n,i)||(e[n]=t[n])}function Zl(e,i){const n={};return Kl(n,e.style||{},e),Object.assign(n,function(e,i){let{transformTemplate:n}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return kl(e,i,n),Object.assign({},e.vars,e.style)},[i])}(e,i)),n}function Jl(e,t){const i={},n=Zl(e,t);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=n,i}const $l=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ec(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$l.has(e)}let tc=e=>!ec(e);try{(ic=require("@emotion/is-prop-valid").default)&&(tc=e=>e.startsWith("on")?!ec(e):ic(e))}catch(zT){}var ic;function nc(e,i,n,r){const a=(0,t.useMemo)(()=>{const t=Fl();return Bl(t,i,Nl(r),e.transformTemplate),(0,ye.A)((0,ye.A)({},t.attrs),{},{style:(0,ye.A)({},t.style)})},[i]);if(e.style){const t={};Kl(t,e.style,e),a.style=(0,ye.A)((0,ye.A)({},t),a.style)}return a}function rc(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(i,n,r,a,s)=>{let{latestValues:o}=a;const l=(_l(i)?nc:Jl)(n,o,s,i),c=function(e,t,i){const n={};for(const r in e)"values"===r&&"object"===typeof e.values||(tc(r)||!0===i&&ec(r)||!t&&!ec(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}(n,"string"===typeof i,e),h=i!==t.Fragment?(0,ye.A)((0,ye.A)((0,ye.A)({},c),l),{},{ref:r}):{},{children:u}=n,d=(0,t.useMemo)(()=>Ii(u)?u.get():u,[u]);return(0,t.createElement)(i,(0,ye.A)((0,ye.A)({},h),{},{children:d}))}}function ac(e,t){return function(i){let{forwardMotionProps:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};const r=_l(i)?Xl:Ql;return wl((0,ye.A)((0,ye.A)({},r),{},{preloadedFeatures:e,useRender:rc(n),createVisualElement:t,Component:i}))}}const sc={current:null},oc={current:!1};const lc=[...hr,bn,Tn],cc=new WeakMap;const hc=["willChange"],uc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dc{scrapeMotionValuesFromProps(e,t,i){return{}}constructor(e){let{parent:t,props:i,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:s}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jn,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ai.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,gi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=s;this.onUpdate=h,this.latestValues=l,this.baseTarget=(0,ye.A)({},l),this.initialValues=i.initial?(0,ye.A)({},l):{},this.renderState=c,this.parent=t,this.props=i,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=cl(i),this.isVariantNode=hl(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(i,{},this),{willChange:d}=u,p=xe(u,hc);for(const f in p){const e=p[f];void 0!==l[f]&&Ii(e)&&e.set(l[f],!1)}}mount(e){this.current=e,cc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),oc.current||function(){if(oc.current=!0,pl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sc.current=e.matches;e.addListener(t),t()}else sc.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sc.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cc.delete(this.current),this.projection&&this.projection.unmount(),vi(this.notifyUpdate),vi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ci.has(e),n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&gi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in ml){const t=ml[e];if(!t)continue;const{isEnabled:i,Feature:n}=t;if(!this.features[e]&&n&&i(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<uc.length;i++){const t=uc[i];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,i){for(const n in t){const r=t[n],a=i[n];if(Ii(r))e.addValue(n,r);else if(Ii(a))e.addValue(n,Pi(r,{owner:e}));else if(a!==r)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(n);e.addValue(n,Pi(void 0!==t?t:r,{owner:e}))}}for(const n in i)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return void 0===i&&void 0!==t&&(i=Pi(null===t?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let n=void 0===this.latestValues[e]&&this.current?null!==(i=this.getBaseTargetFromProps(this.props,e))&&void 0!==i?i:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==n&&null!==n&&("string"===typeof n&&(tr(n)||Ki(n))?n=parseFloat(n):!(e=>lc.find(cr(e)))(n)&&Tn.test(t)&&(n=Fn(e,t)),this.setBaseTarget(e,Ii(n)?n.get():n)),Ii(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let n;if("string"===typeof i||"object"===typeof i){const r=_t(this.props,i,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(n=r[e])}if(i&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Ii(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Ei),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.events[e].notify(...i)}}}class pc extends dc{constructor(){super(...arguments),this.KeyframeResolver=dr}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:i,style:n}=t;delete i[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ii(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}class fc extends pc{constructor(){super(...arguments),this.type="html",this.renderInstance=Ul}readValueFromInstance(e,t){if(ci.has(t)){const e=jn(t);return e&&e.default||0}{const n=(i=e,window.getComputedStyle(i)),r=(nr(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof r?r.trim():r}var i}measureInstanceViewportBox(e,t){let{transformPagePoint:i}=t;return xs(e,i)}build(e,t,i){kl(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Gl(e,t,i)}}class mc extends pc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ns}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ci.has(t)){const e=jn(t);return e&&e.default||0}return t=Vl.has(t)?t:Li(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return ql(e,t,i)}build(e,t,i){Bl(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,n){Wl(e,t,0,n)}mount(e){this.isSVGTag=Nl(e.tagName),super.mount(e)}}const gc=(e,i)=>_l(e)?new mc(i):new fc(i,{allowProjection:e!==t.Fragment}),vc=yt(ac((0,ye.A)((0,ye.A)((0,ye.A)((0,ye.A)({},Ia),rl),Xo),al),gc));function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},yc.apply(null,arguments)}var bc=["id","volume","playbackRate","soundEnabled","interrupt","onload"];const xc=function(e,i){var n,r=void 0===i?{}:i,a=r.volume,s=void 0===a?1:a,o=r.playbackRate,l=void 0===o?1:o,c=r.soundEnabled,h=void 0===c||c,u=r.interrupt,d=void 0!==u&&u,p=r.onload,f=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}(r,bc),m=t.useRef(null),g=t.useRef(!1),v=t.useState(null),y=v[0],b=v[1],x=t.useState(null),w=x[0],A=x[1],S=function(){"function"===typeof p&&p.call(this),g.current&&b(1e3*this.duration()),A(this)};n=function(){return __webpack_require__.e(885).then(__webpack_require__.t.bind(__webpack_require__,9885,23)).then(function(t){var i;g.current||(m.current=null!==(i=t.Howl)&&void 0!==i?i:t.default.Howl,g.current=!0,new m.current(yc({src:Array.isArray(e)?e:[e],volume:s,rate:l,onload:S},f)))}),function(){g.current=!1}},(0,t.useEffect)(n,[]),t.useEffect(function(){m.current&&w&&A(new m.current(yc({src:Array.isArray(e)?e:[e],volume:s,onload:S},f)))},[JSON.stringify(e)]),t.useEffect(function(){w&&(w.volume(s),w.rate(l))},[w,s,l]);var _=t.useCallback(function(e){"undefined"===typeof e&&(e={}),w&&(h||e.forceSoundEnabled)&&(d&&w.stop(),e.playbackRate&&w.rate(e.playbackRate),w.play(e.id))},[w,h,d]),E=t.useCallback(function(e){w&&w.stop(e)},[w]),C=t.useCallback(function(e){w&&w.pause(e)},[w]);return[_,{sound:w,stop:E,pause:C,duration:y}]};var wc=__webpack_require__(64),Ac=__webpack_require__.n(wc);const Sc=e=>(0,He.jsx)("svg",(0,ye.A)((0,ye.A)({id:"equalizer",width:"24px",height:"26px",viewBox:"0 0 25 17.5",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),{},{children:(0,He.jsxs)("g",{fill:"#fff",children:[(0,He.jsx)("path",{id:"bar1",className:"bar bar1",d:"M0 12.5H2.5V17.5H0V12.5z"}),(0,He.jsx)("path",{id:"bar2",className:"bar bar2",d:"M7.5 5H10V17.5H7.5V5z"}),(0,He.jsx)("path",{id:"bar3",className:"bar bar3",d:"M15 0H17.5V17.5H15V0z"}),(0,He.jsx)("path",{id:"bar4",className:"bar bar4",d:"M22.5 7.5H25V17.5H22.5V7.5z"})]})})),_c=__webpack_require__.p+"static/media/Audio1_LMK.855b6eb9351f6a17c33f.mp3",Ec=__webpack_require__.p+"static/media/Audio2_EDEyeClosed.0a73578ae364e95ef0eb.mp3",Cc=__webpack_require__.p+"static/media/Audio3_AWAlone.6f2e94120f8857f50606.mp3",Mc=__webpack_require__.p+"static/media/Audio4_EDShape.f5227e27d06f5ddd0dbf.mp3",Tc=__webpack_require__.p+"static/media/Audio5_AWFaded.1abd3452920f5c321ab9.mp3",Pc=()=>{const[e,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(_c),o=(0,t.useRef)(null),l=(0,t.useRef)(null),c=()=>{l.current?(h(),clearTimeout(l.current),l.current=null):l.current=setTimeout(()=>{l.current=null,d()},300)},h=()=>{s(e=>{const t=[_c,Ec,Cc,Mc,Tc],i=t.indexOf(e);return t[(i+1)%t.length]}),i(!0),o.current.removeEventListener("canplaythrough",u),o.current.addEventListener("canplaythrough",u),o.current.load()},u=()=>{o.current.play()},d=()=>{e?o.current.pause():o.current.play(),i(!e)},[p,f]=(0,t.useState)(!1);return(0,He.jsxs)("div",{children:[(0,He.jsx)("button",{onClick:async()=>{n?c():(Ac().fire("Music is playing.<br/> Double Tap on MusicNode to get the next song."),r(!0),i(!0),o.current.play(),o.current.volume=.4)},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{color:"#fff"},children:e?p?(0,He.jsx)("i",{className:"bi bi-pause",style:{cursor:"pointer",fontSize:"24px",color:"#fff"}}):(0,He.jsx)(Sc,{style:{cursor:"pointer",width:"24px",height:"26px",color:"#fff",display:"flex",alignItems:"center"}}):(0,He.jsx)("i",{className:"bi bi-music-note-beamed",style:{cursor:"pointer",fontSize:"24px",color:"#fff"}})}),(0,He.jsx)("audio",{ref:o,src:a,onEnded:h}),(0,He.jsx)("style",{jsx:!0,children:"\n        .swal-custom-title {\n          font-size: 2.2rem;\n        }\n        .swal-custom-input {\n          font-size: 1.2em;\n          padding: 10px;\n        }\n        .swal-custom-button {\n          font-size: 1.2em;\n          padding: 10px 20px;\n        }\n      "})]})},Dc=__webpack_require__.p+"static/media/Us_LogoMain.1028dc4f5bac58f8fa89.png",Oc=__webpack_require__.p+"static/media/base.6d752a8386e712a88ceb.mp3",kc=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),Ic=()=>{const e=We({maxWidth:767}),[i]=xc(Oc),[n,r]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=()=>{window.scrollY>50?r(!0):r(!1)},t=()=>{tt()("#menu").toggleClass("fa-times"),tt()(".navbar").toggleClass("nav-toggle")};tt()("#menu").on("click",t);const i=e=>{(123===e.keyCode||e.ctrlKey&&e.shiftKey&&(e.keyCode==="I".charCodeAt(0)||e.keyCode==="C".charCodeAt(0)||e.keyCode==="J".charCodeAt(0))||e.ctrlKey&&e.keyCode==="U".charCodeAt(0))&&e.preventDefault()};return document.addEventListener("keydown",i),window.addEventListener("scroll",e),()=>{tt()("#menu").off("click",t),document.removeEventListener("keydown",i),window.removeEventListener("scroll",e)}},[]);const a={backgroundColor:n?"rgba(255, 255, 255, 0.9)":"transparent",boxShadow:n?"0 6px 12px rgba(0, 0, 0, 0.5)":"none",transition:"background-color 0.3s ease-in-out"};return(0,He.jsx)("div",{onContextMenu:e=>e.preventDefault(),children:(0,He.jsx)("div",{className:"Basic_Nav",style:a,children:(0,He.jsxs)("header",{children:[(0,He.jsx)(vc.div,{variants:kc(1.2),initial:"hidden",animate:"show",children:(0,He.jsxs)(pt,{to:"/",className:"logo",onClick:i,style:{display:"flex",alignItems:"center"},children:[(0,He.jsx)("img",{src:Dc,alt:"Logo",style:{height:e?"38px":"48px",marginleft:"5px"}}),(0,He.jsx)("p",{style:{fontFamily:"'Tangerine', cursive",fontSize:"2.7rem"},children:"Ujjawal Shrivastava"})]})}),(0,He.jsx)("div",{id:"menu",className:"fas fa-bars"}),(0,He.jsx)("nav",{className:"navbar",children:(0,He.jsxs)("ul",{children:[(0,He.jsx)(vc.div,{variants:kc(1.8),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Home"})})}),(0,He.jsx)(vc.div,{variants:kc(2.2),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/about",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"About"})})}),(0,He.jsx)(vc.div,{variants:kc(2.6),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/skills",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Skills"})})}),(0,He.jsx)(vc.div,{variants:kc(3),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/education",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Education"})})}),(0,He.jsx)(vc.div,{variants:kc(3.4),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/projects",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Projects"})})}),(0,He.jsx)(vc.div,{variants:kc(3.8),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/experience",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Experience"})})}),(0,He.jsx)(vc.div,{variants:kc(4.2),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/contact",onClick:i,style:{fontFamily:"'Vidaloka', serif"},children:"Contact"})})}),(0,He.jsx)(vc.div,{variants:kc(4.5),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)(Pc,{onClick:i})})})]})})]})})})};var Rc=__webpack_require__(8693);const Lc=(0,Rc.A)((0,He.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),zc=(0,Rc.A)((0,He.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),Bc=(0,Rc.A)((0,He.jsx)("path",{d:"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m13.1-8.16c.01-.11.02-.22.02-.34 0-.12-.01-.23-.03-.34l.74-.58c.07-.05.08-.15.04-.22l-.7-1.21c-.04-.08-.14-.1-.21-.08l-.86.35c-.18-.14-.38-.25-.59-.34l-.13-.93c-.02-.09-.09-.15-.18-.15h-1.4c-.09 0-.16.06-.17.15l-.13.93c-.21.09-.41.21-.59.34l-.87-.35c-.08-.03-.17 0-.21.08l-.7 1.21c-.04.08-.03.17.04.22l.74.58c-.02.11-.03.23-.03.34 0 .11.01.23.03.34l-.74.58c-.07.05-.08.15-.04.22l.7 1.21c.04.08.14.1.21.08l.87-.35c.18.14.38.25.59.34l.13.93c.01.09.08.15.17.15h1.4c.09 0 .16-.06.17-.15l.13-.93c.21-.09.41-.21.59-.34l.87.35c.08.03.17 0 .21-.08l.7-1.21c.04-.08.03-.17-.04-.22zm-2.6.91c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25m.42 3.93-.5-.87c-.03-.06-.1-.08-.15-.06l-.62.25c-.13-.1-.27-.18-.42-.24l-.09-.66c-.02-.06-.08-.1-.14-.1h-1c-.06 0-.11.04-.12.11l-.09.66c-.15.06-.29.15-.42.24l-.62-.25c-.06-.02-.12 0-.15.06l-.5.87c-.03.06-.02.12.03.16l.53.41c-.01.08-.02.16-.02.24 0 .08.01.17.02.24l-.53.41c-.05.04-.06.11-.03.16l.5.87c.03.06.1.08.15.06l.62-.25c.13.1.27.18.42.24l.09.66c.01.07.06.11.12.11h1c.06 0 .12-.04.12-.11l.09-.66c.15-.06.29-.15.42-.24l.62.25c.06.02.12 0 .15-.06l.5-.87c.03-.06.02-.12-.03-.16l-.52-.41c.01-.08.02-.16.02-.24 0-.08-.01-.17-.02-.24l.53-.41c.05-.04.06-.11.04-.17m-2.42 1.65c-.46 0-.83-.38-.83-.83 0-.46.38-.83.83-.83s.83.38.83.83c0 .46-.37.83-.83.83M4.74 9h8.53c.27 0 .49-.22.49-.49v-.02c0-.27-.22-.49-.49-.49H13c0-1.48-.81-2.75-2-3.45v.95c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.14C9.68 4.06 9.35 4 9 4s-.68.06-1 .14V5.5c0 .28-.22.5-.5.5S7 5.78 7 5.5v-.95C5.81 5.25 5 6.52 5 8h-.26c-.27 0-.49.22-.49.49v.03c0 .26.22.48.49.48M9 13c1.86 0 3.41-1.28 3.86-3H5.14c.45 1.72 2 3 3.86 3"}),"Engineering"),jc=(0,Rc.A)((0,He.jsx)("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-6 0h-4V4h4z"}),"Work"),Fc=(0,Rc.A)((0,He.jsx)("path",{d:"M20 0H4v2h16zM4 24h16v-2H4zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"}),"Contacts");var Nc=__webpack_require__(553),Uc=__webpack_require__(9810),Vc=__webpack_require__(1867);function Wc(e){let{isOpen:t,toggle:i}=e;return(0,He.jsxs)("div",{id:"nav-icon2",className:t?"open":"",onClick:i,children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{})]})}const Hc=__webpack_require__.p+"static/media/select-click.2604a56c761e9cbfc005.wav";function Gc(){const[e,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)(!1),[a]=xc(Oc),[s]=xc(Hc),o=()=>{i(e=>(document.body.style.overflow=e?"auto":"hidden",!e))},l=()=>{window.scrollY>50?r(!0):r(!1)};(0,t.useEffect)(()=>(window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}),[]);const c={backgroundColor:n?"#000000":"transparent",boxShadow:n?"0 6px 12px rgba(0, 0, 0, 0.5)":"none",transition:"background-color 0.3s ease-in-out"},h={verticalAlign:"sub",transition:"transform 0.3s ease-in-out",transform:e?"scale(1.1)":"scale(1)"};return(0,He.jsx)("div",{className:"myheader",id:"nav",style:c,children:(0,He.jsxs)("div",{className:"head-container",children:[(0,He.jsx)("span",{className:"hamburger-icon",style:{height:"20px"},children:(0,He.jsx)(Wc,{isOpen:e,toggle:o})}),(0,He.jsxs)(pt,{to:"/",className:"logoheader",onClick:s,style:{display:"flex",alignItems:"center"},children:[(0,He.jsx)("img",{src:Dc,alt:"Logo",style:{height:"40px",marginleft:"8px"}}),(0,He.jsx)("p",{style:{fontFamily:"'Tangerine', cursive",fontSize:"2.7rem"},children:"Ujjawal Shrivastava"})]}),(0,He.jsx)("div",{className:"mobile-navbar ".concat(e?"open":""),children:(0,He.jsxs)("ul",{children:[(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Home ",(0,He.jsx)(Lc,{className:"nav-icon",sx:{fontSize:20}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/about",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["About ",(0,He.jsx)(zc,{className:"nav-icon",sx:{fontSize:16}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/skills",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Skills ",(0,He.jsx)(Nc.A,{className:"nav-icon",sx:{fontSize:20}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/education",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Education ",(0,He.jsx)(Uc.A,{className:"nav-icon",sx:{fontSize:18}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/projects",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Projects ",(0,He.jsx)(Bc,{className:"nav-icon",sx:{fontSize:20}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/experience",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Experience ",(0,He.jsx)(jc,{className:"nav-icon",sx:{fontSize:20}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)(ft,{to:"/contact",exact:!0,onClick:()=>{o(),a()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Contact ",(0,He.jsx)(Fc,{className:"nav-icon",sx:{fontSize:20}})]})})}),(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"https://drive.google.com/file/d/1FSn4Er9NH-Qs4ZwZu1ZHWFyMP2Pm4s1K/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",onClick:()=>{o(),s()},children:(0,He.jsxs)("div",{className:"nav-item",style:(0,ye.A)((0,ye.A)({},h),{},{fontFamily:"'Vidaloka', serif"}),children:["Resume ",(0,He.jsx)(Vc.A,{className:"nav-icon",sx:{fontSize:20}})]})})})]})})]})})}var qc=!1;if("undefined"!==typeof window){var Yc={get passive(){qc=!0}};window.addEventListener("testPassive",null,Yc),window.removeEventListener("testPassive",null,Yc)}var Xc="undefined"!==typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Qc=[],Kc=!1,Zc=-1,Jc=void 0,$c=void 0,eh=void 0,th=function(e){return Qc.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},ih=function(e){var t=e||window.event;return!!th(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},nh=function(){void 0!==eh&&(document.body.style.paddingRight=eh,eh=void 0),void 0!==Jc&&(document.body.style.overflow=Jc,Jc=void 0)},rh=function(){if(void 0!==$c){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=$c.position,document.body.style.top=$c.top,document.body.style.left=$c.left,window.scrollTo(t,e),$c=void 0}},ah=function(e,t){if(e){if(!Qc.some(function(t){return t.targetElement===e})){var i={targetElement:e,options:t||{}};Qc=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(Qc),[i]),Xc?window.requestAnimationFrame(function(){if(void 0===$c){$c={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,i=e.scrollX,n=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-i,setTimeout(function(){return window.requestAnimationFrame(function(){var e=n-window.innerHeight;e&&t>=n&&(document.body.style.top=-(t+e))})},300)}}):function(e){if(void 0===eh){var t=!!e&&!0===e.reserveScrollBarGap,i=window.innerWidth-document.documentElement.clientWidth;if(t&&i>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);eh=document.body.style.paddingRight,document.body.style.paddingRight=n+i+"px"}}void 0===Jc&&(Jc=document.body.style.overflow,document.body.style.overflow="hidden")}(t),Xc&&(e.ontouchstart=function(e){1===e.targetTouches.length&&(Zc=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var i=e.targetTouches[0].clientY-Zc;!th(e.target)&&(t&&0===t.scrollTop&&i>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&i<0?ih(e):e.stopPropagation())}(t,e)},Kc||(document.addEventListener("touchmove",ih,qc?{passive:!1}:void 0),Kc=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")};const sh=__webpack_require__.p+"static/media/CubeBgAbout.1137c8cdd8f0ff2f6186.png",oh=document.styleSheets[0];oh.insertRule("\n  @keyframes marquee {\n    0% {\n      transform: translateX(100%);\n    }\n    100% {\n      transform: translateX(-100%);\n    }\n  }\n",oh.cssRules.length);const lh=()=>{const e=(0,t.useRef)(null),i=()=>{if(e.current){const t=window.scrollY,i=window.innerWidth<798?240:350,n=500;if(t>i){const r=t-i,a=Math.max(0,Math.min(1,1-r/(n-i)));e.current.style.opacity=a,0===a?e.current.style.zIndex="-1":e.current.style.display="2"}else e.current.style.opacity=1}};(0,t.useEffect)(()=>(window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)),[]);const n={display:"inline-block",fontSize:"200px",fontFamily:"'Times New Roman', Times, serif",color:"white",animation:"marquee 18s linear infinite",padding:"0 10px"};return(0,He.jsxs)("div",{style:{height:"20vh",margin:0,padding:0},children:[(0,He.jsx)("div",{style:{position:"relative",zIndex:2}}),(0,He.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,He.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline",position:"fixed",width:"100vw",marginTop:"-3rem",margin:0,padding:0,zIndex:2,overflow:"hidden"},children:(0,He.jsx)(vc.div,{variants:(e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.5,delay:e}}}))(.5),initial:"hidden",animate:"show",children:(0,He.jsxs)("div",{style:{position:"relative",overflow:"hidden",whiteSpace:"nowrap",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,He.jsx)("div",{style:n,children:"SOFTWARE DEVELOPER "}),(0,He.jsx)("div",{style:n,children:"FULL STACK DEVELOPER"})]})})})})]})};function ch(e){let{isExpanded:i}=e;const n=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}});return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .home3 {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 3rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    animation: gradient 1.5s infinite;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,He.jsx)(He.Fragment,{children:(0,He.jsx)(vc.div,{variants:n(8),initial:"hidden",animate:"show",children:(0,He.jsxs)("div",{style:i?{display:"none"}:{font:"monospace",fontSize:"14px",color:"white",padding:"1rem",marginLeft:"0",marginBottom:"1rem",textAlign:"left",display:"block",backgroundColor:"transparent",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",maxWidth:"100%",height:"auto",aspectRatio:"attr(width) / attr(height)",border:"0.1px solid rgb(100, 100, 100)",borderRadius:"10px"},children:[(0,He.jsx)(vc.div,{variants:n(8.4),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"home3",children:"About Me"})}),(0,He.jsx)(vc.div,{variants:n(8.8),initial:"hidden",animate:"show",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("br",{}),"I am Ujjawal, an CSE Engineering student passionate about computers and aiming to kickstart a career in Software Development and Web Development. Currently based in Delhi, India, I am completed my undergraduate studies in Computer Science and Engineering at MERI-CET. My enthusiasm lies in enhancing my coding abilities and crafting applications and websites. As Well-organised & collaborative individual. I thrive in team environemnts and enjoy bringing inovative solutions to table. Awesome!! Let's Build the Next Big Thing.... ",(0,He.jsx)("br",{}),"I have acquired skills in Web Development using React, TypeScript, Django and I'm currently expanding my knowledge in various areas."]})})]})})})}const hh=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];var uh=Object.defineProperty,dh=(e,t,i)=>((e,t,i)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!==typeof t?t+"":t,i),ph=new Map,fh=new WeakMap,mh=0,gh=void 0;function vh(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>"".concat(t,"_").concat("root"===t?function(e){return e?(fh.has(e)||(mh+=1,fh.set(e,mh.toString())),fh.get(e)):"0"}(e.root):e[t])).toString()}function yh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gh;if("undefined"===typeof window.IntersectionObserver&&void 0!==n){const r=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"===typeof i.threshold?i.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:a,elements:s}=function(e){const t=vh(e);let i=ph.get(t);if(!i){const n=new Map;let r;const a=new IntersectionObserver(t=>{t.forEach(t=>{var i;const a=t.isIntersecting&&r.some(e=>t.intersectionRatio>=e);e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(i=n.get(t.target))||i.forEach(e=>{e(a,t)})})},e);r=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:a,elements:n},ph.set(t,i)}return i}(i),o=s.get(e)||[];return s.has(e)||s.set(e,o),o.push(t),a.observe(e),function(){o.splice(o.indexOf(t),1),0===o.length&&(s.delete(e),a.unobserve(e)),0===s.size&&(a.disconnect(),ph.delete(r))}}t.Component;function bh(){let{threshold:e,delay:i,trackVisibility:n,rootMargin:r,root:a,triggerOnce:s,skip:o,initialInView:l,fallbackInView:c,onChange:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var u;const[d,p]=t.useState(null),f=t.useRef(h),[m,g]=t.useState({inView:!!l,entry:void 0});f.current=h,t.useEffect(()=>{if(o||!d)return;let t;return t=yh(d,(e,i)=>{g({inView:e,entry:i}),f.current&&f.current(e,i),i.isIntersecting&&s&&t&&(t(),t=void 0)},{root:a,rootMargin:r,threshold:e,trackVisibility:n,delay:i},c),()=>{t&&t()}},[Array.isArray(e)?e.toString():e,d,a,r,s,o,n,c,i]);const v=null==(u=m.entry)?void 0:u.target,y=t.useRef(void 0);d||!v||s||o||y.current===v||(y.current=v,g({inView:!!l,entry:void 0}));const b=[p,m.inView,m.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}function xh(e){const{ref:t,inView:i}=bh({triggerOnce:!0,threshold:.1}),{ref:n,inView:r}=bh({triggerOnce:!0,threshold:.1}),a={color:"#e73e0d",fontSize:"17px",fontWeight:"bold",fontFamily:"'Vidaloka', serif",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2s, transform 1.25s ease-out 2s"},s={color:"white",fontSize:"13.5px",marginTop:"5px",opacity:"0.8",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2s, transform 1.25s ease-out 2s"},o={display:"inline",font:"monospace",color:"white",fontSize:"13.5px",margin:"2px",marginTop:"5px",opacity:"0.8",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2s, transform 1.25s ease-out 2s"},l={color:"white",fontSize:"13.5px",marginTop:"5px",opacity:"0.8",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2s, transform 1.25s ease-out 2s"};return(0,He.jsxs)("div",{style:{fontSize:"15px",padding:"15px",paddingTop:"15px",marginLeft:"0",marginTop:"0",textAlign:"left",backgroundColor:"transparent",maxWidth:"100%",height:"auto",aspectRatio:"attr(width) / attr(height)",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",border:"0.1px solid rgb(100, 100, 100)",borderRadius:"10px",transition:"0.5s all",boxShadow:"none"},children:[(0,He.jsx)("div",{ref:t,style:a,children:e.title}),(0,He.jsx)("div",{ref:t,style:s,children:e.description}),(0,He.jsx)("div",{className:"points",ref:t,style:l,children:e.points.map((e,i)=>(0,He.jsx)("li",{className:"card-item",ref:t,style:o,children:e},i))})]})}function wh(){const[e]=xc(Oc),{ref:t,inView:i}=bh({triggerOnce:!1,threshold:.1}),{ref:n,inView:r}=bh({triggerOnce:!1,threshold:.2});return(0,He.jsx)("div",{style:{overflow:"hidden"},children:(0,He.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gridGap:"10px"},className:"more-details",children:[(0,He.jsx)(pt,{to:"/education",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0) scale(1)":"translateY(60px) scale(0.9)",transition:"opacity 0.5s ease-out, transform 2s ease-out"},onTouchStart:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onTouchEnd:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(xh,(0,ye.A)({},{title:"My Education",description:"College and Degree",points:["Engineering College, MERI-CET-25, ","CSE"],content:[]}))}),(0,He.jsx)(pt,{to:"/skills",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0) scale(1)":"translateY(60px) scale(0.9)",transition:"opacity 1.5s ease-out, transform 3s ease-out"},onTouchStart:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onTouchEnd:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(xh,(0,ye.A)({},{title:"My Technical Skills",description:"",points:["React, ","Javascript, ","Python, ","Django, ","Tailwind, ","java, ","html, ","MySql, ","ExpressJs, ","Others... "],content:[]}))}),(0,He.jsx)(pt,{to:"/certifications",onClick:e,ref:n,style:{textDecoration:"none",opacity:r?1:0,transform:r?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 0.5s ease-out, transform 4s ease-out"},onTouchStart:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onTouchEnd:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(xh,(0,ye.A)({},{title:"My Certifications",description:"",points:["GSsoc Appreciation, ","Ai certification, ","IBM skills Interns Certifications ,","Salesforce Developer Certification, ","Postman API, ","Others..."],content:[]}))}),(0,He.jsx)(pt,{to:"/about",onClick:e,ref:n,style:{textDecoration:"none",opacity:r?1:0,transform:r?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.5s ease-out, transform 5s ease-out"},onTouchStart:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onTouchEnd:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(xh,(0,ye.A)({},{title:"My Achievements",description:"",points:["Branch Topper, ","Tech & Github Advocate, ","GSsoc Ranker, "," Class Topper, ","Others..."],content:[]}))})]})})}function Ah(e){let{isExpanded:t,setExpanded:i}=e;return(0,He.jsxs)("div",{style:{flex:4,padding:"0.5rem",display:"block",maxWidth:"100%",height:"auto",background:"transparent",borderRadius:"0 1.5rem 1.5rem 0",overflow:"hidden",zIndex:2},onMouseLeave:()=>i(!1),children:[(0,He.jsx)(ch,{isExpanded:t}),(0,He.jsx)(wh,{isExpanded:t,setExpanded:i})]})}var Sh=Fh(),_h=e=>Lh(e,Sh),Eh=Fh();_h.write=e=>Lh(e,Eh);var Ch=Fh();_h.onStart=e=>Lh(e,Ch);var Mh=Fh();_h.onFrame=e=>Lh(e,Mh);var Th=Fh();_h.onFinish=e=>Lh(e,Th);var Ph=[];_h.setTimeout=(e,t)=>{const i=_h.now()+t,n=()=>{const e=Ph.findIndex(e=>e.cancel==n);~e&&Ph.splice(e,1),Ih-=~e?1:0},r={time:i,handler:e,cancel:n};return Ph.splice(Dh(i),0,r),Ih+=1,zh(),r};var Dh=e=>~(~Ph.findIndex(t=>t.time>e)||~Ph.length);_h.cancel=e=>{Ch.delete(e),Mh.delete(e),Th.delete(e),Sh.delete(e),Eh.delete(e)},_h.sync=e=>{Rh=!0,_h.batchedUpdates(e),Rh=!1},_h.throttle=e=>{let t;function i(){try{e(...t)}finally{t=null}}function n(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t=n,_h.onStart(i)}return n.handler=e,n.cancel=()=>{Ch.delete(i),t=null},n};var Oh="undefined"!=typeof window?window.requestAnimationFrame:()=>{};_h.use=e=>Oh=e,_h.now="undefined"!=typeof performance?()=>performance.now():Date.now,_h.batchedUpdates=e=>e(),_h.catch=console.error,_h.frameLoop="always",_h.advance=()=>{"demand"!==_h.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):jh()};var kh=-1,Ih=0,Rh=!1;function Lh(e,t){Rh?(t.delete(e),e(0)):(t.add(e),zh())}function zh(){kh<0&&(kh=0,"demand"!==_h.frameLoop&&Oh(Bh))}function Bh(){~kh&&(Oh(Bh),_h.batchedUpdates(jh))}function jh(){const e=kh;kh=_h.now();const t=Dh(kh);t&&(Nh(Ph.splice(0,t),e=>e.handler()),Ih-=t),Ih?(Ch.flush(),Sh.flush(e?Math.min(64,kh-e):16.667),Mh.flush(),Eh.flush(),Th.flush()):kh=-1}function Fh(){let e=new Set,t=e;return{add(i){Ih+=t!=e||e.has(i)?0:1,e.add(i)},delete:i=>(Ih-=t==e&&e.has(i)?1:0,e.delete(i)),flush(i){t.size&&(e=new Set,Ih-=t.size,Nh(t,t=>t(i)&&e.add(t)),Ih+=e.size,t=e)}}}function Nh(e,t){e.forEach(e=>{try{t(e)}catch(ine){_h.catch(ine)}})}var Uh=Object.defineProperty,Vh={};function Wh(){}((e,t)=>{for(var i in t)Uh(e,i,{get:t[i],enumerable:!0})})(Vh,{assign:()=>nu,colors:()=>eu,createStringInterpolator:()=>Kh,skipAnimation:()=>tu,to:()=>Zh,willAdvance:()=>iu});var Hh={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function Gh(e,t){if(Hh.arr(e)){if(!Hh.arr(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return e===t}var qh=(e,t)=>e.forEach(t);function Yh(e,t,i){if(Hh.arr(e))for(let n=0;n<e.length;n++)t.call(i,e[n],"".concat(n));else for(const n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n)}var Xh=e=>Hh.und(e)?[]:Hh.arr(e)?e:[e];function Qh(e,t){if(e.size){const i=Array.from(e);e.clear(),qh(i,t)}}var Kh,Zh,Jh=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Qh(e,e=>e(...i))},$h=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eu=null,tu=!1,iu=Wh,nu=e=>{e.to&&(Zh=e.to),e.now&&(_h.now=e.now),void 0!==e.colors&&(eu=e.colors),null!=e.skipAnimation&&(tu=e.skipAnimation),e.createStringInterpolator&&(Kh=e.createStringInterpolator),e.requestAnimationFrame&&_h.use(e.requestAnimationFrame),e.batchedUpdates&&(_h.batchedUpdates=e.batchedUpdates),e.willAdvance&&(iu=e.willAdvance),e.frameLoop&&(_h.frameLoop=e.frameLoop)},ru=new Set,au=[],su=[],ou=0,lu={get idle(){return!ru.size&&!au.length},start(e){ou>e.priority?(ru.add(e),_h.onStart(cu)):(hu(e),_h(du))},advance:du,sort(e){if(ou)_h.onFrame(()=>lu.sort(e));else{const t=au.indexOf(e);~t&&(au.splice(t,1),uu(e))}},clear(){au=[],ru.clear()}};function cu(){ru.forEach(hu),ru.clear(),_h(du)}function hu(e){au.includes(e)||uu(e)}function uu(e){au.splice(function(e,t){const i=e.findIndex(t);return i<0?e.length:i}(au,t=>t.priority>e.priority),0,e)}function du(e){const t=su;for(let i=0;i<au.length;i++){const n=au[i];ou=n.priority,n.idle||(iu(n),n.advance(e),n.idle||t.push(n))}return ou=0,(su=au).length=0,(au=t).length>0}var pu="[-+]?\\d*\\.?\\d+",fu=pu+"%";function mu(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var gu=new RegExp("rgb"+mu(pu,pu,pu)),vu=new RegExp("rgba"+mu(pu,pu,pu,pu)),yu=new RegExp("hsl"+mu(pu,fu,fu)),bu=new RegExp("hsla"+mu(pu,fu,fu,pu)),xu=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wu=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Au=/^#([0-9a-fA-F]{6})$/,Su=/^#([0-9a-fA-F]{8})$/;function _u(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Eu(e,t,i){const n=i<.5?i*(1+t):i+t-i*t,r=2*i-n,a=_u(r,n,e+1/3),s=_u(r,n,e),o=_u(r,n,e-1/3);return Math.round(255*a)<<24|Math.round(255*s)<<16|Math.round(255*o)<<8}function Cu(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Mu(e){return(parseFloat(e)%360+360)%360/360}function Tu(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Pu(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Du(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Au.exec(e))?parseInt(t[1]+"ff",16)>>>0:eu&&void 0!==eu[e]?eu[e]:(t=gu.exec(e))?(Cu(t[1])<<24|Cu(t[2])<<16|Cu(t[3])<<8|255)>>>0:(t=vu.exec(e))?(Cu(t[1])<<24|Cu(t[2])<<16|Cu(t[3])<<8|Tu(t[4]))>>>0:(t=xu.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Su.exec(e))?parseInt(t[1],16)>>>0:(t=wu.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=yu.exec(e))?(255|Eu(Mu(t[1]),Pu(t[2]),Pu(t[3])))>>>0:(t=bu.exec(e))?(Eu(Mu(t[1]),Pu(t[2]),Pu(t[3]))|Tu(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;const i=(16711680&t)>>>16,n=(65280&t)>>>8,r=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(i,", ").concat(n,", ").concat(r,")")}var Ou=(e,t,i)=>{if(Hh.fun(e))return e;if(Hh.arr(e))return Ou({range:e,output:t,extrapolate:i});if(Hh.str(e.output[0]))return Kh(e);const n=e,r=n.output,a=n.range||[0,1],s=n.extrapolateLeft||n.extrapolate||"extend",o=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(e=>e);return e=>{const t=function(e,t){for(var i=1;i<t.length-1&&!(t[i]>=e);++i);return i-1}(e,a);return function(e,t,i,n,r,a,s,o,l){let c=l?l(e):e;if(c<t){if("identity"===s)return c;"clamp"===s&&(c=t)}if(c>i){if("identity"===o)return c;"clamp"===o&&(c=i)}if(n===r)return n;if(t===i)return e<=t?n:r;t===-1/0?c=-c:i===1/0?c-=t:c=(c-t)/(i-t);c=a(c),n===-1/0?c=-c:r===1/0?c+=n:c=c*(r-n)+n;return c}(e,a[t],a[t+1],r[t],r[t+1],l,s,o,n.map)}};var ku=1.70158,Iu=1.525*ku,Ru=ku+1,Lu=2*Math.PI/3,zu=2*Math.PI/4.5,Bu=e=>{const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},ju={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ru*e*e*e-ku*e*e,easeOutBack:e=>1+Ru*Math.pow(e-1,3)+ku*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-Iu)/2:(Math.pow(2*e-2,2)*((Iu+1)*(2*e-2)+Iu)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*Lu),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*Lu)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*zu)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*zu)/2+1,easeInBounce:e=>1-Bu(1-e),easeOutBounce:Bu,easeInOutBounce:e=>e<.5?(1-Bu(1-2*e))/2:(1+Bu(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return i=>{const n=(i="end"===t?Math.min(i,.999):Math.max(i,.001))*e;return((e,t,i)=>Math.min(Math.max(i,e),t))(0,1,("end"===t?Math.floor(n):Math.ceil(n))/e)}}},Fu=Symbol.for("FluidValue.get"),Nu=Symbol.for("FluidValue.observers"),Uu=e=>Boolean(e&&e[Fu]),Vu=e=>e&&e[Fu]?e[Fu]():e,Wu=e=>e[Nu]||null;function Hu(e,t){const i=e[Nu];i&&i.forEach(e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)})}var Gu=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");qu(this,e)}},qu=(e,t)=>Ku(e,Fu,t);function Yu(e,t){if(e[Fu]){let i=e[Nu];i||Ku(e,Nu,i=new Set),i.has(t)||(i.add(t),e.observerAdded&&e.observerAdded(i.size,t))}return t}function Xu(e,t){const i=e[Nu];if(i&&i.has(t)){const n=i.size-1;n?i.delete(t):e[Nu]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var Qu,Ku=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),Zu=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ju=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$u=new RegExp("(".concat(Zu.source,")(%|[a-z]+)"),"i"),ed=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,td=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,id=e=>{const[t,i]=nd(e);if(!t||$h())return e;const n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(i&&i.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(i);return t||e}return i&&td.test(i)?id(i):i||e},nd=e=>{const t=td.exec(e);if(!t)return[,];const[,i,n]=t;return[i,n]},rd=(e,t,i,n,r)=>"rgba(".concat(Math.round(t),", ").concat(Math.round(i),", ").concat(Math.round(n),", ").concat(r,")"),ad=e=>{Qu||(Qu=eu?new RegExp("(".concat(Object.keys(eu).join("|"),")(?!\\w)"),"g"):/^\b$/);const t=e.output.map(e=>Vu(e).replace(td,id).replace(Ju,Du).replace(Qu,Du)),i=t.map(e=>e.match(Zu).map(Number)),n=i[0].map((e,t)=>i.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>Ou((0,ye.A)((0,ye.A)({},e),{},{output:t})));return e=>{var i;const r=!$u.test(t[0])&&(null===(i=t.find(e=>$u.test(e)))||void 0===i?void 0:i.replace(Zu,""));let a=0;return t[0].replace(Zu,()=>"".concat(n[a++](e)).concat(r||"")).replace(ed,rd)}},sd="react-spring: ",od=e=>{const t=e;let i=!1;if("function"!=typeof t)throw new TypeError("".concat(sd,"once requires a function parameter"));return function(){i||(t(...arguments),i=!0)}},ld=od(console.warn);var cd=od(console.warn);function hd(e){return Hh.str(e)&&("#"==e[0]||/\d/.test(e)||!$h()&&td.test(e)||e in(eu||{}))}var ud=$h()?t.useEffect:t.useLayoutEffect;function dd(){const e=(0,t.useState)()[1],i=(()=>{const e=(0,t.useRef)(!1);return ud(()=>(e.current=!0,()=>{e.current=!1}),[]),e})();return()=>{i.current&&e(Math.random())}}var pd=e=>(0,t.useEffect)(e,fd),fd=[];function md(e){const i=(0,t.useRef)();return(0,t.useEffect)(()=>{i.current=e}),i.current}var gd=Symbol.for("Animated:node"),vd=e=>e&&e[gd],yd=(e,t)=>{return i=e,n=gd,r=t,Object.defineProperty(i,n,{value:r,writable:!0,configurable:!0});var i,n,r},bd=e=>e&&e[gd]&&e[gd].getPayload(),xd=class{constructor(){yd(this,this)}getPayload(){return this.payload||[]}},wd=class extends xd{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Hh.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new wd(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Hh.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Hh.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Ad=class extends wd{constructor(e){super(0),this._string=null,this._toString=Ou({output:[e,e]})}static create(e){return new Ad(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(Hh.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Ou({output:[this.getValue(),e]})),this._value=0,super.reset()}},Sd={dependencies:null},_d=class extends xd{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Yh(this.source,(i,n)=>{var r;(r=i)&&r[gd]===r?t[n]=i.getValue(e):Uu(i)?t[n]=Vu(i):e||(t[n]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&qh(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Yh(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Sd.dependencies&&Uu(e)&&Sd.dependencies.add(e);const t=bd(e);t&&qh(t,e=>this.add(e))}},Ed=class extends _d{constructor(e){super(e)}static create(e){return new Ed(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((t,i)=>t.setValue(e[i])).some(Boolean):(super.setValue(e.map(Cd)),!0)}};function Cd(e){return(hd(e)?Ad:wd).create(e)}function Md(e){const t=vd(e);return t?t.constructor:Hh.arr(e)?Ed:hd(e)?Ad:wd}var Td=(e,i)=>{const n=!Hh.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,t.forwardRef)((r,a)=>{const s=(0,t.useRef)(null),o=n&&(0,t.useCallback)(e=>{s.current=function(e,t){e&&(Hh.fun(e)?e(t):e.current=t);return t}(a,e)},[a]),[l,c]=function(e,t){const i=new Set;Sd.dependencies=i,e.style&&(e=(0,ye.A)((0,ye.A)({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new _d(e),Sd.dependencies=null,[e,i]}(r,i),h=dd(),u=()=>{const e=s.current;if(n&&!e)return;!1===(!!e&&i.applyAnimatedValues(e,l.getValue(!0)))&&h()},d=new Pd(u,c),p=(0,t.useRef)();ud(()=>(p.current=d,qh(c,e=>Yu(e,d)),()=>{p.current&&(qh(p.current.deps,e=>Xu(e,p.current)),_h.cancel(p.current.update))})),(0,t.useEffect)(u,[]),pd(()=>()=>{const e=p.current;qh(e.deps,t=>Xu(t,e))});const f=i.getComponentProps(l.getValue());return t.createElement(e,(0,ye.A)((0,ye.A)({},f),{},{ref:o}))})},Pd=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&_h.write(this.update)}};var Dd=Symbol.for("AnimatedComponent"),Od=e=>Hh.str(e)?e:e&&Hh.str(e.displayName)?e.displayName:Hh.fun(e)&&e.name||null;const kd=["children"];function Id(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Hh.fun(e)?e(...i):e}var Rd=(e,t)=>!0===e||!!(t&&e&&(Hh.fun(e)?e(t):Xh(e).includes(t))),Ld=(e,t)=>Hh.obj(e)?t&&e[t]:e,zd=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,Bd=e=>e,jd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd,i=Fd;e.default&&!0!==e.default&&(e=e.default,i=Object.keys(e));const n={};for(const r of i){const i=t(e[r],r);Hh.und(i)||(n[r]=i)}return n},Fd=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Nd={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ud(e){const t=function(e){const t={};let i=0;if(Yh(e,(e,n)=>{Nd[n]||(t[n]=e,i++)}),i)return t}(e);if(t){const i={to:t};return Yh(e,(e,n)=>n in t||(i[n]=e)),i}return(0,ye.A)({},e)}function Vd(e){return e=Vu(e),Hh.arr(e)?e.map(Vd):hd(e)?Vh.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Wd(e){for(const t in e)return!0;return!1}function Hd(e){return Hh.fun(e)||Hh.arr(e)&&Hh.obj(e[0])}function Gd(e,t){var i;null===(i=e.ref)||void 0===i||i.delete(e),null===t||void 0===t||t.delete(e)}function qd(e,t){var i;t&&e.ref!==t&&(null===(i=e.ref)||void 0===i||i.delete(e),t.add(e),e.ref=t)}var Yd=(0,ye.A)((0,ye.A)({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:ju.linear,clamp:!1}),Xd=class{constructor(){this.velocity=0,Object.assign(this,Yd)}};function Qd(e,t){if(Hh.und(t.decay)){const i=!Hh.und(t.tension)||!Hh.und(t.friction);!i&&Hh.und(t.frequency)&&Hh.und(t.damping)&&Hh.und(t.mass)||(e.duration=void 0,e.decay=void 0),i&&(e.frequency=void 0)}else e.duration=void 0}var Kd=[],Zd=class{constructor(){this.changed=!1,this.values=Kd,this.toValues=null,this.fromValues=Kd,this.config=new Xd,this.immediate=!1}};function Jd(e,t){let{key:i,props:n,defaultProps:r,state:a,actions:s}=t;return new Promise((t,o)=>{var l;let c,h,u=Rd(null!==(l=n.cancel)&&void 0!==l?l:null===r||void 0===r?void 0:r.cancel,i);if(u)f();else{Hh.und(n.pause)||(a.paused=Rd(n.pause,i));let e=null===r||void 0===r?void 0:r.pause;!0!==e&&(e=a.paused||Rd(e,i)),c=Id(n.delay||0,i),e?(a.resumeQueue.add(p),s.pause()):(s.resume(),p())}function d(){a.resumeQueue.add(p),a.timeouts.delete(h),h.cancel(),c=h.time-_h.now()}function p(){c>0&&!Vh.skipAnimation?(a.delayed=!0,h=_h.setTimeout(f,c),a.pauseQueue.add(d),a.timeouts.add(h)):f()}function f(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(d),a.timeouts.delete(h),e<=(a.cancelId||0)&&(u=!0);try{s.start((0,ye.A)((0,ye.A)({},n),{},{callId:e,cancel:u}),t)}catch(i){o(i)}}})}var $d=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?ip(e.get()):t.every(e=>e.noop)?ep(e.get()):tp(e.get(),t.every(e=>e.finished)),ep=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),tp=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},ip=e=>({value:e,cancelled:!0,finished:!1});function np(e,t,i,n){const{callId:r,parentId:a,onRest:s}=t,{asyncTo:o,promise:l}=i;return a||e!==o||t.reset?i.promise=(async()=>{i.asyncId=r,i.asyncTo=e;const c=jd(t,(e,t)=>"onRest"===t?void 0:e);let h,u;const d=new Promise((e,t)=>(h=e,u=t)),p=e=>{const t=r<=(i.cancelId||0)&&ip(n)||r!==i.asyncId&&tp(n,!1);if(t)throw e.result=t,u(e),e},f=(e,t)=>{const a=new ap,s=new sp;return(async()=>{if(Vh.skipAnimation)throw rp(i),s.result=tp(n,!1),u(s),s;p(a);const o=Hh.obj(e)?(0,ye.A)({},e):(0,ye.A)((0,ye.A)({},t),{},{to:e});o.parentId=r,Yh(c,(e,t)=>{Hh.und(o[t])&&(o[t]=e)});const l=await n.start(o);return p(a),i.paused&&await new Promise(e=>{i.resumeQueue.add(e)}),l})()};let m;if(Vh.skipAnimation)return rp(i),tp(n,!1);try{let t;t=Hh.arr(e)?(async e=>{for(const t of e)await f(t)})(e):Promise.resolve(e(f,n.stop.bind(n))),await Promise.all([t.then(h),d]),m=tp(n.get(),!0,!1)}catch(g){if(g instanceof ap)m=g.result;else{if(!(g instanceof sp))throw g;m=g.result}}finally{r==i.asyncId&&(i.asyncId=a,i.asyncTo=a?o:void 0,i.promise=a?l:void 0)}return Hh.fun(s)&&_h.batchedUpdates(()=>{s(m,n,n.item)}),m})():l}function rp(e,t){Qh(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ap=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},sp=class extends Error{constructor(){super("SkipAnimationSignal")}},op=e=>e instanceof cp,lp=1,cp=class extends Gu{constructor(){super(...arguments),this.id=lp++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=vd(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Vh.to(this,t)}interpolate(){ld("".concat(sd,'The "interpolate" function is deprecated in v9 (use "to" instead)'));for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Vh.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){Hu(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||lu.sort(this),Hu(this,{type:"priority",parent:this,priority:e})}},hp=Symbol.for("SpringPhase"),up=e=>(1&e[hp])>0,dp=e=>(2&e[hp])>0,pp=e=>(4&e[hp])>0,fp=(e,t)=>t?e[hp]|=3:e[hp]&=-3,mp=(e,t)=>t?e[hp]|=4:e[hp]&=-5,gp=class extends cp{constructor(e,t){if(super(),this.animation=new Zd,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Hh.und(e)||!Hh.und(t)){const i=Hh.obj(e)?(0,ye.A)({},e):(0,ye.A)((0,ye.A)({},t),{},{from:e});Hh.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(dp(this)||this._state.asyncTo)||pp(this)}get goal(){return Vu(this.animation.to)}get velocity(){const e=vd(this);return e instanceof wd?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return up(this)}get isAnimating(){return dp(this)}get isPaused(){return pp(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const n=this.animation;let{toValues:r}=n;const{config:a}=n,s=bd(n.to);!s&&Uu(n.to)&&(r=Xh(Vu(n.to))),n.values.forEach((o,l)=>{if(o.done)return;const c=o.constructor==Ad?1:s?s[l].lastPosition:r[l];let h=n.immediate,u=c;if(!h){if(u=o.lastPosition,a.tension<=0)return void(o.done=!0);let t=o.elapsedTime+=e;const i=n.fromValues[l],r=null!=o.v0?o.v0:o.v0=Hh.arr(a.velocity)?a.velocity[l]:a.velocity;let s;const d=a.precision||(i==c?.005:Math.min(1,.001*Math.abs(c-i)));if(Hh.und(a.duration))if(a.decay){const e=!0===a.decay?.998:a.decay,n=Math.exp(-(1-e)*t);u=i+r/(1-e)*(1-n),h=Math.abs(o.lastPosition-u)<=d,s=r*n}else{s=null==o.lastVelocity?r:o.lastVelocity;const t=a.restVelocity||d/10,n=a.clamp?0:a.bounce,l=!Hh.und(n),p=i==c?o.v0>0:i<c;let f,m=!1;const g=1,v=Math.ceil(e/g);for(let e=0;e<v&&(f=Math.abs(s)>t,f||(h=Math.abs(c-u)<=d,!h));++e){l&&(m=u==c||u>c==p,m&&(s=-s*n,u=c));s+=(1e-6*-a.tension*(u-c)+.001*-a.friction*s)/a.mass*g,u+=s*g}}else{let n=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,o.durationProgress>0&&(o.elapsedTime=a.duration*o.durationProgress,t=o.elapsedTime+=e)),n=(a.progress||0)+t/this._memoizedDuration,n=n>1?1:n<0?0:n,o.durationProgress=n),u=i+a.easing(n)*(c-i),s=(u-o.lastPosition)/e,h=1==n}o.lastVelocity=s,Number.isNaN(u)&&(console.warn("Got NaN while animating:",this),h=!0)}s&&!s[l].done&&(h=!1),h?o.done=!0:t=!1,o.setValue(u,a.round)&&(i=!0)});const o=vd(this),l=o.getValue();if(t){const e=Vu(n.to);l===e&&!i||a.decay?i&&a.decay&&this._onChange(l):(o.setValue(e),this._onChange(e)),this._stop()}else i&&this._onChange(l)}set(e){return _h.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(dp(this)){const{to:e,config:t}=this.animation;_h.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return Hh.und(e)?(i=this.queue||[],this.queue=[]):i=[Hh.obj(e)?e:(0,ye.A)((0,ye.A)({},t),{},{to:e})],Promise.all(i.map(e=>this._update(e))).then(e=>$d(this,e))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),rp(this._state,e&&this._lastCallId),_h.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:n}=e;i=Hh.obj(i)?i[t]:i,(null==i||Hd(i))&&(i=void 0),n=Hh.obj(n)?n[t]:n,null==n&&(n=void 0);const r={to:i,from:n};return up(this)||(e.reverse&&([i,n]=[n,i]),n=Vu(n),Hh.und(n)?vd(this)||this._set(i):this._set(n)),r}_update(e,t){let i=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const{key:n,defaultProps:r}=this;i.default&&Object.assign(r,jd(i,(e,t)=>/^on/.test(t)?Ld(e,n):e)),Sp(this,i,"onProps"),_p(this,"onProps",i,this);const a=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Jd(++this._lastCallId,{key:n,props:i,defaultProps:r,state:s,actions:{pause:()=>{pp(this)||(mp(this,!0),Jh(s.pauseQueue),_p(this,"onPause",tp(this,vp(this,this.animation.to)),this))},resume:()=>{pp(this)&&(mp(this,!1),dp(this)&&this._resume(),Jh(s.resumeQueue),_p(this,"onResume",tp(this,vp(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(e=>{if(i.loop&&e.finished&&(!t||!e.noop)){const e=yp(i);if(e)return this._update(e,!0)}return e})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(ip(this));const n=!Hh.und(e.to),r=!Hh.und(e.from);if(n||r){if(!(t.callId>this._lastToId))return i(ip(this));this._lastToId=t.callId}const{key:a,defaultProps:s,animation:o}=this,{to:l,from:c}=o;let{to:h=l,from:u=c}=e;!r||n||t.default&&!Hh.und(h)||(h=u),t.reverse&&([h,u]=[u,h]);const d=!Gh(u,c);d&&(o.from=u),u=Vu(u);const p=!Gh(h,l);p&&this._focus(h);const f=Hd(t.to),{config:m}=o,{decay:g,velocity:v}=m;(n||r)&&(m.velocity=0),t.config&&!f&&function(e,t,i){i&&(Qd(i=(0,ye.A)({},i),t),t=(0,ye.A)((0,ye.A)({},i),t)),Qd(e,t),Object.assign(e,t);for(const s in Yd)null==e[s]&&(e[s]=Yd[s]);let{frequency:n,damping:r}=e;const{mass:a}=e;Hh.und(n)||(n<.01&&(n=.01),r<0&&(r=0),e.tension=Math.pow(2*Math.PI/n,2)*a,e.friction=4*Math.PI*r*a/n)}(m,Id(t.config,a),t.config!==s.config?Id(s.config,a):void 0);let y=vd(this);if(!y||Hh.und(h))return i(tp(this,!0));const b=Hh.und(t.reset)?r&&!t.default:!Hh.und(u)&&Rd(t.reset,a),x=b?u:this.get(),w=Vd(h),A=Hh.num(w)||Hh.arr(w)||hd(w),S=!f&&(!A||Rd(s.immediate||t.immediate,a));if(p){const e=Md(h);if(e!==y.constructor){if(!S)throw Error("Cannot animate between ".concat(y.constructor.name," and ").concat(e.name,', as the "to" prop suggests'));y=this._set(w)}}const _=y.constructor;let E=Uu(h),C=!1;if(!E){const e=b||!up(this)&&d;(p||e)&&(C=Gh(Vd(x),w),E=!C),(Gh(o.immediate,S)||S)&&Gh(m.decay,g)&&Gh(m.velocity,v)||(E=!0)}if(C&&dp(this)&&(o.changed&&!b?E=!0:E||this._stop(l)),!f&&((E||Uu(l))&&(o.values=y.getPayload(),o.toValues=Uu(h)?null:_==Ad?[1]:Xh(w)),o.immediate!=S&&(o.immediate=S,S||b||this._set(l)),E)){const{onRest:e}=o;qh(Ap,e=>Sp(this,t,e));const n=tp(this,vp(this,l));Jh(this._pendingCalls,n),this._pendingCalls.add(i),o.changed&&_h.batchedUpdates(()=>{var t;(o.changed=!b,null===e||void 0===e||e(n,this),b)?Id(s.onRest,n):null===(t=o.onStart)||void 0===t||t.call(o,n,this)})}b&&this._set(x),f?i(np(t.to,t,this._state,this)):E?this._start():dp(this)&&!p?this._pendingCalls.add(i):i(ep(x))}_focus(e){const t=this.animation;e!==t.to&&(Wu(this)&&this._detach(),t.to=e,Wu(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Uu(t)&&(Yu(t,this),op(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Uu(e)&&Xu(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=Vu(e);if(!Hh.und(i)){const e=vd(this);if(!e||!Gh(i,e.getValue())){const n=Md(i);e&&e.constructor==n?e.setValue(i):yd(this,n.create(i)),e&&_h.batchedUpdates(()=>{this._onChange(i,t)})}}return vd(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,_p(this,"onStart",tp(this,vp(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Id(this.animation.onChange,e,this)),Id(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;vd(this).reset(Vu(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),dp(this)||(fp(this,!0),pp(this)||this._resume())}_resume(){Vh.skipAnimation?this.finish():lu.start(this)}_stop(e,t){if(dp(this)){fp(this,!1);const i=this.animation;qh(i.values,e=>{e.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Hu(this,{type:"idle",parent:this});const n=t?ip(this.get()):tp(this.get(),vp(this,null!==e&&void 0!==e?e:i.to));Jh(this._pendingCalls,n),i.changed&&(i.changed=!1,_p(this,"onRest",n,this))}}};function vp(e,t){const i=Vd(t);return Gh(Vd(e.get()),i)}function yp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const n=Id(t);if(n){const r=!0!==n&&Ud(n),a=(r||e).reverse,s=!r||r.reset;return bp((0,ye.A)((0,ye.A)({},e),{},{loop:t,default:!1,pause:void 0,to:!a||Hd(i)?i:void 0,from:s?e.from:void 0,reset:s},r))}}function bp(e){const{to:t,from:i}=e=Ud(e),n=new Set;return Hh.obj(t)&&wp(t,n),Hh.obj(i)&&wp(i,n),e.keys=n.size?Array.from(n):null,e}function xp(e){const t=bp(e);return Hh.und(t.default)&&(t.default=jd(t)),t}function wp(e,t){Yh(e,(e,i)=>null!=e&&t.add(i))}var Ap=["onStart","onRest","onChange","onPause","onResume"];function Sp(e,t,i){e.animation[i]=t[i]!==zd(t,i)?Ld(t[i],e.key):void 0}function _p(e,t){for(var i,n,r,a,s=arguments.length,o=new Array(s>2?s-2:0),l=2;l<s;l++)o[l-2]=arguments[l];null===(i=(n=e.animation)[t])||void 0===i||i.call(n,...o),null===(r=(a=e.defaultProps)[t])||void 0===r||r.call(a,...o)}var Ep=["onStart","onChange","onRest"],Cp=1,Mp=class{constructor(e,t){this.id=Cp++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start((0,ye.A)({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Hh.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(bp(e)),this}start(e){let{queue:t}=this;return e?t=Xh(e).map(bp):this.queue=[],this._flush?this._flush(this,t):(Rp(this,t),Tp(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;qh(Xh(t),t=>i[t].stop(!!e))}else rp(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(Hh.und(e))this.start({pause:!0});else{const t=this.springs;qh(Xh(e),e=>t[e].pause())}return this}resume(e){if(Hh.und(e))this.start({pause:!1});else{const t=this.springs;qh(Xh(e),e=>t[e].resume())}return this}each(e){Yh(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,n=this._active.size>0,r=this._changed.size>0;(n&&!this._started||r&&!this._started)&&(this._started=!0,Qh(e,e=>{let[t,i]=e;i.value=this.get(),t(i,this,this._item)}));const a=!n&&this._started,s=r||a&&i.size?this.get():null;r&&t.size&&Qh(t,e=>{let[t,i]=e;i.value=s,t(i,this,this._item)}),a&&(this._started=!1,Qh(i,e=>{let[t,i]=e;i.value=s,t(i,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}_h.onFrame(this._onFrame)}};function Tp(e,t){return Promise.all(t.map(t=>Pp(e,t))).then(t=>$d(e,t))}async function Pp(e,t,i){const{keys:n,to:r,from:a,loop:s,onRest:o,onResolve:l}=t,c=Hh.obj(t.default)&&t.default;s&&(t.loop=!1),!1===r&&(t.to=null),!1===a&&(t.from=null);const h=Hh.arr(r)||Hh.fun(r)?r:void 0;h?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):qh(Ep,i=>{const n=t[i];if(Hh.fun(n)){const r=e._events[i];t[i]=e=>{let{finished:t,cancelled:i}=e;const a=r.get(n);a?(t||(a.finished=!1),i&&(a.cancelled=!0)):r.set(n,{value:null,finished:t||!1,cancelled:i||!1})},c&&(c[i]=t[i])}});const u=e._state;t.pause===!u.paused?(u.paused=t.pause,Jh(t.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(t.pause=!0);const d=(n||Object.keys(e.springs)).map(i=>e.springs[i].start(t)),p=!0===t.cancel||!0===zd(t,"cancel");(h||p&&u.asyncId)&&d.push(Jd(++e._lastAsyncId,{props:t,state:u,actions:{pause:Wh,resume:Wh,start(t,i){p?(rp(u,e._lastAsyncId),i(ip(e))):(t.onRest=o,i(np(h,t,u,e)))}}})),u.paused&&await new Promise(e=>{u.resumeQueue.add(e)});const f=$d(e,await Promise.all(d));if(s&&f.finished&&(!i||!f.noop)){const i=yp(t,s,r);if(i)return Rp(e,[i]),Pp(e,i,!0)}return l&&_h.batchedUpdates(()=>l(f,e,e.item)),f}function Dp(e,t){const i=(0,ye.A)({},e.springs);return t&&qh(Xh(t),e=>{Hh.und(e.keys)&&(e=bp(e)),Hh.obj(e.to)||(e=(0,ye.A)((0,ye.A)({},e),{},{to:void 0})),Ip(i,e,e=>kp(e))}),Op(e,i),i}function Op(e,t){Yh(t,(t,i)=>{e.springs[i]||(e.springs[i]=t,Yu(t,e))})}function kp(e,t){const i=new gp;return i.key=e,t&&Yu(i,t),i}function Ip(e,t,i){t.keys&&qh(t.keys,n=>{(e[n]||(e[n]=i(n)))._prepareNode(t)})}function Rp(e,t){qh(t,t=>{Ip(e.springs,t,t=>kp(t,e))})}var Lp,zp,Bp=e=>{let{children:i}=e,n=xe(e,kd);const r=(0,t.useContext)(jp),a=n.pause||!!r.pause,s=n.immediate||!!r.immediate;n=function(e,i){const[n]=(0,t.useState)(()=>({inputs:i,result:e()})),r=(0,t.useRef)(),a=r.current;let s=a;if(s){const t=Boolean(i&&s.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(i,s.inputs));t||(s={inputs:i,result:e()})}else s=n;return(0,t.useEffect)(()=>{r.current=s,a==n&&(n.inputs=n.result=void 0)},[s]),s.result}(()=>({pause:a,immediate:s}),[a,s]);const{Provider:o}=jp;return t.createElement(o,{value:n},i)},jp=(Lp=Bp,zp={},Object.assign(Lp,t.createContext(zp)),Lp.Provider._context=Lp,Lp.Consumer._context=Lp,Lp);Bp.Provider=jp.Provider,Bp.Consumer=jp.Consumer;var Fp=()=>{const e=[],t=function(t){cd("".concat(sd,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));const n=[];return qh(e,(e,r)=>{if(Hh.und(t))n.push(e.start());else{const a=i(t,e,r);a&&n.push(e.start(a))}}),n};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const i=e.indexOf(t);~i&&e.splice(i,1)},t.pause=function(){return qh(e,e=>e.pause(...arguments)),this},t.resume=function(){return qh(e,e=>e.resume(...arguments)),this},t.set=function(t){qh(e,(e,i)=>{const n=Hh.fun(t)?t(i,e):t;n&&e.set(n)})},t.start=function(t){const i=[];return qh(e,(e,n)=>{if(Hh.und(t))i.push(e.start());else{const r=this._getProps(t,e,n);r&&i.push(e.start(r))}}),i},t.stop=function(){return qh(e,e=>e.stop(...arguments)),this},t.update=function(t){return qh(e,(e,i)=>e.update(this._getProps(t,e,i))),this};const i=function(e,t,i){return Hh.fun(e)?e(i,t):e};return t._getProps=i,t};function Np(e,i,n){const r=Hh.fun(i)&&i;r&&!n&&(n=[]);const a=(0,t.useMemo)(()=>r||3==arguments.length?Fp():void 0,[]),s=(0,t.useRef)(0),o=dd(),l=(0,t.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){const i=Dp(e,t);return s.current>0&&!l.queue.length&&!Object.keys(i).some(t=>!e.springs[t])?Tp(e,t):new Promise(n=>{Op(e,i),l.queue.push(()=>{n(Tp(e,t))}),o()})}}),[]),c=(0,t.useRef)([...l.ctrls]),h=[],u=md(e)||0;function d(e,t){for(let n=e;n<t;n++){const e=c.current[n]||(c.current[n]=new Mp(null,l.flush)),t=r?r(n,e):i[n];t&&(h[n]=xp(t))}}(0,t.useMemo)(()=>{qh(c.current.slice(e,u),e=>{Gd(e,a),e.stop(!0)}),c.current.length=e,d(u,e)},[e]),(0,t.useMemo)(()=>{d(0,Math.min(u,e))},n);const p=c.current.map((e,t)=>Dp(e,h[t])),f=(0,t.useContext)(Bp),m=md(f),g=f!==m&&Wd(f);ud(()=>{s.current++,l.ctrls=c.current;const{queue:e}=l;e.length&&(l.queue=[],qh(e,e=>e())),qh(c.current,(e,t)=>{null===a||void 0===a||a.add(e),g&&e.start({default:f});const i=h[t];i&&(qd(e,i.ref),e.ref?e.queue.push(i):e.start(i))})}),pd(()=>()=>{qh(l.ctrls,e=>e.stop(!0))});const v=p.map(e=>(0,ye.A)({},e));return a?[v,a]:v}function Up(e,t){const i=Hh.fun(e),[[n],r]=Np(1,i?e:[e],i?t||[]:t);return i||2==arguments.length?[n,r]:n}var Vp=class extends cp{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Ou(...t);const i=this._get(),n=Md(i);yd(this,n.create(i))}advance(e){const t=this._get();Gh(t,this.get())||(vd(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Hp(this._active)&&Gp(this)}_get(){const e=Hh.arr(this.source)?this.source.map(Vu):Xh(Vu(this.source));return this.calc(...e)}_start(){this.idle&&!Hp(this._active)&&(this.idle=!1,qh(bd(this),e=>{e.done=!1}),Vh.skipAnimation?(_h.batchedUpdates(()=>this.advance()),Gp(this)):lu.start(this))}_attach(){let e=1;qh(Xh(this.source),t=>{Uu(t)&&Yu(t,this),op(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){qh(Xh(this.source),e=>{Uu(e)&&Xu(e,this)}),this._active.clear(),Gp(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Xh(this.source).reduce((e,t)=>Math.max(e,(op(t)?t.priority:0)+1),0))}};function Wp(e){return!1!==e.idle}function Hp(e){return!e.size||Array.from(e).every(Wp)}function Gp(e){e.idle||(e.idle=!0,qh(bd(e),e=>{e.done=!0}),Hu(e,{type:"idle",parent:e}))}Vh.assign({createStringInterpolator:ad,to:(e,t)=>new Vp(e,t)});lu.advance;const qp=["className","style","children","scrollTop","scrollLeft","viewBox"],Yp=["x","y","z"],Xp=["scrollTop","scrollLeft"];var Qp=/^--/;function Kp(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||Qp.test(e)||Jp.hasOwnProperty(e)&&Jp[e]?(""+t).trim():t+"px"}var Zp={};var Jp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$p=["Webkit","Ms","Moz","O"];Jp=Object.keys(Jp).reduce((e,t)=>($p.forEach(i=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(i,t)]=e[t]),e),Jp);var ef=/^(matrix|translate|scale|rotate|skew)/,tf=/^(translate)/,nf=/^(rotate|skew)/,rf=(e,t)=>Hh.num(e)&&0!==e?e+t:e,af=(e,t)=>Hh.arr(e)?e.every(e=>af(e,t)):Hh.num(e)?e===t:parseFloat(e)===t,sf=class extends _d{constructor(e){let{x:t,y:i,z:n}=e,r=xe(e,Yp);const a=[],s=[];(t||i||n)&&(a.push([t||0,i||0,n||0]),s.push(e=>["translate3d(".concat(e.map(e=>rf(e,"px")).join(","),")"),af(e,0)])),Yh(r,(e,t)=>{if("transform"===t)a.push([e||""]),s.push(e=>[e,""===e]);else if(ef.test(t)){if(delete r[t],Hh.und(e))return;const i=tf.test(t)?"px":nf.test(t)?"deg":"";a.push(Xh(e)),s.push("rotate3d"===t?e=>{let[t,n,r,a]=e;return["rotate3d(".concat(t,",").concat(n,",").concat(r,",").concat(rf(a,i),")"),af(a,0)]}:e=>["".concat(t,"(").concat(e.map(e=>rf(e,i)).join(","),")"),af(e,t.startsWith("scale")?1:0)])}}),a.length&&(r.transform=new of(a,s)),super(r)}},of=class extends Gu{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return qh(this.inputs,(i,n)=>{const r=Vu(i[0]),[a,s]=this.transforms[n](Hh.arr(r)?r:i.map(Vu));e+=" "+a,t=t&&s}),t?"none":e}observerAdded(e){1==e&&qh(this.inputs,e=>qh(e,e=>Uu(e)&&Yu(e,this)))}observerRemoved(e){0==e&&qh(this.inputs,e=>qh(e,e=>Uu(e)&&Xu(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),Hu(this,e)}};Vh.assign({batchedUpdates:it.unstable_batchedUpdates,createStringInterpolator:ad,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var lf=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=e=>new _d(e),getComponentProps:n=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:n},a=e=>{const t=Od(e)||"Anonymous";return(e=Hh.str(e)?a[e]||(a[e]=Td(e,r)):e[Dd]||(e[Dd]=Td(e,r))).displayName="Animated(".concat(t,")"),e};return Yh(e,(t,i)=>{Hh.arr(e)&&(i=Od(t)),a[i]=a(t)}),{animated:a}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const i="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:n,style:r,children:a,scrollTop:s,scrollLeft:o,viewBox:l}=t,c=xe(t,qp),h=Object.values(c),u=Object.keys(c).map(t=>i||e.hasAttribute(t)?t:Zp[t]||(Zp[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));void 0!==a&&(e.textContent=a);for(const d in r)if(r.hasOwnProperty(d)){const t=Kp(d,r[d]);Qp.test(d)?e.style.setProperty(d,t):e.style[d]=t}u.forEach((t,i)=>{e.setAttribute(t,h[i])}),void 0!==n&&(e.className=n),void 0!==s&&(e.scrollTop=s),void 0!==o&&(e.scrollLeft=o),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new sf(e),getComponentProps:e=>{let{scrollTop:t,scrollLeft:i}=e;return xe(e,Xp)}}),cf=lf.animated;const hf=__webpack_require__.p+"static/media/img2.a18dbe0ca4db84db3a8f.png";function uf(){const[e]=xc(Oc),[i]=xc(Hc),n={container:{display:"block",padding:"2rem",flex:1.05,maxWidth:"100%",height:"auto",background:"transparent",borderRadius:"1.5rem 0 0 1.5rem"},imgContainer:{textAlign:"left",height:"auto",background:"transparent",borderRadius:"50%"},dp:{borderRadius:"50%",textAlign:"left",border:"2px solid wheat",width:"140px",height:"140px",float:"left",marginLeft:"-1.6rem",marginRight:"8px",padding:"2px"},details:{display:"block",textAlign:"left",maxWidth:"100%",height:"auto",color:"white",background:"transparent",borderRadius:"0 1.5rem 1.5rem 0"},name:{color:"white",marginTop:"3.8rem",fontSize:"3rem",fontWeight:"bold"},greyFont:{color:"grey",fontSize:"1.5rem",fontFamily:"'Vidaloka', serif"},desc:{textAlign:"left",color:"white",fontSize:"1.2rem",marginTop:"5px"},socials:{marginTop:"0"},socialIcons:{listStyle:"none",display:"flex",justifyContent:"center",gap:"20px",padding:0},icon:{fontSize:"2.4rem",color:"#fff",textDecoration:"none",transition:"transform 0.3s, color 0.3s",padding:"8px",borderRadius:"50%",background:"transparent"},iconHover:{transform:"scale(1.2)"}},[r,a]=(0,t.useState)(!1),s=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}});Up({from:{transform:"translate3d(0, -80px, 0)"},to:{transform:"translate3d(0, 0, 0)"},config:{tension:100,friction:2,duration:2500}});return(0,He.jsxs)("div",{style:n.container,children:[(0,He.jsx)(vc.div,{variants:s(2),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{style:n.imgContainer,children:(0,He.jsx)("img",{src:hf,alt:"Profile",style:n.dp})})}),(0,He.jsxs)("div",{style:n.details,children:[(0,He.jsx)(vc.div,{variants:s(2.6),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{style:(0,ye.A)((0,ye.A)({},n.name),{},{fontFamily:"'Tangerine', cursive"}),children:"Ujjawal Shrivastava"})}),(0,He.jsx)(vc.div,{variants:s(3.5),initial:"hidden",animate:"show",children:(0,He.jsx)("h3",{style:n.greyFont,children:"Ujjwalshriv3"})}),(0,He.jsx)(vc.div,{variants:s(4.2),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{style:n.desc,children:"Btech-CSE 25' @MDU | FullStack Web Developer | Learner | Ai Enthusiast"})}),(0,He.jsx)(vc.div,{variants:s(4.8),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"glowbtn",children:(0,He.jsxs)("a",{href:"https://drive.google.com/file/d/1FSn4Er9NH-Qs4ZwZu1ZHWFyMP2Pm4s1K/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",onClick:e,style:{padding:"12px 60px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#33f403",border:"none",marginLeft:"1px",marginTop:"18px",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"100%",textAlign:"center",cursor:"pointer"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("button",{children:"About Me"})]})})})]}),(0,He.jsx)("div",{style:n.socials,children:(0,He.jsxs)("ul",{className:"social-icons",style:n.socialIcons,children:[(0,He.jsx)(vc.div,{variants:s(5.6),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",className:"fab fa-linkedin",target:"_blank",rel:"noopener noreferrer",onClick:i,style:n.icon})})}),(0,He.jsx)(vc.div,{variants:s(6.1),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"https://github.com/ujjwalshriv3",className:"fab fa-github",target:"_blank",rel:"noopener noreferrer",onClick:i,style:n.icon})})}),(0,He.jsx)(vc.div,{variants:s(6.6),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava69@gmail.com",className:"fas fa-envelope",target:"_blank",rel:"noopener noreferrer",onClick:i,style:n.icon})})}),(0,He.jsx)(vc.div,{variants:s(7.1),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"https://x.com/ujjawal_shri123",className:"fab fa-twitter",target:"_blank",rel:"noopener noreferrer",onClick:i,style:n.icon})})}),(0,He.jsx)(vc.div,{variants:s(7.6),initial:"hidden",animate:"show",children:(0,He.jsx)("li",{children:(0,He.jsx)("a",{href:"tel:+918743917011",className:"fas fa-phone",target:"_blank",rel:"noopener noreferrer",onClick:i,style:n.icon})})})]})})]})}function df(){const e={about:{margin:0,padding:0},mobileStyle:{display:"block",justifyContent:"center",alignItems:"center",position:"relative",margin:"0 auto",width:"100%",maxWidth:"100%",overflow:"hidden"},mobileScreenStyle:{display:"block",position:"relative",zIndex:1,padding:"6px",minHeight:"70vh",width:"100%",marginTop:"40px",borderRadius:"1rem",background:"transparent",boxShadow:"0 0.1rem 0 #cfcfcf",border:"1px solid wheat"},mobileShadowStyle:{position:"absolute",right:"0",bottom:"-2.5rem",left:"0",zIndex:0,height:"2rem",background:"radial-gradient(ellipse closest-side,#000,transparent)",opacity:.5}},[i,n]=(0,t.useState)(!1);return(0,He.jsx)("main",{style:e.about,children:(0,He.jsx)(vc.div,{variants:(e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}))(1.4),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"container",id:"about",children:(0,He.jsxs)("div",{className:"mobile",style:e.mobileStyle,children:[(0,He.jsxs)("div",{className:"mobile__screen",style:e.mobileScreenStyle,children:[(0,He.jsx)(uf,{}),(0,He.jsx)(Ah,{isExpanded:i,setExpanded:n})]}),(0,He.jsx)("div",{className:"mobile__shadow",style:e.mobileShadowStyle})]})})})})}class pf extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){var e;return this.state.hasError?(0,He.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,He.jsx)("h2",{children:"Something went wrong."}),(0,He.jsx)("p",{children:null===(e=this.state.error)||void 0===e?void 0:e.toString()}),(0,He.jsx)("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}const ff=pf;let mf,gf;const vf=()=>{const e=(0,t.useRef)(null),[i,n]=(0,t.useState)(!0),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null),l=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),c=(0,t.useCallback)(()=>{window.scrollY>10?n(!1):n(!0)},[]),h=(0,t.useCallback)(async()=>{if(e.current)try{if(a(!0),!window.THREE){const e=await __webpack_require__.e(312).then(__webpack_require__.bind(__webpack_require__,4312));mf=e.default||e,window.THREE=mf}gf||(gf=await __webpack_require__.e(653).then(__webpack_require__.t.bind(__webpack_require__,3653,23))),l&&ah(document.body);const t=gf.default({el:e.current,THREE:window.THREE,mouseControls:!0,touchControls:l,gyroControls:!1,minHeight:200,minWidth:200,scale:l?.8:1,scaleMobile:.8,backgroundColor:0,color1:16711935,color2:65535,colorMode:"variance",birdSize:l?.8:1,speedLimit:l?2:3,separation:l?30:50,alignment:l?30:40,cohesion:l?25:35,quantity:l?2:3,backgroundAlpha:.5});return o(t),a(!1),t}catch(t){return console.error("Error initializing Vanta.js:",t),a(!1),null}},[l]);(0,t.useEffect)(()=>{const e=()=>{t||(window.requestAnimationFrame(()=>{c(),t=!1}),t=!0)};let t=!1;return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[c]),(0,t.useEffect)(()=>{let e,t=!0;return(async()=>{if(l){const e=document.createElement("canvas");if(!(e.getContext("webgl")||e.getContext("experimental-webgl")))return void console.warn("WebGL not supported, skipping Vanta effect")}e=await h()})(),()=>{if(t=!1,e&&e.destroy)try{e.destroy()}catch(ine){console.warn("Error cleaning up Vanta:",ine)}var i;l&&((i=document.body)?(Qc=Qc.filter(function(e){return e.targetElement!==i}),Xc&&(i.ontouchstart=null,i.ontouchmove=null,Kc&&0===Qc.length&&(document.removeEventListener("touchmove",ih,qc?{passive:!1}:void 0),Kc=!1)),Xc?rh():nh()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."))}},[h,l]);const u=(0,ye.A)((0,ye.A)({},yf.home),{},{backgroundImage:r?"url(".concat(sh,")"):"none",backgroundColor:"#000"});return(0,He.jsxs)(He.Fragment,{children:[r&&(0,He.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,transition:"opacity 0.5s ease",opacity:r?1:0,pointerEvents:"none"},children:(0,He.jsx)("div",{style:{color:"#fff",fontSize:"1.2rem"},children:"Loading..."})}),(0,He.jsxs)("section",{style:u,id:"home",ref:e,children:[(0,He.jsx)("div",{style:(0,ye.A)((0,ye.A)({},yf.homebackContainer),{},{opacity:i?1:0,visibility:i?"visible":"hidden",pointerEvents:i?"auto":"none"}),children:(0,He.jsx)(lh,{})}),(0,He.jsx)(df,{})]})]})},yf={home:{position:"relative",minHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",zIndex:1,willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"translateZ(0)"},homebackContainer:{transition:"opacity 0.5s ease, visibility 0.5s ease",width:"100%",height:"100%",position:"absolute",top:0,left:0,"&.hidden":{opacity:0,visibility:"hidden"},"&.visible":{opacity:1,visibility:"visible"}}};function bf(){return(0,He.jsx)(ff,{children:(0,He.jsx)(vf,{})})}var xf=__webpack_require__(8161),wf=__webpack_require__.n(xf),Af=__webpack_require__(6366),Sf=__webpack_require__.n(Af),_f=__webpack_require__(2123),Ef=__webpack_require__.n(_f),Cf="bodyAttributes",Mf="htmlAttributes",Tf="titleAttributes",Pf={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},Df=(Object.keys(Pf).map(function(e){return Pf[e]}),"charset"),Of="cssText",kf="href",If="http-equiv",Rf="innerHTML",Lf="itemprop",zf="name",Bf="property",jf="rel",Ff="src",Nf="target",Uf={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Vf="defaultTitle",Wf="defer",Hf="encodeSpecialCharacters",Gf="onChangeClientState",qf="titleTemplate",Yf=Object.keys(Uf).reduce(function(e,t){return e[Uf[t]]=t,e},{}),Xf=[Pf.NOSCRIPT,Pf.SCRIPT,Pf.STYLE],Qf="data-react-helmet",Kf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zf=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$f=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},em=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},tm=function(e){var t=sm(e,Pf.TITLE),i=sm(e,qf);if(i&&t)return i.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var n=sm(e,Vf);return t||n||void 0},im=function(e){return sm(e,Gf)||function(){}},nm=function(e,t){return t.filter(function(t){return"undefined"!==typeof t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return Jf({},e,t)},{})},rm=function(e,t){return t.filter(function(e){return"undefined"!==typeof e[Pf.BASE]}).map(function(e){return e[Pf.BASE]}).reverse().reduce(function(t,i){if(!t.length)for(var n=Object.keys(i),r=0;r<n.length;r++){var a=n[r].toLowerCase();if(-1!==e.indexOf(a)&&i[a])return t.concat(i)}return t},[])},am=function(e,t,i){var n={};return i.filter(function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&um("Helmet: "+e+' should be of type "Array". Instead found type "'+Kf(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,i){var r={};i.filter(function(e){for(var i=void 0,a=Object.keys(e),s=0;s<a.length;s++){var o=a[s],l=o.toLowerCase();-1===t.indexOf(l)||i===jf&&"canonical"===e[i].toLowerCase()||l===jf&&"stylesheet"===e[l].toLowerCase()||(i=l),-1===t.indexOf(o)||o!==Rf&&o!==Of&&o!==Lf||(i=o)}if(!i||!e[i])return!1;var c=e[i].toLowerCase();return n[i]||(n[i]={}),r[i]||(r[i]={}),!n[i][c]&&(r[i][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var a=Object.keys(r),s=0;s<a.length;s++){var o=a[s],l=Ef()({},n[o],r[o]);n[o]=l}return e},[]).reverse()},sm=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.hasOwnProperty(t))return n[t]}return null},om=function(){var e=Date.now();return function(t){var i=Date.now();i-e>16?(e=i,t(i)):setTimeout(function(){om(t)},0)}}(),lm=function(e){return clearTimeout(e)},cm="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||om:__webpack_require__.g.requestAnimationFrame||om,hm="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||lm:__webpack_require__.g.cancelAnimationFrame||lm,um=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},dm=null,pm=function(e,t){var i=e.baseTag,n=e.bodyAttributes,r=e.htmlAttributes,a=e.linkTags,s=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,h=e.styleTags,u=e.title,d=e.titleAttributes;gm(Pf.BODY,n),gm(Pf.HTML,r),mm(u,d);var p={baseTag:vm(Pf.BASE,i),linkTags:vm(Pf.LINK,a),metaTags:vm(Pf.META,s),noscriptTags:vm(Pf.NOSCRIPT,o),scriptTags:vm(Pf.SCRIPT,c),styleTags:vm(Pf.STYLE,h)},f={},m={};Object.keys(p).forEach(function(e){var t=p[e],i=t.newTags,n=t.oldTags;i.length&&(f[e]=i),n.length&&(m[e]=p[e].oldTags)}),t&&t(),l(e,f,m)},fm=function(e){return Array.isArray(e)?e.join(""):e},mm=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=fm(e)),gm(Pf.TITLE,t)},gm=function(e,t){var i=document.getElementsByTagName(e)[0];if(i){for(var n=i.getAttribute(Qf),r=n?n.split(","):[],a=[].concat(r),s=Object.keys(t),o=0;o<s.length;o++){var l=s[o],c=t[l]||"";i.getAttribute(l)!==c&&i.setAttribute(l,c),-1===r.indexOf(l)&&r.push(l);var h=a.indexOf(l);-1!==h&&a.splice(h,1)}for(var u=a.length-1;u>=0;u--)i.removeAttribute(a[u]);r.length===a.length?i.removeAttribute(Qf):i.getAttribute(Qf)!==s.join(",")&&i.setAttribute(Qf,s.join(","))}},vm=function(e,t){var i=document.head||document.querySelector(Pf.HEAD),n=i.querySelectorAll(e+"["+Qf+"]"),r=Array.prototype.slice.call(n),a=[],s=void 0;return t&&t.length&&t.forEach(function(t){var i=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===Rf)i.innerHTML=t.innerHTML;else if(n===Of)i.styleSheet?i.styleSheet.cssText=t.cssText:i.appendChild(document.createTextNode(t.cssText));else{var o="undefined"===typeof t[n]?"":t[n];i.setAttribute(n,o)}i.setAttribute(Qf,"true"),r.some(function(e,t){return s=t,i.isEqualNode(e)})?r.splice(s,1):a.push(i)}),r.forEach(function(e){return e.parentNode.removeChild(e)}),a.forEach(function(e){return i.appendChild(e)}),{oldTags:r,newTags:a}},ym=function(e){return Object.keys(e).reduce(function(t,i){var n="undefined"!==typeof e[i]?i+'="'+e[i]+'"':""+i;return t?t+" "+n:n},"")},bm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,i){return t[Uf[i]||i]=e[i],t},t)},xm=function(e,i,n){switch(e){case Pf.TITLE:return{toComponent:function(){return function(e,i,n){var r,a=((r={key:i})[Qf]=!0,r),s=bm(n,a);return[t.createElement(Pf.TITLE,s,i)]}(0,i.title,i.titleAttributes)},toString:function(){return function(e,t,i,n){var r=ym(i),a=fm(t);return r?"<"+e+" "+Qf+'="true" '+r+">"+em(a,n)+"</"+e+">":"<"+e+" "+Qf+'="true">'+em(a,n)+"</"+e+">"}(e,i.title,i.titleAttributes,n)}};case Cf:case Mf:return{toComponent:function(){return bm(i)},toString:function(){return ym(i)}};default:return{toComponent:function(){return function(e,i){return i.map(function(i,n){var r,a=((r={key:n})[Qf]=!0,r);return Object.keys(i).forEach(function(e){var t=Uf[e]||e;if(t===Rf||t===Of){var n=i.innerHTML||i.cssText;a.dangerouslySetInnerHTML={__html:n}}else a[t]=i[e]}),t.createElement(e,a)})}(e,i)},toString:function(){return function(e,t,i){return t.reduce(function(t,n){var r=Object.keys(n).filter(function(e){return!(e===Rf||e===Of)}).reduce(function(e,t){var r="undefined"===typeof n[t]?t:t+'="'+em(n[t],i)+'"';return e?e+" "+r:r},""),a=n.innerHTML||n.cssText||"",s=-1===Xf.indexOf(e);return t+"<"+e+" "+Qf+'="true" '+r+(s?"/>":">"+a+"</"+e+">")},"")}(e,i,n)}}}},wm=function(e){var t=e.baseTag,i=e.bodyAttributes,n=e.encode,r=e.htmlAttributes,a=e.linkTags,s=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,h=e.title,u=void 0===h?"":h,d=e.titleAttributes;return{base:xm(Pf.BASE,t,n),bodyAttributes:xm(Cf,i,n),htmlAttributes:xm(Mf,r,n),link:xm(Pf.LINK,a,n),meta:xm(Pf.META,s,n),noscript:xm(Pf.NOSCRIPT,o,n),script:xm(Pf.SCRIPT,l,n),style:xm(Pf.STYLE,c,n),title:xm(Pf.TITLE,{title:u,titleAttributes:d},n)}},Am=function(e){var i,n;return n=i=function(i){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,i.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i),n.prototype.shouldComponentUpdate=function(e){return!Sf()(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case Pf.SCRIPT:case Pf.NOSCRIPT:return{innerHTML:t};case Pf.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,i=e.child,n=e.arrayTypeChildren,r=e.newChildProps,a=e.nestedChildren;return Jf({},n,((t={})[i.type]=[].concat(n[i.type]||[],[Jf({},r,this.mapNestedChildrenToProps(i,a))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,i,n=e.child,r=e.newProps,a=e.newChildProps,s=e.nestedChildren;switch(n.type){case Pf.TITLE:return Jf({},r,((t={})[n.type]=s,t.titleAttributes=Jf({},a),t));case Pf.BODY:return Jf({},r,{bodyAttributes:Jf({},a)});case Pf.HTML:return Jf({},r,{htmlAttributes:Jf({},a)})}return Jf({},r,((i={})[n.type]=Jf({},a),i))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var i=Jf({},t);return Object.keys(e).forEach(function(t){var n;i=Jf({},i,((n={})[t]=e[t],n))}),i},n.prototype.warnOnInvalidChildren=function(e,t){return!0},n.prototype.mapChildrenToProps=function(e,i){var n=this,r={};return t.Children.forEach(e,function(e){if(e&&e.props){var t=e.props,a=t.children,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,i){return t[Yf[i]||i]=e[i],t},t)}($f(t,["children"]));switch(n.warnOnInvalidChildren(e,a),e.type){case Pf.LINK:case Pf.META:case Pf.NOSCRIPT:case Pf.SCRIPT:case Pf.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:a});break;default:i=n.mapObjectTypeChildren({child:e,newProps:i,newChildProps:s,nestedChildren:a})}}}),i=this.mapArrayTypeChildrenToProps(r,i)},n.prototype.render=function(){var i=this.props,n=i.children,r=$f(i,["children"]),a=Jf({},r);return n&&(a=this.mapChildrenToProps(n,a)),t.createElement(e,a)},Zf(n,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(t.Component),i.propTypes={base:De().object,bodyAttributes:De().object,children:De().oneOfType([De().arrayOf(De().node),De().node]),defaultTitle:De().string,defer:De().bool,encodeSpecialCharacters:De().bool,htmlAttributes:De().object,link:De().arrayOf(De().object),meta:De().arrayOf(De().object),noscript:De().arrayOf(De().object),onChangeClientState:De().func,script:De().arrayOf(De().object),style:De().arrayOf(De().object),title:De().string,titleAttributes:De().object,titleTemplate:De().string},i.defaultProps={defer:!0,encodeSpecialCharacters:!0},i.peek=e.peek,i.rewind=function(){var t=e.rewind();return t||(t=wm({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},n}(wf()(function(e){return{baseTag:rm([kf,Nf],e),bodyAttributes:nm(Cf,e),defer:sm(e,Wf),encode:sm(e,Hf),htmlAttributes:nm(Mf,e),linkTags:am(Pf.LINK,[jf,kf],e),metaTags:am(Pf.META,[zf,Df,If,Bf,Lf],e),noscriptTags:am(Pf.NOSCRIPT,[Rf],e),onChangeClientState:im(e),scriptTags:am(Pf.SCRIPT,[Ff,Rf],e),styleTags:am(Pf.STYLE,[Of],e),title:tm(e),titleAttributes:nm(Tf,e)}},function(e){dm&&hm(dm),e.defer?dm=cm(function(){pm(e,function(){dm=null})}):(pm(e),dm=null)},wm)(function(){return null}));Am.renderStatic=Am.rewind;var Sm=__webpack_require__(2284);function _m(e,t){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_m(e,t)}function Em(){Em=function(e,t){return new i(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function i(e,n,r){var a=RegExp(e,n);return t.set(a,r||t.get(e)),_m(a,i.prototype)}function n(e,i){var n=t.get(i);return Object.keys(n).reduce(function(t,i){var r=n[i];if("number"==typeof r)t[i]=e[r];else{for(var a=0;void 0===e[r[a]]&&a+1<r.length;)a++;t[i]=e[r[a]]}return t},Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_m(e,t)}(i,RegExp),i.prototype.exec=function(t){var i=e.exec.call(this,t);if(i){i.groups=n(i,this);var r=i.indices;r&&(r.groups=n(r,this))}return i},i.prototype[Symbol.replace]=function(i,r){if("string"==typeof r){var a=t.get(this);return e[Symbol.replace].call(this,i,r.replace(/\$<([^>]+)(>|$)/g,function(e,t,i){if(""===i)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""}))}if("function"==typeof r){var s=this;return e[Symbol.replace].call(this,i,function(){var e=arguments;return"object"!=(0,Sm.A)(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,s)),r.apply(this,e)})}return e[Symbol.replace].call(this,i,r)},Em.apply(this,arguments)}const Cm=["texture"],Mm=["texture"],Tm=["name"],Pm=["material"],Dm=["enabled"],Om=["name"],km=["from","to","duration","delay"];var Im=Object.create,Rm=Object.defineProperty,Lm=Object.getOwnPropertyDescriptor,zm=Object.getOwnPropertyNames,Bm=Object.getPrototypeOf,jm=Object.prototype.hasOwnProperty,Fm=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Nm=(e,t,i)=>(i=null!=e?Im(Bm(e)):{},((e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of zm(t))!jm.call(e,r)&&r!==i&&Rm(e,r,{get:()=>t[r],enumerable:!(n=Lm(t,r))||n.enumerable});return e})(!t&&e&&e.__esModule?i:Rm(i,"default",{value:e,enumerable:!0}),e)),Um=(e,t,i)=>(((e,t,i)=>{t in e?Rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i),Vm=Fm((e,t)=>{!function(i,n){"object"==typeof e?t.exports=n():"function"==typeof define&&define.amd?define(n):i.Alea=n()}(e,function(){return e.importState=function(t){var i=new e;return i.importState(t),i},e;function e(){return function(e){var t=0,i=0,n=0,r=1;0==e.length&&(e=[+new Date]);var a=function(){var e=4022871197,t=function(t){t=t.toString();for(var i=0;i<t.length;i++){var n=.02519603282416938*(e+=t.charCodeAt(i));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}();t=a(" "),i=a(" "),n=a(" ");for(var s=0;s<e.length;s++)(t-=a(e[s]))<0&&(t+=1),(i-=a(e[s]))<0&&(i+=1),(n-=a(e[s]))<0&&(n+=1);a=null;var o=function(){var e=2091639*t+2.3283064365386963e-10*r;return t=i,i=n,n=e-(r=0|e)};return o.next=o,o.uint32=function(){return 4294967296*o()},o.fract53=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.version="Alea 0.9",o.args=e,o.exportState=function(){return[t,i,n,r]},o.importState=function(e){t=+e[0]||0,i=+e[1]||0,n=+e[2]||0,r=+e[3]||0},o}(Array.prototype.slice.call(arguments))}})}),Wm=Fm((e,t)=>{!function(i,n){"object"==typeof e&&typeof t<"u"?n(e):"function"==typeof define&&define.amd?define(["exports"],n):n((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})}(e,function(e){e.SVD=function(e,t,i,n,r){if(t=void 0===t||t,i=void 0===i||i,r=1e-64/(n=n||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var a,s,o,l,c,h,u,d,p,f,m,g,v=e[0].length,y=e.length;if(y<v)throw new TypeError("Invalid matrix: m < n");for(var b=[],x=[],w=[],A="f"===t?y:v,S=f=u=0;S<y;S++)x[S]=new Array(A).fill(0);for(S=0;S<v;S++)w[S]=new Array(v).fill(0);var _,E=new Array(v).fill(0);for(S=0;S<y;S++)for(a=0;a<v;a++)x[S][a]=e[S][a];for(S=0;S<v;S++){for(b[S]=u,p=0,o=S+1,a=S;a<y;a++)p+=Math.pow(x[a][S],2);if(p<r)u=0;else for(d=(h=x[S][S])*(u=h<0?Math.sqrt(p):-Math.sqrt(p))-p,x[S][S]=h-u,a=o;a<v;a++){for(p=0,s=S;s<y;s++)p+=x[s][S]*x[s][a];for(h=p/d,s=S;s<y;s++)x[s][a]=x[s][a]+h*x[s][S]}for(E[S]=u,p=0,a=o;a<v;a++)p+=Math.pow(x[S][a],2);if(p<r)u=0;else{for(d=(h=x[S][S+1])*(u=h<0?Math.sqrt(p):-Math.sqrt(p))-p,x[S][S+1]=h-u,a=o;a<v;a++)b[a]=x[S][a]/d;for(a=o;a<y;a++){for(p=0,s=o;s<v;s++)p+=x[a][s]*x[S][s];for(s=o;s<v;s++)x[a][s]=x[a][s]+p*b[s]}}f<(m=Math.abs(E[S])+Math.abs(b[S]))&&(f=m)}if(i)for(S=v-1;0<=S;S--){if(0!==u){for(d=x[S][S+1]*u,a=o;a<v;a++)w[a][S]=x[S][a]/d;for(a=o;a<v;a++){for(p=0,s=o;s<v;s++)p+=x[S][s]*w[s][a];for(s=o;s<v;s++)w[s][a]=w[s][a]+p*w[s][S]}}for(a=o;a<v;a++)w[S][a]=0,w[a][S]=0;w[S][S]=1,u=b[S],o=S}if(t){if("f"===t)for(S=v;S<y;S++){for(a=v;a<y;a++)x[S][a]=0;x[S][S]=1}for(S=v-1;0<=S;S--){for(o=S+1,u=E[S],a=o;a<A;a++)x[S][a]=0;if(0!==u){for(d=x[S][S]*u,a=o;a<A;a++){for(p=0,s=o;s<y;s++)p+=x[s][S]*x[s][a];for(h=p/d,s=S;s<y;s++)x[s][a]=x[s][a]+h*x[s][S]}for(a=S;a<y;a++)x[a][S]=x[a][S]/u}else for(a=S;a<y;a++)x[a][S]=0;x[S][S]=x[S][S]+1}}for(n*=f,s=v-1;0<=s;s--)for(var C=0;C<50;C++){for(_=!1,o=s;0<=o;o--){if(Math.abs(b[o])<=n){_=!0;break}if(Math.abs(E[o-1])<=n)break}if(!_)for(c=0,l=o-(p=1),S=o;S<s+1&&(h=p*b[S],b[S]=c*b[S],!(Math.abs(h)<=n));S++)if(u=E[S],E[S]=Math.sqrt(h*h+u*u),c=u/(d=E[S]),p=-h/d,t)for(a=0;a<y;a++)m=x[a][l],g=x[a][S],x[a][l]=m*c+g*p,x[a][S]=-m*p+g*c;if(g=E[s],o===s){if(g<0&&(E[s]=-g,i))for(a=0;a<v;a++)w[a][s]=-w[a][s];break}for(f=E[o],h=(((m=E[s-1])-g)*(m+g)+((u=b[s-1])-(d=b[s]))*(u+d))/(2*d*m),u=Math.sqrt(h*h+1),h=((f-g)*(f+g)+d*(m/(h<0?h-u:h+u)-d))/f,S=o+(p=c=1);S<s+1;S++){if(u=b[S],m=E[S],d=p*u,u*=c,g=Math.sqrt(h*h+d*d),h=f*(c=h/(b[S-1]=g))+u*(p=d/g),u=-f*p+u*c,d=m*p,m*=c,i)for(a=0;a<v;a++)f=w[a][S-1],g=w[a][S],w[a][S-1]=f*c+g*p,w[a][S]=-f*p+g*c;if(g=Math.sqrt(h*h+d*d),h=(c=h/(E[S-1]=g))*u+(p=d/g)*m,f=-p*u+c*m,t)for(a=0;a<y;a++)m=x[a][S-1],g=x[a][S],x[a][S-1]=m*c+g*p,x[a][S]=-m*p+g*c}b[o]=0,b[s]=h,E[s]=f}for(S=0;S<v;S++)E[S]<n&&(E[S]=0);return{u:x,q:E,v:w}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})})}),Hm=Fm((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},t.exports=e.default}),Gm=Fm((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},t.exports=e.default}),qm=Fm((e,t)=>{function i(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)}!function(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}(i,Error),i.buildMessage=function(e,t){var i={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t,i="";for(t=0;t<e.parts.length;t++)i+=e.parts[t]instanceof Array?a(e.parts[t][0])+"-"+a(e.parts[t][1]):a(e.parts[t]);return"["+(e.inverted?"^":"")+i+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function s(e){return i[e.type](e)}return"Expected "+function(e){var t,i,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=s(e[t]);if(n.sort(),n.length>0){for(t=1,i=1;t<n.length;t++)n[t-1]!==n[t]&&(n[i]=n[t],i++);n.length=i}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+r(e)+'"':"end of input"}(t)+" found."},t.exports={SyntaxError:i,parse:function(e,t){t=void 0!==t?t:{};var n,r={},a={svg_path:ge},s=ge,o=function(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t=t.concat.apply(t,e[i]);var n=t[0];return n&&"m"==n.code&&(delete n.relative,n.code="M"),t},l=function(e,t){return function(e,t){if(!t)return[e];for(var i=[e],n=0,r=t.length;n<r;n++)i[n+1]=t[n][1];return i}(e,t)},c=/^[Mm]/,h=ue(["M","m"],!1,!1),u=function(e,t,i){var n=je(e,[t]);return i&&(n=n.concat(je("M"==e?"L":"l",i[1]))),n},d=/^[Zz]/,p=ue(["Z","z"],!1,!1),f=function(){return je("Z")},m=/^[Ll]/,g=ue(["L","l"],!1,!1),v=function(e,t){return je(e,t)},y=/^[Hh]/,b=ue(["H","h"],!1,!1),x=function(e,t){return je(e,t.map(function(e){return{x:e}}))},w=/^[Vv]/,A=ue(["V","v"],!1,!1),S=function(e,t){return je(e,t.map(function(e){return{y:e}}))},_=/^[Cc]/,E=ue(["C","c"],!1,!1),C=function(e,t,i){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y,x:i.x,y:i.y}},M=/^[Ss]/,T=ue(["S","s"],!1,!1),P=function(e,t){return{x2:e.x,y2:e.y,x:t.x,y:t.y}},D=/^[Qq]/,O=ue(["Q","q"],!1,!1),k=function(e,t){return{x1:e.x,y1:e.y,x:t.x,y:t.y}},I=/^[Tt]/,R=ue(["T","t"],!1,!1),L=/^[Aa]/,z=ue(["A","a"],!1,!1),B=function(e,t,i,n,r,a){return{rx:e,ry:t,xAxisRotation:i,largeArc:n,sweep:r,x:a.x,y:a.y}},j=function(e,t){return{x:e,y:t}},F=function(e){return 1*e},N=function(e){return 1*e.join("")},U=/^[01]/,V=ue(["0","1"],!1,!1),W=function(e){return"1"==e},H=function(){return""},G=",",q=he(",",!1),Y=function(e){return e.join("")},X=".",Q=he(".",!1),K=/^[eE]/,Z=ue(["e","E"],!1,!1),J=/^[+\-]/,$=ue(["+","-"],!1,!1),ee=/^[0-9]/,te=ue([["0","9"]],!1,!1),ie=function(e){return e.join("")},ne=/^[ \t\n\r]/,re=ue([" ","\t","\n","\r"],!1,!1),ae=0,se=[{line:1,column:1}],oe=0,le=[],ce=0;if("startRule"in t){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=a[t.startRule]}function he(e,t){return{type:"literal",text:e,ignoreCase:t}}function ue(e,t,i){return{type:"class",parts:e,inverted:t,ignoreCase:i}}function de(t){var i,n=se[t];if(n)return n;for(i=t-1;!se[i];)i--;for(n={line:(n=se[i]).line,column:n.column};i<t;)10===e.charCodeAt(i)?(n.line++,n.column=1):n.column++,i++;return se[t]=n,n}function pe(e,t){var i=de(e),n=de(t);return{start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:n.line,column:n.column}}}function fe(e){ae<oe||(ae>oe&&(oe=ae,le=[]),le.push(e))}function me(e,t,n){return new i(i.buildMessage(e,t),e,t,n)}function ge(){var e,t,i,n,a;for(e=ae,t=[],i=Le();i!==r;)t.push(i),i=Le();if(t!==r)if(i=function(){var e,t,i,n,a,s;if(e=ae,t=ve(),t!==r){for(i=[],n=ae,a=[],s=Le();s!==r;)a.push(s),s=Le();for(a!==r?(s=ve())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;){for(i.push(n),n=ae,a=[],s=Le();s!==r;)a.push(s),s=Le();a!==r?(s=ve())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r)}i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),i===r&&(i=null),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?e=t=o(i):(ae=e,e=r)}else ae=e,e=r;else ae=e,e=r;return e}function ve(){var t,i,n,a,s,o;if(t=ae,i=function(){var t,i,n,a,s,o,l;if(t=ae,c.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(h)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=Ee())!==r?(s=ae,(o=Pe())===r&&(o=null),o!==r?(l=be())!==r?s=o=[o,l]:(ae=s,s=r):(ae=s,s=r),s===r&&(s=null),s!==r?t=i=u(i,a,s):(ae=t,t=r)):(ae=t,t=r):(ae=t,t=r)}else ae=t,t=r;return t}(),i!==r){for(n=[],a=ae,s=[],o=Le();o!==r;)s.push(o),o=Le();for(s!==r?(o=ye())!==r?a=s=[s,o]:(ae=a,a=r):(ae=a,a=r);a!==r;){for(n.push(a),a=ae,s=[],o=Le();o!==r;)s.push(o),o=Le();s!==r?(o=ye())!==r?a=s=[s,o]:(ae=a,a=r):(ae=a,a=r)}n!==r?t=i=l(i,n):(ae=t,t=r)}else ae=t,t=r;return t}function ye(){var t;return t=function(){var t,i;return t=ae,d.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(p)),i!==r&&(i=f()),t=i,t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,m.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(g)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=be())!==r?t=i=v(i,a):(ae=t,t=r):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,y.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(b)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=xe())!==r?t=i=x(i,a):(ae=t,t=r):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,w.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(A)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=xe())!==r?t=i=S(i,a):(ae=t,t=r):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,_.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(E)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=function(){var e,t,i,n,a,s;if(e=ae,t=we(),t!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=we())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=we())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),a!==r?t=i=v(i,a):(ae=t,t=r)):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,M.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(T)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=function(){var e,t,i,n,a,s;if(e=ae,t=Ae(),t!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ae())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ae())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),a!==r?t=i=v(i,a):(ae=t,t=r)):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,D.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(O)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=function(){var e,t,i,n,a,s;if(e=ae,t=Se(),t!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Se())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Se())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),a!==r?t=i=v(i,a):(ae=t,t=r)):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,I.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(R)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=function(){var e,t,i,n,a,s;if(e=ae,t=Ee(),t!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ee())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ee())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),a!==r?t=i=v(i,a):(ae=t,t=r)):(ae=t,t=r)}else ae=t,t=r;return t}(),t===r&&(t=function(){var t,i,n,a;if(t=ae,L.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(z)),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?(a=function(){var e,t,i,n,a,s;if(e=ae,t=_e(),t!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=_e())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=_e())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}(),a!==r?t=i=v(i,a):(ae=t,t=r)):(ae=t,t=r)}else ae=t,t=r;return t}())))))))),t}function be(){var e,t,i,n,a,s;if(e=ae,(t=Ee())!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ee())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Ee())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}function xe(){var e,t,i,n,a,s;if(e=ae,(t=Me())!==r){for(i=[],n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Me())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);n!==r;)i.push(n),n=ae,(a=Pe())===r&&(a=null),a!==r?(s=Me())!==r?n=a=[a,s]:(ae=n,n=r):(ae=n,n=r);i!==r?e=t=l(t,i):(ae=e,e=r)}else ae=e,e=r;return e}function we(){var e,t,i,n,a,s;return e=ae,(t=Ee())!==r?((i=Pe())===r&&(i=null),i!==r?(n=Ee())!==r?((a=Pe())===r&&(a=null),a!==r?(s=Ee())!==r?e=t=C(t,n,s):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r),e}function Ae(){var e,t,i,n;return e=ae,(t=Ee())!==r?((i=Pe())===r&&(i=null),i!==r?(n=Ee())!==r?e=t=P(t,n):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r),e}function Se(){var e,t,i,n;return e=ae,(t=Ee())!==r?((i=Pe())===r&&(i=null),i!==r?(n=Ee())!==r?e=t=k(t,n):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r),e}function _e(){var e,t,i,n,a,s,o,l,c,h,u;return e=ae,(t=Ce())!==r?((i=Pe())===r&&(i=null),i!==r?(n=Ce())!==r?((a=Pe())===r&&(a=null),a!==r?(s=Me())!==r?Pe()!==r?(o=Te())!==r?((l=Pe())===r&&(l=null),l!==r?(c=Te())!==r?((h=Pe())===r&&(h=null),h!==r?(u=Ee())!==r?e=t=B(t,n,s,o,c,u):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r):(ae=e,e=r):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r),e}function Ee(){var e,t,i,n;return e=ae,(t=Me())!==r?((i=Pe())===r&&(i=null),i!==r?(n=Me())!==r?e=t=j(t,n):(ae=e,e=r):(ae=e,e=r)):(ae=e,e=r),e}function Ce(){var e,t;return e=ae,(t=Oe())===r&&(t=Re()),t!==r&&(t=F(t)),e=t}function Me(){var e,t,i,n;return e=ae,t=ae,(i=Ie())===r&&(i=null),i!==r?(n=Oe())!==r?t=i=[i,n]:(ae=t,t=r):(ae=t,t=r),t===r&&(t=ae,(i=Ie())===r&&(i=null),i!==r?(n=Re())!==r?t=i=[i,n]:(ae=t,t=r):(ae=t,t=r)),t!==r&&(t=N(t)),e=t}function Te(){var t,i;return t=ae,U.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(V)),i!==r&&(i=W(i)),t=i}function Pe(){var e,t,i,n,a;if(e=ae,t=[],(i=Le())!==r)for(;i!==r;)t.push(i),i=Le();else t=r;if(t!==r)if((i=De())===r&&(i=null),i!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?e=t=[t,i,n]:(ae=e,e=r)}else ae=e,e=r;else ae=e,e=r;if(e===r){if(e=ae,t=ae,(i=De())!==r){for(n=[],a=Le();a!==r;)n.push(a),a=Le();n!==r?t=i=[i,n]:(ae=t,t=r)}else ae=t,t=r;t!==r&&(t=H()),e=t}return e}function De(){var t;return 44===e.charCodeAt(ae)?(t=G,ae++):(t=r,0===ce&&fe(q)),t}function Oe(){var t,i,n,a;return t=ae,i=ae,n=function(){var t,i,n,a,s;return t=ae,i=ae,n=Re(),n===r&&(n=null),n!==r?(46===e.charCodeAt(ae)?(a=X,ae++):(a=r,0===ce&&fe(Q)),a!==r?(s=Re(),s!==r?(n=[n,a,s],i=n):(ae=i,i=r)):(ae=i,i=r)):(ae=i,i=r),i===r&&(i=ae,n=Re(),n!==r?(46===e.charCodeAt(ae)?(a=X,ae++):(a=r,0===ce&&fe(Q)),a!==r?(n=[n,a],i=n):(ae=i,i=r)):(ae=i,i=r)),i!==r&&(i=Y(i)),t=i,t}(),n!==r?((a=ke())===r&&(a=null),a!==r?i=n=[n,a]:(ae=i,i=r)):(ae=i,i=r),i===r&&(i=ae,(n=Re())!==r?(a=ke())!==r?i=n=[n,a]:(ae=i,i=r):(ae=i,i=r)),i!==r&&(i=Y(i)),t=i}function ke(){var t,i,n,a,s;return t=ae,i=ae,K.test(e.charAt(ae))?(n=e.charAt(ae),ae++):(n=r,0===ce&&fe(Z)),n!==r?((a=Ie())===r&&(a=null),a!==r?(s=Re())!==r?i=n=[n,a,s]:(ae=i,i=r):(ae=i,i=r)):(ae=i,i=r),i!==r&&(i=Y(i)),t=i}function Ie(){var t;return J.test(e.charAt(ae))?(t=e.charAt(ae),ae++):(t=r,0===ce&&fe($)),t}function Re(){var t,i,n;if(t=ae,i=[],ee.test(e.charAt(ae))?(n=e.charAt(ae),ae++):(n=r,0===ce&&fe(te)),n!==r)for(;n!==r;)i.push(n),ee.test(e.charAt(ae))?(n=e.charAt(ae),ae++):(n=r,0===ce&&fe(te));else i=r;return i!==r&&(i=ie(i)),t=i}function Le(){var t,i;return t=ae,ne.test(e.charAt(ae))?(i=e.charAt(ae),ae++):(i=r,0===ce&&fe(re)),i!==r&&(i=H()),t=i}var ze={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Be in ze)ze[Be.toUpperCase()]=ze[Be];function je(e,t){t||(t=[{}]);for(var i=t.length;i--;){var n={code:e,command:ze[e]};for(var r in e==e.toLowerCase()&&(n.relative=!0),t[i])n[r]=t[i][r];t[i]=n}return t}if((n=s())!==r&&ae===e.length)return n;throw n!==r&&ae<e.length&&fe({type:"end"}),me(le,oe<e.length?e.charAt(oe):null,oe<e.length?pe(oe,oe+1):pe(oe,oe))}}}),Ym=Fm((e,t)=>{var i=qm().parse;i.parseSVG=i,i.makeAbsolute=function(e){var t,i={x:0,y:0},n={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return e.forEach(function(e){for(var r in"moveto"===e.command&&(t=e),e.x0=i.x,e.y0=i.y,n)r in e&&(e[r]+=e.relative?e[n[r]]:0);"x"in e||(e.x=i.x),"y"in e||(e.y=i.y),e.relative=!1,e.code=e.code.toUpperCase(),"closepath"==e.command&&(e.x=t.x,e.y=t.y),i=e}),e},t.exports=i}),Xm=Fm((e,t)=>{t.exports=function(e,t){for(var i=e.split("."),n=t.split("."),r=0;r<3;r++){var a=Number(i[r]),s=Number(n[r]);if(a>s)return 1;if(s>a)return-1;if(!isNaN(a)&&isNaN(s))return 1;if(isNaN(a)&&!isNaN(s))return-1}return 0}}),Qm="149",Km=0,Zm=1,Jm=2,$m=3,eg=0,tg=1,ig=2,ng=100,rg=101,ag=102,sg=200,og=201,lg=202,cg=203,hg=204,ug=205,dg=206,pg=207,fg=208,mg=209,gg=210,vg=301,yg=302,bg=306,xg=1e3,wg=1001,Ag=1002,Sg=1003,_g=1004,Eg=1005,Cg=1006,Mg=1007,Tg=1008,Pg=1009,Dg=1014,Og=1015,kg=1016,Ig=1020,Rg=1023,Lg=1026,zg=1027,Bg=1028,jg=1030,Fg=33776,Ng=33777,Ug=33778,Vg=33779,Wg=36492,Hg=2202,Gg=2300,qg=2301,Yg=2302,Xg=2400,Qg=2401,Kg=2402,Zg=2500,Jg=3e3,$g=3001,ev=3200,tv="srgb",iv="srgb-linear",nv=7680,rv=35044,av="300 es",sv=1035,ov=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let i=this._listeners[e];if(void 0!==i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}},lv=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],cv=1234567,hv=Math.PI/180,uv=180/Math.PI;function dv(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(lv[255&e]+lv[e>>8&255]+lv[e>>16&255]+lv[e>>24&255]+"-"+lv[255&t]+lv[t>>8&255]+"-"+lv[t>>16&15|64]+lv[t>>24&255]+"-"+lv[63&i|128]+lv[i>>8&255]+"-"+lv[i>>16&255]+lv[i>>24&255]+lv[255&n]+lv[n>>8&255]+lv[n>>16&255]+lv[n>>24&255]).toLowerCase()}function pv(e,t,i){return Math.max(t,Math.min(i,e))}function fv(e,t){return(e%t+t)%t}function mv(e,t,i){return(1-i)*e+i*t}function gv(e){return 0===(e&e-1)&&0!==e}function vv(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function yv(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function bv(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function xv(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var wv=Object.freeze({__proto__:null,DEG2RAD:hv,RAD2DEG:uv,ceilPowerOfTwo:vv,clamp:pv,damp:function(e,t,i,n){return mv(e,t,1-Math.exp(-i*n))},degToRad:function(e){return e*hv},denormalize:bv,euclideanModulo:fv,floorPowerOfTwo:yv,generateUUID:dv,inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},isPowerOfTwo:gv,lerp:mv,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},normalize:xv,pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(fv(e,2*t)-t)},radToDeg:function(e){return e*uv},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function(e){void 0!==e&&(cv=e);let t=cv+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(e,t,i,n,r){let a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((t+n)/2),h=s((t+n)/2),u=a((t-n)/2),d=s((t-n)/2),p=a((n-t)/2),f=s((n-t)/2);switch(r){case"XYX":e.set(o*h,l*u,l*d,o*c);break;case"YZY":e.set(l*d,o*h,l*u,o*c);break;case"ZXZ":e.set(l*u,l*d,o*h,o*c);break;case"XZX":e.set(o*h,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*h,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)}}),Av=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Av.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*n+e.x,this.y=r*n+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Sv=class{constructor(){Sv.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,n,r,a,s,o,l){let c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],h=i[7],u=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],b=n[7],x=n[2],w=n[5],A=n[8];return r[0]=a*f+s*v+o*x,r[3]=a*m+s*y+o*w,r[6]=a*g+s*b+o*A,r[1]=l*f+c*v+h*x,r[4]=l*m+c*y+h*w,r[7]=l*g+c*b+h*A,r[2]=u*f+d*v+p*x,r[5]=u*m+d*y+p*w,r[8]=u*g+d*b+p*A,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-i*r*c+i*s*o+n*r*l-n*a*o}invert(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],h=c*a-s*l,u=s*o-c*r,d=l*r-a*o,p=t*h+i*u+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=h*f,e[1]=(n*l-c*i)*f,e[2]=(s*i-n*a)*f,e[3]=u*f,e[4]=(c*t-n*o)*f,e[5]=(n*r-s*t)*f,e[6]=d*f,e[7]=(i*o-l*t)*f,e[8]=(a*t-i*r)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,a,s){let o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-n*l,n*o,-n*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(_v.makeScale(e,t)),this}rotate(e){return this.premultiply(_v.makeRotation(-e)),this}translate(e,t){return this.premultiply(_v.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}},_v=new Sv;function Ev(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Cv={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Mv(e,t){return new Cv[e](t)}function Tv(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Pv(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Dv(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Ov={[tv]:{[iv]:Pv},[iv]:{[tv]:Dv}},kv={legacyMode:!0,get workingColorSpace(){return iv},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(Ov[t]&&void 0!==Ov[t][i]){let n=Ov[t][i];return e.r=n(e.r),e.g=n(e.g),e.b=n(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Iv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rv={r:0,g:0,b:0},Lv={h:0,s:0,l:0},zv={h:0,s:0,l:0};function Bv(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}function jv(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Fv=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tv;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,kv.toWorkingColorSpace(this,t),this}setRGB(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kv.workingColorSpace;return this.r=e,this.g=t,this.b=i,kv.toWorkingColorSpace(this,n),this}setHSL(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kv.workingColorSpace;if(e=fv(e,1),t=pv(t,0,1),i=pv(i,0,1),0===t)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=Bv(r,n,e+1/3),this.g=Bv(r,n,e),this.b=Bv(r,n,e-1/3)}return kv.toWorkingColorSpace(this,n),this}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tv;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e,r=t[1],a=t[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,kv.toWorkingColorSpace(this,i),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,kv.toWorkingColorSpace(this,i),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let t=parseFloat(e[1])/360,r=parseFloat(e[2])/100,a=parseFloat(e[3])/100;return n(e[4]),this.setHSL(t,r,a,i)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=t[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,kv.toWorkingColorSpace(this,i),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,kv.toWorkingColorSpace(this,i),this}return e&&e.length>0?this.setColorName(e,i):this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tv,i=Iv[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pv(e.r),this.g=Pv(e.g),this.b=Pv(e.b),this}copyLinearToSRGB(e){return this.r=Dv(e.r),this.g=Dv(e.g),this.b=Dv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tv;return kv.fromWorkingColorSpace(jv(this,Rv),e),pv(255*Rv.r,0,255)<<16^pv(255*Rv.g,0,255)<<8^pv(255*Rv.b,0,255)}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tv;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kv.workingColorSpace;kv.fromWorkingColorSpace(jv(this,Rv),t);let i,n,r=Rv.r,a=Rv.g,s=Rv.b,o=Math.max(r,a,s),l=Math.min(r,a,s),c=(l+o)/2;if(l===o)i=0,n=0;else{let e=o-l;switch(n=c<=.5?e/(o+l):e/(2-o-l),o){case r:i=(a-s)/e+(a<s?6:0);break;case a:i=(s-r)/e+2;break;case s:i=(r-a)/e+4}i/=6}return e.h=i,e.s=n,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kv.workingColorSpace;return kv.fromWorkingColorSpace(jv(this,Rv),t),e.r=Rv.r,e.g=Rv.g,e.b=Rv.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tv;return kv.fromWorkingColorSpace(jv(this,Rv),e),e!==tv?"color(".concat(e," ").concat(Rv.r," ").concat(Rv.g," ").concat(Rv.b,")"):"rgb(".concat(255*Rv.r|0,",").concat(255*Rv.g|0,",").concat(255*Rv.b|0,")")}offsetHSL(e,t,i){return this.getHSL(Lv),Lv.h+=e,Lv.s+=t,Lv.l+=i,this.setHSL(Lv.h,Lv.s,Lv.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Lv),e.getHSL(zv);let i=mv(Lv.h,zv.h,t),n=mv(Lv.s,zv.s,t),r=mv(Lv.l,zv.l,t);return this.setHSL(i,n,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Fv.NAMES=Iv;var Nv,Uv=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Nv&&(Nv=Tv("canvas")),Nv.width=e.width,Nv.height=e.height;let i=Nv.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Nv}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Tv("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*Pv(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Pv(t[e]/255)):t[e]=Pv(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Vv=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,this.uuid=dv(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(Wv(n[t].image)):e.push(Wv(n[t]))}else e=Wv(n);i.url=e}return t||(e.images[this.uuid]=i),i}};function Wv(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Uv.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Hv=0,Gv=class extends ov{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gv.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gv.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wg,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wg,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cg,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tg,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Rg,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Pg,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Gv.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Jg;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hv++}),this.uuid=dv(),this.name="",this.source=new Vv(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Av(0,0),this.repeat=new Av(1,1),this.center=new Av(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sv,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xg:e.x=e.x-Math.floor(e.x);break;case wg:e.x=e.x<0?0:1;break;case Ag:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case xg:e.y=e.y-Math.floor(e.y);break;case wg:e.y=e.y<0?0:1;break;case Ag:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};Gv.DEFAULT_IMAGE=null,Gv.DEFAULT_MAPPING=300,Gv.DEFAULT_ANISOTROPY=1;var qv=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;qv.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,n=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r,a=e.elements,s=a[0],o=a[4],l=a[8],c=a[1],h=a[5],u=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(s+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let e=(s+1)/2,a=(h+1)/2,m=(f+1)/2,g=(o+c)/4,v=(l+d)/4,y=(u+p)/4;return e>a&&e>m?e<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=g/i,r=v/i):a>m?a<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(a),i=g/n,r=y/n):m<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),i=v/r,n=y/r),this.set(i,n,r,t),this}let m=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(p-u)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((s+h+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Yv=class extends ov{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qv(0,0,e,t),this.scissorTest=!1,this.viewport=new qv(0,0,e,t);let n={width:e,height:t,depth:1};this.texture=new Gv(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Cg,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Vv(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Xv=class extends Gv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Sg,this.minFilter=Sg,this.wrapR=wg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Qv=class extends Yv{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;let t=this.texture;this.texture=[];for(let i=0;i<e;i++)this.texture[i]=t.clone(),this.texture[i].isRenderTargetTexture=!0}setSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Kv=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,a,s){let o=i[n+0],l=i[n+1],c=i[n+2],h=i[n+3],u=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=h);if(1===s)return e[t+0]=u,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(h!==f||o!==u||l!==d||c!==p){let e=1-s,t=o*u+l*d+c*p+h*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){let r=Math.sqrt(n),a=Math.atan2(r,t*i);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}let r=s*i;if(o=o*e+u*r,l=l*e+d*r,c=c*e+p*r,h=h*e+f*r,e===1-s){let e=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=e,l*=e,c*=e,h*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,n,r,a){let s=i[n],o=i[n+1],l=i[n+2],c=i[n+3],h=r[a],u=r[a+1],d=r[a+2],p=r[a+3];return e[t]=s*p+c*h+o*d-l*u,e[t+1]=o*p+c*u+l*h-s*d,e[t+2]=l*p+c*d+s*u-o*h,e[t+3]=c*p-s*h-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let i=e._x,n=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(n/2),h=s(r/2),u=o(i/2),d=o(n/2),p=o(r/2);switch(a){case"XYZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"YXZ":this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"ZXY":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p;break;case"ZYX":this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p;break;case"YZX":this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p;break;case"XZY":this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],n=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],h=t[10],u=i+s+h;if(u>0){let e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-n)*e}else if(i>s&&i>h){let e=2*Math.sqrt(1+i-s-h);this._w=(c-o)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(r+l)/e}else if(s>h){let e=2*Math.sqrt(1+s-i-h);this._w=(r-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(o+c)/e}else{let e=2*Math.sqrt(1+h-i-s);this._w=(a-n)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pv(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(0===i)return this;let n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,n=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+a*s+n*l-r*o,this._y=n*c+a*o+r*s-i*l,this._z=r*c+a*l+i*o-n*s,this._w=a*c-i*s-n*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let i=this._x,n=this._y,r=this._z,a=this._w,s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;let o=1-s*s;if(o<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=a*h+this._w*u,this._x=i*h+this._x*u,this._y=n*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(n),i*Math.sin(r),i*Math.cos(r),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Zv=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Zv.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($v.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($v.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,n=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(e){let t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*n-s*i,c=o*i+s*t-r*n,h=o*n+r*i-a*t,u=-r*t-a*i-s*n;return this.x=l*o+u*-r+c*-s-h*-a,this.y=c*o+u*-a+h*-r-l*-s,this.z=h*o+u*-s+l*-a-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,n=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Jv.copy(this).projectOnVector(e),this.sub(Jv)}reflect(e){return this.sub(Jv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(pv(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Jv=new Zv,$v=new Kv,ey=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){let l=e[o],c=e[o+1],h=e[o+2];l<t&&(t=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,i,n),this.max.set(r,a,s),this}setFromBufferAttribute(e){let t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){let l=e.getX(o),c=e.getY(o),h=e.getZ(o);l<t&&(t=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,i,n),this.max.set(r,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=iy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);let i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){let t=i.attributes.position;for(let i=0,n=t.count;i<n;i++)iy.fromBufferAttribute(t,i).applyMatrix4(e.matrixWorld),this.expandByPoint(iy)}else null===i.boundingBox&&i.computeBoundingBox(),ny.copy(i.boundingBox),ny.applyMatrix4(e.matrixWorld),this.union(ny);let n=e.children;for(let r=0,a=n.length;r<a;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,iy),iy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hy),uy.subVectors(this.max,hy),ry.subVectors(e.a,hy),ay.subVectors(e.b,hy),sy.subVectors(e.c,hy),oy.subVectors(ay,ry),ly.subVectors(sy,ay),cy.subVectors(ry,sy);let t=[0,-oy.z,oy.y,0,-ly.z,ly.y,0,-cy.z,cy.y,oy.z,0,-oy.x,ly.z,0,-ly.x,cy.z,0,-cy.x,-oy.y,oy.x,0,-ly.y,ly.x,0,-cy.y,cy.x,0];return!(!fy(t,ry,ay,sy,uy)||(t=[1,0,0,0,1,0,0,0,1],!fy(t,ry,ay,sy,uy)))&&(dy.crossVectors(oy,ly),t=[dy.x,dy.y,dy.z],fy(t,ry,ay,sy,uy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return iy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(iy).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ty[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ty[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ty[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ty[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ty[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ty[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ty[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ty[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ty)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ty=[new Zv,new Zv,new Zv,new Zv,new Zv,new Zv,new Zv,new Zv],iy=new Zv,ny=new ey,ry=new Zv,ay=new Zv,sy=new Zv,oy=new Zv,ly=new Zv,cy=new Zv,hy=new Zv,uy=new Zv,dy=new Zv,py=new Zv;function fy(e,t,i,n,r){for(let a=0,s=e.length-3;a<=s;a+=3){py.fromArray(e,a);let s=r.x*Math.abs(py.x)+r.y*Math.abs(py.y)+r.z*Math.abs(py.z),o=t.dot(py),l=i.dot(py),c=n.dot(py);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}var my=new ey,gy=new Zv,vy=new Zv,yy=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;void 0!==t?i.copy(t):my.setFromPoints(e).getCenter(i);let n=0;for(let r=0,a=e.length;r<a;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gy.subVectors(e,this.center);let t=gy.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(gy,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(vy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gy.copy(e.center).add(vy)),this.expandByPoint(gy.copy(e.center).sub(vy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},by=new Zv,xy=new Zv,wy=new Zv,Ay=new Zv,Sy=new Zv,_y=new Zv,Ey=new Zv,Cy=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,by)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=by.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(by.copy(this.direction).multiplyScalar(t).add(this.origin),by.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){xy.copy(e).add(t).multiplyScalar(.5),wy.copy(t).sub(e).normalize(),Ay.copy(this.origin).sub(xy);let r,a,s,o,l=.5*e.distanceTo(t),c=-this.direction.dot(wy),h=Ay.dot(this.direction),u=-Ay.dot(wy),d=Ay.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(r=c*u-h,a=c*h-u,o=l*p,r>=0)if(a>=-o)if(a<=o){let e=1/p;r*=e,a*=e,s=r*(r+c*a+2*h)+a*(c*r+a+2*u)+d}else a=l,r=Math.max(0,-(c*a+h)),s=-r*r+a*(a+2*u)+d;else a=-l,r=Math.max(0,-(c*a+h)),s=-r*r+a*(a+2*u)+d;else a<=-o?(r=Math.max(0,-(-c*l+h)),a=r>0?-l:Math.min(Math.max(-l,-u),l),s=-r*r+a*(a+2*u)+d):a<=o?(r=0,a=Math.min(Math.max(-l,-u),l),s=a*(a+2*u)+d):(r=Math.max(0,-(c*l+h)),a=r>0?l:Math.min(Math.max(-l,-u),l),s=-r*r+a*(a+2*u)+d);else a=c>0?-l:l,r=Math.max(0,-(c*a+h)),s=-r*r+a*(a+2*u)+d;return i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),n&&n.copy(wy).multiplyScalar(a).add(xy),s}intersectSphere(e,t){by.subVectors(e.center,this.origin);let i=by.dot(this.direction),n=by.dot(by)-i*i,r=e.radius*e.radius;if(n>r)return null;let a=Math.sqrt(r-n),s=i-a,o=i+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,a,s,o,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(i=(e.min.x-u.x)*l,n=(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,n=(e.min.x-u.x)*l),c>=0?(r=(e.min.y-u.y)*c,a=(e.max.y-u.y)*c):(r=(e.max.y-u.y)*c,a=(e.min.y-u.y)*c),i>a||r>n||((r>i||isNaN(i))&&(i=r),(a<n||isNaN(n))&&(n=a),h>=0?(s=(e.min.z-u.z)*h,o=(e.max.z-u.z)*h):(s=(e.max.z-u.z)*h,o=(e.min.z-u.z)*h),i>o||s>n)||((s>i||i!==i)&&(i=s),(o<n||n!==n)&&(n=o),n<0)?null:this.at(i>=0?i:n,t)}intersectsBox(e){return null!==this.intersectBox(e,by)}intersectTriangle(e,t,i,n,r){Sy.subVectors(t,e),_y.subVectors(i,e),Ey.crossVectors(Sy,_y);let a,s=this.direction.dot(Ey);if(s>0){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Ay.subVectors(this.origin,e);let o=a*this.direction.dot(_y.crossVectors(Ay,_y));if(o<0)return null;let l=a*this.direction.dot(Sy.cross(Ay));if(l<0||o+l>s)return null;let c=-a*Ay.dot(Ey);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},My=class{constructor(){My.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new My).fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,n=1/Ty.setFromMatrixColumn(e,0).length(),r=1/Ty.setFromMatrixColumn(e,1).length(),a=1/Ty.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),h=Math.sin(r);if("XYZ"===e.order){let e=a*c,i=a*h,n=s*c,r=s*h;t[0]=o*c,t[4]=-o*h,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=n+i*l,t[10]=a*o}else if("YXZ"===e.order){let e=o*c,i=o*h,n=l*c,r=l*h;t[0]=e+r*s,t[4]=n*s-i,t[8]=a*l,t[1]=a*h,t[5]=a*c,t[9]=-s,t[2]=i*s-n,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){let e=o*c,i=o*h,n=l*c,r=l*h;t[0]=e-r*s,t[4]=-a*h,t[8]=n+i*s,t[1]=i+n*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){let e=a*c,i=a*h,n=s*c,r=s*h;t[0]=o*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=o*h,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){let e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=r-e*h,t[8]=n*h+i,t[1]=h,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*h+n,t[10]=e-r*h}else if("XZY"===e.order){let e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=-h,t[8]=l*c,t[1]=e*h+r,t[5]=a*c,t[9]=i*h-n,t[2]=n*h-i,t[6]=s*c,t[10]=r*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Dy,e,Oy)}lookAt(e,t,i){let n=this.elements;return Ry.subVectors(e,t),0===Ry.lengthSq()&&(Ry.z=1),Ry.normalize(),ky.crossVectors(i,Ry),0===ky.lengthSq()&&(1===Math.abs(i.z)?Ry.x+=1e-4:Ry.z+=1e-4,Ry.normalize(),ky.crossVectors(i,Ry)),ky.normalize(),Iy.crossVectors(Ry,ky),n[0]=ky.x,n[4]=Iy.x,n[8]=Ry.x,n[1]=ky.y,n[5]=Iy.y,n[9]=Ry.y,n[2]=ky.z,n[6]=Iy.z,n[10]=Ry.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],h=i[5],u=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],b=i[11],x=i[15],w=n[0],A=n[4],S=n[8],_=n[12],E=n[1],C=n[5],M=n[9],T=n[13],P=n[2],D=n[6],O=n[10],k=n[14],I=n[3],R=n[7],L=n[11],z=n[15];return r[0]=a*w+s*E+o*P+l*I,r[4]=a*A+s*C+o*D+l*R,r[8]=a*S+s*M+o*O+l*L,r[12]=a*_+s*T+o*k+l*z,r[1]=c*w+h*E+u*P+d*I,r[5]=c*A+h*C+u*D+d*R,r[9]=c*S+h*M+u*O+d*L,r[13]=c*_+h*T+u*k+d*z,r[2]=p*w+f*E+m*P+g*I,r[6]=p*A+f*C+m*D+g*R,r[10]=p*S+f*M+m*O+g*L,r[14]=p*_+f*T+m*k+g*z,r[3]=v*w+y*E+b*P+x*I,r[7]=v*A+y*C+b*D+x*R,r[11]=v*S+y*M+b*O+x*L,r[15]=v*_+y*T+b*k+x*z,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+r*o*h-n*l*h-r*s*u+i*l*u+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*u+r*a*u-n*a*d+n*l*c-r*o*c)+e[11]*(+t*l*h-t*s*d-r*a*h+i*a*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*o*h+t*s*u+n*a*h-i*a*u+i*o*c)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,i){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=h*m*l-f*u*l+f*o*d-s*m*d-h*o*g+s*u*g,y=p*u*l-c*m*l-p*o*d+a*m*d+c*o*g-a*u*g,b=c*f*l-p*h*l+p*s*d-a*f*d-c*s*g+a*h*g,x=p*h*o-c*f*o-p*s*u+a*f*u+c*s*m-a*h*m,w=t*v+i*y+n*b+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/w;return e[0]=v*A,e[1]=(f*u*r-h*m*r-f*n*d+i*m*d+h*n*g-i*u*g)*A,e[2]=(s*m*r-f*o*r+f*n*l-i*m*l-s*n*g+i*o*g)*A,e[3]=(h*o*r-s*u*r-h*n*l+i*u*l+s*n*d-i*o*d)*A,e[4]=y*A,e[5]=(c*m*r-p*u*r+p*n*d-t*m*d-c*n*g+t*u*g)*A,e[6]=(p*o*r-a*m*r-p*n*l+t*m*l+a*n*g-t*o*g)*A,e[7]=(a*u*r-c*o*r+c*n*l-t*u*l-a*n*d+t*o*d)*A,e[8]=b*A,e[9]=(p*h*r-c*f*r-p*i*d+t*f*d+c*i*g-t*h*g)*A,e[10]=(a*f*r-p*s*r+p*i*l-t*f*l-a*i*g+t*s*g)*A,e[11]=(c*s*r-a*h*r-c*i*l+t*h*l+a*i*d-t*s*d)*A,e[12]=x*A,e[13]=(c*f*n-p*h*n+p*i*u-t*f*u-c*i*m+t*h*m)*A,e[14]=(p*s*n-a*f*n-p*i*o+t*f*o+a*i*m-t*s*m)*A,e[15]=(a*h*n-c*s*n+c*i*o-t*h*o-a*i*u+t*s*u)*A,this}scale(e){let t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),n=Math.sin(t),r=1-i,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,c*s+i,c*o-n*a,0,l*o-n*s,c*o+n*a,r*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,a){return this.set(1,i,r,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){let n=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,h=s+s,u=r*l,d=r*c,p=r*h,f=a*c,m=a*h,g=s*h,v=o*l,y=o*c,b=o*h,x=i.x,w=i.y,A=i.z;return n[0]=(1-(f+g))*x,n[1]=(d+b)*x,n[2]=(p-y)*x,n[3]=0,n[4]=(d-b)*w,n[5]=(1-(u+g))*w,n[6]=(m+v)*w,n[7]=0,n[8]=(p+y)*A,n[9]=(m-v)*A,n[10]=(1-(u+f))*A,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){let n=this.elements,r=Ty.set(n[0],n[1],n[2]).length(),a=Ty.set(n[4],n[5],n[6]).length(),s=Ty.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Py.copy(this);let o=1/r,l=1/a,c=1/s;return Py.elements[0]*=o,Py.elements[1]*=o,Py.elements[2]*=o,Py.elements[4]*=l,Py.elements[5]*=l,Py.elements[6]*=l,Py.elements[8]*=c,Py.elements[9]*=c,Py.elements[10]*=c,t.setFromRotationMatrix(Py),i.x=r,i.y=a,i.z=s,this}makePerspective(e,t,i,n,r,a){let s=this.elements,o=2*r/(t-e),l=2*r/(i-n),c=(t+e)/(t-e),h=(i+n)/(i-n),u=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,n,r,a){let s=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-r),h=(t+e)*o,u=(i+n)*l,d=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Ty=new Zv,Py=new My,Dy=new Zv(0,0,0),Oy=new Zv(1,1,1),ky=new Zv,Iy=new Zv,Ry=new Zv,Ly=new My,zy=new Kv,By=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:By.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.elements,r=n[0],a=n[4],s=n[8],o=n[1],l=n[5],c=n[9],h=n[2],u=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(pv(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-pv(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(pv(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-pv(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(pv(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-pv(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Ly.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ly,t,i)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return zy.setFromEuler(this),this.setFromQuaternion(zy,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};By.DEFAULT_ORDER="XYZ";var jy=class{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}},Fy=0,Ny=new Zv,Uy=new Kv,Vy=new My,Wy=new Zv,Hy=new Zv,Gy=new Zv,qy=new Kv,Yy=new Zv(1,0,0),Xy=new Zv(0,1,0),Qy=new Zv(0,0,1),Ky={type:"added"},Zy={type:"removed"},Jy=class extends ov{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fy++}),this.uuid=dv(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jy.DEFAULT_UP.clone();let e=new Zv,t=new By,i=new Kv,n=new Zv(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new My},normalMatrix:{value:new Sv}}),this.matrix=new My,this.matrixWorld=new My,this.matrixAutoUpdate=Jy.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Jy.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new jy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Uy.setFromAxisAngle(e,t),this.quaternion.multiply(Uy),this}rotateOnWorldAxis(e,t){return Uy.setFromAxisAngle(e,t),this.quaternion.premultiply(Uy),this}rotateX(e){return this.rotateOnAxis(Yy,e)}rotateY(e){return this.rotateOnAxis(Xy,e)}rotateZ(e){return this.rotateOnAxis(Qy,e)}translateOnAxis(e,t){return Ny.copy(e).applyQuaternion(this.quaternion),this.position.add(Ny.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Yy,e)}translateY(e){return this.translateOnAxis(Xy,e)}translateZ(e){return this.translateOnAxis(Qy,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vy.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Wy.copy(e):Wy.set(e,t,i);let n=this.parent;this.updateWorldMatrix(!0,!1),Hy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vy.lookAt(Hy,Wy,this.up):Vy.lookAt(Wy,Hy,this.up),this.quaternion.setFromRotationMatrix(Vy),n&&(Vy.extractRotation(n.matrixWorld),Uy.setFromRotationMatrix(Vy),this.quaternion.premultiply(Uy.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ky)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Zy)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(Zy)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Vy.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Vy.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vy),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){let n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectsByProperty(e,t);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hy,e,Gy),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hy,qy,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,n=t.length;i<n;i++){let n=t[i];(!0===n.matrixWorldAutoUpdate||!0===e)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let i=this.parent;if(!0===e&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,i=e.length;t<i;t++){let i=e[t];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){let n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){let i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){let t=a(e.geometries),n=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),h=a(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),h.length>0&&(i.nodes=h)}return i.object=n,i;function a(e){let t=[];for(let i in e){let n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++){let t=e.children[i];this.add(t.clone())}return this}};Jy.DEFAULT_UP=new Zv(0,1,0),Jy.DEFAULT_MATRIX_AUTO_UPDATE=!0,Jy.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var $y=new Zv,eb=new Zv,tb=new Zv,ib=new Zv,nb=new Zv,rb=new Zv,ab=new Zv,sb=new Zv,ob=new Zv,lb=new Zv,cb=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zv;this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),$y.subVectors(e,t),n.cross($y);let r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){$y.subVectors(n,t),eb.subVectors(i,t),tb.subVectors(e,t);let a=$y.dot($y),s=$y.dot(eb),o=$y.dot(tb),l=eb.dot(eb),c=eb.dot(tb),h=a*l-s*s;if(0===h)return r.set(-2,-1,-1);let u=1/h,d=(l*o-s*c)*u,p=(a*c-s*o)*u;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,ib),ib.x>=0&&ib.y>=0&&ib.x+ib.y<=1}static getUV(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,ib),o.set(0,0),o.addScaledVector(r,ib.x),o.addScaledVector(a,ib.y),o.addScaledVector(s,ib.z),o}static isFrontFacing(e,t,i,n){return $y.subVectors(i,t),eb.subVectors(e,t),$y.cross(eb).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $y.subVectors(this.c,this.b),eb.subVectors(this.a,this.b),.5*$y.cross(eb).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cb.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cb.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,r){return cb.getUV(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return cb.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cb.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i,n,r=this.a,a=this.b,s=this.c;nb.subVectors(a,r),rb.subVectors(s,r),sb.subVectors(e,r);let o=nb.dot(sb),l=rb.dot(sb);if(o<=0&&l<=0)return t.copy(r);ob.subVectors(e,a);let c=nb.dot(ob),h=rb.dot(ob);if(c>=0&&h<=c)return t.copy(a);let u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return i=o/(o-c),t.copy(r).addScaledVector(nb,i);lb.subVectors(e,s);let d=nb.dot(lb),p=rb.dot(lb);if(p>=0&&d<=p)return t.copy(s);let f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return n=l/(l-p),t.copy(r).addScaledVector(rb,n);let m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return ab.subVectors(s,a),n=(h-c)/(h-c+(d-p)),t.copy(a).addScaledVector(ab,n);let g=1/(m+f+u);return i=f*g,n=u*g,t.copy(r).addScaledVector(nb,i).addScaledVector(rb,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},hb=0,ub=class extends ov{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hb++}),this.uuid=dv(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=ng,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nv,this.stencilZFail=nv,this.stencilZPass=nv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){let t=[];for(let i in e){let n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){let t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(null!==t){let e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},db=class extends ub{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fv(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},pb=new Zv,fb=new Av,mb=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=rv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)fb.fromBufferAttribute(this,t),fb.applyMatrix3(e),this.setXY(t,fb.x,fb.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)pb.fromBufferAttribute(this,t),pb.applyMatrix3(e),this.setXYZ(t,pb.x,pb.y,pb.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)pb.fromBufferAttribute(this,t),pb.applyMatrix4(e),this.setXYZ(t,pb.x,pb.y,pb.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)pb.fromBufferAttribute(this,t),pb.applyNormalMatrix(e),this.setXYZ(t,pb.x,pb.y,pb.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)pb.fromBufferAttribute(this,t),pb.transformDirection(e),this.setXYZ(t,pb.x,pb.y,pb.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=bv(t,this.array)),t}setX(e,t){return this.normalized&&(t=xv(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=bv(t,this.array)),t}setY(e,t){return this.normalized&&(t=xv(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=bv(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xv(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=bv(t,this.array)),t}setW(e,t){return this.normalized&&(t=xv(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array),n=xv(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array),n=xv(n,this.array),r=xv(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==rv&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},gb=class extends mb{constructor(e,t,i){super(new Uint16Array(e),t,i)}},vb=class extends mb{constructor(e,t,i){super(new Uint32Array(e),t,i)}},yb=class extends mb{constructor(e,t,i){super(new Float32Array(e),t,i)}},bb=0,xb=new My,wb=new Jy,Ab=new Zv,Sb=new ey,_b=new ey,Eb=new Zv,Cb=class extends ov{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bb++}),this.uuid=dv(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ev(e)?vb:gb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(void 0!==i){let t=(new Sv).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}let n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return xb.makeRotationFromQuaternion(e),this.applyMatrix4(xb),this}rotateX(e){return xb.makeRotationX(e),this.applyMatrix4(xb),this}rotateY(e){return xb.makeRotationY(e),this.applyMatrix4(xb),this}rotateZ(e){return xb.makeRotationZ(e),this.applyMatrix4(xb),this}translate(e,t,i){return xb.makeTranslation(e,t,i),this.applyMatrix4(xb),this}scale(e,t,i){return xb.makeScale(e,t,i),this.applyMatrix4(xb),this}lookAt(e){return wb.lookAt(e),wb.updateMatrix(),this.applyMatrix4(wb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ab).negate(),this.translate(Ab.x,Ab.y,Ab.z),this}setFromPoints(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new yb(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ey);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Zv(-1/0,-1/0,-1/0),new Zv(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){let e=t[i];Sb.setFromBufferAttribute(e),this.morphTargetsRelative?(Eb.addVectors(this.boundingBox.min,Sb.min),this.boundingBox.expandByPoint(Eb),Eb.addVectors(this.boundingBox.max,Sb.max),this.boundingBox.expandByPoint(Eb)):(this.boundingBox.expandByPoint(Sb.min),this.boundingBox.expandByPoint(Sb.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new yy);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Zv,1/0);if(e){let i=this.boundingSphere.center;if(Sb.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){let i=t[e];_b.setFromBufferAttribute(i),this.morphTargetsRelative?(Eb.addVectors(Sb.min,_b.min),Sb.expandByPoint(Eb),Eb.addVectors(Sb.max,_b.max),Sb.expandByPoint(Eb)):(Sb.expandByPoint(_b.min),Sb.expandByPoint(_b.max))}Sb.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)Eb.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Eb));if(t)for(let r=0,a=t.length;r<a;r++){let a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Eb.fromBufferAttribute(a,t),s&&(Ab.fromBufferAttribute(e,t),Eb.add(Ab)),n=Math.max(n,i.distanceToSquared(Eb))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let i=e.array,n=t.position.array,r=t.normal.array,a=t.uv.array,s=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new mb(new Float32Array(4*s),4));let o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new Zv,c[E]=new Zv;let h=new Zv,u=new Zv,d=new Zv,p=new Av,f=new Av,m=new Av,g=new Zv,v=new Zv;function y(e,t,i){h.fromArray(n,3*e),u.fromArray(n,3*t),d.fromArray(n,3*i),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*i),u.sub(h),d.sub(h),f.sub(p),m.sub(p);let r=1/(f.x*m.y-m.x*f.y);!isFinite(r)||(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[i].add(g),c[e].add(v),c[t].add(v),c[i].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let E=0,C=b.length;E<C;++E){let e=b[E],t=e.start;for(let n=t,r=t+e.count;n<r;n+=3)y(i[n+0],i[n+1],i[n+2])}let x=new Zv,w=new Zv,A=new Zv,S=new Zv;function _(e){A.fromArray(r,3*e),S.copy(A);let t=l[e];x.copy(t),x.sub(A.multiplyScalar(A.dot(t))).normalize(),w.crossVectors(S,t);let i=w.dot(c[e])<0?-1:1;o[4*e]=x.x,o[4*e+1]=x.y,o[4*e+2]=x.z,o[4*e+3]=i}for(let E=0,C=b.length;E<C;++E){let e=b[E],t=e.start;for(let n=t,r=t+e.count;n<r;n+=3)_(i[n+0]),_(i[n+1]),_(i[n+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new mb(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);let n=new Zv,r=new Zv,a=new Zv,s=new Zv,o=new Zv,l=new Zv,c=new Zv,h=new Zv;if(e)for(let u=0,d=e.count;u<d;u+=3){let d=e.getX(u+0),p=e.getX(u+1),f=e.getX(u+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),h.subVectors(n,r),c.cross(h),s.fromBufferAttribute(i,d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),s.add(c),o.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,u=t.count;e<u;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),h.subVectors(n,r),c.cross(h),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Eb.fromBufferAttribute(e,t),Eb.normalize(),e.setXYZ(t,Eb.x,Eb.y,Eb.z)}toNonIndexed(){function e(e,t){let i=e.array,n=e.itemSize,r=e.normalized,a=new i.constructor(t.length*n),s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n;for(let e=0;e<n;e++)a[o++]=i[s++]}return new mb(a,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Cb,i=this.index.array,n=this.attributes;for(let s in n){let r=e(n[s],i);t.setAttribute(s,r)}let r=this.morphAttributes;for(let s in r){let n=[],a=r[s];for(let t=0,r=a.length;t<r;t++){let r=e(a[t],i);n.push(r)}t.morphAttributes[s]=n}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let s=0,o=a.length;s<o;s++){let e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let t=i[o];e.data.attributes[o]=t.toJSON(e.data)}let n={},r=!1;for(let o in this.morphAttributes){let t=this.morphAttributes[o],i=[];for(let n=0,r=t.length;n<r;n++){let r=t[n];i.push(r.toJSON(e.data))}i.length>0&&(n[o]=i,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;null!==i&&this.setIndex(i.clone(t));let n=e.attributes;for(let l in n){let e=n[l];this.setAttribute(l,e.clone(t))}let r=e.morphAttributes;for(let l in r){let e=[],i=r[l];for(let n=0,r=i.length;n<r;n++)e.push(i[n].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,c=a.length;l<c;l++){let e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},Mb=new My,Tb=new Cy,Pb=new yy,Db=new Zv,Ob=new Zv,kb=new Zv,Ib=new Zv,Rb=new Zv,Lb=new Av,zb=new Av,Bb=new Av,jb=new Zv,Fb=new Zv,Nb=class extends Jy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cb,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new db;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){let t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(n,e);let s=this.morphTargetInfluences;if(r&&s){Rb.set(0,0,0);for(let i=0,n=r.length;i<n;i++){let n=s[i],o=r[i];0!==n&&(Ib.fromBufferAttribute(o,e),a?Rb.addScaledVector(Ib,n):Rb.addScaledVector(Ib.sub(t),n))}t.add(Rb)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n||(null===i.boundingSphere&&i.computeBoundingSphere(),Pb.copy(i.boundingSphere),Pb.applyMatrix4(r),!1===e.ray.intersectsSphere(Pb))||(Mb.copy(r).invert(),Tb.copy(e.ray).applyMatrix4(Mb),null!==i.boundingBox&&!1===Tb.intersectsBox(i.boundingBox)))return;let a,s=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv2,h=i.groups,u=i.drawRange;if(null!==s)if(Array.isArray(n))for(let d=0,p=h.length;d<p;d++){let i=h[d],r=n[i.materialIndex];for(let n=Math.max(i.start,u.start),o=Math.min(s.count,Math.min(i.start+i.count,u.start+u.count));n<o;n+=3){let o=s.getX(n),h=s.getX(n+1),u=s.getX(n+2);a=Ub(this,r,e,Tb,l,c,o,h,u),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else{for(let i=Math.max(0,u.start),r=Math.min(s.count,u.start+u.count);i<r;i+=3){let r=s.getX(i),o=s.getX(i+1),h=s.getX(i+2);a=Ub(this,n,e,Tb,l,c,r,o,h),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}else if(void 0!==o)if(Array.isArray(n))for(let d=0,p=h.length;d<p;d++){let i=h[d],r=n[i.materialIndex];for(let n=Math.max(i.start,u.start),s=Math.min(o.count,Math.min(i.start+i.count,u.start+u.count));n<s;n+=3){a=Ub(this,r,e,Tb,l,c,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=i.materialIndex,t.push(a))}}else{for(let i=Math.max(0,u.start),r=Math.min(o.count,u.start+u.count);i<r;i+=3){a=Ub(this,n,e,Tb,l,c,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}}};function Ub(e,t,i,n,r,a,s,o,l){e.getVertexPosition(s,Db),e.getVertexPosition(o,Ob),e.getVertexPosition(l,kb);let c=function(e,t,i,n,r,a,s,o){let l;if(l=1===t.side?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,0===t.side,o),null===l)return null;Fb.copy(o),Fb.applyMatrix4(e.matrixWorld);let c=i.ray.origin.distanceTo(Fb);return c<i.near||c>i.far?null:{distance:c,point:Fb.clone(),object:e}}(e,t,i,n,Db,Ob,kb,jb);if(c){r&&(Lb.fromBufferAttribute(r,s),zb.fromBufferAttribute(r,o),Bb.fromBufferAttribute(r,l),c.uv=cb.getUV(jb,Db,Ob,kb,Lb,zb,Bb,new Av)),a&&(Lb.fromBufferAttribute(a,s),zb.fromBufferAttribute(a,o),Bb.fromBufferAttribute(a,l),c.uv2=cb.getUV(jb,Db,Ob,kb,Lb,zb,Bb,new Av));let e={a:s,b:o,c:l,normal:new Zv,materialIndex:0};cb.getNormal(Db,Ob,kb,e.normal),c.face=e}return c}var Vb=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};let s=this;n=Math.floor(n),r=Math.floor(r),a=Math.floor(a);let o=[],l=[],c=[],h=[],u=0,d=0;function p(e,t,i,n,r,a,p,f,m,g,v){let y=a/m,b=p/g,x=a/2,w=p/2,A=f/2,S=m+1,_=g+1,E=0,C=0,M=new Zv;for(let s=0;s<_;s++){let a=s*b-w;for(let o=0;o<S;o++){let u=o*y-x;M[e]=u*n,M[t]=a*r,M[i]=A,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[i]=f>0?1:-1,c.push(M.x,M.y,M.z),h.push(o/m),h.push(1-s/g),E+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){let t=u+e+S*s,i=u+e+S*(s+1),n=u+(e+1)+S*(s+1),r=u+(e+1)+S*s;o.push(t,i,r),o.push(i,n,r),C+=6}s.addGroup(d,C,v),d+=C,u+=E}p("z","y","x",-1,-1,i,t,e,a,r,0),p("z","y","x",1,-1,i,t,-e,a,r,1),p("x","z","y",1,1,e,i,t,n,a,2),p("x","z","y",1,-1,e,i,-t,n,a,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new yb(l,3)),this.setAttribute("normal",new yb(c,3)),this.setAttribute("uv",new yb(h,2))}static fromJSON(e){return new Vb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Wb(e){let t={};for(let i in e){t[i]={};for(let n in e[i]){let r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function Hb(e){let t={};for(let i=0;i<e.length;i++){let n=Wb(e[i]);for(let e in n)t[e]=n[e]}return t}function Gb(e){return null===e.getRenderTarget()&&e.outputEncoding===$g?tv:iv}var qb={clone:Wb,merge:Hb},Yb=class extends ub{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wb(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let n in this.uniforms){let i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Xb=class extends Jy{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new My,this.projectionMatrix=new My,this.projectionMatrixInverse=new My}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},Qb=class extends Xb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*uv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*hv*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*uv*Math.atan(Math.tan(.5*hv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*hv*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/e,t-=a.offsetY*i/s,n*=a.width/e,i*=a.height/s}let s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Kb=-90,Zb=class extends Jy{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;let n=new Qb(Kb,1,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let r=new Qb(Kb,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let a=new Qb(Kb,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let s=new Qb(Kb,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let o=new Qb(Kb,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new Qb(Kb,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let i=this.renderTarget,[n,r,a,s,o,l]=this.children,c=e.getRenderTarget(),h=e.toneMapping,u=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;let d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}},Jb=class extends Gv{constructor(e,t,i,n,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:vg,i,n,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},$b=class extends Yv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new Jb(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Cg}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Vb(5,5,5),s=new Yb({name:"CubemapFromEquirect",uniforms:Wb(i),vertexShader:n,fragmentShader:r,side:1,blending:0});s.uniforms.tEquirect.value=t;let o=new Nb(a,s),l=t.minFilter;return t.minFilter===Tg&&(t.minFilter=Cg),new Zb(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,n){let r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,n);e.setRenderTarget(r)}},ex=new Zv,tx=new Zv,ix=new Sv,nx=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let n=ex.subVectors(i,t).cross(tx.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(ex),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||ix.getNormalMatrix(e),n=this.coplanarPoint(ex).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},rx=new yy,ax=new Zv,sx=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nx,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nx,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new nx,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new nx,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new nx,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new nx;this.planes=[e,t,i,n,r,a]}set(e,t,i,n,r,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],h=i[7],u=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(s-n,h-o,f-u,y-m).normalize(),t[1].setComponents(s+n,h+o,f+u,y+m).normalize(),t[2].setComponents(s+r,h+l,f+d,y+g).normalize(),t[3].setComponents(s-r,h-l,f-d,y-g).normalize(),t[4].setComponents(s-a,h-c,f-p,y-v).normalize(),t[5].setComponents(s+a,h+c,f+p,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),rx.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(rx)}intersectsSprite(e){return rx.center.set(0,0,0),rx.radius=.7071067811865476,rx.applyMatrix4(e.matrixWorld),this.intersectsSphere(rx)}intersectsSphere(e){let t=this.planes,i=e.center,n=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let n=t[i];if(ax.x=n.normal.x>0?e.max.x:e.min.x,ax.y=n.normal.y>0?e.max.y:e.min.y,ax.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(ax)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function ox(){let e=null,t=!1,i=null,n=null;function r(t,a){i(t,a),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function lx(e,t){let i=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let i=n.get(t);i&&(e.deleteBuffer(i.buffer),n.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){let e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let a=n.get(t);void 0===a?n.set(t,function(t,n){let r,a=t.array,s=t.usage,o=e.createBuffer();if(e.bindBuffer(n,o),e.bufferData(n,a,s),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:o,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(function(t,n,r){let a=n.array,s=n.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(i?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),n.onUploadCallback()}(a.buffer,t,r),a.version=t.version)}}}var cx=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};let r=e/2,a=t/2,s=Math.floor(i),o=Math.floor(n),l=s+1,c=o+1,h=e/s,u=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){let e=g*u-a;for(let t=0;t<l;t++){let i=t*h-r;p.push(i,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){let t=e+l*g,i=e+l*(g+1),n=e+1+l*(g+1),r=e+1+l*g;d.push(t,i,r),d.push(i,n,r)}this.setIndex(d),this.setAttribute("position",new yb(p,3)),this.setAttribute("normal",new yb(f,3)),this.setAttribute("uv",new yb(m,2))}static fromJSON(e){return new cx(e.width,e.height,e.widthSegments,e.heightSegments)}},hx={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ux={common:{diffuse:{value:new Fv(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Sv},uv2Transform:{value:new Sv},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Av(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fv(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fv(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Sv}},sprite:{diffuse:{value:new Fv(16777215)},opacity:{value:1},center:{value:new Av(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Sv}}},dx={basic:{uniforms:Hb([ux.common,ux.specularmap,ux.envmap,ux.aomap,ux.lightmap,ux.fog]),vertexShader:hx.meshbasic_vert,fragmentShader:hx.meshbasic_frag},lambert:{uniforms:Hb([ux.common,ux.specularmap,ux.envmap,ux.aomap,ux.lightmap,ux.emissivemap,ux.bumpmap,ux.normalmap,ux.displacementmap,ux.fog,ux.lights,{emissive:{value:new Fv(0)}}]),vertexShader:hx.meshlambert_vert,fragmentShader:hx.meshlambert_frag},phong:{uniforms:Hb([ux.common,ux.specularmap,ux.envmap,ux.aomap,ux.lightmap,ux.emissivemap,ux.bumpmap,ux.normalmap,ux.displacementmap,ux.fog,ux.lights,{emissive:{value:new Fv(0)},specular:{value:new Fv(1118481)},shininess:{value:30}}]),vertexShader:hx.meshphong_vert,fragmentShader:hx.meshphong_frag},standard:{uniforms:Hb([ux.common,ux.envmap,ux.aomap,ux.lightmap,ux.emissivemap,ux.bumpmap,ux.normalmap,ux.displacementmap,ux.roughnessmap,ux.metalnessmap,ux.fog,ux.lights,{emissive:{value:new Fv(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hx.meshphysical_vert,fragmentShader:hx.meshphysical_frag},toon:{uniforms:Hb([ux.common,ux.aomap,ux.lightmap,ux.emissivemap,ux.bumpmap,ux.normalmap,ux.displacementmap,ux.gradientmap,ux.fog,ux.lights,{emissive:{value:new Fv(0)}}]),vertexShader:hx.meshtoon_vert,fragmentShader:hx.meshtoon_frag},matcap:{uniforms:Hb([ux.common,ux.bumpmap,ux.normalmap,ux.displacementmap,ux.fog,{matcap:{value:null}}]),vertexShader:hx.meshmatcap_vert,fragmentShader:hx.meshmatcap_frag},points:{uniforms:Hb([ux.points,ux.fog]),vertexShader:hx.points_vert,fragmentShader:hx.points_frag},dashed:{uniforms:Hb([ux.common,ux.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hx.linedashed_vert,fragmentShader:hx.linedashed_frag},depth:{uniforms:Hb([ux.common,ux.displacementmap]),vertexShader:hx.depth_vert,fragmentShader:hx.depth_frag},normal:{uniforms:Hb([ux.common,ux.bumpmap,ux.normalmap,ux.displacementmap,{opacity:{value:1}}]),vertexShader:hx.meshnormal_vert,fragmentShader:hx.meshnormal_frag},sprite:{uniforms:Hb([ux.sprite,ux.fog]),vertexShader:hx.sprite_vert,fragmentShader:hx.sprite_frag},background:{uniforms:{uvTransform:{value:new Sv},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hx.background_vert,fragmentShader:hx.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:hx.backgroundCube_vert,fragmentShader:hx.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hx.cube_vert,fragmentShader:hx.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hx.equirect_vert,fragmentShader:hx.equirect_frag},distanceRGBA:{uniforms:Hb([ux.common,ux.displacementmap,{referencePosition:{value:new Zv},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hx.distanceRGBA_vert,fragmentShader:hx.distanceRGBA_frag},shadow:{uniforms:Hb([ux.lights,ux.fog,{color:{value:new Fv(0)},opacity:{value:1}}]),vertexShader:hx.shadow_vert,fragmentShader:hx.shadow_frag}};dx.physical={uniforms:Hb([dx.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Av(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Fv(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Av},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Fv(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Fv(1,1,1)},specularColorMap:{value:null}}]),vertexShader:hx.meshphysical_vert,fragmentShader:hx.meshphysical_frag};var px={r:0,b:0,g:0};function fx(e,t,i,n,r,a,s){let o,l,c=new Fv(0),h=!0===a?0:1,u=null,d=0,p=null;function f(t,i){t.getRGB(px,Gb(e)),n.buffers.color.setClear(px.r,px.g,px.b,i,s)}return{getClearColor:function(){return c},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c.set(e),h=t,f(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(e){h=e,f(c,h)},render:function(n,a){let s=!1,m=!0===a.isScene?a.background:null;m&&m.isTexture&&(m=(a.backgroundBlurriness>0?i:t).get(m));let g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?f(c,h):m&&m.isColor&&(f(m,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===bg)?(void 0===l&&(l=new Nb(new Vb(1,1,1),new Yb({name:"BackgroundCubeMaterial",uniforms:Wb(dx.backgroundCube.uniforms),vertexShader:dx.backgroundCube.vertexShader,fragmentShader:dx.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=m,l.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=m.encoding!==$g,(u!==m||d!==m.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,u=m,d=m.version,p=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):m&&m.isTexture&&(void 0===o&&(o=new Nb(new cx(2,2),new Yb({name:"BackgroundMaterial",uniforms:Wb(dx.background.uniforms),vertexShader:dx.background.vertexShader,fragmentShader:dx.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=m,o.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,o.material.toneMapped=m.encoding!==$g,!0===m.matrixAutoUpdate&&m.updateMatrix(),o.material.uniforms.uvTransform.value.copy(m.matrix),(u!==m||d!==m.version||p!==e.toneMapping)&&(o.material.needsUpdate=!0,u=m,d=m.version,p=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function mx(e,t,i,n){let r=e.getParameter(34921),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),s=n.isWebGL2||null!==a,o={},l=p(null),c=l,h=!1;function u(t){return n.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return n.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){let t=[],i=[],n=[];for(let a=0;a<r;a++)t[a]=0,i[a]=0,n[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function f(){let e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function m(e){g(e,0)}function g(i,r){let a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;a[i]=1,0===s[i]&&(e.enableVertexAttribArray(i),s[i]=1),o[i]!==r&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r)}function v(){let t=c.newAttributes,i=c.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function y(t,i,r,a,s,o){!0!==n.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,i,r,a,s,o):e.vertexAttribIPointer(t,i,r,s,o)}function b(){x(),h=!0,c!==l&&(c=l,u(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,b,x){let w=!1;if(s){let t=function(t,i,r){let s=!0===r.wireframe,l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let h=c[s];return void 0===h&&(h=p(n.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=h),h}(b,d,l);c!==t&&(c=t,u(c.object)),w=function(e,t,i,n){let r=c.attributes,a=t.attributes,s=0,o=i.getAttributes();for(let l in o)if(o[l].location>=0){let t=r[l],i=a[l];if(void 0===i&&("instanceMatrix"===l&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(i=e.instanceColor)),void 0===t||t.attribute!==i||i&&t.data!==i.data)return!0;s++}return c.attributesNum!==s||c.index!==n}(r,b,d,x),w&&function(e,t,i,n){let r={},a=t.attributes,s=0,o=i.getAttributes();for(let l in o)if(o[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));let i={};i.attribute=t,t&&t.data&&(i.data=t.data),r[l]=i,s++}c.attributes=r,c.attributesNum=s,c.index=n}(r,b,d,x)}else{let e=!0===l.wireframe;(c.geometry!==b.id||c.program!==d.id||c.wireframe!==e)&&(c.geometry=b.id,c.program=d.id,c.wireframe=e,w=!0)}null!==x&&i.update(x,34963),(w||h)&&(h=!1,function(r,a,s,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();let l=o.attributes,c=s.getAttributes(),h=a.defaultAttributeValues;for(let t in c){let n=c[t];if(n.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){let t=a.normalized,s=a.itemSize,l=i.get(a);if(void 0===l)continue;let c=l.buffer,h=l.type,u=l.bytesPerElement;if(a.isInterleavedBufferAttribute){let i=a.data,l=i.stride,d=a.offset;if(i.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)g(n.location+e,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)y(n.location+e,s/n.locationSize,h,t,l*u,(d+s/n.locationSize*e)*u)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)g(n.location+e,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)y(n.location+e,s/n.locationSize,h,t,s*u,s/n.locationSize*e*u)}}else if(void 0!==h){let i=h[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(n.location,i);break;case 3:e.vertexAttrib3fv(n.location,i);break;case 4:e.vertexAttrib4fv(n.location,i);break;default:e.vertexAttrib1fv(n.location,i)}}}}v()}(r,l,d,b),null!==x&&e.bindBuffer(34963,i.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(let e in o){let t=o[e];for(let e in t){let i=t[e];for(let e in i)d(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;let t=o[e.id];for(let i in t){let e=t[i];for(let t in e)d(e[t].object),delete e[t];delete t[i]}delete o[e.id]},releaseStatesOfProgram:function(e){for(let t in o){let i=o[t];if(void 0===i[e.id])continue;let n=i[e.id];for(let e in n)d(n[e].object),delete n[e];delete i[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function gx(e,t,i,n){let r,a=n.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,n){e.drawArrays(r,t,n),i.update(n,r,1)},this.renderInstances=function(n,s,o){if(0===o)return;let l,c;if(a)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,n,s,o),i.update(s,r,o)}}function vx(e,t,i){let n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=void 0!==i.precision?i.precision:"highp",o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);let l=a||t.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,h=e.getParameter(34930),u=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=u>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){let i=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function yx(e){let t=this,i=null,n=0,r=!1,a=!1,s=new nx,o=new Sv,l={value:null,needsUpdate:!1};function c(e,i,n,r){let a=null!==e?e.length:0,c=null;if(0!==a){if(c=l.value,!0!==r||null===c){let t=n+4*a,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let i=0,l=n;i!==a;++i,l+=4)s.copy(e[i]).applyMatrix4(r,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let i=0!==e.length||t||0!==n||r;return r=t,n=e.length,i},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(s,o,h){let u=s.clippingPlanes,d=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!r||null===u||0===u.length||a&&!p)a?c(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0);else{let e=a?0:n,t=4*e,r=f.clippingState||null;l.value=r,r=c(u,o,t,h);for(let n=0;n!==t;++n)r[n]=i[n];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function bx(e){let t=new WeakMap;function i(e,t){return 303===t?e.mapping=vg:304===t&&(e.mapping=yg),e}function n(e){let i=e.target;i.removeEventListener("dispose",n);let r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){let a=r.mapping;if(303===a||304===a){if(t.has(r)){return i(t.get(r).texture,r.mapping)}{let a=r.image;if(a&&a.height>0){let s=new $b(a.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",n),i(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}var xx=class extends Xb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,a=i+e,s=n+t,o=n-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},wx=[.125,.215,.35,.446,.526,.582],Ax=20,Sx=new xx,_x=new Fv,Ex=null,Cx=(1+Math.sqrt(5))/2,Mx=1/Cx,Tx=[new Zv(1,1,1),new Zv(-1,1,1),new Zv(1,1,-1),new Zv(-1,1,-1),new Zv(0,Cx,Mx),new Zv(0,Cx,-Mx),new Zv(Mx,0,Cx),new Zv(-Mx,0,Cx),new Zv(Cx,Mx,0),new Zv(-Cx,Mx,0)],Px=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Ex=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ix(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=kx(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ex),e.scissorTest=!1,Ox(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vg||e.mapping===yg?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ex=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Cg,minFilter:Cg,generateMipmaps:!1,type:kg,format:Rg,encoding:Jg,depthBuffer:!1},n=Dx(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Dx(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],i=[],n=[],r=e,a=e-4+1+wx.length;for(let s=0;s<a;s++){let a=Math.pow(2,r);i.push(a);let o=1/a;s>e-4?o=wx[s-e+4-1]:0===s&&(o=0),n.push(o);let l=1/(a-2),c=-l,h=1+l,u=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let e=0;e<d;e++){let t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];v.set(n,f*p*e),y.set(u,m*p*e);let r=[e,e,e,e,e,e];b.set(r,g*p*e)}let x=new Cb;x.setAttribute("position",new mb(v,f)),x.setAttribute("uv",new mb(y,m)),x.setAttribute("faceIndex",new mb(b,g)),t.push(x),r>4&&r--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){let n=new Float32Array(Ax),r=new Zv(0,1,0);return new Yb({name:"SphericalGaussianBlur",defines:{n:Ax,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,e,t)}return n}_compileMaterial(e){let t=new Nb(this._lodPlanes[0],e);this._renderer.compile(t,Sx)}_sceneToCubeUV(e,t,i,n){let r=new Qb(90,1,t,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(_x),o.toneMapping=0,o.autoClear=!1;let h=new db({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new Nb(new Vb,h),d=!1,p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(_x),d=!0);for(let f=0;f<6;f++){let t=f%3;0===t?(r.up.set(0,a[f],0),r.lookAt(s[f],0,0)):1===t?(r.up.set(0,0,a[f]),r.lookAt(0,s[f],0)):(r.up.set(0,a[f],0),r.lookAt(0,0,s[f]));let i=this._cubeSize;Ox(n,t*i,f>2?i:0,i,i),o.setRenderTarget(n),d&&o.render(u,r),o.render(e,r)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let i=this._renderer,n=e.mapping===vg||e.mapping===yg;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ix()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=kx());let r=n?this._cubemapMaterial:this._equirectMaterial,a=new Nb(this._lodPlanes[0],r);r.uniforms.envMap.value=e;let s=this._cubeSize;Ox(t,0,0,3*s,2*s),i.setRenderTarget(t),i.render(a,Sx)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let t=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),i=Tx[(n-1)%Tx.length];this._blur(e,n-1,n,t,i)}t.autoClear=i}_blur(e,t,i,n,r){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",r),this._halfBlur(a,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,a,s){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");let c=new Nb(this._lodPlanes[n],l),h=l.uniforms,u=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):Ax;f>Ax&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(Ax));let m=[],g=0;for(let b=0;b<Ax;++b){let e=b/p,t=Math.exp(-e*e/2);m.push(t),0===b?g+=t:b<f&&(g+=2*t)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;h.envMap.value=e.texture,h.samples.value=f,h.weights.value=m,h.latitudinal.value="latitudinal"===a,s&&(h.poleAxis.value=s);let{_lodMax:v}=this;h.dTheta.value=d,h.mipInt.value=v-i;let y=this._sizeLods[n];Ox(t,3*y*(n>v-4?n-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,Sx)}};function Dx(e,t,i){let n=new Yv(e,t,i);return n.texture.mapping=bg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ox(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function kx(){return new Yb({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ix(){return new Yb({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Rx(e){let t=new WeakMap,i=null;function n(e){let i=e.target;i.removeEventListener("dispose",n);let r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){let a=r.mapping,s=303===a||304===a,o=a===vg||a===yg;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let n=t.get(r);return null===i&&(i=new Px(e)),n=s?i.fromEquirectangular(r,n):i.fromCubemap(r,n),t.set(r,n),n.texture}if(t.has(r))return t.get(r).texture;{let a=r.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0,i=6;for(let n=0;n<i;n++)void 0!==e[n]&&t++;return t===i}(a)){null===i&&(i=new Px(e));let a=s?i.fromEquirectangular(r):i.fromCubemap(r);return t.set(r,a),r.addEventListener("dispose",n),a.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Lx(e){let t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(e){e.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(e){let t=i(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function zx(e,t,i,n){let r={},a=new WeakMap;function s(e){let o=e.target;null!==o.index&&t.remove(o.index);for(let i in o.attributes)t.remove(o.attributes[i]);o.removeEventListener("dispose",s),delete r[o.id];let l=a.get(o);l&&(t.remove(l),a.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){let i=[],n=e.index,r=e.attributes.position,s=0;if(null!==n){let e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){let n=e[t+0],r=e[t+1],a=e[t+2];i.push(n,r,r,a,a,n)}}else{let e=r.array;s=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){let e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}let o=new(Ev(i)?vb:gb)(i,1);o.version=s;let l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,i.memory.geometries++),t},update:function(e){let i=e.attributes;for(let r in i)t.update(i[r],34962);let n=e.morphAttributes;for(let r in n){let e=n[r];for(let i=0,n=e.length;i<n;i++)t.update(e[i],34962)}},getWireframeAttribute:function(e){let t=a.get(e);if(t){let i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return a.get(e)}}}function Bx(e,t,i,n){let r,a,s,o=n.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,n){e.drawElements(r,n,a,t*s),i.update(n,r,1)},this.renderInstances=function(n,l,c){if(0===c)return;let h,u;if(o)h=e,u="drawElementsInstanced";else if(h=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](r,l,a,n*s,c),i.update(l,r,c)}}function jx(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(t.calls++,i){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Fx(e,t){return e[0]-t[0]}function Nx(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ux(e,t,i){let n={},r=new Float32Array(8),a=new WeakMap,s=new qv,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,h,u){let d=l.morphTargetInfluences;if(!0===t.isWebGL2){let n=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,r=void 0!==n?n.length:0,o=a.get(c);if(void 0===o||o.count!==r){let e=function(){v.dispose(),a.delete(c),c.removeEventListener("dispose",e)};void 0!==o&&o.texture.dispose();let i=void 0!==c.morphAttributes.position,n=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,h=c.morphAttributes.position||[],u=c.morphAttributes.normal||[],d=c.morphAttributes.color||[],p=0;!0===i&&(p=1),!0===n&&(p=2),!0===l&&(p=3);let f=c.attributes.position.count*p,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);let g=new Float32Array(f*m*4*r),v=new Xv(g,f,m,r);v.type=Og,v.needsUpdate=!0;let y=4*p;for(let t=0;t<r;t++){let e=h[t],r=u[t],a=d[t],o=f*m*4*t;for(let t=0;t<e.count;t++){let c=t*y;!0===i&&(s.fromBufferAttribute(e,t),g[o+c+0]=s.x,g[o+c+1]=s.y,g[o+c+2]=s.z,g[o+c+3]=0),!0===n&&(s.fromBufferAttribute(r,t),g[o+c+4]=s.x,g[o+c+5]=s.y,g[o+c+6]=s.z,g[o+c+7]=0),!0===l&&(s.fromBufferAttribute(a,t),g[o+c+8]=s.x,g[o+c+9]=s.y,g[o+c+10]=s.z,g[o+c+11]=4===a.itemSize?s.w:1)}}o={count:r,texture:v,size:new Av(f,m)},a.set(c,o),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<d.length;e++)l+=d[e];let h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",o.texture,i),u.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{let t=void 0===d?0:d.length,i=n[c.id];if(void 0===i||i.length!==t){i=[];for(let e=0;e<t;e++)i[e]=[e,0];n[c.id]=i}for(let e=0;e<t;e++){let t=i[e];t[0]=e,t[1]=d[e]}i.sort(Nx);for(let e=0;e<8;e++)e<t&&i[e][1]?(o[e][0]=i[e][0],o[e][1]=i[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(Fx);let a=c.morphAttributes.position,s=c.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=o[e],i=t[0],n=t[1];i!==Number.MAX_SAFE_INTEGER&&n?(a&&c.getAttribute("morphTarget"+e)!==a[i]&&c.setAttribute("morphTarget"+e,a[i]),s&&c.getAttribute("morphNormal"+e)!==s[i]&&c.setAttribute("morphNormal"+e,s[i]),r[e]=n,l+=n):(a&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),s&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),r[e]=0)}let h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Vx(e,t,i,n){let r=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(e){let s=n.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==s&&(t.update(l),r.set(l,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),i.update(e.instanceMatrix,34962),null!==e.instanceColor&&i.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}var Wx=new Gv,Hx=new Xv,Gx=new class extends Gv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Sg,this.minFilter=Sg,this.wrapR=wg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},qx=new Jb,Yx=[],Xx=[],Qx=new Float32Array(16),Kx=new Float32Array(9),Zx=new Float32Array(4);function Jx(e,t,i){let n=e[0];if(null==n||n<=0||n>0)return e;let r=t*i,a=Yx[r];if(void 0===a&&(a=new Float32Array(r),Yx[r]=a),0!==t){n.toArray(a,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r)}return a}function $x(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ew(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function tw(e,t){let i=Xx[t];void 0===i&&(i=new Int32Array(t),Xx[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function iw(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function nw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($x(i,t))return;e.uniform2fv(this.addr,t),ew(i,t)}}function rw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if($x(i,t))return;e.uniform3fv(this.addr,t),ew(i,t)}}function aw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($x(i,t))return;e.uniform4fv(this.addr,t),ew(i,t)}}function sw(e,t){let i=this.cache,n=t.elements;if(void 0===n){if($x(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),ew(i,t)}else{if($x(i,n))return;Zx.set(n),e.uniformMatrix2fv(this.addr,!1,Zx),ew(i,n)}}function ow(e,t){let i=this.cache,n=t.elements;if(void 0===n){if($x(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),ew(i,t)}else{if($x(i,n))return;Kx.set(n),e.uniformMatrix3fv(this.addr,!1,Kx),ew(i,n)}}function lw(e,t){let i=this.cache,n=t.elements;if(void 0===n){if($x(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),ew(i,t)}else{if($x(i,n))return;Qx.set(n),e.uniformMatrix4fv(this.addr,!1,Qx),ew(i,n)}}function cw(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function hw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($x(i,t))return;e.uniform2iv(this.addr,t),ew(i,t)}}function uw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if($x(i,t))return;e.uniform3iv(this.addr,t),ew(i,t)}}function dw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($x(i,t))return;e.uniform4iv(this.addr,t),ew(i,t)}}function pw(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function fw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($x(i,t))return;e.uniform2uiv(this.addr,t),ew(i,t)}}function mw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if($x(i,t))return;e.uniform3uiv(this.addr,t),ew(i,t)}}function gw(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($x(i,t))return;e.uniform4uiv(this.addr,t),ew(i,t)}}function vw(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||Wx,r)}function yw(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||Gx,r)}function bw(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||qx,r)}function xw(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||Hx,r)}function ww(e,t){e.uniform1fv(this.addr,t)}function Aw(e,t){let i=Jx(t,this.size,2);e.uniform2fv(this.addr,i)}function Sw(e,t){let i=Jx(t,this.size,3);e.uniform3fv(this.addr,i)}function _w(e,t){let i=Jx(t,this.size,4);e.uniform4fv(this.addr,i)}function Ew(e,t){let i=Jx(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Cw(e,t){let i=Jx(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Mw(e,t){let i=Jx(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function Tw(e,t){e.uniform1iv(this.addr,t)}function Pw(e,t){e.uniform2iv(this.addr,t)}function Dw(e,t){e.uniform3iv(this.addr,t)}function Ow(e,t){e.uniform4iv(this.addr,t)}function kw(e,t){e.uniform1uiv(this.addr,t)}function Iw(e,t){e.uniform2uiv(this.addr,t)}function Rw(e,t){e.uniform3uiv(this.addr,t)}function Lw(e,t){e.uniform4uiv(this.addr,t)}function zw(e,t,i){let n=this.cache,r=t.length,a=tw(i,r);$x(n,a)||(e.uniform1iv(this.addr,a),ew(n,a));for(let s=0;s!==r;++s)i.setTexture2D(t[s]||Wx,a[s])}function Bw(e,t,i){let n=this.cache,r=t.length,a=tw(i,r);$x(n,a)||(e.uniform1iv(this.addr,a),ew(n,a));for(let s=0;s!==r;++s)i.setTexture3D(t[s]||Gx,a[s])}function jw(e,t,i){let n=this.cache,r=t.length,a=tw(i,r);$x(n,a)||(e.uniform1iv(this.addr,a),ew(n,a));for(let s=0;s!==r;++s)i.setTextureCube(t[s]||qx,a[s])}function Fw(e,t,i){let n=this.cache,r=t.length,a=tw(i,r);$x(n,a)||(e.uniform1iv(this.addr,a),ew(n,a));for(let s=0;s!==r;++s)i.setTexture2DArray(t[s]||Hx,a[s])}var Nw=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return iw;case 35664:return nw;case 35665:return rw;case 35666:return aw;case 35674:return sw;case 35675:return ow;case 35676:return lw;case 5124:case 35670:return cw;case 35667:case 35671:return hw;case 35668:case 35672:return uw;case 35669:case 35673:return dw;case 5125:return pw;case 36294:return fw;case 36295:return mw;case 36296:return gw;case 35678:case 36198:case 36298:case 36306:case 35682:return vw;case 35679:case 36299:case 36307:return yw;case 35680:case 36300:case 36308:case 36293:return bw;case 36289:case 36303:case 36311:case 36292:return xw}}(t.type)}},Uw=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ww;case 35664:return Aw;case 35665:return Sw;case 35666:return _w;case 35674:return Ew;case 35675:return Cw;case 35676:return Mw;case 5124:case 35670:return Tw;case 35667:case 35671:return Pw;case 35668:case 35672:return Dw;case 35669:case 35673:return Ow;case 5125:return kw;case 36294:return Iw;case 36295:return Rw;case 36296:return Lw;case 35678:case 36198:case 36298:case 36306:case 35682:return zw;case 35679:case 36299:case 36307:return Bw;case 35680:case 36300:case 36308:case 36293:return jw;case 36289:case 36303:case 36311:case 36292:return Fw}}(t.type)}},Vw=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){if(void 0===t)return;let n=this.seq;for(let r=0,a=n.length;r!==a;++r){let a=n[r];a.setValue(e,t[a.id],i)}}},Ww=/(\w+)(\])?(\[|\.)?/g;function Hw(e,t){e.seq.push(t),e.map[t.id]=t}function Gw(e,t,i){let n=e.name,r=n.length;for(Ww.lastIndex=0;;){let a=Ww.exec(n),s=Ww.lastIndex,o=a[1],l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){Hw(i,void 0===c?new Nw(o,e,t):new Uw(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new Vw(o),Hw(i,e)),i=e}}}var qw=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){let i=e.getActiveUniform(t,n);Gw(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){let r=this.map[t];void 0!==r&&r.setValue(e,i,n)}setOptional(e,t,i){let n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,a=t.length;r!==a;++r){let a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}}static seqWithValue(e,t){let i=[];for(let n=0,r=e.length;n!==r;++n){let r=e[n];r.id in t&&i.push(r)}return i}};function Yw(e,t,i){let n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}var Xw=0;function Qw(e,t,i){let n=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";let a=/ERROR: 0:(\d+)/.exec(r);if(a){let n=parseInt(a[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){let i=e.split("\n"),n=[],r=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let s=r;s<a;s++){let e=s+1;n.push("".concat(e===t?">":" "," ").concat(e,": ").concat(i[s]))}return n.join("\n")}(e.getShaderSource(t),n)}return r}function Kw(e,t){let i=function(e){switch(e){case Jg:return["Linear","( value )"];case $g:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Zw(e,t){let i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Jw(e){return""!==e}function $w(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function eA(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var tA=/^[ \t]*#include +<([\w\d./]+)>/gm;function iA(e){return e.replace(tA,nA)}function nA(e,t){let i=hx[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return iA(i)}var rA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function aA(e){return e.replace(rA,sA)}function sA(e,t,i,n){let r="";for(let a=parseInt(t);a<parseInt(i);a++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function oA(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function lA(e,t,i,n){let r,a,s=e.getContext(),o=i.defines,l=i.vertexShader,c=i.fragmentShader,h=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(i),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case vg:case yg:t="ENVMAP_TYPE_CUBE";break;case bg:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===yg&&(t="ENVMAP_MODE_REFRACTION");return t}(i),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(i),f=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),m=i.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jw).join("\n")}(i),g=function(e){let t=[];for(let i in e){let n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(o),v=s.createProgram(),y=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(r=[g].filter(Jw).join("\n"),r.length>0&&(r+="\n"),a=[m,g].filter(Jw).join("\n"),a.length>0&&(a+="\n")):(r=[oA(i),"#define SHADER_NAME "+i.shaderName,g,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jw).join("\n"),a=[m,oA(i),"#define SHADER_NAME "+i.shaderName,g,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+d:"",i.envMap?"#define "+p:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?hx.tonemapping_pars_fragment:"",0!==i.toneMapping?Zw("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",hx.encodings_pars_fragment,Kw("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Jw).join("\n")),l=iA(l),l=$w(l,i),l=eA(l,i),c=iA(c),c=$w(c,i),c=eA(c,i),l=aA(l),c=aA(c),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(y="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",i.glslVersion===av?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===av?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let b,x,w=y+a+c,A=Yw(s,35633,y+r+l),S=Yw(s,35632,w);if(s.attachShader(v,A),s.attachShader(v,S),void 0!==i.index0AttributeName?s.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v),e.debug.checkShaderErrors){let e=s.getProgramInfoLog(v).trim(),t=s.getShaderInfoLog(A).trim(),i=s.getShaderInfoLog(S).trim(),n=!0,o=!0;if(!1===s.getProgramParameter(v,35714)){n=!1;let t=Qw(s,A,"vertex"),i=Qw(s,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===t||""===i)&&(o=!1);o&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:r},fragmentShader:{log:i,prefix:a}})}return s.deleteShader(A),s.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new qw(s,v)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){let i={},n=e.getProgramParameter(t,35721);for(let r=0;r<n;r++){let n=e.getActiveAttrib(t,r),a=n.name,s=1;35674===n.type&&(s=2),35675===n.type&&(s=3),35676===n.type&&(s=4),i[a]={type:n.type,location:e.getAttribLocation(t,a),locationSize:s}}return i}(s,v)),x},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=Xw++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=S,this}var cA=0,hA=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return!1===a.has(n)&&(a.add(n),n.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return void 0===i&&(i=new uA(e),t.set(e,i)),i}},uA=class{constructor(e){this.id=cA++,this.code=e,this.usedTimes=0}};function dA(e,t,i,n,r,a,s){let o=new jy,l=new hA,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures,p=r.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,c,m,g){let v=m.fog,y=g.geometry,b=a.isMeshStandardMaterial?m.environment:null,x=(a.isMeshStandardMaterial?i:t).get(a.envMap||b),w=x&&x.mapping===bg?x.image.height:null,A=f[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));let S,_,E,C,M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==M?M.length:0,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),A){let e=dx[A];S=e.vertexShader,_=e.fragmentShader}else S=a.vertexShader,_=a.fragmentShader,l.update(a),E=l.getVertexShaderID(a),C=l.getFragmentShaderID(a);let D=e.getRenderTarget(),O=a.alphaTest>0,k=a.clearcoat>0,I=a.iridescence>0;return{isWebGL2:h,shaderID:A,shaderName:a.type,vertexShader:S,fragmentShader:_,defines:a.defines,customVertexShaderID:E,customFragmentShaderID:C,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:Jg,map:!!a.map,matcap:!!a.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:w,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===$g,clearcoat:k,clearcoatMap:k&&!!a.clearcoatMap,clearcoatRoughnessMap:k&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:k&&!!a.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!a.iridescenceMap,iridescenceThicknessMap:I&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:O,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!v,useFog:!0===a.fog,fogExp2:v&&v.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:T,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){let i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(i,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.map&&o.enable(4),t.matcap&&o.enable(5),t.envMap&&o.enable(6),t.lightMap&&o.enable(7),t.aoMap&&o.enable(8),t.emissiveMap&&o.enable(9),t.bumpMap&&o.enable(10),t.normalMap&&o.enable(11),t.objectSpaceNormalMap&&o.enable(12),t.tangentSpaceNormalMap&&o.enable(13),t.clearcoat&&o.enable(14),t.clearcoatMap&&o.enable(15),t.clearcoatRoughnessMap&&o.enable(16),t.clearcoatNormalMap&&o.enable(17),t.iridescence&&o.enable(18),t.iridescenceMap&&o.enable(19),t.iridescenceThicknessMap&&o.enable(20),t.displacementMap&&o.enable(21),t.specularMap&&o.enable(22),t.roughnessMap&&o.enable(23),t.metalnessMap&&o.enable(24),t.gradientMap&&o.enable(25),t.alphaMap&&o.enable(26),t.alphaTest&&o.enable(27),t.vertexColors&&o.enable(28),t.vertexAlphas&&o.enable(29),t.vertexUvs&&o.enable(30),t.vertexTangents&&o.enable(31),t.uvsVertexOnly&&o.enable(32),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.physicallyCorrectLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.specularIntensityMap&&o.enable(15),t.specularColorMap&&o.enable(16),t.transmission&&o.enable(17),t.transmissionMap&&o.enable(18),t.thicknessMap&&o.enable(19),t.sheen&&o.enable(20),t.sheenColorMap&&o.enable(21),t.sheenRoughnessMap&&o.enable(22),t.decodeVideoTexture&&o.enable(23),t.opaque&&o.enable(24),e.push(o.mask)}(i,t),i.push(e.outputEncoding)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){let t,i=f[e.type];if(i){let e=dx[i];t=qb.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,i){let n;for(let e=0,r=c.length;e<r;e++){let t=c[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new lA(e,i,t,a),c.push(n)),n},releaseProgram:function(e){if(0===--e.usedTimes){let t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function pA(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function fA(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function mA(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function gA(){let e=[],t=0,i=[],n=[],r=[];function a(i,n,r,a,s,o){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:a,renderOrder:i.renderOrder,z:s,group:o},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=a,l.renderOrder=i.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){t=0,i.length=0,n.length=0,r.length=0},push:function(e,t,s,o,l,c){let h=a(e,t,s,o,l,c);s.transmission>0?n.push(h):!0===s.transparent?r.push(h):i.push(h)},unshift:function(e,t,s,o,l,c){let h=a(e,t,s,o,l,c);s.transmission>0?n.unshift(h):!0===s.transparent?r.unshift(h):i.unshift(h)},finish:function(){for(let i=t,n=e.length;i<n;i++){let t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||fA),n.length>1&&n.sort(t||mA),r.length>1&&r.sort(t||mA)}}}function vA(){let e=new WeakMap;return{get:function(t,i){let n,r=e.get(t);return void 0===r?(n=new gA,e.set(t,[n])):i>=r.length?(n=new gA,r.push(n)):n=r[i],n},dispose:function(){e=new WeakMap}}}function yA(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Zv,color:new Fv};break;case"SpotLight":i={position:new Zv,direction:new Zv,color:new Fv,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Zv,color:new Fv,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Zv,skyColor:new Fv,groundColor:new Fv};break;case"RectAreaLight":i={color:new Fv,position:new Zv,halfWidth:new Zv,halfHeight:new Zv}}return e[t.id]=i,i}}}var bA=0;function xA(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function wA(e,t){let i=new yA,n=function(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Av};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Av,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new Zv);let a=new Zv,s=new My,o=new My;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let h=0,u=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,b=0;a.sort(xA);let x=!0!==s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){let t=a[e],s=t.color,w=t.intensity,A=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*w*x,l+=s.g*w*x,c+=s.b*w*x;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){let e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){let e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.directionalShadow[h]=i,r.directionalShadowMap[h]=S,r.directionalShadowMatrix[h]=t.shadow.matrix,m++}r.directional[h]=e,h++}else if(t.isSpotLight){let e=i.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(w*x),e.distance=A,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[d]=e;let a=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,a.updateMatrices(t),t.castShadow&&b++),r.spotLightMatrix[d]=a.matrix,t.castShadow){let e=n.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){let e=i.get(t);e.color.copy(s).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){let e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,r.pointShadow[u]=i,r.pointShadowMap[u]=S,r.pointShadowMatrix[u]=t.shadow.matrix,g++}r.point[u]=e,u++}else if(t.isHemisphereLight){let e=i.get(t);e.skyColor.copy(t.color).multiplyScalar(w*x),e.groundColor.copy(t.groundColor).multiplyScalar(w*x),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=ux.LTC_FLOAT_1,r.rectAreaLTC2=ux.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ux.LTC_HALF_1,r.rectAreaLTC2=ux.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;let w=r.hash;(w.directionalLength!==h||w.pointLength!==u||w.spotLength!==d||w.rectAreaLength!==p||w.hemiLength!==f||w.numDirectionalShadows!==m||w.numPointShadows!==g||w.numSpotShadows!==v||w.numSpotMaps!==y)&&(r.directional.length=h,r.spot.length=d,r.rectArea.length=p,r.point.length=u,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-b,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=b,w.directionalLength=h,w.pointLength=u,w.spotLength=d,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,r.version=bA++)},setupView:function(e,t){let i=0,n=0,l=0,c=0,h=0,u=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){let t=e[d];if(t.isDirectionalLight){let e=r.directional[i];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),i++}else if(t.isSpotLight){let e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),l++}else if(t.isRectAreaLight){let e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),o.identity(),s.copy(t.matrixWorld),s.premultiply(u),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){let e=r.point[n];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),n++}else if(t.isHemisphereLight){let e=r.hemi[h];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),h++}}},state:r}}function AA(e,t){let i=new wA(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function SA(e,t){let i=new WeakMap;return{get:function(n){let r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=i.get(n);return void 0===s?(r=new AA(e,t),i.set(n,[r])):a>=s.length?(r=new AA(e,t),s.push(r)):r=s[a],r},dispose:function(){i=new WeakMap}}}var _A=class extends ub{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ev,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},EA=class extends ub{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Zv,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function CA(e,t,i){let n=new sx,r=new Av,a=new Av,s=new qv,o=new _A({depthPacking:3201}),l=new EA,c={},h=i.maxTextureSize,u={[eg]:1,[tg]:0,[ig]:2},d=new Yb({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Av},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new Cb;f.setAttribute("position",new mb(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Nb(f,d),g=this;function v(i,n){let a=t.update(m);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,p.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new Yv(r.x,r.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,a,d,m,null),p.uniforms.shadow_pass.value=i.mapPass.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,a,p,m,null)}function y(t,i,n,r,a,s){let h=null,d=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)h=d;else if(h=!0===n.isPointLight?l:o,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){let e=h.uuid,t=i.uuid,n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=h.clone(),n[t]=r),h=r}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=3===s?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],h.alphaMap=i.alphaMap,h.alphaTest=i.alphaTest,h.map=i.map,h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.displacementMap=i.displacementMap,h.displacementScale=i.displacementScale,h.displacementBias=i.displacementBias,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,!0===n.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(n.matrixWorld),h.nearDistance=r,h.farDistance=a),h}function b(i,r,a,s,o){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===o)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);let n=t.update(i),r=i.material;if(Array.isArray(r)){let t=n.groups;for(let l=0,c=t.length;l<c;l++){let c=t[l],h=r[c.materialIndex];if(h&&h.visible){let t=y(i,h,s,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,c)}}}else if(r.visible){let t=y(i,r,s,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,null)}}let l=i.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,o){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===t.length)return;let l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){let l=t[p],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);let u=c.getFrameExtents();if(r.multiply(u),a.copy(c.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/u.x),r.x=a.x*u.x,c.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/u.y),r.y=a.y*u.y,c.mapSize.y=a.y)),null===c.map){let e=3!==this.type?{minFilter:Sg,magFilter:Sg}:{};c.map=new Yv(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();let f=c.getViewportCount();for(let e=0;e<f;e++){let t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(s),c.updateMatrices(l,e),n=c.getFrustum(),b(i,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,o),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function MA(e,t,i){let n=i.isWebGL2;let r=new function(){let t=!1,i=new qv,n=null,r=new qv(0,0,0,0);return{setMask:function(i){n!==i&&!t&&(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,a,s,o){!0===o&&(t*=s,n*=s,a*=s),i.set(t,n,a,s),!1===r.equals(i)&&(e.clearColor(t,n,a,s),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(e){e?N(2929):U(2929)},setMask:function(n){i!==n&&!t&&(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},s=new function(){let t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?N(2960):U(2960))},setMask:function(n){i!==n&&!t&&(e.stencilMask(n),i=n)},setFunc:function(t,i,s){(n!==t||r!==i||a!==s)&&(e.stencilFunc(t,i,s),n=t,r=i,a=s)},setOp:function(t,i,n){(s!==t||o!==i||l!==n)&&(e.stencilOp(t,i,n),s=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap,c={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,b=null,x=null,w=null,A=!1,S=null,_=null,E=null,C=null,M=null,T=e.getParameter(35661),P=!1,D=0,O=e.getParameter(7938);-1!==O.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=D>=1):-1!==O.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=D>=2);let k=null,I={},R=e.getParameter(3088),L=e.getParameter(2978),z=(new qv).fromArray(R),B=(new qv).fromArray(L);function j(t,i,n){let r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let s=0;s<n;s++)e.texImage2D(i+s,0,6408,1,1,0,6408,5121,r);return a}let F={};function N(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function U(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}F[3553]=j(3553,3553,1),F[34067]=j(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),N(2929),a.setFunc(3),G(!1),q(1),N(2884),H(0);let V={[ng]:32774,[rg]:32778,[ag]:32779};if(n)V[103]=32775,V[104]=32776;else{let e=t.get("EXT_blend_minmax");null!==e&&(V[103]=e.MIN_EXT,V[104]=e.MAX_EXT)}let W={[sg]:0,[og]:1,[lg]:768,[hg]:770,[gg]:776,[fg]:774,[dg]:772,[cg]:769,[ug]:771,[mg]:775,[pg]:773};function H(t,i,n,r,a,s,o,l){if(0!==t){if(!1===f&&(N(3042),f=!0),5===t)a=a||i,s=s||n,o=o||r,(i!==g||a!==b)&&(e.blendEquationSeparate(V[i],V[a]),g=i,b=a),(n!==v||r!==y||s!==x||o!==w)&&(e.blendFuncSeparate(W[n],W[r],W[s],W[o]),v=n,y=r,x=s,w=o),m=t,A=!1;else if(t!==m||l!==A){if((g!==ng||b!==ng)&&(e.blendEquation(32774),g=ng,b=ng),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,x=null,w=null,m=t,A=l}}else!0===f&&(U(3042),f=!1)}function G(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function q(t){0!==t?(N(2884),t!==_&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):U(2884),_=t}function Y(t,i,n){t?(N(32823),(C!==i||M!==n)&&(e.polygonOffset(i,n),C=i,M=n)):U(32823)}return{buffers:{color:r,depth:a,stencil:s},enable:N,disable:U,bindFramebuffer:function(t,i){return h[t]!==i&&(e.bindFramebuffer(t,i),h[t]=i,n&&(36009===t&&(h[36160]=i),36160===t&&(h[36009]=i)),!0)},drawBuffers:function(n,r){let a=d,s=!1;if(n)if(a=u.get(r),void 0===a&&(a=[],u.set(r,a)),n.isWebGLMultipleRenderTargets){let e=n.texture;if(a.length!==e.length||36064!==a[0]){for(let t=0,i=e.length;t<i;t++)a[t]=36064+t;a.length=e.length,s=!0}}else 36064!==a[0]&&(a[0]=36064,s=!0);else 1029!==a[0]&&(a[0]=1029,s=!0);s&&(i.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:H,setMaterial:function(e,t){2===e.side?U(2884):N(2884);let i=1===e.side;t&&(i=!i),G(i),1===e.blending&&!1===e.transparent?H(0):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);let n=e.stencilWrite;s.setTest(n),n&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):U(32926)},setFlipSided:G,setCullFace:q,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:Y,setScissorTest:function(e){e?N(3089):U(3089)},activeTexture:function(t){void 0===t&&(t=33984+T-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===k?33984+T-1:k);let r=I[n];void 0===r&&(r={type:void 0,texture:void 0},I[n]=r),(r.type!==t||r.texture!==i)&&(k!==n&&(e.activeTexture(n),k=n),e.bindTexture(t,i||F[t]),r.type=t,r.texture=i)},unbindTexture:function(){let t=I[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},updateUBOMapping:function(t,i){let n=l.get(i);void 0===n&&(n=new WeakMap,l.set(i,n));let r=n.get(t);void 0===r&&(r=e.getUniformBlockIndex(i,t.name),n.set(t,r))},uniformBlockBinding:function(t,i){let n=l.get(i).get(t);o.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),o.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(H7){console.error("THREE.WebGLState:",H7)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===n&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},k=null,I={},h={},u=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,b=null,x=null,w=null,A=!1,S=null,_=null,E=null,C=null,M=null,z.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),r.reset(),a.reset(),s.reset()}}}function TA(e,t,i,n,r,a,s){let o,l=r.isWebGL2,c=r.maxTextures,h=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function y(e,t){return v?new OffscreenCanvas(e,t):Tv("canvas")}function b(e,t,i,n){let r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let n=t?yv:Math.floor,a=n(r*e.width),s=n(r*e.height);void 0===o&&(o=y(a,s));let l=i?y(a,s):o;return l.width=a,l.height=s,l.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return gv(e.width)&&gv(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Sg&&e.minFilter!==Cg}function A(t){e.generateMipmap(t)}function S(i,n,r,a){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===l)return n;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let o=n;return 6403===n&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),33319===n&&(5126===r&&(o=33328),5131===r&&(o=33327),5121===r&&(o=33323)),6408===n&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=a===$g&&!1===s?35907:32856),32819===r&&(o=32854),32820===r&&(o=32855)),(33325===o||33326===o||33327===o||33328===o||34842===o||34836===o)&&t.get("EXT_color_buffer_float"),o}function _(e,t,i){return!0===w(e,i)||e.isFramebufferTexture&&e.minFilter!==Sg&&e.minFilter!==Cg?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===Sg||1004===e||e===Eg?9728:9729}function C(e){let t=e.target;t.removeEventListener("dispose",C),function(e){let t=n.get(e);if(void 0===t.__webglInit)return;let i=e.source,r=g.get(i);if(r){let n=r[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&T(e),0===Object.keys(r).length&&g.delete(i)}n.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function M(t){let i=t.target;i.removeEventListener("dispose",M),function(t){let i=t.texture,r=n.get(t),a=n.get(i);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let n=0;n<6;n++)e.deleteFramebuffer(r.__webglFramebuffer[n]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[n]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=i.length;o<l;o++){let t=n.get(i[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),n.remove(i[o])}n.remove(i),n.remove(t)}(i)}function T(t){let i=n.get(t);e.deleteTexture(i.__webglTexture);let r=t.source;delete g.get(r)[i.__cacheKey],s.memory.textures--}let P=0;function D(e,t){let r=n.get(e);if(e.isVideoTexture&&function(e){let t=s.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){let i=e.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void L(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,r.__webglTexture,33984+t)}let O={[xg]:10497,[wg]:33071,[Ag]:33648},k={[Sg]:9728,[_g]:9984,[Eg]:9986,[Cg]:9729,[Mg]:9985,[Tg]:9987};function I(i,a,s){if(s?(e.texParameteri(i,10242,O[a.wrapS]),e.texParameteri(i,10243,O[a.wrapT]),(32879===i||35866===i)&&e.texParameteri(i,32882,O[a.wrapR]),e.texParameteri(i,10240,k[a.magFilter]),e.texParameteri(i,10241,k[a.minFilter])):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),(32879===i||35866===i)&&e.texParameteri(i,32882,33071),(a.wrapS!==wg||a.wrapT!==wg)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,E(a.magFilter)),e.texParameteri(i,10241,E(a.minFilter)),a.minFilter!==Sg&&a.minFilter!==Cg&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Sg||a.minFilter!==Eg&&a.minFilter!==Tg||a.type===Og&&!1===t.has("OES_texture_float_linear")||!1===l&&a.type===kg&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",C));let r=i.source,a=g.get(r);void 0===a&&(a={},g.set(r,a));let o=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(i);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,n=!0),a[o].usedTimes++;let r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&T(i)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return n}function L(t,r,s){let o=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(o=35866),r.isData3DTexture&&(o=32879);let c=R(t,r),h=r.source;i.bindTexture(o,t.__webglTexture,33984+s);let d=n.get(h);if(h.version!==d.__version||!0===c){i.activeTexture(33984+s),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let t=function(e){return!l&&(e.wrapS!==wg||e.wrapT!==wg||e.minFilter!==Sg&&e.minFilter!==Cg)}(r)&&!1===x(r.image),n=b(r.image,t,!1,u);n=U(r,n);let p=x(n)||l,f=a.convert(r.format,r.encoding),m=a.convert(r.type),g=S(r.internalFormat,f,m,r.encoding,r.isVideoTexture);I(o,r,p);let v,y=r.mipmaps,E=l&&!0!==r.isVideoTexture,C=void 0===d.__version||!0===c,M=_(r,n,p);if(r.isDepthTexture)g=6402,l?g=r.type===Og?36012:r.type===Dg?33190:r.type===Ig?35056:33189:r.type===Og&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Lg&&6402===g&&1012!==r.type&&r.type!==Dg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Dg,m=a.convert(r.type)),r.format===zg&&6402===g&&(g=34041,r.type!==Ig&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ig,m=a.convert(r.type))),C&&(E?i.texStorage2D(3553,1,g,n.width,n.height):i.texImage2D(3553,0,g,n.width,n.height,0,f,m,null));else if(r.isDataTexture)if(y.length>0&&p){E&&C&&i.texStorage2D(3553,M,g,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)v=y[e],E?i.texSubImage2D(3553,e,0,0,v.width,v.height,f,m,v.data):i.texImage2D(3553,e,g,v.width,v.height,0,f,m,v.data);r.generateMipmaps=!1}else E?(C&&i.texStorage2D(3553,M,g,n.width,n.height),i.texSubImage2D(3553,0,0,0,n.width,n.height,f,m,n.data)):i.texImage2D(3553,0,g,n.width,n.height,0,f,m,n.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){E&&C&&i.texStorage3D(35866,M,g,y[0].width,y[0].height,n.depth);for(let e=0,t=y.length;e<t;e++)v=y[e],r.format!==Rg?null!==f?E?i.compressedTexSubImage3D(35866,e,0,0,0,v.width,v.height,n.depth,f,v.data,0,0):i.compressedTexImage3D(35866,e,g,v.width,v.height,n.depth,0,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?i.texSubImage3D(35866,e,0,0,0,v.width,v.height,n.depth,f,m,v.data):i.texImage3D(35866,e,g,v.width,v.height,n.depth,0,f,m,v.data)}else{E&&C&&i.texStorage2D(3553,M,g,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)v=y[e],r.format!==Rg?null!==f?E?i.compressedTexSubImage2D(3553,e,0,0,v.width,v.height,f,v.data):i.compressedTexImage2D(3553,e,g,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?i.texSubImage2D(3553,e,0,0,v.width,v.height,f,m,v.data):i.texImage2D(3553,e,g,v.width,v.height,0,f,m,v.data)}else if(r.isDataArrayTexture)E?(C&&i.texStorage3D(35866,M,g,n.width,n.height,n.depth),i.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,f,m,n.data)):i.texImage3D(35866,0,g,n.width,n.height,n.depth,0,f,m,n.data);else if(r.isData3DTexture)E?(C&&i.texStorage3D(32879,M,g,n.width,n.height,n.depth),i.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,f,m,n.data)):i.texImage3D(32879,0,g,n.width,n.height,n.depth,0,f,m,n.data);else if(r.isFramebufferTexture){if(C)if(E)i.texStorage2D(3553,M,g,n.width,n.height);else{let e=n.width,t=n.height;for(let n=0;n<M;n++)i.texImage2D(3553,n,g,e,t,0,f,m,null),e>>=1,t>>=1}}else if(y.length>0&&p){E&&C&&i.texStorage2D(3553,M,g,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)v=y[e],E?i.texSubImage2D(3553,e,0,0,f,m,v):i.texImage2D(3553,e,g,f,m,v);r.generateMipmaps=!1}else E?(C&&i.texStorage2D(3553,M,g,n.width,n.height),i.texSubImage2D(3553,0,0,0,f,m,n)):i.texImage2D(3553,0,g,f,m,n);w(r,p)&&A(o),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function z(t,r,s,o,l){let c=a.convert(s.format,s.encoding),h=a.convert(s.type),u=S(s.internalFormat,c,h,s.encoding);n.get(r).__hasExternalTextures||(32879===l||35866===l?i.texImage3D(l,0,u,r.width,r.height,r.depth,0,c,h,null):i.texImage2D(l,0,u,r.width,r.height,0,c,h,null)),i.bindFramebuffer(36160,t),N(r)?p.framebufferTexture2DMultisampleEXT(36160,o,l,n.get(s).__webglTexture,0,F(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,o,l,n.get(s).__webglTexture,0),i.bindFramebuffer(36160,null)}function B(t,i,n){if(e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n||N(i)){let t=i.depthTexture;t&&t.isDepthTexture&&(t.type===Og?r=36012:t.type===Dg&&(r=33190));let n=F(i);N(i)?p.renderbufferStorageMultisampleEXT(36161,n,r,i.width,i.height):e.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else e.renderbufferStorage(36161,r,i.width,i.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(i.depthBuffer&&i.stencilBuffer){let r=F(i);n&&!1===N(i)?e.renderbufferStorageMultisample(36161,r,35056,i.width,i.height):N(i)?p.renderbufferStorageMultisampleEXT(36161,r,35056,i.width,i.height):e.renderbufferStorage(36161,34041,i.width,i.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{let t=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let r=0;r<t.length;r++){let s=t[r],o=a.convert(s.format,s.encoding),l=a.convert(s.type),c=S(s.internalFormat,o,l,s.encoding),h=F(i);n&&!1===N(i)?e.renderbufferStorageMultisample(36161,h,c,i.width,i.height):N(i)?p.renderbufferStorageMultisampleEXT(36161,h,c,i.width,i.height):e.renderbufferStorage(36161,c,i.width,i.height)}}e.bindRenderbuffer(36161,null)}function j(t){let r=n.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height)&&(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),D(r.depthTexture,0);let a=n.get(r.depthTexture).__webglTexture,s=F(r);if(r.depthTexture.format===Lg)N(r)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==zg)throw new Error("Unknown depthTexture format");N(r)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):e.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=e.createRenderbuffer(),B(r.__webglDepthbuffer[n],t,!1)}else i.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),B(r.__webglDepthbuffer,t,!1);i.bindFramebuffer(36160,null)}function F(e){return Math.min(d,e.samples)}function N(e){let i=n.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function U(e,i){let n=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===sv||n!==Jg&&(n===$g?!1===l?!0===t.has("EXT_sRGB")&&r===Rg?(e.format=sv,e.minFilter=Cg,e.generateMipmaps=!1):i=Uv.sRGBToLinear(i):(r!==Rg||a!==Pg)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),i}this.allocateTextureUnit=function(){let e=P;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=D,this.setTexture2DArray=function(e,t){let r=n.get(e);e.version>0&&r.__version!==e.version?L(r,e,t):i.bindTexture(35866,r.__webglTexture,33984+t)},this.setTexture3D=function(e,t){let r=n.get(e);e.version>0&&r.__version!==e.version?L(r,e,t):i.bindTexture(32879,r.__webglTexture,33984+t)},this.setTextureCube=function(t,r){let s=n.get(t);t.version>0&&s.__version!==t.version?function(t,r,s){if(6!==r.image.length)return;let o=R(t,r),c=r.source;i.bindTexture(34067,t.__webglTexture,33984+s);let u=n.get(c);if(c.version!==u.__version||!0===o){i.activeTexture(33984+s),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let t=r.isCompressedTexture||r.image[0].isCompressedTexture,n=r.image[0]&&r.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||n?n?r.image[e].image:r.image[e]:b(r.image[e],!1,!0,h),d[e]=U(r,d[e]);let p,f=d[0],m=x(f)||l,g=a.convert(r.format,r.encoding),v=a.convert(r.type),y=S(r.internalFormat,g,v,r.encoding),E=l&&!0!==r.isVideoTexture,C=void 0===u.__version||!0===o,M=_(r,f,m);if(I(34067,r,m),t){E&&C&&i.texStorage2D(34067,M,y,f.width,f.height);for(let e=0;e<6;e++){p=d[e].mipmaps;for(let t=0;t<p.length;t++){let n=p[t];r.format!==Rg?null!==g?E?i.compressedTexSubImage2D(34069+e,t,0,0,n.width,n.height,g,n.data):i.compressedTexImage2D(34069+e,t,y,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?i.texSubImage2D(34069+e,t,0,0,n.width,n.height,g,v,n.data):i.texImage2D(34069+e,t,y,n.width,n.height,0,g,v,n.data)}}}else{p=r.mipmaps,E&&C&&(p.length>0&&M++,i.texStorage2D(34067,M,y,d[0].width,d[0].height));for(let e=0;e<6;e++)if(n){E?i.texSubImage2D(34069+e,0,0,0,d[e].width,d[e].height,g,v,d[e].data):i.texImage2D(34069+e,0,y,d[e].width,d[e].height,0,g,v,d[e].data);for(let t=0;t<p.length;t++){let n=p[t].image[e].image;E?i.texSubImage2D(34069+e,t+1,0,0,n.width,n.height,g,v,n.data):i.texImage2D(34069+e,t+1,y,n.width,n.height,0,g,v,n.data)}}else{E?i.texSubImage2D(34069+e,0,0,0,g,v,d[e]):i.texImage2D(34069+e,0,y,g,v,d[e]);for(let t=0;t<p.length;t++){let n=p[t];E?i.texSubImage2D(34069+e,t+1,0,0,g,v,n.image[e]):i.texImage2D(34069+e,t+1,y,g,v,n.image[e])}}}w(r,m)&&A(34067),u.__version=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(s,t,r):i.bindTexture(34067,s.__webglTexture,33984+r)},this.rebindTextures=function(e,t,i){let r=n.get(e);void 0!==t&&z(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==i&&j(e)},this.setupRenderTarget=function(t){let o=t.texture,c=n.get(t),h=n.get(o);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=e.createTexture()),h.__version=o.version,s.memory.textures++);let u=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=x(t)||l;if(u){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers){let i=t.texture;for(let t=0,r=i.length;t<r;t++){let r=n.get(i[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&t.samples>0&&!1===N(t)){let n=d?o:[o];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){let r=n[i];c.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[i]);let s=a.convert(r.format,r.encoding),o=a.convert(r.type),l=S(r.internalFormat,s,o,r.encoding,!0===t.isXRRenderTarget),h=F(t);e.renderbufferStorageMultisample(36161,h,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+i,36161,c.__webglColorRenderbuffer[i])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),B(c.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(36160,null)}}if(u){i.bindTexture(34067,h.__webglTexture),I(34067,o,p);for(let e=0;e<6;e++)z(c.__webglFramebuffer[e],t,o,36064,34069+e);w(o,p)&&A(34067),i.unbindTexture()}else if(d){let e=t.texture;for(let r=0,a=e.length;r<a;r++){let a=e[r],s=n.get(a);i.bindTexture(3553,s.__webglTexture),I(3553,a,p),z(c.__webglFramebuffer,t,a,36064+r,3553),w(a,p)&&A(3553)}i.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(e,h.__webglTexture),I(e,o,p),z(c.__webglFramebuffer,t,o,36064,e),w(o,p)&&A(e),i.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){let t=x(e)||l,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,s=r.length;a<s;a++){let s=r[a];if(w(s,t)){let t=e.isWebGLCubeRenderTarget?34067:3553,r=n.get(s).__webglTexture;i.bindTexture(t,r),A(t),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===N(t)){let r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height,o=16384,l=[],c=t.stencilBuffer?33306:36096,h=n.get(t),u=!0===t.isWebGLMultipleRenderTargets;if(u)for(let t=0;t<r.length;t++)i.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),i.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);i.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,h.__webglFramebuffer);for(let i=0;i<r.length;i++){l.push(36064+i),t.depthBuffer&&l.push(c);let d=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),u&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[i]),!0===d&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),u){let t=n.get(r[i]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,9728),f&&e.invalidateFramebuffer(36008,l)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),u)for(let t=0;t<r.length;t++){i.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,h.__webglColorRenderbuffer[t]);let a=n.get(r[t]).__webglTexture;i.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,a,0)}i.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=z,this.useMultisampledRTT=N}function PA(e,t,i){let n=i.isWebGL2;return{convert:function(i){let r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i===Pg)return 5121;if(1017===i)return 32819;if(1018===i)return 32820;if(1010===i)return 5120;if(1011===i)return 5122;if(1012===i)return 5123;if(1013===i)return 5124;if(i===Dg)return 5125;if(i===Og)return 5126;if(i===kg)return n?5131:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(1021===i)return 6406;if(i===Rg)return 6408;if(1024===i)return 6409;if(1025===i)return 6410;if(i===Lg)return 6402;if(i===zg)return 34041;if(i===sv)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(i===Bg)return 6403;if(1029===i)return 36244;if(i===jg)return 33319;if(1031===i)return 33320;if(1033===i)return 36249;if(i===Fg||i===Ng||i===Ug||i===Vg)if(a===$g){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(i===Fg)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ng)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ug)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Vg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(i===Fg)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ng)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ug)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Vg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(35840===i)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===i||37496===i){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(37492===i)return a===$g?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(37808===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return a===$g?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===Wg){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(i===Wg)return a===$g?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===i||36284===i||36285===i||36286===i){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(i===Wg)return r.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ig?n?34042:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[i]?e[i]:null}}}var DA=class extends Qb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}},OA=class extends Jy{constructor(){super(),this.isGroup=!0,this.type="Group"}},kA={type:"move"},IA=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new OA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new OA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Zv,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Zv),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new OA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Zv,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Zv),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(let a of e.hand.values()){let e=t.getJointPose(a,i),n=this._getHandJoint(l,a);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.jointRadius=e.radius),n.visible=null!==e}let n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=n.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(kA)))}return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let i=new OA;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},RA=class extends Gv{constructor(e,t,i,n,r,a,s,o,l,c){if((c=void 0!==c?c:Lg)!==Lg&&c!==zg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Lg&&(i=Dg),void 0===i&&c===zg&&(i=Ig),super(null,n,r,a,s,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Sg,this.minFilter=void 0!==o?o:Sg,this.flipY=!1,this.generateMipmaps=!1}},LA=class extends ov{constructor(e,t){super();let i=this,n=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,h=null,u=null,d=null,p=null,f=t.getContextAttributes(),m=null,g=null,v=[],y=[],b=new Set,x=new Map,w=new Qb;w.layers.enable(1),w.viewport=new qv;let A=new Qb;A.layers.enable(2),A.viewport=new qv;let S=[w,A],_=new DA;_.layers.enable(1),_.layers.enable(2);let E=null,C=null;function M(e){let t=y.indexOf(e.inputSource);if(-1===t)return;let i=v[t];void 0!==i&&i.dispatchEvent({type:e.type,data:e.inputSource})}function T(){n.removeEventListener("select",M),n.removeEventListener("selectstart",M),n.removeEventListener("selectend",M),n.removeEventListener("squeeze",M),n.removeEventListener("squeezestart",M),n.removeEventListener("squeezeend",M),n.removeEventListener("end",T),n.removeEventListener("inputsourceschange",P);for(let e=0;e<v.length;e++){let t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,C=null,e.setRenderTarget(m),d=null,u=null,h=null,n=null,g=null,R.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){let i=e.removed[t],n=y.indexOf(i);n>=0&&(y[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){let i=e.added[t],n=y.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(i),n=e;break}if(null===y[e]){y[e]=i,n=e;break}}if(-1===n)break}let r=v[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new IA,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new IA,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new IA,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(c){if(n=c,null!==n){if(m=e.getRenderTarget(),n.addEventListener("select",M),n.addEventListener("selectstart",M),n.addEventListener("selectend",M),n.addEventListener("squeeze",M),n.addEventListener("squeezestart",M),n.addEventListener("squeezeend",M),n.addEventListener("end",T),n.addEventListener("inputsourceschange",P),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===n.renderState.layers||!1===e.capabilities.isWebGL2){let i={antialias:void 0!==n.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:d}),g=new Yv(d.framebufferWidth,d.framebufferHeight,{format:Rg,type:Pg,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let i=null,a=null,s=null;f.depth&&(s=f.stencil?35056:33190,i=f.stencil?zg:Lg,a=f.stencil?Ig:Dg);let o={colorFormat:32856,depthFormat:s,scaleFactor:r};h=new XRWebGLBinding(n,t),u=h.createProjectionLayer(o),n.updateRenderState({layers:[u]}),g=new Yv(u.textureWidth,u.textureHeight,{format:Rg,type:Pg,depthTexture:new RA(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await n.requestReferenceSpace(s),R.setContext(n),R.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};let D=new Zv,O=new Zv;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;_.near=A.near=w.near=e.near,_.far=A.far=w.far=e.far,(E!==_.near||C!==_.far)&&(n.updateRenderState({depthNear:_.near,depthFar:_.far}),E=_.near,C=_.far);let t=e.parent,i=_.cameras;k(_,t);for(let n=0;n<i.length;n++)k(i[n],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.matrix.copy(_.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);let r=e.children;for(let n=0,a=r.length;n<a;n++)r[n].updateMatrixWorld(!0);2===i.length?function(e,t,i){D.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(i.matrixWorld);let n=D.distanceTo(O),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(a[8]+1)/a[0],d=s*h,p=s*u,f=n/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let g=s+f,v=o+f,y=d-m,b=p+(n-m),x=l*o/v*g,w=c*o/v*g;e.projectionMatrix.makePerspective(y,b,x,w,g,v)}(_,w,A):_.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){if(null!==u||null!==d)return o},this.setFoveation=function(e){o=e,null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return b};let I=null;let R=new ox;R.setAnimationLoop(function(t,n){if(c=n.getViewerPose(l||a),p=n,null!==c){let t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let i=!1;t.length!==_.cameras.length&&(_.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){let r=t[n],a=null;if(null!==d)a=d.getViewport(r);else{let t=h.getViewSubImage(u,r);a=t.viewport,0===n&&(e.setRenderTargetTextures(g,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=S[n];void 0===s&&(s=new Qb,s.layers.enable(n),s.viewport=new qv,S[n]=s),s.matrix.fromArray(r.transform.matrix),s.projectionMatrix.fromArray(r.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===n&&_.matrix.copy(s.matrix),!0===i&&_.cameras.push(s)}}for(let e=0;e<v.length;e++){let t=y[e],i=v[e];null!==t&&void 0!==i&&i.update(t,n,l||a)}if(I&&I(t,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let e=null;for(let t of b)n.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(let t of e)b.delete(t),x.delete(t),i.dispatchEvent({type:"planeremoved",data:t});for(let t of n.detectedPlanes)if(b.has(t)){let e=x.get(t);t.lastChangedTime>e&&(x.set(t,t.lastChangedTime),i.dispatchEvent({type:"planechanged",data:t}))}else b.add(t),x.set(t,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:t})}p=null}),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}};function zA(e,t){function i(i,n){i.opacity.value=n.opacity,n.color&&i.diffuse.value.copy(n.color),n.emissive&&i.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(i.map.value=n.map),n.alphaMap&&(i.alphaMap.value=n.alphaMap),n.bumpMap&&(i.bumpMap.value=n.bumpMap,i.bumpScale.value=n.bumpScale,1===n.side&&(i.bumpScale.value*=-1)),n.displacementMap&&(i.displacementMap.value=n.displacementMap,i.displacementScale.value=n.displacementScale,i.displacementBias.value=n.displacementBias),n.emissiveMap&&(i.emissiveMap.value=n.emissiveMap),n.normalMap&&(i.normalMap.value=n.normalMap,i.normalScale.value.copy(n.normalScale),1===n.side&&i.normalScale.value.negate()),n.specularMap&&(i.specularMap.value=n.specularMap),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest);let r,a,s=t.get(n).envMap;if(s&&(i.envMap.value=s,i.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,i.reflectivity.value=n.reflectivity,i.ior.value=n.ior,i.refractionRatio.value=n.refractionRatio),n.lightMap){i.lightMap.value=n.lightMap;let t=!0!==e.physicallyCorrectLights?Math.PI:1;i.lightMapIntensity.value=n.lightMapIntensity*t}n.aoMap&&(i.aoMap.value=n.aoMap,i.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.iridescenceMap?r=n.iridescenceMap:n.iridescenceThicknessMap?r=n.iridescenceThicknessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),i.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),i.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,Gb(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,n,r,a,s){n.isMeshBasicMaterial||n.isMeshLambertMaterial?i(e,n):n.isMeshToonMaterial?(i(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,n)):n.isMeshPhongMaterial?(i(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,n)):n.isMeshStandardMaterial?(i(e,n),function(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap),t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}(e,n),n.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,s)):n.isMeshMatcapMaterial?(i(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,n)):n.isMeshDepthMaterial?i(e,n):n.isMeshDistanceMaterial?(i(e,n),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?i(e,n):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,i,n){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*n,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n,r,a):n.isSpriteMaterial?function(e,t){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function BA(e,t,i,n){let r={},a={},s=[],o=i.isWebGL2?e.getParameter(35375):0;function l(e,t,i){let n=e.value;if(void 0===i[t]){if("number"==typeof n)i[t]=n;else{let e=Array.isArray(n)?n:[n],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());i[t]=r}return!0}if("number"==typeof n){if(i[t]!==n)return i[t]=n,!0}else{let e=Array.isArray(i[t])?i[t]:[i[t]],r=Array.isArray(n)?n:[n];for(let t=0;t<e.length;t++){let i=e[t];if(!1===i.equals(r[t]))return i.copy(r[t]),!0}}return!1}function c(e){let t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function h(t){let i=t.target;i.removeEventListener("dispose",h);let n=s.indexOf(i.__bindingPointIndex);s.splice(n,1),e.deleteBuffer(r[i.id]),delete r[i.id],delete a[i.id]}return{bind:function(e,t){let i=t.program;n.uniformBlockBinding(e,i)},update:function(i,u){let d=r[i.id];void 0===d&&(function(e){let t=e.uniforms,i=0,n=16,r=0;for(let a=0,s=t.length;a<s;a++){let e=t[a],s={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,i=o.length;t<i;t++){let e=c(o[t]);s.boundary+=e.boundary,s.storage+=e.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=i,a>0){r=i%n,0!==r&&n-r-s.boundary<0&&(i+=n-r,e.__offset=i)}i+=s.storage}r=i%n,r>0&&(i+=n-r),e.__size=i,e.__cache={}}(i),d=function(t){let i=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;let n=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,n),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,i,n),n}(i),r[i.id]=d,i.addEventListener("dispose",h));let p=u.program;n.updateUBOMapping(i,p);let f=t.render.frame;a[i.id]!==f&&(function(t){let i=r[t.id],n=t.uniforms,a=t.__cache;e.bindBuffer(35345,i);for(let r=0,s=n.length;r<s;r++){let t=n[r];if(!0===l(t,r,a)){let i=t.__offset,n=Array.isArray(t.value)?t.value:[t.value],r=0;for(let a=0;a<n.length;a++){let s=n[a],o=c(s);"number"==typeof s?(t.__data[0]=s,e.bufferSubData(35345,i+r,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,i,t.__data)}}e.bindBuffer(35345,null)}(i),a[i.id]=f)},dispose:function(){for(let t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}}}function jA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;let t,i=void 0!==e.canvas?e.canvas:function(){let e=Tv("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let u=null,d=null,p=[],f=[];this.domElement=i,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jg,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,b=null,x=-1,w=null,A=new qv,S=new qv,_=null,E=i.width,C=i.height,M=1,T=null,P=null,D=new qv(0,0,E,C),O=new qv(0,0,E,C),k=!1,I=new sx,R=!1,L=!1,z=null,B=new My,j=new Av,F=new Zv,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?M:1}let V,W,H,G,q,Y,X,Q,K,Z,J,$,ee,te,ie,ne,re,ae,se,oe,le,ce,he,ue,de=n;function pe(e,t){for(let n=0;n<e.length;n++){let r=e[n],a=i.getContext(r,t);if(null!==a)return a}return null}try{let e={alpha:!0,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(Qm)),i.addEventListener("webglcontextlost",ge,!1),i.addEventListener("webglcontextrestored",ve,!1),i.addEventListener("webglcontextcreationerror",ye,!1),null===de){let t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=pe(t,e),null===de)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D7){throw console.error("THREE.WebGLRenderer: "+D7.message),D7}function fe(){V=new Lx(de),W=new vx(de,V,e),V.init(W),ce=new PA(de,V,W),H=new MA(de,V,W),G=new jx,q=new pA,Y=new TA(de,V,H,q,W,ce,G),X=new bx(m),Q=new Rx(m),K=new lx(de,W),he=new mx(de,V,K,W),Z=new zx(de,K,G,he),J=new Vx(de,Z,K,G),se=new Ux(de,W,Y),ne=new yx(q),$=new dA(m,X,Q,V,W,he,ne),ee=new zA(m,q),te=new vA,ie=new SA(V,W),ae=new fx(m,X,Q,H,J,t,o),re=new CA(m,J,W),ue=new BA(de,G,W,H),oe=new gx(de,V,G,W),le=new Bx(de,V,G,W),G.programs=$.programs,m.capabilities=W,m.extensions=V,m.properties=q,m.renderLists=te,m.shadowMap=re,m.state=H,m.info=G}fe();let me=new LA(m,de);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let e=G.autoReset,t=re.enabled,i=re.autoUpdate,n=re.needsUpdate,r=re.type;fe(),G.autoReset=e,re.enabled=t,re.autoUpdate=i,re.needsUpdate=n,re.type=r}function ye(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function be(e){let t=e.target;t.removeEventListener("dispose",be),function(e){(function(e){let t=q.get(e).programs;void 0!==t&&(t.forEach(function(e){$.releaseProgram(e)}),e.isShaderMaterial&&$.releaseShaderCache(e))})(e),q.remove(e)}(t)}this.xr=me,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){let e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(E,C,!1))},this.getSize=function(e){return e.set(E,C)},this.setSize=function(e,t,n){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,C=t,i.width=Math.floor(e*M),i.height=Math.floor(t*M),!1!==n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(E*M,C*M).floor()},this.setDrawingBufferSize=function(e,t,n){E=e,C=t,M=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,i,n){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,i,n),H.viewport(A.copy(D).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,i,n){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,i,n),H.scissor(S.copy(O).multiplyScalar(M).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(e){H.setScissorTest(k=e)},this.setOpaqueSort=function(e){T=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(){let e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),de.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",ge,!1),i.removeEventListener("webglcontextrestored",ve,!1),i.removeEventListener("webglcontextcreationerror",ye,!1),te.dispose(),ie.dispose(),q.dispose(),X.dispose(),Q.dispose(),J.dispose(),he.dispose(),ue.dispose(),$.dispose(),me.dispose(),me.removeEventListener("sessionstart",we),me.removeEventListener("sessionend",Ae),z&&(z.dispose(),z=null),Se.stop()},this.renderBufferDirect=function(e,t,i,n,r,a){null===t&&(t=N);let s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,i,n,r){!0!==t.isScene&&(t=N),Y.resetTextureUnits();let a=t.fog,s=n.isMeshStandardMaterial?t.environment:null,o=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:Jg,l=(n.isMeshStandardMaterial?Q:X).get(n.envMap||s),c=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,h=!!n.normalMap&&!!i.attributes.tangent,u=!!i.morphAttributes.position,p=!!i.morphAttributes.normal,f=!!i.morphAttributes.color,g=n.toneMapped?m.toneMapping:0,v=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,y=void 0!==v?v.length:0,A=q.get(n),S=d.state.lights;if(!0===R&&(!0===L||e!==w)){let t=e===w&&n.id===x;ne.setState(n,e,t)}let _=!1;n.version===A.__version?(A.needsLights&&A.lightsStateVersion!==S.state.version||A.outputEncoding!==o||r.isInstancedMesh&&!1===A.instancing||!r.isInstancedMesh&&!0===A.instancing||r.isSkinnedMesh&&!1===A.skinning||!r.isSkinnedMesh&&!0===A.skinning||A.envMap!==l||!0===n.fog&&A.fog!==a||void 0!==A.numClippingPlanes&&(A.numClippingPlanes!==ne.numPlanes||A.numIntersection!==ne.numIntersection)||A.vertexAlphas!==c||A.vertexTangents!==h||A.morphTargets!==u||A.morphNormals!==p||A.morphColors!==f||A.toneMapping!==g||!0===W.isWebGL2&&A.morphTargetsCount!==y)&&(_=!0):(_=!0,A.__version=n.version);let E=A.currentProgram;!0===_&&(E=Te(n,t,r));let T=!1,P=!1,D=!1,O=E.getUniforms(),k=A.uniforms;if(H.useProgram(E.program)&&(T=!0,P=!0,D=!0),n.id!==x&&(x=n.id,P=!0),T||w!==e){if(O.setValue(de,"projectionMatrix",e.projectionMatrix),W.logarithmicDepthBuffer&&O.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,P=!0,D=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){let t=O.map.cameraPosition;void 0!==t&&t.setValue(de,F.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&O.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&O.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){O.setOptional(de,r,"bindMatrix"),O.setOptional(de,r,"bindMatrixInverse");let e=r.skeleton;e&&(W.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),O.setValue(de,"boneTexture",e.boneTexture,Y),O.setValue(de,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let I=i.morphAttributes;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===W.isWebGL2)&&se.update(r,i,n,E),(P||A.receiveShadow!==r.receiveShadow)&&(A.receiveShadow=r.receiveShadow,O.setValue(de,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),P&&(O.setValue(de,"toneMappingExposure",m.toneMappingExposure),A.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(k,D),a&&!0===n.fog&&ee.refreshFogUniforms(k,a),ee.refreshMaterialUniforms(k,n,M,C,z),qw.upload(de,A.uniformsList,k,Y)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(qw.upload(de,A.uniformsList,k,Y),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&O.setValue(de,"center",r.center),O.setValue(de,"modelViewMatrix",r.modelViewMatrix),O.setValue(de,"normalMatrix",r.normalMatrix),O.setValue(de,"modelMatrix",r.matrixWorld),r.previousModelViewMatrix&&O.setValue(de,"previousModelViewMatrix",r.previousModelViewMatrix),e.previousProjectionMatrix&&O.setValue(de,"previousProjectionMatrix",e.previousProjectionMatrix),n.isShaderMaterial||n.isRawShaderMaterial){let e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++)if(W.isWebGL2){let i=e[t];ue.update(i,E),ue.bind(i,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,i,n,r);H.setMaterial(n,s);let l=i.index,c=1;!0===n.wireframe&&(l=Z.getWireframeAttribute(i),c=2);let h=i.drawRange,u=i.attributes.position,p=h.start*c,f=(h.start+h.count)*c;null!==a&&(p=Math.max(p,a.start*c),f=Math.min(f,(a.start+a.count)*c)),null!==l?(p=Math.max(p,0),f=Math.min(f,l.count)):null!=u&&(p=Math.max(p,0),f=Math.min(f,u.count));let g=f-p;if(g<0||g===1/0)return;he.setup(r,n,o,i,l);let v,y=oe;if(null!==l&&(v=K.get(l),y=le,y.setIndex(v)),r.isMesh)!0===n.wireframe?(H.setLineWidth(n.wireframeLinewidth*U()),y.setMode(1)):y.setMode(4);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),H.setLineWidth(e*U()),r.isLineSegments?y.setMode(1):r.isLineLoop?y.setMode(2):y.setMode(3)}else r.isPoints?y.setMode(0):r.isSprite&&y.setMode(4);if(r.isInstancedMesh)y.renderInstances(p,g,r.count);else if(i.isInstancedBufferGeometry){let e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);y.renderInstances(p,g,t)}else y.render(p,g)},this.compile=function(e,t){function i(e,t,i){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Te(e,t,i),e.side=0,e.needsUpdate=!0,Te(e,t,i),e.side=2):Te(e,t,i)}d=ie.get(e),d.init(),f.push(d),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))}),d.setupLights(m.physicallyCorrectLights),e.traverse(function(t){let n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){i(n[r],e,t)}else i(n,e,t)}),f.pop(),d=null};let xe=null;function we(){Se.stop()}function Ae(){Se.start()}let Se=new ox;function _e(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){n&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);let t=J.update(e),r=e.material;r.visible&&u.push(e,t,r,i,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||I.intersectsObject(e))){n&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);let t=J.update(e),r=e.material;if(Array.isArray(r)){let n=t.groups;for(let a=0,s=n.length;a<s;a++){let s=n[a],o=r[s.materialIndex];o&&o.visible&&u.push(e,t,o,i,F.z,s)}}else r.visible&&u.push(e,t,r,i,F.z,null)}let r=e.children;for(let a=0,s=r.length;a<s;a++)_e(r[a],t,i,n)}function Ee(e,t,i,n){let r=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(i),!0===R&&ne.setGlobalState(m.clippingPlanes,i),a.length>0&&function(e,t,i){let n=W.isWebGL2;null===z&&(z=new Yv(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?kg:Pg,minFilter:Tg,samples:n&&!0===s?4:0})),m.getDrawingBufferSize(j),n?z.setSize(j.x,j.y):z.setSize(yv(j.x),yv(j.y));let r=m.getRenderTarget();m.setRenderTarget(z),m.clear();let a=m.toneMapping;m.toneMapping=0,Ce(e,t,i),m.toneMapping=a,Y.updateMultisampleRenderTarget(z),Y.updateRenderTargetMipmap(z),m.setRenderTarget(r)}(r,t,i),n&&H.viewport(A.copy(n)),r.length>0&&Ce(r,t,i),a.length>0&&Ce(a,t,i),o.length>0&&Ce(o,t,i),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Ce(e,t,i){let n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){let a=e[r],s=a.object,o=a.geometry,l=null===n?a.material:n,c=a.group;s.layers.test(i.layers)&&Me(s,t,i,o,l,c)}}function Me(e,t,i,n,r,a){e.onBeforeRender(m,t,i,n,r,a),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(m,t,i,n,e,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,m.renderBufferDirect(i,t,n,r,e,a),r.side=0,r.needsUpdate=!0,m.renderBufferDirect(i,t,n,r,e,a),r.side=2):m.renderBufferDirect(i,t,n,r,e,a),e.onAfterRender(m,t,i,n,r,a)}function Te(e,t,i){!0!==t.isScene&&(t=N);let n=q.get(e),r=d.state.lights,a=d.state.shadowsArray,s=r.state.version,o=$.getParameters(e,r.state,a,t,i),l=$.getProgramCacheKey(o),c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?Q:X).get(e.envMap||n.environment),void 0===c&&(e.addEventListener("dispose",be),c=new Map,n.programs=c);let h=c.get(l);if(void 0!==h){if(n.currentProgram===h&&n.lightsStateVersion===s)return Pe(e,o),h}else o.uniforms=$.getUniforms(e),e.onBuild(i,o,m),e.onBeforeCompile(o,m),h=$.acquireProgram(o,l),c.set(l,h),n.uniforms=o.uniforms;let u=n.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(u.clippingPlanes=ne.uniform),Pe(e,o),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=s,n.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);let p=h.getUniforms(),f=qw.seqWithValue(p.seq,u);return n.currentProgram=h,n.uniformsList=f,h}function Pe(e,t){let i=q.get(e);i.outputEncoding=t.outputEncoding,i.instancing=t.instancing,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}Se.setAnimationLoop(function(e){xe&&xe(e)}),typeof self<"u"&&Se.setContext(self),this.setAnimationLoop=function(e){xe=e,me.setAnimationLoop(e),null===e?Se.stop():Se.start()},me.addEventListener("sessionstart",we),me.addEventListener("sessionend",Ae),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),d=ie.get(e,f.length),d.init(),f.push(d),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(B),L=this.localClippingEnabled,R=ne.init(this.clippingPlanes,L),u=te.get(e,p.length),u.init(),p.push(u),_e(e,t,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(T,P),!0===R&&ne.beginShadows();let i=d.state.shadowsArray;if(re.render(i,e,t),!0===R&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(u,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){let i=t.cameras;for(let t=0,n=i.length;t<n;t++){let n=i[t];Ee(u,e,n,n.viewport)}}else Ee(u,e,t);null!==b&&(Y.updateMultisampleRenderTarget(b),Y.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),he.resetDefaultState(),x=-1,w=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),u=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,i){q.get(e.texture).__webglTexture=t,q.get(e.depthTexture).__webglTexture=i;let n=q.get(e);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let i=q.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,v=t,y=i;let n=!0,r=null,a=!1,s=!1;if(e){let i=q.get(e);void 0!==i.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),n=!1):void 0===i.__webglFramebuffer?Y.setupRenderTarget(e):i.__hasExternalTextures&&Y.rebindTextures(e,q.get(e.texture).__webglTexture,q.get(e.depthTexture).__webglTexture);let o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);let l=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=l[t],a=!0):r=W.isWebGL2&&e.samples>0&&!1===Y.useMultisampledRTT(e)?q.get(e).__webglMultisampledFramebuffer:l,A.copy(e.viewport),S.copy(e.scissor),_=e.scissorTest}else A.copy(D).multiplyScalar(M).floor(),S.copy(O).multiplyScalar(M).floor(),_=k;if(H.bindFramebuffer(36160,r)&&W.drawBuffers&&n&&H.drawBuffers(e,r),H.viewport(A),H.scissor(S),H.setScissorTest(_),a){let n=q.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,i)}else if(s){let n=q.get(e.texture),r=t||0;de.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}x=-1},this.readRenderTargetPixels=function(e,t,i,n,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){H.bindFramebuffer(36160,o);try{let s=e.texture,o=s.format,l=s.type;if(o!==Rg&&ce.convert(o)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let c=l===kg&&(V.has("EXT_color_buffer_half_float")||W.isWebGL2&&V.has("EXT_color_buffer_float"));if(l!==Pg&&ce.convert(l)!==de.getParameter(35738)&&(l!==Og||!(W.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&de.readPixels(t,i,n,r,ce.convert(o),ce.convert(l),a)}finally{let e=null!==b?q.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,i,n,r,a,s){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){let s=e.texture,l=s.format,c=s.type;if(t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r){H.bindFramebuffer(de.FRAMEBUFFER,o);let e=de.createBuffer();de.bindBuffer(de.PIXEL_PACK_BUFFER,e),de.bufferData(de.PIXEL_PACK_BUFFER,a.byteLength,de.STREAM_READ),de.readPixels(t,i,n,r,ce.convert(l),ce.convert(c),0);let s=null!==b?q.get(b).__webglFramebuffer:null;H.bindFramebuffer(de.FRAMEBUFFER,s);let h=de.fenceSync(de.SYNC_GPU_COMMANDS_COMPLETE,0);return de.flush(),await function(e,t,i){return new Promise(function(n,r){setTimeout(function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(a,i);break;default:n()}},i)})}(de,h,4),de.bindBuffer(de.PIXEL_PACK_BUFFER,e),de.getBufferSubData(de.PIXEL_PACK_BUFFER,0,a),de.deleteBuffer(e),de.deleteSync(h),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.pow(2,-i),r=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n);Y.setTexture2D(t,0),de.copyTexSubImage2D(3553,i,0,0,e.x,e.y,r,a),H.unbindTexture()},this.copyTextureToTexture=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,s=ce.convert(i.format),o=ce.convert(i.type);Y.setTexture2D(i,0),de.pixelStorei(37440,i.flipY),de.pixelStorei(37441,i.premultiplyAlpha),de.pixelStorei(3317,i.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,n,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):de.texSubImage2D(3553,n,e.x,e.y,s,o,t.image),0===n&&i.generateMipmaps&&de.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let a,s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,c=ce.convert(n.format),h=ce.convert(n.type);if(n.isData3DTexture)Y.setTexture3D(n,0),a=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(n,0),a=35866}de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment);let u=de.getParameter(3314),d=de.getParameter(32878),p=de.getParameter(3316),f=de.getParameter(3315),g=de.getParameter(32877),v=i.isCompressedTexture?i.mipmaps[0]:i.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),i.isDataTexture||i.isData3DTexture?de.texSubImage3D(a,r,t.x,t.y,t.z,s,o,l,c,h,v.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(a,r,t.x,t.y,t.z,s,o,l,c,v.data)):de.texSubImage3D(a,r,t.x,t.y,t.z,s,o,l,c,h,v),de.pixelStorei(3314,u),de.pixelStorei(32878,d),de.pixelStorei(3316,p),de.pixelStorei(3315,f),de.pixelStorei(32877,g),0===r&&n.generateMipmaps&&de.generateMipmap(a),H.unbindTexture()},this.initRenderTarget=function(e){void 0===q.get(e).__webglFramebuffer&&Y.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?Y.setTextureCube(e,0):e.isData3DTexture?Y.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Y.setTexture2DArray(e,0):Y.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,H.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends jA{}).prototype.isWebGL1Renderer=!0;var FA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Fv(e),this.near=t,this.far=i}clone(){return new FA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},NA=class extends Jy{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},UA=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=rv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=dv()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dv()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dv()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},VA=new Zv,WA=class{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)VA.fromBufferAttribute(this,t),VA.applyMatrix4(e),this.setXYZ(t,VA.x,VA.y,VA.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)VA.fromBufferAttribute(this,t),VA.applyNormalMatrix(e),this.setXYZ(t,VA.x,VA.y,VA.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)VA.fromBufferAttribute(this,t),VA.transformDirection(e),this.setXYZ(t,VA.x,VA.y,VA.z);return this}setX(e,t){return this.normalized&&(t=xv(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xv(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xv(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xv(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=bv(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=bv(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=bv(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=bv(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array),n=xv(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=xv(t,this.array),i=xv(i,this.array),n=xv(n,this.array),r=xv(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new mb(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new WA(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},HA=class extends Jy{constructor(){super(),this.isBone=!0,this.type="Bone"}},GA=class extends Gv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Sg,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Sg,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},qA=new My,YA=new My,XA=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=dv(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new My)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new My;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let r=0,a=e.length;r<a;r++){let n=e[r]?e[r].matrixWorld:YA;qA.multiplyMatrices(n,t[r]),qA.toArray(i,16*r)}null!==n&&(n.needsUpdate=!0)}clone(){return new XA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=vv(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new GA(t,e,e,Rg,Og);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){let n=e.bones[i],r=t[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new HA),this.bones.push(r),this.boneInverses.push((new My).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){let r=t[n];e.bones.push(r.uuid);let a=i[n];e.boneInverses.push(a.toArray())}return e}},QA=class extends mb{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},KA=new My,ZA=new My,JA=[],$A=new My,eS=new Nb,tS=class extends Nb{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new QA(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let n=0;n<i;n++)this.setMatrixAt(n,$A)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){let i=this.matrixWorld,n=this.count;if(eS.geometry=this.geometry,eS.material=this.material,void 0!==eS.material)for(let r=0;r<n;r++){this.getMatrixAt(r,KA),ZA.multiplyMatrices(i,KA),eS.matrixWorld=ZA,eS.raycast(e,JA);for(let e=0,i=JA.length;e<i;e++){let i=JA[e];i.instanceId=r,i.object=this,t.push(i)}JA.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new QA(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},iS=class extends ub{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fv(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},nS=new Zv,rS=new Zv,aS=new My,sS=new Cy,oS=new yy,lS=class extends Jy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cb,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iS;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)nS.fromBufferAttribute(t,e-1),rS.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=nS.distanceTo(rS);e.setAttribute("lineDistance",new yb(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),oS.copy(i.boundingSphere),oS.applyMatrix4(n),oS.radius+=r,!1===e.ray.intersectsSphere(oS))return;aS.copy(n).invert(),sS.copy(e.ray).applyMatrix4(aS);let s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new Zv,c=new Zv,h=new Zv,u=new Zv,d=this.isLineSegments?2:1,p=i.index,f=i.attributes.position;if(null!==p){for(let i=Math.max(0,a.start),n=Math.min(p.count,a.start+a.count)-1;i<n;i+=d){let n=p.getX(i),r=p.getX(i+1);if(l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,r),sS.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);let a=e.ray.origin.distanceTo(u);a<e.near||a>e.far||t.push({distance:a,point:h.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,a.start),n=Math.min(f.count,a.start+a.count)-1;i<n;i+=d){if(l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,i+1),sS.distanceSqToSegment(l,c,u,h)>o)continue;u.applyMatrix4(this.matrixWorld);let n=e.ray.origin.distanceTo(u);n<e.near||n>e.far||t.push({distance:n,point:h.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){let t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}},cS=new Zv,hS=new Zv,uS=class extends lS{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)cS.fromBufferAttribute(t,e),hS.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+cS.distanceTo(hS);e.setAttribute("lineDistance",new yb(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},dS=class extends Gv{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:Cg,this.magFilter=void 0!==r?r:Cg,this.generateMipmaps=!1;let c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},pS=class extends Gv{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},fS=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t,i=[],n=this.getPoint(0),r=0;i.push(0);for(let a=1;a<=e;a++)t=this.getPoint(a/e),r+=t.distanceTo(n),i.push(r),n=t;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i,n=this.getLengths(),r=0,a=n.length;i=t||e*n[a-1];let s,o=0,l=a-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-i,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===i)return r/(a-1);let c=n[r];return(r+(i-c)/(n[r+1]-c))/(a-1)}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);let r=this.getPoint(i),a=this.getPoint(n),s=t||(r.isVector2?new Av:new Zv);return s.copy(a).sub(r).normalize(),s}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new Zv,n=[],r=[],a=[],s=new Zv,o=new My;for(let d=0;d<=e;d++){let t=d/e;n[d]=this.getTangentAt(t,new Zv)}r[0]=new Zv,a[0]=new Zv;let l=Number.MAX_VALUE,c=Math.abs(n[0].x),h=Math.abs(n[0].y),u=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),u<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),a[0].crossVectors(n[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),a[d]=a[d-1].clone(),s.crossVectors(n[d-1],n[d]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(pv(n[d-1].dot(n[d]),-1,1));r[d].applyMatrix4(o.makeRotationAxis(s,e))}a[d].crossVectors(n[d],r[d])}if(!0===t){let t=Math.acos(pv(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),a[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},mS=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let i=t||new Av,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0===this.aClockwise&&!a&&(r===n?r=-n:r-=n);let s=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*e-n*t+this.aX,l=i*t+n*e+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};function gS(){let e=0,t=0,i=0,n=0;function r(r,a,s,o){e=r,t=s,i=-3*r+3*a-2*s-o,n=2*r-2*a+s+o}return{initCatmullRom:function(e,t,i,n,a){r(t,i,a*(i-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,a,s,o){let l=(t-e)/a-(i-e)/(a+s)+(i-t)/s,c=(i-t)/s-(n-t)/(s+o)+(n-i)/o;l*=s,c*=s,r(t,i,l,c)},calc:function(r){let a=r*r;return e+t*r+i*a+n*(a*r)}}}var vS=new Zv,yS=new gS,bS=new gS,xS=new gS;function wS(e,t,i,n,r){let a=.5*(n-t),s=.5*(r-i),o=e*e;return(2*i-2*n+a+s)*(e*o)+(-3*i+3*n-2*a-s)*o+a*e+i}function AS(e,t,i,n){return function(e,t){let i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function SS(e,t,i,n,r){return function(e,t){let i=1-e;return i*i*i*t}(e,t)+function(e,t){let i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}var _S=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Av,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Av;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(SS(e,i.x,n.x,r.x,a.x),SS(e,i.y,n.y,r.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},ES=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zv,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Zv;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(SS(e,i.x,n.x,r.x,a.x),SS(e,i.y,n.y,r.y,a.y),SS(e,i.z,n.z,r.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},CS=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new Av;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},MS=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},TS=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Av;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=this.v0,n=this.v1,r=this.v2;return t.set(AS(e,i.x,n.x,r.x),AS(e,i.y,n.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},PS=class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=this.points,n=(i.length-1)*e,r=Math.floor(n),a=n-r,s=i[0===r?r:r-1],o=i[r],l=i[r>i.length-2?i.length-1:r+1],c=i[r>i.length-3?i.length-1:r+2];return t.set(wS(a,s.x,o.x,l.x,c.x),wS(a,s.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push((new Av).fromArray(i))}return this}},DS=Object.freeze({__proto__:null,ArcCurve:class extends mS{constructor(e,t,i,n,r,a){super(e,t,i,i,n,r,a),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e,o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:0===l&&o===a-1&&(o=a-2,l=1),this.closed||o>0?t=r[(o-1)%a]:(vS.subVectors(r[0],r[1]).add(r[0]),t=vS);let c=r[o%a],h=r[(o+1)%a];if(this.closed||o+2<a?i=r[(o+2)%a]:(vS.subVectors(r[a-1],r[a-2]).add(r[a-1]),i=vS),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,n=Math.pow(t.distanceToSquared(c),e),r=Math.pow(c.distanceToSquared(h),e),a=Math.pow(h.distanceToSquared(i),e);r<1e-4&&(r=1),n<1e-4&&(n=r),a<1e-4&&(a=r),yS.initNonuniformCatmullRom(t.x,c.x,h.x,i.x,n,r,a),bS.initNonuniformCatmullRom(t.y,c.y,h.y,i.y,n,r,a),xS.initNonuniformCatmullRom(t.z,c.z,h.z,i.z,n,r,a)}else"catmullrom"===this.curveType&&(yS.initCatmullRom(t.x,c.x,h.x,i.x,this.tension),bS.initCatmullRom(t.y,c.y,h.y,i.y,this.tension),xS.initCatmullRom(t.z,c.z,h.z,i.z,this.tension));return n.set(yS.calc(l),bS.calc(l),xS.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push((new Zv).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:_S,CubicBezierCurve3:ES,EllipseCurve:mS,LineCurve:CS,LineCurve3:MS,QuadraticBezierCurve:TS,QuadraticBezierCurve3:class extends fS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zv;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv,i=this.v0,n=this.v1,r=this.v2;return t.set(AS(e,i.x,n.x,r.x),AS(e,i.y,n.y,r.y),AS(e,i.z,n.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:PS}),OS=class extends fS{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new CS(t,e))}getPoint(e,t){let i=e*this.getLength(),n=this.getCurveLengths(),r=0;for(;r<n.length;){if(n[r]>=i){let e=n[r]-i,a=this.curves[r],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}r++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,i=[];for(let n=0,r=this.curves;n<r.length;n++){let a=r[n],s=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,o=a.getPoints(s);for(let t=0;t<o.length;t++){let n=o[t];e&&e.equals(n)||(i.push(n),e=n)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let i=e.curves[t];this.curves.push((new DS[i.type]).fromJSON(i))}return this}},kS=class extends OS{constructor(e){super(),this.type="Path",this.currentPoint=new Av,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new CS(this.currentPoint.clone(),new Av(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){let r=new TS(this.currentPoint.clone(),new Av(e,t),new Av(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,r,a){let s=new _S(this.currentPoint.clone(),new Av(e,t),new Av(i,n),new Av(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new PS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,r,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,n,r,a),this}absarc(e,t,i,n,r,a){return this.absellipse(e,t,i,i,n,r,a),this}ellipse(e,t,i,n,r,a,s,o){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,r,a,s,o),this}absellipse(e,t,i,n,r,a,s,o){let l=new mS(e,t,i,n,r,a,s,o);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},IS=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Av(0,-.5),new Av(.5,0),new Av(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=pv(n,0,2*Math.PI);let r=[],a=[],s=[],o=[],l=[],c=1/t,h=new Zv,u=new Av,d=new Zv,p=new Zv,f=new Zv,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){let r=i+v*c*n,d=Math.sin(r),p=Math.cos(r);for(let i=0;i<=e.length-1;i++){h.x=e[i].x*d,h.y=e[i].y,h.z=e[i].x*p,a.push(h.x,h.y,h.z),u.x=v/t,u.y=i/(e.length-1),s.push(u.x,u.y);let n=o[3*i+0]*d,r=o[3*i+1],c=o[3*i+0]*p;l.push(n,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){let i=t+v*e.length,n=i,a=i+e.length,s=i+e.length+1,o=i+1;r.push(n,a,o),r.push(s,o,a)}this.setIndex(r),this.setAttribute("position",new yb(a,3)),this.setAttribute("uv",new yb(s,2)),this.setAttribute("normal",new yb(l,3))}static fromJSON(e){return new IS(e.points,e.segments,e.phiStart,e.phiLength)}},RS=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};let l=this;n=Math.floor(n),r=Math.floor(r);let c=[],h=[],u=[],d=[],p=0,f=[],m=i/2,g=0;function v(i){let r=p,a=new Av,f=new Zv,v=0,y=!0===i?e:t,b=!0===i?1:-1;for(let e=1;e<=n;e++)h.push(0,m*b,0),u.push(0,b,0),d.push(.5,.5),p++;let x=p;for(let e=0;e<=n;e++){let t=e/n*o+s,i=Math.cos(t),r=Math.sin(t);f.x=y*r,f.y=m*b,f.z=y*i,h.push(f.x,f.y,f.z),u.push(0,b,0),a.x=.5*i+.5,a.y=.5*r*b+.5,d.push(a.x,a.y),p++}for(let e=0;e<n;e++){let t=r+e,n=x+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),v+=3}l.addGroup(g,v,!0===i?1:2),g+=v}(function(){let a=new Zv,v=new Zv,y=0,b=(t-e)/i;for(let l=0;l<=r;l++){let c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=n;e++){let t=e/n,r=t*o+s,l=Math.sin(r),f=Math.cos(r);v.x=y*l,v.y=-g*i+m,v.z=y*f,h.push(v.x,v.y,v.z),a.set(l,b,f).normalize(),u.push(a.x,a.y,a.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<n;e++)for(let t=0;t<r;t++){let i=f[t][e],n=f[t+1][e],r=f[t+1][e+1],a=f[t][e+1];c.push(i,n,a),c.push(n,r,a),y+=6}l.addGroup(g,y,0),g+=y})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new yb(h,3)),this.setAttribute("normal",new yb(u,3)),this.setAttribute("uv",new yb(d,2))}static fromJSON(e){return new RS(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},LS=class extends RS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(e){return new LS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},zS=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};let r=[],a=[];function s(e,t,i,n){let r=n+1,a=[];for(let s=0;s<=r;s++){a[s]=[];let n=e.clone().lerp(i,s/r),o=t.clone().lerp(i,s/r),l=r-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===r?n:n.clone().lerp(o,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){let t=Math.floor(e/2);e%2===0?(o(a[s][t+1]),o(a[s+1][t]),o(a[s][t])):(o(a[s][t+1]),o(a[s+1][t+1]),o(a[s+1][t]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,i){let n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=n/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}function u(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){let i=new Zv,n=new Zv,r=new Zv;for(let a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],n),l(t[a+2],r),s(i,n,r,e)})(n),function(e){let t=new Zv;for(let i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){let e=new Zv;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];let i=h(e)/2/Math.PI+.5,n=u(e)/Math.PI+.5;a.push(i,1-n)}(function(){let e=new Zv,t=new Zv,i=new Zv,n=new Zv,s=new Av,o=new Av,l=new Av;for(let u=0,d=0;u<r.length;u+=9,d+=6){e.set(r[u+0],r[u+1],r[u+2]),t.set(r[u+3],r[u+4],r[u+5]),i.set(r[u+6],r[u+7],r[u+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),n.copy(e).add(t).add(i).divideScalar(3);let p=h(n);c(s,d+0,e,p),c(o,d+2,t,p),c(l,d+4,i,p)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],i=a[e+2],n=a[e+4],r=Math.max(t,i,n),s=Math.min(t,i,n);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new yb(r,3)),this.setAttribute("normal",new yb(r.slice(),3)),this.setAttribute("uv",new yb(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new zS(e.vertices,e.indices,e.radius,e.details)}},BS=class extends zS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BS(e.radius,e.detail)}},jS=class extends kS{constructor(e){super(e),this.uuid=dv(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let i=e.holes[t];this.holes.push((new kS).fromJSON(i))}return this}},FS=function(e,t){let i,n,r,a,s,o,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,h=t&&t.length,u=h?t[0]*c:e.length,d=NS(e,0,u,c,!0),p=[];if(!d||d.next===d.prev)return p;if(h&&(d=function(e,t,i,n){let r,a,s,o,l,c=[];for(r=0,a=t.length;r<a;r++)s=t[r]*n,o=r<a-1?t[r+1]*n:e.length,l=NS(e,s,o,n,!1),l===l.next&&(l.steiner=!0),c.push(ZS(l));for(c.sort(YS),r=0;r<c.length;r++)i=XS(c[r],i);return i}(e,t,d,c)),e.length>80*c){i=r=e[0],n=a=e[1];for(let t=c;t<u;t+=c)s=e[t],o=e[t+1],s<i&&(i=s),o<n&&(n=o),s>r&&(r=s),o>a&&(a=o);l=Math.max(r-i,a-n),l=0!==l?32767/l:0}return VS(d,p,c,i,n,l,0),p};function NS(e,t,i,n,r){let a,s;if(r===function(e,t,i,n){let r=0;for(let a=t,s=i-n;a<i;a+=n)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,i,n)>0)for(a=t;a<i;a+=n)s=o_(a,e[a],e[a+1],s);else for(a=i-n;a>=t;a-=n)s=o_(a,e[a],e[a+1],s);return s&&t_(s,s.next)&&(l_(s),s=s.next),s}function US(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!t_(n,n.next)&&0!==e_(n.prev,n,n.next))n=n.next;else{if(l_(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function VS(e,t,i,n,r,a,s){if(!e)return;!s&&a&&function(e,t,i,n){let r=e;do{0===r.z&&(r.z=KS(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,i,n,r,a,s,o,l,c=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,n=i,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=n}a.nextZ=null,c*=2}while(s>1)}(r)}(e,n,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?HS(e,n,r,a):WS(e))t.push(o.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),l_(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?VS(e=GS(US(e),t,i),t,i,n,r,a,2):2===s&&qS(e,t,i,n,r,a):VS(US(e),t,i,n,r,a,1);break}}function WS(e){let t=e.prev,i=e,n=e.next;if(e_(t,i,n)>=0)return!1;let r=t.x,a=i.x,s=n.x,o=t.y,l=i.y,c=n.y,h=r<a?r<s?r:s:a<s?a:s,u=o<l?o<c?o:c:l<c?l:c,d=r>a?r>s?r:s:a>s?a:s,p=o>l?o>c?o:c:l>c?l:c,f=n.next;for(;f!==t;){if(f.x>=h&&f.x<=d&&f.y>=u&&f.y<=p&&JS(r,o,a,l,s,c,f.x,f.y)&&e_(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function HS(e,t,i,n){let r=e.prev,a=e,s=e.next;if(e_(r,a,s)>=0)return!1;let o=r.x,l=a.x,c=s.x,h=r.y,u=a.y,d=s.y,p=o<l?o<c?o:c:l<c?l:c,f=h<u?h<d?h:d:u<d?u:d,m=o>l?o>c?o:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,v=KS(p,f,t,i,n),y=KS(m,g,t,i,n),b=e.prevZ,x=e.nextZ;for(;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&JS(o,h,l,u,c,d,b.x,b.y)&&e_(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==s&&JS(o,h,l,u,c,d,x.x,x.y)&&e_(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&JS(o,h,l,u,c,d,b.x,b.y)&&e_(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==s&&JS(o,h,l,u,c,d,x.x,x.y)&&e_(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function GS(e,t,i){let n=e;do{let r=n.prev,a=n.next.next;!t_(r,a)&&i_(r,n,n.next,a)&&a_(r,a)&&a_(a,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(a.i/i|0),l_(n),l_(n.next),n=e=a),n=n.next}while(n!==e);return US(n)}function qS(e,t,i,n,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&$S(s,e)){let o=s_(s,e);return s=US(s,s.next),o=US(o,o.next),VS(s,t,i,n,r,a,0),void VS(o,t,i,n,r,a,0)}e=e.next}s=s.next}while(s!==e)}function YS(e,t){return e.x-t.x}function XS(e,t){let i=function(e,t){let i,n=t,r=-1/0,a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let o,l=i,c=i.x,h=i.y,u=1/0;n=i;do{a>=n.x&&n.x>=c&&a!==n.x&&JS(s<h?a:r,s,c,h,s<h?r:a,s,n.x,n.y)&&(o=Math.abs(s-n.y)/(a-n.x),a_(n,e)&&(o<u||o===u&&(n.x>i.x||n.x===i.x&&QS(i,n)))&&(i=n,u=o)),n=n.next}while(n!==l);return i}(e,t);if(!i)return t;let n=s_(i,e);return US(n,n.next),US(i,i.next)}function QS(e,t){return e_(e.prev,e,t.prev)<0&&e_(t.next,e,e.next)<0}function KS(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ZS(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function JS(e,t,i,n,r,a,s,o){return(r-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(n-o)>=(i-s)*(t-o)&&(i-s)*(a-o)>=(r-s)*(n-o)}function $S(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&i_(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(a_(e,t)&&a_(t,e)&&function(e,t){let i=e,n=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(e_(e.prev,e,t.prev)||e_(e,t.prev,t))||t_(e,t)&&e_(e.prev,e,e.next)>0&&e_(t.prev,t,t.next)>0)}function e_(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function t_(e,t){return e.x===t.x&&e.y===t.y}function i_(e,t,i,n){let r=r_(e_(e,t,i)),a=r_(e_(e,t,n)),s=r_(e_(i,n,e)),o=r_(e_(i,n,t));return!!(r!==a&&s!==o||0===r&&n_(e,i,t)||0===a&&n_(e,n,t)||0===s&&n_(i,e,n)||0===o&&n_(i,t,n))}function n_(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function r_(e){return e>0?1:e<0?-1:0}function a_(e,t){return e_(e.prev,e,e.next)<0?e_(e,t,e.next)>=0&&e_(e,e.prev,t)>=0:e_(e,t,e.prev)<0||e_(e,e.next,t)<0}function s_(e,t){let i=new c_(e.i,e.x,e.y),n=new c_(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function o_(e,t,i,n){let r=new c_(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function l_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function c_(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var h_=class{static area(e){let t=e.length,i=0;for(let n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i}static isClockWise(e){return h_.area(e)<0}static triangulateShape(e,t){let i=[],n=[],r=[];u_(e),d_(i,e);let a=e.length;t.forEach(u_);for(let o=0;o<t.length;o++)n.push(a),a+=t[o].length,d_(i,t[o]);let s=FS(i,n);for(let o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function u_(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function d_(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var p_=class extends zS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p_(e.radius,e.detail)}},f_=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(a+s,Math.PI),l=0,c=[],h=new Zv,u=new Zv,d=[],p=[],f=[],m=[];for(let g=0;g<=i;g++){let d=[],v=g/i,y=0;0==g&&0==a?y=.5/t:g==i&&o==Math.PI&&(y=-.5/t);for(let i=0;i<=t;i++){let o=i/t;h.x=-e*Math.cos(n+o*r)*Math.sin(a+v*s),h.y=e*Math.cos(a+v*s),h.z=e*Math.sin(n+o*r)*Math.sin(a+v*s),p.push(h.x,h.y,h.z),u.copy(h).normalize(),f.push(u.x,u.y,u.z),m.push(o+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<i;g++)for(let e=0;e<t;e++){let t=c[g][e+1],n=c[g][e],r=c[g+1][e],s=c[g+1][e+1];(0!==g||a>0)&&d.push(t,n,s),(g!==i-1||o<Math.PI)&&d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new yb(p,3)),this.setAttribute("normal",new yb(f,3)),this.setAttribute("uv",new yb(m,2))}static fromJSON(e){return new f_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},m_=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},i=Math.floor(i),n=Math.floor(n);let a=[],s=[],o=[],l=[],c=new Zv,h=new Zv,u=new Zv;for(let d=0;d<=i;d++)for(let a=0;a<=n;a++){let p=a/n*r,f=d/i*Math.PI*2;h.x=(e+t*Math.cos(f))*Math.cos(p),h.y=(e+t*Math.cos(f))*Math.sin(p),h.z=t*Math.sin(f),s.push(h.x,h.y,h.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),u.subVectors(h,c).normalize(),o.push(u.x,u.y,u.z),l.push(a/n),l.push(d/i)}for(let d=1;d<=i;d++)for(let e=1;e<=n;e++){let t=(n+1)*d+e-1,i=(n+1)*(d-1)+e-1,r=(n+1)*(d-1)+e,s=(n+1)*d+e;a.push(t,i,s),a.push(i,r,s)}this.setIndex(a),this.setAttribute("position",new yb(s,3)),this.setAttribute("normal",new yb(o,3)),this.setAttribute("uv",new yb(l,2))}static fromJSON(e){return new m_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},g_=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},i=Math.floor(i),n=Math.floor(n);let s=[],o=[],l=[],c=[],h=new Zv,u=new Zv,d=new Zv,p=new Zv,f=new Zv,m=new Zv,g=new Zv;for(let y=0;y<=i;++y){let s=y/i*r*Math.PI*2;v(s,r,a,e,d),v(s+.01,r,a,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=n;++e){let r=e/n*Math.PI*2,a=-t*Math.cos(r),s=t*Math.sin(r);h.x=d.x+(a*g.x+s*f.x),h.y=d.y+(a*g.y+s*f.y),h.z=d.z+(a*g.z+s*f.z),o.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(y/i),c.push(e/n)}}for(let y=1;y<=i;y++)for(let e=1;e<=n;e++){let t=(n+1)*(y-1)+(e-1),i=(n+1)*y+(e-1),r=(n+1)*y+e,a=(n+1)*(y-1)+e;s.push(t,i,a),s.push(i,r,a)}function v(e,t,i,n,r){let a=Math.cos(e),s=Math.sin(e),o=i/t*e,l=Math.cos(o);r.x=n*(2+l)*.5*a,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new yb(o,3)),this.setAttribute("normal",new yb(l,3)),this.setAttribute("uv",new yb(c,2))}static fromJSON(e){return new g_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},v_=class extends Yb{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};function y_(e,t,i){return x_(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)}function b_(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function x_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function w_(e){let t=e.length,i=new Array(t);for(let n=0;n!==t;++n)i[n]=n;return i.sort(function(t,i){return e[t]-e[i]}),i}function A_(e,t,i){let n=e.length,r=new e.constructor(n);for(let a=0,s=0;s!==n;++a){let n=i[a]*t;for(let i=0;i!==t;++i)r[s++]=e[n+i]}return r}function S_(e,t,i,n){let r=1,a=e[0];for(;void 0!==a&&void 0===a[n];)a=e[r++];if(void 0===a)return;let s=a[n];if(void 0!==s)if(Array.isArray(s))do{s=a[n],void 0!==s&&(t.push(a.time),i.push.apply(i,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[n],void 0!==s&&(t.push(a.time),s.toArray(i,i.length)),a=e[r++]}while(void 0!==a);else do{s=a[n],void 0!==s&&(t.push(a.time),i.push(s)),a=e[r++]}while(void 0!==a)}var __=class{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let a;i:{n:if(!(e<n)){for(let a=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=n,n=t[++i],e<n)break t}a=t.length;break i}if(!(e>=r)){let s=t[1];e<s&&(i=2,r=s);for(let a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===a)break;if(n=r,r=t[--i-1],e>=r)break t}a=i,i=0;break i}break e}for(;i<a;){let n=i+a>>>1;e<t[n]?a=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let a=0;a!==n;++a)t[a]=i[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},E_=class extends __{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xg,endingEnd:Xg}}intervalChanged_(e,t,i){let n=this.parameterPositions,r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case Qg:r=e,s=2*t-i;break;case Kg:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case Qg:a=e,o=2*i-t;break;case Kg:a=1,o=i+n[1]-n[0];break;default:a=e-1,o=t}let l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,i,n){let r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==s;++x)r[x]=g*a[c+x]+v*a[l+x]+y*a[o+x]+b*a[h+x];return r}},C_=class extends __{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){let r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(i-t)/(n-t),h=1-c;for(let u=0;u!==s;++u)r[u]=a[l+u]*h+a[o+u]*c;return r}},M_=class extends __{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}},T_=class{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=b_(t,this.TimeBufferType),this.values=b_(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t,i=e.constructor;if(i.toJSON!==this.toJSON)t=i.toJSON(e);else{t={name:e.name,times:b_(e.times,Array),values:b_(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new M_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new C_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new E_(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Gg:t=this.InterpolantFactoryMethodDiscrete;break;case qg:t=this.InterpolantFactoryMethodLinear;break;case Yg:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gg;case this.InterpolantFactoryMethodLinear:return qg;case this.InterpolantFactoryMethodSmooth:return Yg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){let i=this.times,n=i.length,r=0,a=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);let e=this.getValueSize();this.times=y_(i,r,a),this.values=y_(this.values,r*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==r;s++){let t=i[s];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==n&&x_(n))for(let s=0,o=n.length;s!==o;++s){let t=n[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){let e=y_(this.times),t=y_(this.values),i=this.getValueSize(),n=this.getInterpolation()===Yg,r=e.length-1,a=1;for(let s=1;s<r;++s){let r=!1,o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(n)r=!0;else{let e=s*i,n=e-i,a=e+i;for(let s=0;s!==i;++s){let i=t[e+s];if(i!==t[n+s]||i!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];let n=s*i,r=a*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*i,n=a*i,s=0;s!==i;++s)t[n+s]=t[e+s];++a}return a!==e.length?(this.times=y_(e,0,a),this.values=y_(t,0,a*i)):(this.times=e,this.values=t),this}clone(){let e=y_(this.times,0),t=y_(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};T_.prototype.TimeBufferType=Float32Array,T_.prototype.ValueBufferType=Float32Array,T_.prototype.DefaultInterpolation=qg;var P_=class extends T_{};P_.prototype.ValueTypeName="bool",P_.prototype.ValueBufferType=Array,P_.prototype.DefaultInterpolation=Gg,P_.prototype.InterpolantFactoryMethodLinear=void 0,P_.prototype.InterpolantFactoryMethodSmooth=void 0;var D_=class extends T_{};D_.prototype.ValueTypeName="color";var O_=class extends T_{};O_.prototype.ValueTypeName="number";var k_=class extends __{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){let r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(n-t),l=e*s;for(let c=l+s;l!==c;l+=4)Kv.slerpFlat(r,0,a,l-s,a,l,o);return r}},I_=class extends T_{InterpolantFactoryMethodLinear(e){return new k_(this.times,this.values,this.getValueSize(),e)}};I_.prototype.ValueTypeName="quaternion",I_.prototype.DefaultInterpolation=qg,I_.prototype.InterpolantFactoryMethodSmooth=void 0;var R_=class extends T_{};R_.prototype.ValueTypeName="string",R_.prototype.ValueBufferType=Array,R_.prototype.DefaultInterpolation=Gg,R_.prototype.InterpolantFactoryMethodLinear=void 0,R_.prototype.InterpolantFactoryMethodSmooth=void 0;var L_=class extends T_{};L_.prototype.ValueTypeName="vector";var z_=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zg;this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=dv(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,n=1/(e.fps||1);for(let a=0,s=i.length;a!==s;++a)t.push(B_(i[a]).scale(n));let r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){let t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=i.length;r!==a;++r)t.push(T_.toJSON(i[r]));return n}static CreateFromMorphTargetSequence(e,t,i,n){let r=t.length,a=[];for(let s=0;s<r;s++){let e=[],o=[];e.push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0);let l=w_(e);e=A_(e,1,l),o=A_(o,1,l),!n&&0===e[0]&&(e.push(r),o.push(o[0])),a.push(new O_(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let n={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){let t=e[s],i=t.name.match(r);if(i&&i.length>1){let e=i[1],r=n[e];r||(n[e]=r=[]),r.push(t)}}let a=[];for(let s in n)a.push(this.CreateFromMorphTargetSequence(s,n[s],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(e,t,i,n,r){if(0!==i.length){let a=[],s=[];S_(i,a,s,n),0!==a.length&&r.push(new e(t,a,s))}},n=[],r=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){let t,i={};for(t=0;t<e.length;t++)if(e[t].morphTargets)for(let n=0;n<e[t].morphTargets.length;n++)i[e[t].morphTargets[n]]=-1;for(let r in i){let i=[],a=[];for(let n=0;n!==e[t].morphTargets.length;++n){let n=e[t];i.push(n.time),a.push(n.morphTarget===r?1:0)}n.push(new O_(".morphTargetInfluence["+r+"]",i,a))}o=i.length*a}else{let r=".bones["+t[c].name+"]";i(L_,r+".position",e,"pos",n),i(I_,r+".quaternion",e,"rot",n),i(L_,r+".scale",e,"scl",n)}}return 0===n.length?null:new this(r,o,n,s)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){let i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function B_(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return O_;case"vector":case"vector2":case"vector3":case"vector4":return L_;case"color":return D_;case"quaternion":return I_;case"bool":case"boolean":return P_;case"string":return R_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],i=[];S_(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var j_={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},F_=class{constructor(e,t,i){let n,r=this,a=!1,s=0,o=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return n?n(e):e},this.setURLModifier=function(e){return n=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){let i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}},N_=new F_,U_=class{constructor(e){this.manager=void 0!==e?e:N_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(n,r){i.load(e,n,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},V_={},W_=class extends Error{constructor(e,t){super(e),this.response=t}},H_=class extends U_{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let r=j_.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==V_[e])return void V_[e].push({onLoad:t,onProgress:i,onError:n});V_[e]=[],V_[e].push({onLoad:t,onProgress:i,onError:n});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===t.body||void 0===t.body.getReader)return t;let i=V_[e],n=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a,o=0,l=new ReadableStream({start(e){!function t(){n.read().then(n=>{let{done:r,value:l}=n;if(r)e.close();else{o+=l.byteLength;let n=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=i.length;e<t;e++){let t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(l),t()}})}()}});return new Response(l)}throw new W_('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(void 0===s)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(s),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then(e=>n.decode(e))}}}).then(t=>{j_.add(e,t);let i=V_[e];delete V_[e];for(let e=0,n=i.length;e<n;e++){let n=i[e];n.onLoad&&n.onLoad(t)}}).catch(t=>{let i=V_[e];if(void 0===i)throw this.manager.itemError(e),t;delete V_[e];for(let e=0,n=i.length;e<n;e++){let n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},G_=class extends U_{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let r=this,a=j_.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;let s=Tv("img");function o(){c(),j_.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}},q_=class extends U_{constructor(e){super(e)}load(e,t,i,n){let r=new Gv,a=new G_(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},i,n),r}},Y_=class extends Jy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Fv(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}},X_=class extends Y_{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jy.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Fv(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Q_=new My,K_=new Zv,Z_=new Zv,J_=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Av(512,512),this.map=null,this.mapPass=null,this.matrix=new My,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sx,this._frameExtents=new Av(1,1),this._viewportCount=1,this._viewports=[new qv(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;K_.setFromMatrixPosition(e.matrixWorld),t.position.copy(K_),Z_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Z_),t.updateMatrixWorld(),Q_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Q_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},$_=class extends J_{constructor(){super(new Qb(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=2*uv*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||n!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},eE=class extends Y_{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jy.DEFAULT_UP),this.updateMatrix(),this.target=new Jy,this.distance=i,this.angle=n,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new $_}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},tE=new My,iE=new Zv,nE=new Zv,rE=class extends J_{constructor(){super(new Qb(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Av(4,2),this._viewportCount=6,this._viewports=[new qv(2,1,1,1),new qv(0,1,1,1),new qv(3,1,1,1),new qv(1,1,1,1),new qv(3,0,1,1),new qv(1,0,1,1)],this._cubeDirections=[new Zv(1,0,0),new Zv(-1,0,0),new Zv(0,0,1),new Zv(0,0,-1),new Zv(0,1,0),new Zv(0,-1,0)],this._cubeUps=[new Zv(0,1,0),new Zv(0,1,0),new Zv(0,1,0),new Zv(0,1,0),new Zv(0,0,1),new Zv(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),iE.setFromMatrixPosition(e.matrixWorld),i.position.copy(iE),nE.copy(i.position),nE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(nE),i.updateMatrixWorld(),n.makeTranslation(-iE.x,-iE.y,-iE.z),tE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tE)}},aE=class extends Y_{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new rE}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},sE=class extends J_{constructor(){super(new xx(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},oE=class extends Y_{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jy.DEFAULT_UP),this.updateMatrix(),this.target=new Jy,this.shadow=new sE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},lE=class extends Cb{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},cE=class extends U_{constructor(e){super(e)}load(e,t,i,n){let r=this,a=new H_(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(i){try{t(r.parse(JSON.parse(i)))}catch(f6){n?n(f6):console.error(f6),r.manager.itemError(e)}},i,n)}parse(e){let t={},i={};function n(e,n){if(void 0!==t[n])return t[n];let r=e.interleavedBuffers[n],a=function(e,t){if(void 0!==i[t])return i[t];let n=e.arrayBuffers[t],r=new Uint32Array(n).buffer;return i[t]=r,r}(e,r.buffer),s=Mv(r.type,a),o=new UA(s,r.stride);return o.uuid=r.uuid,t[n]=o,o}let r=e.isInstancedBufferGeometry?new lE:new Cb,a=e.data.index;if(void 0!==a){let e=Mv(a.type,a.array);r.setIndex(new mb(e,1))}let s=e.data.attributes;for(let h in s){let t,i=s[h];if(i.isInterleavedBufferAttribute){let r=n(e.data,i.data);t=new WA(r,i.itemSize,i.offset,i.normalized)}else{let e=Mv(i.type,i.array);t=new(i.isInstancedBufferAttribute?QA:mb)(e,i.itemSize,i.normalized)}void 0!==i.name&&(t.name=i.name),void 0!==i.usage&&t.setUsage(i.usage),void 0!==i.updateRange&&(t.updateRange.offset=i.updateRange.offset,t.updateRange.count=i.updateRange.count),r.setAttribute(h,t)}let o=e.data.morphAttributes;if(o)for(let h in o){let t=o[h],i=[];for(let r=0,a=t.length;r<a;r++){let a,s=t[r];if(s.isInterleavedBufferAttribute){let t=n(e.data,s.data);a=new WA(t,s.itemSize,s.offset,s.normalized)}else{let e=Mv(s.type,s.array);a=new mb(e,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),i.push(a)}r.morphAttributes[h]=i}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let h=0,u=l.length;h!==u;++h){let e=l[h];r.addGroup(e.start,e.count,e.materialIndex)}let c=e.data.boundingSphere;if(void 0!==c){let e=new Zv;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new yy(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}},hE=class{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=uE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function uE(){return(typeof performance>"u"?Date:performance).now()}var dE=class{constructor(e,t,i){let n,r,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,n=this.valueSize,r=e*n+n,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)i[r+e]=i[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){let e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){s.setValue(i,n);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let r=i,a=n;r!==a;++r)t[r]=t[n+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let a=0;a!==r;++a)e[t+a]=e[i+a]}_slerp(e,t,i,n){Kv.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){let a=this._workIndex*r;Kv.multiplyQuaternionsFlat(e,a,e,t,e,i),Kv.slerpFlat(e,t,e,t,e,a,n)}_lerp(e,t,i,n,r){let a=1-n;for(let s=0;s!==r;++s){let r=t+s;e[r]=e[r]*a+e[i+s]*n}}_lerpAdditive(e,t,i,n,r){for(let a=0;a!==r;++a){let r=t+a;e[r]=e[r]+e[i+a]*n}}},pE="\\[\\]\\.:\\/",fE=new RegExp("["+pE+"]","g"),mE="[^"+pE+"]",gE="[^"+pE.replace("\\.","")+"]",vE=/((?:WC+[\/:])*)/.source.replace("WC",mE),yE=/(WCOD+)?/.source.replace("WCOD",gE),bE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mE),xE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mE),wE=new RegExp("^"+vE+yE+bE+xE+"$"),AE=["material","materials","bones","map"],SE=class{constructor(e,t,i){this.path=t,this.parsedPath=i||SE.parseTrackName(t),this.node=SE.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new SE.Composite(e,t,i):new SE(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fE,"")}static parseTrackName(e){let t=wE.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){let e=i.nodeName.substring(n+1);-1!==AE.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){let i=function(e){for(let n=0;n<e.length;n++){let r=e[n];if(r.name===t||r.uuid===t)return r;let a=i(r.children);if(a)return a}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(e=SE.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}let a=e[n];if(void 0===a){let i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};SE.Composite=class{constructor(e,t,i){let n=i||SE.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},SE.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},SE.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},SE.prototype.GetterByBindingType=[SE.prototype._getValue_direct,SE.prototype._getValue_array,SE.prototype._getValue_arrayElement,SE.prototype._getValue_toArray],SE.prototype.SetterByBindingTypeAndVersioning=[[SE.prototype._setValue_direct,SE.prototype._setValue_direct_setNeedsUpdate,SE.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[SE.prototype._setValue_array,SE.prototype._setValue_array_setNeedsUpdate,SE.prototype._setValue_array_setMatrixWorldNeedsUpdate],[SE.prototype._setValue_arrayElement,SE.prototype._setValue_arrayElement_setNeedsUpdate,SE.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[SE.prototype._setValue_fromArray,SE.prototype._setValue_fromArray_setNeedsUpdate,SE.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var _E=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;let r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Xg,endingEnd:Xg};for(let l=0;l!==a;++l){let e=r[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let i=this._clip.duration,n=e._clip.duration,r=n/i,a=i/n;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let n=this._mixer,r=n.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);let r=this._startTime;if(null!==r){let n=(e-r)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(a),t[i].accumulateAdditive(s);else for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(a),t[i].accumulate(n,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(null!==i){let n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,n=this.time+e,r=this._loopCount,a=i===Hg;if(0===e)return-1===r?n:a&&1===(1&r)?t-n:n;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=t||n<0){let i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);let s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(a&&1===(1&r))return t-n}return n}_setEndings(e,t,i){let n=this._interpolantSettings;i?(n.endingStart=Qg,n.endingEnd=Qg):(n.endingStart=e?this.zeroSlopeAtStart?Qg:Xg:Kg,n.endingEnd=t?this.zeroSlopeAtEnd?Qg:Xg:Kg)}_scheduleFading(e,t,i){let n=this._mixer,r=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=i,this}},EE=new Float32Array(1),CE=class extends ov{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,c=l[o];void 0===c&&(c={},l[o]=c);for(let h=0;h!==r;++h){let e=n[h],r=e.name,l=c[r];if(void 0!==l)++l.referenceCount,a[h]=l;else{if(l=a[h],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}let n=t&&t._propertyBindings[h].binding.parsedPath;l=new dE(SE.create(i,r,n),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),a[h]=l}s[h].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}let t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){let i=t[e];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){let i=t[e];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){let n=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;let r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){let e=t[i];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){let n=this._bindingsByRootAndName,r=this._bindings,a=n[t];void 0===a&&(a={},n[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,s=a[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[n]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(i=new C_(new Float32Array(2),new Float32Array(2),1,EE),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){let n=t||this._root,r=n.uuid,a="string"==typeof e?z_.findByName(n,e):e,s=null!==a?a.uuid:e,o=this._actionsByClip[s],l=null;if(void 0===i&&(i=null!==a?a.blendMode:Zg),void 0!==o){let e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let c=new _E(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){let i=t||this._root,n=i.uuid,r="string"==typeof e?z_.findByName(i,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[n]||null}stopAllAction(){let e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(n,e,r,a);let s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){let e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){let n=e[i];this._deactivateAction(n);let r=n._cacheIndex,a=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let r in i){let e=i[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}let n=this._bindingsByRootAndName[t];if(void 0!==n)for(let r in n){let e=n[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){let i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}},ME=class{constructor(e){this.value=e}clone(){return new ME(void 0===this.value.clone?this.value:this.value.clone())}},TE=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Cy(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new jy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return DE(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(PE),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n=0,r=e.length;n<r;n++)DE(e[n],this,i,t);return i.sort(PE),i}};function PE(e,t){return e.distance-t.distance}function DE(e,t,i,n){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===n){let n=e.children;for(let e=0,r=n.length;e<r;e++)DE(n[e],t,i,!0)}}var OE=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(pv(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},kE=new Av,IE=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=kE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return kE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},RE=new Zv,LE=new Zv,zE=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zv;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){RE.subVectors(e,this.start),LE.subVectors(this.end,this.start);let i=LE.dot(LE),n=LE.dot(RE)/i;return t&&(n=pv(n,0,1)),n}closestPointToPoint(e,t,i){let n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},BE=new Zv,jE=class extends Jy{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new Cb,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){let e=a/o*Math.PI*2,t=s/o*Math.PI*2;n.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}i.setAttribute("position",new yb(n,3));let r=new iS({fog:!1,toneMapped:!1});this.cone=new uS(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),BE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(BE),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},FE=class extends Nb{constructor(e,t,i){super(new f_(t,4,2),new db({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},NE=new Zv,UE=new Zv,VE=new Zv,WE=class extends Jy{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new Cb;n.setAttribute("position",new yb([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let r=new iS({fog:!1,toneMapped:!1});this.lightPlane=new lS(n,r),this.add(this.lightPlane),n=new Cb,n.setAttribute("position",new yb([0,0,0,0,0,1],3)),this.targetLine=new lS(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),NE.setFromMatrixPosition(this.light.matrixWorld),UE.setFromMatrixPosition(this.light.target.matrixWorld),VE.subVectors(UE,NE),this.lightPlane.lookAt(UE),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(UE),this.targetLine.scale.z=VE.length()}},HE=new Zv,GE=new Xb,qE=class extends uS{constructor(e){let t=new Cb,i=new iS({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={};function s(e,t){o(e),o(t)}function o(e){n.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new yb(n,3)),t.setAttribute("color",new yb(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new Fv(16755200),c=new Fv(16711680),h=new Fv(43775),u=new Fv(16777215),d=new Fv(3355443);this.setColors(l,c,h,u,d)}setColors(e,t,i,n,r){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,n.r,n.g,n.b),a.setXYZ(39,n.r,n.g,n.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;GE.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),YE("c",t,e,GE,0,0,-1),YE("t",t,e,GE,0,0,1),YE("n1",t,e,GE,-1,-1,-1),YE("n2",t,e,GE,1,-1,-1),YE("n3",t,e,GE,-1,1,-1),YE("n4",t,e,GE,1,1,-1),YE("f1",t,e,GE,-1,-1,1),YE("f2",t,e,GE,1,-1,1),YE("f3",t,e,GE,-1,1,1),YE("f4",t,e,GE,1,1,1),YE("u1",t,e,GE,.7,1.1,-1),YE("u2",t,e,GE,-.7,1.1,-1),YE("u3",t,e,GE,0,2,-1),YE("cf1",t,e,GE,-1,0,1),YE("cf2",t,e,GE,1,0,1),YE("cf3",t,e,GE,0,-1,1),YE("cf4",t,e,GE,0,1,1),YE("cn1",t,e,GE,-1,0,-1),YE("cn2",t,e,GE,1,0,-1),YE("cn3",t,e,GE,0,-1,-1),YE("cn4",t,e,GE,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function YE(e,t,i,n,r,a,s){HE.set(r,a,s).unproject(n);let o=t[e];if(void 0!==o){let e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],HE.x,HE.y,HE.z)}}var XE=class extends uS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Cb;n.setIndex(new mb(i,1)),n.setAttribute("position",new yb([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new iS({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},QE=class extends uS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Cb;i.setAttribute("position",new yb(t,3)),i.setAttribute("color",new yb([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new iS({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){let n=new Fv,r=this.geometry.attributes.color.array;return n.set(e),n.toArray(r,0),n.toArray(r,3),n.set(t),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},KE=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){let e=l-127;e<-27?(n[l]=0,n[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(n[l]=1024>>-e-14,n[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(n[l]=e+15<<10,n[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(n[l]=31744,n[256|l]=64512,r[l]=24,r[256|l]=24):(n[l]=31744,n[256|l]=64512,r[l]=13,r[256|l]=13)}let a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}();var ZE=Object.freeze({__proto__:null,fromHalfFloat:function(e){let t=e>>10;return KE.uint32View[0]=KE.mantissaTable[KE.offsetTable[t]+(1023&e)]+KE.exponentTable[t],KE.floatView[0]},toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=pv(e,-65504,65504),KE.floatView[0]=e;let t=KE.uint32View[0],i=t>>23&511;return KE.baseTable[i]+((8388607&t)>>KE.shiftTable[i])}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Qm}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Qm);var JE=".",$E=Symbol("target"),eC=Symbol("unsubscribe");function tC(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var iC=Array.isArray;function nC(e){return"symbol"==typeof e}var rC={after:(e,t)=>iC(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>iC(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+=JE),nC(t)?e+t.toString():e+t):e,initial:e=>{if(iC(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(JE);return-1===t?"":e.slice(0,t)},last:e=>{if(iC(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(JE);return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(iC(e))for(let i of e)t(i);else if(""!==e){let i=0,n=e.indexOf(JE);if(-1===n)t(e);else for(;i<e.length;)-1===n&&(n=e.length),t(e.slice(i,n)),i=n+1,n=e.indexOf(JE,i)}},get(e,t){return this.walk(t,t=>{e&&(e=e[t])}),e}},aC=rC;function sC(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&nC(i)||t.ignoreUnderscores&&"_"===i.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var oC=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),n=i[t];return void 0===n&&(n=Reflect.getOwnPropertyDescriptor(e,t),i[t]=n),n}getProxy(e,t,i,n){if(this.isUnsubscribed)return e;let r=e[n],a=r||e;this._pathCache.set(a,t);let s=this._proxyCache.get(a);return void 0===s&&(s=void 0===r?new Proxy(e,i):e,this._proxyCache.set(a,s)),s}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,aC.get(t,this.getPath(e)))}defineProperty(e,t,i){return!!Reflect.defineProperty(e,t,i)&&(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0)}setProperty(e,t,i,n,r){if(!this._equals(r,i)||!(t in e)){let r=this._getOwnPropertyDescriptor(e,t);return void 0!==r&&"set"in r?Reflect.set(e,t,i,n):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let n=this._getOwnPropertyDescriptor(t,i);return void 0!==e&&void 0!==n&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&!0!==i.configurable&&!0!==i.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function lC(e){return"[object Object]"===toString.call(e)}function cC(){return!0}function hC(e,t){return e.length!==t.length||e.some((e,i)=>t[i]!==e)}var uC=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),dC=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),pC={push:cC,pop:cC,shift:cC,unshift:cC,copyWithin:hC,reverse:hC,sort:hC,splice:hC,flat:hC,fill:hC},fC=new Set([...uC,...dC,...Object.keys(pC)]);function mC(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var gC=["keys","values","entries"],vC=new Set(["has","toString"]),yC={add:mC,clear:mC,delete:mC,forEach:mC},bC=new Set([...vC,...Object.keys(yC),...gC]);function xC(e,t){if(e.size!==t.size)return!0;let i;for(let[n,r]of e)if(i=t.get(n),i!==r||void 0===i&&!t.has(n))return!0;return!1}var wC=new Set([...vC,"get"]),AC={set:xC,clear:xC,delete:xC,forEach:xC},SC=new Set([...wC,...Object.keys(AC),...gC]),_C=class{constructor(e,t,i,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return uC.has(e)}_shallowClone(e){let t=e;if(lC(e))t=(0,ye.A)({},e);else if(iC(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(e=>this._shallowClone(e)));else if(e instanceof Map){t=new Map;for(let[i,n]of e.entries())t.set(i,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,n){return e?(iC(n)?this._onIsChanged=pC[t]:n instanceof Set?this._onIsChanged=yC[t]:n instanceof Map&&(this._onIsChanged=AC[t]),n):i}update(e,t,i){let n=aC.after(e,this._path);if("length"!==t){let e=this.clone;aC.walk(n,t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])}),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:i}),e&&e[t]&&(e[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;-1!==i;i--)t=this._changes[i],aC.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},EC=class extends _C{static isHandledMethod(e){return fC.has(e)}},CC=class extends _C{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},MC=class extends _C{static isHandledMethod(e){return bC.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},TC=class extends _C{static isHandledMethod(e){return SC.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},PC=class extends _C{constructor(e,t,i,n){super(void 0,t,i,n),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},DC=class extends _C{constructor(e,t,i,n){super(void 0,t,i,n),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},OC=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return lC(e)||iC(e)||tC(e)}static isHandledMethod(e,t){return lC(e)?_C.isHandledMethod(t):iC(e)?EC.isHandledMethod(t):e instanceof Set?MC.isHandledMethod(t):e instanceof Map?TC.isHandledMethod(t):tC(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let n=_C;iC(e)?n=EC:e instanceof Date?n=CC:e instanceof Set?n=MC:e instanceof Map?n=TC:e instanceof WeakSet?n=PC:e instanceof WeakMap&&(n=DC),this._stack.push(new n(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:n}=e,r=OC.isHandledMethod(i,n);return this._stack[this._stack.length-1].preferredThisArg(r,n,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},kC={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},IC=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i=(0,ye.A)((0,ye.A)({},kC),i);let n=Symbol("ProxyTarget"),{equals:r,isShallow:a,ignoreDetached:s,details:o}=i,l=new oC(r),c="function"==typeof i.onValidate,h=new OC(c),u=(e,t,n,r,a)=>!c||h.isCloning||!0===i.onValidate(aC.concat(l.getPath(e),t),n,r,a),d=(t,n,r,a)=>{!sC(l,i,n)&&(!s||!l.isDetached(t,e))&&p(l.getPath(t),n,r,a)},p=(e,i,n,r,a)=>{h.isCloning?h.update(e,i,r):t(aC.concat(e,i),n,r,a)},f=e=>e&&(e[n]||e),m=(t,r,o,c)=>function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===o||a&&!OC.isHandledMethod(r,o)||sC(l,i,o)||l.isGetInvariant(r,o)||s&&l.isDetached(r,e)?t:(void 0===c&&(c=l.getPath(r)),l.getProxy(t,aC.concat(c,o),g,n)),g={get(e,t,i){if(nC(t)){if(t===n||t===$E)return e;if(t===eC&&!l.isUnsubscribed&&0===l.getPath(e).length)return l.unsubscribe(),e}let r=tC(e)?Reflect.get(e,t):Reflect.get(e,t,i);return m(r,e,t)},set(e,t,i,a){i=f(i);let s=e[n]||e,o=s[t];if(r(o,i)&&t in e)return!0;let c=u(e,t,i,o);return c&&l.setProperty(s,t,i,a,o)?(d(e,t,e[t],o),!0):!c},defineProperty(e,t,i){if(!l.isSameDescriptor(i,e,t)){let n=e[t];u(e,t,i.value,n)&&l.defineProperty(e,t,i,n)&&d(e,t,i.value,n)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;let i=Reflect.get(e,t),n=u(e,t,void 0,i);return n&&l.deleteProperty(e,t,i)?(d(e,t,void 0,i),!0):!n},apply(t,i,a){let s=i[n]||i;if(l.isUnsubscribed)return Reflect.apply(t,s,a);if((!1===o||!0!==o&&!o.includes(t.name))&&OC.isHandledType(s)){let n=aC.initial(l.getPath(t)),o=OC.isHandledMethod(s,t.name);h.start(s,n,a);let c=Reflect.apply(t,h.preferredThisArg(t,i,s),o?a.map(e=>f(e)):a),d=h.isChanged(s,r),v=h.stop();if(OC.isHandledType(c)&&o&&(i instanceof Map&&"get"===t.name&&(n=aC.concat(n,a[0])),c=l.getProxy(c,n,g)),d){let i={name:t.name,args:a,result:c},r=h.isCloning?aC.initial(n):n,o=h.isCloning?aC.last(n):"";u(aC.get(e,r),o,s,v,i)?p(r,o,s,v,i):h.undo(s)}return(i instanceof Map||i instanceof Set)&&function(e){return"object"==typeof e&&"function"==typeof e.next}(c)?function(e,t,i,n,r){let a=e.next;if("entries"===t.name)e.next=function(){let e=a.call(this);return!1===e.done&&(e.value[0]=r(e.value[0],t,e.value[0],n),e.value[1]=r(e.value[1],t,e.value[0],n)),e};else if("values"===t.name){let s=i[$E].keys();e.next=function(){let e=a.call(this);return!1===e.done&&(e.value=r(e.value,t,s.next().value,n)),e}}else e.next=function(){let e=a.call(this);return!1===e.done&&(e.value=r(e.value,t,e.value,n)),e};return e}(c,t,i,n,m):c}return Reflect.apply(t,i,a)}},v=l.getProxy(e,i.pathAsArray?[]:"",g);return t=t.bind(v),c&&(i.onValidate=i.onValidate.bind(v)),v};IC.target=e=>e&&e[$E]||e,IC.unsubscribe=e=>e[eC]||e;var RC=IC,LC="object"==typeof global&&global&&global.Object===Object&&global,zC="object"==typeof self&&self&&self.Object===Object&&self,BC=LC||zC||Function("return this")(),jC=BC.Symbol,FC=Object.prototype,NC=FC.hasOwnProperty,UC=FC.toString,VC=jC?jC.toStringTag:void 0;var WC=function(e){var t=NC.call(e,VC),i=e[VC];try{e[VC]=void 0;var n=!0}catch(a){}var r=UC.call(e);return n&&(t?e[VC]=i:delete e[VC]),r},HC=Object.prototype.toString;var GC=function(e){return HC.call(e)},qC=jC?jC.toStringTag:void 0;var YC=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qC&&qC in Object(e)?WC(e):GC(e)};var XC=function(e){return null!=e&&"object"==typeof e};var QC=function(e){return"symbol"==typeof e||XC(e)&&"[object Symbol]"==YC(e)};var KC=function(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r},ZC=Array.isArray,JC=1/0,$C=jC?jC.prototype:void 0,eM=$C?$C.toString:void 0;var tM=function e(t){if("string"==typeof t)return t;if(ZC(t))return KC(t,e)+"";if(QC(t))return eM?eM.call(t):"";var i=t+"";return"0"==i&&1/t==-JC?"-0":i},iM=/\s/;var nM=function(e){for(var t=e.length;t--&&iM.test(e.charAt(t)););return t},rM=/^\s+/;var aM=function(e){return e&&e.slice(0,nM(e)+1).replace(rM,"")};var sM=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},oM=/^[-+]0x[0-9a-f]+$/i,lM=/^0b[01]+$/i,cM=/^0o[0-7]+$/i,hM=parseInt;var uM=function(e){if("number"==typeof e)return e;if(QC(e))return NaN;if(sM(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=sM(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=aM(e);var i=lM.test(e);return i||cM.test(e)?hM(e.slice(2),i?2:8):oM.test(e)?NaN:+e};var dM=function(e){return e};var pM=function(e){if(!sM(e))return!1;var t=YC(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},fM=BC["__core-js_shared__"],mM=function(){var e=/[^.]+$/.exec(fM&&fM.keys&&fM.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var gM=function(e){return!!mM&&mM in e},vM=Function.prototype.toString;var yM=function(e){if(null!=e){try{return vM.call(e)}catch(t){}try{return e+""}catch(i){}}return""},bM=/^\[object .+?Constructor\]$/,xM=Function.prototype,wM=Object.prototype,AM=xM.toString,SM=wM.hasOwnProperty,_M=RegExp("^"+AM.call(SM).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var EM=function(e){return!(!sM(e)||gM(e))&&(pM(e)?_M:bM).test(yM(e))};var CM=function(e,t){return null===e||void 0===e?void 0:e[t]};var MM=function(e,t){var i=CM(e,t);return EM(i)?i:void 0},TM=MM(BC,"WeakMap"),PM=Object.create,DM=function(){function e(){}return function(t){if(!sM(t))return{};if(PM)return PM(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();var OM=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)};var kM=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t},IM=Date.now;var RM=function(e){var t=0,i=0;return function(){var n=IM(),r=16-(n-i);if(i=n,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};var LM=function(e){return function(){return e}},zM=function(){try{var e=MM(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),BM=RM(zM?function(e,t){return zM(e,"toString",{configurable:!0,enumerable:!1,value:LM(t),writable:!0})}:dM);var jM=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e};var FM=function(e,t,i,n){for(var r=e.length,a=i+(n?1:-1);n?a--:++a<r;)if(t(e[a],a,e))return a;return-1};var NM=function(e){return e!==e};var UM=function(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1};var VM=function(e,t,i){return t===t?UM(e,t,i):FM(e,NM,i)},WM=/^(?:0|[1-9]\d*)$/;var HM=function(e,t){var i=typeof e;return!!(t=null!==t&&void 0!==t?t:9007199254740991)&&("number"==i||"symbol"!=i&&WM.test(e))&&e>-1&&e%1==0&&e<t};var GM=function(e,t,i){"__proto__"==t&&zM?zM(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i};var qM=function(e,t){return e===t||e!==e&&t!==t},YM=Object.prototype.hasOwnProperty;var XM=function(e,t,i){var n=e[t];(!YM.call(e,t)||!qM(n,i)||void 0===i&&!(t in e))&&GM(e,t,i)};var QM=function(e,t,i,n){var r=!i;i||(i={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=n?n(i[o],e[o],o,i,e):void 0;void 0===l&&(l=e[o]),r?GM(i,o,l):XM(i,o,l)}return i},KM=Math.max;var ZM=function(e,t,i){return t=KM(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,a=KM(n.length-t,0),s=Array(a);++r<a;)s[r]=n[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=n[r];return o[t]=i(s),OM(e,this,o)}};var JM=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var $M=function(e){return null!=e&&JM(e.length)&&!pM(e)},eT=Object.prototype;var tT=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eT)};var iT=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n};var nT=function(e){return XC(e)&&"[object Arguments]"==YC(e)},rT=Object.prototype,aT=rT.hasOwnProperty,sT=rT.propertyIsEnumerable,oT=nT(function(){return arguments}())?nT:function(e){return XC(e)&&aT.call(e,"callee")&&!sT.call(e,"callee")};var lT=function(){return!1},cT="object"==typeof exports&&exports&&!exports.nodeType&&exports,hT=cT&&"object"==typeof module&&module&&!module.nodeType&&module,uT=hT&&hT.exports===cT?BC.Buffer:void 0,dT=(uT?uT.isBuffer:void 0)||lT,pT={};pT["[object Float32Array]"]=pT["[object Float64Array]"]=pT["[object Int8Array]"]=pT["[object Int16Array]"]=pT["[object Int32Array]"]=pT["[object Uint8Array]"]=pT["[object Uint8ClampedArray]"]=pT["[object Uint16Array]"]=pT["[object Uint32Array]"]=!0,pT["[object Arguments]"]=pT["[object Array]"]=pT["[object ArrayBuffer]"]=pT["[object Boolean]"]=pT["[object DataView]"]=pT["[object Date]"]=pT["[object Error]"]=pT["[object Function]"]=pT["[object Map]"]=pT["[object Number]"]=pT["[object Object]"]=pT["[object RegExp]"]=pT["[object Set]"]=pT["[object String]"]=pT["[object WeakMap]"]=!1;var fT=function(e){return XC(e)&&JM(e.length)&&!!pT[YC(e)]};var mT=function(e){return function(t){return e(t)}},gT="object"==typeof exports&&exports&&!exports.nodeType&&exports,vT=gT&&"object"==typeof module&&module&&!module.nodeType&&module,yT=vT&&vT.exports===gT&&LC.process,bT=function(){try{return vT&&vT.require&&vT.require("util").types||yT&&yT.binding&&yT.binding("util")}catch(e){}}(),xT=bT&&bT.isTypedArray,wT=xT?mT(xT):fT,AT=Object.prototype.hasOwnProperty;var ST=function(e,t){var i=ZC(e),n=!i&&oT(e),r=!i&&!n&&dT(e),a=!i&&!n&&!r&&wT(e),s=i||n||r||a,o=s?iT(e.length,String):[],l=o.length;for(var c in e)(t||AT.call(e,c))&&(!s||!("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||HM(c,l)))&&o.push(c);return o};var _T=function(e,t){return function(i){return e(t(i))}},ET=_T(Object.keys,Object),CT=Object.prototype.hasOwnProperty;var MT=function(e){if(!tT(e))return ET(e);var t=[];for(var i in Object(e))CT.call(e,i)&&"constructor"!=i&&t.push(i);return t};var TT=function(e){return $M(e)?ST(e):MT(e)};var PT=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t},DT=Object.prototype.hasOwnProperty;var OT=function(e){if(!sM(e))return PT(e);var t=tT(e),i=[];for(var n in e)"constructor"==n&&(t||!DT.call(e,n))||i.push(n);return i};var kT=function(e){return $M(e)?ST(e,!0):OT(e)},IT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,RT=/^\w*$/;var LT=function(e,t){if(ZC(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!QC(e))||(RT.test(e)||!IT.test(e)||null!=t&&e in Object(t))},zT=MM(Object,"create");var BT=function(){this.__data__=zT?zT(null):{},this.size=0};var jT=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},FT=Object.prototype.hasOwnProperty;var NT=function(e){var t=this.__data__;if(zT){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return FT.call(t,e)?t[e]:void 0},UT=Object.prototype.hasOwnProperty;var VT=function(e){var t=this.__data__;return zT?void 0!==t[e]:UT.call(t,e)};var WT=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=zT&&void 0===t?"__lodash_hash_undefined__":t,this};function HT(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}HT.prototype.clear=BT,HT.prototype.delete=jT,HT.prototype.get=NT,HT.prototype.has=VT,HT.prototype.set=WT;var GT=HT;var qT=function(){this.__data__=[],this.size=0};var YT=function(e,t){for(var i=e.length;i--;)if(qM(e[i][0],t))return i;return-1},XT=Array.prototype.splice;var QT=function(e){var t=this.__data__,i=YT(t,e);return!(i<0)&&(i==t.length-1?t.pop():XT.call(t,i,1),--this.size,!0)};var KT=function(e){var t=this.__data__,i=YT(t,e);return i<0?void 0:t[i][1]};var ZT=function(e){return YT(this.__data__,e)>-1};var JT=function(e,t){var i=this.__data__,n=YT(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};function $T(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}$T.prototype.clear=qT,$T.prototype.delete=QT,$T.prototype.get=KT,$T.prototype.has=ZT,$T.prototype.set=JT;var eP=$T,tP=MM(BC,"Map");var iP=function(){this.size=0,this.__data__={hash:new GT,map:new(tP||eP),string:new GT}};var nP=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var rP=function(e,t){var i=e.__data__;return nP(t)?i["string"==typeof t?"string":"hash"]:i.map};var aP=function(e){var t=rP(this,e).delete(e);return this.size-=t?1:0,t};var sP=function(e){return rP(this,e).get(e)};var oP=function(e){return rP(this,e).has(e)};var lP=function(e,t){var i=rP(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};function cP(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}cP.prototype.clear=iP,cP.prototype.delete=aP,cP.prototype.get=sP,cP.prototype.has=oP,cP.prototype.set=lP;var hP=cP;function uP(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],a=i.cache;if(a.has(r))return a.get(r);var s=e.apply(this,n);return i.cache=a.set(r,s)||a,s};return i.cache=new(uP.Cache||hP),i}uP.Cache=hP;var dP=uP;var pP=function(e){var t=dP(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t},fP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mP=/\\(\\)?/g,gP=pP(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(fP,function(e,i,n,r){t.push(n?r.replace(mP,"$1"):i||e)}),t}),vP=gP;var yP=function(e){return null==e?"":tM(e)};var bP=function(e,t){return ZC(e)?e:LT(e,t)?[e]:vP(yP(e))},xP=1/0;var wP=function(e){if("string"==typeof e||QC(e))return e;var t=e+"";return"0"==t&&1/e==-xP?"-0":t};var AP=function(e,t){for(var i=0,n=(t=bP(t,e)).length;null!=e&&i<n;)e=e[wP(t[i++])];return i&&i==n?e:void 0};var SP=function(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e},_P=jC?jC.isConcatSpreadable:void 0;var EP=function(e){return ZC(e)||oT(e)||!!(_P&&e&&e[_P])};var CP=function e(t,i,n,r,a){var s=-1,o=t.length;for(n||(n=EP),a||(a=[]);++s<o;){var l=t[s];i>0&&n(l)?i>1?e(l,i-1,n,r,a):SP(a,l):r||(a[a.length]=l)}return a};var MP=function(e){return(null==e?0:e.length)?CP(e,1):[]};var TP=function(e){return BM(ZM(e,void 0,MP),e+"")},PP=_T(Object.getPrototypeOf,Object),DP=Function.prototype,OP=Object.prototype,kP=DP.toString,IP=OP.hasOwnProperty,RP=kP.call(Object);var LP=function(e){if(!XC(e)||"[object Object]"!=YC(e))return!1;var t=PP(e);if(null===t)return!0;var i=IP.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&kP.call(i)==RP};var zP=function(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(r);++n<r;)a[n]=e[n+t];return a};var BP=function(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:zP(e,t,i)},jP=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var FP=function(e){return jP.test(e)};var NP=function(e){return e.split("")},UP="\\ud800-\\udfff",VP="["+UP+"]",WP="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",HP="\\ud83c[\\udffb-\\udfff]",GP="[^"+UP+"]",qP="(?:\\ud83c[\\udde6-\\uddff]){2}",YP="[\\ud800-\\udbff][\\udc00-\\udfff]",XP="(?:"+WP+"|"+HP+")"+"?",QP="[\\ufe0e\\ufe0f]?",KP=QP+XP+("(?:\\u200d(?:"+[GP,qP,YP].join("|")+")"+QP+XP+")*"),ZP="(?:"+[GP+WP+"?",WP,qP,YP,VP].join("|")+")",JP=RegExp(HP+"(?="+HP+")|"+ZP+KP,"g");var $P=function(e){return e.match(JP)||[]};var eD=function(e){return FP(e)?$P(e):NP(e)};var tD=function(){this.__data__=new eP,this.size=0};var iD=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i};var nD=function(e){return this.__data__.get(e)};var rD=function(e){return this.__data__.has(e)};var aD=function(e,t){var i=this.__data__;if(i instanceof eP){var n=i.__data__;if(!tP||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new hP(n)}return i.set(e,t),this.size=i.size,this};function sD(e){var t=this.__data__=new eP(e);this.size=t.size}sD.prototype.clear=tD,sD.prototype.delete=iD,sD.prototype.get=nD,sD.prototype.has=rD,sD.prototype.set=aD;var oD=sD;var lD=function(e,t){return e&&QM(t,TT(t),e)};var cD=function(e,t){return e&&QM(t,kT(t),e)},hD="object"==typeof exports&&exports&&!exports.nodeType&&exports,uD=hD&&"object"==typeof module&&module&&!module.nodeType&&module,dD=uD&&uD.exports===hD?BC.Buffer:void 0,pD=dD?dD.allocUnsafe:void 0;var fD=function(e,t){if(t)return e.slice();var i=e.length,n=pD?pD(i):new e.constructor(i);return e.copy(n),n};var mD=function(e,t){for(var i=-1,n=null==e?0:e.length,r=0,a=[];++i<n;){var s=e[i];t(s,i,e)&&(a[r++]=s)}return a};var gD=function(){return[]},vD=Object.prototype.propertyIsEnumerable,yD=Object.getOwnPropertySymbols,bD=yD?function(e){return null==e?[]:(e=Object(e),mD(yD(e),function(t){return vD.call(e,t)}))}:gD;var xD=function(e,t){return QM(e,bD(e),t)},wD=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)SP(t,bD(e)),e=PP(e);return t}:gD;var AD=function(e,t){return QM(e,wD(e),t)};var SD=function(e,t,i){var n=t(e);return ZC(e)?n:SP(n,i(e))};var _D=function(e){return SD(e,TT,bD)};var ED=function(e){return SD(e,kT,wD)},CD=MM(BC,"DataView"),MD=MM(BC,"Promise"),TD=MM(BC,"Set"),PD="[object Map]",DD="[object Promise]",OD="[object Set]",kD="[object WeakMap]",ID="[object DataView]",RD=yM(CD),LD=yM(tP),zD=yM(MD),BD=yM(TD),jD=yM(TM),FD=YC;(CD&&FD(new CD(new ArrayBuffer(1)))!=ID||tP&&FD(new tP)!=PD||MD&&FD(MD.resolve())!=DD||TD&&FD(new TD)!=OD||TM&&FD(new TM)!=kD)&&(FD=function(e){var t=YC(e),i="[object Object]"==t?e.constructor:void 0,n=i?yM(i):"";if(n)switch(n){case RD:return ID;case LD:return PD;case zD:return DD;case BD:return OD;case jD:return kD}return t});var ND=FD,UD=Object.prototype.hasOwnProperty;var VD=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&UD.call(e,"index")&&(i.index=e.index,i.input=e.input),i},WD=BC.Uint8Array;var HD=function(e){var t=new e.constructor(e.byteLength);return new WD(t).set(new WD(e)),t};var GD=function(e,t){var i=t?HD(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)},qD=/\w*$/;var YD=function(e){var t=new e.constructor(e.source,qD.exec(e));return t.lastIndex=e.lastIndex,t},XD=jC?jC.prototype:void 0,QD=XD?XD.valueOf:void 0;var KD=function(e){return QD?Object(QD.call(e)):{}};var ZD=function(e,t){var i=t?HD(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)};var JD=function(e,t,i){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return HD(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return GD(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ZD(e,i);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return YD(e);case"[object Symbol]":return KD(e)}};var $D=function(e){return"function"!=typeof e.constructor||tT(e)?{}:DM(PP(e))};var eO=function(e){return XC(e)&&"[object Map]"==ND(e)},tO=bT&&bT.isMap,iO=tO?mT(tO):eO;var nO=function(e){return XC(e)&&"[object Set]"==ND(e)},rO=bT&&bT.isSet,aO=rO?mT(rO):nO,sO="[object Arguments]",oO="[object Function]",lO="[object Object]",cO={};cO[sO]=cO["[object Array]"]=cO["[object ArrayBuffer]"]=cO["[object DataView]"]=cO["[object Boolean]"]=cO["[object Date]"]=cO["[object Float32Array]"]=cO["[object Float64Array]"]=cO["[object Int8Array]"]=cO["[object Int16Array]"]=cO["[object Int32Array]"]=cO["[object Map]"]=cO["[object Number]"]=cO[lO]=cO["[object RegExp]"]=cO["[object Set]"]=cO["[object String]"]=cO["[object Symbol]"]=cO["[object Uint8Array]"]=cO["[object Uint8ClampedArray]"]=cO["[object Uint16Array]"]=cO["[object Uint32Array]"]=!0,cO["[object Error]"]=cO[oO]=cO["[object WeakMap]"]=!1;var hO=function e(t,i,n,r,a,s){var o,l=1&i,c=2&i,h=4&i;if(n&&(o=a?n(t,r,a,s):n(t)),void 0!==o)return o;if(!sM(t))return t;var u=ZC(t);if(u){if(o=VD(t),!l)return kM(t,o)}else{var d=ND(t),p=d==oO||"[object GeneratorFunction]"==d;if(dT(t))return fD(t,l);if(d==lO||d==sO||p&&!a){if(o=c||p?{}:$D(t),!l)return c?AD(t,cD(o,t)):xD(t,lD(o,t))}else{if(!cO[d])return a?t:{};o=JD(t,d,l)}}s||(s=new oD);var f=s.get(t);if(f)return f;s.set(t,o),aO(t)?t.forEach(function(r){o.add(e(r,i,n,r,t,s))}):iO(t)&&t.forEach(function(r,a){o.set(a,e(r,i,n,a,t,s))});var m=u?void 0:(h?c?ED:_D:c?kT:TT)(t);return jM(m||t,function(r,a){m&&(r=t[a=r]),XM(o,a,e(r,i,n,a,t,s))}),o};var uO=function(e){return hO(e,5)};var dO=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var pO=function(e){return this.__data__.has(e)};function fO(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new hP;++t<i;)this.add(e[t])}fO.prototype.add=fO.prototype.push=dO,fO.prototype.has=pO;var mO=fO;var gO=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1};var vO=function(e,t){return e.has(t)};var yO=function(e,t,i,n,r,a){var s=1&i,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var u=-1,d=!0,p=2&i?new mO:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var f=e[u],m=t[u];if(n)var g=s?n(m,f,u,t,e,a):n(f,m,u,e,t,a);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!gO(t,function(e,t){if(!vO(p,t)&&(f===e||r(f,e,i,n,a)))return p.push(t)})){d=!1;break}}else if(f!==m&&!r(f,m,i,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d};var bO=function(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e]}),i};var xO=function(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i},wO=jC?jC.prototype:void 0,AO=wO?wO.valueOf:void 0;var SO=function(e,t,i,n,r,a,s){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new WD(e),new WD(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qM(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=bO;case"[object Set]":var l=1&n;if(o||(o=xO),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var h=yO(o(e),o(t),n,r,a,s);return s.delete(e),h;case"[object Symbol]":if(AO)return AO.call(e)==AO.call(t)}return!1},_O=Object.prototype.hasOwnProperty;var EO=function(e,t,i,n,r,a){var s=1&i,o=_D(e),l=o.length;if(l!=_D(t).length&&!s)return!1;for(var c=l;c--;){var h=o[c];if(!(s?h in t:_O.call(t,h)))return!1}var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var p=!0;a.set(e,t),a.set(t,e);for(var f=s;++c<l;){var m=e[h=o[c]],g=t[h];if(n)var v=s?n(g,m,h,t,e,a):n(m,g,h,e,t,a);if(!(void 0===v?m===g||r(m,g,i,n,a):v)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return a.delete(e),a.delete(t),p},CO="[object Arguments]",MO="[object Array]",TO="[object Object]",PO=Object.prototype.hasOwnProperty;var DO=function(e,t,i,n,r,a){var s=ZC(e),o=ZC(t),l=s?MO:ND(e),c=o?MO:ND(t),h=(l=l==CO?TO:l)==TO,u=(c=c==CO?TO:c)==TO,d=l==c;if(d&&dT(e)){if(!dT(t))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new oD),s||wT(e)?yO(e,t,i,n,r,a):SO(e,t,l,i,n,r,a);if(!(1&i)){var p=h&&PO.call(e,"__wrapped__"),f=u&&PO.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return a||(a=new oD),r(m,g,i,n,a)}}return!!d&&(a||(a=new oD),EO(e,t,i,n,r,a))};var OO=function e(t,i,n,r,a){return t===i||(null==t||null==i||!XC(t)&&!XC(i)?t!==t&&i!==i:DO(t,i,n,r,e,a))};var kO=function(e,t){return null!=e&&t in Object(e)};var IO=function(e,t,i){for(var n=-1,r=(t=bP(t,e)).length,a=!1;++n<r;){var s=wP(t[n]);if(!(a=null!=e&&i(e,s)))break;e=e[s]}return a||++n!=r?a:!!(r=null==e?0:e.length)&&JM(r)&&HM(s,r)&&(ZC(e)||oT(e))};var RO=function(e,t){return null!=e&&IO(e,t,kO)},LO=function(){return BC.Date.now()},zO=Math.max,BO=Math.min;var jO=function(e,t,i){var n,r,a,s,o,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var i=n,a=r;return n=r=void 0,c=t,s=e.apply(a,i)}function f(e){var i=e-l;return void 0===l||i>=t||i<0||u&&e-c>=a}function m(){var e=LO();if(f(e))return g(e);o=setTimeout(m,function(e){var i=t-(e-l);return u?BO(i,a-(e-c)):i}(e))}function g(e){return o=void 0,d&&n?p(e):(n=r=void 0,s)}function v(){var e=LO(),i=f(e);if(n=arguments,r=this,l=e,i){if(void 0===o)return function(e){return c=e,o=setTimeout(m,t),h?p(e):s}(l);if(u)return clearTimeout(o),o=setTimeout(m,t),p(l)}return void 0===o&&(o=setTimeout(m,t)),s}return t=uM(t)||0,sM(i)&&(h=!!i.leading,a=(u="maxWait"in i)?zO(uM(i.maxWait)||0,t):a,d="trailing"in i?!!i.trailing:d),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=r=o=void 0},v.flush=function(){return void 0===o?s:g(LO())},v};var FO=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var NO=function(e,t){return e>t};var UO=function(e,t){return t.length<2?e:AP(e,zP(t,0,-1))};var VO=function(e,t){return OO(e,t)};var WO=function(e,t,i){for(var n=-1,r=e.length;++n<r;){var a=e[n],s=t(a);if(null!=s&&(void 0===o?s===s&&!QC(s):i(s,o)))var o=s,l=a}return l};var HO=function(e){return e&&e.length?WO(e,dM,NO):void 0};var GO=function(e,t){return t=bP(t,e),null==(e=UO(e,t))||delete e[wP(FO(t))]};var qO=function(e){return LP(e)?void 0:e},YO=TP(function(e,t){var i={};if(null==e)return i;var n=!1;t=KC(t,function(t){return t=bP(t,e),n||(n=t.length>1),t}),QM(e,ED(e),i),n&&(i=hO(i,7,qO));for(var r=t.length;r--;)GO(i,t[r]);return i}),XO=YO;var QO=function(e,t,i,n){if(!sM(e))return e;for(var r=-1,a=(t=bP(t,e)).length,s=a-1,o=e;null!=o&&++r<a;){var l=wP(t[r]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var h=o[l];void 0===(c=n?n(h,l,o):void 0)&&(c=sM(h)?h:HM(t[r+1])?[]:{})}XM(o,l,c),o=o[l]}return e};var KO=function(e,t,i){for(var n=-1,r=t.length,a={};++n<r;){var s=t[n],o=AP(e,s);i(o,s)&&QO(a,bP(s,e),o)}return a};var ZO=function(e,t){return KO(e,t,function(t,i){return RO(e,i)})},JO=TP(function(e,t){return null==e?{}:ZO(e,t)});var $O=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return sM(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),jO(e,t,{leading:n,maxWait:t,trailing:r})};var ek=function(e,t){for(var i=e.length;i--&&VM(t,e[i],0)>-1;);return i};var tk=function(e,t,i){if((e=yP(e))&&(i||void 0===t))return e.slice(0,nM(e)+1);if(!e||!(t=tM(t)))return e;var n=eD(e),r=ek(n,eD(t))+1;return BP(n,0,r).join("")};function ik(e){for(let t of Object.keys(e))void 0===e[t]&&delete e[t];return e}function nk(e,t){return Object.setPrototypeOf(e,t),e}var rk=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/"),ak=(rk&&(()=>{var e;if(typeof window>"u")return;let t=new URLSearchParams(window.location.search).get("desktop-app-version");t?window.localStorage.setItem("desktop-app-version",t):e=window.localStorage.getItem("desktop-app-version")})(),!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC")),sk=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||ak&&"ontouchend"in document),ok=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,lk=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),ck=(()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)})(),hk=Number((()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]})());function uk(e){return Array.isArray(e)?e:[e]}function dk(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function pk(e){return ak?e.metaKey:e.ctrlKey}var fk=[],mk={},gk={},vk={};function yk(e){fk.includes(e)||fk.push(e)}function bk(e){delete mk[e.pointerId];for(let t=0;t<fk.length;t++)if(fk[t].pointerId===e.pointerId){fk.splice(t,1);break}}function xk(e){if("touch"!==e.pointerType)return;let t=mk[e.pointerId];void 0===t&&(t={x:0,y:0},mk[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function wk(e){let t=e.pointerId===fk[0].pointerId?fk[1]:fk[0];return mk[t.pointerId]}function Ak(e){gk[e.key]=!0,vk[e.key]=void 0===vk[e.key]?1:vk[e.key]+1}function Sk(e){if(ak&&gk.Meta)for(let t in gk)gk[t]=!1;else gk[e.key]=!1;vk={}}var _k,Ek,Ck=new Promise(e=>{_k=e});function Mk(e){if(Ek)return Ek;return Ek=async function(){let t=null!==e&&void 0!==e?e:"https://unpkg.com/@splinetool/navmesh-wasm@1.10.99/build",i=__webpack_require__.e(208).then(__webpack_require__.bind(__webpack_require__,1208)),[n,r]=await Promise.all([i,fetch("".concat(t,"/navmesh.wasm")).then(e=>e.arrayBuffer())]),a=n.default,s=await a({wasmBinary:r});_k(s)}(),Ek}var Tk,Pk,Dk=new Promise(e=>{Tk=e});function Ok(){if(Pk)return Pk;return Pk=async function(){let e=await __webpack_require__.e(293).then(__webpack_require__.bind(__webpack_require__,7293));await e.init(),Tk(e)}()}var kk=class{modifyById(e,t){let i=this;if(void 0===i[e])throw new Error("not expected");{let n=(0,ye.A)((0,ye.A)({},i),{},{[e]:t});return Object.setPrototypeOf(n,kk.prototype),n}}add(e,t){var i,n;return null!==(i=null===(n=this.runOp({type:1,id:e,data:t}))||void 0===n?void 0:n.data)&&void 0!==i?i:this}runOp(e){let t=this;if(1===e.type){let i,n=t[e.id];i=void 0===n?{type:2,id:e.id}:{type:1,id:e.id,data:n};let{id:r,data:a}=e,s=(0,ye.A)((0,ye.A)({},t),{},{[r]:a});return Object.setPrototypeOf(s,kk.prototype),{data:s,actual:e,reverse:i}}if(2===e.type){let{id:i}=e,n=t[i];if(void 0===n)return null;{let r=(0,ye.A)({},t);return Object.setPrototypeOf(r,kk.prototype),delete r[i],{data:r,actual:e,reverse:{type:1,id:i,data:n}}}}return null}};function Ik(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let i of t){let t=e[i];t&&"object"==typeof t&&Ik(t)}return Object.freeze(e)}var Rk=class extends Error{};function Lk(e){let t=(0,ye.A)({},e);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function zk(e,t,i){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let i=e;e=t,t=i}let n=[],r=1/(i+1);for(let a=0;a<i;a++){let i=e+(t-e)*(a+.75+.5*Math.random())*r;n.push(i)}return n}function Bk(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function jk(e,t){for(let i of e)!0!==t(i.id,i.data)&&jk(i.children,t)}function Fk(e,t){if(!0!==t(e.id,e.data))for(let i of e.children)Fk(i,t)}var Nk,Uk=class extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,Uk.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Ik(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(!t)return e;e=t}return e}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return null===e?this:null===(t=this.get(e))||void 0===t?void 0:t.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let i=this.get(e);i&&Fk(i,t)}}traverse(e){jk(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let i=this.parent(e),n=this.childrenArray(i),r=n.findIndex(t=>t.id===e);if(r<0)throw new Error("not expected");let a=n[r];return n=[...n],n[r]=(0,ye.A)((0,ye.A)({},a),{},{data:t}),this.modifyArrayBy(i,n)}}modifyArrayBy(e,t){let i=e,n=t;for(;null!==i;){let e=n,t=i;if(i=this.parent(i),void 0===i)throw new Error;n=this.childrenArray(i);let r=n.findIndex(e=>e.id===t);if(r<0)throw new Error;n=[...n],n[r]=(0,ye.A)((0,ye.A)({},n[r]),{},{children:e})}Object.setPrototypeOf(n,Uk.prototype);let r=n;return r.fillCaches(),r}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec(e){let{id:t,children:i}=e;if(void 0!==this.get(t))return!0;for(let n of i)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(e){let{parent:t,fi:i,id:n,data:r,children:a}=e;if(null!==t&&void 0===this.get(t))return null;if(this.checkDuplicatedIdRec(e))return null;{let s=t,o=this.childrenArray(s),l={fi:i,id:n,data:r,children:a};return o=[...o,l],o.sort((e,t)=>e.fi-t.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(s,o),actual:e,reverse:{type:8,id:n}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let i=this.parent(t);if(void 0===i)return null;let n=this.childrenArray(i),r=n.findIndex(e=>e.id===t);e.localIndex=r,n=[...n];let a=n.splice(r,1)[0];return{data:this.modifyArrayBy(i,n),actual:e,reverse:(0,ye.A)((0,ye.A)({type:7},a),{},{parent:i})}}}moveOp(e){let{parent:t,fi:i,id:n}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:n});if(null!==t){let e=t;for(;null!==e;){if(void 0===e)throw new Error;if(e===n)throw new Rk("cyclic tree");e=this.parent(e)}}let r=this.parent(n);if(void 0===r)return null;let a=r,s=this.childrenArray(r),o=s.findIndex(e=>e.id===n);s=[...s];let l=s.splice(o,1)[0],c=this.modifyArrayBy(r,s);r=t,s=c.childrenArray(r);let h=l.fi;return l=(0,ye.A)((0,ye.A)({},l),{},{fi:i}),s=[...s,l],s.sort((e,t)=>e.fi-t.fi),e.localIndex=s.indexOf(l),c=c.modifyArrayBy(r,s),{data:c,actual:e,reverse:{type:9,parent:a,fi:h,id:n}}}previous(e,t){if(null===t){let t=this.childrenArray(e);return 0===t.length?null:t[t.length-1].id}let i=null;for(let n of this.childrenArray(e)){if(n.id===t)return i;i=n.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let i=this.childrenArray(t),n=i.findIndex(t=>t.id===e)+1;if(n<i.length)return i[n].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let i=this.childrenArray(t),n=i.findIndex(t=>t.id===e)-1;return n>=0?this.traverseSortPrevious(i[n].id):t}}getAllSorted(e){let t=[];for(let i of e){let e=this.getWithSortKey(i.id);void 0!==e&&t.push((0,ye.A)((0,ye.A)({},i),e))}t.sort((e,t)=>function(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}(e.sortKey,t.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],n=this.get(t),r=n;if(void 0!==n){for(;t;)i.splice(0,0,n.fi),null!==(t=this.parent(t))&&(n=this.get(t));return(0,ye.A)((0,ye.A)({},r),{},{sortKey:i})}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let n=this.childrenArray(e);if(null===t){if(0===n.length)return zk(0,i,i);{let e=n[0].fi;return zk(e-i,e,i)}}{let r=this.get(t);if(void 0===r||this.parent(t)!==e)throw new Error("illegal args");let a=n.find(e=>e.fi>r.fi);if(void 0===a){let e=n[n.length-1].fi;return zk(e,e+i,i)}return zk(r.fi,a.fi,i)}}};(e=>{e.runOp=function(e,t){if(0!==t.type)return null;if(Array.isArray(e)){let i=t.props,n={},r=[...e],a=!1;if(i)for(let e of Object.keys(i)){let t=parseInt(e);if(isNaN(t))throw new Error("wrong index");n[e]=r[t],r[t]=i[e],a=!0}return a?{data:r,actual:t,reverse:{type:0,props:n}}:null}{let i=t.props,n={},r=(0,ye.A)({},e),a=!1;if(i)for(let e of Object.keys(i)){n[e]=r[e];let t=i[e];void 0===t?delete r[e]:r[e]=t,a=!0}return a?{data:r,actual:t,reverse:{type:0,props:n}}:null}}})(Nk||(Nk={}));var Vk=class extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,Vk.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Ik(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let i=this,n=i.findIndex(t=>t.id===e);if(n<0)throw new Error("not expected");let r=i[n];return i=[...i],i[n]=(0,ye.A)((0,ye.A)({},r),{},{data:t}),this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,Vk.prototype);let t=e;return typeof process<"u"||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:i,data:n}=e,r=this,a={fi:t,id:i,data:n};return r=[...r,a],r.sort((e,t)=>e.fi-t.fi),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,n=i.findIndex(e=>e.id===t);if(-1===n)return null;e.localIndex=n,i=[...i];let r=i.splice(n,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:(0,ye.A)({type:4},r)}}moveOp(e){let{fi:t,id:i}=e,n=this;n=[...n];let r=n.findIndex(e=>e.id===i);if(-1===r)return null;let a=n[r].fi,s=(0,ye.A)((0,ye.A)({},n[r]),{},{fi:t});return n[r]=s,n.sort((e,t)=>e.fi-t.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:6,fi:a,id:i}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(null===e){if(0===i.length)return zk(0,t,t);{let e=i[0].fi;return zk(e-t,e,t)}}{let n=this.get(e);if(void 0===n)throw new Error("illegal args");let r=i.find(e=>e.fi>n.fi);if(void 0===r){let e=i[i.length-1].fi;return zk(e,e+t,t)}return zk(n.fi,r.fi,t)}}};function Wk(e){return e&&"object"==typeof e&&e instanceof Xk}var Hk,Gk,qk,Yk,Xk=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,n=0,r={};for(;n<e.path.length;){if(t.push(i),i=void 0===i?void 0:i[e.path[n]],void 0!==i&&!Wk(i))return null;n+=1}i=i?Lk(i):new Xk;for(let[a,s]of Object.entries(e.props)){let e=i[a];r[a]=e,void 0===s?delete i[a]:i[a]=s}for(;n>0;){if(0===Object.keys(i).length){let r=t[n-1];r&&(i=Lk(r),delete i[e.path[n-1]])}else{let r=t[n-1];if(r){let t=Lk(r);t[e.path[n-1]]=i,i=t}else{let t=new Xk;t[e.path[n-1]]=i,i=t}}n-=1}return{data:Object.setPrototypeOf(i,Xk.prototype),actual:e,reverse:(0,ye.A)((0,ye.A)({},e),{},{props:r})}}};function Qk(e,t){if(void 0===t)return;let i=!1,n=e.map(e=>{let n=e.id,r=Kk(e.data,t[n]);if(i=i||void 0!==r,void 0===r&&(r=e.data),e.children){let a=Qk(e.children,t);return void 0!==a?i=!0:a=e.children,(0,ye.A)((0,ye.A)({},e),{},{id:n,data:r,children:a})}return(0,ye.A)((0,ye.A)({},e),{},{id:n,data:r})});return i?n:void 0}function Kk(e,t){if(!Wk(t))return t;if(e instanceof Uk){let i=Qk(e,t);return void 0!==i&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}if(e instanceof Vk)return function(e,t){if(void 0===t)return;let i=!1,n=e.map(e=>{let n=e.id,r=Kk(e.data,t[n]);return i=i||void 0!==r,void 0===r&&(r=e.data),(0,ye.A)((0,ye.A)({},e),{},{id:n,data:r})});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}(e,t);if(Array.isArray(e)){let i=!1,n=e.map((e,n)=>{let r=Kk(e,t[n]);return i=i||void 0!==r,void 0===r&&(r=e),r});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}if(e instanceof Xk)return Zk(e,t);if(e&&"object"==typeof e){let i={},n=!1;for(let[r,a]of Object.entries(e)){let e=Kk(a,t[r]);n=n||void 0!==e,void 0===e&&(e=a),i[r]=e}return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}function Zk(e,t){if(void 0===e)return t;if(void 0===t)return e;if(!Wk(t))return t;if(!Wk(e))return Hk.apply(e,t);let i=new Set;for(let r of Object.keys(e))i.add(r);for(let r of Object.keys(t))i.add(r);let n=new Xk;for(let r of i){let i=Zk(void 0===e?void 0:e[r],void 0===t?void 0:t[r]);n[r]=i}return n}function Jk(e,t){var i;let n={cur:[],result:[],len:0};return[e=null!==(i=iI(e,t,n))&&void 0!==i?i:e,n.result]}function $k(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function eI(e){e&&(e.len-=1)}function tI(e,t,i){let n=!1,r=e.map(e=>{let r=e.id,a=t[r];if(void 0!==a&&"string"==typeof a&&(n=!0,r=a,null!==i))throw new Error("not supported");let s=iI(e.data,t,$k(i,r));eI(i),n=n||void 0!==s,void 0===s&&(s=e.data);let o=tI(e.children,t,i);return void 0!==o?n=!0:o=e.children,(0,ye.A)((0,ye.A)({},e),{},{id:r,data:s,children:o})});if(n)return r}function iI(e,t,i){if(e instanceof Uk){let n=tI(e,t,i);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof Vk)return function(e,t,i){let n=!1,r=e.map(e=>{let r=e.id,a=t[r];if(void 0!==a&&"string"==typeof a&&(n=!0,r=a,null!==i))throw new Error("not supported");let s=iI(e.data,t,$k(i,r));return eI(i),n=n||void 0!==s,void 0===s&&(s=e.data),(0,ye.A)((0,ye.A)({},e),{},{id:r,data:s})});if(n)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}(e,t,i);if(Array.isArray(e)){let n=!1,r=e.map((e,r)=>{let a=iI(e,t,$k(i,r));return eI(i),n=n||void 0!==a,void 0===a&&(a=e),a});return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e&&"object"==typeof e&&!Bk(e)){let n={},r=!1;for(let[a,s]of Object.entries(e))if("name"!==a&&"variableId"!==a){let e=t[a];if("string"==typeof e){if(null!==i)throw new Error("not supported");r=!0,a=e}let o=iI(s,t,$k(i,a));eI(i),r=r||void 0!==o,void 0===o&&(o=s),n[a]=o}else n[a]=s;return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}if("string"==typeof e){let n=t[e];return void 0!==n&&function(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(i),n}}(e=>{e.apply=function(e,t){var i;return null!==(i=Kk(e,t))&&void 0!==i?i:e},e.merge=function(e,t){return Zk(e,t)},e.filterOp=function(e,t){let i=0,n=t.path,r=e;for(;i<n.length&&void 0!==r;){if(r=mI.zoomOnce(r,n[i]),void 0===r)return t;if(!Wk(r))return;i+=1}if(void 0===r)return t;if(Wk(r)){if(0===t.type){let e=(0,ye.A)({},t.props);for(let t of Object.keys(r))delete e[t];return(0,ye.A)((0,ye.A)({},t),{},{props:e})}if(1===t.type||4===t.type||7===t.type){let e=Qk([t],r);return e?e[0]:t}return t}}})(Hk||(Hk={})),(e=>{e.replaceProps=function(e,t){let i=mI.zoom(t,e.path);if("object"==typeof i){let t={};for(let n of Object.keys(e.props))t[n]=i[n];return(0,ye.A)((0,ye.A)({},e),{},{props:t})}return(0,ye.A)((0,ye.A)({},e),{},{props:{}})}})(Gk||(Gk={})),(e=>{function t(e,t){let i=t.path;for(var n=[];;){let s;if(e instanceof Xk&&0===t.type&&(s=e.runOp((0,ye.A)((0,ye.A)({},t),{},{path:i.slice(n.length)})),null===s&&(s=void 0)),void 0===s&&n.length===i.length&&(s=e instanceof Uk||e instanceof Vk||e instanceof kk?e.runOp(t):Nk.runOp(e,t)),void 0!==s){if(null!==s){let e=s.data;for(let t=n.length-1;t>=0;t--){let r=i[t],a=n[t];if(a instanceof Uk){if("number"==typeof r)throw new Error("illegal arg");e=a.modifyById(r,e)}else if(a instanceof Vk){if("number"==typeof r)throw new Error("illegal arg");e=a.modifyById(r,e)}else if(a instanceof kk){if("number"==typeof r)throw new Error("illegal arg");e=a.modifyById(r,e)}else if(a instanceof Xk){let t=(0,ye.A)((0,ye.A)({},a),{},{[r]:e});e=Object.setPrototypeOf(t,Xk.prototype)}else{if("object"!=typeof a)return null;if(Array.isArray(a)){if("string"==typeof r&&(r=parseInt(r),isNaN(r)))throw new Error("Invalid path");let t=e;e=[...a],e[r]=t}else e=(0,ye.A)((0,ye.A)({},a),{},{[r]:e})}}return{data:e,actual:(0,ye.A)((0,ye.A)({},s.actual),{},{path:i}),reverse:(0,ye.A)((0,ye.A)({},s.reverse),{},{path:i})}}return null}let o,l=i[n.length];if(e instanceof Uk){var r;if("number"==typeof l)throw new Error("");o=null===(r=e.get(l))||void 0===r?void 0:r.data}else if(e instanceof Vk){var a;if("number"==typeof l)throw new Error("");o=null===(a=e.get(l))||void 0===a?void 0:a.data}else null!==e&&(o=e[l]);if(void 0===o)return null;n.push(e),e=o}}function i(e,t){for(let i=0;i<e.length&&i<t.length;i++)if(e[i]!==t[i])return!0;return!1}function n(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}e.drop=function(e,t){return(0,ye.A)((0,ye.A)({},e),{},{path:e.path.slice(t)})},e.applySimple=function(e,i){var n,r;return null!==(n=null===(r=t(e,i))||void 0===r?void 0:r.data)&&void 0!==n?n:e},e.apply=t,e.pathDisjoint=i,e.pathEq=n,e.commutative=function(e,t){return i(e.path,t.path)},e.subsumed=function(e,t){return!(0!==e.type||0!==t.type||!n(e.path,t.path))&&Object.keys(e.props).every(e=>void 0!==t.props[e])}})(qk||(qk={})),(e=>{function t(e,t){var i=e;let n=[],r=[];for(let a of t)try{if(3===a.type||5===a.type&&"variables"===a.path[a.path.length-1]){let e,t,s;if(3===a.type?(e=mI.zoom(i,[...a.path,a.id]),s=qk.apply(i,(0,ye.A)((0,ye.A)({},a),{},{type:2}))):(e=mI.zoom(i,[...a.path,a.id,"value"]),s=qk.apply(i,a)),null!==s){i=s.data;let[o,l]=Jk(i,{[a.id]:e});i=o;for(let s=0;s<l.length;s++){let o=l[s],c=o.pop();if("number"==typeof c){let n=[c];for(let e=s+1;e<l.length;e++){let t=l[e],i=t[t.length-1];if("number"!=typeof i||!mI.equal(o,t.slice(0,t.length-1)))break;n.push(i),l.splice(e,1)}let r=mI.zoom(i,o);t=r.map((e,t)=>n.includes(t)?a.id:e),e=r,c=o.pop()}else{if("alphaOverride"===c||"alpha"===c){e/=100;let t=e,n=mI.zoom(i,o.slice(0,o.length-2)),r=n.layers.map(e=>e.id===o[o.length-1]?(0,ye.A)((0,ye.A)({},e),{},{data:(0,ye.A)((0,ye.A)({},e.data),{},{[c]:t})}):e);Object.setPrototypeOf(r,Object.getPrototypeOf(n.layers)),n.layers=r}t=a.id}n.push({type:0,path:o,props:{[c]:e}}),r.push({type:0,path:o,props:{[c]:t}})}r.push(s.reverse),n.push(s.actual)}}else{let e=qk.apply(i,a);null!==e&&(n.push(e.actual),i=e.data,r.push(e.reverse))}}catch(x6){if(x6 instanceof Rk)return null;throw x6}return{data:i,actual:n,reverse:r.reverse()}}e.empty=function(){return[]},e.removePrefix=function(e,t){let i=[];for(let n of e){let[e,...r]=n.path;e===t&&i.push((0,ye.A)((0,ye.A)({},n),{},{path:r}))}return i},e.addPrefix=function(e,t){return e.map(e=>(0,ye.A)((0,ye.A)({},e),{},{path:[t,...e.path]}))},e.concat=function(e,t){return[...e,...t]},e.compress=function(e,t){return[...e.filter(e=>!t.some(t=>qk.subsumed(e,t))),...t]},e.commutative=function(e,t){return e.every(e=>t.every(t=>qk.commutative(e,t)))},e.applyAll=function(e,i){for(let n of i){let i=t(e,n);null!==i&&(e=i.data)}return e},e.apply=t})(Yk||(Yk={}));var nI=Symbol(),rI=Symbol(),aI=Symbol(),sI=class{reportOp(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this;if(null===t)return;n._current=t.data;let r=i;for(;!(n instanceof gI);){let e=n._path,t=n._current;if(""!==e&&r.splice(0,0,e),n=n._parent,null===n)return;n.update(e,t)}n.push(r,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[aI];i&&i(),delete this._children[e]}}}},oI=class extends sI{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else if(this._current instanceof Xk){let i=(0,ye.A)((0,ye.A)({},this._current),{},{[e]:t});this._current=Object.setPrototypeOf(i,Xk.prototype)}else this._current=(0,ye.A)((0,ye.A)({},this._current),{},{[e]:t})}runOp(e){this.reportOp(e,Nk.runOp(this._current,e),e.path)}},lI=class extends sI{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current=(0,ye.A)((0,ye.A)({},this._current),{},{[e]:t}),Object.setPrototypeOf(this._current,kk.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},cI={get(e,t){if(t===aI)return()=>{e._parent=null};if(t===nI)return e._current;if(t===rI)return e;let{_current:i,_children:n}=e;if("push"===t&&Array.isArray(i))throw new Error("not supported to expand array");let r=void 0===n?void 0:n[t];if(void 0!==r)return r;let a=i[t],s=vI(e,t,a);return s!==a?(void 0===n&&(n={},e._children=n),n[t]=s,s):a},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,n=Reflect.getOwnPropertyDescriptor(i,t);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:i[t]}}},hI=(0,ye.A)((0,ye.A)({},cI),{},{set(e,t,i){var n;let r={type:0,props:{[t]:null!==(n=xI(i))&&void 0!==n?n:i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}}),uI=(0,ye.A)((0,ye.A)({},cI),{},{set(e,t,i){return void 0===i?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)}),dI=class extends sI{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[aI]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var t;let{_current:i,_children:n}=this,r=void 0===n?void 0:n[e];if(void 0!==r)return r;let a=null===(t=i.get(e))||void 0===t?void 0:t.data,s=vI(this,e,a);return s!==a?(void 0===n&&(n={},this._children=n),n[e]=s,s):a}add(e,t,i,n,r){this.runOp({type:7,parent:e,fi:t,id:i,data:n,children:r})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let n=this._current.insertAfterHelper(e,t,i.length);for(let r=0;r<i.length;r++){let t=i[r];this.add(e,n[r],t.id,t.data,t.children)}}insertBefore(e,t,i){let n=this._current.insertBeforeHelper(e,t,i.length);for(let r=0;r<i.length;r++){let t=i[r];this.add(e,n[r],t.id,t.data,t.children)}}moveAfter(e,t,i){let n=this._current.insertAfterHelper(e,t,i.length);for(let r=0;r<i.length;r++){let t=i[r];this.move(e,n[r],t)}}moveBefore(e,t,i){let n=this._current.insertBeforeHelper(e,t,i.length);for(let r=0;r<i.length;r++){let t=i[r];this.move(e,n[r],t)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},pI=class extends sI{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[aI]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let t=this._current[i].id,n=this._current[i].fi;e(this.data(this._current[i].id),t,n)}}find(e){let t=this.length;for(let i=0;i<t;i++){let t=this._current[i].id;if(e(this.data(t),t))return this.get(t)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return(0,ye.A)((0,ye.A)({},this._current.get(e)),{},{data:this.data(e)})}data(e){var t;let{_current:i,_children:n}=this,r=void 0===n?void 0:n[e];if(void 0!==r)return r;let a=null===(t=i.get(e))||void 0===t?void 0:t.data,s=vI(this,e,a);return s!==a?(void 0===n&&(n={},this._children=n),n[e]=s,s):a}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let e=t[n];this.add(i[n],e.id,e.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let e=t[n];this.add(i[n],e.id,e.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let n=0;n<t.length;n++){let e=t[n];this.move(i[n],e)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let n=0;n<t.length;n++){let e=t[n];this.move(i[n],e)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function fI(e,t,i){if(e.length>0){let n=e[e.length-1];if(0===n.type&&0===t.type&&mI.equal(n.path,i))return void Object.assign(n.props,t.props)}e.push((0,ye.A)((0,ye.A)({},t),{},{path:i}))}var mI,gI=class extends sI{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,i,n){fI(this.ts,t,e),fI(this.actual,i,e),fI(this.reverse,n,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function vI(e,t,i){return i instanceof Uk?new dI(e,t,i):i instanceof Vk?new pI(e,t,i):i instanceof kk?new Proxy(new lI(e,t,i),uI):null!==i&&"object"==typeof i?Bk(i)?i:new Proxy(new oI(e,t,i),hI):i}function yI(e){let t=new gI(e);return[vI(t,"",e),t]}function bI(e,t){let[i,n]=yI(e);return t(i),n.result()}function xI(e){return e instanceof dI||e instanceof pI?e._current:null!==e&&"object"==typeof e?e[nI]:e}function wI(e,t){let i=[];if(!(t.length<=e.length))return null;for(var n=0;n<t.length;){if("*"===t[n])i.push(e[n]);else if(e[n]!==t[n])return null;n+=1}return i}(e=>{function t(e,t){return(e instanceof Uk||e instanceof dI)&&"string"==typeof t||(e instanceof Vk||e instanceof pI)&&"string"==typeof t?e.data(t):"number"==typeof t&&Array.isArray(e)||"string"==typeof t&&"object"==typeof e&&null!==e?e[t]:void 0}function i(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(;n<i.length&&void 0!==e;)e=t(e,i[n]),n+=1;return e}e.equal=function(e,t){if(t.length!==e.length)return!1;for(var i=0;i<e.length;){if(e[i]!==t[i])return!1;i+=1}return!0},e.removeOverridden=function(e,t,n){let r=i(n,e);if(void 0!==r&&"object"==typeof r&&null!==r){let e=(0,ye.A)({},t);return Object.keys(r).forEach(t=>{delete e[t]}),e}return t},e.zoomOnce=t,e.zoom=i})(mI||(mI={}));var AI,SI=class{},_I=class extends SI{constructor(e){super(),this.id=e}},EI=class extends SI{constructor(e){super(),this.data=e}};try{AI=new TextDecoder}catch(nne){}var CI,MI,TI,PI,DI,OI,kI,II=0,RI=[],LI=RI,zI=0,BI={},jI=0,FI=0,NI=[],UI={useRecords:!1,mapsAsObjects:!0},VI=class{},WI=new VI;WI.name="MessagePack 0xC1";var HI=!1,GI=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(CI)return gR(()=>(vR(),this?this.unpack(e,t):GI.prototype.unpack.call(UI,e,t)));MI=t>-1?t:e.length,II=0,zI=0,FI=0,PI=null,LI=RI,DI=null,CI=e;try{kI=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(h6){throw CI=null,e instanceof Uint8Array?h6:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof GI){if(BI=this,this.structures)return TI=this.structures,qI();(!TI||TI.length>0)&&(TI=[])}else BI=UI,(!TI||TI.length>0)&&(TI=[]);return qI()}unpackMultiple(e,t){let i,n=0;try{HI=!0;let r=e.length,a=this?this.unpack(e,r):xR.unpack(e,r);if(!t){for(i=[a];II<r;)n=II,i.push(qI());return i}for(t(a);II<r;)if(n=II,!1===t(qI()))return}catch(u6){throw u6.lastPosition=n,u6.values=i,u6}finally{HI=!1,vR()}}_mergeStructures(e,t){for(let i=0,n=(e=e||[]).length;i<n;i++){let t=e[i];t&&(t.isShared=!0,i>=32&&(t.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let n=e[i],r=t[i];r&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[i]=n),e[i]=r)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function qI(){try{if(!BI.trusted&&!HI){let e=TI.sharedLength||0;e<TI.length&&(TI.length=e)}let e=XI();if(II==MI)TI.restoreStructures&&YI(),TI=null,CI=null,OI&&(OI=null);else{if(II>MI){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}if(!HI)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw TI.restoreStructures&&YI(),vR(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function YI(){for(let e in TI.restoreStructures)TI[e]=TI.restoreStructures[e];TI.restoreStructures=null}function XI(){let e=CI[II++];if(e<160){if(e<128){if(e<64)return e;{let t=TI[63&e]||BI.getStructures&&JI()[63&e];return t?(t.read||(t.read=KI(t,63&e)),t.read()):e}}if(e<144){if(e-=128,BI.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[dR()]=XI();return t}{let t=new Map;for(let i=0;i<e;i++)t.set(XI(),XI());return t}}{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=XI();return t}}if(e<192){let t=e-160;if(FI>=II)return PI.slice(II-jI,(II+=t)-jI);if(0==FI&&MI<140){let e=t<16?lR(t):oR(t);if(null!=e)return e}return $I(t)}{let t;switch(e){case 192:return null;case 193:return DI?(t=XI(),t>0?DI[1].slice(DI.position1,DI.position1+=t):DI[0].slice(DI.position0,DI.position0-=t)):WI;case 194:return!1;case 195:return!0;case 196:return cR(CI[II++]);case 197:return t=kI.getUint16(II),II+=2,cR(t);case 198:return t=kI.getUint32(II),II+=4,cR(t);case 199:return hR(CI[II++]);case 200:return t=kI.getUint16(II),II+=2,hR(t);case 201:return t=kI.getUint32(II),II+=4,hR(t);case 202:if(t=kI.getFloat32(II),BI.useFloat32>2){let e=yR[(127&CI[II])<<1|CI[II+1]>>7];return II+=4,(e*t+(t>0?.5:-.5)|0)/e}return II+=4,t;case 203:return t=kI.getFloat64(II),II+=8,t;case 204:return CI[II++];case 205:return t=kI.getUint16(II),II+=2,t;case 206:return t=kI.getUint32(II),II+=4,t;case 207:return BI.int64AsNumber?(t=4294967296*kI.getUint32(II),t+=kI.getUint32(II+4)):t=kI.getBigUint64(II),II+=8,t;case 208:return kI.getInt8(II++);case 209:return t=kI.getInt16(II),II+=2,t;case 210:return t=kI.getInt32(II),II+=4,t;case 211:return BI.int64AsNumber?(t=4294967296*kI.getInt32(II),t+=kI.getUint32(II+4)):t=kI.getBigInt64(II),II+=8,t;case 212:if(t=CI[II++],114==t)return pR(63&CI[II++]);{let e=NI[t];if(e)return e.read?(II++,e.read(XI())):e.noBuffer?(II++,e()):e(CI.subarray(II,++II));throw new Error("Unknown extension "+t)}case 213:return t=CI[II],114==t?(II++,pR(63&CI[II++],CI[II++])):hR(2);case 214:return hR(4);case 215:return hR(8);case 216:return hR(16);case 217:return t=CI[II++],FI>=II?PI.slice(II-jI,(II+=t)-jI):eR(t);case 218:return t=kI.getUint16(II),FI>=(II+=2)?PI.slice(II-jI,(II+=t)-jI):tR(t);case 219:return t=kI.getUint32(II),FI>=(II+=4)?PI.slice(II-jI,(II+=t)-jI):iR(t);case 220:return t=kI.getUint16(II),II+=2,rR(t);case 221:return t=kI.getUint32(II),II+=4,rR(t);case 222:return t=kI.getUint16(II),II+=2,aR(t);case 223:return t=kI.getUint32(II),II+=4,aR(t);default:if(e>=224)return e-256;if(void 0===e){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw new Error("Unknown MessagePack token "+e)}}}var QI=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function KI(e,t){function i(){if(i.count++>2){let i=e.read=new Function("r","return function(){return {"+e.map(e=>QI.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}}")(XI);return 0===e.highByte&&(e.read=ZI(t,e.read)),i()}let n={};for(let t=0,i=e.length;t<i;t++){n[e[t]]=XI()}return n}return i.count=0,0===e.highByte?ZI(t,i):i}var ZI=(e,t)=>function(){let i=CI[II++];if(0===i)return t();let n=e<32?-(e+(i<<5)):e+(i<<5),r=TI[n]||JI()[n];if(!r)throw new Error("Record id is not defined for "+n);return r.read||(r.read=KI(r,e)),r.read()};function JI(){let e=gR(()=>(CI=null,BI.getStructures()));return TI=BI._mergeStructures(e,TI)}var $I=nR,eR=nR,tR=nR,iR=nR;function nR(e){let t;if(e<16&&(t=lR(e)))return t;if(e>64&&AI)return AI.decode(CI.subarray(II,II+=e));let i=II+e,n=[];for(t="";II<i;){let e=CI[II++];if(0===(128&e))n.push(e);else if(192===(224&e)){let t=63&CI[II++];n.push((31&e)<<6|t)}else if(224===(240&e)){let t=63&CI[II++],i=63&CI[II++];n.push((31&e)<<12|t<<6|i)}else if(240===(248&e)){let t=(7&e)<<18|(63&CI[II++])<<12|(63&CI[II++])<<6|63&CI[II++];t>65535&&(t-=65536,n.push(t>>>10&1023|55296),t=56320|1023&t),n.push(t)}else n.push(e);n.length>=4096&&(t+=sR.apply(String,n),n.length=0)}return n.length>0&&(t+=sR.apply(String,n)),t}function rR(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=XI();return t}function aR(e){if(BI.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[dR()]=XI();return t}{let t=new Map;for(let i=0;i<e;i++)t.set(XI(),XI());return t}}var sR=String.fromCharCode;function oR(e){let t=II,i=new Array(e);for(let n=0;n<e;n++){let e=CI[II++];if((128&e)>0)return void(II=t);i[n]=e}return sR.apply(String,i)}function lR(e){if(e<4){if(e<2){if(0===e)return"";{let e=CI[II++];return(128&e)>1?void(II-=1):sR(e)}}{let t=CI[II++],i=CI[II++];if((128&t)>0||(128&i)>0)return void(II-=2);if(e<3)return sR(t,i);let n=CI[II++];return(128&n)>0?void(II-=3):sR(t,i,n)}}{let t=CI[II++],i=CI[II++],n=CI[II++],r=CI[II++];if((128&t)>0||(128&i)>0||(128&n)>0||(128&r)>0)return void(II-=4);if(e<6){if(4===e)return sR(t,i,n,r);{let e=CI[II++];return(128&e)>0?void(II-=5):sR(t,i,n,r,e)}}if(e<8){let a=CI[II++],s=CI[II++];if((128&a)>0||(128&s)>0)return void(II-=6);if(e<7)return sR(t,i,n,r,a,s);let o=CI[II++];return(128&o)>0?void(II-=7):sR(t,i,n,r,a,s,o)}{let a=CI[II++],s=CI[II++],o=CI[II++],l=CI[II++];if((128&a)>0||(128&s)>0||(128&o)>0||(128&l)>0)return void(II-=8);if(e<10){if(8===e)return sR(t,i,n,r,a,s,o,l);{let e=CI[II++];return(128&e)>0?void(II-=9):sR(t,i,n,r,a,s,o,l,e)}}if(e<12){let c=CI[II++],h=CI[II++];if((128&c)>0||(128&h)>0)return void(II-=10);if(e<11)return sR(t,i,n,r,a,s,o,l,c,h);let u=CI[II++];return(128&u)>0?void(II-=11):sR(t,i,n,r,a,s,o,l,c,h,u)}{let c=CI[II++],h=CI[II++],u=CI[II++],d=CI[II++];if((128&c)>0||(128&h)>0||(128&u)>0||(128&d)>0)return void(II-=12);if(e<14){if(12===e)return sR(t,i,n,r,a,s,o,l,c,h,u,d);{let e=CI[II++];return(128&e)>0?void(II-=13):sR(t,i,n,r,a,s,o,l,c,h,u,d,e)}}{let p=CI[II++],f=CI[II++];if((128&p)>0||(128&f)>0)return void(II-=14);if(e<15)return sR(t,i,n,r,a,s,o,l,c,h,u,d,p,f);let m=CI[II++];return(128&m)>0?void(II-=15):sR(t,i,n,r,a,s,o,l,c,h,u,d,p,f,m)}}}}}function cR(e){return BI.copyBuffers?Uint8Array.prototype.slice.call(CI,II,II+=e):CI.subarray(II,II+=e)}function hR(e){let t=CI[II++];if(NI[t])return NI[t](CI.subarray(II,II+=e));throw new Error("Unknown extension type "+t)}var uR=new Array(4096);function dR(){let e=CI[II++];if(!(e>=160&&e<192))return II--,XI();if(e-=160,FI>=II)return PI.slice(II-jI,(II+=e)-jI);if(!(0==FI&&MI<180))return $I(e);let t,i=4095&(e<<5^(e>1?kI.getUint16(II):e>0?CI[II]:0)),n=uR[i],r=II,a=II+e-3,s=0;if(n&&n.bytes==e){for(;r<a;){if(t=kI.getUint32(r),t!=n[s++]){r=1879048192;break}r+=4}for(a+=3;r<a;)if(t=CI[r++],t!=n[s++]){r=1879048192;break}if(r===a)return II=r,n.string;a-=3,r=II}for(n=[],uR[i]=n,n.bytes=e;r<a;)t=kI.getUint32(r),n.push(t),r+=4;for(a+=3;r<a;)t=CI[r++],n.push(t);let o=e<16?lR(e):oR(e);return n.string=null!=o?o:$I(e)}var pR=(e,t)=>{var i=XI();let n=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let r=TI[e];return r&&r.isShared&&((TI.restoreStructures||(TI.restoreStructures=[]))[e]=r),TI[e]=i,i.read=KI(i,n),i.read()},fR="object"==typeof self?self:global;NI[0]=()=>{},NI[0].noBuffer=!0,NI[101]=()=>{let e=XI();return(fR[e[0]]||Error)(e[1])},NI[105]=e=>{let t=kI.getUint32(II-4);OI||(OI=new Map);let i,n=CI[II];i=n>=144&&n<160||220==n||221==n?[]:{};let r={target:i};OI.set(t,r);let a=XI();return r.used?Object.assign(i,a):(r.target=a,a)},NI[112]=e=>{let t=kI.getUint32(II-4),i=OI.get(t);return i.used=!0,i.target},NI[115]=()=>new Set(XI());var mR=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");function gR(e){let t=MI,i=II,n=zI,r=jI,a=FI,s=PI,o=LI,l=OI,c=DI,h=new Uint8Array(CI.slice(0,MI)),u=TI,d=TI.slice(0,TI.length),p=BI,f=HI,m=e();return MI=t,II=i,zI=n,jI=r,FI=a,PI=s,LI=o,OI=l,DI=c,CI=h,HI=f,(TI=u).splice(0,TI.length,...d),BI=p,kI=new DataView(CI.buffer,CI.byteOffset,CI.byteLength),m}function vR(){CI=null,OI=null,TI=null}NI[116]=e=>{let t=e[0],i=mR[t];if(!i)throw new Error("Could not find typed array for code "+t);return new fR[i](Uint8Array.prototype.slice.call(e,1).buffer)},NI[120]=()=>{let e=XI();return new RegExp(e[0],e[1])},NI[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=II;II+=t-4,(DI=[XI(),XI()]).position0=0,DI.position1=0;let n=II;II=i;try{return XI()}finally{II=n}},NI[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var yR=new Array(147);for(let ane=0;ane<256;ane++)yR[ane]=+("1e"+Math.floor(45.15-.30103*ane));var bR,xR=new GI({useRecords:!1}),wR=(xR.unpack,xR.unpackMultiple,xR.unpack,new Float32Array(1));new Uint8Array(wR.buffer,0,4);try{bR=new TextEncoder}catch(rne){}var AR,SR,_R,ER,CR,MR=typeof Buffer<"u",TR=MR?Buffer.allocUnsafeSlow:Uint8Array,PR=MR?Buffer:Uint8Array,DR=MR?4294967296:2144337920,OR=0,kR=null,IR=/[\u0080-\uFFFF]/,RR=Symbol("record-id"),LR=class extends GI{constructor(e){super(e),this.offset=0;let t,i,n,r,a,s=0,o=PR.prototype.utf8Write?function(e,t,i){return _R.utf8Write(e,t,i)}:!(!bR||!bR.encodeInto)&&function(e,t){return bR.encodeInto(e,_R.subarray(t)).written},l=this;e||(e={});let c=e&&e.sequential,h=e.structures||e.saveStructures,u=e.maxSharedStructures;if(null==u&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;null==d&&(d=h?32:64),c&&!e.saveStructures&&(this.structures=[]);let p=u>32||d+u>64,f=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(e,o){if(_R||(_R=new TR(8192),ER=new DataView(_R.buffer,0,8192),OR=0),(CR=_R.length-10)-OR<2048?(_R=new TR(_R.length),ER=new DataView(_R.buffer,0,_R.length),CR=_R.length-10,OR=0):OR=OR+7&2147483640,t=OR,a=l.structuredClone?new Map:null,l.bundleStrings?(kR=["",""],_R[OR++]=214,_R[OR++]=98,kR.position=OR-t,OR+=4):kR=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let e=i.sharedLength||0;if(e>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let t=0;t<e;t++){let e=i[t];if(!e)continue;let n,r=i.transitions;for(let t=0,i=e.length;t<i;t++){let i=e[t];n=r[i],n||(n=r[i]=Object.create(null)),r=n}r[RR]=t+64}s=e}c||(i.nextId=e+64)}n&&(n=!1),r=i||[];try{if(b(e),kR){ER.setUint32(kR.position+t,OR-kR.position-t);let e=kR;kR=null,b(e[0]),b(e[1])}if(l.offset=OR,a&&a.idsToInsert){(OR+=6*a.idsToInsert.length)>CR&&w(OR),l.offset=OR;let e=function(e,t){let i,n=6*t.length,r=e.length-n;for(t.sort((e,t)=>e.offset>t.offset?1:-1);i=t.pop();){let t=i.offset,a=i.id;e.copyWithin(t+n,t,r),n-=6;let s=t+n;e[s++]=214,e[s++]=105,e[s++]=a>>24,e[s++]=a>>16&255,e[s++]=a>>8&255,e[s++]=255&a,r=t}return e}(_R.subarray(t,OR),a.idsToInsert);return a=null,e}return o&YR?(_R.start=t,_R.end=OR,_R):_R.subarray(t,OR)}finally{if(i){if(y<10&&y++,v>1e4)i.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let e=0,t=g.length;e<t;e++)g[e][RR]=0;g=[]}if(n&&l.saveStructures){let n=i.sharedLength||u;i.length>n&&(i=i.slice(0,n));let r=_R.subarray(t,OR);return!1===l.saveStructures(i,s)?(l._mergeStructures(l.getStructures()),l.pack(e)):(s=n,r)}}o&XR&&(OR=t)}};let b=e=>{OR>CR&&(_R=w(OR));var i,n=typeof e;if("string"===n){let t,n=e.length;if(kR&&n>=8&&n<4096){let t=IR.test(e);return kR[t?0:1]+=e,_R[OR++]=193,void b(t?-n:n)}t=n<32?1:n<256?2:n<65536?3:5;let r=3*n;if(OR+r>CR&&(_R=w(OR+r)),n<64||!o){let r,a,s,o=OR+t;for(r=0;r<n;r++)a=e.charCodeAt(r),a<128?_R[o++]=a:a<2048?(_R[o++]=a>>6|192,_R[o++]=63&a|128):55296===(64512&a)&&56320===(64512&(s=e.charCodeAt(r+1)))?(a=65536+((1023&a)<<10)+(1023&s),r++,_R[o++]=a>>18|240,_R[o++]=a>>12&63|128,_R[o++]=a>>6&63|128,_R[o++]=63&a|128):(_R[o++]=a>>12|224,_R[o++]=a>>6&63|128,_R[o++]=63&a|128);i=o-OR-t}else i=o(e,OR+t,r);i<32?_R[OR++]=160|i:i<256?(t<2&&_R.copyWithin(OR+2,OR+1,OR+1+i),_R[OR++]=217,_R[OR++]=i):i<65536?(t<3&&_R.copyWithin(OR+3,OR+2,OR+2+i),_R[OR++]=218,_R[OR++]=i>>8,_R[OR++]=255&i):(t<5&&_R.copyWithin(OR+5,OR+3,OR+3+i),_R[OR++]=219,ER.setUint32(OR,i),OR+=4),OR+=i}else if("number"===n)if(e>>>0===e)e<64?_R[OR++]=e:e<256?(_R[OR++]=204,_R[OR++]=e):e<65536?(_R[OR++]=205,_R[OR++]=e>>8,_R[OR++]=255&e):(_R[OR++]=206,ER.setUint32(OR,e),OR+=4);else if((e|0)===e)e>=-32?_R[OR++]=256+e:e>=-128?(_R[OR++]=208,_R[OR++]=e+256):e>=-32768?(_R[OR++]=209,ER.setInt16(OR,e),OR+=2):(_R[OR++]=210,ER.setInt32(OR,e),OR+=4);else{let t;if((t=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){let i;if(_R[OR++]=202,ER.setFloat32(OR,e),t<4||((i=e*yR[(127&_R[OR])<<1|_R[OR+1]>>7])|0)===i)return void(OR+=4);OR--}_R[OR++]=203,ER.setFloat64(OR,e),OR+=8}else if("object"===n)if(e){if(a){let i=a.get(e);if(i){if(!i.id){let e=a.idsToInsert||(a.idsToInsert=[]);i.id=e.push(i)}return _R[OR++]=214,_R[OR++]=112,ER.setUint32(OR,i.id),void(OR+=4)}a.set(e,{offset:OR-t})}let n=e.constructor;if(n===Object)x(e,!0);else if(n===Array){(i=e.length)<16?_R[OR++]=144|i:i<65536?(_R[OR++]=220,_R[OR++]=i>>8,_R[OR++]=255&i):(_R[OR++]=221,ER.setUint32(OR,i),OR+=4);for(let t=0;t<i;t++)b(e[t])}else if(n===Map){(i=e.size)<16?_R[OR++]=128|i:i<65536?(_R[OR++]=222,_R[OR++]=i>>8,_R[OR++]=255&i):(_R[OR++]=223,ER.setUint32(OR,i),OR+=4);for(let[t,i]of e)b(t),b(i)}else{for(let t=0,i=AR.length;t<i;t++){if(e instanceof SR[t]){let i=AR[t];if(i.write)return i.type&&(_R[OR++]=212,_R[OR++]=i.type,_R[OR++]=0),void b(i.write.call(this,e));let n,r=_R,a=ER,s=OR;_R=null;try{n=i.pack.call(this,e,e=>(_R=r,r=null,(OR+=e)>CR&&w(OR),{target:_R,targetView:ER,position:OR-e}),b)}finally{r&&(ER=a,OR=s,CR=(_R=r).length-10)}return void(n&&(n.length+OR>CR&&w(n.length+OR),OR=jR(n,_R,OR,i.type)))}}x(e,!e.hasOwnProperty)}}else _R[OR++]=192;else if("boolean"===n)_R[OR++]=e?195:194;else if("bigint"===n){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))_R[OR++]=211,ER.setBigInt64(OR,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)_R[OR++]=207,ER.setBigUint64(OR,e);else{if(!this.largeBigIntToFloat)throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");_R[OR++]=203,ER.setFloat64(OR,Number(e))}OR+=8}else if("undefined"===n)this.encodeUndefinedAsNil?_R[OR++]=192:(_R[OR++]=212,_R[OR++]=0,_R[OR++]=0);else{if("function"!==n)throw new Error("Unknown type: "+n);b(this.writeFunction&&this.writeFunction())}},x=!1===this.useRecords?this.variableMapSize?e=>{let t,i=Object.keys(e),n=i.length;n<16?_R[OR++]=128|n:n<65536?(_R[OR++]=222,_R[OR++]=n>>8,_R[OR++]=255&n):(_R[OR++]=223,ER.setUint32(OR,n),OR+=4);for(let r=0;r<n;r++)b(t=i[r]),b(e[t])}:(e,i)=>{_R[OR++]=222;let n=OR-t;OR+=2;let r=0;for(let t in e)(i||e.hasOwnProperty(t))&&(b(t),b(e[t]),r++);_R[n+++t]=r>>8,_R[n+t]=255&r}:e=>{let t,i=Object.keys(e),a=r.transitions||(r.transitions=Object.create(null)),s=0;for(let n=0,r=i.length;n<r;n++){let e=i[n];t=a[e],t||(t=a[e]=Object.create(null),s++),a=t}let o=a[RR];if(o)o>=96&&p?(_R[OR++]=96+(31&(o-=96)),_R[OR++]=o>>5):_R[OR++]=o;else{o=r.nextId,o||(o=64),o<f&&this.shouldShareStructure&&!this.shouldShareStructure(i)?(o=r.nextOwnId,o<m||(o=f),r.nextOwnId=o+1):(o>=m&&(o=f),r.nextId=o+1);let e=i.highByte=o>=96&&p?o-96>>5:-1;a[RR]=o,r[o-64]=i,o<f?(i.isShared=!0,r.sharedLength=o-63,n=!0,e>=0?(_R[OR++]=96+(31&o),_R[OR++]=e):_R[OR++]=o):(e>=0?(_R[OR++]=213,_R[OR++]=114,_R[OR++]=96+(31&o),_R[OR++]=e):(_R[OR++]=212,_R[OR++]=114,_R[OR++]=o),s&&(v+=y*s),g.length>=d&&(g.shift()[RR]=0),g.push(a),b(i))}for(let n=0,r=i.length;n<r;n++)b(e[i[n]])},w=e=>{let i;if(e>16777216){if(e-t>DR)throw new Error("Packed buffer would be larger than maximum buffer size");i=Math.min(DR,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else i=1+(Math.max(e-t<<2,_R.length-1)>>12)<<12;let n=new TR(i);return ER=new DataView(n.buffer,0,i),_R.copy?_R.copy(n,0,t,e):n.set(_R.slice(t,e)),OR-=t,t=0,CR=n.length-10,_R=n}}useBuffer(e){_R=e,ER=new DataView(_R.buffer,_R.byteOffset,_R.byteLength),OR=0}};function zR(e,t,i,n){let r=e.byteLength;if(r+1<256){var{target:a,position:s}=i(4+r);a[s++]=199,a[s++]=r+1}else if(r+1<65536){var{target:a,position:s}=i(5+r);a[s++]=200,a[s++]=r+1>>8,a[s++]=r+1&255}else{var{target:a,position:s,targetView:o}=i(7+r);a[s++]=201,o.setUint32(s,r+1),s+=4}a[s++]=116,a[s++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function BR(e,t){let i=e.byteLength;var n,r;if(i<256){var{target:n,position:r}=t(i+2);n[r++]=196,n[r++]=i}else if(i<65536){var{target:n,position:r}=t(i+3);n[r++]=197,n[r++]=i>>8,n[r++]=255&i}else{var{target:n,position:r,targetView:a}=t(i+5);n[r++]=198,a.setUint32(r,i),r+=4}n.set(e,r)}function jR(e,t,i,n){let r=e.length;switch(r){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:r<256?(t[i++]=199,t[i++]=r):r<65536?(t[i++]=200,t[i++]=r>>8,t[i++]=255&r):(t[i++]=201,t[i++]=r>>24,t[i++]=r>>16&255,t[i++]=r>>8&255,t[i++]=255&r)}return t[i++]=n,t.set(e,i),i+=r}function FR(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");SR.unshift(e.Class),AR.unshift(e)}!function(e){e.unpack?NI[e.type]=e.unpack:NI[e.type]=e}(e)}SR=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,VI],AR=[{pack(e,t,i){let n=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&n>=0&&n<4294967296){let{target:e,targetView:i,position:r}=t(6);e[r++]=214,e[r++]=255,i.setUint32(r,n)}else if(n>0&&n<17179869184){let{target:i,targetView:r,position:a}=t(10);i[a++]=215,i[a++]=255,r.setUint32(a,4e6*e.getMilliseconds()+(n/1e3/4294967296|0)),r.setUint32(a+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:e,targetView:n,position:r}=t(3);e[r++]=212,e[r++]=255,e[r++]=255}else{let{target:i,targetView:r,position:a}=t(15);i[a++]=199,i[a++]=12,i[a++]=255,r.setUint32(a,1e6*e.getMilliseconds()),r.setBigInt64(a+4,BigInt(Math.floor(n)))}}},{pack(e,t,i){let n=Array.from(e),{target:r,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(r[a++]=212,r[a++]=115,r[a++]=0),i(n)}},{pack(e,t,i){let{target:n,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=101,n[r++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:n,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(n[r++]=212,n[r++]=120,n[r++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?zR(e,16,t):BR(MR?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==PR&&this.structuredClone?zR(e,mR.indexOf(i.name),t):BR(e,t)}},{pack(e,t){let{target:i,position:n}=t(1);i[n]=193}}];var NR,UR,VR=new LR({useRecords:!1}),{NEVER:WR,ALWAYS:HR,DECIMAL_ROUND:GR,DECIMAL_FIT:qR}=(VR.pack,VR.pack,{NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4}),YR=512,XR=1024,QR=new LR({structuredClone:!0});function KR(e){if(Bk(e))return e;if(Array.isArray(e))return e.map(KR);if("object"==typeof e&&null!==e){let t={};for(let i of Object.keys(e).sort())t[i]=KR(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}function ZR(e){return"MouseDown"===e||"MouseUp"===e||"KeyDown"===e||"KeyUp"===e||"Collision"===e||"Trigger"===e}FR({Class:kk.prototype.constructor,type:1,write:e=>(0,ye.A)({},e),read:e=>(Object.setPrototypeOf(e,kk.prototype),e)}),FR({Class:Vk.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Vk.prototype),e)}),FR({Class:Uk.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Uk.prototype),e)}),FR({Class:_I.prototype.constructor,type:4,write:e=>e.id,read:e=>new _I(e)}),FR({Class:EI.prototype.constructor,type:5,write:e=>e.data,read:e=>new EI(e)}),FR({Class:Xk.prototype.constructor,type:6,write:e=>(0,ye.A)({},e),read:e=>(Object.setPrototypeOf(e,Xk.prototype),e)}),(e=>{function t(e){return QR.pack(e)}e.serialize=t,e.deserialize=function(e){return QR.unpack(e)},e.checksum=function(e){return function(e){var t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e[i],t&=t;return t}(t(KR(e))).toString()}})(NR||(NR={})),(e=>{e.toEventUIType=function(e){return"Conditional"===e.type?"Distance"===e.condition.type?"Distance":"StateChange":e.type},e.fromEventUIType=function(e){return"Distance"===e||"StateChange"===e?"Conditional":e}})(UR||(UR={}));var JR,$R,eL,tL,iL,nL,rL,aL,sL,oL,lL,cL,hL,uL,dL,pL,fL,mL,gL,vL={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","TimelineAnimation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","TimelineAnimation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","TimelineAnimation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","TimelineAnimation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]};(e=>{e.is=function(e){return"MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"KeyPress"===e.type},e.defaultData=function(e){return"MouseDown"===e||"MouseUp"===e||"MousePress"===e?{type:e,mode:"Object",disabled:!1,actions:new Vk}:{type:e,disabled:!1,key:void 0,actions:new Vk}}})(JR||(JR={})),(e=>{e.propertyDefaultData=function(e){return{type:"Property",value:[null!==e&&void 0!==e?e:null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}})($R||($R={})),(e=>{e.comparisonDefaultData=function(e){return{type:"Comparison",operator:"==",lOperand:$R.propertyDefaultData(e),rOperand:(0,ye.A)({},$R.valueDefaultData)}},e.distanceDefaultData=function(e){return{type:"Distance",toObject:null!==e&&void 0!==e?e:null,fromObject:null!==e&&void 0!==e?e:null,distance:200}},e.stateDefaultData=function(e,t){return{type:"State",object:null!==e&&void 0!==e?e:null,state:null!==t&&void 0!==t?t:null}}})(eL||(eL={})),(e=>{e.isConditionalSubActions=function(e){return void 0!==e.find(e=>"ifActions"===e||"elseActions"===e)}})(tL||(tL={})),(e=>{e.is=function(e){return"Conditional"===e.type},e.defaultData=function(e){return{type:"Conditional",disabled:!1,inActions:new Vk,outActions:new Vk,condition:eL.distanceDefaultData(e)}}})(iL||(iL={})),(e=>{e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Vk,drop:new Vk}}})(nL||(nL={})),(e=>{e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Vk}})(rL||(rL={})),(e=>{e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5}})(aL||(aL={})),(e=>{e.is=function(e){return"MouseHover"===e.type},e.defaultData=function(){return{type:"MouseHover",disabled:!1,actions:new Vk}}})(sL||(sL={})),(e=>{e.is=function(e){return"Scroll"===e.type},e.defaultData=function(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Vk}}})(oL||(oL={})),(e=>{e.is=function(e){return"Start"===e.type},e.defaultData=function(){return{type:"Start",disabled:!1,actions:new Vk}}})(lL||(lL={})),(e=>{e.is=function(e){return"Collision"===e.type},e.defaultData=function(){return{type:"Collision",disabled:!1,target:"character",actions:new Vk}}})(cL||(cL={})),(e=>{e.is=function(e){return"Trigger"===e.type},e.defaultData=function(e,t){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Vk,triggerZone:"box",position:t.toArray(),rotation:[0,0,0],size:e.toArray(),radius:e.length()/2,helperVisible:!0}}})(hL||(hL={})),(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]},e.is=function(e){return"Resize"===e.type},e.sizeToDevice=function(e){return"string"==typeof e?e:"custom"},e.deviceToSize=function(t){return"string"==typeof t?[...e.defaultSizes[t]]:[...t]},e.defaultData=function(){let t={size:"mobile",operator:"<",actions:new Vk},i={size:"tablet",operator:"<",actions:new Vk},n={size:[...e.defaultSizes.custom],operator:"<>",actions:new Vk},r=new Vk;return r.push({id:wv.generateUUID(),fi:0,data:t},{id:wv.generateUUID(),fi:1,data:i},{id:wv.generateUUID(),fi:2,data:n}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:r}},e.defaultBreakpointData=function(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Vk}}})(uL||(uL={})),(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]},e.is=function(e){return"VariableChange"===e.type},e.defaultData=function(){return{disabled:!1,type:"VariableChange",actions:new Vk,variableId:"",objectId:null,property:"Position X"}}})(dL||(dL={})),(e=>{e.is=function(e){return"API"===e.type},e.defaultData=function(){return{disabled:!1,type:"API",successActions:new Vk,errorActions:new Vk,userAPIId:""}}})(pL||(pL={})),(e=>{e.is=function(e){return"WEBHOOK"===e.type},e.defaultData=function(){return{disabled:!1,type:"WEBHOOK",actions:new Vk,userWebhookId:""}}})(fL||(fL={})),(e=>{e.is=function(e){return"AIAssistantListener"===e.type},e.defaultData=function(){return{disabled:!1,type:"AIAssistantListener",actions:new Vk,analysis:"average",analysisRange:[0,71],analysisSingle:0}}})(mL||(mL={})),(e=>{e.is=function(e){return"AIAssistantTrigger"===e.type},e.defaultData=function(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Vk}}})(gL||(gL={}));var yL,bL,xL,wL,AL,SL,_L,EL,CL="personal camera",ML="a218fcc3-276b-49b9-b485-49037fd14f5f",TL=5526619;(e=>{function t(e,t){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function i(e,i){return Math.sqrt(t(e,i))}function n(t,i,n){let r=e.sub(i,t),a=e.sub(n,t),s=e.dot(r,a)/e.dot(r,r),o=e.scalarMultiply(r,s);return e.add(t,o)}e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.lerp=function(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1]]},e.multiply=function(e,t){return[e[0]*t[0],e[1]*t[1]]},e.divide=function(e,t){return[e[0]/t[0],e[1]/t[1]]},e.distanceSquared=t,e.distance=i,e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},e.scalarMultiply=function(e,t){return[e[0]*t,e[1]*t]},e.projectionOnto=n,e.projectionOntoDistance=function(e,t,r){return i(e,n(e,t,r))},e.center=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}})(yL||(yL={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},e.div=function(e,t){return[e[0]/t[0],e[1]/t[1],e[2]/t[2]]},e.mul=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2]]},e.dist=function(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},e.lerp=function(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i,e[2]+(t[2]-e[2])*i]}})(bL||(bL={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.lerp=function(e,t,i){return[e[0]+(t[0]-e[0])*i,e[1]+(t[1]-e[1])*i,e[2]+(t[2]-e[2])*i,e[3]+(t[3]-e[3])*i]}})(xL||(xL={})),(e=>{let t=180/Math.PI,i=Math.PI/180;function n(e){return"number"==typeof e?e*t:e}function r(e){return"number"==typeof e?e*i:e}e.radToDeg=function(e){return[n(e[0]),n(e[1]),n(e[2])]},e.degToRad=function(e){return[r(e[0]),r(e[1]),r(e[2])]}})(wL||(wL={})),(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.isEqual=function(e,t){for(let i=0;i<16;i++)if(e[i]!==t[i])return!1;return!0},e.simplify=function(t){return null!==t&&void 0!==t?t:e.identity},e.applyMatrix4=function(e,t){let i=t.slice(0);for(var n=0,r=t.length;n<r;n+=3){let r=e[3]*t[n]+e[7]*t[n+1]+e[11]*t[n+2]+e[15];i[n]=(e[0]*t[n]+e[4]*t[n+1]+e[8]*t[n+2]+e[12])/r,i[n+1]=(e[1]*t[n]+e[5]*t[n+1]+e[9]*t[n+2]+e[13])/r,i[n+2]=(e[2]*t[n]+e[6]*t[n+1]+e[10]*t[n+2]+e[14])/r}return i}})(AL||(AL={})),(e=>{e.isRGB=function(e){return"object"==typeof e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:1}},e.clone=function(e){return{r:e.r,g:e.g,b:e.b}},e.fromHex=function(e){return{r:((e=Math.floor(e))>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255}},e.toHex=function(e){return 65536*Math.round(255*e.r)+256*Math.round(255*e.g)+Math.round(255*e.b)},e.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},e.equalsFixed=function(e,t){return e.r.toFixed(2)===t.r.toFixed(2)&&e.g.toFixed(2)===t.g.toFixed(2)&&e.b.toFixed(2)===t.b.toFixed(2)},e.lerp=function(e,t,i){return{r:e.r+(t.r-e.r)*i,g:e.g+(t.g-e.g)*i,b:e.b+(t.b-e.b)*i}},e.is=function(e){return!!sM(e)&&("r"in e&&"g"in e&&"b"in e&&!("a"in e))}})(SL||(SL={})),(e=>{e.white=(0,ye.A)((0,ye.A)({},SL.white),{},{a:1}),e.is=function(e){return!!sM(e)&&("r"in e&&"g"in e&&"b"in e&&"a"in e)},e.transparent=(0,ye.A)((0,ye.A)({},SL.white),{},{a:0}),e.from0to1=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]}},e.fromHexAndA=function(e,t){return(0,ye.A)((0,ye.A)({},SL.fromHex(e)),{},{a:t})},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}},e.equals=function(e,t){return SL.equals(e,t)&&e.a===t.a},e.equalsFixed=function(e,t){return SL.equalsFixed(e,t)&&e.a.toFixed(2)===t.a.toFixed(2)},e.lerp=function(e,t,i){return{r:e.r+(t.r-e.r)*i,g:e.g+(t.g-e.g)*i,b:e.b+(t.b-e.b)*i,a:e.a+(t.a-e.a)*i}},e.toStyle=function(){let{r:t,g:i,b:n,a:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.white;return"rgba(".concat(255*t,", ").concat(255*i,", ").concat(255*n,", ").concat(r,")")}})(_L||(_L={})),(e=>{e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(EL||(EL={}));var PL,DL,OL,kL,IL,RL,LL,zL=(e=>(e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING",e[e.ARC=7]="ARC",e[e.NONE=8]="NONE",e))(zL||{});function BL(e){return"string"==typeof e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}(e=>{e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(PL||(PL={})),(e=>{e.defaultData={control1:[.5,0],control2:[.5,1]}})(DL||(DL={})),(e=>{e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]})(OL||(OL={})),(e=>{e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function(t){return e.all.includes(t)}})(kL||(kL={})),(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function(e){var t,i,n,r;return"PerspectiveCamera"===e.type?null!==(t=null===(i=e.perspective)||void 0===i?void 0:i.zoom)&&void 0!==t?t:1:null!==(n=null===(r=e.orthographic)||void 0===r?void 0:r.zoom)&&void 0!==n?n:1}})(IL||(IL={})),(e=>{e.defaultData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:2*Math.max(e[0],e[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[e[0]+e[0]*t,0,0]},grid:{count:[2,2,2],size:e.map(e=>e*(1+t)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}},e.merge=function(e,t){let i=(0,ye.A)({},e);if(QL.forEach(n=>{var r;Object.assign(i,{[n]:null!==(r=t[n])&&void 0!==r?r:e[n]})}),i.radial=(0,ye.A)({},e.radial),t.radial){let n=e.radial,r=t.radial;KL.forEach(e=>{var t;Object.assign(i.radial,{[e]:null!==(t=r[e])&&void 0!==t?t:n[e]})})}if(i.linear=(0,ye.A)({},e.linear),t.linear){let n=e.linear,r=t.linear;ZL.forEach(e=>{var t;Object.assign(i.linear,{[e]:null!==(t=r[e])&&void 0!==t?t:n[e]})})}if(i.grid=(0,ye.A)({},e.grid),t.grid){let n=e.grid,r=t.grid;JL.forEach(e=>{var t;Object.assign(i.grid,{[e]:null!==(t=r[e])&&void 0!==t?t:n[e]})})}if(i.toObject=(0,ye.A)({},e.toObject),t.toObject){let n=e.toObject,r=t.toObject;$L.forEach(e=>{var t;Object.assign(i.toObject,{[e]:null!==(t=r[e])&&void 0!==t?t:n[e]})})}if(i.randomnessObject=(0,ye.A)({},e.randomnessObject),t.randomnessObject){let n=e.randomnessObject,r=t.randomnessObject;ez.forEach(e=>{var t;Object.assign(i.randomnessObject,{[e]:null!==(t=r[e])&&void 0!==t?t:n[e]})})}return i},e.isPartial=function(e){return!(!e.randomnessObject&&!e.toObject)}})(RL||(RL={})),(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];e.toOps=function(e,i){let n=[];void 0!==e.count&&n.push({type:0,path:i,props:{count:e.count}});for(let r of t){let t=e[r];t&&Object.keys(t).length>0&&n.push({type:0,path:[...i,r],props:t})}return n}})(LL||(LL={}));var jL,FL,NL,UL,VL,WL,HL,GL,qL,YL,XL,QL=["count"],KL=["radius","start","end","position","scale","rotation"],ZL=["position","scale","rotation"],JL=["count","size"],$L=["count","position","scale","rotation"],ez=["strength","scale","rotation","position","movement","seed","freqScale"];(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function(t){return e.all.includes(t)}})(jL||(jL={})),(e=>{e.defaultData=function(e){return function(e){if("PointLight"===e)return{type:e,color:_L.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if("SpotLight"===e)return{type:e,color:_L.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===e)return{type:e,color:_L.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(e)}})(FL||(FL={})),(e=>{e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData=(0,ye.A)({renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1},e.defaultCollisionData)})(NL||(NL={})),(e=>{e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]}})(UL||(UL={})),(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function(e,t){return e.castShadow===t.castShadow&&e.receiveShadow===t.receiveShadow}})(VL||(VL={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function(e,t){return e.flatShading===t.flatShading&&e.side===t.side&&e.wireframe===t.wireframe}})(WL||(WL={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},WL.defaultData),VL.defaultData)})(HL||(HL={})),(e=>{e.getMaterialData=function(e,t){let i=[];if("material"in e){var n,r;let a="string"==typeof e.material?null!==(n=t.materials[e.material])&&void 0!==n?n:null===(r=t.lib.materials[e.material])||void 0===r?void 0:r.asset:e.material;a&&i.push(a)}else if("materials"in e)for(let o of e.materials){var a,s;let e="string"==typeof o?null!==(a=t.materials[o])&&void 0!==a?a:null===(s=t.lib.materials[o])||void 0===s?void 0:s.asset:o;e&&i.push(e)}return i}})(GL||(GL={})),(e=>{e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7})(qL||(qL={})),(e=>{e.is=function(e){return"texture"===e||"video"===e||"color"===e||"depth"===e||"normal"===e||"gradient"===e||"noise"===e||"fresnel"===e||"rainbow"===e||"toon"===e||"outline"===e||"particle"===e||"transmission"===e||"matcap"===e||"displace"===e||"pattern"===e||"light"===e}})(YL||(YL={})),(e=>{e.is=function(e){return"phong"===e||"toon"===e||"lambert"===e||"physical"===e}})(XL||(XL={}));var tz,iz,nz,rz,az=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],sz=["wrapping","image","video","name","minFilter","magFilter"];(e=>{e.patch=function(e,t){let{texture:i}=t,n=xe(t,Cm);if(Object.assign(e,n),i){let t=e.texture;t&&Object.assign(t,i)}},e.defaultData=function(e,t){return"light"===e&&t?function(e){let t={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(e){case"phong":return(0,ye.A)((0,ye.A)({},t),{},{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6});case"toon":return(0,ye.A)((0,ye.A)({},t),{},{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1});case"lambert":return(0,ye.A)((0,ye.A)({},t),{},{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0});case"physical":return(0,ye.A)((0,ye.A)({},t),{},{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0})}}(t):function(e){let t={alpha:1,mode:0,isMask:!1,visible:!0};switch(e){case"texture":return(0,ye.A)((0,ye.A)({},t),{},{type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1});case"video":return(0,ye.A)((0,ye.A)({},t),{},{type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:qL.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1});case"color":return(0,ye.A)((0,ye.A)({},t),{},{type:"color",color:SL.fromHex(TL)});case"depth":return(0,ye.A)((0,ye.A)({},t),{},{type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200});case"normal":return(0,ye.A)((0,ye.A)({},t),{},{type:"normal",cnormal:[1,1,1]});case"gradient":return(0,ye.A)((0,ye.A)({},t),{},{type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]});case"noise":return(0,ye.A)((0,ye.A)({},t),{},{type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:(0,ye.A)((0,ye.A)({},SL.fromHex(6710886)),{},{a:1}),colorB:(0,ye.A)((0,ye.A)({},SL.fromHex(6710886)),{},{a:1}),colorC:(0,ye.A)((0,ye.A)({},SL.fromHex(16777215)),{},{a:1}),colorD:(0,ye.A)((0,ye.A)({},SL.fromHex(16777215)),{},{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1});case"fresnel":return(0,ye.A)((0,ye.A)({},t),{},{type:"fresnel",color:_L.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1});case"rainbow":return(0,ye.A)((0,ye.A)({},t),{},{type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]});case"toon":return(0,ye.A)((0,ye.A)({},t),{},{type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:_L.fromHexAndA(0,0),offset:[0,0,0]});case"outline":return(0,ye.A)((0,ye.A)({},t),{},{type:"outline",outlineColor:_L.fromHexAndA(0,1),contourColor:_L.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0});case"matcap":return(0,ye.A)((0,ye.A)({},t),{},{type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}});case"transmission":return(0,ye.A)((0,ye.A)({},t),{},{type:"transmission",thickness:10,ior:1.5,roughness:1});case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return(0,ye.A)((0,ye.A)({},t),{},{type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:(0,ye.A)((0,ye.A)({},SL.fromHex(0)),{},{a:1}),colorB:(0,ye.A)((0,ye.A)({},SL.fromHex(16777215)),{},{a:1}),frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6})}}(e)}})(tz||(tz={})),(e=>{function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer2",n=new Vk;return n.push({fi:0,data:tz.defaultData("light",e),id:t}),n.push({fi:1,data:tz.defaultData("color"),id:i}),{layers:n}}e.isMergable=function(e){return!e.layers.some(e=>"texture"===e.data.type&&0!==e.data.projection||"depth"===e.data.type&&!e.data.isWorldSpace||"noise"===e.data.type||"displace"===e.data.type)},e.getHash=function(e){let t="";return e.layers.forEach(e=>{Object.entries(e.data).forEach(e=>{let[i,n]=e;t+="".concat(i).concat(n),Array.isArray(n)?n.forEach(e=>t+="".concat(e)):"object"==typeof n?Object.values(n).forEach(e=>{t+="".concat("number"==typeof e?e.toFixed(4):e)}):t+="".concat(n)})}),t},e.defaultEmptyData=function(){return{layers:new Vk}},e.defaultData=function(){return t("phong",arguments.length>0&&void 0!==arguments[0]?arguments[0]:"layer1",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer2")},e.withName=function(e,t){return(0,ye.A)((0,ye.A)({},e),{},{name:t})},e.defaultTwoLayerData=t,e.defaultUIObjectMaterial=function(e){let t=tz.defaultData("texture");e&&Object.assign(t.texture,{image:e});let i=new Vk;return i.push({fi:0,data:t,id:"layer1"}),i.push({fi:1,data:(0,ye.A)((0,ye.A)({},tz.defaultData("transmission")),{},{alpha:1}),id:"layer2"}),i.push({fi:2,data:(0,ye.A)((0,ye.A)({},tz.defaultData("light","lambert")),{},{alpha:0}),id:"layer3"}),{layers:i}},e.defaultTwoLayerTextureData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phong",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",r=tz.defaultData("texture");Object.assign(r.texture,{image:e});let a=new Vk;return a.push({fi:0,data:r,id:i}),a.push({fi:1,data:tz.defaultData("light",t),id:n}),{layers:a}},e.defaultTwoLayerVideoTextureData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phong",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",r=tz.defaultData("video");Object.assign(r.texture,{video:e});let a=new Vk;return a.push({fi:0,data:r,id:i}),a.push({fi:1,data:tz.defaultData("light",t),id:n}),{layers:a}}})(iz||(iz={})),(e=>{e.defaultData=function(){return{points:new Vk,roundness:0,shapeHoles:[],isClosed:!1}}})(nz||(nz={})),(e=>{e.defaultData=function(){return{points:new Vk,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}})(rz||(rz={}));var oz,lz={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0};(e=>{e.merge=function(e,t){let i=(0,ye.A)({},e);return pz.forEach(n=>{var r;Object.assign(i,{[n]:null!==(r=t[n])&&void 0!==r?r:e[n]})}),i}})(oz||(oz={}));var cz,hz,uz,dz={shape:lz,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},pz=["depth","offset","angle","twist","startScale","endScale"];(e=>{e.is2DParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"UIGeometry"===e},e.isParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"PathGeometry"===e||"VectorGeometry"===e||"ConeGeometry"===e||"CubeGeometry"===e||"CylinderGeometry"===e||"DodecahedronGeometry"===e||"HelixGeometry"===e||"IcosahedronGeometry"===e||"LatheGeometry"===e||"PyramidGeometry"===e||"SphereGeometry"===e||"PlaneGeometry"===e||"BackdropGeometry"===e||"TorusGeometry"===e||"TorusKnotGeometry"===e||"BooleanGeometry"===e||"TextGeometry"===e||"InputGeometry"===e},e.isSwappableGeometry=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e||"PathGeometry"===e||"VectorGeometry"===e||"ConeGeometry"===e||"CubeGeometry"===e||"CylinderGeometry"===e||"DodecahedronGeometry"===e||"HelixGeometry"===e||"IcosahedronGeometry"===e||"LatheGeometry"===e||"PyramidGeometry"===e||"SphereGeometry"===e||"PlaneGeometry"===e||"BackdropGeometry"===e||"TorusGeometry"===e||"TorusKnotGeometry"===e||"TextGeometry"===e||"SubdivGeometry"===e||"NonParametricGeometry"===e}})(cz||(cz={})),(e=>{e.merge=function(e,t){let i=(0,ye.A)({},e);return Object.assign(i,t),"PathGeometry"===i.type&&"extrusion"in t&&t.extrusion&&(i.extrusion=(0,ye.A)({},e.extrusion),Object.assign(i.extrusion,oz.merge(i.extrusion,t.extrusion))),i}})(hz||(hz={})),(e=>{e.defaultData=function(t){if("RectangleGeometry"===t)return{width:320,height:320,type:t,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("UIGeometry"===t)return{type:t,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if("PathGeometry"===t)return{type:t,width:1,height:1,depth:1,path:rz.defaultData(),extrusion:dz};if("VectorGeometry"===t)return{width:1,height:1,type:t,subdivisions:12,shape:nz.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===t)return{type:t,operation:2,width:0,height:0,depth:0,phongAngle:35};if("ShapeBlendGeometry"===t)return{type:t,width:0,height:0,depth:0,resolutionLevel:6,blendRange:100,useChildrenColors:!1};if("TextGeometry"===t)return{type:t,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if("InputGeometry"===t)return(0,ye.A)((0,ye.A)({},e.defaultData("TextGeometry")),{},{type:t,editable:!0});if("SphereGeometry"===t)return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}})(uz||(uz={}));var fz,mz,gz,vz,yz,bz,xz,wz,Az,Sz,_z,Ez=["width","height","depth"];(e=>{e.defaultData={enabled:!1,useBackgroundColor:!1,color:SL.white,near:.1,far:2e3}})(fz||(fz={})),(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:(0,ye.A)((0,ye.A)({},t),{},{blendFunction:16,granularity:15}),bloom:(0,ye.A)((0,ye.A)({},t),{},{blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3}),chromaticAberration:(0,ye.A)((0,ye.A)({},t),{},{offset:[2,2]}),vignette:(0,ye.A)((0,ye.A)({},t),{},{darkness:1,offset:0}),hueSaturation:(0,ye.A)((0,ye.A)({},t),{},{hue:3,saturation:0}),brightnessContrast:(0,ye.A)((0,ye.A)({},t),{},{brightness:.25,contrast:0}),depthOfField:(0,ye.A)((0,ye.A)({},t),{},{focusDistance:100,focalLength:20,bokehScale:5}),noise:(0,ye.A)((0,ye.A)({},t),{},{blendFunction:16})}})(mz||(mz={})),(e=>{e.defaultData={softShadowQuality:"low"}})(gz||(gz={})),(e=>{e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75}})(vz||(vz={})),(e=>{e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}}})(yz||(yz={})),(e=>{e.defaultData={usePhysics:!1,gravity:-10}})(bz||(bz={})),(e=>{e.defaultData={playCamera:CL,gameControlObject:null}})(xz||(xz={})),(e=>{e.defaultData={backgroundColor:_L.fromHexAndA(2960946,1),postprocessing:mz.defaultData,fog:fz.defaultData,globalPhysics:bz.defaultData,ambient:vz.defaultData,ao:yz.defaultData,shadow:gz.defaultData,publish:xz.defaultData}})(wz||(wz={})),(e=>{e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95}})(Az||(Az={})),(e=>{e.isComponentRelated=function(e){return"Component"===e||"Instance"===e},e.isEmptyOrComponent=function(e){return"Empty"===e||"Instance"===e}})(Sz||(Sz={})),(e=>{e.identity=(0,ye.A)((0,ye.A)({},EL.identity),{},{hiddenMatrix:AL.identity}),e.fromObject=function(e){return{position:e.position,rotation:e.rotation,scale:e.scale,hiddenMatrix:e.hiddenMatrix}},e.merge=function(e,t){return{position:(null===t||void 0===t?void 0:t.position)||e.position,rotation:(null===t||void 0===t?void 0:t.rotation)||e.rotation,scale:(null===t||void 0===t?void 0:t.scale)||e.scale,hiddenMatrix:(null===t||void 0===t?void 0:t.hiddenMatrix)||e.hiddenMatrix}},e.diff=function(e,t){return ik({position:bL.isEqual(e.position,t.position)?void 0:t.position,rotation:bL.isEqual(e.rotation,t.rotation)?void 0:t.rotation,scale:bL.isEqual(e.scale,t.scale)?null:t.scale,hiddenMatrix:AL.isEqual(e.hiddenMatrix,t.hiddenMatrix)?void 0:t.hiddenMatrix})}})(_z||(_z={}));var Cz,Mz,Tz,Pz,Dz,Oz,kz,Iz,Rz,Lz,zz,Bz,jz,Fz,Nz,Uz,Vz,Wz,Hz,Gz,qz,Yz,Xz,Qz,Kz,Zz,Jz,$z,eB,tB,iB,nB=["slide","offset"];function rB(e){e.layers.forEach(e=>{if("depth"===e.type&&void 0!==e.colorA){let t=e.colorA,i=e.colorB,n=[[t.r,t.g,t.b,t.a],[i.r,i.g,i.b,i.a]],r=[0,1];for(let e=2;e<10;e++)n.push(n[1]),r.push(1);let a=(0,ye.A)((0,ye.A)({},JO(xI(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode")),{},{near:Math.max(0,e.near),far:Math.max(0,e.far),colors:n,steps:r,num:2,direction:[1,0,0],smooth:!1,gradientType:1});Object.assign(e,a)}else if("depth"===e.type&&1===e.gradientType&&(e.near<0||e.far<0)){let t=(0,ye.A)((0,ye.A)({},xI(e)),{},{near:Math.max(e.near,0),far:Math.max(e.far,0)});Object.assign(e,t)}})}function aB(e,t){Object.values(e.shared.materials).forEach(e=>t(e))}function sB(e,t){e.scene.objects.traverse((e,i)=>{"materials"in i?i.materials.forEach((e,n)=>{void 0===e&&(i.materials[n]=iz.defaultData(),e=i.materials[n]),"string"!=typeof e&&t(e)}):"material"in i?"string"!=typeof i.material&&(void 0===i.material&&(i.material=iz.defaultData()),t(i.material)):"Mesh"===i.type&&(void 0===i.material&&(i.material=iz.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(e=>{e.material&&"string"!=typeof e.material&&Object.getPrototypeOf(e.material)!==Xk.prototype&&t(e.material)})})}function oB(e){void 0===e.layers&&Object.assign(e,iz.defaultTwoLayerData("lambert"))}function lB(e){!e.layers||e.layers.forEach(e=>{if("depth"===e.type&&10===e.colors.length){let t=[...e.colors];t.push(e.colors[9]);let i=[...e.steps];i.push(e.steps[9]);let n=(0,ye.A)((0,ye.A)({},xI(e)),{},{colors:t,steps:i});Object.assign(e,n)}})}function cB(e){e.scene.objects.traverse((e,t)=>{"materials"in t?t.materials.forEach(e=>{"string"!=typeof e&&lB(e)}):"material"in t&&"string"!=typeof t.material&&lB(t.material)}),Object.values(e.shared.materials).forEach(e=>lB(e))}function hB(e){e.layers&&e.layers.forEach(e=>{"depth"===e.type&&void 0!==e.num&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function uB(e){e.layers&&e.layers.forEach(e=>{(function(e){return"displace"!==e.type})(e)&&void 0===e.isMask&&(e.isMask=!1),("texture"===e.type||"video"===e.type)&&void 0===e.blending&&(e.blending=0),("noise"===e.type||"displace"===e.type&&"noise"===e.displacementType)&&(void 0===e.voronoiStyle&&(e.voronoiStyle=0),void 0===e.highCut&&(e.highCut=1),void 0===e.lowCut&&(e.lowCut=0),void 0===e.smoothness&&(e.smoothness=.3),void 0===e.seed&&(e.seed=0),void 0===e.quality&&(e.quality=1))})}function dB(e){var t;let i=null===(t=e.layers.find(e=>"light"===e.type))||void 0===t?void 0:t.data;if("basic"===(null===i||void 0===i?void 0:i.category)){let e=tz.defaultData("light","phong"),t=i;Object.assign(t,e),t.visible=!1}}function pB(e){aB(e,dB),sB(e,dB)}function fB(e){e.layers.forEach(e=>{"light"===e.type&&"toon"!==e.category&&void 0===e.occlusion&&(e.occlusion=!0)})}function mB(e){e.layers&&e.layers.forEach(e=>{"light"===e.type&&void 0===e.bumpMapIntensity&&(e.bumpMapIntensity=5)})}function gB(e,t){if(t<1&&(sB(e,rB),aB(e,rB),e.schema=1),t<2&&(function(e){Object.assign(e.scene.publish,{orbitControls:(0,ye.A)((0,ye.A)({},Fz.defaultData),xI(e.scene.publish.orbitControls))})}(e),e.schema=2),t<3&&(function(e){function t(e){if(e.layers)for(let t of Object.values(e.layers))if(t)for(let[e,i]of Object.entries(t))if((az.includes(e)||"boolean"==typeof i)&&delete t[e],"texture"===e)for(let[t,n]of Object.entries(i))(sz.includes(t)||"boolean"==typeof n)&&delete i[t]}e.scene.objects.traverse((e,i)=>{i.states.forEach(e=>{let i=e;i.material?t(i.material):i.materials&&i.materials.forEach(e=>{t(e)})})})}(e),e.schema=3),t<4&&(function(e){e.scene.publish.withBackground=!0}(e),e.schema=4),t<5&&(function(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}(e),e.schema=5),t<6&&(function(e){e.scene.objects.traverse((e,t)=>{let i=t.cloner;i&&(i.radial.scale=i.radial.scale.map(e=>e+1),i.linear.scale=i.linear.scale.map(e=>e+1))})}(e),e.schema=6),t<7&&(function(e){e.scene.objects.traverse((e,t)=>{let i=t.geometry;i&&("DodecahedronGeometry"===i.type||"IcosahedronGeometry"===i.type)&&(i.detail=Math.round(i.detail))})}(e),e.schema=7),t<8&&(e.schema=8),t<9&&(cB(e),e.schema=9),t<10&&(function(e){e.scene.objects.traverse((e,t)=>{"Mesh"===t.type&&("BooleanGeometry"===t.geometry.type||"SubdivGeometry"===t.geometry.type)&&(t.geometry.phongAngle=35)})}(e),e.schema=10),t<11&&(function(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((e,t)=>{("DirectionalLight"===t.type||"SpotLight"===t.type)&&(t.shadowResolution=1024,t.shadowRadius=1,t.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),t<12&&(cB(e),e.schema=12),t<13&&(function(e){e.shared.audios=nk({},kk.prototype)}(e),e.schema=13),t<14&&(function(e){let t=e.shared.materials;Object.entries(t).forEach(e=>{let[i,n]=e;if(!n.layers){let e={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:e})}})}(e),e.schema=14),t<15&&(function(e){Object.entries(xI(e.shared.images)).filter(e=>!1===e[1].asset).map(e=>e[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(xI(e.shared.audios)).filter(e=>!1===e[1].asset).map(e=>e[0]).forEach(t=>{delete e.shared.audios[t]})}(e),e.schema=15),t<16&&(function(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),t<17&&(sB(e,hB),aB(e,hB),e.schema=17),t<18&&(sB(e,oB),aB(e,oB),e.schema=18),t<19&&(function(e){Object.assign(e.scene.publish.settings,{video:(0,ye.A)((0,ye.A)({},Nz.defaultData.settings.video),xI(e.scene.publish.settings.video))})}(e),e.schema=19),t<20&&(function(e){e.shared.fonts=nk({},kk.prototype)}(e),function(e){let t=[];e.scene.objects.traverse((i,n)=>{let r=n;if("TextFrame"===r.type){let n=iz.defaultTwoLayerData("phong"),a="string"==typeof r.color?e.shared.colors[r.color]:r.color;n.layers[1].data.color={r:a.r,g:a.g,b:a.b},n.layers[1].data.alpha=r.alpha;let s=function(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}(r.font);void 0===e.shared.fonts[s]&&(e.shared.fonts[s]={name:s});let o=(0,ye.A)((0,ye.A)((0,ye.A)({name:r.name},Cz.defaultData),Oz.defaultData),{},{flatShading:!1,wireframe:!1,geometry:(0,ye.A)((0,ye.A)({},uz.defaultData("TextGeometry")),{},{width:r.width,height:r.height,font:s,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:1.40625*r.fontSize,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1}),material:n,states:xI(r.states),events:xI(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}),l=xI(e.scene.objects).parent(i);e.scene.objects.insertAfter(null!==l&&void 0!==l?l:null,i,[{id:i+"new",data:o,children:[]}]),t.push(i)}}),t.forEach(t=>{e.scene.objects.delete(t)})}(e),e.schema=20),t<21&&(function(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((e,i)=>{i.events.forEach(e=>{if(t[Number(e.type)])if(Object.assign(e,{type:t[Number(e.type)]}),"Audio"===e.type&&"audioEvent"in e&&(Object.assign(e,{playAudio:e.audioEvent}),delete e.audioEvent),"GameControl"===e.type)Object.assign(e,{gameActions:{idle:new Vk,move:new Vk,jump:new Vk}});else{let t=new Vk;Object.assign(e,{actions:t}),("MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type)&&"url"in e&&t.push({fi:0,id:wv.generateUUID(),data:{type:"Link",url:e.url,delay:0}}),"targets"in e&&(e.targets.forEach((e,i,n)=>{let r={easing:e.easing,duration:e.duration};6===e.easing?Object.assign(r,JO(e,"mass","stiffness","damping","velocity")):5===e.easing&&Object.assign(r,{control1:(0,ye.A)({},e.control1),control2:(0,ye.A)({},e.control2)});let a={repeat:e.repeat?-1:0,delay:e.delay,delayDirection:e.delayDirection,direction:e.cycle&&e.rewind?"pingpong-rewind":e.cycle?"pingpong":"normal"},s=(0,ye.A)((0,ye.A)({state:e.state},a),r),o={allowSlerp:!0,type:"Transition",object:e.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Vk({fi:0,id:wv.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:wv.generateUUID(),data:s})};t.push({fi:n,id:i,data:o})}),delete e.targets)}})})}(e),function(e){e.scene.objects.traverse((e,t)=>{function i(e,i){let n=new Vk,r=[];if(t.events.forEach((e,t,a)=>{if("Audio"===e.type&&e.trigger===i){let i;r.push(t),"play"===e.interaction?i=(0,ye.A)((0,ye.A)({},JO(e,"interaction","audio","delay","volume","loop")),{},{triggerAfter:"after"in e?e.after:void 0,toggle:"after"in e?e.toggle:void 0,type:"Audio"}):("pause"===e.interaction||"stop"===e.interaction)&&(i=(0,ye.A)((0,ye.A)({},JO(e,"interaction","delay","object","playAudio")),{},{type:"Audio"})),i&&n.push({fi:a,id:t,data:i})}}),r.forEach(e=>t.events.delete(e)),n.length){var a;let i=null===(a=t.events.find(t=>t.type===e))||void 0===a?void 0:a.data;i?"actions"in i&&i.actions.insertBefore(null,n):t.events.insertBefore(null,[{id:wv.generateUUID(),data:{type:e,actions:n}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}(e),e.schema=21),t<22&&(pB(e),e.schema=22),t<23&&(function(e){e.scene.objects.traverse((e,t)=>{"Mesh"===t.type&&"SubdivGeometry"===t.geometry.type&&(t.geometry.scaleBaked||(t.geometry.scaleBaked=[1,1,1]))})}(e),e.schema=23),t<24&&(function(e){e.scene.objects.traverse((e,t)=>{("Empty"===t.type||"Mesh"===t.type)&&t.cloner&&!t.cloner.randomnessObject&&!t.cloner.toObject&&!t.cloner.randomness&&(t.cloner=(0,ye.A)((0,ye.A)({},t.cloner),{},{toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}))})}(e),e.schema=24),(t<25||void 0===e.shared.videos)&&(function(e){e.shared.videos=nk({},kk.prototype)}(e),t<25&&(e.schema=25)),t<26&&(function(e){e.scene.objects.traverse((t,i)=>{let n=e.scene.objects.unproxy().parent(t);if(n){let t=xI(e.scene.objects.data(n));t&&"Mesh"===t.type&&"BooleanGeometry"===t.geometry.type&&"Mesh"===i.type&&(i.visible=!0!==xI(i).booleanExclude)}})}(e),e.schema=26),t<27&&(function(e){e.scene.objects.traverse((e,t)=>{if("Mesh"===t.type){let e=t;"NonParametricGeometry"===t.geometry.type?void 0!==e.material&&delete e.material:void 0!==e.materials&&delete e.materials}})}(e),e.schema=27),t<28&&(pB(e),e.schema=28),t<29&&(function(e){function t(e){Object.setPrototypeOf(e,Xk.prototype),e.texture&&Object.setPrototypeOf(e.texture,Xk.prototype)}function i(e){Object.setPrototypeOf(e,Xk.prototype);for(let i in e)t(e[i])}e.scene.objects.traverse((e,t)=>{t.states.forEach(e=>{let t=e;if(t.material){let e=xI(t.material).layers;i(e),t.material.layers=e}if(t.materials)for(let n=0;n<t.materials.length;n++){let e=t.materials[n],r=xI(e).layers;i(r),e.layers=r}})})}(e),e.schema=29),t<30&&(function(e){e.scene.objects.traverse((e,t)=>{"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&!("material"in t)&&!("materials"in t)&&(t.material=iz.defaultTwoLayerData("phong"))})}(e),e.schema=30),t<31&&(function(e){void 0===e.scene.publish.orbitControls.autoZoom&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((e,t)=>{("OrthographicCamera"===t.type||"PerspectiveCamera"===t.type)&&(void 0===t.orthographic.autoZoom&&(t.orthographic.autoZoom=!1),void 0===t.orthographic.autoZoomFrustumSize&&(t.orthographic.autoZoomFrustumSize=790))})}(e),e.schema=31),t<33&&(function(e){e.scene.objects.traverse((e,t)=>{void 0===t.pathSnapping&&(t.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),void 0===t.pathSnapping.offset&&(t.pathSnapping.offset=0)})}(e),e.schema=33),t<34&&(function(e){void 0===e.scene.publish.mouseEventTarget&&(e.scene.publish.mouseEventTarget="canvas"),void 0===e.scene.publish.settings.web.hint&&(e.scene.publish.settings.web.hint=!1)}(e),e.schema=34),t<35&&(function(e){let{video:t}=e.scene.publish.settings;"gif"===t.format&&t.fps>48&&(t.fps=15)}(e),e.schema=35),t<36&&(function(e){e.scene.objects.traverse((e,t)=>{t.events.forEach(e=>{"GameControl"===e.type&&(e.resetYPosition=Math.abs(e.resetYPosition-t.position[1]))})})}(e),e.schema=36),t<37&&(function(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((e,i)=>{t&&null===i.physics?i.collision=!1:i.collision="visibility"})}(e),e.schema=37),t<38&&(sB(e,uB),aB(e,uB),e.schema=38),t<39&&(function(e){e.scene.objects.traverse((e,t)=>{t.events.forEach(e=>{"GameControl"===e.type&&(e.navmesh=iB.defaultDataThirdPerson.navmesh)})})}(e),e.schema=39),t<40&&(function(e){e.scene.styles||(e.scene.styles=Wz.defaultData())}(e),e.schema=40),t<41&&(function(e){void 0===e.scene.environment.ambientLight.occlusion&&(e.scene.environment.ambientLight.occlusion=!1),void 0===e.scene.environment.ambientLight.aoFullRes&&(e.scene.environment.ambientLight.aoFullRes=!1),void 0===e.scene.environment.ambientLight.radius&&(e.scene.environment.ambientLight.radius=256),void 0===e.scene.environment.ambientLight.bias&&(e.scene.environment.ambientLight.bias=.5),void 0===e.scene.environment.ambientLight.aoColor&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),sB(e,fB),aB(e,fB)}(e),e.schema=41),t<42&&(function(e){e.scene.objects.traverse((e,t)=>{t.events.forEach(e=>{"GameControl"===e.type&&Object.assign(e.gameActions,{run:new Vk})})})}(e),e.schema=42),t<43&&(function(e){e.scene.objects.traverse((e,t)=>{t.events.forEach(e=>{"GameControl"===e.type&&(e.keyAssignments=[...e.keyAssignments,["run","\u21e7"],["none","Ctrl"]])})})}(e),e.schema=43),t<99){var i;sB(e,mB),aB(e,mB),null===e.scene.publish.playCamera&&(e.scene.publish.playCamera=CL);let t=xI(e.scene.objects),n=e.scene.objects;e.scene.publish.playPage=ML,n.insertBefore(null,null,[{id:ML,data:(0,ye.A)((0,ye.A)({},zz.defaultData),{},{backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:JO(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:JO(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:(0,ye.A)((0,ye.A)({},bz.defaultData),JO(e.scene.environment,"usePhysics","gravity")),camera:null!==(i=xI(e.scene.ownerCamera))&&void 0!==i?i:zz.defaultData.camera,name:"Scene"}),children:[]}]);for(let e of t)e.id!==Gz.TRASH_CAN_ID&&n.move(ML,e.fi,e.id);let r=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((t,i)=>{var n;"DirectionalLight"===i.type?(i.penumbraSize=e.shared.penumbraSize[Math.min(r,2)],r+=1):"SpotLight"===i.type&&(i.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(void 0===i.physics||null===i.physics)&&"Instance"!==i.type&&(i.physics={},Object.assign(i.physics,UL.defaultData)),void 0!==i.physics&&null!==i.physics&&(i.physics.enabled=null!==(n=i.collision)&&void 0!==n?n:"visibility",delete i.collision)}),e.schema=99}}function vB(e){e.layers&&e.layers.forEach(e=>{"light"===e.type&&void 0===e.alphaOverride&&(e.alphaOverride=1)})}(e=>{e.defaultData=(0,ye.A)((0,ye.A)({states:new Vk,events:new Vk,timelineAnimations:new kk,visible:!0,raycastLock:!1,physics:UL.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"}},_z.identity),{},{cloner:null})})(Cz||(Cz={})),(e=>{e.defaultData=(0,ye.A)({type:"Empty"},Cz.defaultData)})(Mz||(Mz={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({type:"ParticleCollider"},Az.defaultData),Cz.defaultData)})(Tz||(Tz={})),(e=>{e.defaultData=(0,ye.A)({type:"Component"},Cz.defaultData)})(Pz||(Pz={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({type:"Particle"},Cz.defaultData),NL.defaultData)})(Dz||(Dz={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({type:"Mesh"},Cz.defaultData),HL.defaultData)})(Oz||(Oz={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)((0,ye.A)({},Cz.defaultData),_z.identity),{},{position:[0,0,IL.DefaultTargetOffset]},IL.defaultData)})(kz||(kz={})),(e=>{e.defaultData=function(e){return(0,ye.A)((0,ye.A)({},Cz.defaultData),FL.defaultData(e))},e.defaultDirectionalLightData=(0,ye.A)((0,ye.A)({},e.defaultData("DirectionalLight")),{},{position:[200,300,300],name:"Directional Light",intensity:.7})})(Iz||(Iz={})),(e=>{function t(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(;i<t.length;){let n=e?e[t[i]]:void 0;if(t.length===i+1)return n;if(!n)return;e=n.descendants,i+=1}}e.resolveWithDes=t,e.resolve=function(e,i){let n=t(e,i,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);if(n){let e=Object.keys(n);if(1===e.length&&"descendants"===e[0])return}return n}})(Rz||(Rz={})),(e=>{function t(e,t){return(0,ye.A)((0,ye.A)((0,ye.A)({},Cz.defaultData),t),{},{component:e,overrides:new Xk,physics:void 0,events:void 0,type:"Instance"})}e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"],e.ofComponent=t,e.fromComponentData=function(e){let i=_z.fromObject(e.data);return t(e.id,i)}})(Lz||(Lz={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)((0,ye.A)({type:"Page"},Cz.defaultData),{},{physics:(0,ye.A)((0,ye.A)({},UL.defaultData),{},{fusedBody:!1})},wz.defaultData),{},{camera:kz.defaultData}),e.isUIPage=function(e){return void 0!==e.uiScene}})(zz||(zz={})),(e=>{e.defaultCamera=(0,ye.A)({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:AL.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:UL.defaultData,states:new Vk,events:new Vk,timelineAnimations:new kk,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0}},IL.defaultData),e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject=(0,ye.A)((0,ye.A)((0,ye.A)({name:"Rectangle"},Cz.defaultData),Oz.defaultData),{},{geometry:uz.defaultData("RectangleGeometry"),material:iz.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultBooleanObject=(0,ye.A)((0,ye.A)((0,ye.A)({name:"Boolean"},Cz.defaultData),Oz.defaultData),{},{geometry:uz.defaultData("BooleanGeometry"),material:iz.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultShapeBlendObject=(0,ye.A)((0,ye.A)((0,ye.A)({name:"Shape Blend"},Cz.defaultData),Oz.defaultData),{},{geometry:uz.defaultData("ShapeBlendGeometry"),material:iz.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultTextObject=(0,ye.A)((0,ye.A)((0,ye.A)({name:"Text"},Cz.defaultData),Oz.defaultData),{},{geometry:uz.defaultData("TextGeometry"),material:iz.defaultTwoLayerData("phong","layer1","layer2")}),e.defaultInputObject=(0,ye.A)((0,ye.A)((0,ye.A)({name:"Input"},Cz.defaultData),Oz.defaultData),{},{geometry:uz.defaultData("InputGeometry"),material:iz.defaultTwoLayerData("phong","layer1","layer2")})})(Bz||(Bz={})),(e=>{e.newEmpty=function(e,t){let i={name:t};return"Mesh"===e.type?(i.geometry={},"material"in e&&(i.material={layers:new Xk}),"materials"in e&&(i.materials=e.materials.map(e=>({layers:new Xk})))):kL.is(e.type)&&(i.perspective={},i.orthographic={}),i},e.toOps=function(e,t){let i,n=[],r={orthographic:0,perspective:0,geometry:0};function a(e,t){for(let[i,r]of Object.entries(t.layers)){let{texture:t}=r,a=xe(r,Mm);if(void 0!==t&&Object.keys(t).length>0){let r={path:[...e,"layers",i,"texture"],props:t,type:0};n.push(r)}if(Object.keys(a).length>0){let t={path:[...e,"layers",i],props:a,type:0};n.push(t)}}}for(let[s,o]of Object.entries(t))if("name"!==s)if("cloner"===s)n.push(...LL.toOps(o,["cloner"]));else if("pathSnapping"===s)n.push({path:[s],props:{slide:o.slide,offset:o.offset},type:0});else if("material"===s)a(["material"],o);else if("materials"===s)for(let[e,t]of Object.entries(o))a(["materials",e],t);else if(0===r[s]){if("geometry"===s&&void 0!==o.extrusion){let e={path:[s,"extrusion"],props:o.extrusion,type:0};n.push(e),o=(0,ye.A)({},o),delete o.extrusion}if(Object.keys(o).length>0){let e={path:[s],props:o,type:0};n.push(e)}}else void 0===i&&(i={path:[],props:{},type:0},n.push(i)),i.props[s]=o;return n},e.patch=function(e,t){var i,n,r,a,s,o,l,c;if(void 0===t)return e;let h=(0,ye.A)({},e);if(Object.assign(h,_z.merge(h,t)),Object.assign(h,{pathSnapping:Object.assign({},h.pathSnapping,{slide:null!==(i=null!==(n=null===(r=t.pathSnapping)||void 0===r?void 0:r.slide)&&void 0!==n?n:null===(a=h.pathSnapping)||void 0===a?void 0:a.slide)&&void 0!==i?i:0,offset:null!==(s=null!==(o=null===(l=t.pathSnapping)||void 0===l?void 0:l.offset)&&void 0!==o?o:null===(c=h.pathSnapping)||void 0===c?void 0:c.offset)&&void 0!==s?s:0})}),kL.is(e.type)){var u,d;h.orthographic=(0,ye.A)({},h.orthographic),h.perspective=(0,ye.A)({},h.perspective);let e=t;void 0!==(null===(u=e.orthographic)||void 0===u?void 0:u.zoom)&&(h.orthographic.zoom=e.orthographic.zoom),void 0!==(null===(d=e.perspective)||void 0===d?void 0:d.zoom)&&(h.perspective.zoom=e.perspective.zoom),void 0!==e.isUpVectorFlipped&&(h.isUpVectorFlipped=e.isUpVectorFlipped),void 0!==e.targetOffset&&(h.targetOffset=e.targetOffset)}else if("Mesh"===e.type)"geometry"in t&&Object.assign(h,{geometry:hz.merge(h.geometry,t.geometry)}),(t.material||t.materials)&&(h=function(e,t){if(void 0===t)return e;let i=(0,ye.A)({},e);return"material"in i&&"material"in t&&t.material&&(i.material=bI(i.material,e=>{if("string"!=typeof e)for(let[i,n]of Object.entries(t.material.layers)){let t=e.layers.data(i);t&&tz.patch(t,n)}}).data),i.materials&&t.materials&&(i.materials=bI(i.materials,e=>{for(let r=0;r<i.materials.length;r++){let i=t.materials[r];if("string"!=typeof i)for(let[t,a]of Object.entries(i.layers)){var n;let i=null===(n=e[r])||void 0===n||null===(n=n.layers)||void 0===n?void 0:n.data(t);i&&tz.patch(i,a)}}}).data),i}(h,t)),h.cloner&&"cloner"in t&&Object.assign(h,{cloner:RL.merge(h.cloner,t.cloner)});else if("Empty"===e.type)h.cloner&&"cloner"in t&&Object.assign(h,{cloner:RL.merge(h.cloner,t.cloner)});else if(jL.is(e.type)){let e=t;void 0!==e.intensity&&(h.intensity=e.intensity),void 0!==e.color&&("string"==typeof e.color?h.color=e.color:h.color=SL.clone(e.color))}return h}})(jz||(jz={})),(e=>{e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0}})(Fz||(Fz={})),(e=>{e.defaultData={orbitControls:Fz.defaultData,playPage:ML,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((e,t)=>{let i=0,n=0;return t<5?n=-30:t<10&&(n=30),0===t||10===t||5===t?i=30:(4===t||11===t||9===t)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},videoStatic:{fps:60,mbps:150,ratio:1,duration:1e3,format:"mp4",imageFormat:"jpg",activeTimeline:null},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70,pixelRatioMobile:0,pixelRatioDesktop:0}},stopRaycast:!0,hdTransmission:!1}})(Nz||(Nz={})),(e=>{e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""}})(Uz||(Uz={})),(e=>{e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0}})(Vz||(Vz={})),(e=>{e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:(0,ye.A)({},Uz.defaultData),isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:Vz.defaultData}),e.generateSeed=()=>Math.round(1e5*Math.random())})(Wz||(Wz={})),(e=>{e.physicsEnabled=function(e){return void 0!==e.find(e=>"Page"===e.data.type&&e.data.globalPhysics.usePhysics)},e.traverseModuleInstances=function(e,t,i){e.scene.objects.traverseFrom(t,(t,n)=>{if("Instance"===n.type){var r;let a=null===(r=wB.getComponentData(e,n.component))||void 0===r?void 0:r.data;a&&i(t,n,a.events)}else i(t,n,n.events)})}})(Hz||(Hz={})),(e=>{function t(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=Bz.defaultMeshObject;t&&(n.push((0,ye.A)({},e.defaultLight)),n.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:r,children:[]})),n.push(...i);let a=new Uk;return a.push({fi:1,id:ML,data:(0,ye.A)((0,ye.A)({},zz.defaultData),{},{name:"Scene 1"}),children:n}),a}function i(t){return(0,ye.A)((0,ye.A)({},e.defaultData),{},{objects:nk(t,Uk.prototype)})}e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:Iz.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]},e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Nz.defaultData,styles:Wz.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Uk,publish:Nz.defaultData,styles:Wz.defaultData()}},e.emptyDataWithPage=function(){return{objects:t(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]),publish:Nz.defaultData,styles:Wz.defaultData()}},e.emptyData=function(){return{objects:new Uk,publish:(0,ye.A)({},Nz.defaultData),styles:Wz.defaultData()}},e.withObjs=i,e.withObj=function(e,t){return i([{id:e,data:t,children:[],fi:0}])}})(Gz||(Gz={})),(e=>{e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}}})(qz||(qz={})),(e=>{e.defaultData=e=>({url:e,name:"New Webhook",parametersSchemas:new Vk}),e.defaultParameterValueByType=e=>"number"===e?0:"boolean"!==e&&""})(Yz||(Yz={})),(e=>{e.defaultData=function(e){return{url:e,method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",name:"New API",headers:new Vk,queries:new Vk,autoStart:!0}}})(Xz||(Xz={})),(e=>{function t(e){return void 0!==e.textValue}function i(e){return"boolean"==typeof e}e.isTextValue=t,e.isNumber=function(e){return"number"==typeof e},e.isBoolean=i,e.typeOfVariable=function(e){return t(e)?"string":i(e)?"boolean":"number"},e.getDisplayedValue=function(t){var i;return e.isTextValue(t)?Array.isArray(t.textValue)?t.textValue.map(e=>{var i;return e.toString().padStart(null!==(i=t.padding)&&void 0!==i?i:2,"0")}).join(null!==(i=t.deliminator)&&void 0!==i?i:":")+(void 0!==t.suffix?" "+t.suffix:""):t.textValue.toString():e.isBoolean(t)?t?"True":"False":e.isNumber(t)?parseFloat(t.toFixed(3)).toString():t.toString()}})(Qz||(Qz={})),(e=>{e.all=["images","videos","colors","audios","particles","fonts","materials","variables"]})(Kz||(Kz={})),(e=>{e.all=[...Kz.all,"components"]})(Zz||(Zz={})),(e=>{e.defaultData=function(){return{images:new kk,videos:new kk,colors:new kk,audios:new kk,particles:new kk,fonts:new kk,materials:new kk,components:new kk,variables:new kk,userAPIs:new kk,userWebhooks:new kk,timelineAnimations:new kk}}})(Jz||(Jz={})),(e=>{e.defaultData=function(){return{images:new kk,videos:new kk,colors:new kk,audios:new kk,particles:new kk,fonts:new kk,materials:new kk,components:new kk,variables:new kk,userAPIs:new kk,userWebhooks:new kk,timelineAnimations:new kk}}})($z||($z={})),(e=>{e.defaultColors=function(){let e={"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}};return nk(e,kk.prototype)},e.defaultImages=function(){return nk({},kk.prototype)},e.emptyData=function(){return{catelogs:new kk,materials:new kk,images:new kk,videos:new kk,colors:new kk,timelineAnimations:new kk,audios:new kk,particles:new kk,fonts:new kk,variables:new Vk,userAPIs:new kk,userWebhooks:new kk,lib:$z.defaultData()}},e.defaultVariables=function(e){switch(e){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let t=[0,0,0];return{name:"Time",value:{textValue:t,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:t,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",e)}},e.getFormattedTimerTime=function(e,t){if("HH:mm:ss"===t.format){let t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60);return{textValue:[t,i,Math.round(e-3600*t-60*i)]}}if("mm:ss"===t.format){let t=Math.floor(e/60);return{textValue:[t,Math.round(e-60*t)]}}return e="number"===t.format?Math.round(e):Math.round(1e3*e)/1e3}})(eB||(eB={})),(e=>{e.list=["idle","move","jump","run"]})(tB||(tB={})),(e=>{e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25b2"],["rotPosY","\u25c0"],["rotNegX","\u25bc"],["rotNegY","\u25b6"],["jump","Space"],["run","\u21e7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Vk,move:new Vk,jump:new Vk,run:new Vk},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:_L.fromHexAndA(3728051,1)}}})(iB||(iB={}));var yB=180/Math.PI;function bB(e){e.rotation=e.rotation.slice(0,3).map(e=>e*yB)}function xB(e){var t,i,n;bB(e),"Page"===e.type&&bB(e.camera),null===(t=e.states)||void 0===t||t.forEach(e=>{void 0===e.rotation||null===e.rotation||(e.rotation=e.rotation.slice(0,3).map(e=>e*yB))});let r=e.geometry;r&&"SphereGeometry"===r.type&&(r.thetaLength=(null!==(i=r.thetaLength)&&void 0!==i?i:180)*yB),r&&"TorusGeometry"===r.type&&(r.arc=r.arc*yB),r&&"PathGeometry"===r.type&&(r.extrusion.angle*=yB,r.extrusion.twist*=yB),"Mesh"===e.type&&"TextGeometry"===e.geometry.type&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(xI(e.events))&&(null===(n=e.events)||void 0===n||n.forEach(e=>{("MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"KeyPress"===e.type||"Collision"===e.type||"Trigger"===e.type)&&(e.runMode=e.toggle?"Toggle":"Repeat")}))}var wB,AB,SB,_B,EB,CB,MB,TB,PB,DB,OB,kB,IB,RB,LB,zB,BB,jB,FB,NB,UB=119;function VB(e,t){t(e.data);for(let i of e.children)VB(i,t)}function WB(e){var t;let i=null!==(t=e.schema)&&void 0!==t?t:104;i!==UB&&(i<105&&(VB(e.asset,xB),e.schema=105),i<118&&(VB(e.asset,HB),e.schema=118))}function HB(e){e.timelineAnimations=nk({},kk.prototype)}function GB(e){var t;let i=null!==(t=e.schema)&&void 0!==t?t:0;if(i!==UB){console.warn("updating from ",i,"to ",UB),gB(e,i),i<100&&(void 0===e.scene.publish.joystickSizeAndXYOffset&&(e.scene.publish.joystickSizeAndXYOffset=Nz.defaultData.joystickSizeAndXYOffset),e.schema=100),i<101&&(sB(e,vB),aB(e,vB),e.schema=101),i<102&&(function(e){e.scene.objects.traverse((e,t)=>{let i=t.geometry;i&&"PathGeometry"===i.type&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,"Custom"===i.extrusion.shape.type&&(i.extrusion.shape.shapeQuality="low"))})}(e),e.schema=102),i<104&&(e.shared.catelogs=new kk,e.shared.lib=$z.defaultData(),e.schema=104),i<105&&(function(e){e.shared.variables=nk({},kk.prototype)}(e),e.scene.objects.traverse((e,t)=>{xB(t)}),e.schema=105);for(let t of Object.values(e.shared.lib.components))WB(t);i<106&&(function(e){let t=xI(e.shared.variables);e.shared.variables=nk(Object.entries(null!==t&&void 0!==t?t:{}).map((e,t)=>{let[i,n]=e;return{fi:t,id:i,data:n}}),Vk.prototype)}(e),e.schema=106),i<107&&(e.shared.lib.variables=$z.defaultData().variables,e.schema=107),i<109&&(function(e){e.shared.particles=nk({},kk.prototype),e.shared.lib&&(e.shared.lib.particles=$z.defaultData().particles)}(e),e.schema=109),i<110&&(function(e){e.scene.objects.traverse((e,t)=>{"Particle"===t.type&&"number"==typeof t.renderMaterial.size&&Object.assign(t.renderMaterial,{size:[t.renderMaterial.size,t.renderMaterial.size]})})}(e),e.schema=110),i<111&&(e.scene.objects.traverse((e,t)=>{!function(e){var t;Array.isArray(xI(e.events))&&(null===(t=e.events)||void 0===t||t.forEach(e=>{"disabled"in e||(e.disabled=!1),("MouseDown"===e.type||"MouseUp"===e.type||"MousePress"===e.type)&&(e.mode=e.mode||"Object")}))}(t)}),e.schema=111),i<112&&(function(e){e.scene.objects.traverse((e,t)=>{"Page"===t.type&&(t.postprocessing.depthOfField.focusDistance=100,t.postprocessing.depthOfField.focalLength=20,t.postprocessing.depthOfField.bokehScale=5)})}(e),e.schema=112),i<113&&(function(e){e.scene.objects.traverse((e,t)=>{var i;!1!==Array.isArray(xI(t.events))&&(null===(i=t.events)||void 0===i||i.forEach(e=>{var t,i,n,r,a,s,o,l,c;let h=e.runMode;"MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type||"Collision"===e.type||"Trigger"===e.type?null===(t=e.actions)||void 0===t||t.forEach(e=>{"Transition"===e.type&&(e.runMode=null!==h&&void 0!==h?h:"Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle"===h?"Toggle":"Normal")}):"MouseHover"===e.type||"MousePress"===e.type||"KeyPress"===e.type?null===(i=e.actions)||void 0===i||i.forEach(e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")}):"GameControl"===e.type?(delete e.actions,Object.keys(e.gameActions).forEach(t=>{var i;null===(i=e.gameActions[t])||void 0===i||i.forEach(e=>{"Transition"===e.type&&(e.runMode="Repeat"),"Animation"===e.type&&(e.runMode="Normal")})})):"DragDrop"===e.type?(delete e.actions,null!==(n=e.dragDropActions)&&void 0!==n&&null!==(n=n.drag)&&void 0!==n&&n.forEach(e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")}),null===(r=e.dragDropActions)||void 0===r||null===(r=r.drop)||void 0===r||r.forEach(e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")})):"Resize"===e.type?(delete e.actions,null===(a=e.breakpoints)||void 0===a||a.forEach(e=>{var t;null===(t=e.actions)||void 0===t||t.forEach(e=>{("Transition"===e.type||"Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Toggle")})})):"Start"===e.type?null===(s=e.actions)||void 0===s||s.forEach(e=>{"Transition"===e.type&&(e.runMode="Once"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")}):"VariableChange"===e.type||"Scroll"===e.type?null===(o=e.actions)||void 0===o||o.forEach(e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")}):"Conditional"===e.type&&(delete e.actions,null!==(l=e.inActions)&&void 0!==l&&l.forEach(e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")}),null===(c=e.outActions)||void 0===c||c.forEach(e=>{"Transition"===e.type&&(e.runMode="Repeat"),("Animation"===e.type||"SwitchCamera"===e.type)&&(e.runMode="Normal")}))}))})}(e),e.schema=113),i<114&&(void 0===e.scene.publish.settings.web.imageQuality&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),i<115&&(function(e){e.shared.userAPIs=nk({},kk.prototype),e.shared.userWebhooks=nk({},kk.prototype),e.shared.lib&&(e.shared.lib.userAPIs=$z.defaultData().userAPIs,e.shared.lib.userWebhooks=$z.defaultData().userWebhooks)}(e),e.schema=115),i<116&&(function(e){void 0===e.scene.publish.settings.videoStatic&&(e.scene.publish.settings.videoStatic=Nz.defaultData.settings.videoStatic)}(e),e.schema=116),i<117&&(void 0===e.scene.publish.settings.web.pixelRatioMobile&&(e.scene.publish.settings.web.pixelRatioMobile=0),void 0===e.scene.publish.settings.web.pixelRatioDesktop&&(e.scene.publish.settings.web.pixelRatioDesktop=0),e.schema=117),i<118&&(e.shared.timelineAnimations=nk({},kk.prototype),e.scene.objects.traverse((e,t)=>{HB(t)}),e.schema=118),i<119&&(e.scene.publish.settings.videoStatic.format=wB.defaultData.scene.publish.settings.videoStatic.format,e.scene.publish.settings.videoStatic.imageFormat=wB.defaultData.scene.publish.settings.videoStatic.imageFormat,e.schema=119)}}function qB(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null!==e[0].index,n=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),a={},s={},o=e[0].morphTargetsRelative,l=new Cb,c=0;for(let h=0;h<e.length;++h){let u=e[h],d=0;if(i!==(null!==u.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in u.attributes){if(!n.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[e]&&(a[e]=[]),a[e].push(u.attributes[e]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(o!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in u.morphAttributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[e]&&(s[e]=[]),s[e].push(u.morphAttributes[e])}if(t){let e;if(i)e=u.index.count;else{if(void 0===u.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;e=u.attributes.position.count}l.addGroup(c,e,h),c+=e}}if(i){let t=0,i=[];for(let n=0;n<e.length;++n){let r=e[n].index;for(let e=0;e<r.count;++e)i.push(r.getX(e)+t);t+=e[n].attributes.position.count}l.setIndex(i)}for(let h in a){let e=YB(a[h]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,e)}for(let h in s){let e=s[h][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let t=0;t<e;++t){let e=[];for(let n=0;n<s[h].length;++n)e.push(s[h][n][t]);let i=YB(e);if(!i)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(i)}}return l}function YB(e){let t,i,n,r=0;for(let o=0;o<e.length;++o){let a=e[o];if(a.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===i&&(i=a.itemSize),i!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=a.normalized),n!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=a.array.length}let a=new t(r),s=0;for(let o=0;o<e.length;++o)a.set(e[o].array,s),s+=e[o].array.length;return new mb(a,i,n)}(e=>{e.defaultData={schema:UB,scene:Gz.defaultData,frames:(new kk).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",qz.defaultData),shared:(0,ye.A)((0,ye.A)({},eB.emptyData()),{},{colors:eB.defaultColors()})},e.emptyDataForImports=function(){let e=Gz.emptyDataWithPage();return{schema:UB,scene:e,frames:(new kk).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",qz.defaultData),shared:(0,ye.A)((0,ye.A)({},eB.emptyData()),{},{colors:eB.defaultColors(),images:eB.defaultImages()})}},e.emptyData=function(){return{schema:UB,scene:Gz.emptyDataWithPage(),frames:(new kk).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",qz.defaultData),shared:eB.emptyData()}},e.clipboard2dData=function(){return{schema:UB,scene:Gz.emptyData(),frames:new kk,shared:eB.emptyData()}},e.collabHelper=(0,ye.A)((0,ye.A)({},Yk),{},{updateSchema(e){var t,i;return(null!==(t=e.schema)&&void 0!==t?t:0)<UB?bI(e,GB):(null!==(i=e.schema)&&void 0!==i?i:0)-UB}}),e.updateSchemaDirectly=function(t){let i=e.collabHelper.updateSchema(t);return"number"==typeof i?0===i?t:null:i.data},e.withoutLib=function(e){return(0,ye.A)((0,ye.A)({},e),{},{shared:(0,ye.A)((0,ye.A)({},e.shared),{},{lib:$z.defaultData()})})},e.getComponentData=function(e,t){let i=e.scene.objects.get(t);if(i&&"Component"===i.data.type)return i;{let i=e.shared.lib.components[t];if(i)return i.asset}},e.hasSensitiveData=function(e){let t=Object.values(e.shared.userAPIs);for(let i of t){let e=i.headers;for(let t of e)if("authorization"===t.data.key.toLowerCase()&&""!==t.data.value)return!0}return!1}})(wB||(wB={})),(e=>{e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"}})(AB||(AB={})),(e=>{e.is=function(e){return!0}})(SB||(SB={})),(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]},e.merge=function(e,t){var i,n,r,a;return{position:null!==(i=null===t||void 0===t?void 0:t.position)&&void 0!==i?i:e.position,rotation:null!==(n=null===t||void 0===t?void 0:t.rotation)&&void 0!==n?n:e.rotation,scale:null!==(r=null===t||void 0===t?void 0:t.scale)&&void 0!==r?r:e.scale,shear:null!==(a=null===t||void 0===t?void 0:t.shear)&&void 0!==a?a:e.shear}},e.diff=function(e,t){return ik({position:yL.isEqual(e.position,t.position)?void 0:t.position,rotation:e.rotation===t.rotation?void 0:t.rotation,scale:yL.isEqual(e.scale,t.scale)?void 0:t.scale,shear:e.shear&&t.shear&&yL.isEqual(e.shear,t.shear)?void 0:t.shear})}})(_B||(_B={})),(e=>{e.defaultData={horizontalConstraint:0,verticalConstraint:0}})(EB||(EB={})),(e=>{e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8}})(CB||(CB={})),(e=>{e.defaultData={opacity:1,fill:{color:_L.fromHexAndA(TL,1),enabled:!0},stroke:{color:_L.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:_L.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:_L.from0to1([0,0,0,1]),enabled:!1,spread:0}}})(MB||(MB={})),(e=>{e.newEmpty=function(e,t){return{name:t}},e.patch=function(e,t){if(void 0===t)return e;let i=(0,ye.A)({},e);return Object.assign(i,_B.merge(i,t)),i=function(e,t){if(void 0===t)return e;let i=(0,ye.A)({},e),n=["width","height","cornerRadius"];for(let r of n)r in i&&r in t&&void 0!==t[r]&&Object.assign(i,{[r]:t[r]});return i}(i,t),i=function(e,t){if(void 0===t)return e;let i=(0,ye.A)({},e);return"fill"in i&&"fill"in t&&void 0!==t.fill&&Object.assign(i,{fill:(0,ye.A)((0,ye.A)({},i.fill),t.fill)}),"stroke"in i&&"stroke"in t&&void 0!==t.stroke&&Object.assign(i,{stroke:(0,ye.A)((0,ye.A)({},i.stroke),t.stroke)}),"layerBlur"in i&&"layerBlur"in t&&void 0!==t.layerBlur&&Object.assign(i,{layerBlur:(0,ye.A)((0,ye.A)({},i.layerBlur),t.layerBlur)}),"backgroundBlur"in i&&"backgroundBlur"in t&&void 0!==t.backgroundBlur&&Object.assign(i,{backgroundBlur:(0,ye.A)((0,ye.A)({},i.backgroundBlur),t.backgroundBlur)}),"dropShadow"in i&&"dropShadow"in t&&void 0!==t.dropShadow&&Object.assign(i,{dropShadow:(0,ye.A)((0,ye.A)({},i.dropShadow),t.dropShadow)}),"innerShadow"in i&&"innerShadow"in t&&void 0!==t.innerShadow&&Object.assign(i,{innerShadow:(0,ye.A)((0,ye.A)({},i.innerShadow),t.innerShadow)}),i}(i,t),i},e.toOps=function(e,t){let i,n=[];for(let[r,a]of Object.entries(t))"name"!==r&&(void 0===i&&(i={path:[],props:{},type:0},n.push(i)),i.props[r]=a);return n}})(TB||(TB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)((0,ye.A)({},_B.defaultData),EB.defaultData),{},{states:new Vk,events:new Vk,visible:!0,raycastLock:!1})})(PB||(PB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},PB.defaultData),MB.defaultData)})(DB||(DB={})),(e=>{e.defaultData={cornerRadius:[0,0,0,0]}})(OB||(OB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},DB.defaultData),{},{type:"ellipse2d",width:100,height:100,name:"Ellipse"})})(kB||(kB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)((0,ye.A)({},DB.defaultData),OB.defaultData),{},{type:"rectangle2d",width:100,height:100,name:"Rectangle"})})(IB||(IB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},DB.defaultData),{},{type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})})(RB||(RB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},DB.defaultData),{},{type:"path2d",path:"",name:"Path"})})(LB||(LB={})),(e=>{e.is=function(e){return"ellipse2d"===e.type||"rectangle2d"===e.type||"text2d"===e.type||"vector2d"===e.type||"path2d"===e.type}})(zB||(zB={})),(e=>{e.defaultData=(0,ye.A)((0,ye.A)({},PB.defaultData),{},{name:"Group",type:"group2d"})})(BB||(BB={})),(e=>{e.defaultData=()=>(0,ye.A)((0,ye.A)((0,ye.A)((0,ye.A)({},PB.defaultData),OB.defaultData),MB.defaultData),{},{name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:_L.fromHexAndA(4737101,1),enabled:!0},stroke:{color:_L.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}})})(jB||(jB={})),(e=>{e.defaultData=function(e){switch(e){case"rectangle2d":case"vector2d":return(0,ye.A)({},IB.defaultData);case"ellipse2d":return(0,ye.A)({},kB.defaultData);case"text2d":return(0,ye.A)({},RB.defaultData);case"path2d":return(0,ye.A)({},LB.defaultData);case"frame2d":return(0,ye.A)({},jB.defaultData());case"group2d":return(0,ye.A)({},BB.defaultData)}},e.getPivot=function(e){return"width"in e&&"height"in e?["number"==typeof e.width?.5*e.width:0,"number"==typeof e.height?.5*e.height:0]:[0,0]},e.isResizeable=function(e){return"rectangle2d"===e.type||"ellipse2d"===e.type||"text2d"===e.type||"frame2d"===e.type},e.isAutoLayoutable=function(e){return"frame2d"===e.type&&void 0!==e.autoLayout},e.hasCorners=function(e){return"rectangle2d"===e.type||"frame2d"===e.type}})(FB||(FB={})),(e=>{e.defaultData={name:"UI",type:"scene2d",objects:new Uk},e.emptyData=function(){return{type:"scene2d",objects:new Uk}}})(NB||(NB={}));var XB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},QB={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},KB=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ZB={CSS:{},springs:{}};function JB(e,t,i){return Math.min(Math.max(e,t),i)}function $B(e,t){return e.indexOf(t)>-1}function ej(e,t){return e.apply(null,t)}var tj={arr:function(e){return Array.isArray(e)},obj:function(e){return $B(Object.prototype.toString.call(e),"Object")},pth:function(e){return tj.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||tj.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return tj.hex(e)||tj.rgb(e)||tj.hsl(e)},key:function(e){return!XB.hasOwnProperty(e)&&!QB.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function ij(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function nj(e,t){var i=ij(e),n=JB(tj.und(i[0])?1:i[0],.1,100),r=JB(tj.und(i[1])?100:i[1],.1,100),a=JB(tj.und(i[2])?10:i[2],.1,100),s=JB(tj.und(i[3])?0:i[3],.1,100),o=Math.sqrt(r/n),l=a/(2*Math.sqrt(r*n)),c=l<1?o*Math.sqrt(1-l*l):0,h=l<1?(l*o-s)/c:-s+o;function u(e){var i=t?t*e/1e3:e;return i=l<1?Math.exp(-i*l*o)*(1*Math.cos(c*i)+h*Math.sin(c*i)):(1+h*i)*Math.exp(-i*o),0===e||1===e?e:1-i}return t?u:function(){var t=ZB.springs[e];if(t)return t;for(var i=1/6,n=0,r=0;;)if(1===u(n+=i)){if(++r>=16)break}else r=0;var a=n*i*1e3;return ZB.springs[e]=a,a}}function rj(e){return void 0===e&&(e=10),function(t){return Math.ceil(JB(t,1e-6,1)*e)*(1/e)}}var aj=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function n(e){return 3*e}function r(e,r,a){return((t(r,a)*e+i(r,a))*e+n(r))*e}function a(e,r,a){return 3*t(r,a)*e*e+2*i(r,a)*e+n(r)}return function(t,i,n,s){if(0<=t&&t<=1&&0<=n&&n<=1){var o=new Float32Array(11);if(t!==i||n!==s)for(var l=0;l<11;++l)o[l]=r(l*e,t,n);return function(e){return t===i&&n===s||0===e||1===e?e:r(c(e),i,s)}}function c(i){for(var s=0,l=1;10!==l&&o[l]<=i;++l)s+=e;--l;var c=s+(i-o[l])/(o[l+1]-o[l])*e,h=a(c,t,n);return h>=.001?function(e,t,i,n){for(var s=0;s<4;++s){var o=a(t,i,n);if(0===o)return t;t-=(r(t,i,n)-e)/o}return t}(i,c,t,n):0===h?c:function(e,t,i,n,a){var s,o,l=0;do{(s=r(o=t+(i-t)/2,n,a)-e)>0?i=o:t=o}while(Math.abs(s)>1e-7&&++l<10);return o}(i,s,s+e,t,n)}}}(),sj=function(){var e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var i=JB(e,1,10),n=JB(t,.1,2);return function(e){return 0===e||1===e?e:-i*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/n)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(function(e,i){t[e]=function(){return function(e){return Math.pow(e,i+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(e,t){return function(i){return 1-n(e,t)(1-i)}},e["easeInOut"+i]=function(e,t){return function(i){return i<.5?n(e,t)(2*i)/2:1-n(e,t)(-2*i+2)/2}}}),e}();function oj(e,t){if(tj.fnc(e))return e;var i=e.split("(")[0],n=sj[i],r=ij(e);switch(i){case"spring":return nj(e,t);case"cubicBezier":return ej(aj,r);case"steps":return ej(rj,r);default:return ej(n,r)}}function lj(e){try{return document.querySelectorAll(e)}catch(t){return}}function cj(e,t){for(var i=e.length,n=arguments.length>=2?arguments[1]:void 0,r=[],a=0;a<i;a++)if(a in e){var s=e[a];t.call(n,s,a,e)&&r.push(s)}return r}function hj(e){return e.reduce(function(e,t){return e.concat(tj.arr(t)?hj(t):t)},[])}function uj(e){return tj.arr(e)?e:(tj.str(e)&&(e=lj(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function dj(e,t){return e.some(function(e){return e===t})}function pj(e){var t={};for(var i in e)t[i]=e[i];return t}function fj(e,t){var i=pj(e);for(var n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function mj(e,t){var i=pj(e);for(var n in t)i[n]=tj.und(e[n])?t[n]:e[n];return i}function gj(e){return tj.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):tj.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1)"}(e):tj.hsl(e)?function(e){var t,i,n,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(r[1],10)/360,s=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100,l=r[4]||1;function c(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(0==s)t=i=n=o;else{var h=o<.5?o*(1+s):o+s-o*s,u=2*o-h;t=c(u,h,a+1/3),i=c(u,h,a),n=c(u,h,a-1/3)}return"rgba("+255*t+","+255*i+","+255*n+","+l+")"}(e):void 0}function vj(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function yj(e,t){return tj.fnc(e)?e(t.target,t.id,t.total):e}function bj(e,t){return e.getAttribute(t)}function xj(e,t,i){if(dj([i,"deg","rad","turn"],vj(t)))return t;var n=ZB.CSS[t+i];if(!tj.und(n))return n;var r=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(r),r.style.position="absolute",r.style.width=100+i;var s=100/r.offsetWidth;a.removeChild(r);var o=s*parseFloat(t);return ZB.CSS[t+i]=o,o}function wj(e,t,i){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return i?xj(e,r,i):r}}function Aj(e,t){return tj.dom(e)&&!tj.inp(e)&&(bj(e,t)||tj.svg(e)&&e[t])?"attribute":tj.dom(e)&&dj(KB,t)?"transform":tj.dom(e)&&"transform"!==t&&wj(e,t)?"css":null!=e[t]?"object":void 0}function Sj(e){if(tj.dom(e)){for(var t,i=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,r=new Map;t=n.exec(i);)r.set(t[1],t[2]);return r}}function _j(e,t,i,n){var r=$B(t,"scale")?1:0+function(e){return $B(e,"translate")||"perspective"===e?"px":$B(e,"rotate")||$B(e,"skew")?"deg":void 0}(t),a=Sj(e).get(t)||r;return i&&(i.transforms.list.set(t,a),i.transforms.last=t),n?xj(e,a,n):a}function Ej(e,t,i,n){switch(Aj(e,t)){case"transform":return _j(e,t,n,i);case"css":return wj(e,t,i);case"attribute":return bj(e,t);default:return e[t]||0}}function Cj(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var n=vj(e)||0,r=parseFloat(t),a=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return r+a+n;case"-":return r-a+n;case"*":return r*a+n}}function Mj(e,t){if(tj.col(e))return gj(e);if(/\s/g.test(e))return e;var i=vj(e),n=i?e.substr(0,e.length-i.length):e;return t?n+t:n}function Tj(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Pj(e){for(var t,i=e.points,n=0,r=0;r<i.numberOfItems;r++){var a=i.getItem(r);r>0&&(n+=Tj(t,a)),t=a}return n}function Dj(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*bj(e,"r")}(e);case"rect":return function(e){return 2*bj(e,"width")+2*bj(e,"height")}(e);case"line":return function(e){return Tj({x:bj(e,"x1"),y:bj(e,"y1")},{x:bj(e,"x2"),y:bj(e,"y2")})}(e);case"polyline":return Pj(e);case"polygon":return function(e){var t=e.points;return Pj(e)+Tj(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Oj(e,t){var i=t||{},n=i.el||function(e){for(var t=e.parentNode;tj.svg(t)&&tj.svg(t.parentNode);)t=t.parentNode;return t}(e),r=n.getBoundingClientRect(),a=bj(n,"viewBox"),s=r.width,o=r.height,l=i.viewBox||(a?a.split(" "):[0,0,s,o]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:o/l[3]}}function kj(e,t){function i(i){void 0===i&&(i=0);var n=t+i>=1?t+i:0;return e.el.getPointAtLength(n)}var n=Oj(e.el,e.svg),r=i(),a=i(-1),s=i(1);switch(e.property){case"x":return(r.x-n.x)*n.w;case"y":return(r.y-n.y)*n.h;case"angle":return 180*Math.atan2(s.y-a.y,s.x-a.x)/Math.PI}}function Ij(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=Mj(tj.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(i)?n.match(i).map(Number):[0],strings:tj.str(e)||t?n.split(i):[]}}function Rj(e){return cj(e?hj(tj.arr(e)?e.map(uj):uj(e)):[],function(e,t,i){return i.indexOf(e)===t})}function Lj(e){var t=Rj(e);return t.map(function(e,i){return{target:e,id:i,total:t.length,transforms:{list:Sj(e)}}})}function zj(e,t){var i=pj(t);if(/^spring/.test(i.easing)&&(i.duration=nj(i.easing)),tj.arr(e)){var n=e.length;2===n&&!tj.obj(e[0])?e={value:e}:tj.fnc(t.duration)||(i.duration=t.duration/n)}var r=tj.arr(e)?e:[e];return r.map(function(e,i){var n=tj.obj(e)&&!tj.pth(e)?e:{value:e};return tj.und(n.delay)&&(n.delay=i?0:t.delay),tj.und(n.endDelay)&&(n.endDelay=i===r.length-1?t.endDelay:0),n}).map(function(e){return mj(e,i)})}function Bj(e,t){var i=[],n=t.keyframes;for(var r in n&&(t=mj(function(e){for(var t=cj(hj(e.map(function(e){return Object.keys(e)})),function(e){return tj.key(e)}).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),i={},n=function(n){var r=t[n];i[r]=e.map(function(e){var t={};for(var i in e)tj.key(i)?i==r&&(t.value=e[i]):t[i]=e[i];return t})},r=0;r<t.length;r++)n(r);return i}(n),t)),t)tj.key(r)&&i.push({name:r,tweens:zj(t[r],e)});return i}function jj(e,t){var i;return e.tweens.map(function(n){var r=function(e,t){var i={};for(var n in e){var r=yj(e[n],t);tj.arr(r)&&(r=r.map(function(e){return yj(e,t)}),1===r.length&&(r=r[0])),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(n,t),a=r.value,s=tj.arr(a)?a[1]:a,o=vj(s),l=Ej(t.target,e.name,o,t),c=i?i.to.original:l,h=tj.arr(a)?a[0]:c,u=vj(h)||vj(l),d=o||u;return tj.und(s)&&(s=c),r.from=Ij(h,d),r.to=Ij(Cj(s,h),d),r.start=i?i.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=oj(r.easing,r.duration),r.isPath=tj.pth(a),r.isColor=tj.col(r.from.original),r.isColor&&(r.round=1),i=r,r})}var Fj={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,n,r){if(n.list.set(t,i),t===n.last||r){var a="";n.list.forEach(function(e,t){a+=t+"("+e+") "}),e.style.transform=a}}};function Nj(e,t){Lj(e).forEach(function(e){for(var i in t){var n=yj(t[i],e),r=e.target,a=vj(n),s=Ej(r,i,a,e),o=Cj(Mj(n,a||vj(s)),s),l=Aj(r,i);Fj[l](r,i,o,e.transforms,!0)}})}function Uj(e,t){return cj(hj(e.map(function(e){return t.map(function(t){return function(e,t){var i=Aj(e.target,t.name);if(i){var n=jj(t,e),r=n[n.length-1];return{type:i,property:t.name,animatable:e,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}(e,t)})})),function(e){return!tj.und(e)})}function Vj(e,t){var i=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},r={};return r.duration=i?Math.max.apply(Math,e.map(function(e){var t,i,r,a;let s=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,o=null!==(i=e.pingPongDelayCorrection)&&void 0!==i?i:0,l=null!==(r=e.pingPongEndDelayCorrection)&&void 0!==r?r:0;return n(e)+s+o+l+e.duration*(null!==(a=e.loop)&&void 0!==a?a:1)})):t.duration,r.delay=i?Math.min.apply(Math,e.map(function(e){var t,i;let r=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,a=null!==(i=e.pingPongDelayCorrection)&&void 0!==i?i:0;return n(e)+r+a+e.delay})):t.delay,r.endDelay=i?r.duration-Math.max.apply(Math,e.map(function(e){var t,i,r,a;let s=null!==(t=e.startOnceDelay)&&void 0!==t?t:0,o=null!==(i=e.pingPongDelayCorrection)&&void 0!==i?i:0,l=null!==(r=e.pingPongEndDelayCorrection)&&void 0!==r?r:0;return n(e)+s+o+e.duration*(null!==(a=e.loop)&&void 0!==a?a:1)-e.endDelay-l})):t.endDelay,r}var Wj=0;var Hj,Gj=[],qj=[],Yj=function(){let e=0,t=!0;function i(e){let n=Gj.length;if(n){let r=0;for(;r<n;){let t=Gj[r];t.paused?(Gj.splice(r,1),n--):(t.tick(e),r++)}t&&(Hj=requestAnimationFrame(i))}else Hj&&(cancelAnimationFrame(Hj),Hj=null)}return{get isUsingInternalRaf(){return t},set isUsingInternalRaf(e){t=e},play:function(){e=performance.now(),Hj=requestAnimationFrame(i)},update:function(t){e+=t,i(e)}}}();function Xj(e){void 0===e&&(e={});var t,i,n=0,r=0,a=0,s=0,o=null;function l(e){var t=window.Promise&&new Promise(function(e){return o=e});return e.finished=t,t}var c=function(e){var t=fj(XB,e),i=fj(QB,e),n=Bj(i,e),r=Lj(e.targets),a=Uj(r,n),s=Vj(a,i),o=Wj;return Wj++,mj(t,{id:o,children:[],animatables:r,animations:a,duration:s.duration,delay:s.delay,endDelay:s.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}(e);l(c);function h(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,i.forEach(function(e){(1===e.loop||e.loop%2===0)&&(e.reversed=c.reversed)})}function u(e){return c.reversed?c.duration-e:e}function d(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(c.reversed?t.seek(t.duration*t.loop-(e-t.timelineOffset-t.pingPongDelayCorrection),i):t.seek(e-t.timelineOffset-t.startOnceDelay-t.pingPongDelayCorrection,i))}function p(e){var t=0,i=c.animations,n=i.length;for("alternate"!==c.direction&&"alternate"===(null===(r=c.parent)||void 0===r?void 0:r.direction)?!1===(null===(a=c.parent)||void 0===a?void 0:a.rewind)&&!0===c.reversePlayback&&!1===c.rewind&&(e=null!==(s=c.parent)&&void 0!==s&&s.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-e:c.duration+c.delay-c.endDelay-e):g(!1,null===(o=c.parent)||void 0===o?void 0:o.rewind,c.rewind,null===(l=c.parent)||void 0===l?void 0:l.reversePlayback,c.reversePlayback)&&(e=null!==(h=c.parent)&&void 0!==h&&h.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-e:c.duration+c.delay-c.endDelay-e);t<n;){var r,a,s,o,l,h,u,d=i[t],p=d.animatable,f=d.tweens,m=f.length-1,v=f[m];let n;m&&(v=cj(f,function(t){return e<t.end})[0]||v),n=null!==(u=c.parent)&&void 0!==u&&u.reversed&&"alternate"===c.direction?JB(e-v.start-v.endDelay,0,v.duration)/v.duration:JB(e-v.start-v.delay,0,v.duration)/v.duration;for(var y=isNaN(n)?1:v.easing(n),b=v.to.strings,x=v.round,w=[],A=v.to.numbers.length,S=void 0,_=0;_<A;_++){var E,C,M,T=void 0;let e,t;"alternate"!==c.direction?!1===(null===(E=c.parent)||void 0===E?void 0:E.rewind)&&!0===c.reversePlayback&&!1===c.rewind?(e=v.to.numbers[_],t=v.from.numbers[_]||0):(t=v.to.numbers[_],e=v.from.numbers[_]||0):g(!0,null===(C=c.parent)||void 0===C?void 0:C.rewind,c.rewind,null===(M=c.parent)||void 0===M?void 0:M.reversePlayback,c.reversePlayback)?(e=v.to.numbers[_],t=v.from.numbers[_]||0):(t=v.to.numbers[_],e=v.from.numbers[_]||0),T=v.isPath?kj(v.value,y*t):e+y*(t-e),x&&(v.isColor&&_>2||(T=Math.round(T*x)/x)),w.push(T)}var P=b.length;if(P){S=b[0];for(var D=0;D<P;D++){b[D];var O=b[D+1],k=w[D];isNaN(k)||(S+=O?k+O:k+" ")}}else S=w[0];Fj[d.type](p.target,d.property,S,p.transforms),d.currentValue=S,t++}}function f(e){c[e]&&!c.passThrough&&c[e](c)}let m={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function g(e,t,i,n,r){return m[e<<4|t<<3|i<<2|n<<1|r]}function v(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=c.duration;let m=c.delay,g=a-c.endDelay;(null===(t=c.parent)||void 0===t?void 0:t.reversed)&&"alternate"===c.direction&&(m=c.endDelay,g=a-c.delay);var v=u(e);if(c.progress=JB(v/a*100,0,100),r||(c.reversePlayback=v<c.currentTime),s&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c.reversed)for(var n=s;n--;)d(e,i[n],t);else for(var r=0;r<s;r++)d(e,i[r],t)}(v,r),!c.began&&v>=m&&(c.began=!0),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,f("loopBegin")),(c.reversed||v>=0)&&v<=m&&0!==c.currentTime&&(p(0),f("change")),(v>=g&&c.currentTime!==a+c.pingPongDelayCorrection||!a)&&(p(a),f("change")),v>m&&v<g?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,f("changeBegin")),p(v),f("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,f("change"),s&&f("timelineChangeComplete")):c.began&&v>g&&f("changeComplete"),c.currentTime=JB(v,0,a+c.pingPongDelayCorrection),c.began&&f("update"),e>=a)if(c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining){n+=s?c.duration/Xj.speed:c.duration;for(let e of i)e.setStartTime(0),e.remaining=e.loop;f("loopComplete"),c.loopBegan=!1,"alternate"===c.direction?h():s&&(c.direction="normal",c.reversed=!1,i.forEach(function(e){return e.reversed=!1}))}else c.paused=!0,c.completed||(c.completed=!0,f("loopComplete"),f("complete"),!c.passThrough&&"Promise"in window&&(o(),l(c)))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversed="reverse"===e,c.remaining=c.loop,i=c.children;for(var t=s=i.length;t--;)c.children[t].reset();p(c.reversed?c.duration:0)},c.setStartTime=function(e){n=e},c.set=function(e,t){return Nj(e,t),c},c.tick=function(e){a=e,n||(n=a),v((a+(r-n))*Xj.speed)},c.seek=function(e){v(e-n,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},c.pause=function(e){c.paused=!0,s&&(t=null!==e&&void 0!==e?e:performance.now())},c.play=function(e){!c.paused||(c.completed&&c.reset(),c.paused=!1,Gj.push(c),s&&void 0!==t&&(n+=(null!==e&&void 0!==e?e:performance.now())-t),!Hj&&Yj.isUsingInternalRaf&&Yj.play())},c.reverse=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;h(),c.completed=!c.reversed,n=void 0,r=e},c.restart=function(){c.reset(),n=void 0,r=0,c.play()},c.reset(),c.autoplay&&c.play(),c}function Qj(e,t){for(var i=t.length;i--;)dj(e,t[i].animatable.target)&&t.splice(i,1)}typeof document<"u"&&document.addEventListener("visibilitychange",function(e){document.hidden?(Gj.forEach(function(t){return t.pause(e.timeStamp)}),qj=Gj.slice(0),Xj.running=Gj=[]):qj.forEach(function(t){return t.play(e.timeStamp)})}),Xj.version="3.2.0",Xj.speed=1,Xj.running=Gj,Xj.remove=function(e){for(var t=Rj(e),i=Gj.length;i--;){var n=Gj[i],r=n.animations,a=n.children;Qj(t,r);for(var s=a.length;s--;){var o=a[s],l=o.animations;Qj(t,l),!l.length&&!o.children.length&&a.splice(s,1)}!r.length&&!a.length&&n.pause()}},Xj.get=Ej,Xj.set=Nj,Xj.convertPx=xj,Xj.path=function(e,t){var i=tj.str(e)?lj(e)[0]:e,n=t||100;return function(e){return{property:e,el:i,svg:Oj(i),totalLength:Dj(i)*(n/100)}}},Xj.setDashoffset=function(e){var t=Dj(e);return e.setAttribute("stroke-dasharray",t),t},Xj.stagger=function(e,t){void 0===t&&(t={});var i=t.direction||"normal",n=t.easing?oj(t.easing):null,r=t.grid,a=t.axis,s=t.from||0,o="first"===s,l="center"===s,c="last"===s,h=tj.arr(e),u=parseFloat(h?e[0]:e),d=h?parseFloat(e[1]):0,p=vj(h?e[1]:e)||0,f=t.start||0+(h?u:0),m=[],g=0;return function(e,t,v){if(o&&(s=0),l&&(s=(v-1)/2),c&&(s=v-1),!m.length){for(var y=0;y<v;y++){if(r){var b=l?(r[0]-1)/2:s%r[0],x=l?(r[1]-1)/2:Math.floor(s/r[0]),w=b-y%r[0],A=x-Math.floor(y/r[0]),S=Math.sqrt(w*w+A*A);"x"===a&&(S=-w),"y"===a&&(S=-A),m.push(S)}else m.push(Math.abs(s-y));g=Math.max.apply(Math,m)}n&&(m=m.map(function(e){return n(e/g)*g})),"reverse"===i&&(m=m.map(function(e){return a?e<0?-1*e:-e:Math.abs(g-e)}))}return f+(h?(d-u)/g:u)*(Math.round(100*m[t])/100)+p}},Xj.timeline=function(e){void 0===e&&(e={});var t=Xj(e);return t.duration=0,t.add=function(i,n){var r=Gj.indexOf(t),a=t.children;function s(e){e.passThrough=!0}r>-1&&Gj.splice(r,1);for(var o=0;o<a.length;o++)s(a[o]);var l=mj(i,fj(QB,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=tj.und(n)?c:Cj(n,c),s(t);var h=Xj(l);s(h),a.push(h),h.parent=t;var u=Vj(a,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,!0===h.loop&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Xj.easing=oj,Xj.penner=sj,Xj.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Kj=Xj,Zj=class extends Fv{constructor(e,t,i,n){super(e,t,i),this.isColorA=!0,this.a=n}setRGBA(e,t,i,n){super.setRGB(e,t,i),this.a=n}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"srgb";if("transparent"===e)return this.setRGBA(0,0,0,0),this;if(t=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let n,r=t[1],a=t[2];switch(r){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a="rgba"===r?parseFloat(n[4]):1,super.setStyle(e,i);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a="hsla"===r?parseFloat(n[4]):1,super.setStyle(e,i)}}return super.setStyle(e,i)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},{degToRad:Jj,radToDeg:$j}=wv,eF=new Zv,tF=new Zv,iF=new Kv;function nF(e,t,i,n,r,a){var s,o;let l=void 0!==i[e]?i[e]:void 0,c=n[e];if(null==c)return;let h=null!=l?"string"==typeof l?Number(null!==(s=r.getVariable(l))&&void 0!==s?s:0):l:t[e],u="string"==typeof c?Number(null!==(o=r.getVariable(c))&&void 0!==o?o:0):c;return h!==u?{update:i=>{let n=wv.lerp(h,u,i);t[e]=a?Math.trunc(n):n},start:()=>{t[e]=h},end:()=>{t[e]=u}}:void 0}function rF(e,t,i,n,r,a){let s=i[e]?i[e]:void 0,o=n[e];if(!o)return;let l=t[e],c=[...null!==s&&void 0!==s?s:l].map(e=>{var t;return"string"==typeof e?Number(null!==(t=r.getVariable(e))&&void 0!==t?t:0):e}),h=[...o].map(e=>{var t;return"string"==typeof e?Number(null!==(t=r.getVariable(e))&&void 0!==t?t:0):e});return c.length!==h.length||VO(c,h)?void 0:{update:i=>{c.forEach((n,r)=>{let s=wv.lerp(n,h[r],i);t[e][r]=a?Math.trunc(s):s})},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],h)}}}function aF(e,t,i){return t.forEach((t,n)=>{var r;e.setComponent(n,"string"==typeof t?Number(null!==(r=i.getVariable(t))&&void 0!==r?r:0):t)}),e}function sF(e,t,i,n,r){let a=i[e]?i[e]:void 0,s=n[e];if(!s)return;let o=t[e],l=a?aF(new Zv,a,r):o.clone(),c=aF(new Zv,s,r);return l.equals(c)?void 0:{update:e=>{o.lerpVectors(l,c,e)},start:()=>{o.copy(l)},end:()=>{o.copy(c)}}}function oF(e,t,i){return t.forEach((t,n)=>{var r;e.setComponent(n,"string"==typeof t?Number(null!==(r=i.getVariable(t))&&void 0!==r?r:0):t)}),e}function lF(e,t,i,n,r){let a=i[e]?i[e]:void 0,s=n[e];if(!s)return;let o=t[e],l=!(o instanceof Av),c=o instanceof Av?o:(new Av).fromArray(o),h=a?oF(new Av,a,r):c.clone(),u=oF(new Av,s,r);return h.equals(u)?void 0:{update:i=>{c.lerpVectors(h,u,i),l&&(t[e]=c.toArray())},start:()=>{c.copy(h),l&&(t[e]=c.toArray())},end:()=>{c.copy(u),l&&(t[e]=c.toArray())}}}function cF(e,t,i,n,r){let a=i[e]?i[e]:void 0,s=n[e];if(!s)return;let o=t[e],l=new Zj(o.r,o.g,o.b,o.a),c=a?"string"==typeof a?r.getColor(a).clone():new Zj(a.r,a.g,a.b,a.a):l.clone(),h="string"==typeof s?r.getColor(s).clone():new Zj(s.r,s.g,s.b,s.a);return c.equals(h)?void 0:{update:i=>{l.lerpColors(c,h,i);let n=wv.lerp(c.a,h.a,i);l.a=n,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(c)},end:()=>{l.copy(h)}}}function hF(e,t,i,n,r){return"number"==typeof t[e]?nF(e,t,null!==i&&void 0!==i?i:{},n,r):Array.isArray(t[e])?rF(e,t,null!==i&&void 0!==i?i:{},n,r):void 0}var uF,dF;new By;function pF(e,t,i,n,r){let a=i[e],s=n[e];if("number"==typeof t[e])Math.abs(a-s)>1e-4&&(t[e]=wv.lerp(a,s,r));else if(Array.isArray(t[e]))for(let o=0,l=a.length;o<l;o++)t[e][o]=wv.lerp(a[o],s[o],r)}function fF(e,t,i,n){let r=[];if(!("cloner"in i)||!e.cloner)return r;let a=e.cloner,s="cloner"in t?t.cloner:{},o=i.cloner;QL.forEach(e=>{let t;t="count"===e?nF("count",a.parameters,s,o,n,!0):hF(e,a.parameters,null!==s&&void 0!==s?s:{},o,n),t&&r.push(t)});let l=function(e,t,i,n){if("radial"!==e.parameters.type)return;let r=t.radial,a=i.radial;if(!a)return;let s=e.parameters.radial,o=[];return KL.forEach(e=>{let t=hF(e,s,null!==r&&void 0!==r?r:{},a,n);t&&o.push(t)}),o}(a,s,o,n);(null===l||void 0===l?void 0:l.length)&&r.push(...l);let c=function(e,t,i,n){if("linear"!==e.parameters.type)return;let r=t.linear,a=i.linear;if(!a)return;let s=[],o=e.parameters.linear;return ZL.forEach(e=>{let t=hF(e,o,null!==r&&void 0!==r?r:{},a,n);t&&s.push(t)}),s}(a,s,o,n);(null===c||void 0===c?void 0:c.length)&&r.push(...c);let h=function(e,t,i,n){if("grid"!==e.parameters.type)return;let r=t.grid,a=i.grid;if(!a)return;let s=[],o=e.parameters.grid;return JL.forEach(e=>{let t;t="count"===e?rF(e,o,null!==r&&void 0!==r?r:{},a,n,!0):hF(e,o,null!==r&&void 0!==r?r:{},a,n),t&&s.push(t)}),s}(a,s,o,n);(null===h||void 0===h?void 0:h.length)&&r.push(...h);let u=function(e,t,i,n){if("toObject"!==e.parameters.type)return;let r=t.toObject,a=i.toObject;if(!a)return;let s=[],o=e.parameters.toObject;return $L.forEach(e=>{let t;t="count"===e?nF(e,o,null!==r&&void 0!==r?r:{},a,n,!0):hF(e,o,null!==r&&void 0!==r?r:{},a,n),t&&s.push(t)}),s}(a,s,o,n);(null===u||void 0===u?void 0:u.length)&&r.push(...u);let d=function(e,t,i,n){if(!e.parameters.randomness)return;let r=t.randomnessObject,a=i.randomnessObject;if(!a)return;let s=[],o=e.parameters.randomnessObject;return ez.forEach(e=>{let t=hF(e,o,null!==r&&void 0!==r?r:{},a,n);t&&s.push(t)}),s}(a,s,o,n);return null!==d&&void 0!==d&&d.length&&r.push(...d),r.length&&r.push({update:()=>{a.update()}}),r}function mF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return[e&&!isNaN(e[0])?e[0]:t[0],e&&!isNaN(e[1])?e[1]:t[1]]}function gF(e,t,i){switch(e){case 0:return"cubicBezier( 0, 0, 1, 1 )";case 1:return"cubicBezier( .25, .1, .25, 1 )";case 2:return"cubicBezier( .42, 0, 1, 1 )";case 3:return"cubicBezier( 0, 0, .58, 1 )";case 4:return"cubicBezier( .42, 0, .58, 1 )";case 7:return"cubicBezier( .25, 1, .5, 1 )";case 5:let{control1:e,control2:n}=null!==t&&void 0!==t?t:(0,ye.A)({},DL.defaultData);return"cubicBezier( ".concat(e[0],", ").concat(e[1],", ").concat(n[0],", ").concat(n[1]," )");case 6:let{mass:r,stiffness:a,damping:s,velocity:o}=null!==i&&void 0!==i?i:(0,ye.A)({},PL.defaultData),l=new wF(r,a,s,o),c=l.solve(1);return()=>e=>l.solve(e)/c;case 8:return()=>e=>Math.floor(e)}}function vF(e,t,i){return{id:t,fi:i,data:{id:t,path:e,keyframes:new Vk}}}(e=>{e.is=function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z}})(uF||(uF={})),(e=>{function t(e,t,i,n){let r=[];return t.properties.forEach((t,a)=>{var s;let o=null===(s=t.data.path)||void 0===s?void 0:s[0];if(o&&["position","rotation","scale"].includes(o)){let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},i=[];for(let l of yF){var n;let c=[...null!==(n=e.keyframes)&&void 0!==n?n:[]].filter(e=>void 0!==e.data.value[l]).sort((e,t)=>e.data.time-t.data.time),h=c[0];h&&(null===t||void 0===t||t(h.data.value));let u={index:[],t:[]};for(let e=0;e<c.length-1;e++){var r,a,s,o;let t=c[e],i=null!==(r=c[e+1])&&void 0!==r?r:t,n={duration:1e3*((null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.time)-t.data.time),delay:0===e?1e3*c[0].data.time:0};e<c.length-1&&(u.t.push((0,ye.A)((0,ye.A)({},n),{},{value:e%2===0?1:0,easing:gF(t.data.easing.type,{control1:mF(null===(s=t.data.easing.cubicControls)||void 0===s?void 0:s.control1,[0,0]),control2:mF(null===(o=i.data.easing.cubicControls)||void 0===o?void 0:o.control2,[1,1])},t.data.easing.springParameters)})),u.index.push((0,ye.A)((0,ye.A)({},n),{},{value:e,easing:"linear"})))}if(c.length>1){let e={t:0,index:0};i.push((0,ye.A)((0,ye.A)({targets:e},u),{},{update:i=>{var n;let r=Math.ceil(e.index),a=r%2===0?e.t:1-e.t,s=null===c||void 0===c?void 0:c[r].data.value,o=null===c||void 0===c||null===(n=c[r+1])||void 0===n?void 0:n.data.value;if(void 0!==s&&void 0!==o){let e={[l]:s[l]+(o[l]-s[l])*a};null===t||void 0===t||t(e)}}}))}}return i}(t.data,null===i||void 0===i?void 0:i[o]);e&&r.push(...e)}if(o&&"shape size"===o&&"geometry"in e){let e=function(e,t,i){let n=[];for(let c of yF){var r;let e={},h=[...null!==(r=t.keyframes)&&void 0!==r?r:[]].filter(e=>void 0!==e.data.value[c]).sort((e,t)=>e.data.time-t.data.time),u=h[0];u&&null!==i&&void 0!==i&&i(u.data.value),e={index:[],t:[]};for(let t=0;t<h.length-1;t++){var a,s,o,l;let i=h[t],n=null!==(a=h[t+1])&&void 0!==a?a:i,r={duration:1e3*((null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.time)-i.data.time),delay:0===t?1e3*h[0].data.time:0};t<h.length-1&&(e.t.push((0,ye.A)((0,ye.A)({},r),{},{value:t%2===0?1:0,easing:gF(i.data.easing.type,{control1:mF(null===(o=i.data.easing.cubicControls)||void 0===o?void 0:o.control1,[0,0]),control2:mF(null===(l=n.data.easing.cubicControls)||void 0===l?void 0:l.control2,[1,1])},i.data.easing.springParameters)})),e.index.push((0,ye.A)((0,ye.A)({},r),{},{value:t,easing:"linear"})))}if(h.length>1){let t={t:0,index:0};n.push((0,ye.A)((0,ye.A)({targets:t},e),{},{update:e=>{var n;let r=Math.ceil(t.index),a=r%2===0?t.t:1-t.t,s=null===h||void 0===h?void 0:h[r].data.value,o=null===h||void 0===h||null===(n=h[r+1])||void 0===n?void 0:n.data.value;if(void 0!==s&&void 0!==o){let e={[c]:s[c]+(o[c]-s[c])*a};null===i||void 0===i||i(e)}}}))}}return n}(0,t.data,null===i||void 0===i?void 0:i.shapeSize);e&&r.push(...e)}if(o&&"path extrusion"===o&&e instanceof m$){let n=function(e,t,i){var n;let r={},a=[...null!==(n=t.keyframes)&&void 0!==n?n:[]].sort((e,t)=>e.data.time-t.data.time),s=a[0];s&&null!==i&&void 0!==i&&i(e,s.data.value),r={index:[],t:[]};for(let u=0;u<a.length-1;u++){var o,l,c,h;let e=a[u],t=null!==(o=a[u+1])&&void 0!==o?o:e,i={duration:1e3*((null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.time)-e.data.time),delay:0===u?1e3*a[0].data.time:0};u<a.length-1&&(r.t.push((0,ye.A)((0,ye.A)({},i),{},{value:u%2===0?1:0,easing:gF(e.data.easing.type,{control1:mF(null===(c=e.data.easing.cubicControls)||void 0===c?void 0:c.control1,[0,0]),control2:mF(null===(h=t.data.easing.cubicControls)||void 0===h?void 0:h.control2,[1,1])},e.data.easing.springParameters)})),r.index.push((0,ye.A)((0,ye.A)({},i),{},{value:u,easing:"linear"})))}if(a.length>1){let t={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:t},r),{},{update:n=>{var r;let s=Math.ceil(t.index),o=s%2===0?t.t:1-t.t,l=null===a||void 0===a?void 0:a[Math.min(s,a.length-1)].data.value,c=null===a||void 0===a||null===(r=a[Math.min(s,a.length-1)+1])||void 0===r?void 0:r.data.value;null===i||void 0===i||i(e,function(e,t,i,n){let r=e.geometry.userData.parameters.extrusion;if(r)return pz.forEach(e=>{pF(e,r,t,i,n)}),r}(e,l,c,o))}})}}(e,t.data,null===i||void 0===i?void 0:i.pathExtrusion);n&&r.push(n)}if(o&&"path snapping"===o&&e.data.pathSnapping){let n=function(e,t,i){var n;let r={},a=[...null!==(n=t.keyframes)&&void 0!==n?n:[]].sort((e,t)=>e.data.time-t.data.time),s=a[0];s&&null!==i&&void 0!==i&&i(s.data.value),r={index:[],t:[]};for(let u=0;u<a.length-1;u++){var o,l,c,h;let e=a[u],t=null!==(o=a[u+1])&&void 0!==o?o:e,i={duration:1e3*((null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.time)-e.data.time),delay:0===u?1e3*a[0].data.time:0};u<a.length-1&&(r.t.push((0,ye.A)((0,ye.A)({},i),{},{value:u%2===0?1:0,easing:gF(e.data.easing.type,{control1:mF(null===(c=e.data.easing.cubicControls)||void 0===c?void 0:c.control1,[0,0]),control2:mF(null===(h=t.data.easing.cubicControls)||void 0===h?void 0:h.control2,[1,1])},e.data.easing.springParameters)})),r.index.push((0,ye.A)((0,ye.A)({},i),{},{value:u,easing:"linear"})))}if(a.length>1){let t={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:t},r),{},{update:n=>{var r;let s=Math.ceil(t.index),o=s%2===0?t.t:1-t.t,l=null===a||void 0===a?void 0:a[Math.min(s,a.length-1)].data.value,c=null===a||void 0===a||null===(r=a[Math.min(s,a.length-1)+1])||void 0===r?void 0:r.data.value;null===i||void 0===i||i(function(e,t,i,n){let r=e.updatedPathSnapping;if(r)return nB.forEach(e=>{pF(e,r,t,i,n)}),r}(e,l,c,o))}})}}(e,t.data,null===i||void 0===i?void 0:i.pathSnapping);n&&r.push(n)}if(o&&"material"===o&&"Mesh"===e.type&&"material"in e&&e.material instanceof kY){let a=t.data.id;if(a){let s=e.material.getLayerByUuid(a);if(s){let e=bF(s,t.data,null===i||void 0===i?void 0:i.material,n);e&&r.push(e)}else{let a=e.material.getLayersOfType(t.data.type);if(a)for(let e of a){let a=bF(e,t.data,null===i||void 0===i?void 0:i.material,n);a&&r.push(a)}}}}if(o&&"opacity"===o&&"Mesh"===e.type&&"material"in e){let e=function(e,t){if(e){var i;let o={},l=[...null!==(i=e.keyframes)&&void 0!==i?i:[]].sort((e,t)=>e.data.time-t.data.time),c=l[0];c&&null!==t&&void 0!==t&&t(c.data.value),o={index:[],t:[]};for(let e=0;e<l.length-1;e++){var n,r,a,s;let t=l[e],i=null!==(n=l[e+1])&&void 0!==n?n:t,c={duration:1e3*((null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.time)-t.data.time),delay:0===e?1e3*l[0].data.time:0};e<l.length-1&&(o.t.push((0,ye.A)((0,ye.A)({},c),{},{value:e%2===0?1:0,easing:gF(t.data.easing.type,{control1:mF(null===(a=t.data.easing.cubicControls)||void 0===a?void 0:a.control1,[0,0]),control2:mF(null===(s=i.data.easing.cubicControls)||void 0===s?void 0:s.control2,[1,1])},t.data.easing.springParameters)})),o.index.push((0,ye.A)((0,ye.A)({},c),{},{value:e,easing:"linear"})))}if(l.length>1){let e={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:e},o),{},{update:i=>{var n;let r=Math.ceil(e.index),a=r%2===0?e.t:1-e.t,s=null===l||void 0===l?void 0:l[Math.min(r,l.length-1)].data.value,o=null===l||void 0===l||null===(n=l[Math.min(r,l.length-1)+1])||void 0===n?void 0:n.data.value,c=wv.lerp(s,o,a);null===t||void 0===t||t(c)}})}}}(t.data,null===i||void 0===i?void 0:i.opacity);e&&r.push(e)}if(o&&"cloner"===o){let n=function(e,t,i){var n;let r={},a=[...null!==(n=t.keyframes)&&void 0!==n?n:[]].sort((e,t)=>e.data.time-t.data.time),s=a[0];s&&null!==i&&void 0!==i&&i(e,s.data.value,s.data.value),r={index:[],t:[]};for(let u=0;u<a.length-1;u++){var o,l,c,h;let e=a[u],t=null!==(o=a[u+1])&&void 0!==o?o:e,i={duration:1e3*((null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.time)-e.data.time),delay:0===u?1e3*a[0].data.time:0};u<a.length-1&&(r.t.push((0,ye.A)((0,ye.A)({},i),{},{value:u%2===0?1:0,easing:gF(e.data.easing.type,{control1:mF(null===(c=e.data.easing.cubicControls)||void 0===c?void 0:c.control1,[0,0]),control2:mF(null===(h=t.data.easing.cubicControls)||void 0===h?void 0:h.control2,[1,1])},e.data.easing.springParameters)})),r.index.push((0,ye.A)((0,ye.A)({},i),{},{value:u,easing:"linear"})))}if(a.length>1){let t={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:t},r),{},{update:n=>{var r;let s=Math.ceil(t.index),o=s%2===0?t.t:1-t.t,l=null===a||void 0===a?void 0:a[Math.min(s,a.length-1)].data.value,c=null===a||void 0===a||null===(r=a[Math.min(s,a.length-1)+1])||void 0===r?void 0:r.data.value;null===i||void 0===i||i(e,l.randomnessObject?void 0:function(e,t,i,n){var r;let a=null===(r=n.cloner)||void 0===r?void 0:r.parameters;if(a){pF("count",a,e,t,i),a.count=Math.trunc(a.count);for(let n of KL)pF(n,a.radial,e.radial,t.radial,i);for(let n of ZL)pF(n,a.linear,e.linear,t.linear,i);for(let n of JL)pF(n,a.grid,e.grid,t.grid,i);for(let n of $L)pF(n,a.toObject,e.toObject,t.toObject,i);return a}}(l,c,o,e),l.randomnessObject?function(e,t,i,n){var r;let a=null===(r=n.cloner)||void 0===r?void 0:r.parameters;if(a){for(let n of ez)pF(n,a.randomnessObject,e.randomnessObject,t.randomnessObject,i);return a}}(l,c,o,e):void 0)}})}}(e,t.data,null===i||void 0===i?void 0:i.cloner);n&&r.push(n)}if(o&&"camera"===o&&e instanceof FQ){let n=function(e,t,i,n){if(t){var r;let c={[n]:[]},h=[...null!==(r=t.keyframes)&&void 0!==r?r:[]].sort((e,t)=>e.data.time-t.data.time),u=h[0];u&&(e[n]=u.data.value,u&&(null===i||void 0===i||i(n,u.data.value)));for(let e=0;e<h.length-1;e++){var a,s,o,l;let t=h[e];if(!Number.isFinite(t.data.value))continue;let i=null!==(a=h[e+1])&&void 0!==a?a:t,r=i.data.value;c[n].push({value:r,easing:gF(t.data.easing.type,{control1:mF(null===(s=t.data.easing.cubicControls)||void 0===s?void 0:s.control1,[0,0]),control2:mF(null===(o=i.data.easing.cubicControls)||void 0===o?void 0:o.control2,[1,1])},t.data.easing.springParameters),duration:1e3*((null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.time)-t.data.time),delay:0===e?1e3*h[0].data.time:0})}if(h.length>1)return(0,ye.A)((0,ye.A)({targets:e},c),{},{update:()=>{null===i||void 0===i||i(n,e[n])}})}}(e,t.data,null===i||void 0===i?void 0:i.camera,"zoom");n&&r.push(n)}if(o&&"light"===o&&(e instanceof sJ||e instanceof p$||e instanceof hJ)){let a=function(e,t,i,n,r){if(t){var a;let h={},u=[...null!==(a=t.keyframes)&&void 0!==a?a:[]].sort((e,t)=>e.data.time-t.data.time),d=u[0];if(d){let t=d.data.value;e[n]=t,null===i||void 0===i||i(n,t)}h={index:[],t:[]};for(let e=0;e<u.length-1;e++){var s,o,l,c;let t=u[e],i=null!==(s=u[e+1])&&void 0!==s?s:t,n={duration:1e3*((null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.time)-t.data.time),delay:0===e?1e3*u[0].data.time:0};e<u.length-1&&(h.t.push((0,ye.A)((0,ye.A)({},n),{},{value:e%2===0?1:0,easing:gF(t.data.easing.type,{control1:mF(null===(l=t.data.easing.cubicControls)||void 0===l?void 0:l.control1,[0,0]),control2:mF(null===(c=i.data.easing.cubicControls)||void 0===c?void 0:c.control2,[1,1])},t.data.easing.springParameters)})),h.index.push((0,ye.A)((0,ye.A)({},n),{},{value:e,easing:"linear"})))}if(u.length>1){let e={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:e},h),{},{update:()=>{var t;let a=Math.ceil(e.index),s=a%2===0?e.t:1-e.t,o=xF(null===u||void 0===u?void 0:u[Math.min(a,u.length-1)].data.value,null===u||void 0===u||null===(t=u[Math.min(a,u.length-1)+1])||void 0===t?void 0:t.data.value,s,r);null===i||void 0===i||i(n,o)}})}}}(e,t.data,null===i||void 0===i?void 0:i.light,t.data.path[1],n);a&&r.push(a)}}),r}e.getControlsWithDefault=function(e,t){let i=[0,0],n=[1,1];if(null!==e&&void 0!==e&&e.cubicControls)i=mF(e.cubicControls.control1,i);else switch(null===e||void 0===e?void 0:e.type){case 2:case 4:i=[.42,0];break;case 3:case 0:i=[0,0];break;case 1:i=[.25,.1];break;case 7:i=[.25,1]}if(null!==t&&void 0!==t&&t.cubicControls)n=mF(t.cubicControls.control2,n);else switch(null===t||void 0===t?void 0:t.type){case 2:case 0:n=[1,1];break;case 3:case 4:n=[.58,1];break;case 1:n=[.25,1];break;case 7:n=[.5,1]}return{control1:i,control2:n}},e.defaultData=function(e,t){return{id:e,name:t,to:5,properties:new Vk}},e.createMaterialGroup=function(e){let t=new Vk;return e.forEach(e=>{let{data:i,id:n,fi:r}=e;if("light"===i.type){let e=vF(["material","".concat(i.category," lighting")],n,r);t.push(e)}else{let e=vF(["material",i.type],n,r);t.push(e)}}),t},e.createName=function(e){return Object.entries(e).reduce((e,t)=>{let[i,n]=t;return"string"!=typeof n&&e.push({name:n.name}),e},[])},e.createTimeline=function(e,i,n){let r=Kj.timeline({easing:gF(0),begin(){e.resetBBoxNeedsUpdate()},change(){e.resetBBoxNeedsUpdate()},direction:i.direction,autoplay:!1});return t(e,i,n).forEach(e=>r.add(e,0)),r.duration=1e3*i.to,r},e.addKeyframesToTimeline=t,e.Presets=[{name:"Slide in",animationParams:{translateX:{value:[-20,0],easing:gF(3),duration:1e3},opacity:{value:[0,1],easing:gF(3),duration:1e3},endDelay:250,loop:!0}},{name:"Rotate",animationParams:{rotate:{value:[0,"1turn"],easing:gF(5),duration:700},endDelay:250,loop:!0}},{name:"Scale Out",animationParams:{scale:{value:[1,1.5],easing:gF(4),duration:1e3},endDelay:250,loop:!0}},{name:"Jump",animationParams:{translateY:[{value:0,duration:200,easing:"linear"},{value:-20,easing:"linear",duration:200},{value:0,easing:"linear",duration:100}],endDelay:500,loop:!0}},{name:"Jump Rotate",animationParams:{translateY:[{value:0,duration:200,easing:"linear"},{value:-20,easing:"linear",duration:200},{value:0,easing:"linear",duration:100}],rotate:{value:[0,"1turn"],easing:gF(5),duration:500},endDelay:500,loop:!0}},{name:"Bounce",animationParams:{translateY:{value:["20px","-20px"],duration:575,easing:"easeOutQuad"},direction:"alternate",loop:!0}}]})(dF||(dF={}));var yF=["x","y","z"];function bF(e,t,i,n){if(t){var r;let c={},h=[...null!==(r=t.keyframes)&&void 0!==r?r:[]].sort((e,t)=>e.data.time-t.data.time);if("data"in e){let t=h[0];t&&null!==i&&void 0!==i&&i(t.data.value,e),c={index:[],t:[]};for(let e=0;e<h.length-1;e++){var a,s,o,l;let t=h[e],i=null!==(a=h[e+1])&&void 0!==a?a:t,n={duration:1e3*((null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.time)-t.data.time),delay:0===e?1e3*h[0].data.time:0};e<h.length-1&&(c.t.push((0,ye.A)((0,ye.A)({},n),{},{value:e%2===0?1:0,easing:gF(t.data.easing.type,{control1:mF(null===(o=t.data.easing.cubicControls)||void 0===o?void 0:o.control1,[0,0]),control2:mF(null===(l=i.data.easing.cubicControls)||void 0===l?void 0:l.control2,[1,1])},t.data.easing.springParameters)})),c.index.push((0,ye.A)((0,ye.A)({},n),{},{value:e,easing:"linear"})))}if(h.length>1){let t={t:0,index:0};return(0,ye.A)((0,ye.A)({targets:t},c),{},{update:r=>{var a;let s=Math.ceil(t.index),o=s%2===0?t.t:1-t.t,l=null===h||void 0===h?void 0:h[Math.min(s,h.length-1)].data.value,c=null===h||void 0===h||null===(a=h[Math.min(s,h.length-1)+1])||void 0===a?void 0:a.data.value,u={},d={};if(Object.keys(l).length>0&&Object.keys(c).length>0)for(let t in e.data)if(t in l&&t in c){let e=xF(l[t],c[t],o,n);void 0!==e&&(u[t]=e,d[t]={start:l,end:c,t:o})}null===i||void 0===i||i((0,ye.A)({},u),e,d)}})}}}}function xF(e,t,i,n){if("string"==typeof e&&n&&(e=n.color(e)),"string"==typeof t&&n&&(e=n.color(t)),"number"==typeof e)return e===t?void 0:wv.lerp(e,t,i);if(_L.is(e))return _L.lerp(e,t,i);if(SL.is(e))return SL.lerp(e,t,i);if(Array.isArray(e))return(e.length>t.length?t:e).map((n,r,a)=>{if(Array.isArray(n)){let n=e[r].length>t[r].length?t[r].length:e[r].length;return(4===n?xL:3===n?bL:yL).lerp(e[r],t[r],i)}return wv.lerp(e[r],t[r],i)});if("object"==typeof e&&null!==e){let r={};for(let a in e){let s=xF(e[a],t[a],i,n);void 0!==s&&(r[a]=s)}return r}}var wF=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.mass=e,this.stiffness=t,this.damping=i,this.initialVelocity=n,this.m_w0=Math.sqrt(t/e),this.m_zeta=i/(2*Math.sqrt(t*e)),this.m_zeta<1?(this.m_wd=this.m_w0*Math.sqrt(1-this.m_zeta*this.m_zeta),this.m_A=1,this.m_B=(this.m_zeta*this.m_w0-n)/this.m_wd):(this.m_wd=0,this.m_A=1,this.m_B=-n+this.m_w0)}solve(e){return 1-(e=this.m_zeta<1?Math.exp(-e*this.m_zeta*this.m_w0)*(this.m_A*Math.cos(this.m_wd*e)+this.m_B*Math.sin(this.m_wd*e)):(this.m_A+this.m_B*e)*Math.exp(-e*this.m_w0))}getDuration(){let e=.16666666666666666,t=0,i=0;for(;;)if(t+=e,1===this.solve(t)){if(i++,i>=16)break}else i=0;return t*e*1e3}},AF=Math.pow(2,-24),SF=class{constructor(){}};function _F(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function EF(e){let t=-1,i=-1/0;for(let n=0;n<3;n++){let r=e[n+3]-e[n];r>i&&(i=r,t=n)}return t}function CF(e,t){t.set(e)}function MF(e,t,i){let n,r;for(let a=0;a<3;a++){let s=a+3;n=e[a],r=t[a],i[a]=n<r?n:r,n=e[s],r=t[s],i[s]=n>r?n:r}}function TF(e,t,i){for(let n=0;n<3;n++){let r=t[e+2*n],a=t[e+2*n+1],s=r-a,o=r+a;s<i[n]&&(i[n]=s),o>i[n+3]&&(i[n+3]=o)}}function PF(e){let t=e[3]-e[0],i=e[4]-e[1],n=e[5]-e[2];return 2*(t*i+i*n+n*t)}function DF(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=1/0,s=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,p=1/0,f=-1/0,m=-1/0,g=-1/0,v=null!==r;for(let y=6*t,b=6*(t+i);y<b;y+=6){let t=e[y+0],i=e[y+1],n=t-i,r=t+i;n<a&&(a=n),r>l&&(l=r),v&&t<u&&(u=t),v&&t>f&&(f=t);let b=e[y+2],x=e[y+3],w=b-x,A=b+x;w<s&&(s=w),A>c&&(c=A),v&&b<d&&(d=b),v&&b>m&&(m=b);let S=e[y+4],_=e[y+5],E=S-_,C=S+_;E<o&&(o=E),C>h&&(h=C),v&&S<p&&(p=S),v&&S>g&&(g=S)}n[0]=a,n[1]=s,n[2]=o,n[3]=l,n[4]=c,n[5]=h,v&&(r[0]=u,r[1]=d,r[2]=p,r[3]=f,r[4]=m,r[5]=g)}var OF=32,kF=(e,t)=>e.candidate-t.candidate,IF=new Array(OF).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),RF=new Float32Array(6);function LF(e,t){function i(e){d&&d(e/p)}function n(t,r,d){let p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!f&&m>=l&&(f=!0,c&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(e))),d<=h||m>=l)return i(r+d),t.offset=r,t.count=d,t;let g=function(e,t,i,n,r,a){let s=-1,o=0;if(0===a)s=EF(t),-1!==s&&(o=(t[s]+t[s+3])/2);else if(1===a)s=EF(e),-1!==s&&(o=function(e,t,i,n){let r=0;for(let a=t,s=t+i;a<s;a++)r+=e[6*a+2*n];return r/i}(i,n,r,s));else if(2===a){let a=PF(e),l=1.25*r,c=6*n,h=6*(n+r);for(let e=0;e<3;e++){let n=t[e],u=(t[e+3]-n)/OF;if(r<8){let t=[...IF];t.length=r;let n=0;for(let r=c;r<h;r+=6,n++){let a=t[n];a.candidate=i[r+2*e],a.count=0;let{bounds:s,leftCacheBounds:o,rightCacheBounds:l}=a;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,o[e]=1/0,o[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0;TF(r,i,s)}t.sort(kF);let u=r;for(let e=0;e<u;e++){let i=t[e];for(;e+1<u&&t[e+1].candidate===i.candidate;)t.splice(e+1,1),u--}for(let r=c;r<h;r+=6){let n=i[r+2*e];for(let e=0;e<u;e++){let a=t[e];n>=a.candidate?TF(r,i,a.rightCacheBounds):(TF(r,i,a.leftCacheBounds),a.count++)}}for(let i=0;i<u;i++){let n=t[i],c=n.count,h=r-n.count,u=n.leftCacheBounds,d=n.rightCacheBounds,p=0;0!==c&&(p=PF(u)/a);let f=0;0!==h&&(f=PF(d)/a);let m=1+1.25*(p*c+f*h);m<l&&(s=e,l=m,o=n.candidate)}}else{for(let e=0;e<OF;e++){let t=IF[e];t.count=0,t.candidate=n+u+e*u;let i=t.bounds;for(let e=0;e<3;e++)i[e]=1/0,i[e+3]=-1/0}for(let r=c;r<h;r+=6){let t=~~((i[r+2*e]-n)/u);t>=OF&&(t=31);let a=IF[t];a.count++,TF(r,i,a.bounds)}let t=IF[31];CF(t.bounds,t.rightCacheBounds);for(let e=30;e>=0;e--){let t=IF[e],i=IF[e+1];MF(t.bounds,i.rightCacheBounds,t.rightCacheBounds)}let d=0;for(let i=0;i<31;i++){let t=IF[i],n=t.count,c=t.bounds,h=IF[i+1].rightCacheBounds;0!==n&&(0===d?CF(c,RF):MF(c,RF,RF)),d+=n;let u=0,p=0;0!==d&&(u=PF(RF)/a);let f=r-d;0!==f&&(p=PF(h)/a);let m=1+1.25*(u*d+p*f);m<l&&(s=e,l=m,o=t.candidate)}}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(a," used."));return{axis:s,pos:o}}(t.boundingData,p,s,r,d,u);if(-1===g.axis)return i(r+d),t.offset=r,t.count=d,t;let v=function(e,t,i,n,r){let a=i,s=i+n-1,o=r.pos,l=2*r.axis;for(;;){for(;a<=s&&t[6*a+l]<o;)a++;for(;a<=s&&t[6*s+l]>=o;)s--;if(!(a<s))return a;for(let i=0;i<3;i++){let n=e[3*a+i];e[3*a+i]=e[3*s+i],e[3*s+i]=n;let r=t[6*a+2*i+0];t[6*a+2*i+0]=t[6*s+2*i+0],t[6*s+2*i+0]=r;let o=t[6*a+2*i+1];t[6*a+2*i+1]=t[6*s+2*i+1],t[6*s+2*i+1]=o}a++,s--}}(o,s,r,d,g);if(v===r||v===r+d)i(r+d),t.offset=r,t.count=d;else{t.splitAxis=g.axis;let e=new SF,i=r,o=v-r;t.left=e,e.boundingData=new Float32Array(6),DF(s,i,o,e.boundingData,a),n(e,i,o,a,m+1);let l=new SF,c=v,h=d-o;t.right=l,l.boundingData=new Float32Array(6),DF(s,c,h,l.boundingData,a),n(l,c,h,a,m+1)}return t}!function(e,t){if(!e.index){let i,n=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;i=n>65535?new Uint32Array(new r(4*n)):new Uint16Array(new r(2*n)),e.setIndex(new mb(i,1));for(let e=0;e<n;e++)i[e]=e}}(e,t);let r=new Float32Array(6),a=new Float32Array(6),s=function(e,t){let i=e.attributes.position,n=e.index.array,r=n.length/3,a=new Float32Array(6*r),s=i.normalized,o=i.array,l=i.offset||0,c=3;i.isInterleavedBufferAttribute&&(c=i.data.stride);let h=["getX","getY","getZ"];for(let u=0;u<r;u++){let e,r,d,p=3*u,f=6*u;s?(e=n[p+0],r=n[p+1],d=n[p+2]):(e=n[p+0]*c+l,r=n[p+1]*c+l,d=n[p+2]*c+l);for(let n=0;n<3;n++){let l,c,u;s?(l=i[h[n]](e),c=i[h[n]](r),u=i[h[n]](d)):(l=o[e+n],c=o[r+n],u=o[d+n]);let p=l;c<p&&(p=c),u<p&&(p=u);let m=l;c>m&&(m=c),u>m&&(m=u);let g=(m-p)/2,v=2*n;a[f+v+0]=p+g,a[f+v+1]=g+(Math.abs(p)+g)*AF,p<t[n]&&(t[n]=p),m>t[n+3]&&(t[n+3]=m)}}return a}(e,r),o=e.index.array,l=t.maxDepth,c=t.verbose,h=t.maxLeafTris,u=t.strategy,d=t.onProgress,p=e.index.count/3,f=!1,m=[],g=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let r of e.groups)i.add(r.start),i.add(r.start+r.count);let n=Array.from(i.values()).sort((e,t)=>e-t);for(let r=0;r<n.length-1;r++){let e=n[r],i=n[r+1];t.push({offset:e/3,count:(i-e)/3})}return t}(e);if(1===g.length){let e=g[0],t=new SF;t.boundingData=r,function(e,t,i,n){let r=1/0,a=1/0,s=1/0,o=-1/0,l=-1/0,c=-1/0;for(let h=6*t,u=6*(t+i);h<u;h+=6){let t=e[h+0];t<r&&(r=t),t>o&&(o=t);let i=e[h+2];i<a&&(a=i),i>l&&(l=i);let n=e[h+4];n<s&&(s=n),n>c&&(c=n)}n[0]=r,n[1]=a,n[2]=s,n[3]=o,n[4]=l,n[5]=c}(s,e.offset,e.count,a),n(t,e.offset,e.count,a),m.push(t)}else for(let v of g){let e=new SF;e.boundingData=new Float32Array(6),DF(s,v.offset,v.count,e.boundingData,a),n(e,v.offset,v.count,a),m.push(e)}return m}var zF=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,n=-1/0;for(let r=0,a=e.length;r<a;r++){let a=e[r][t];i=a<i?a:i,n=a>n?a:n}this.min=i,this.max=n}setFromPoints(e,t){let i=1/0,n=-1/0;for(let r=0,a=t.length;r<a;r++){let a=t[r],s=e.dot(a);i=s<i?s:i,n=s>n?s:n}this.min=i,this.max=n}isSeparated(e){return this.min>e.max||e.min>this.max}};zF.prototype.setFromBox=function(){let e=new Zv;return function(t,i){let n=i.min,r=i.max,a=1/0,s=-1/0;for(let o=0;o<=1;o++)for(let i=0;i<=1;i++)for(let l=0;l<=1;l++){e.x=n.x*o+r.x*(1-o),e.y=n.y*i+r.y*(1-i),e.z=n.z*l+r.z*(1-l);let c=t.dot(e);a=Math.min(c,a),s=Math.max(c,s)}this.min=a,this.max=s}}();!function(){let e=new zF}();var BF=function(){let e=new Zv,t=new Zv,i=new Zv;return function(n,r,a){let s=n.start,o=e,l=r.start,c=t;i.subVectors(s,l),e.subVectors(n.end,n.start),t.subVectors(r.end,r.start);let h,u,d=i.dot(c),p=c.dot(o),f=c.dot(c),m=i.dot(o),g=o.dot(o)*f-p*p;h=0!==g?(d*p-m*f)/g:0,u=(d+h*p)/f,a.x=h,a.y=u}}(),jF=function(){let e=new Av,t=new Zv,i=new Zv;return function(n,r,a,s){BF(n,r,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1)return n.at(o,a),void r.at(l,s);if(o>=0&&o<=1)return l<0?r.at(0,s):r.at(1,s),void n.closestPointToPoint(s,!0,a);if(l>=0&&l<=1)return o<0?n.at(0,a):n.at(1,a),void r.closestPointToPoint(a,!0,s);{let e,c;e=o<0?n.start:n.end,c=l<0?r.start:r.end;let h=t,u=i;return n.closestPointToPoint(c,!0,t),r.closestPointToPoint(e,!0,i),h.distanceToSquared(c)<=u.distanceToSquared(e)?(a.copy(h),void s.copy(c)):(a.copy(e),void s.copy(u))}}}(),FF=function(){let e=new Zv,t=new Zv,i=new nx,n=new zE;return function(r,a){let{radius:s,center:o}=r,{a:l,b:c,c:h}=a;if(n.start=l,n.end=c,n.closestPointToPoint(o,!0,e).distanceTo(o)<=s||(n.start=l,n.end=h,n.closestPointToPoint(o,!0,e).distanceTo(o)<=s)||(n.start=c,n.end=h,n.closestPointToPoint(o,!0,e).distanceTo(o)<=s))return!0;let u=a.getPlane(i);if(Math.abs(u.distanceToPoint(o))<=s){let e=u.projectPoint(o,t);if(a.containsPoint(e))return!0}return!1}}();function NF(e){return Math.abs(e)<1e-15}var UF=class extends cb{constructor(){super(...arguments),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new Zv),this.satBounds=new Array(4).fill().map(()=>new zF),this.points=[this.a,this.b,this.c],this.sphere=new yy,this.plane=new nx,this.needsUpdate=!0}intersectsSphere(e){return FF(e,this)}update(){let e=this.a,t=this.b,i=this.c,n=this.points,r=this.satAxes,a=this.satBounds,s=r[0],o=a[0];this.getNormal(s),o.setFromPoints(s,n);let l=r[1],c=a[1];l.subVectors(e,t),c.setFromPoints(l,n);let h=r[2],u=a[2];h.subVectors(t,i),u.setFromPoints(h,n);let d=r[3],p=a[3];d.subVectors(i,e),p.setFromPoints(d,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}};UF.prototype.closestPointToSegment=function(){let e=new Zv,t=new Zv,i=new zE;return function(n){let r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{start:o,end:l}=n,c=this.points,h=1/0;for(let u=0;u<3;u++){let o=(u+1)%3;i.start.copy(c[u]),i.end.copy(c[o]),jF(i,n,e,t),r=e.distanceToSquared(t),r<h&&(h=r,a&&a.copy(e),s&&s.copy(t))}return this.closestPointToPoint(o,e),r=o.distanceToSquared(e),r<h&&(h=r,a&&a.copy(e),s&&s.copy(o)),this.closestPointToPoint(l,e),r=l.distanceToSquared(e),r<h&&(h=r,a&&a.copy(e),s&&s.copy(l)),Math.sqrt(h)}}(),UF.prototype.intersectsTriangle=function(){let e=new UF,t=new Array(3),i=new Array(3),n=new zF,r=new zF,a=new Zv,s=new Zv,o=new Zv,l=new Zv,c=new zE,h=new zE,u=new zE;return function(d){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){let e=this.satBounds,s=this.satAxes;i[0]=d.a,i[1]=d.b,i[2]=d.c;for(let t=0;t<4;t++){let r=e[t],a=s[t];if(n.setFromPoints(a,i),r.isSeparated(n))return!1}let o=d.satBounds,l=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let i=0;i<4;i++){let e=o[i],r=l[i];if(n.setFromPoints(r,t),e.isSeparated(n))return!1}for(let c=0;c<4;c++){let e=s[c];for(let s=0;s<4;s++){let o=l[s];if(a.crossVectors(e,o),n.setFromPoints(a,t),r.setFromPoints(a,i),n.isSeparated(r))return!1}}return p&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}{let e=this.points,t=!1,i=0;for(let o=0;o<3;o++){let n=e[o],r=e[(o+1)%3];c.start.copy(n),c.end.copy(r),c.delta(s);let a=t?h.start:h.end,l=NF(g.distanceToPoint(n));if(NF(g.normal.dot(s))&&l){h.copy(c),i=2;break}if((g.intersectLine(c,a)||l)&&!NF(a.distanceTo(r))){if(i++,t)break;t=!0}}if(1===i&&d.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(2!==i)return!1;let n=d.points,r=!1,a=0;for(let s=0;s<3;s++){let e=n[s],t=n[(s+1)%3];c.start.copy(e),c.end.copy(t),c.delta(o);let i=r?u.start:u.end,l=NF(m.distanceToPoint(e));if(NF(m.normal.dot(o))&&l){u.copy(c),a=2;break}if((m.intersectLine(c,i)||l)&&!NF(i.distanceTo(t))){if(a++,r)break;r=!0}}if(1===a&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(2!==a)return!1;if(h.delta(s),u.delta(o),s.dot(o)<0){let e=u.start;u.start=u.end,u.end=e}let f=h.start.dot(s),v=h.end.dot(s),y=u.start.dot(s),b=u.end.dot(s);return(f===b||y===v||v<y!==f<b)&&(p&&(l.subVectors(h.start,u.start),l.dot(s)>0?p.start.copy(h.start):p.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(s)<0?p.end.copy(h.end):p.end.copy(u.end)),!0)}}}(),UF.prototype.distanceToPoint=function(){let e=new Zv;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),UF.prototype.distanceToTriangle=function(){let e=new Zv,t=new Zv,i=["a","b","c"],n=new zE,r=new zE;return function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=s||o?n:null;if(this.intersectsTriangle(a,l))return(s||o)&&(s&&l.getCenter(s),o&&l.getCenter(o)),0;let c=1/0;for(let t=0;t<3;t++){let n,r=i[t],l=a[r];this.closestPointToPoint(l,e),n=l.distanceToSquared(e),n<c&&(c=n,s&&s.copy(e),o&&o.copy(l));let h=this[r];a.closestPointToPoint(h,e),n=h.distanceToSquared(e),n<c&&(c=n,s&&s.copy(h),o&&o.copy(e))}for(let h=0;h<3;h++){let l=i[h],u=i[(h+1)%3];n.set(this[l],this[u]);for(let h=0;h<3;h++){let l=i[h],u=i[(h+1)%3];r.set(a[l],a[u]),jF(n,r,e,t);let d=e.distanceToSquared(t);d<c&&(c=d,s&&s.copy(e),o&&o.copy(t))}}return Math.sqrt(c)}}();var VF=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new Zv,this.max=new Zv,this.matrix=new My,this.invMatrix=new My,this.points=new Array(8).fill().map(()=>new Zv),this.satAxes=new Array(3).fill().map(()=>new Zv),this.satBounds=new Array(3).fill().map(()=>new zF),this.alignedSatBounds=new Array(3).fill().map(()=>new zF),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};VF.prototype.update=function(){let e=this.matrix,t=this.min,i=this.max,n=this.points;for(let l=0;l<=1;l++)for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=n[1*l|2*r|4*a];s.x=l?i.x:t.x,s.y=r?i.y:t.y,s.z=a?i.z:t.z,s.applyMatrix4(e)}let r=this.satBounds,a=this.satAxes,s=n[0];for(let l=0;l<3;l++){let e=a[l],t=r[l],i=n[1<<l];e.subVectors(s,i),t.setFromPoints(e,n)}let o=this.alignedSatBounds;o[0].setFromPointsField(n,"x"),o[1].setFromPointsField(n,"y"),o[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},VF.prototype.intersectsBox=function(){let e=new zF;return function(t){this.needsUpdate&&this.update();let i=t.min,n=t.max,r=this.satBounds,a=this.satAxes,s=this.alignedSatBounds;if(e.min=i.x,e.max=n.x,s[0].isSeparated(e)||(e.min=i.y,e.max=n.y,s[1].isSeparated(e))||(e.min=i.z,e.max=n.z,s[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let i=a[o],n=r[o];if(e.setFromBox(i,t),n.isSeparated(e))return!1}return!0}}(),VF.prototype.intersectsTriangle=function(){let e=new UF,t=new Array(3),i=new zF,n=new zF,r=new Zv;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let s=this.satBounds,o=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let e=0;e<3;e++){let n=s[e],r=o[e];if(i.setFromPoints(r,t),n.isSeparated(i))return!1}let l=a.satBounds,c=a.satAxes,h=this.points;for(let e=0;e<3;e++){let t=l[e],n=c[e];if(i.setFromPoints(n,h),t.isSeparated(i))return!1}for(let e=0;e<3;e++){let a=o[e];for(let e=0;e<4;e++){let s=c[e];if(r.crossVectors(a,s),i.setFromPoints(r,t),n.setFromPoints(r,h),i.isSeparated(n))return!1}}return!0}}(),VF.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},VF.prototype.distanceToPoint=function(){let e=new Zv;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),VF.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new zE),i=new Array(12).fill().map(()=>new zE),n=new Zv,r=new Zv;return function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(o||l)&&(a.getCenter(r),this.closestPointToPoint(r,n),a.closestPointToPoint(n,r),o&&o.copy(n),l&&l.copy(r)),0;let c=s*s,h=a.min,u=a.max,d=this.points,p=1/0;for(let e=0;e<8;e++){let t=d[e];r.copy(t).clamp(h,u);let i=t.distanceToSquared(r);if(i<p&&(p=i,o&&o.copy(t),l&&l.copy(r),i<c))return Math.sqrt(i)}let f=0;for(let n=0;n<3;n++)for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let s=(n+1)%3,o=(n+2)%3,l=1<<n|r<<s|a<<o,c=d[r<<s|a<<o],p=d[l];t[f].set(c,p);let m=e[n],g=e[s],v=e[o],y=i[f],b=y.start,x=y.end;b[m]=h[m],b[g]=r?h[g]:u[g],b[v]=a?h[v]:u[g],x[m]=u[m],x[g]=r?h[g]:u[g],x[v]=a?h[v]:u[g],f++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let i=0;i<=1;i++){r.x=e?u.x:h.x,r.y=t?u.y:h.y,r.z=i?u.z:h.z,this.closestPointToPoint(r,n);let a=r.distanceToSquared(n);if(a<p&&(p=a,o&&o.copy(n),l&&l.copy(r),a<c))return Math.sqrt(a)}for(let e=0;e<12;e++){let a=t[e];for(let e=0;e<12;e++){let t=i[e];jF(a,t,n,r);let s=n.distanceToSquared(r);if(s<p&&(p=s,o&&o.copy(n),l&&l.copy(r),s<c))return Math.sqrt(s)}}return Math.sqrt(p)}}();var WF=new Zv,HF=new Zv,GF=new Zv,qF=new Av,YF=new Av,XF=new Av,QF=new Zv,KF=new Zv,ZF=new Zv,JF=new Zv;function $F(e,t,i,n,r){let a=3*n,s=e.index.getX(a),o=e.index.getX(a+1),l=e.index.getX(a+2),{position:c,normal:h,uv:u,uv1:d}=e.attributes,p=function(e,t,i,n,r,a,s,o,l){WF.fromBufferAttribute(t,a),HF.fromBufferAttribute(t,s),GF.fromBufferAttribute(t,o);let c=function(e,t,i,n,r,a){let s;return s=1===a?e.intersectTriangle(n,i,t,!0,r):e.intersectTriangle(t,i,n,2!==a,r),null===s?null:{distance:e.origin.distanceTo(r),point:r.clone()}}(e,WF,HF,GF,JF,l);if(c){n&&(qF.fromBufferAttribute(n,a),YF.fromBufferAttribute(n,s),XF.fromBufferAttribute(n,o),c.uv=cb.getInterpolation(JF,WF,HF,GF,qF,YF,XF,new Av)),r&&(qF.fromBufferAttribute(r,a),YF.fromBufferAttribute(r,s),XF.fromBufferAttribute(r,o),c.uv1=cb.getInterpolation(JF,WF,HF,GF,qF,YF,XF,new Av)),i&&(QF.fromBufferAttribute(i,a),KF.fromBufferAttribute(i,s),ZF.fromBufferAttribute(i,o),c.normal=cb.getInterpolation(JF,WF,HF,GF,QF,KF,ZF,new Zv),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let t={a:a,b:s,c:o,normal:new Zv,materialIndex:0};cb.getNormal(WF,HF,GF,t.normal),c.face=t,c.faceIndex=a}return c}(i,c,h,u,d,s,o,l,t);return p?(p.faceIndex=n,r&&r.push(p),p):null}function eN(e,t,i,n){let r=e.a,a=e.b,s=e.c,o=t,l=t+1,c=t+2;i&&(o=i.getX(t),l=i.getX(t+1),c=i.getX(t+2)),r.x=n.getX(o),r.y=n.getY(o),r.z=n.getZ(o),a.x=n.getX(l),a.y=n.getY(l),a.z=n.getZ(l),s.x=n.getX(c),s.y=n.getY(c),s.z=n.getZ(c)}function tN(e,t,i,n,r,a,s){let o=i.index,l=i.attributes.position;for(let c=e,h=t+e;c<h;c++)if(eN(s,3*c,o,l),s.needsUpdate=!0,n(s,c,r,a))return!0;return!1}var iN=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function nN(e,t){return 65535===t[e+15]}function rN(e,t){return t[e+6]}function aN(e,t){return t[e+14]}function sN(e){return e+8}function oN(e,t){return t[e+6]}var lN=new ey,cN=new Zv,hN=["x","y","z"];function uN(e,t,i,n,r){let a=2*e,s=vN,o=yN,l=bN;if(nN(a,o)){!function(e,t,i,n,r,a){for(let s=n,o=n+r;s<o;s++)$F(e,t,i,s,a)}(t,i,n,rN(e,l),aN(a,o),r)}else{let a=sN(e);mN(a,s,n,cN)&&uN(a,t,i,n,r);let o=oN(e,l);mN(o,s,n,cN)&&uN(o,t,i,n,r)}}function dN(e,t,i,n){let r=2*e,a=vN,s=yN,o=bN;if(nN(r,s)){return function(e,t,i,n,r){let a=1/0,s=null;for(let o=n,l=n+r;o<l;o++){let n=$F(e,t,i,o);n&&n.distance<a&&(s=n,a=n.distance)}return s}(t,i,n,rN(e,o),aN(r,s))}{let r,s,l=function(e,t){return t[e+7]}(e,o),c=hN[l],h=n.direction[c]>=0;h?(r=sN(e),s=oN(e,o)):(r=oN(e,o),s=sN(e));let u=mN(r,a,n,cN)?dN(r,t,i,n):null;if(u){let e=u.point[c];if(h?e<=a[s+l]:e>=a[s+l+3])return u}let d=mN(s,a,n,cN)?dN(s,t,i,n):null;return u&&d?u.distance<=d.distance?u:d:u||d||null}}var pN=function(){let e,t,i=[],n=new iN(()=>new ey);return function(){e=n.getPrimitive(),t=n.getPrimitive(),i.push(e,t);let a=r(...arguments);n.releasePrimitive(e),n.releasePrimitive(t),i.pop(),i.pop();let s=i.length;return s>0&&(t=i[s-1],e=i[s-2]),a};function r(i,n,a,s){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function h(e){let t=2*e,i=yN,n=bN;for(;!nN(t,i);)t=2*(e=sN(e));return rN(e,n)}function u(e){let t=2*e,i=yN,n=bN;for(;!nN(t,i);)t=2*(e=oN(e,n));return rN(e,n)+aN(t,i)}let d=2*i,p=vN,f=yN,m=bN;if(nN(d,f)){let t=rN(i,m),n=aN(d,f);return _F(i,p,e),s(t,n,!1,c,l+i,e)}{let d,g,v,y,b=sN(i),x=oN(i,m),w=b,A=x;if(o&&(v=e,y=t,_F(w,p,v),_F(A,p,y),d=o(v),g=o(y),g<d)){w=x,A=b;let e=d;d=g,g=e,v=y}v||(v=e,_F(w,p,v));let S,_=a(v,nN(2*w,f),d,c+1,l+w);if(2===_){let e=h(w);S=s(e,u(w)-e,!0,c+1,l+w,v)}else S=_&&r(w,n,a,s,o,l,c+1);if(S)return!0;y=t,_F(A,p,y);let E,C=a(y,nN(2*A,f),g,c+1,l+A);if(2===C){let e=h(A);E=s(e,u(A)-e,!0,c+1,l+A,y)}else E=C&&r(A,n,a,s,o,l,c+1);return!!E}}}(),fN=function(){let e=new UF,t=new UF,i=new My,n=new VF,r=new VF;return function a(s,o,l,c){let h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=2*s,d=vN,p=yN,f=bN;if(null===h&&(l.boundingBox||l.computeBoundingBox(),n.set(l.boundingBox.min,l.boundingBox.max,c),h=n),!nN(u,p)){let e=s+8,t=f[s+6];return _F(e,d,lN),!!(h.intersectsBox(lN)&&a(e,o,l,c,h)||(_F(t,d,lN),h.intersectsBox(lN)&&a(t,o,l,c,h)))}{let n=o,a=n.index,h=n.attributes.position,m=l.index,g=l.attributes.position,v=rN(s,f),y=aN(u,p);if(i.copy(c).invert(),l.boundsTree)return _F(s,d,r),r.matrix.copy(i),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:e=>r.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(c),e.b.applyMatrix4(c),e.c.applyMatrix4(c),e.needsUpdate=!0;for(let i=3*v,n=3*(y+v);i<n;i+=3)if(eN(t,i,a,h),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});for(let r=3*v,s=y+3*v;r<s;r+=3){eN(e,r,a,h),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let i=0,n=m.count;i<n;i+=3)if(eN(t,i,m,g),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}}();function mN(e,t,i,n){return _F(e,t,lN),i.intersectBox(lN,n)}var gN,vN,yN,bN,xN=[];function wN(e){gN&&xN.push(gN),gN=e,vN=new Float32Array(e),yN=new Uint16Array(e),bN=new Uint32Array(e)}function AN(){gN=null,vN=null,yN=null,bN=null,xN.length&&wN(xN.pop())}var SN=Symbol("skip tree generation"),_N=new ey,EN=new ey,CN=new My,MN=new VF,TN=new VF,PN=new Zv,DN=new Zv,ON=new Zv,kN=new Zv,IN=new Zv,RN=new ey,LN=new iN(()=>new UF),zN=class{static serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),zN.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t=(0,ye.A)({cloneBuffers:!0},t);let i,n=e.geometry,r=e._roots,a=n.getIndex();return i=t.cloneBuffers?{roots:r.map(e=>e.slice()),index:a.array.slice()}:{roots:r,index:a.array},i}static deserialize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"==typeof i)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),zN.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});i=(0,ye.A)({setIndex:!0},i);let{index:n,roots:r}=e,a=new zN(t,(0,ye.A)((0,ye.A)({},i),{},{[SN]:!0}));if(a._roots=r,i.setIndex){let i=t.getIndex();if(null===i){let i=new mb(e.index,1,!1);t.setIndex(i)}else i.array!==n&&(i.array.set(n),i.needsUpdate=!0)}return a}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[SN]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[SN]||(this._roots=function(e,t){let i,n,r,a=LF(e,t),s=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<a.length;h++){let e=a[h],t=new o(32*l(e));i=new Float32Array(t),n=new Uint32Array(t),r=new Uint16Array(t),c(0,e),s.push(t)}return s;function l(e){return e.count?1:1+l(e.left)+l(e.right)}function c(e,t){let a=e/4,s=e/2,o=!!t.count,l=t.boundingData;for(let n=0;n<6;n++)i[a+n]=l[n];if(o){let i=t.offset,o=t.count;return n[a+6]=i,r[s+14]=o,r[s+15]=65535,e+32}{let i,r=t.left,s=t.right,o=t.splitAxis;if(i=c(e+32,r),i/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[a+6]=i/4,i=c(i,s),n[a+7]=o,i}}}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ey))),this.geometry=e}refit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&Array.isArray(e)&&(e=new Set(e));let t,i,n,r,a=this.geometry,s=a.index.array,o=a.attributes.position,l=0,c=this._roots;for(let u=0,d=c.length;u<d;u++)t=c[u],i=new Uint32Array(t),n=new Uint16Array(t),r=new Float32Array(t),h(0,l),l+=t.byteLength;function h(t,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=2*t;if(65535===n[c+15]){let e=i[t+6],a=1/0,l=1/0,h=1/0,u=-1/0,d=-1/0,p=-1/0;for(let t=3*e,i=3*(e+n[c+14]);t<i;t++){let e=s[t],i=o.getX(e),n=o.getY(e),r=o.getZ(e);i<a&&(a=i),i>u&&(u=i),n<l&&(l=n),n>d&&(d=n),r<h&&(h=r),r>p&&(p=r)}return(r[t+0]!==a||r[t+1]!==l||r[t+2]!==h||r[t+3]!==u||r[t+4]!==d||r[t+5]!==p)&&(r[t+0]=a,r[t+1]=l,r[t+2]=h,r[t+3]=u,r[t+4]=d,r[t+5]=p,!0)}{let n=t+8,s=i[t+6],o=n+a,c=s+a,u=l,d=!1,p=!1;e?u||(d=e.has(o),p=e.has(c),u=!d&&!p):(d=!0,p=!0);let f=u||p,m=!1;(u||d)&&(m=h(n,a,u));let g=!1;f&&(g=h(s,a,u));let v=m||g;if(v)for(let e=0;e<3;e++){let i=n+e,a=s+e,o=r[i],l=r[i+3],c=r[a],h=r[a+3];r[t+e]=o<c?o:c,r[t+e+3]=l>h?l:h}return v}}}traverse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._roots[t],n=new Uint32Array(i),r=new Uint16Array(i);!function t(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=2*a,l=65535===r[o+15];if(l){let t=n[a+6],c=r[o+14];e(s,l,new Float32Array(i,4*a,6),t,c)}else{let r=a+8,o=n[a+6],c=n[a+7];e(s,l,new Float32Array(i,4*a,6),c)||(t(r,s+1),t(o,s+1))}}(0)}raycast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._roots,n=this.geometry,r=[],a=t.isMaterial,s=Array.isArray(t),o=n.groups,l=a?t.side:t;for(let c=0,h=i.length;c<h;c++){let a=s?t[o[c].materialIndex].side:l,h=r.length;if(wN(i[c]),uN(0,n,a,e,r),AN(),s){let e=o[c].materialIndex;for(let t=h,i=r.length;t<i;t++)r[t].face.materialIndex=e}}return r}raycastFirst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._roots,n=this.geometry,r=t.isMaterial,a=Array.isArray(t),s=null,o=n.groups,l=r?t.side:t;for(let c=0,h=i.length;c<h;c++){let r=a?t[o[c].materialIndex].side:l;wN(i[c]);let h=dN(0,n,r,e);AN(),null!=h&&(null==s||h.distance<s.distance)&&(s=h,a&&(h.face.materialIndex=o[c].materialIndex))}return s}intersectsGeometry(e,t){let i=this.geometry,n=!1;for(let r of this._roots)if(wN(r),n=fN(0,i,e,t),AN(),n)break;return n}shapecast(e,t,i){let n=this.geometry;if(e instanceof Function){if(t){let e=t;t=(t,i,n,r)=>{let a=3*i;return e(t,a,a+1,a+2,n,r)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=LN.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:s,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let e=o;o=(t,i,a,s,o)=>!!e(t,i,a,s,o)||tN(t,i,n,l,a,s,r)}else o||(o=l?(e,t,i,a)=>tN(e,t,n,l,i,a,r):(e,t,i)=>i);let c=!1,h=0;for(let u of this._roots){if(wN(u),c=pN(0,n,s,o,a,h),AN(),c)break;h+=u.byteLength}return LN.releasePrimitive(r),c}bvhcast(e,t,i){let{intersectsRanges:n,intersectsTriangles:r}=i,a=this.geometry.index,s=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;CN.copy(t).invert();let c=LN.getPrimitive(),h=LN.getPrimitive();if(r){let e=function(e,i,n,u,d,p,f,m){for(let g=n,v=n+u;g<v;g++){eN(h,3*g,o,l),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let t=e,n=e+i;t<n;t++)if(eN(c,3*t,a,s),c.needsUpdate=!0,r(c,h,t,g,d,p,f,m))return!0}return!1};if(n){let t=n;n=function(i,n,r,a,s,o,l,c){return!!t(i,n,r,a,s,o,l,c)||e(i,n,r,a,s,o,l,c)}}else n=e}e.getBoundingBox(EN),EN.applyMatrix4(t);let u=this.shapecast({intersectsBounds:e=>EN.intersectsBox(e),intersectsRange:(t,i,r,a,s,o)=>(_N.copy(o),_N.applyMatrix4(CN),e.shapecast({intersectsBounds:e=>_N.intersectsBox(e),intersectsRange:(e,r,o,l,c)=>n(t,i,e,r,a,s,l,c)}))});return LN.releasePrimitive(c),LN.releasePrimitive(h),u}intersectsBox(e,t){return MN.set(e.min,e.max,t),MN.needsUpdate=!0,this.shapecast({intersectsBounds:e=>MN.intersectsBox(e),intersectsTriangle:e=>MN.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;e.boundingBox||e.computeBoundingBox(),MN.set(e.boundingBox.min,e.boundingBox.max,t),MN.needsUpdate=!0;let s=this.geometry,o=s.attributes.position,l=s.index,c=e.attributes.position,h=e.index,u=LN.getPrimitive(),d=LN.getPrimitive(),p=DN,f=ON,m=null,g=null;n&&(m=kN,g=IN);let v=1/0,y=null,b=null;return CN.copy(t).invert(),TN.matrix.copy(CN),this.shapecast({boundsTraverseOrder:e=>MN.distanceToBox(e),intersectsBounds:(e,t,i)=>i<v&&i<a&&(t&&(TN.min.copy(e.min),TN.max.copy(e.max),TN.needsUpdate=!0),!0),intersectsRange:(i,n)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:e=>TN.distanceToBox(e),intersectsBounds:(e,t,i)=>i<v&&i<a,intersectsRange:(e,a)=>{for(let s=3*e,x=3*(e+a);s<x;s+=3){eN(d,s,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let e=3*i,t=3*(i+n);e<t;e+=3){eN(u,e,l,o),u.needsUpdate=!0;let t=u.distanceToTriangle(d,p,m);if(t<v&&(f.copy(p),g&&g.copy(m),v=t,y=e/3,b=s/3),t<r)return!0}}}});for(let e=0,a=h?h.count:c.count;e<a;e+=3){eN(d,e,h,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let t=3*i,a=3*(i+n);t<a;t+=3){eN(u,t,l,o),u.needsUpdate=!0;let i=u.distanceToTriangle(d,p,m);if(i<v&&(f.copy(p),g&&g.copy(m),v=i,y=t/3,b=e/3),i<r)return!0}}}}),LN.releasePrimitive(u),LN.releasePrimitive(d),v===1/0?null:(i.point?i.point.copy(f):i.point=f.clone(),i.distance=v,i.faceIndex=y,n&&(n.point?n.point.copy(g):n.point=g.clone(),n.point.applyMatrix4(CN),f.applyMatrix4(CN),n.distance=f.sub(n.point).length(),n.faceIndex=b),i)}closestPointToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=i*i,a=n*n,s=1/0,o=null;if(this.shapecast({boundsTraverseOrder:t=>(PN.copy(e).clamp(t.min,t.max),PN.distanceToSquared(e)),intersectsBounds:(e,t,i)=>i<s&&i<a,intersectsTriangle:(t,i)=>{t.closestPointToPoint(e,PN);let n=e.distanceToSquared(PN);return n<s&&(DN.copy(PN),s=n,o=i),n<r}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy(DN):t.point=DN.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{_F(0,new Float32Array(t),RN),e.union(RN)}),e}},BN=Nm(Vm()),jN=.5*(Math.sqrt(3)-1),FN=(3-Math.sqrt(3))/6,NN=1/3,UN=1/6,VN=(Math.sqrt(5),Math.sqrt(5),e=>0|Math.floor(e)),WN=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),HN=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function GN(e){let t=new Uint8Array(512);for(let i=0;i<256;i++)t[i]=i;for(let i=0;i<255;i++){let n=i+~~(e()*(256-i)),r=t[i];t[i]=t[n],t[n]=r}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var qN,YN=new cb,XN=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let i=1;YN.a.fromBufferAttribute(e,n),YN.b.fromBufferAttribute(e,n+1),YN.c.fromBufferAttribute(e,n+2),i*=YN.getArea(),t[n/3]=i}this.distribution=new Float32Array(e.count/3);let i=0;for(let n=0;n<t.length;n++)i+=t[n],this.distribution[n]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*i);return this.sampleFace(n,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,n=t.length-1,r=-1;for(;i<=n;){let a=Math.ceil((i+n)/2);if(0===a||t[a-1]<=e&&t[a]>e){r=a;break}e<t[a]?n=a-1:i=a+1}return r}sampleFace(e,t,i){let n=this.randomFunction(),r=this.randomFunction();return n+r>1&&(n=1-n,r=1-r),YN.a.fromBufferAttribute(this.positionAttribute,3*e),YN.b.fromBufferAttribute(this.positionAttribute,3*e+1),YN.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(YN.a,n).addScaledVector(YN.b,r).addScaledVector(YN.c,1-(n+r)),YN.getNormal(i),this}},QN=Nm(Wm()),KN=new My,ZN=new My,JN=new My;(e=>{e.is=function(e){return e&&e.__isSPEObject}})(qN||(qN={}));var $N,eU=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new My,this.copyPreviousMatrix=!0,this.hiddenMatrix=new My,this.matrixWorldRigid=new My,this.shearScale=new My,this.shearScaleInv=new My}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof Jy&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let i=this.parent;if(e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i of this.children)qN.is(i)&&i.traverseObject(e,t+1)}traverseObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t))for(let i of this.children)qN.is(i)&&i.traverseObject(e,t+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:n,q:r}=(0,QN.SVD)(t),a=KN.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=ZN.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),o=JN.copy(s).transpose();this.shearScale.makeScale(r[0],r[1],r[2]).multiply(o).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,o).copyPosition(this.matrixWorld),r.every(e=>Math.abs(r[0]-e)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,t){this.updateWorldMatrix(!0,!1);let i=(new My).copy(this.matrixWorld).invert();return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),i.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof My?e.hiddenMatrix.premultiply(i):e.applyMatrix4(i),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this}copy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return super.copy(e,t),this.hasNonUniformScale=e.hasNonUniformScale,this}onAfterRender(e,t,i,n,r,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},tU=class extends(eU(Jy)){},iU=class extends tU{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){var i;let n=this.children[e];(null===(i=n)||void 0===i?void 0:i.object)!==t&&(n&&this.remove(n),n=new iU(t),this.add(n),this.children.splice(e,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=t.matrix,n.hiddenMatrix=t.hiddenMatrix),n.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return void 0!==this.playModeVisible?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&!0===(null===(e=this.object.dataPatched.cloner)||void 0===e?void 0:e.hideBase)}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return(e=>"Mesh"===e.type)(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}get morphTargetInfluences(){if(this.object.morphTargetInfluences)return this.object.morphTargetInfluences}set morphTargetInfluences(e){}},nU=new Zv,rU=new Zv,aU=new My,sU=[new Zv(-1,1,1),new Zv(-1,-1,1),new Zv(1,-1,1),new Zv(1,1,1),new Zv(-1,1,-1),new Zv(-1,-1,-1),new Zv(1,-1,-1),new Zv(1,1,-1)],oU=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],lU=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],cU=(e,t,i)=>{e.updateEntityBoxSize(nU,rU),aU.copy(t).multiply(e.matrixWorld),0===rU.x&&0===rU.y&&0===rU.z?i.push(new Zv(nU.x,nU.y,nU.z).applyMatrix4(aU)):sU.forEach(e=>{i.push(e.clone().multiply(rU).add(nU).applyMatrix4(aU))})},hU=class extends ey{constructor(){super(...arguments),this.matrix=new My,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(e=>e.clone()),this.faces=e.faces.map(e=>e.clone()),this.edges=e.edges.map(e=>e.clone()),this.centerEdges=e.centerEdges.map(e=>e.clone()),this}setFromObjectSize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=(new My).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t){let i=[];return!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2])?e.traverseEntity(e=>{if(e.visible||e.cloner&&e.data.visible){if(!("geometry"in e))return void i.push(new Zv);cU(e,t,i)}}):cU(e,t,i),this.setFromPoints(i)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(aU.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(rU).multiplyScalar(.5),this.getCenter(nU),aU.copy(this.matrix).setPosition(nU),this.vertices=sU.map(e=>e.clone().multiply(rU).applyMatrix4(aU))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=oU.map(e=>{let[t,i]=e;return new zE(this.vertices[t],this.vertices[i])}),this.centerEdges=this.edges.map(e=>e.getCenter(new Zv))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=lU.map(e=>{let[t,i]=e;return this.vertices[t].clone().add(this.vertices[i]).multiplyScalar(.5)})}},uU={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},dU=class extends OS{constructor(){super()}getPoints(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,i=[],n=this.getCurveLengths(),r=n[n.length-1]/n.length;for(let a=0,s=this.curves;a<s.length;a++){let o=s[a],l=0===a?n[a]:n[a]-n[a-1],c=Math.ceil(t*l/r),h=o.getPoints(c);for(let t=0;t<h.length;t++){let n=h[t];e&&e.equals(n)||(i.push(n),e=n)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}},pU=.001;function fU(e,t,i){return t.clone().sub(e).cross(t.clone().sub(i)).length()<=pU}function mU(e,t){let i=new Zv(...e.position),n=new Zv(...e.controlNext.position),r=new Zv(...t.controlPrevious.position),a=new Zv(...t.position);return fU(i,n,a)&&fU(i,r,a)}function gU(e){let t=e.points.map(e=>new Zv(...e.data.position)),i=[e.points[0]],n=new Zv(...i[0].data.position);for(let h=0;h<e.points.length-1;h++)fU(n,t[h],t[h+1])||(i.push(e.points[h]),n=t[h]);i.push(e.points[e.points.length-1]);let r=e.isClosed,a=i.length-(r?0:1),s=i.length,o=[];for(let h=0;h<s;h++){let t=i[h].data,n=new Zv(...t.position),a=new Zv(...t.controlPrevious.position),l=new Zv(...t.controlNext.position),c={position:n,baseRoundness:t.roundness,controlPrevious:a,controlNext:l};if(0===t.roundness||!e.isClosed&&(0===h||h===s-1)){o[h]=(0,ye.A)((0,ye.A)({},c),{},{removedLength:0});continue}let u=r&&h==s-1?0:h+1,d=i[r&&0==h?s-1:h-1].data,p=i[u].data,f=new Zv(...d.position),m=new Zv(...p.position),g=f.clone().sub(n).normalize(),v=m.clone().sub(n).normalize();Object.assign(c,{prevDir:g,nextDir:v});let y=mU(d,t),b=mU(t,p);if(y&&b){let e=g.clone().add(v).normalize(),i=e.clone().cross(g).length()/g.dot(e);o[h]=(0,ye.A)((0,ye.A)({},c),{},{tan:i,removedLength:t.roundness/i})}else o[h]=(0,ye.A)((0,ye.A)({},c),{},{removedLength:0})}for(let h=0;h<a;h++){let e=r&&h===s-1?0:h+1,t=o[h],i=o[e];if(0!==t.removedLength||0!==i.removedLength){let e=t.position.distanceTo(i.position);t.removedLength=Math.min(t.removedLength,e/2),i.removedLength=Math.min(i.removedLength,e/2)}}let l=[];for(let h=0;h<a;h++){let e=h,t=r&&h===s-1?0:h+1,n=o[e],a=o[t],c=null;if(mU(i[e].data,i[t].data)){let e=n.position.clone(),t=a.position.clone();(0!==n.removedLength||0!==a.removedLength)&&(n.nextDir&&e.add(n.nextDir.clone().setLength(n.removedLength)),a.prevDir&&t.add(a.prevDir.clone().setLength(a.removedLength))),e.distanceTo(t)>pU&&(c=new ES(e,e.clone().lerp(t,.3),t.clone().lerp(e,.3),t))}else n.position.distanceTo(a.position)>pU&&(c=new ES(n.position,n.controlNext,a.controlPrevious,a.position));l[2*h+1]=c}for(let h=0;h<s;h++){let e=o[h];if(0===e.removedLength){l[2*h]=null;continue}let t=e.position,i=e.prevDir.clone().multiplyScalar(e.removedLength).add(t),n=e.nextDir.clone().multiplyScalar(e.removedLength).add(t),r=e.tan*e.removedLength,a=e.prevDir.clone().add(e.nextDir).normalize(),s=i.clone().lerp(n,.5),c=i.distanceTo(n)/2,u=a.clone().multiplyScalar(Math.sqrt(Math.pow(r,2)-Math.pow(c,2))).add(s),d=a.clone().multiplyScalar(-r).add(u),p=t.distanceTo(d)/t.distanceTo(s),f=e.prevDir.clone().multiplyScalar(p*t.distanceTo(i)).add(t),m=f.clone().lerp(d,2),g=i.clone().lerp(f,4/3),v=n.clone().lerp(m,4/3);l[2*h]=new ES(i,g,v,n)}let c=new dU;return l.forEach(e=>{e&&c.add(e)}),c}(e=>{e.is=function(e){return e&&e.__isEntity}})($N||($N={}));var vU=e=>$N.is(e),yU={type:"completeState",isfromEntity:!0},bU=["x","y","z"],xU=new Zv,wU=(new Zv).set(0,1,0),AU=e=>class extends(eU(e)){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.currentAnimationAction=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new hU,this._recursiveBBox=new hU,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let t=this.children[e];if($N.is(t))return t}entityChildrenCount(){let e=this.children.length;for(;e--;)if($N.is(this.children[e]))return e+1;return 0}get isConcreteEntity(){return"string"==typeof this.identity}get isVirtualEntity(){return"string"!=typeof this.identity}get isInstanceRoot(){return this.isConcreteEntity&&"Instance"===this.data.type}nearestInstanceSelfOrParent(){let e=this;for(;"Instance"!==e.data.type;){let t=e.parent;if(!$N.is(t))return;e=t}return e}forInstancesRec(e){this.instances.forEach(t=>{t.disposed||e(t),t.forInstancesRec(e)})}super_Entity(e,t){"string"==typeof e&&(this.uuid=e),this.identity=e,this.data=t,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==this.data.states.length||i){for(let e of this.data.states)jz.toOps(this.data,e.data).forEach(e=>{let i=Gk.replaceProps(e,this.data);this.dataPatched=this.data,this.updateByPatchedOp(i,this.data,t)});if(null!==e){let i=this.data.states.data(e);i&&(this.dataPatched=jz.patch(this.data,i),jz.toOps(this.data,i).forEach(e=>{this.updateByPatchedOp(e,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched,t),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,t){e.setScalar(0),t.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{vU(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let t;return this.traverseEntity(i=>{i.uuid===e&&(t=i)}),t}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children,i=t.indexOf(this)+1;if($N.is(t[i]))return t[i];if($N.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&$N.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let t=this;for(;e>0&&null!==t;)t=t.parent,e-=1;return t}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let t=this.parent;for(;t;){if(e===t)return!0;t=t.parent}return!1}countToAccestor(e){let t=0,i=this;for(;i!==e;){if(null===i)return-1;i=i.parent,t+=1}return t}forEachEntity(e){for(let t of this.children)vU(t)&&e(t)}traverseEntityAncestors(e){this.traverseAncestors(t=>{$N.is(t)&&e(t)})}traverseConcreteEntity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t))for(let i of this.children)vU(i)&&i.isConcreteEntity&&i.traverseEntity(e,t+1)}traverseEntity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t))for(let i of this.children)vU(i)&&i.traverseEntity(e,t+1)}traverseVisibleEntity(e){e(this);for(let t of this.children)vU(t)&&t.visible&&t.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(e){super.updateMatrixWorld(e),this.dispatchEvent({type:"updateMatrixWorld"})}copy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return super.copy(e,t),this.dataPatched=e.dataPatched,this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>vU(e))}isAncestorOf(e){if(this.uuid===e)return!1;let t=!1;return this.traverseEntity(i=>{i.uuid===e&&(t=!0)}),t}toObjectTransformState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x*wv.RAD2DEG,this.rotation.y*wv.RAD2DEG,this.rotation.z*wv.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return XO(t,e)}getTransformValues(e,t,i){return t[e].map((t,n)=>{var r;return null!==(r=null===i||void 0===i?void 0:i.shared.getVariable(t,[this.uuid,e,bU[n]]))&&void 0!==r?r:t})}updateTransformState(e,t){var i;let n=!1;return e.position&&(this.position.fromArray(this.getTransformValues("position",e,t)),n=!0),e.rotation&&(xU.fromArray(this.getTransformValues("rotation",e,t)).multiplyScalar(wv.DEG2RAD),this.rotation.setFromVector3(xU),n=!0),e.scale&&(this.scale.fromArray(this.getTransformValues("scale",e,t)),n=!0),void 0!==e.hiddenMatrix&&(n=!0,this.hiddenMatrix.fromArray(null!==(i=e.hiddenMatrix)&&void 0!==i?i:AL.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(e=>{e.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&void 0!==e.hiddenMatrix&&this.updateWorldMatrix(!1,!0),n}onVariableUpdate(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.resetBBoxNeedsUpdate():(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(e=>{e.invalidateClonerTransform(this)}))}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)$N.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{$N.is(e)&&e.disposeRecursively()})}toState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,ye.A)({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(e));return XO(t,e)}updateByObjUpdateOp(e,t){void 0!==e&&this.updateByOp({type:0,props:e,path:[]},(0,ye.A)((0,ye.A)({},this.data),e),t,!1)}updateByOp(e,t,i,n){let r=this.data;this.data=t;let a=e,s=wI(e.path,["states","*"]);if(null!==s){if(0===e.type){let[t]=s;if((null===this||void 0===this?void 0:this.stateSelection)===t){let t=(0,ye.A)({},e.props);if(delete t.name,Object.values(e.props).some(e=>void 0===e)){let i=this.data;if(void 0!==i){let n=mI.zoom(i,e.path.slice(2));if(n)for(let i in e.props)void 0===e.props[i]&&i in n&&(t[i]=n[i])}}a=(0,ye.A)((0,ye.A)({},e),{},{props:t,path:e.path.slice(2)})}}}else if(0===e.type){let t=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==t){if(void 0!==e.props.name&&t.name){let{name:e}=t;t=xe(t,Tm)}if(void 0!==e.props.material&&"material"in t){let{material:e}=t;t=xe(t,Pm)}let i=mI.removeOverridden(e.path,e.props,t);a=(0,ye.A)((0,ye.A)({},e),{},{props:i})}}if(this.updateByPatchedOpBase(a,jz.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),wI(e.path,["overrides"])){let n=[],r=[...e.path];for(n.push(r[1]),r.splice(0,2);r.length>0&&"descendants"===r[0];)n.push(r[1]),r.splice(0,2);if(void 0===n[n.length-1]){if(0===e.type)for(let t of Object.keys(e.props)){n[n.length-1]=t;let r=i.scene.findInstance([this.uuid,...n]);r&&(r.overrideData=e.props[t],r.updateState(Hk.apply(r.component.data,r.overrideData),i))}}else{let a=i.scene.findInstance([this.uuid,...n]);if(a){let s=mI.zoom(a.component.data,r);if(0===(e=(0,ye.A)((0,ye.A)({},e),{},{path:r})).type){let t=e.props;if(s)for(let[i,n]of Object.entries(e.props))void 0===n&&(t===e.props&&(t=(0,ye.A)({},e.props)),t[i]=s[i]);e=(0,ye.A)((0,ye.A)({},e),{},{props:t})}a.overrideData=Rz.resolve(t.overrides,n),a.updateByOp(e,qk.applySimple(a.data,e),i,!1)}}}else if(this.instances.length>0){let n;if(0===e.path.length&&0===e.type){let t;for(let i of Lz.rootOverrideProps)i in e.props&&(void 0===t&&(t={}),t[i]=e.props[i]);t&&(n=(0,ye.A)((0,ye.A)({},e),{},{props:t}))}else for(let t of Lz.rootOverrideProps)if(wI(e.path,[t])){n=e;break}void 0!==n&&this.instances.forEach(e=>{if(e.isInstanceRoot){let t=Hk.filterOp(e.overrideData,n);t&&e.updateByOp(t,qk.applySimple(e.data,t),i,!0)}}),this.instances.forEach(n=>{if(!n.isInstanceRoot){let a=Hk.filterOp(n.overrideData,e);if(a){let s;s=r===n.data&&e===a?t:qk.applySimple(n.data,a),n.updateByOp(a,s,i,!0)}}})}}updateByPatchedOpBase(e,t,i){if(this.dataPatched=t,0===e.path.length&&0===e.type)void 0!==e.props.type&&!kL.is(e.props.type)&&uU.changeEntityProptotype(this,t,i);else if(1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&"type"in e.props){uU.changeEntityProptotype(this,t,i);for(let e of this.children)$N.is(e)&&e.updateVisible(i.scene)}this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){if(0===e.path.length&&0===e.type?this.updateState(e.props,i):0===e.type&&("resolutionLevel"in e.props||"useChildrenColors"in e.props)&&this.updateState(t,i),"morphTargetInfluences"===e.path[0]&&0===e.type){var n;let r=null===(n=t.morphTargetInfluences.get(e.path[1]))||void 0===n?void 0:n.data.name;r&&this.updateMorphInfluences(r,i.shared.getVariable(e.props.value,[this.uuid,"morphTargetInfluences",r]))}if(null!==wI(e.path,["pathSnapping"])&&this.updatePathSnapping(t.pathSnapping),null!==wI(e.path,["cloner"])){let n=qk.drop(e,1);0===n.path.length&&0===n.type&&!0===n.props.disabled?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(t.cloner,i.scene):(this.setFromClonerState(t.cloner,i),this.expandCloner(i.scene)),this.updateVisible(i.scene)}}updatePathSnapping(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataPatched.pathSnapping;this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(e){var t,i,n,r,a,s,o,l,c,h,u;let d=null!==(t=null===(i=this._updatedPathSnapping)||void 0===i?void 0:i.pathId)&&void 0!==t?t:this.dataPatched.pathSnapping.pathId,p=null!==(n=null!==(r=null===(a=this._updatedPathSnapping)||void 0===a?void 0:a.slide)&&void 0!==r?r:this.dataPatched.pathSnapping.slide)&&void 0!==n?n:0,f=null!==(s=null!==(o=null===(l=this._updatedPathSnapping)||void 0===l?void 0:l.offset)&&void 0!==o?o:this.dataPatched.pathSnapping.offset)&&void 0!==s?s:0,m=null!==(c=null===(h=this._updatedPathSnapping)||void 0===h?void 0:h.orientation)&&void 0!==c?c:this.dataPatched.pathSnapping.orientation;if(null===d)return;let g=e.find(d);if(!g||!1===this._needApplyPathSnapping)return;this._needApplyPathSnapping=!1;let v=g.data;if(v.geometry.path.points.length<=1)return;let y=gU(v.geometry.path),b=(p+f)%1;p+f===1&&0===b&&(b=1);let x=null;try{x=y.curves.length?y.getPointAt(b):null}catch(b6){}if(null===x)return;let w=this.parent?null===(u=this.parent)||void 0===u?void 0:u.matrixWorld:new My;g.updateMatrixWorld();let A=(new My).multiplyMatrices(w.clone().invert(),g.matrixWorld);x.applyMatrix4(A);let S={position:x.toArray(),rotation:v.rotation};if("tangential"===m){let e=(new My).extractRotation(g.matrixWorld),t=y.getTangentAt(b).applyMatrix4(e).add(x),i=(new My).lookAt(x,t,wU),n=xU.setFromEuler((new By).setFromRotationMatrix(i)).multiplyScalar(wv.RAD2DEG);S=(0,ye.A)((0,ye.A)({},S),{},{rotation:n.toArray()})}this.updateTransformState(S),this.traverseEntity(e=>{e._cameraType&&e.dispatchEvent(yU)})}updateVisible(e){var t,i;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||null!==(t=this.dataPatched.cloner.disabled)&&void 0!==t&&t||!0!==(null===(i=this.dataPatched.cloner)||void 0===i?void 0:i.hideBase)),!e)return;let n=!1;this.traverseEntity(e=>{if("Splat"===e.data.type)return n=!0,!0}),n&&e.reloadSplats()}updateState_Entity(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),void 0!==e.visible&&(this.updateVisible(null===t||void 0===t?void 0:t.scene),this.resetBBoxNeedsUpdate()),t&&"cloner"in e&&void 0!==e.cloner&&(this.setFromClonerState(e.cloner,t),this.updateVisible(t.scene)),this.updateTransformState(e,t)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof uU.Cloner&&"toObject"===e.parameters.type)}setFromClonerState(e,t){this.disposed||(null===e||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):void 0===this.cloner?(this.cloner=new uU.Cloner(this,e),t.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,t.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}requestRender(){this.dispatchEvent({type:"requestRender"})}},SU=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a,s,o,l;let c=null===(i=e.parameters)||void 0===i?void 0:i.radiusTop,h=null===(n=e.parameters)||void 0===n?void 0:n.radiusBottom,u=Object.assign({},null!==(r=null===t||void 0===t?void 0:t.parameters)&&void 0!==r?r:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);u.thetaLength=wv.clamp(u.thetaLength,0,360);let d=u.width/2,p=null!==(a=u.radiusTop)&&void 0!==a?a:d,f=null!==(s=u.radiusBottom)&&void 0!==s?s:d;if(p===f?(p=d,f=d):p>f?(p=d,f=f*d/p):(p=p*d/f,f=d),u.shapeBlendNode){p=null!==c&&void 0!==c?c:d,f=null!==h&&void 0!==h?h:d;let e=2*Math.max(p,f);u.width=e,u.depth=e}return{parameters:Object.assign(u,{width:Math.abs(u.width),height:Math.abs(null!==(o=u.height)&&void 0!==o?o:u.width),depth:Math.abs(null!==(l=u.depth)&&void 0!==l?l:u.width),radiusTop:p,radiusBottom:f})}}static build(e){let t,{width:i,depth:n,height:r,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c,radiusTop:h,radiusBottom:u,cornerRadius:d,cornerSegments:p,hollow:f}=e.parameters;return 0===c?(t=new Cb,t.setAttribute("position",new yb([],3))):t=d||f?new CU(h,u,r,a,s,o,l,c*Math.PI/180,d,d,p,f):new RS(h,u,r,a,s,o,l,c*Math.PI/180),t.scale(1,1,n/i),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"CylinderGeometry"})})}};function _U(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function EU(e){return new Av(e.y,-e.x)}var CU=class extends Cb{constructor(e,t,i,n,r,a,s,o,l,c,h,u){let d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,a=void 0!==a&&a,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI,a&&(l=0,c=0);let p=[],f=[],m=[],g=[],v=0,y=i/2,b=new Zv,x=new Zv;d&&0==e&&(e=l),d&&0==t&&(t=c);let w=new Av(e,y),A=new Av(t,-y),S=null,_=null,E=null,C=null,M=w.clone().sub(A),T=0,P=0,D=0;u>0&&(T=Math.min(e,t)*(1-u),P=e-T,D=t-T);let O=w.clone();O.x-=T;let k=Math.PI-M.angle(),I=M.angle(),R=Math.tan(I/2),L=Math.tan(k/2),z=R+L,B=u?z:L,j=u?z:R;if(l=Math.min(l,(e-P)/B,M.length()/z),c=Math.min(c,(t-D)/j,M.length()/z),l>0){let e=l/R;S=w.clone().sub(new Av(e,l)),u&&(E=S.clone(),E.x-=T-z*l),w.sub(M.clone().setLength(e))}if(c>0){let e=c/L;_=A.clone().sub(new Av(e,-c)),A.add(M.clone().setLength(e)),u&&(C=_.clone(),C.x-=T-z*c,O.sub(M.clone().setLength(e)))}M=w.clone().sub(A);let F=M.length()<.5,N=[];for(let H=0;H<=n;H++){let h=[],d=H/n,p=d*o+s,y=new Av(Math.sin(p),Math.cos(p));if(C&&_?(U(h,d,y,k,c,C,-1,!0),U(h,d,y,I,c,_,-1,!1)):_?(V(h,y,_.x,0,-1),U(h,d,y,I,c,_,-1,!1)):a||V(h,y,t,D,-1),_U(EU(M).normalize(),y,b),!F)for(let e=0;e<=r;e++){let t=e/r;_U(M.clone().multiplyScalar(t).add(A),y,x),f.push(x.x,x.y,x.z),m.push(b.x,b.y,b.z),g.push(d,.5+x.y/i),h.push(v++)}if(E&&S?(U(h,d,y,k,l,S,1,!1),U(h,d,y,I,l,E,1,!0)):S?(U(h,d,y,k,l,S,1,!1),V(h,y,S.x,0,1)):a||V(h,y,e,P,1),u&&!F){_U(EU(M).multiplyScalar(-1).normalize(),y,b);for(let e=0;e<=r;e++){let t=e/r;_U(M.clone().multiplyScalar(-t).add(O),y,x),f.push(x.x,x.y,x.z),m.push(b.x,b.y,b.z),g.push(d,.5+x.y/i),h.push(v++)}}u&&!a&&h.push(h[0]),N.push(h)}for(let H=0;H<N.length-1;H++)for(let e=0;e<N[0].length-1;e++){if(a&&u&&e==r)continue;let t=N[H][e],i=N[H+1][e],n=N[H+1][e+1],s=N[H][e+1],o=f[3*n+0],l=f[3*n+2];p.push(t,i,s),(0!=o||0!=l)&&p.push(i,n,s)}function U(e,t,n,r,a,s,o,l){for(let c=0;c<h+1;c++){let u=c/h,d=o<0?u:1-u;l&&(d-=1),d*=r;let p=new Av(Math.sin(d),Math.cos(d)*o);_U(p.clone().multiplyScalar(a).add(s),n,x),f.push(x.x,x.y,x.z),_U(p,n,b),m.push(b.x,b.y,b.z),g.push(t,.5+x.y/i),e.push(v++)}}function V(e,t,i,n,r){let a=new Zv,s=new Av,o=[i,n];r<0&&o.reverse();for(let l of o)s.set(l,y*r),_U(s,t,a),f.push(a.x,a.y,a.z),m.push(0,r,0),g.push(.5,.5),e.push(v++)}function W(i,n,r){let a=new Av(Math.sin(r),Math.cos(r)),s=new Av(-Math.cos(r),Math.sin(r)),o=new Zv,l=i<0?(e,t,i)=>p.push(e,t,i):(e,t,i)=>p.push(e,i,t);_U(new Av((e+t+P+D)/4,0),a,o),f.push(o.x,o.y,o.z),m.push(s.x,0,s.y),g.push(.5,.5);let c=v++;for(let e of n){let t=f.slice(3*e,3*e+3);f.push(...t),m.push(s.x,0,s.y);let i=g.slice(2*e,2*e+2);g.push(...i),v++}for(let e=c+1;e<v-1;e++)l(c,e,e+1);l(c,v-1,c+1)}o<2*Math.PI&&(W(-1,N[0],s),W(1,N[N.length-1],s+o)),this.setIndex(p),this.setAttribute("position",new yb(f,3)),this.setAttribute("normal",new yb(m,3)),this.setAttribute("uv",new yb(g,2))}},MU=Math.PI/2,TU=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4;super(),this.type="BoxGeometry",n=Math.floor(n),r=Math.floor(r),a=Math.floor(a),o=Math.floor(o),s=Math.min(s,e/2,t/2,i/2);let l=[],c=[],h=[],u=[],d=0;function p(e,t,i,n,r,a,o,p,f,m){let g=(a-2*s)/f,v=(o-2*s)/m,y=a/2-s,b=o/2-s,x=p/2,w=f+1,A=m+1,S=0,_=new Zv;for(let s=0;s<A;s++){let a=s*v-b;for(let o=0;o<w;o++){let l=o*g-y;_[e]=l*n,_[t]=a*r,_[i]=x,c.push(_.x,_.y,_.z),_[e]=0,_[t]=0,_[i]=p>0?1:-1,h.push(_.x,_.y,_.z),u.push(o/f),u.push(1-s/m),S+=1}}for(let s=0;s<m;s++)for(let e=0;e<f;e++){let t=d+e+w*s,i=d+e+w*(s+1),n=d+(e+1)+w*(s+1),r=d+(e+1)+w*s;l.push(t,i,r),l.push(i,n,r)}d+=S}function f(e,t,i,n,r,a,p,f,m,g){let v=(p-2*s)/g,y=p/2-s,b=f/2-s,x=m/2,w=g+1,A=0,S=new Zv,_=new Zv;for(let l=0;l<o+1;l++){let d=l/o*MU,p=Math.sin(d)*s,f=(1-Math.cos(d))*s,m=Math.sin(d),E=Math.cos(d);S[t]=(b+p)*r,S[i]=(x-f)*a,_[e]=0,_[t]=m*Math.sign(S[t]),_[i]=E*Math.sign(S[i]);for(let t=0;t<w;t++){let i=t*v-y;S[e]=i*n,c.push(S.x,S.y,S.z),h.push(_.x,_.y,_.z),u.push(t/g),u.push(0),A+=1}}for(let s=0;s<o;s++)for(let e=0;e<g;e++){let t=d+e+w*s,i=d+e+w*(s+1),n=d+(e+1)+w*(s+1),r=d+(e+1)+w*s;l.push(t,i,r),l.push(i,n,r)}d+=A}function m(n,r,a){let p=new Zv,f=new Zv(e/2,t/2,i/2);f.subScalar(s);let m=[],g=n*r*a>0?(e,t,i)=>l.push(e,t,i):(e,t,i)=>l.push(e,i,t);for(let e=0;e<=o;e++){let t=[],i=MU*(1-e/o),l=Math.cos(i),g=Math.sin(i),v=0;for(let o=0;o<=e;o++){let i=Math.cos(v),o=Math.sin(v);p.x=l*i,p.y=g,p.z=l*o;let m=f.clone().addScaledVector(p,s);c.push(n*m.x,r*m.y,a*m.z),h.push(n*p.x,r*p.y,a*p.z),u.push(0,0),t.push(d++),v+=MU/e}m.push(t)}let v=m.length-1;for(let e=0;e<v;e++){let t=m[e],i=m[e+1],n=t.length-1;g(t[0],i[1],i[0]);for(let e=1;e<=n;e++)g(t[e-1],t[e],i[e]),g(t[e],i[e+1],i[e])}}p("z","y","x",-1,-1,i,t,e,a,r),p("z","y","x",1,-1,i,t,-e,a,r),p("x","z","y",1,1,e,i,t,n,a),p("x","z","y",1,-1,e,i,-t,n,a),p("x","y","z",1,-1,e,t,i,n,r),p("x","y","z",-1,-1,e,t,-i,n,r),s>0&&(f("z","y","x",-1,-1,1,i,t,e,a),f("z","y","x",1,-1,-1,i,t,e,a),f("z","y","x",-1,1,-1,i,t,e,a),f("z","y","x",1,1,1,i,t,e,a),f("x","y","z",-1,-1,-1,e,t,i,n),f("x","y","z",1,-1,1,e,t,i,n),f("x","y","z",-1,1,1,e,t,i,n),f("x","y","z",1,1,-1,e,t,i,n),f("y","x","z",-1,-1,1,t,e,i,r),f("y","x","z",1,-1,-1,t,e,i,r),f("y","x","z",1,1,1,t,e,i,r),f("y","x","z",-1,1,-1,t,e,i,r),m(1,1,1),m(-1,1,1),m(1,-1,1),m(-1,-1,1),m(1,1,-1),m(-1,1,-1),m(1,-1,-1),m(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new yb(c,3)),this.setAttribute("normal",new yb(h,3)),this.setAttribute("uv",new yb(u,2))}},PU=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;super(),this.type="PolyhedronGeometryRound";let s=[],o=[],l=[];return function(){r=Math.min(.99999,r),0==r&&(a=0);let o={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],c=new Zv,h=c.clone(),u=new cb,d=r*n,p=n-d,f=a+1,m=new Zv,g=(e,t)=>m.subVectors(e,t).normalize(),v=(e,t)=>Array(e).fill(void 0).map(t),y=v(e.length/3,(t,i)=>(new Zv).fromArray(e,3*i).setLength(n)),b=[],x=1e6;for(let e=0;e<y.length;e++){let i,n,r,a=y[e],s=[],o=1e10,l=-1;for(;-1!=(l=t.indexOf(e,l+1));){let e=l-l%3;i=t[e+(l+1)%3],n=t[e+(l+2)%3],r=a.distanceToSquared(y[i]),o=Math.min(o,r),s.push([i,n,r])}o+=1e-6;let c=[],h=0,u=s.length;for(let t=0;t<u;t++){var w;[i,n,r]=s[h];let t=1==(null===(w=b[i])||void 0===w?void 0:w.includes(e));r<=o&&c.push(i+ +t*x),h=s.findIndex(e=>e[0]==n)}b.push(c)}let A=[];{let e,t,i=0,n=0,r=3==o;for(let s=0;s<=a;s++){e=s*(s+1)/2,t=(s+1)*(s+2)/2;for(let o=0;o<a-s;o++)[i,n]=[e+o+s+2,t+o+s+3],A.push(e,t,...r?[n,e]:[i,t],n,i),[e,t]=[i,n];A.push(e,t,e+a+2)}}let S=c.clone(),_=c.clone(),E=c.clone(),C=c.clone(),M=c.clone(),T=[],P=v(y.length,()=>v(o,()=>c.clone()));for(let e=0;e<y.length;e++){c.copy(y[e]).normalize(),S.copy(c).multiplyScalar(p);let t=b[e];for(let a=0;a<t.length;a++){let i=t[a],n=t[(a+1)%o];u.setFromPointsAndIndices(y,e,i%x,n%x),u.b.sub(u.a).setLength(1e10).add(u.a),u.c.sub(u.a).setLength(1e10).add(u.a),u.closestPointToPoint(S,P[e][a])}let i=[],n=[],r=[],v=new Zv;0==a&&[...P[e]].reduce((e,t)=>e.add(t),v).multiplyScalar(1/o);for(let s=0;s<o;s++){let t=[],l=(s-1+o)%o,u=P[e][l],y=P[e][s];c.copy(u).sub(S),h.copy(y).sub(S);let b=S.angleTo(c),x=c.angleTo(h),w=Math.cos(b)*d;0==a?_.copy(v):_.copy(S).setLength(p+w),n.push(w);let A=[_,u,y];for(let e=0;e<2;e++){let n=A[e],r=A[e+1];C.subVectors(n,S),M.subVectors(r,S),E.crossVectors(C,M).normalize();for(let a=0;a<f;a++){let r=[b,x][e]*a/f;c.copy(C).applyAxisAngle(E,r).add(S),i.push(c.clone()),e&&(g(c,S),t.push([0==a?n:c.clone(),m.clone()]))}e&&(g(r,S),t.push([r,m.clone()]))}r.push(t)}T.push(r);let w=2*f,D=2;for(let e=0;e<o;e++){let t=w*e,r=w*((e+1)%o),a=[i[t]];for(let s=1;s<f;s++){C=i[t+s],M=i[r+s],a.push(C);for(let t=1,i=s-D+1;t<=i;t++)c.lerpVectors(C,M,t/(i+1)),c.sub(S).setLength(n[e]).add(S),a.push(c.clone());a.push(M)}for(let e=0;e<f;e++)a.push(i[e+f+t]);a.push(i[r+f]);let h=A.map(e=>a[e]);s.push(...h.map(e=>[e.x,e.y,e.z]).flat()),l.push(...h.map(e=>(g(e,S),[m.x,m.y,m.z])).flat())}}let D=[];for(let e=0;e<b.length;e++)for(let t=0;t<o;t++){let i=b[e][t];if(i<x){let n=b[i].findIndex(t=>t%x==e),r=T[e][t],a=T[i][n];for(let e=0;e<f;e++){let t=r[e],i=a[f-e],n=r[e+1];[t,i,n,n,i,a[f-(e+1)]].forEach(e=>{s.push(e[0].x,e[0].y,e[0].z),l.push(e[1].x,e[1].y,e[1].z)})}D.push(r[0][0],a[f][0],r[f][0],a[0][0])}}for(;D.length;){let e,t,i,n;[e,t]=D.splice(0,2);let r=[e];for(;e!=t;)r.push(t),i=D.indexOf(t),n=i%2,t=D.splice(i-n,2)[1-n];m.subVectors(r[0],r[1]).cross(c.subVectors(r[0],r[2])).normalize();let a=m.dot(r[0])<0;a&&m.negate();for(let o=1;o<=r.length-2;o++)[r[o+ +a],r[o+1-+a],r[0]].forEach(e=>{s.push(e.x,e.y,e.z),l.push(m.x,m.y,m.z)})}}(),function(){let e=new Zv;for(let p=0;p<s.length;p+=3){e.x=s[p+0],e.y=s[p+1],e.z=s[p+2];let t=u(e)/2/Math.PI+.5,i=d(e)/Math.PI+.5;o.push(t,1-i)}let t=new Zv,i=new Zv,n=new Zv,r=new Zv,a=new Av,l=new Av,c=new Av,h=(e,t,i,n)=>{n<0&&1===e.x&&(o[t]=e.x-1),0===i.x&&0===i.z&&(o[t]=n/2/Math.PI+.5)};for(let p=0,f=0;p<s.length;p+=9,f+=6){t.set(s[p+0],s[p+1],s[p+2]),i.set(s[p+3],s[p+4],s[p+5]),n.set(s[p+6],s[p+7],s[p+8]),a.set(o[f+0],o[f+1]),l.set(o[f+2],o[f+3]),c.set(o[f+4],o[f+5]),r.copy(t).add(i).add(n).divideScalar(3);let e=u(r);h(a,f+0,t,e),h(l,f+2,i,e),h(c,f+4,n,e)}for(let s=0;s<o.length;s+=6){let e=o[s+0],t=o[s+2],i=o[s+4],n=Math.max(e,t,i),r=Math.min(e,t,i);n>.9&&r<.1&&(e<.2&&(o[s+0]+=1),t<.2&&(o[s+2]+=1),i<.2&&(o[s+4]+=1))}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}(),this.setAttribute("position",new yb(s,3)),this.setAttribute("normal",new yb(l,3)),void this.setAttribute("uv",new yb(o,2))}static fromJSON(e){return new PU(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},DU=class extends PU{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=(1+Math.sqrt(5))/2,r=1/n,a="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,e,t,i),this.type=a}static fromJSON(e){return new DU(e.radius,e.corner,e.cornerSides)}},OU=1e-12,kU=class{constructor(e){this.position=new Av,this.startPosition=new Av,this.uuid=wv.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new kU(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},IU=class extends kU{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new IU(this.parent).copy(this)}},RU=class extends kU{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new IU(this),new IU(this))}static create(e,t){let i=new RU(e,new Av(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let i=0,n=this.controls.length;i<n;i++){let n=this.controls[i];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new RU(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var e,t;return[null===(e=this.curveBefore)||void 0===e?void 0:e.getTangentAt(1),null===(t=this.curveAfter)||void 0===t?void 0:t.getTangentAt(0)]}computeNormals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,[i,n]=this.computeTangents();return i&&n&&(LU(i,e),LU(n,t)),[e,t]}computeTangent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function LU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av,i=e.length();return t.set(-e.y/i,e.x/i)}var zU=e=>e,BU=new Av,jU=new Av,FU=new Av,NU=new Av,UU=new Av,VU=new Av,WU=new Zv,HU=new Zv;function GU(e){let t=new Av;t.addVectors(e.v0,BU.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new Av;return i.addVectors(e.v2,jU.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new _S(e.v0,t,i,e.v2)}function qU(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(e-t)<i}function YU(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<i}function XU(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<i}function QU(e,t,i){let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),a=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((r*r+n*n-a*a)/(2*r*n))}function KU(e,t,i){return iV(e,t)&&iV(t,i)&&ZU(e.position,t.position,i.position)}function ZU(e,t,i){return 0===BU.copy(t).sub(e).cross(jU.copy(i).sub(e))}function JU(e,t,i,n,r){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(e.y-t.y)/a,c=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return n.set(o+l,s+c),r.set(o-l,s-c),[n,r]}function $U(e,t,i){return e.distanceTo(i)<t.distanceTo(i)?t:e}function eV(e,t,i,n,r,a){let s,o=t.x-e.x,l=t.y-e.y,c=i.x-e.x,h=i.y-e.y,u=Math.sqrt((o+c)*(o+c)+(l+h)*(l+h));return QU(t,e,i)>Math.PI&&(u*=-1),s=qU(h,l)?(l+h)*(n/u-.5)*8/3/(o-c):(o+c)*(n/u-.5)*8/3/(h-l),r.set(t.x-s*l,t.y+s*o),a.set(i.x+s*h,i.y-s*c),[r,a]}function tV(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function iV(e,t){return ZU(e.position,e.controls[1].position,t.position)&&ZU(e.position,t.controls[0].position,t.position)}function nV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(let r=0,a=e.length;r<a;r++){let a=e[r],s=0;if(i&&void 0!==a.roundedCurveCorner){let e=.5*rV(a.roundedCurveCorner,t);r>0&&(n[r-1]+=e),s+=e}void 0!==a.curveAfter&&(s+=rV(a.curveAfter,t)),n.push(s)}return e.length>0&&i&&void 0!==e[0].roundedCurveCorner&&(n[e.length-1]+=.5*rV(e[0].roundedCurveCorner,t)),n}function rV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e&&e instanceof mS?2*t:e&&(e instanceof CS||e instanceof MS)?1:e&&e instanceof PS?t*e.points.length:t}var aV,sV,oV=new Av,lV=new Av,cV=new Av,hV=new Av,uV=new Av,dV=new Av,pV=class extends jS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;super(),this.points=[],this.shapeHoles=[],this.plane=new nx(new Zv(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=wv.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let n=new pV;return n.isClosed=e.isClosed,n.points=e.points.map(e=>RU.create(e.id,e.data)),"number"==typeof e.roundness&&(n.roundness=e.roundness),n.shapeHoles=e.shapeHoles.map(e=>pV.createFromState(e)),void 0!==t&&void 0!==i&&n.applySize(t,i),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(t=>t.uuid===e);if(i<0){let i=t;for(let t=0,n=this.shapeHoles.length;t<n;t++){let n=this.shapeHoles[t],r=n.points.length,a=n.getPointIndexById(e);if(!(a<0))return a+i;i+=r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let i=0,n=this.shapeHoles.length;i<n;i++){let n=this.shapeHoles[i],r=e-t;if(r<=n.points.length-1)return n.points[r];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,n=this.shapeHoles.length;i<n;i++){let n=this.shapeHoles[i],r=n.points.indexOf(e);if(r>=0)return t+r;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=oV.set(e,t);for(let n=0,r=this.points.length;n<r;n++){let e=this.points[n];e.position.multiply(i),e.controls[0].position.multiply(i),e.controls[1].position.multiply(i)}for(let n=0,r=this.shapeHoles.length;n<r;n++)this.shapeHoles[n].applyScale(e,t);this._update()}createPoint(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wv.generateUUID();t=e instanceof Av?e:new Av(e,i);let r=new RU(n,t);return r.roundness=this.roundness,r}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,i=this.shapeHoles.length;t<i;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(t=>t.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let n=i?this.roundedCurveDivisions:this.curveDivisions;return function(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=HU.set(0,0,0),s=0,o=[];for(let l=0;l<t.length;l++){let r=zU(t[l]),c=BU,h=rV(r,n);o.push(h);for(let t=0;t<=h;t++)if(r instanceof _S||r instanceof TS||r instanceof CS){if(r.getPoint(t/h,c),a.set(c.x,c.y,0),void 0!==i&&XU(i,a))continue;void 0===i&&(i=WU),i.copy(a),e.setXYZ(s,a.x,a.y,a.z),s++}}r&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++)}(e,i?this.roundedCurves:this.curves,t,this.autoClose),n.reduce((e,t)=>e+t,0)+1}computeCurveDivisions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return this.curveDivisions=nV(this.points,e,!1),this.roundedCurveDivisions=nV(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 2*function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=HU.set(0,0,0),s=0,o=[];for(let c=0;c<t.length;c++){if(!1===i[c])continue;let r,h=zU(t[c]),u=BU,d=rV(h,n);o.push(d);for(let t=0;t<=d;t++)if(h instanceof _S||h instanceof TS||h instanceof CS){var l;if(h.getPoint(t/d,u),a.set(u.x,u.y,0),null!==(l=r)&&void 0!==l&&l.equals(a))continue;void 0===r?r=WU:(e.setXYZ(s,r.x,r.y,r.z),s++,e.setXYZ(s,a.x,a.y,a.z),s++),r.copy(a)}}return r&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),o}(e,this.curves,t,i,this.autoClose).reduce((e,t)=>e+t,0)}extractShapePointsToFlatArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0;for(let s=0;s<t.length;s++){let r=zU(t[s]),o=rV(r,n),l=BU;for(let t=0;t<=o;t++)if(r instanceof _S||r instanceof TS||r instanceof CS){if(r.getPoint(t/o,l),void 0!==i&&YU(i,l,OU))continue;void 0===i&&(i=jU),i.copy(l),e.push(l.x,l.y),a++}}return qU(e[0],e[e.length-2],OU)&&qU(e[1],e[e.length-1],OU)&&(e.pop(),e.pop()),r&&a>1&&!(qU(e[a-1],e[1],OU)&&qU(e[a-2],e[0],OU))&&(e.push(e[0],e[1]),a++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let n=t?this.roundedCurveDivisions:this.curveDivisions,r=0;t&&void 0!==this.points[0].roundedCurveCorner&&(r=.5*rV(this.points[0].roundedCurveCorner,this.subdivision));let a=e-r;a<0&&(a+=n.reduce((e,t)=>e+t,0));for(let s=0,o=n.length;s<o;s++){let e=n[s];if(a<i+e)return[s,(a-i+1)/e];i+=e}return[0,1]}getCurveT(e,t,i){let n=this.points[e],r=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,s=a[e];if(tV(n,r)){let e=n.position.distanceTo(r.position);return n.position.distanceTo(oV.set(i.x,i.y))/e}let o=0;for(let l=0;l<e;l++)o+=a[l];return(t-o)/s}dispose(){}_applyCurveForPoint(e,t){tV(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let n=i.clone();e.roundedCurveBefore=n,t.roundedCurveAfter=n,e.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let n=0,r=this.points.length;n<r;n++){let e=this.points[n];if(0===n)this.moveTo(e.position.x,e.position.y);else{let t=this.points[n-1];this._applyCurveForPoint(e,t)}}let e=this.getLastPoint();if(null!==e&&void 0!==e&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let e=this.points[0],t=this.points[this.points.length-1];this._applyCurveForPoint(e,t)}if(this.points.length>2){let e=0;for(let n=0,r=this.points.length;n<r;n++){var t,i;let r=this.points[n],a=null!==(t=this.points[n-1])&&void 0!==t?t:this.points[this.points.length-1],s=null!==(i=this.points[n+1])&&void 0!==i?i:this.points[0],o=r.roundness,l=a&&s&&KU(a,r,s);if(!r.controlsMoved()&&o>0&&!l){let t=r.curveBefore,i=r.curveAfter;if(void 0===t||void 0===i)continue;let a,s=r.roundedCurveBefore,l=r.roundedCurveAfter,c=t.getLength(),h=i.getLength(),u=Math.min(o,.499*c),d=Math.min(o,.499*h),p=Math.min(u,d),f=1-p/c,m=p/h,g=t.getPointAt(f,oV),v=i.getPointAt(m,lV);if(this._subSplitCurve(t,s,f,g,void 0),this._subSplitCurve(i,l,m,void 0,v),this.useCubicForRoundedCorners){let e=QU(g,r.position,v)/2,t=Math.tan(e)*g.distanceTo(r.position),[i,n]=JU(g,v,t,cV,hV),s=$U(i,n,r.position),[o,l]=eV(s,g,v,t,uV,dV);a=new _S(g.clone(),o.clone(),l.clone(),v.clone())}else a=new TS(g.clone(),r.position.clone(),v.clone());r.roundedCurveCorner=a,this.roundedCurves.splice(n+e,0,a),e++}}}}_subSplitCurve(e,t,i,n,r){if(!(e instanceof CS)){let a=e,s=t,o=a.getUtoTmapping(i,0),l=function(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,a=BU.subVectors(t,e).multiplyScalar(r).add(e),s=jU.subVectors(i,t).multiplyScalar(r).add(t),o=FU.subVectors(n,i).multiplyScalar(r).add(i),l=a,c=NU.subVectors(s,a).multiplyScalar(r).add(a),h=UU.subVectors(o,s).multiplyScalar(r).add(s),u=o,d=VU.subVectors(h,c).multiplyScalar(r).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,n.x,n.y]}(a.v0,a.v1,a.v2,a.v3,o);return void 0!==n&&(s.v0.set(l[0],l[1]),s.v1.set(l[2],l[3]),s.v2.set(l[4],l[5]),s.v3.set(l[6],l[7])),void 0!==r&&(s.v0.set(l[6],l[7]),s.v1.set(l[8],l[9]),s.v2.set(l[10],l[11]),s.v3.set(l[12],l[13])),s}return void 0!==n&&t.v2.copy(n),void 0!==r&&t.v1.copy(r),t}clone(){let e=new pV(this._width,this._height);return e.points=this.points.map(e=>e.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(e=>e.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let i=e.points.length/7;for(let n=0;n<i;n++){let t=7*n,i=e.points[t+0],r=e.points[t+1],a=e.points[t+2],s=e.points[t+3],o=e.points[t+4],l=e.points[t+5],c=e.points[t+6],h=new RU(wv.generateUUID(),new Av(i,r));h.controls[0].position.set(a,s),h.controls[1].position.set(o,l),h.roundness=c,this.points.push(h)}return this.shapeHoles=null!==(t=e.shapeHoles)&&void 0!==t&&t.length?e.shapeHoles.map(e=>{let t=new pV;return t.fromJSON(e),t}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isText=t;let i=(e,t)=>{t instanceof _S&&t.v3.equals(e.position)&&e.controls[0].position.copy(t.v2)};return this.points=(e=>{let t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t]instanceof TS&&(e[t]=GU(e[t]));for(t=0,n=e.length;t<n;t++){let n,a=e[t],s=t>0?e[t-1]:null;a instanceof _S?(n=this.createPoint(a.v0),n.controls[1].position.copy(a.v1)):a instanceof CS&&(n=this.createPoint(a.v1)),void 0!==n&&(null!==s&&i(n,s),r.push(n))}let a=e[e.length-1],s=!1;return a instanceof _S?a.v3.equals(r[0].position)&&(r[0].controls[0].position.copy(a.v2),s=!0):a instanceof CS&&a.v2.equals(r[0].position)&&(s=!0),this.isClosed=s,r})(e.curves),e instanceof jS&&(this.shapeHoles=e.holes.map(e=>{let t=new pV;return t.fromShape(e),t})),this.update(),this}updatePoint(e,t){let i=this.getPointByUuid(e);i&&(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.roundness&&(i.roundness=t.roundness),void 0!==t.areControlsDirectionsMirrored&&(i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let n=null===(i=this.getPointByUuid(e))||void 0===i?void 0:i.controls[0];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let n=null===(i=this.getPointByUuid(e))||void 0===i?void 0:i.controls[1];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}},fV=2*Math.PI;function mV(e,t,i,n,r){let{x:a,y:s}=e;return{x:a*t+n,y:s*i+r}}function gV(e,t){let i=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(e),r=Math.sin(e),a=Math.cos(e+t),s=Math.sin(e+t);return[{x:n-r*i,y:r+n*i},{x:a+s*i,y:s-a*i},{x:a,y:s}]}function vV(e,t,i,n){let r=e*n-t*i<0?-1:1,a=Math.min(1,Math.max(-1,e*i+t*n));return r*Math.acos(a)}function yV(e){let{px:t,py:i,cx:n,cy:r,rx:a,ry:s,largeArcFlag:o,sweepFlag:l}=e,c=[];if(0===a||0===s)return[];let h=(t-n)/2,u=(i-r)/2;if(0===h&&0===u)return[];a=Math.abs(a),s=Math.abs(s);let d=Math.pow(h,2)/Math.pow(a,2)+Math.pow(u,2)/Math.pow(s,2);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));let p=function(e,t,i,n,r,a,s,o,l,c){let h=Math.pow(r,2),u=Math.pow(a,2),d=Math.pow(s,2),p=Math.pow(o,2),f=h*u-h*p-u*d;f<0&&(f=0),f/=h*p+u*d,f=Math.sqrt(f)*(l===c?-1:1);let m=f*r/a*o,g=f*-a/r*s,v=m+(e+i)/2,y=g+(t+n)/2,b=(s-m)/r,x=(o-g)/a,w=(-s-m)/r,A=(-o-g)/a,S=vV(1,0,b,x),_=vV(b,x,w,A);return!c&&_>0&&(_-=fV),c&&_<0&&(_+=fV),{centerx:v,centery:y,ang1:S,ang2:_}}(t,i,n,r,a,s,h,u,o,l),{ang1:f,ang2:m}=p,{centerx:g,centery:v}=p,y=Math.abs(m)/(fV/4);Math.abs(1-y)<1e-7&&(y=1);let b=Math.max(Math.ceil(y),1);m/=b;for(let x=0;x<b;x++)c.push(gV(f,m)),f+=m;return c.map(e=>{let{x:t,y:i}=mV(e[0],a,s,g,v),{x:n,y:r}=mV(e[1],a,s,g,v),{x:o,y:l}=mV(e[2],a,s,g,v);return{x1:t,y1:i,x2:n,y2:r,x:o,y:l}})}function bV(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(aV||(aV={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(sV||(sV={}));var xV=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,i,n){bV(e.vertLeq(t,i)&&e.vertLeq(i,n));var r=i.s-t.s,a=n.s-i.s;return r+a>0?r<a?i.t-t.t+(t.t-n.t)*(r/(r+a)):i.t-n.t+(n.t-t.t)*(a/(r+a)):0},e.edgeSign=function(t,i,n){bV(e.vertLeq(t,i)&&e.vertLeq(i,n));var r=i.s-t.s,a=n.s-i.s;return r+a>0?(i.t-n.t)*r+(i.t-t.t)*a:0},e.transEval=function(t,i,n){bV(e.transLeq(t,i)&&e.transLeq(i,n));var r=i.t-t.t,a=n.t-i.t;return r+a>0?r<a?i.s-t.s+(t.s-n.s)*(r/(r+a)):i.s-n.s+(n.s-t.s)*(a/(r+a)):0},e.transSign=function(t,i,n){bV(e.transLeq(t,i)&&e.transLeq(i,n));var r=i.t-t.t,a=n.t-i.t;return r+a>0?(i.s-n.s)*r+(i.s-t.s)*a:0},e.vertCCW=function(e,t,i){return e.s*(t.t-i.t)+t.s*(i.t-e.t)+i.s*(e.t-t.t)>=0},e.interpolate=function(e,t,i,n){return(e=e<0?0:e)<=(i=i<0?0:i)?0===i?(t+n)/2:t+e/(e+i)*(n-t):n+i/(e+i)*(t-n)},e.intersect=function(t,i,n,r,a){var s,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(n,r)||(l=n,n=r,r=l),e.vertLeq(t,n)||(l=t,t=n,n=l,l=i,i=r,r=l),e.vertLeq(n,i)?e.vertLeq(i,r)?((s=e.edgeEval(t,n,i))+(o=e.edgeEval(n,i,r))<0&&(s=-s,o=-o),a.s=e.interpolate(s,n.s,o,i.s)):((s=e.edgeSign(t,n,i))+(o=-e.edgeSign(t,r,i))<0&&(s=-s,o=-o),a.s=e.interpolate(s,n.s,o,r.s)):a.s=(n.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(n,r)||(l=n,n=r,r=l),e.transLeq(t,n)||(l=t,t=n,n=l,l=i,i=r,r=l),e.transLeq(n,i)?e.transLeq(i,r)?((s=e.transEval(t,n,i))+(o=e.transEval(n,i,r))<0&&(s=-s,o=-o),a.t=e.interpolate(s,n.t,o,i.t)):((s=e.transSign(t,n,i))+(o=-e.transSign(t,r,i))<0&&(s=-s,o=-o),a.t=e.interpolate(s,n.t,o,r.t)):a.t=(n.t+i.t)/2},e}(),wV=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},AV=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),SV=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},_V=function(){function e(){var e=new SV,t=new wV,i=new AV(0),n=new AV(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=e,this.fHead=t,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(e){var t=new AV(0),i=new AV(1);e.Sym.side<e.side&&(e=e.Sym);var n=e.Sym.next;return i.next=n,n.Sym.next=t,t.next=e,e.Sym.next=i,t.Sym=i,t.Onext=t,t.Lnext=i,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,i.Sym=t,i.Onext=i,i.Lnext=t,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,t},e.prototype.splice_=function(e,t){var i=e.Onext,n=t.Onext;i.Sym.Lnext=t,n.Sym.Lnext=e,e.Onext=n,t.Onext=i},e.prototype.makeVertex_=function(e,t,i){var n=e;bV(n,"Vertex can't be null!");var r=i.prev;n.prev=r,r.next=n,n.next=i,i.prev=n,n.anEdge=t;var a=t;do{a.Org=n,a=a.Onext}while(a!==t)},e.prototype.makeFace_=function(e,t,i){var n=e;bV(n,"Face can't be null");var r=i.prev;n.prev=r,r.next=n,n.next=i,i.prev=n,n.anEdge=t,n.trail=null,n.marked=!1,n.inside=i.inside;var a=t;do{a.Lface=n,a=a.Lnext}while(a!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,i=e.Sym.next;t.Sym.next=i,i.Sym.next=t},e.prototype.killVertex_=function(e,t){var i=e.anEdge,n=i;do{n.Org=t,n=n.Onext}while(n!==i);var r=e.prev,a=e.next;a.prev=r,r.next=a},e.prototype.killFace_=function(e,t){var i=e.anEdge,n=i;do{n.Lface=t,n=n.Lnext}while(n!==i);var r=e.prev,a=e.next;a.prev=r,r.next=a},e.prototype.makeEdge=function(){var e=new SV,t=new SV,i=new wV,n=this.makeEdge_(this.eHead);return this.makeVertex_(e,n,this.vHead),this.makeVertex_(t,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(e,t){var i=!1,n=!1;if(e!==t){if(t.Org!==e.Org&&(n=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(i=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!n){var r=new SV;this.makeVertex_(r,t,e.Org),e.Org.anEdge=e}if(!i){var a=new wV;this.makeFace_(a,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,i=!1;if(e.Lface!==e.Rface&&(i=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!i){var n=new wV;this.makeFace_(n,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),i=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var n=new SV;return this.makeVertex_(n,i,t.Org),t.Lface=i.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t.idx=e.idx,t.Sym.idx=e.Sym.idx,t},e.prototype.connect=function(e,t){var i=!1,n=this.makeEdge_(e),r=n.Sym;if(t.Lface!==e.Lface&&(i=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(n,e.Lnext),this.splice_(r,t),n.Org=e.Dst,r.Org=t.Org,n.Lface=r.Lface=e.Lface,e.Lface.anEdge=r,!i){var a=new wV;this.makeFace_(a,n,e.Lface)}return n},e.prototype.zapFace=function(e){var t,i,n,r,a,s=e.anEdge;i=s.Lnext;do{i=(t=i).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(n=t.Sym).Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(t))}while(t!=s);r=e.prev,(a=e.next).prev=r,r.next=a},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,i=0;do{i++,t=t.Lnext}while(t!==e.anEdge);return i},e.prototype.mergeConvexFaces=function(e){var t,i,n,r,a;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(a=(i=t.anEdge).Org;n=i.Lnext,(r=i.Sym)&&r.Lface&&r.Lface.inside&&(this.countFaceVerts_(t)+this.countFaceVerts_(r.Lface)-2<=e&&xV.vertCCW(i.Lprev.Org,i.Org,r.Lnext.Lnext.Org)&&xV.vertCCW(r.Lprev.Org,r.Org,i.Lnext.Lnext.Org)&&(n=r.Lnext,this.delete(r),i=null,r=null)),!i||i.Lnext.Org!==a;)i=n;return!0},e.prototype.check=function(){var e,t,i,n,r,a,s=this.fHead,o=this.vHead,l=this.eHead;for(t=s,t=s;(e=t.next)!==s;t=e){bV(e.prev===t),r=e.anEdge;do{bV(r.Sym!==r),bV(r.Sym.Sym===r),bV(r.Lnext.Onext.Sym===r),bV(r.Onext.Sym.Lnext===r),bV(r.Lface===e),r=r.Lnext}while(r!==e.anEdge)}for(bV(e.prev===t&&null===e.anEdge),n=o,n=o;(i=n.next)!==o;n=i){bV(i.prev===n),r=i.anEdge;do{bV(r.Sym!==r),bV(r.Sym.Sym===r),bV(r.Lnext.Onext.Sym===r),bV(r.Onext.Sym.Lnext===r),bV(r.Org===i),r=r.Onext}while(r!==i.anEdge)}for(bV(i.prev===n&&null===i.anEdge),a=l,a=l;(r=a.next)!==l;a=r)bV(r.Sym.next===a.Sym),bV(r.Sym!==r),bV(r.Sym.Sym===r),bV(null!==r.Org),bV(null!==r.Dst),bV(r.Lnext.Onext.Sym===r),bV(r.Onext.Sym.Lnext===r);bV(r.Sym.next===a.Sym&&r.Sym===this.eHeadSym&&r.Sym.Sym===r&&null===r.Org&&null===r.Dst&&null===r.Lface&&null===r.Rface)},e}(),EV=function(){this.handle=null},CV=function(){this.key=null,this.node=0},MV=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var i=0;i<e+1;i++)this.nodes[i]=new EV,this.handles[i]=new CV;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,i,n,r=this.nodes,a=this.handles;for(t=r[e].handle;;){if((n=e<<1)<this.size&&this.leq(a[r[n+1].handle].key,a[r[n].handle].key)&&++n,bV(n<=this.max),i=r[n].handle,n>this.size||this.leq(a[t].key,a[i].key)){r[e].handle=t,a[t].node=e;break}r[e].handle=i,a[i].node=e,e=n}},e.prototype.floatUp_=function(e){var t,i,n,r=this.nodes,a=this.handles;for(t=r[e].handle;;){if(i=r[n=e>>1].handle,0===n||this.leq(a[i].key,a[t].key)){r[e].handle=t,a[t].node=e;break}r[e].handle=i,a[i].node=e,e=n}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,i;if(2*(t=++this.size)>this.max){var n,r;for(this.max*=2,r=this.nodes.length,this.nodes.length=this.max+1,n=r;n<this.nodes.length;n++)this.nodes[n]=new EV;for(r=this.handles.length,this.handles.length=this.max+1,n=r;n<this.handles.length;n++)this.handles[n]=new CV}return 0===this.freeList?i=t:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[t].handle=i,this.handles[i].node=t,this.handles[i].key=e,this.initialized&&this.floatUp_(t),i},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,i=e[1].handle,n=t[i].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[i].key=null,t[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(e){var t,i=this.nodes,n=this.handles;bV(e>=1&&e<=this.max&&null!==n[e].key),i[t=n[e].node].handle=i[this.size].handle,n[i[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(n[i[t>>1].handle].key,n[i[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),n[e].key=null,n[e].node=this.freeList,this.freeList=e},e}(),TV=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},PV=function(){this.key=null,this.next=null,this.prev=null},DV=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new PV,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var i=new PV;return i.key=t,i.next=e.next,e.next.prev=i,i.prev=e,e.next=i,i},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),OV=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,i){var n=e.event,r=t.eUp,a=i.eUp;return r.Dst===n?a.Dst===n?xV.vertLeq(r.Org,a.Org)?xV.edgeSign(a.Dst,r.Org,a.Org)<=0:xV.edgeSign(r.Dst,a.Org,r.Org)>=0:xV.edgeSign(a.Dst,n,a.Org)<=0:a.Dst===n?xV.edgeSign(r.Dst,n,r.Org)>=0:xV.edgeEval(r.Dst,n,r.Org)>=xV.edgeEval(a.Dst,n,a.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&bV(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,i){bV(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=i,i.activeRegion=t},e.topLeftRegion=function(t,i){var n,r=i.eUp.Org;do{i=e.regionAbove(i)}while(i.eUp.Org===r);if(i.fixUpperEdge){if(null===(n=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext)))return null;e.fixUpperEdge(t,i,n),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===i);return t},e.addRegionBelow=function(e,t,i){var n=new TV;return n.eUp=i,n.nodeUp=e.dict.insertBefore(t.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(e,t){switch(e.windingRule){case aV.ODD:return 0!==(1&t);case aV.NONZERO:return 0!==t;case aV.POSITIVE:return t>0;case aV.NEGATIVE:return t<0;case aV.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var n=i.eUp,r=n.Lface;r.inside=i.inside,r.anEdge=n,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,n){for(var r,a=null,s=i,o=i.eUp;s!==n;){if(s.fixUpperEdge=!1,(r=(a=e.regionBelow(s)).eUp).Org!=o.Org){if(!a.fixUpperEdge){e.finishRegion(t,s);break}r=t.mesh.connect(o.Lprev,r.Sym),e.fixUpperEdge(t,a,r)}o.Onext!==r&&(t.mesh.splice(r.Oprev,r),t.mesh.splice(o,r)),e.finishRegion(t,s),o=a.eUp,s=a}return o},e.addRightEdges=function(t,i,n,r,a,s){var o,l,c,h,u=!0;c=n;do{bV(xV.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,i,c.Sym),c=c.Onext}while(c!==r);for(null===a&&(a=e.regionBelow(i).eUp.Rprev),l=i,h=a;(c=(o=e.regionBelow(l)).eUp.Sym).Org===h.Org;)c.Onext!==h&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(h.Oprev,c)),o.windingNumber=l.windingNumber-c.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(c,h),e.deleteRegion(t,l),t.mesh.delete(h)),u=!1,l=o,h=c;l.dirty=!0,bV(l.windingNumber-c.winding===o.windingNumber),s&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(e,t,i){e.mesh.splice(t,i)},e.vertexWeights=function(e,t,i){var n=xV.vertL1dist(t,e),r=xV.vertL1dist(i,e),a=.5*r/(n+r),s=.5*n/(n+r);e.coords[0]+=a*t.coords[0]+s*i.coords[0],e.coords[1]+=a*t.coords[1]+s*i.coords[1],e.coords[2]+=a*t.coords[2]+s*i.coords[2]},e.getIntersectData=function(t,i,n,r,a,s){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,n,r),e.vertexWeights(i,a,s)},e.checkForRightSplice=function(t,i){var n=e.regionBelow(i),r=i.eUp,a=n.eUp;if(xV.vertLeq(r.Org,a.Org)){if(xV.edgeSign(a.Dst,r.Org,a.Org)>0)return!1;xV.vertEq(r.Org,a.Org)?r.Org!==a.Org&&(t.pq.delete(r.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,r)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(r,a.Oprev),i.dirty=n.dirty=!0)}else{if(xV.edgeSign(r.Dst,a.Org,r.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(r.Sym),t.mesh.splice(a.Oprev,r)}return!0},e.checkForLeftSplice=function(t,i){var n,r=e.regionBelow(i),a=i.eUp,s=r.eUp;if(bV(!xV.vertEq(a.Dst,s.Dst)),xV.vertLeq(a.Dst,s.Dst)){if(xV.edgeSign(a.Dst,s.Dst,a.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,n=t.mesh.splitEdge(a),t.mesh.splice(s.Sym,n),n.Lface.inside=i.inside}else{if(xV.edgeSign(s.Dst,a.Dst,s.Org)>0)return!1;i.dirty=r.dirty=!0,n=t.mesh.splitEdge(s),t.mesh.splice(a.Lnext,s.Sym),n.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var n,r,a=e.regionBelow(i),s=i.eUp,o=a.eUp,l=s.Org,c=o.Org,h=s.Dst,u=o.Dst,d=new SV;if(bV(!xV.vertEq(u,h)),bV(xV.edgeSign(h,t.event,l)<=0),bV(xV.edgeSign(u,t.event,c)>=0),bV(l!==t.event&&c!==t.event),bV(!i.fixUpperEdge&&!a.fixUpperEdge),l===c||Math.min(l.t,h.t)>Math.max(c.t,u.t))return!1;if(xV.vertLeq(l,c)){if(xV.edgeSign(u,l,c)>0)return!1}else if(xV.edgeSign(h,c,l)<0)return!1;return e.debugEvent(t),xV.intersect(h,l,u,c,d),bV(Math.min(l.t,h.t)<=d.t),bV(d.t<=Math.max(c.t,u.t)),bV(Math.min(u.s,h.s)<=d.s),bV(d.s<=Math.max(c.s,l.s)),xV.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),n=xV.vertLeq(l,c)?l:c,xV.vertLeq(n,d)&&(d.s=n.s,d.t=n.t),xV.vertEq(d,l)||xV.vertEq(d,c)?(e.checkForRightSplice(t,i),!1):!xV.vertEq(h,t.event)&&xV.edgeSign(h,t.event,d)>=0||!xV.vertEq(u,t.event)&&xV.edgeSign(u,t.event,d)<=0?u===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(o.Sym,s),i=e.topLeftRegion(t,i),s=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),a),e.addRightEdges(t,i,s.Oprev,s,s,!0),!0):h===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(s.Lnext,o.Oprev),a=i,i=e.topRightRegion(i),r=e.regionBelow(i).eUp.Rprev,a.eUp=o.Oprev,o=e.finishLeftRegions(t,a,null),e.addRightEdges(t,i,o.Onext,s.Rprev,r,!0),!0):(xV.edgeSign(h,t.event,d)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),xV.edgeSign(u,t.event,d)<=0&&(i.dirty=a.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),!1):(t.mesh.splitEdge(s.Sym),t.mesh.splitEdge(o.Sym),t.mesh.splice(o.Oprev,s),s.Org.s=d.s,s.Org.t=d.t,s.Org.pqHandle=t.pq.insert(s.Org),e.getIntersectData(t,s.Org,l,h,c,u),e.regionAbove(i).dirty=i.dirty=a.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var n,r,a=e.regionBelow(i);;){for(;a.dirty;)i=a,a=e.regionBelow(a);if(!i.dirty&&(a=i,null===(i=e.regionAbove(i))||!i.dirty))return;if(i.dirty=!1,n=i.eUp,r=a.eUp,n.Dst!==r.Dst&&e.checkForLeftSplice(t,i)&&(a.fixUpperEdge?(e.deleteRegion(t,a),t.mesh.delete(r),r=(a=e.regionBelow(i)).eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(n),n=(i=e.regionAbove(a)).eUp)),n.Org!==r.Org)if(n.Dst===r.Dst||i.fixUpperEdge||a.fixUpperEdge||n.Dst!==t.event&&r.Dst!==t.event)e.checkForRightSplice(t,i);else if(e.checkForIntersect(t,i))return;n.Org===r.Org&&n.Dst===r.Dst&&(e.addWinding(r,n),e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(a))}},e.connectRightVertex=function(t,i,n){var r,a=n.Onext,s=e.regionBelow(i),o=i.eUp,l=s.eUp,c=!1;o.Dst!==l.Dst&&e.checkForIntersect(t,i),xV.vertEq(o.Org,t.event)&&(t.mesh.splice(a.Oprev,o),i=e.topLeftRegion(t,i),a=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),s),c=!0),xV.vertEq(l.Org,t.event)&&(t.mesh.splice(n,l.Oprev),n=e.finishLeftRegions(t,s,null),c=!0),c?e.addRightEdges(t,i,n.Onext,a,a,!0):(r=xV.vertLeq(l.Org,o.Org)?l.Oprev:o,r=t.mesh.connect(n.Lprev,r),e.addRightEdges(t,i,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i))},e.connectLeftDegenerate=function(t,i,n){var r,a,s,o,l;return r=i.eUp,xV.vertEq(r.Org,n)?(bV(!1),void e.spliceMergeVertices(t,r,n.anEdge)):xV.vertEq(r.Dst,n)?(bV(!1),i=e.topRightRegion(i),a=o=(s=(l=e.regionBelow(i)).eUp.Sym).Onext,l.fixUpperEdge&&(bV(a!==s),e.deleteRegion(t,l),t.mesh.delete(s),s=a.Oprev),t.mesh.splice(n.anEdge,s),xV.edgeGoesLeft(a)||(a=null),void e.addRightEdges(t,i,s.Onext,o,a,!0)):(t.mesh.splitEdge(r.Sym),i.fixUpperEdge&&(t.mesh.delete(r.Onext),i.fixUpperEdge=!1),t.mesh.splice(n.anEdge,r),void e.sweepEvent(t,n))},e.connectLeftVertex=function(t,i){var n,r,a,s,o,l,c=new TV;if(c.eUp=i.anEdge.Sym,n=t.dict.search(c).key,r=e.regionBelow(n)){if(s=n.eUp,o=r.eUp,0===xV.edgeSign(s.Dst,i,s.Org))return void e.connectLeftDegenerate(t,n,i);if(a=xV.vertLeq(o.Dst,s.Dst)?n:r,n.inside||a.fixUpperEdge){if(a===n)l=t.mesh.connect(i.anEdge.Sym,s.Lnext);else l=t.mesh.connect(o.Dnext,i.anEdge).Sym;a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,n,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,n,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var n=i.anEdge;null===n.activeRegion;)if((n=n.Onext)===i.anEdge)return void e.connectLeftVertex(t,i);var r=e.topLeftRegion(t,n.activeRegion);bV(null!==r);var a=e.regionBelow(r),s=a.eUp,o=e.finishLeftRegions(t,a,null);o.Onext===s?e.connectRightVertex(t,r,o):e.addRightEdges(t,r,o.Onext,s,s,!0)},e.addSentinel=function(e,t,i,n){var r=new TV,a=e.mesh.makeEdge();a.Org.s=i,a.Org.t=n,a.Dst.s=t,a.Dst.t=n,e.event=a.Dst,r.eUp=a,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=e.dict.insert(r)},e.initEdgeDict=function(t){t.dict=new DV(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],n=t.bmax[1]-t.bmin[1],r=t.bmin[0]-i,a=t.bmax[0]+i,s=t.bmin[1]-n,o=t.bmax[1]+n;e.addSentinel(t,r,a,s),e.addSentinel(t,r,a,o)},e.doneEdgeDict=function(t){for(var i,n=0;null!==(i=t.dict.min().key);)i.sentinel||(bV(i.fixUpperEdge),bV(1===++n)),bV(0===i.windingNumber),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,n,r,a=t.mesh.eHead;for(i=a.next;i!==a;i=n)n=i.next,r=i.Lnext,xV.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,r,i),t.mesh.delete(i),r=(i=r).Lnext),r.Lnext===i&&(r!==i&&((r===n||r===n.Sym)&&(n=n.next),t.mesh.delete(r)),(i===n||i===n.Sym)&&(n=n.next),t.mesh.delete(i))},e.initPriorityQ=function(e){var t,i,n,r=0;for(i=(n=e.mesh.vHead).next;i!==n;i=i.next)r++;for(r+=8,t=e.pq=new MV(r,xV.vertLeq),i=(n=e.mesh.vHead).next;i!==n;i=i.next)i.pqHandle=t.insert(i);return i===n&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,i){var n,r,a;for(n=i.fHead.next;n!==i.fHead;n=r)r=n.next,bV((a=n.anEdge).Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,i){var n,r;if(void 0===i&&(i=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(n=t.pq.extractMin());){for(;null!==(r=t.pq.min())&&xV.vertEq(r,n);)r=t.pq.extractMin(),e.spliceMergeVertices(t,n.anEdge,r.anEdge);e.sweepEvent(t,n)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(i&&t.mesh.check(),!0)},e}(),kV=function(){function e(){this.mesh=new _V,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=aV.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,i,n,r,a,s,o=[0,0,0],l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[null,null,null],p=[null,null,null],f=this.mesh.vHead;t=f.next;for(var m=0;m<3;++m)r=t.coords[m],l[m]=r,p[m]=t,o[m]=r,d[m]=t;for(t=f.next;t!==f;t=t.next)for(var g=0;g<3;++g)(r=t.coords[g])<l[g]&&(l[g]=r,p[g]=t),r>o[g]&&(o[g]=r,d[g]=t);var v=0;if(o[1]-l[1]>o[0]-l[0]&&(v=1),o[2]-l[2]>o[v]-l[v]&&(v=2),l[v]>=o[v])return e[0]=0,e[1]=0,void(e[2]=1);for(s=0,i=p[v],n=d[v],c[0]=i.coords[0]-n.coords[0],c[1]=i.coords[1]-n.coords[1],c[2]=i.coords[2]-n.coords[2],t=f.next;t!==f;t=t.next)h[0]=t.coords[0]-n.coords[0],h[1]=t.coords[1]-n.coords[1],h[2]=t.coords[2]-n.coords[2],u[0]=c[1]*h[2]-c[2]*h[1],u[1]=c[2]*h[0]-c[0]*h[2],u[2]=c[0]*h[1]-c[1]*h[0],(a=u[0]*u[0]+u[1]*u[1]+u[2]*u[2])>s&&(s=a,e[0]=u[0],e[1]=u[1],e[2]=u[2]);s<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,i=this.mesh.fHead,n=this.mesh.vHead,r=0,a=i.next;a!==i;a=a.next)if(!((t=a.anEdge).winding<=0))do{r+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==a.anEdge);if(r<0){for(e=n.next;e!==n;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,i=this.mesh.vHead,n=[0,0,0],r=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),r=!0),e=this.sUnit,t=this.tUnit;var a=this.longAxis_(n);e[a]=0,e[(a+1)%3]=1,e[(a+2)%3]=0,t[a]=0,t[(a+1)%3]=0,t[(a+2)%3]=n[a]>0?1:-1;for(var s=i.next;s!==i;s=s.next)s.s=this.dot_(s.coords,e),s.t=this.dot_(s.coords,t);r&&this.checkOrientation_();for(var o=!0,l=i.next;l!==i;l=l.next)o?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,o=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var i,n;if((i=t.anEdge).Lnext===i||i.Lnext.Lnext===i)throw"Mono region invalid";for(;xV.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;xV.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(;i.Lnext!==n;)if(xV.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(xV.edgeGoesLeft(n.Lnext)||xV.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)n=e.connect(n.Lnext,n).Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(xV.edgeGoesRight(i.Lprev)||xV.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)i=e.connect(i,i.Lprev).Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)n=e.connect(n.Lnext,n).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,i=e.fHead.next;i!==e.fHead;i=t)if(t=i.next,i.inside&&!this.tessellateMonoRegion_(e,i))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,i=e.fHead.next;i!==e.fHead;i=t)t=i.next,i.inside||e.zapFace(i)},e.prototype.setWindingNumber_=function(e,t,i){for(var n,r=e.eHead.next;r!==e.eHead;r=n)n=r.next,r.Rface.inside!==r.Lface.inside?r.winding=r.Lface.inside?t:-t:i?e.delete(r):r.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,i,n){var r,a,s=0,o=0;i>3&&e.mergeConvexFaces(i);for(var l=e.vHead.next;l!==e.vHead;l=l.next)l.n=-1;for(var c=e.fHead.next;c!==e.fHead;c=c.next)if(c.n=-1,c.inside){r=c.anEdge,a=0;do{-1===(l=r.Org).n&&(l.n=o,o++),a++,r=r.Lnext}while(r!==c.anEdge);if(a>i)throw"Face vertex greater that support polygon";c.n=s,++s}this.elementCount=s,t===sV.CONNECTED_POLYGONS&&(s*=2),this.elements=[],this.elements.length=s*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(l=e.vHead.next;l!==e.vHead;l=l.next)if(-1!==l.n){var h=l.n*n;this.vertices[h+0]=l.coords[0],this.vertices[h+1]=l.coords[1],n>2&&(this.vertices[h+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var u=0;for(c=e.fHead.next;c!==e.fHead;c=c.next)if(c.inside){r=c.anEdge,a=0;do{l=r.Org;this.elements[u++]=l.n,a++,r=r.Lnext}while(r!==c.anEdge);for(var d=a;d<i;++d)this.elements[u++]=-1;if(t===sV.CONNECTED_POLYGONS){r=c.anEdge;do{this.elements[u++]=this.getNeighbourFace_(r),r=r.Lnext}while(r!==c.anEdge);for(var p=a;p<i;++p)this.elements[u++]=-1}}},e.prototype.outputContours_=function(e,t){var i,n,r=0,a=0;this.vertexCount=0,this.elementCount=0;for(var s=e.fHead.next;s!==e.fHead;s=s.next)if(s.inside){n=i=s.anEdge;do{this.vertexCount++,i=i.Lnext}while(i!==n);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var o=0,l=0,c=0;r=0;for(s=e.fHead.next;s!==e.fHead;s=s.next)if(s.inside){a=0,n=i=s.anEdge;do{this.vertices[o++]=i.Org.coords[0],this.vertices[o++]=i.Org.coords[1],t>2&&(this.vertices[o++]=i.Org.coords[2]),this.vertexIndices[l++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,a++,i=i.Lnext}while(i!==n);this.elements[c++]=r,this.elements[c++]=a,r+=a}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new _V),e<2&&(e=2),e>3&&(e=3);for(var i=null,n=0;n<t.length;n+=e)null===i?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=t[n+0],i.Org.coords[1]=t[n+1],i.Org.coords[2]=e>2?t[n+2]:0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(e,t,i,n,r,a){if(void 0===e&&(e=aV.ODD),void 0===t&&(t=sV.POLYGONS),void 0===a&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,r&&(this.normal[0]=r[0],this.normal[1]=r[1],this.normal[2]=r[2]),this.windingRule=e,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),OV.computeInterior(this,a);var s=this.mesh;return t===sV.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),a&&s.check(),t===sV.BOUNDARY_CONTOURS?this.outputContours_(s,n):this.outputPolymesh_(s,t,i,n),!0},e}();function IV(e){var t=e.windingRule,i=void 0===t?aV.ODD:t,n=e.elementType,r=void 0===n?sV.POLYGONS:n,a=e.polySize,s=void 0===a?3:a,o=e.vertexSize,l=void 0===o?2:o,c=e.normal,h=void 0===c?[0,0,1]:c,u=e.contours,d=void 0===u?[]:u,p=e.strict,f=void 0===p||p,m=e.debug,g=void 0!==m&&m;if(!d&&f)throw new Error("Contours can't be empty");if(d){var v=new kV;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(i,r,s,l,h,f),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}aV.ODD,aV.NONZERO,aV.POSITIVE,aV.NEGATIVE,aV.ABS_GEQ_TWO,sV.POLYGONS,sV.CONNECTED_POLYGONS,sV.BOUNDARY_CONTOURS;var RV=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log("allocating with cap ".concat(e));let i=e*RV.eSize;this.buffer=new ArrayBuffer(i);let n=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*n,3*e),r+=3*e,this.normals=new Float32Array(this.buffer,r*n,3*e),r+=3*e,this.uvs=new Float32Array(this.buffer,r*n,2*e)}realloc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log("resizing from ".concat(this.capacity," \u2192 ").concat(e));let i=e*RV.eSize,n=new ArrayBuffer(i),r=Float32Array.BYTES_PER_ELEMENT,a=0,s=new Float32Array(n,a*r,3*e);a+=3*e;let o=new Float32Array(n,a*r,3*e);a+=3*e;let l=new Float32Array(n,a*r,2*e);t?(s.set(this.positions.subarray(0,3*this.size)),o.set(this.normals.subarray(0,3*this.size)),l.set(this.uvs.subarray(0,2*this.size))):(s.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=n,this.positions=s,this.normals=o,this.uvs=l,this.capacity=e}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.size+e;if(t>this.capacity){let e=this.capacity;for(;t>e;)e*=2;this.realloc(e)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log("shrinking ".concat(this.capacity," \u2192 ").concat(this.size)),this.realloc(this.size,!0)}},LV=RV;LV.eSize=8*Float32Array.BYTES_PER_ELEMENT;var zV=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:i}=this,n=t[e];for(;e>0;){let r=e-1>>1,a=t[r];if(i(n,a)>=0)break;t[e]=a,e=r}t[e]=n}_down(e){let{data:t,compare:i}=this,n=this.length>>1,r=t[e];for(;e<n;){let n=1+(e<<1),a=n+1;if(a<this.length&&i(t[a],t[n])<0&&(n=a),i(t[n],r)>=0)break;t[e]=t[n],e=n}t[e]=r}};function BV(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=1/0,a=1/0,s=-1/0,o=-1/0;for(let[y,b]of e[0])y<r&&(r=y),b<a&&(a=b),y>s&&(s=y),b>o&&(o=b);let l=s-r,c=o-a,h=Math.max(i,Math.min(l,c));if(h===i){let e=[r,a];return e.distance=0,e.distance}let u=new zV([],(e,t)=>t.max-e.max),d=function(e){let t=0,i=0,n=0,r=e[0];for(let s=0,o=r.length,l=o-1;s<o;l=s++){let e=r[s],a=r[l],o=e[0]*a[1]-a[0]*e[1];i+=(e[0]+a[0])*o,n+=(e[1]+a[1])*o,t+=3*o}let a=new jV(i/t,n/t,0,e);return 0===t||a.d<0?new jV(r[0][0],r[0][1],0,e):a}(e),p=new jV(r+l/2,a+c/2,0,e);p.d>d.d&&(d=p);let f=2;function m(r,a,s){let o=new jV(r,a,s,e);if(f++,o.max>d.d+i&&u.push(o),o.d>d.d&&(d=o,n&&console.log("found best ".concat(Math.round(1e4*o.d)/1e4," after ").concat(f," probes")),d.d>t))return t}let g=h/2;for(let y=r;y<s;y+=h)for(let e=a;e<o;e+=h)m(y+g,e+g,g);for(;u.length;){let{max:e,x:t,y:n,h:r}=u.pop();if(e-d.d<=i)break;g=r/2,m(t-g,n-g,g),m(t+g,n-g,g),m(t-g,n+g,g),m(t+g,n+g,g)}n&&console.log("num probes: ".concat(f,"\nbest distance: ").concat(d.d));let v=[d.x,d.y];return v.distance=d.d,v.distance}function jV(e,t,i,n){this.x=e,this.y=t,this.h=i,this.d=function(e,t,i){let n=!1,r=1/0;for(let a of i)for(let i=0,s=a.length,o=s-1;i<s;o=i++){let s=a[i],l=a[o];s[1]>t!=l[1]>t&&e<(l[0]-s[0])*(t-s[1])/(l[1]-s[1])+s[0]&&(n=!n),r=Math.min(r,FV(e,t,s,l))}return 0===r?0:(n?1:-1)*Math.sqrt(r)}(e,t,n),this.max=this.d+this.h*Math.SQRT2}function FV(e,t,i,n){let r=i[0],a=i[1],s=n[0]-r,o=n[1]-a;if(0!==s||0!==o){let i=((e-r)*s+(t-a)*o)/(s*s+o*o);i>1?(r=n[0],a=n[1]):i>0&&(r+=s*i,a+=o*i)}return s=e-r,o=t-a,s*s+o*o}var NV={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},UV={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},VV={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},WV=(e,t)=>i=>{let[n,r]=i;return r<n&&(r+=t),(e>=n?e:e+t)<=r},HV=class extends Cb{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:aV.ODD,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.forPathBevel=s,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=n,this._bevelSegmentsInput=r;let o,l,c,h=this._shape.extractShapePointsToFlatArray([],n),u=this._shape.shapeHoles.map(e=>{let t=e.extractShapePointsToFlatArray([],n),i=[];for(let n=t.length-1;n>=1;n-=2){let e=t[n-1],r=t[n-0];i.push(e,r)}return i}),d=[],p=[];for(let T=0;T<h.length;T+=2)p.push([h[T],h[T+1]]);d.push(p);for(let T=0;T<u.length;T++){let e=u[T],t=[];for(let i=0;i<e.length;i+=2)t.push([e[i],e[i+1]]);d.push(t)}o=e.isText?.1*(new IE).setFromPoints(e.points.map(e=>e.position)).getSize(new Av).length():0===d[0].length?i:i>0?BV(d,i):1e-5,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,o,t/2),this._bevelSegments=Math.floor(r));try{l=IV({windingRule:a,elementType:sV.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[h]})}catch(E){l=NV}try{c=IV({windingRule:aV.ODD,elementType:sV.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...u]})}catch(C){c=UV}if(!l)throw new Error("error generating geometry");let f=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let e=0;e<c.elements.length;e++){let t=c.elements[e],i=e%2===0?l.vertexCount:0;l.elements.push(t+i)}for(let e=0;e<c.vertexIndices.length;e++){let t=c.vertexIndices[e],i=l.vertexCount;l.vertexIndices.push(t+i)}for(let e=0;e<c.vertices.length;e++){let t=c.vertices[e];l.vertices.push(t)}}let m=1/0,g=-1/0,v=1/0,y=-1/0;for(let T=0,P=l.vertexCount;T<P;T++){let e=2*T,t=l.vertices[e+0],i=l.vertices[e+1];t<m&&(m=t),t>g&&(g=t),i<v&&(v=i),i>y&&(y=i)}this._minX=m,this._minY=v,this._width=g-m,this._height=y-v,this._buffer=new LV(this._computeBufferEstimatedSize(l));let b=[],x=[];for(let T=l.elementCount-1;T>=0;T--){let e=T>=f,t=2*T,i=l.elements[t+0],r=l.elements[t+1],a=i+r,c={start:i,count:r,normals:[],continuous:[],concave:[]},h=i,d=a-1,p=i+1,m=this._shape.roundedCurves.length;do{let t=h-i,n=l.vertices[2*d+0],s=l.vertices[2*d+1],o=l.vertices[2*h+0],u=l.vertices[2*h+1],f=l.vertices[2*p+0],g=l.vertices[2*p+1],v=o-n,y=u-s,b=Math.sqrt(v*v+y*y);v/=b,y/=b;let x=o-f,w=u-g,A=Math.sqrt(x*x+w*w);x/=A,w/=A,c.normals[2*t+0]=-w,c.normals[2*t+1]=x,c.concave[t]=v*w-y*x>0;let S=l.vertexIndices[h];if(Array.isArray(S))c.continuous[t]=!1;else{let[e,i]=this._shape.getCurveIndexFromVertexId(S-1,!0);if(i>0&&i<1)c.continuous[t]=!0;else{let n=1===i?e+1:e-1;n=(n+m)%m;let r=1===i?0:1,a=this._shape.roundedCurves[e].getTangent(i),s=this._shape.roundedCurves[n].getTangent(r);c.continuous[t]=a.dot(s)>.95}}e&&(c.normals[2*t+0]*=-1,c.normals[2*t+1]*=-1),[d,h,p]=[h,p,p+1],p>=a&&(p-=r)}while(p!==i+1);let g=[];g.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(2*i,2*a),vertexCount:r,vertexIndices:new Array(r).fill(!0).map((e,t)=>[t,t]),elements:[0,r],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(2*i,2*a)});let v=0;for(let s=1;s<=this._bevelSegments;s++){let t=s/this._bevelSegments*Math.PI/2,i=(1-Math.cos(t))*this._bevel,a=[],o=[],h=[],u=[],d=0;for(let s=0;s<r;s++){let t=2*s,p=(s-1+r)%r*2,f=l.vertices[2*c.start+t+0],m=l.vertices[2*c.start+t+1],g=-c.normals[p+0]*i,v=-c.normals[p+1]*i,y=-c.normals[t+0]*i,b=-c.normals[t+1]*i;if(c.concave[s]||!c.concave[s]&&e){let t=Math.atan2(v,g),r=Math.atan2(b,y);r>t&&(r-=2*Math.PI);let o=r-t;if(c.continuous[s]||e){let n=t+o/2,r=Math.cos(n)*i,l=Math.sin(n)*i;a[2*d+0]=f+r*(e?-1:1),a[2*d+1]=m+l*(e?-1:1),u[d]=s,d++}else{let e=Math.max(1,Math.floor(n/4*Math.abs(o)/Math.PI));for(let n=0;n<=e;n++){let r=t+o*(n/e),l=Math.cos(r)*i,c=Math.sin(r)*i;a[2*d+0]=f+l,a[2*d+1]=m+c,u[d]=s,d++}}}else a[2*d+0]=f+g,a[2*d+1]=m+v,u[d]=s,o[s]=d,d++,a[2*d+0]=f,a[2*d+1]=m,u[d]=s,d++,a[2*d+0]=f+y,a[2*d+1]=m+b,u[d]=s,h[s]=d,d++}let p=IV({windingRule:aV.POSITIVE,elementType:sV.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a],edgeCreateCallback:e=>{let t=e.Org.idx,i=u[t],n=u[(t+1)%u.length];e.idx=[i,n],e.Sym.idx=[n,i]},vertexIdCallback:e=>{let t=e.Lprev.idx;return[t?t[1]:0,e.idx?e.idx[0]:0]}});if(!p)throw console.log("Error"),new Error("error generating bevel geometry for ".concat(s,"'th loop"));if(!p.vertexCount){let e=(s-1)/this._bevelSegments*Math.PI/2;v=(1-Math.sin(e))*this._bevel;break}for(let e=0;e<p.vertexIndices.length;e++){let[t,i]=p.vertexIndices[e];if(t===i)continue;let n=i;i<t&&(n+=r);for(let a=t;a<n;a++){let n=a%r,s=(a+1)%r;if(!c.continuous[n]||!c.continuous[s]){p.vertexIndices[e]=[t,n],p.vertexIndices.splice(e+1,0,[s,i]),p.vertices.splice(2*(e+1),0,p.vertices[2*e],p.vertices[2*e+1]);break}}}g.push({bevelI:s,angle:t,size:i,boundary:p,reverseMap:u,insetPoints:a})}let y=(e,t,i)=>{let n=0,r=e.boundary.vertexIndices.length;for(;n<r&&i(e.boundary.vertexIndices[t]);)t=(t+1)%r,n++;return n},w=b.length;for(let n=1;n<g.length;n++){let e=g[n-1],t=g[n],i=e.boundary.vertexIndices.length,a=t.boundary.vertexIndices.length;if(!i||!a)break;let o=c.concave.length,l=0,h=WV(l,r);for(;!e.boundary.vertexIndices.filter(h).length||!t.boundary.vertexIndices.filter(h).length;)l++,h=WV(l,r);let u=e.boundary.vertexIndices.findIndex(h),d=t.boundary.vertexIndices.findIndex(h);do{u=(u+1)%i}while(h(e.boundary.vertexIndices[u]));do{d=(d+1)%a}while(h(t.boundary.vertexIndices[d]));l=(l+1)%r;let p,f,m=l,v=0,x=this._buildBevelVert(c,e,(u-1+i)%i,void 0,v),w=this._buildBevelVert(c,t,(d-1+a)%a,void 0,v),A=!1;do{v=(l||o)/o,h=WV(l,r);let n=y(e,u,h),m=y(t,d,h),g=A;if(A=!1,n&&!m){for(let t=0;t<n;t++)p=this._buildBevelVert(c,e,(u+t)%i,t/(n-1),v),b.push(x.topN,p.topP,w.topN),!1===s&&b.push(p.bottomP,x.bottomN,w.bottomN),x=p;A=!0}else if(!n&&m)for(let e=0;e<m;e++)f=this._buildBevelVert(c,t,(d+e)%a,e/(m-1),v),b.push(w.topN,x.topP,f.topP),!1===s&&b.push(x.bottomP,w.bottomN,f.bottomP),w=f;else if(n&&m)if(p=this._buildBevelVert(c,e,u,0,v),f=this._buildBevelVert(c,t,d,0,v),g?(b.push(x.topN,f.topP,w.topN),b.push(x.topN,p.topP,f.topP),!1===s&&(b.push(f.bottomP,x.bottomN,w.bottomN),b.push(f.bottomP,p.bottomP,x.bottomN))):(b.push(w.topN,x.topN,p.topP),b.push(w.topN,p.topP,f.topP),!1===s&&(b.push(p.bottomP,x.bottomN,w.bottomN),b.push(p.bottomP,w.bottomN,f.bottomP))),x=p,w=f,n===m)for(let r=1;r<n;r++)p=this._buildBevelVert(c,e,(u+r)%i,r/(n-1),v),f=this._buildBevelVert(c,t,(d+r)%a,r/(m-1),v),b.push(x.topN,p.topP,w.topN),b.push(w.topN,p.topP,f.topP),!1===s&&(b.push(p.bottomP,x.bottomN,w.bottomN),b.push(p.bottomP,w.bottomN,f.bottomP)),x=p,w=f;else if(n>m){let r=n/m,o=0;for(let l=1;l<n;l++)p=this._buildBevelVert(c,e,(u+l)%i,l/(n-1),v),b.push(x.topN,p.topP,w.topN),!1===s&&b.push(p.bottomP,x.bottomN,w.bottomN),x=p,l>(o+1)*r&&(o++,f=this._buildBevelVert(c,t,(d+o)%a,o/(m-1),v),b.push(w.topN,p.topP,f.topP),!1===s&&b.push(p.bottomP,w.bottomN,f.bottomP),w=f)}else{let r=m/n,o=0;for(let l=1;l<m;l++)f=this._buildBevelVert(c,t,(d+l)%a,l/(m-1),v),b.push(w.topN,p.topP,f.topP),!1===s&&b.push(p.bottomP,w.bottomN,f.bottomP),w=f,l>(o+1)*r&&(o++,p=this._buildBevelVert(c,e,(u+o)%i,o/(n-1),v),b.push(x.topN,p.topP,w.topN),!1===s&&b.push(p.bottomP,x.bottomN,w.bottomN),x=p)}u=(u+n)%i,d=(d+m)%a,l=(l+1)%o}while(l!==m)}if(!1===s&&this._depth>2*this._bevel&&this._buildWall(g,c,b),e){let e=[];for(let t=b.length-1;t>=w+2;t-=3){let i=b[t-2],n=b[t-1],r=b[t-0];e.push(r,n,i)}b.splice(w,b.length-w,...e)}if(e){let e=[];for(let t=g[g.length-1].boundary.vertices.length-1;t>=1;t-=2){let i=g[g.length-1].boundary.vertices[t-1],n=g[g.length-1].boundary.vertices[t-0];e.push(i,n)}x.push(e)}if(!e){let e,t=g[g.length-1];try{e=IV({windingRule:g.length>1?aV.POSITIVE:aV.ODD,elementType:sV.POLYGONS,vertexSize:2,strict:!0,contours:[t.insetPoints,...x]})}catch(M){e=VV}if(!e)throw new Error("Error generating geometry for surface");0===u.length&&this._bevel<o&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let i=0;i<3*e.elementCount;i+=3){let t=this._buildSurfaceVert(e,e.elements[i+0],v),n=this._buildSurfaceVert(e,e.elements[i+1],v),r=this._buildSurfaceVert(e,e.elements[i+2],v);b.push(t.top,n.top,r.top),!1===s&&b.push(r.bottom,n.bottom,t.bottom)}}this.vertexCache={}}this._buffer.shrink();let w=new mb(Uint32Array.from(b),1),A=new mb(this._buffer.positions,3),S=new mb(this._buffer.normals,3),_=new mb(this._buffer.uvs,2);A.needsUpdate=!0,S.needsUpdate=!0,_.needsUpdate=!0,w.needsUpdate=!0,this.setAttribute("position",A),this.setAttribute("normal",S),this.setAttribute("uv",_),this.setIndex(w)}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,i){let n=e[0];for(let r=0,a=n.boundary.vertexCount;r<a;r++){let e=this._buildBevelVert(t,n,r),s=this._buildBevelVert(t,n,(r+1)%a);i.push(s.topP,e.topN,e.bottomN),i.push(s.topP,e.bottomN,s.bottomP)}}_buildSurfaceVert(e,t,i){let n=t.toString();if(n in this.vertexCache)return this.vertexCache[n];let r=e.vertices[2*t+0],a=e.vertices[2*t+1],s=(r-this._minX)/this._width,o=(a-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),c=3*l,h=2*l,u={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=r,this._buffer.positions[c+1]=a,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[h+0]=s,this._buffer.uvs[h+1]=o,!1===this.forPathBevel&&(this._buffer.positions[c+3]=r,this._buffer.positions[c+4]=a,this._buffer.positions[c+5]=i,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[h+2]=s,this._buffer.uvs[h+3]=o),this.vertexCache[n]=u,u}_buildBevelVert(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0,a="".concat(t.bevelI,":").concat(i);if(a in this.vertexCache&&0!==r&&1!==r&&(!r||r===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let s,o,l,c,[h,u]=t.boundary.vertexIndices[i];h!==u?(o=h,s=u,c=!1,l=e.continuous[o]&&e.continuous[s]):(s=h,o=(s-1+e.count)%e.count,c=e.concave[s]&&t.bevelI>0,l=e.continuous[s]||c);let d=Math.cos(t.angle),p=Math.sin(t.angle),f=2*i,m=2*s,g=2*o,v=t.boundary.vertices[f+0],y=t.boundary.vertices[f+1],b=(1-p)*this._bevel,x=(v-this._minX)/this._width,w=(y-this._minY)/this._height;this.forPathBevel&&(void 0!==r&&(x=r),w=1);let A=e.normals[m+0],S=e.normals[m+1],_=e.normals[g+0],E=e.normals[g+1];if(c){A+=(_-A)*(1-n),S+=(E-S)*(1-n);let e=Math.sqrt(A*A+S*S);A/=e,S/=e}let C=this.forPathBevel?this._buffer.get(l?1:2):this._buffer.get(l?2:4),M=3*C,T=2*C,P={i:i,fi:s,topP:C+0,topN:C+0,bottomP:C+1,bottomN:C+1,pathBevelUCoord:r};return this._buffer.positions[M+0]=v,this._buffer.positions[M+1]=y,this._buffer.positions[M+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[M+0]=A*d,this._buffer.normals[M+1]=S*d,this._buffer.normals[M+2]=p,this._buffer.uvs[T+0]=x,this._buffer.uvs[T+1]=w,!1===this.forPathBevel&&(this._buffer.positions[M+3]=v,this._buffer.positions[M+4]=y,this._buffer.positions[M+5]=b,this._buffer.normals[M+3]=A*d,this._buffer.normals[M+4]=S*d,this._buffer.normals[M+5]=-p,this._buffer.uvs[T+2]=w,this._buffer.uvs[T+3]=x),l||(this.forPathBevel?(C+=1,M+=3,T+=2):(C+=2,M+=6,T+=4),P.topP=C+0,P.bottomP=C+1,this._buffer.positions[M+0]=v,this._buffer.positions[M+1]=y,this._buffer.positions[M+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[M+0]=_*d,this._buffer.normals[M+1]=E*d,this._buffer.normals[M+2]=p,this._buffer.uvs[T+0]=x,this._buffer.uvs[T+1]=w,!1===this.forPathBevel&&(this._buffer.positions[M+3]=v,this._buffer.positions[M+4]=y,this._buffer.positions[M+5]=b,this._buffer.normals[M+3]=_*d,this._buffer.normals[M+4]=E*d,this._buffer.normals[M+5]=-p,this._buffer.uvs[T+2]=w,this._buffer.uvs[T+3]=x)),this.vertexCache[a]=P,P}clone(){let e=new HV(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=uO(this.userData),e}},GV=class extends Cb{constructor(e){var t,i,n,r,a,s;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.type="ShapeGeometry",this.windingRule=aV.ODD,this.elementType=sV.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=o,this._triangulationOptions=Object.assign({windingRule:aV.ODD,elementType:sV.POLYGONS,polySize:3,vertexSize:2,strict:!0},l);let c,h,u,d=this._shape.extractShapePointsToFlatArray([],this._curveSegments),p=this._shape.shapeHoles.map(e=>e.extractShapePointsToFlatArray([],this._curveSegments)),f=!0,m=!0;for(let b=0,x=d.length/2;b<x;b++){let e=2*b,t=d[e+0],i=d[e+1];if(void 0!==h&&t!==h&&(f=!1),void 0!==u&&i!==u&&(m=!1),h=t,u=i,!f&&!m)break}if(!f&&!m)try{c=IV({contours:[d,...p],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch(y){c=NV}let g=null!==(t=null===(i=c)||void 0===i?void 0:i.vertexCount)&&void 0!==t?t:1,v=null!==(n=null===(r=c)||void 0===r?void 0:r.elementCount)&&void 0!==n?n:1;if(this._positionAttribute=new mb(new Float32Array(3*g),3),this._normalAttribute=new mb(new Float32Array(3*g),3),this._uvAttribute=new mb(new Float32Array(2*g),2),this._indexAttribute=new mb(new Uint32Array(3*v),1),c){let e=1/0,t=-1/0,i=1/0,n=-1/0;for(let s=0,o=g;s<o;s++){let r=2*s,a=c.vertices[r+0],o=c.vertices[r+1];a<e&&(e=a),a>t&&(t=a),o<i&&(i=o),o>n&&(n=o)}let r=t-e,a=n-i;for(let s=0,o=g;s<o;s++){let t=2*s,n=c.vertices[t+0],o=c.vertices[t+1],l=(n-e)/r,h=(o-i)/a;this._positionAttribute.setXYZ(s,n,o,0),this._normalAttribute.setXYZ(s,0,0,1),this._uvAttribute.setXY(s,l,h)}for(let s=0,o=v;s<o;s++){let e=3*s,t=c.elements[e+0],i=c.elements[e+1],n=c.elements[e+2];this._indexAttribute.setX(e+0,t),this._indexAttribute.setX(e+1,i),this._indexAttribute.setX(e+2,n)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,3*(null!==(a=null===(s=c)||void 0===s?void 0:s.elementCount)&&void 0!==a?a:1))}clone(){let e=new GV(this._shape,this._curveSegments);return e.userData=uO(this.userData),e}},qV=class extends HV{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,arguments.length>5&&void 0!==arguments[5]?arguments[5]:aV.ODD),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,i){let n=e[0];for(let r=0,a=n.boundary.vertexCount;r<a;r++){let e=this._buildBevelVert(t,n,r),s=this._buildBevelVert(t,n,(r+1)%a);i.push(s.topP,e.topN,e.bottomN),i.push(s.topP,e.bottomN,s.bottomP)}}clone(){let e=new qV(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=uO(this.userData),e}},YV=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a,s,o,l,c;let h=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:aV.ODD},e.parameters),u=Math.abs(h.width),d=Math.abs(null!==(n=h.height)&&void 0!==n?n:h.width),p=Math.abs(null!==(r=h.depth)&&void 0!==r?r:0),f=null!==(a=e.shape)&&void 0!==a?a:null===t||void 0===t?void 0:t.shape,m=null!==(s=null===(o=f)||void 0===o?void 0:o.roundness)&&void 0!==s?s:h.roundness;void 0!==f&&(f instanceof pV?(f.width!==u||f.height!==d)&&f.applySize(u,d):f=new pV(u,d).fromJSON(f),void 0!==(null===(l=e.parameters)||void 0===l?void 0:l.roundness)&&(null===(c=e.parameters)||void 0===c?void 0:c.roundness)>0&&f.update());let g=null!==f&&void 0!==f?f:new pV(u,d);return{parameters:Object.assign(h,{width:u,height:d,depth:p,roundness:m}),shape:g}}static build(e){let t,{depth:i,extrudeBevelSize:n,extrudeBevelSegments:r,subdivisions:a,roundness:s,windingRule:o}=e.parameters;return e.shape.roundness=s,t=i<=0?new GV(e.shape,a,{windingRule:o}):new qV(e.shape,i,n,a,r,o),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"VectorGeometry"})})}},XV=2*Math.PI,QV=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return a.angle=wv.clamp(a.angle,0,360),{shape:e.shape&&e.shape instanceof pV?e.shape:new pV,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}static build(e){let t,{width:i,height:n,spikes:r,angle:a,innerRadius:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=function(e,t,i,n,r,a){if(n>=XV)return r>30||r%4===0?(function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=.5522847498,o=t*s,l=i*s;e.addPoint(JV(r-t,a,r-t,a-l,r-t,a+l)),e.addPoint(JV(r,a+i,r-o,a+i,r+o,a+i)),e.addPoint(JV(r+t,a,r+t,a+l,r+t,a-l)),e.addPoint(JV(r,a-i,r+o,a-i,r-o,a-i)),n>0&&eW(e,t,i,n)}(e,t,i,a),Math.round(r/4)):KV(e,n,r,t,i,a);n=Math.max(n,.001);let s={x:0,y:i},o=n+.5*Math.PI,l={x:Math.cos(o)*t,y:Math.sin(o)*i},c=yV({px:s.x,py:s.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:n>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?function(e,t,i,n,r,a,s,o){let l=Math.round(r/n.length);e.addPoint(ZV(t,i));for(let c=0,h=n.length;c<h;c++){let t=n[c],i=e.points[c],r=ZV(t.x,t.y);i.controls[1].position.set(t.x1,t.y1),r.controls[0].position.set(t.x2,t.y2),e.addPoint(r)}return o>0?$V(e,a,s,o):e.addPoint(ZV(0,0)),l}(e,s.x,s.y,c,r,t,i,a):KV(e,n,r,t,i,a)}(h,.5*i,.5*n,a*Math.PI/180,r,s);return h.isClosed=!0,h.update(),0===a?(t=new Cb,t.setAttribute("position",new yb([],3))):t=YV.create({shape:h,parameters:{subdivisions:u,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}}),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"EllipseGeometry"})})}};function KV(e,t,i,n,r,a){let s=-t/i;for(let o=0;o<=i;o++){let t=s*o,i=Math.sin(t)*n,a=Math.cos(t)*r;e.addPoint(ZV(i,a))}return t<XV?a>0?$V(e,n,r,a):e.addPoint(ZV(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&eW(e,n,r,a)),1}function ZV(e,t){return new RU(wv.generateUUID(),new Av(e,t))}function JV(e,t,i,n,r,a){let s=ZV(e,t);return s.controls[0].position.set(i,n),s.controls[1].position.set(r,a),s}function $V(e,t,i,n){tW(e,t,i,n).forEach(t=>e.addPoint(t))}function eW(e,t,i,n){let r=tW(e,t,i,n),a=new pV;r.forEach(e=>a.addPoint(e)),a.isClosed=!0,e.shapeHoles.push(a)}function tW(e,t,i,n){let r=n*t/100,a=r*(Math.abs(i)/Math.abs(t)),s=new Av(r/t,a/i),o=e.points.map(e=>{let t=e.clone();return t.uuid=wv.generateUUID(),t}).reverse();return o.forEach(e=>{e.position.multiply(s);let t=e.controls[0].position.clone().multiply(s),i=e.controls[1].position.clone().multiply(s);e.controls[0].position.copy(i),e.controls[1].position.copy(t)}),o}var iW=new vb([0,0,0],1),nW=class extends Cb{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,o=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;if(super(),0===n)return;let c=e&&1===n;c&&(l=0),o>100&&(o=100),0===o&&(l=0);let h,u,d,p,f,m,g,v,y=()=>new Zv,b=new Zv,x=y(),w=y(),A=y(),S=y(),_=y(),E=y(),C=y(),M=y(),T=y(),P=y(),D=y(),O=t-2*a+.001,k=O/n,I=Math.ceil(r*n),R=I+1,L=O/I,z=-O/2,B=s+1,j=2*Math.PI/s,F=Math.PI/2/l,N=Math.min((1-o/100)*a,a-.01),U=a-N,V=0,W=2*l+2,H=B*W/2,G=H+B*R,q=Math.max(0,B*(R+W)),[Y,X,Q]=[3,3,2].map(e=>Array(q*e).fill(0)),K=[],Z=i-a;function J(t,i){let n=Math.PI/2;m=i*L,v=2*Math.PI*(m%k)/k+n,m+=z,g=Math.sin(v)*Z,f=Math.cos(v)*Z,e?t.set(f,g,m):t.set(f,m,g)}J(b,-1e-10),J(x,0),S.copy(b),J(b,1);let $=b.distanceTo(x),ee=c?0:U+N,te=$*I+2*ee,ie=N,ne=te-ee;for(let oe=0;oe<=I;oe++){J(w,oe),D.subVectors(w,S).normalize(),S.copy(w),T.copy(w).setComponent(+e+1,0).normalize(),P.crossVectors(D,T).normalize();let t=0===oe,i=oe===I,n=t?3*Math.PI/2:F,r=t?ie:ne,o=t?B:G,h=t?0:q-B,u=D.clone().multiplyScalar(t?-U:U).add(w),d=D.clone().multiplyScalar(t?-1:1).normalize();for(let e=0;e<B;e++){let p=e*j;if(_.addVectors(b.copy(T).multiplyScalar(a*Math.cos(p)),x.copy(P).multiplyScalar(a*Math.sin(p))),E.copy(_).normalize(),t||i){c||(V=h+e,[0,1,2].forEach(e=>{Y[3*V+e]=u.getComponent(e),X[3*V+e]=d.getComponent(e)}),Q[2*V]=+i,Q[2*V+1]=e/s),x.copy(E).multiplyScalar(N),A.addVectors(w,x);for(let i=0;i<l;i++){let a=i*F+n;C.addVectors(b.copy(D).multiplyScalar(U*Math.sin(a)),x.copy(E).multiplyScalar(U*Math.cos(a))),M.copy(C).normalize(),x.addVectors(A,C),C.normalize(),V=o+i*B+e,[0,1,2].forEach(e=>{Y[3*V+e]=x.getComponent(e),X[3*V+e]=M.getComponent(e)});let l=+t+Math.sin(a);Q[2*V]=(r+U*l)/te,Q[2*V+1]=e/s}}x.addVectors(w,_),V=H+oe*B+e,[0,1,2].forEach(e=>{Y[3*V+e]=x.getComponent(e),X[3*V+e]=E.getComponent(e)}),Q[2*V]=(ee+oe*$)/te,Q[2*V+1]=e/s}}let re=R+2*l+2,[ae,se]=[+c,re-1];for(let oe=ae;oe<=se-1;oe++){let e=c&&oe===se-1;for(let t=0;t<B-1;t++)h=oe*B+t,u=h+1,d=(e?t:h)+B,p=(e?t+1:u)+B,0===oe?K.push(u,p,d):oe===re-2?K.push(h,u,d):K.push(h,u,d,u,p,d)}this.setIndex(K),this.setAttribute("position",new yb(Y,3)),this.setAttribute("normal",new yb(X,3)),this.setAttribute("uv",new yb(Q,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e,t,i,n,r=this.userData.parameters,a=Math.ceil(r.tubularSegments),s=r.radialSegments+1,o=Array.from(this.getIndex().array),l=6*(a-1)*r.radialSegments,c=a,h=c===a;for(let u=0;u<r.radialSegments;u++)e=c*s+u,t=e+1,i=(h?u:e)+s,n=(h?u+1:t)+s,o[l++]=e,o[l++]=t,o[l++]=i,o[l++]=t,o[l++]=n,o[l++]=i;return o.length=l,iW.array=o,iW.count=o.length,iW}},rW=class extends PU{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=(1+Math.sqrt(5))/2,r="IcosahedronGeometry";super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,e,t,i),this.type=r}static fromJSON(e){return new rW(e.radius,e.corner,e.cornerSides)}},aW=new My,sW=new Jy,oW=new Zv,lW=class extends ov{constructor(){super(),this.uuid=wv.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new Sv).getNormalMatrix(e);for(let i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);for(let i=0,n=this.faces.length;i<n;i++){let e=this.faces[i];e.normal.applyMatrix3(t).normalize();for(let i=0,n=e.vertexNormals.length;i<n;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return aW.makeRotationX(e),this.applyMatrix4(aW),this}rotateY(e){return aW.makeRotationY(e),this.applyMatrix4(aW),this}rotateZ(e){return aW.makeRotationZ(e),this.applyMatrix4(aW),this}translate(e,t,i){return aW.makeTranslation(e,t,i),this.applyMatrix4(aW),this}scale(e,t,i){return aW.makeScale(e,t,i),this.applyMatrix4(aW),this}lookAt(e){return sW.lookAt(e),sW.updateMatrix(),this.applyMatrix4(sW.matrix),this}fromBufferGeometry(e){let t=this,i=null!==e.index?e.index:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=n.position,a=n.normal,s=n.color,o=n.uv,l=n.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)t.vertices.push((new Zv).fromBufferAttribute(r,u)),void 0!==s&&t.colors.push((new Fv).fromBufferAttribute(s,u));function c(e,i,n,r){let c=void 0===s?[]:[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()],h=void 0===a?[]:[(new Zv).fromBufferAttribute(a,e),(new Zv).fromBufferAttribute(a,i),(new Zv).fromBufferAttribute(a,n)],u=new hW(e,i,n,h,c,r);t.faces.push(u),void 0!==o&&t.faceVertexUvs[0].push([(new Av).fromBufferAttribute(o,e),(new Av).fromBufferAttribute(o,i),(new Av).fromBufferAttribute(o,n)]),void 0!==l&&t.faceVertexUvs[1].push([(new Av).fromBufferAttribute(l,e),(new Av).fromBufferAttribute(l,i),(new Av).fromBufferAttribute(l,n)])}let h=e.groups;if(h.length>0)for(let u=0;u<h.length;u++){let e=h[u],t=e.start;for(let n=t,r=t+e.count;n<r;n+=3)void 0!==i?c(i.getX(n),i.getX(n+1),i.getX(n+2),e.materialIndex):c(n,n+1,n+2,e.materialIndex)}else if(void 0!==i)for(let u=0;u<i.count;u+=3)c(i.getX(u),i.getX(u+1),i.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oW).negate(),this.translate(oW.x,oW.y,oW.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,n=new My;return n.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let e=new Zv,t=new Zv;for(let i=0,n=this.faces.length;i<n;i++){let n=this.faces[i],r=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(r,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length);for(let i=0,n=this.vertices.length;i<n;i++)t[i]=new Zv;if(e){let e=new Zv,i=new Zv;for(let n=0,r=this.faces.length;n<r;n++){let r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,s),i.subVectors(a,s),e.cross(i),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,i=this.faces.length;e<i;e++){let i=this.faces[e];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let i=0,n=this.vertices.length;i<n;i++)t[i].normalize();for(let i=0,n=this.faces.length;i<n;i++){let e=this.faces[i],n=e.vertexNormals;3===n.length?(n[0].copy(t[e.a]),n[1].copy(t[e.b]),n[2].copy(t[e.c])):(n[0]=t[e.a].clone(),n[1]=t[e.b].clone(),n[2]=t[e.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],i=t.vertexNormals;3===i.length?(i[0].copy(t.normal),i[1].copy(t.normal),i[2].copy(t.normal)):(i[0]=t.normal.clone(),i[1]=t.normal.clone(),i[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,i=e.vertexNormals.length;t<i;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}let e=new lW;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let e=this.morphNormals[t].faceNormals,i=this.morphNormals[t].vertexNormals;for(let t=0,n=this.faces.length;t<n;t++){let t=new Zv,n={a:new Zv,b:new Zv,c:new Zv};e.push(t),i.push(n)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],n=i.faceNormals[e],r=i.vertexNormals[e];n.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ey),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new yy),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let n,r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,c=this.colors,h=e.colors;void 0!==t&&(n=(new Sv).getNormalMatrix(t));for(let u=0,d=s.length;u<d;u++){let e=s[u].clone();void 0!==t&&e.applyMatrix4(t),a.push(e)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let e,t,a=l[u],s=a.vertexNormals,c=a.vertexColors,h=new hW(a.a+r,a.b+r,a.c+r);h.normal.copy(a.normal),void 0!==n&&h.normal.applyMatrix3(n).normalize();for(let i=0,r=s.length;i<r;i++)e=s[i].clone(),void 0!==n&&e.applyMatrix3(n).normalize(),h.vertexNormals.push(e);h.color.copy(a.color);for(let i=0,n=c.length;i<n;i++)t=c[i],h.vertexColors.push(t.clone());h.materialIndex=a.materialIndex+i,o.push(h)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let t=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(let e=0,i=t.length;e<i;e++){let i=t[e],n=[];for(let e=0,t=i.length;e<t;e++)n.push(i[e].clone());this.faceVertexUvs[u].push(n)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},i=[],n=[],r=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let e=this.vertices[o],a=Math.round(e.x*r)+"_"+Math.round(e.y*r)+"_"+Math.round(e.z*r);void 0===t[a]?(t[a]=o,i.push(this.vertices[o]),n[o]=i.length-1):n[o]=n[t[a]]}let a=[];for(let o=0,l=this.faces.length;o<l;o++){let e=this.faces[o];e.a=n[e.a],e.b=n[e.b],e.c=n[e.c];let t=[e.a,e.b,e.c];for(let i=0;i<3;i++)if(t[i]===t[(i+1)%3]){a.push(o);break}}for(let o=a.length-1;o>=0;o--){let e=a[o];this.faces.splice(e,1);for(let t=0,i=this.faceVertexUvs.length;t<i;t++)this.faceVertexUvs[t].splice(e,1)}let s=this.vertices.length-i.length;return this.vertices=i,s}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let i=e[t];this.vertices.push(new Zv(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;e.sort(function(e,t){return e.materialIndex-t.materialIndex});let i,n,r=this.faceVertexUvs[0],a=this.faceVertexUvs[1];r&&r.length===t&&(i=[]),a&&a.length===t&&(n=[]);for(let s=0;s<t;s++){let t=e[s]._id;i&&i.push(r[t]),n&&n.push(a[t])}i&&(this.faceVertexUvs[0]=i),n&&(this.faceVertexUvs[1]=n)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let t=this.parameters;for(let i in t)void 0!==t[i]&&(e[i]=t[i]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let e=this.vertices[p];t.push(e.x,e.y,e.z)}let i=[],n=[],r={},a=[],s={},o=[],l={};for(let p=0;p<this.faces.length;p++){let e=this.faces[p],t=!0,n=!1,r=void 0!==this.faceVertexUvs[0][p],a=e.normal.length()>0,s=e.vertexNormals.length>0,o=1!==e.color.r||1!==e.color.g||1!==e.color.b,l=e.vertexColors.length>0,f=0;if(f=c(f,0,0),f=c(f,1,t),f=c(f,2,n),f=c(f,3,r),f=c(f,4,a),f=c(f,5,s),f=c(f,6,o),f=c(f,7,l),i.push(f),i.push(e.a,e.b,e.c),i.push(e.materialIndex),r){let e=this.faceVertexUvs[0][p];i.push(d(e[0]),d(e[1]),d(e[2]))}if(a&&i.push(h(e.normal)),s){let t=e.vertexNormals;i.push(h(t[0]),h(t[1]),h(t[2]))}if(o&&i.push(u(e.color)),l){let t=e.vertexColors;i.push(u(t[0]),u(t[1]),u(t[2]))}}function c(e,t,i){return i?e|1<<t:e&~(1<<t)}function h(e){let t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=n.length/3,n.push(e.x,e.y,e.z)),r[t]}function u(e){let t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==s[t]||(s[t]=a.length,a.push(e.getHex())),s[t]}function d(e){let t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=o.length/2,o.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=n,a.length>0&&(e.data.colors=a),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return(new lW).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());let i=e.colors;for(let u=0,d=i.length;u<d;u++)this.colors.push(i[u].clone());let n=e.faces;for(let u=0,d=n.length;u<d;u++)this.faces.push(n[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let t=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(let e=0,i=t.length;e<i;e++){let i=t[e],n=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];n.push(t.clone())}this.faceVertexUvs[u].push(n)}}let r=e.morphTargets;for(let u=0,d=r.length;u<d;u++){let e={};if(e.name=r[u].name,void 0!==r[u].vertices){e.vertices=[];for(let t=0,i=r[u].vertices.length;t<i;t++)e.vertices.push(r[u].vertices[t].clone())}if(void 0!==r[u].normals){e.normals=[];for(let t=0,i=r[u].normals.length;t<i;t++)e.normals.push(r[u].normals[t].clone())}this.morphTargets.push(e)}let a=e.morphNormals;for(let u=0,d=a.length;u<d;u++){let e={};if(void 0!==a[u].vertexNormals){e.vertexNormals=[];for(let t=0,i=a[u].vertexNormals.length;t<i;t++){let i=a[u].vertexNormals[t],n={};n.a=i.a.clone(),n.b=i.b.clone(),n.c=i.c.clone(),e.vertexNormals.push(n)}}if(void 0!==a[u].faceNormals){e.faceNormals=[];for(let t=0,i=a[u].faceNormals.length;t<i;t++)e.faceNormals.push(a[u].faceNormals[t].clone())}this.morphNormals.push(e)}let s=e.skinWeights;for(let u=0,d=s.length;u<d;u++)this.skinWeights.push(s[u].clone());let o=e.skinIndices;for(let u=0,d=o.length;u<d;u++)this.skinIndices.push(o[u].clone());let l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());let h=e.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new cW).fromGeometry(this),t=new Cb,i=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",fW.call(new mb(i,3),e.vertices)),e.normals.length>0){let i=new Float32Array(3*e.normals.length);t.setAttribute("normal",fW.call(new mb(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(3*e.colors.length);t.setAttribute("color",dW.call(new mb(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(2*e.uvs.length);t.setAttribute("uv",pW.call(new mb(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",pW.call(new mb(i,2),e.uvs2))}t.groups=e.groups;for(let n in e.morphTargets){let i=[],r=e.morphTargets[n];for(let e=0,t=r.length;e<t;e++){let t=r[e],n=new yb(3*t.data.length,3);n.name=t.name,i.push(fW.call(n,t.data))}t.morphAttributes[n]=i}if(e.skinIndices.length>0){let i=new yb(4*e.skinIndices.length,4);t.setAttribute("skinIndex",mW.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new yb(4*e.skinWeights.length,4);t.setAttribute("skinWeight",mW.call(i,e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Cb,i=e.geometry;if(e.isPoints||e.isLine){let e=new yb(3*i.vertices.length,3),n=new yb(3*i.colors.length,3);if(t.setAttribute("position",fW.call(e,i.vertices)),t.setAttribute("color",dW.call(n,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let e=new yb(i.lineDistances.length,1);t.setAttribute("lineDistance",uW.call(e,i.lineDistances))}null!==i.boundingSphere&&(t.boundingSphere=i.boundingSphere.clone()),null!==i.boundingBox&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};lW.prototype.isGeometry=!0;var cW=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t,i,n,r=[],a=e.faces;for(i=0;i<a.length;i++){let e=a[i];e.materialIndex!==n&&(n=e.materialIndex,void 0!==t&&(t.count=3*i-t.start,r.push(t)),t={start:3*i,materialIndex:n})}void 0!==t&&(t.count=3*i-t.start,r.push(t)),this.groups=r}fromGeometry(e){let t,i=e.faces,n=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,o=e.morphTargets,l=o.length;if(l>0){t=[];for(let e=0;e<l;e++)t[e]={name:o[e].name,data:[]};this.morphTargets.position=t}let c,h=e.morphNormals,u=h.length;if(u>0){c=[];for(let e=0;e<u;e++)c[e]={name:h[e].name,data:[]};this.morphTargets.normal=c}let d=e.skinIndices,p=e.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<i.length;g++){let e=i[g];this.vertices.push(n[e.a],n[e.b],n[e.c]);let v=e.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{let t=e.normal;this.normals.push(t,t,t)}let y=e.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{let t=e.color;this.colors.push(t,t,t)}if(!0===a){let e=r[0][g];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new Av,new Av,new Av))}if(!0===s){let e=r[1][g];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new Av,new Av,new Av))}for(let i=0;i<l;i++){let n=o[i].vertices;t[i].data.push(n[e.a],n[e.b],n[e.c])}for(let t=0;t<u;t++){let e=h[t].vertexNormals[g];c[t].data.push(e.a,e.b,e.c)}f&&this.skinIndices.push(d[e.a],d[e.b],d[e.c]),m&&this.skinWeights.push(p[e.a],p[e.b],p[e.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},hW=class{constructor(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new Zv,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new Fv,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=a}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function uW(e){return this.array.set(e),this}function dW(e){let t=this.array,i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new Fv),t[i++]=r.r,t[i++]=r.g,t[i++]=r.b}return this}function pW(e){let t=this.array,i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new Av),t[i++]=r.x,t[i++]=r.y}return this}function fW(e){let t=this.array,i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new Zv),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z}return this}function mW(e){let t=this.array,i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new qv),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z,t[i++]=r.w}return this}var gW=["a","b","c"];function vW(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function yW(e,t,i){let n=Math.min(e,t)+"_"+Math.max(e,t);return i.get(n)}function bW(e,t,i,n,r,a){let s,o=Math.min(e,t),l=Math.max(e,t),c=o+"_"+l;if(n.has(c))s=n.get(c);else{s={a:i[o],b:i[l],newEdge:null,faces:[]},n.set(c,s)}s.faces.push(r),a[e].edges.push(s),a[t].edges.push(s)}function xW(e,t,i,n,r){e.push(new hW(t,i,n,void 0,void 0,r))}function wW(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function AW(e,t,i,n){e.push([t.clone(),i.clone(),n.clone()])}var SW=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.subdivisions=e}modify(e){(e=e instanceof Cb?(new lW).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t,i,n,r,a,s=new Zv,o=e.vertices,l=e.faces,c=e.faceVertexUvs[0],h=void 0!==c&&c.length>0,u=[],d=new Map;!function(e,t,i,n){let r,a,s;for(r=0,a=e.length;r<a;r++)i[r]={edges:[]};for(r=0,a=t.length;r<a;r++)s=t[r],bW(s.a,s.b,e,n,s,i),bW(s.b,s.c,e,n,s,i),bW(s.c,s.a,e,n,s,i)}(o,l,u,d);let p,f,m,g,v,y,b,x=[];for(let W of Array.from(d.keys())){for(f=d.get(W),m=new Zv,v=3/8,y=1/8,b=f.faces.length,2!=b&&(v=.5,y=0),m.addVectors(f.a,f.b).multiplyScalar(v),s.set(0,0,0),r=0;r<b;r++){for(g=f.faces[r],a=0;a<3&&(p=o[vW(g,gW[a])],p===f.a||p===f.b);a++);p&&s.add(p)}s.multiplyScalar(y),m.add(s),f.newEdge=x.length,x.push(m)}let w,A,S,_,E,C,M,T=[];for(i=0,n=o.length;i<n;i++){for(C=o[i],E=u[i].edges,t=E.length,3==t?w=3/16:t>3&&(w=3/(8*t)),A=1-t*Number(w),S=w,t<=2&&(2==t&&(A=3/4,S=1/8)),M=C.clone().multiplyScalar(A),s.set(0,0,0),r=0;r<t;r++)_=E[r],p=_.a!==C?_.a:_.b,s.add(p);s.multiplyScalar(Number(S)),M.add(s),T.push(M)}let P,D,O,k,I,R,L,z=T.concat(x),B=T.length,j=[],F=[],N=new Av,U=new Av,V=new Av;for(i=0,n=l.length;i<n;i++)g=l[i],P=Number(yW(g.a,g.b,d).newEdge)+B,D=Number(yW(g.b,g.c,d).newEdge)+B,O=Number(yW(g.c,g.a,d).newEdge)+B,xW(j,P,D,O,g.materialIndex),xW(j,g.a,P,O,g.materialIndex),xW(j,g.b,D,P,g.materialIndex),xW(j,g.c,O,D,g.materialIndex),h&&(k=c[i],I=k[0],R=k[1],L=k[2],N.set(wW(I.x,R.x),wW(I.y,R.y)),U.set(wW(R.x,L.x),wW(R.y,L.y)),V.set(wW(I.x,L.x),wW(I.y,L.y)),AW(F,N,U,V),AW(F,I,N,V),AW(F,R,U,N),AW(F,L,V,U));e.vertices=z,e.faces=j,h&&(e.faceVertexUvs[0]=F)}},_W=new Zv,EW=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof pV?e.shape:new pV,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}static build(e){let{width:t,height:i,spikes:n,cornerRadius:r,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}=e.parameters,l=e.shape,c=.5*t,h=.5*i,u=2*Math.PI/n;for(let p=0;p<n;p++){let e=u*p,t=0+Math.sin(e)*c,i=0+Math.cos(e)*h;l.addPoint(l.createPoint(t,i))}l.isClosed=!0;for(let p=0,f=l.points.length;p<f;p++)l.points[p].roundness=r;l.roundness=r,l.update();let d=YV.create({shape:l,parameters:{roundness:r,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(d,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"PolygonGeometry"})})}};function CW(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function MW(e,t,i,n,r,a){let s=t.clone().sub(e),o=i.clone().sub(e),l=s.angleTo(o);if(s.normalize(),o.normalize(),n===r){let t=s.add(o).normalize();a.copy(e).addScaledVector(t,n/Math.sin(l/2))}else{let t=s.angleTo(o);a.copy(e),a.addScaledVector(s,r/Math.sin(t)),a.addScaledVector(o,n/Math.sin(t))}}function TW(e,t,i){let n=e.clone().sub(t),r=i.clone().sub(t);return n.projectOnVector(r),n.add(t)}var PW=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4;super(),i=Math.floor(Math.max(3,i)),n=Math.floor(n),s=Math.floor(s);let o,l=[],c=[],h=[],u=[],d=0,p=t/2,f=Math.PI/i,m=e*Math.cos(Math.PI/i),g=2*Math.PI/i,v=(i-2)*Math.PI/i,y=Math.PI-v,b=new Zv(0,-p,0),x=new Zv(0,p,0),w=new Av(e,-p),A=new Av(m,-p),S=new Av(0,x.y).sub(A),_=new Av(0,x.y).sub(w),E=new Av(S.y,-S.x).normalize(),C=new Av(_.y,-_.x).normalize(),M=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-S.angle())/2)-1e-8;a=Math.min(a,M);{let e=new Zv(E.x,E.y,0),t=new Zv(Math.cos(g)*e.x,e.y,Math.sin(g)*e.x);o=e.angleTo(t)}let T=a/Math.tan((Math.PI-S.angle())/2),P=a/Math.tan((Math.PI-o)/2),D=new Zv;if(!r){c.push(b.x,b.y,b.z),h.push(0,-1,0),u.push(0,0);let e=d++,t=[],n=w.clone(),r=T/Math.cos(Math.PI/i);n.x-=r;for(let a=0;a<i;a++){let e=a/i*Math.PI*2+f;CW(n,new Av(Math.sin(e),Math.cos(e)),D),c.push(D.x,D.y,D.z),h.push(0,-1,0),u.push(0,0),t.push(d++)}for(let i=0;i<t.length;i++)l.push(t[i],e,t[(i+1)%t.length])}let O=[];{let e=new Zv,t=new Zv,n=new Zv,r=new Zv,p=new Zv,m=new Zv;for(let g=0;g<i;g++){let v=g/i*Math.PI*2+f,y=(g+.5)/i*Math.PI*2+f,A=(g+1)/i*Math.PI*2+f,_=new Av(Math.sin(v),Math.cos(v)),M=new Av(Math.sin(y),Math.cos(y)),D=new Av(Math.sin(A),Math.cos(A));CW(w,_,t),CW(w,D,n),CW(E,M,e),MW(x,t,n,P,P,r),c.push(r.x,r.y,r.z),MW(t,x,n,P,T,p),c.push(p.x,p.y,p.z),MW(n,t,x,T,P,m),c.push(m.x,m.y,m.z),h.push(e.x,e.y,e.z),h.push(e.x,e.y,e.z),h.push(e.x,e.y,e.z),u.push(0,0),u.push(0,0),u.push(0,0);let R=d++,L=d++,z=d++;if(l.push(R,L,z),a>0){{let e=t.clone().add(n).multiplyScalar(.5),i=x.clone().sub(e).normalize(),r=b.clone().sub(e).normalize().add(i).normalize().multiplyScalar(-1);k(e,m.clone().sub(p),r,S.angle())}let f,g;{let e=new Zv;CW(C,D,e);let t=m.clone().add(r).multiplyScalar(.5);t=TW(t,n,x);let i=m.clone().sub(r);[f,g]=k(t,i,e,o,r.y)}{let e=f,t=e.clone().setY(0).normalize(),i=new Zv(0,-1,0),n=t.clone().cross(i);I(e,t,i,n)}O.concat(g);{let t=S.angle(),n=Math.PI-t,r=x.clone();r.y-=a/Math.sin(t-Math.PI/2);let o=new Zv,p=[];for(let l=0;l<s;l++){let t=[],f=Math.PI/2-n*l/s,m=Math.cos(f),g=Math.sin(f),v=y;for(let n=0;n<=l;n++){let n=Math.cos(v),s=Math.sin(v);e.x=m*s,e.y=g,e.z=m*n,o.copy(r).addScaledVector(e,a),c.push(o.x,o.y,o.z),h.push(e.x,e.y,e.z),u.push(0,0),t.push(d++),v+=2*Math.PI/l/i}p.push(t)}g.reverse(),p.push(g);let f=p.length-1;for(let e=0;e<f;e++){let t=p[e],i=p[e+1],n=t.length-1;l.push(i[1],t[0],i[0]);for(let e=1;e<=n;e++)l.push(t[e],t[e-1],i[e]),l.push(i[e+1],t[e],i[e])}}}}}function k(e,t,i,n,r){let o=-n/2,p=(Math.PI-n)/2,f=t.clone().normalize().cross(i);e.addScaledVector(i,-a/Math.sin(p));let m=new Zv,g=new Zv,v=d,y=[];for(let l=0;l<=s;l++){let p=o+l/s*n;g.set(0,0,0),g.addScaledVector(f,Math.sin(p)),g.addScaledVector(i,Math.cos(p));for(let i=0;i<=1;i++){let n=i/1-.5;if(m.copy(e),m.addScaledVector(t,n),m.addScaledVector(g,a),null!=r){let e=Math.max(0,m.y-r);m.addScaledVector(t,-e/t.y)}c.push(m.x,m.y,m.z),h.push(g.x,g.y,g.z),u.push(0,0),0===i&&y.push(d),d++}}for(let a=0;a<s;a++)for(let e=0;e<1;e++){let t=v+e+2*a,i=t+2,n=i+1,r=t+1;l.push(t,i,r),l.push(i,n,r)}return[e.clone().addScaledVector(t,.5),y]}function I(e,t,i,n){let r=Math.PI/2,o=_.angle()-r,p=[],f=new Zv,m=new Zv;for(let l=0;l<=s;l++){let g=[],v=l/s;for(let s=0;s<=l;s++){let p=((l?s/l:0)-.5)*y,b=Math.cos(p),x=Math.sin(p),w=(r+Math.atan(Math.tan(o)*b))*v,A=Math.cos(w),S=Math.sin(w);f.set(0,0,0),f.addScaledVector(t,S*b),f.addScaledVector(i,A),f.addScaledVector(n,S*x),m.copy(e).addScaledVector(f,a),c.push(m.x,m.y,m.z),h.push(f.x,f.y,f.z),u.push(0,0),g.push(d++)}p.push(g)}let g=p.length-1;for(let a=0;a<g;a++){let e=p[a],t=p[a+1],i=e.length-1;l.push(e[0],t[1],t[0]);for(let n=1;n<=i;n++)l.push(e[n-1],e[n],t[n]),l.push(e[n],t[n+1],t[n])}}this.setIndex(l),this.setAttribute("position",new yb(c,3)),this.setAttribute("normal",new yb(h,3)),this.setAttribute("uv",new yb(u,2))}},DW=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a;let s=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),o=Object.assign(null!==(n=null===t||void 0===t?void 0:t.ui)&&void 0!==n?n:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof pV?e.shape:new pV,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(r=s.height)&&void 0!==r?r:s.width),depth:Math.abs(null!==(a=s.depth)&&void 0!==a?a:0)}),ui:o}}static build(e){let t=e.shape,{width:i,height:n,cornerRadius:r,cornerType:a,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c={x:.5*i,y:.5*n},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(e,t,r){return t>i&&r>n?Math.min(e*i/t,e*n/r):t>i?e*i/t:r>n?e*n/r:e}let p=[];p[0]=0===r[0]?0:d(r[0],r[0]+r[3],r[0]+r[1]),p[1]=0===r[1]?0:d(r[1],r[1]+r[2],r[1]+r[0]),p[2]=0===r[2]?0:d(r[2],r[2]+r[1],r[2]+r[3]),p[3]=0===r[3]?0:d(r[3],r[3]+r[0],r[3]+r[2]);let f=h.x,m=u.x,g=u.y,v=h.y;t.addPoint(t.createPoint(f,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(f,v)),t.isClosed=!0;let y=!0;for(let x=0,w=t.points.length;x<w;x++)t.points[x].roundness=p[x],x>0&&p[x]!==p[x-1]&&(y=!1);y&&(t.roundness=p[0]),t.useCubicForRoundedCorners=1!==a,t.update();let b=YV.create({shape:t,parameters:{depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(b,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"RectangleGeometry"})})}},OW=class extends Cb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:90,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:24;super(),this.type="BackdropGeometry";let s=[],o=[],l=[],c=.001;0==r&&(a=1),a=Math.max(1,Math.floor(a)),r=Math.min(r,100),n=Math.min(180-c,n),n*=Math.PI/180;let h=[],u=Math.PI/2,d=function(){return new Zv(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)},p=d(),f=d(),[m,g,v]=[t/2,e/2,i/2],y=-g,b=+g,[x,w,A]=[d(y,-m,+v),d(y,-m,-v),d(y,+m,-v)],S=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.sin(e-Math.PI/(+t+1))},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.cos(e-Math.PI/(+t+1))};A.y=Math.sin(n)*t-m;let E=Math.cos(n)*t-v,C=x.z-c;n<=u?(A.z=Math.min(E,C),A.z==C&&(A.y-=(E-C)/Math.tan(u-n))):w.z=Math.min(w.z-E-v,x.z-c),p.subVectors(x,w),f.subVectors(A,w);let M=Math.min(p.length(),f.length())*r/100,T=M*Math.tan(n/2),P=M/Math.cos(n/2),D=p.clone().normalize().add(f.normalize()).setLength(P).add(w);p.set(0,S(n,!0),_(n,!0)),h.push([A,p.clone()]);let O=(Math.PI-n)/a;for(let V=0;V<=a;V++){let e=u+n+V*O;p.set(0,Math.sin(e)*T,Math.cos(e)*T),p.add(D),f.set(0,S(e),_(e)),h.push([p.clone(),f.clone()])}h.push([x,d(0,1,0)]);let k=Math.sin(O/2)*T*2,I=h.length-1,R=h[0][0].distanceTo(h[1][0]),L=R+k*a+h[I-1][0].distanceTo(h[I][0]);h[0].push(1);for(let V=0;V<=a;V++)h[V+1].push(1-(R+V*k)/L);h[I].push(0);let z,B,j,[F,N,U]=h[0];for(let V=1;V<h.length;V++)[z,B,j]=h[V],s.push(y,F.y,F.z,y,z.y,z.z,b,F.y,F.z,b,F.y,F.z,y,z.y,z.z,b,z.y,z.z),o.push(0,N.y,N.z,0,B.y,B.z,0,N.y,N.z,0,N.y,N.z,0,B.y,B.z,0,B.y,B.z),l.push(0,U,0,j,1,U,1,U,0,j,1,j),[F,N,U]=[z,B,j];this.setAttribute("position",new yb(s,3)),this.setAttribute("normal",new yb(o,3)),this.setAttribute("uv",new yb(l,2))}},kW=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof pV?e.shape:new pV,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:n,spikes:r,cornerRadius:a,angle:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=.5*t,d=.5*i,p=s*Math.PI/360/r,f=Math.PI/2*3*-1,m=u*n/100,g=d*n/100;if(3===r&&50===n){p=2*Math.PI/r;for(let e=0;e<r;e++){let t=p*e,i=0+Math.sin(t)*u,n=0+Math.cos(t)*d;h.addPoint(h.createPoint(i,n))}}else for(let y=0;y<r;y++){let e=0+Math.cos(f)*u,t=0+Math.sin(f)*d;h.addPoint(h.createPoint(e,t)),f+=p,e=0+Math.cos(f)*m,t=0+Math.sin(f)*g,h.addPoint(h.createPoint(e,t)),f+=p}h.isClosed=!0;for(let y=0,b=h.points.length;y<b;y++)h.points[y].roundness=a;h.roundness=a,h.update();let v=YV.create({shape:h,parameters:{roundness:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(v,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"StarGeometry"})})}};var IW={parseRgba:function(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())},hsvToRgb:function(e,t,i){let n,r,a,s=Math.floor(6*e),o=6*e-s,l=i*(1-t),c=i*(1-o*t),h=i*(1-(1-o)*t);switch(s%6){case 0:n=i,r=h,a=l;break;case 1:n=c,r=i,a=l;break;case 2:n=l,r=i,a=h;break;case 3:n=l,r=c,a=i;break;case 4:n=h,r=l,a=i;break;default:n=i,r=l,a=c}return{r:255*n,g:255*r,b:255*a}},rgbToHsv:function(e,t,i){e/=255,t/=255,i/=255;let n,r=Math.max(e,t,i),a=Math.min(e,t,i),s=r,o=r-a,l=0==r?0:o/r;if(r==a)n=0;else{switch(r){case e:n=(t-i)/o+(t<i?6:0);break;case t:n=(i-e)/o+2;break;default:n=(e-t)/o+4}n/=6}return{h:n,s:l,v:s}},hexToRgb:function(e){return{r:(e=Math.floor(e))>>16&255,g:e>>8&255,b:255&e}},rgbToHex:function(e,t,i){return(e<<16)+(t<<8)+i},rgbToHexString:function(e,t,i){return"#"+[e=Math.round(e),t=Math.round(t),i=Math.round(i)].map(e=>e.toString(16).padStart(2,"0")).join("").toUpperCase()},hexStringToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,n)=>String(t+t+i+i+n+n));let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}},RW=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+RW.version}static addUnaryOp(e){return RW.max_unop_len=Math.max(e.length,RW.max_unop_len),RW.unary_ops[e]=1,RW}static addBinaryOp(e,t,i){return RW.max_binop_len=Math.max(e.length,RW.max_binop_len),RW.binary_ops[e]=t,i?RW.right_associative.add(e):RW.right_associative.delete(e),RW}static addIdentifierChar(e){return RW.additional_identifier_chars.add(e),RW}static addLiteral(e,t){return RW.literals[e]=t,RW}static removeUnaryOp(e){return delete RW.unary_ops[e],e.length===RW.max_unop_len&&(RW.max_unop_len=RW.getMaxKeyLen(RW.unary_ops)),RW}static removeAllUnaryOps(){return RW.unary_ops={},RW.max_unop_len=0,RW}static removeIdentifierChar(e){return RW.additional_identifier_chars.delete(e),RW}static removeBinaryOp(e){return delete RW.binary_ops[e],e.length===RW.max_binop_len&&(RW.max_binop_len=RW.getMaxKeyLen(RW.binary_ops)),RW.right_associative.delete(e),RW}static removeAllBinaryOps(){return RW.binary_ops={},RW.max_binop_len=0,RW}static removeLiteral(e){return delete RW.literals[e],RW}static removeAllLiterals(){return RW.literals={},RW}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new RW(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(e=>e.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return RW.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!RW.binary_ops[String.fromCharCode(e)]||RW.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return RW.isIdentifierStart(e)||RW.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(RW.hooks[e]){let i={context:this,node:t};return RW.hooks.run(e,i),i.node}return t}searchHook(e){if(RW.hooks[e]){let t={context:this};return RW.hooks[e].find(function(e){return e.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===RW.SPACE_CODE||e===RW.TAB_CODE||e===RW.LF_CODE||e===RW.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:RW.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,i,n=[];for(;this.index<this.expr.length;)if(t=this.code,t===RW.SEMCOL_CODE||t===RW.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,RW.max_binop_len),t=e.length;for(;t>0;){if(RW.binary_ops.hasOwnProperty(e)&&(!RW.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!RW.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,i,n,r,a,s,o,l;if(a=this.gobbleToken(),!a||(t=this.gobbleBinaryOp(),!t))return a;for(r={value:t,prec:RW.binaryPrecedence(t),right_a:RW.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),n=[a,r,s];t=this.gobbleBinaryOp();){if(i=RW.binaryPrecedence(t),0===i){this.index-=t.length;break}r={value:t,prec:i,right_a:RW.right_associative.has(t)},l=t;let o=e=>r.right_a&&e.right_a?i>e.prec:i<=e.prec;for(;n.length>2&&o(n[n.length-2]);)s=n.pop(),t=n.pop().value,a=n.pop(),e={type:RW.BINARY_EXP,operator:t,left:a,right:s},n.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),n.push(r,e)}for(o=n.length-1,e=n[o];o>1;)e={type:RW.BINARY_EXP,operator:n[o-1].value,left:n[o-2],right:e},o-=2;return e}gobbleToken(){let e,t,i,n;if(this.gobbleSpaces(),n=this.searchHook("gobble-token"),n)return this.runHook("after-token",n);if(e=this.code,RW.isDecimalDigit(e)||e===RW.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===RW.SQUOTE_CODE||e===RW.DQUOTE_CODE)n=this.gobbleStringLiteral();else if(e===RW.OBRACK_CODE)n=this.gobbleArray();else{for(t=this.expr.substr(this.index,RW.max_unop_len),i=t.length;i>0;){if(RW.unary_ops.hasOwnProperty(t)&&(!RW.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!RW.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=i;let e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:RW.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--i)}RW.isIdentifierStart(e)?(n=this.gobbleIdentifier(),RW.literals.hasOwnProperty(n.name)?n={type:RW.LITERAL,value:RW.literals[n.name],raw:n.name}:n.name===RW.this_str&&(n={type:RW.THIS_EXP})):e===RW.OPAREN_CODE&&(n=this.gobbleGroup())}return n?(n=this.gobbleTokenProperty(n),this.runHook("after-token",n)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===RW.PERIOD_CODE||t===RW.OBRACK_CODE||t===RW.OPAREN_CODE||t===RW.QUMARK_CODE;){let i;if(t===RW.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==RW.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===RW.OBRACK_CODE?(e={type:RW.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==RW.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===RW.OPAREN_CODE?e={type:RW.CALL_EXP,arguments:this.gobbleArguments(RW.CPAREN_CODE),callee:e}:(t===RW.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),e={type:RW.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),i&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,i="";for(;RW.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);if(this.code===RW.PERIOD_CODE)for(i+=this.expr.charAt(this.index++);RW.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(i+=this.expr.charAt(this.index++),e=this.char,("+"===e||"-"===e)&&(i+=this.expr.charAt(this.index++));RW.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);RW.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+i+this.char+")")}return t=this.code,RW.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+i+this.char+")"):(t===RW.PERIOD_CODE||1===i.length&&i.charCodeAt(0)===RW.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:RW.LITERAL,value:parseFloat(i),raw:i}}gobbleStringLiteral(){let e="",t=this.index,i=this.expr.charAt(this.index++),n=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===i){n=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return n||this.throwError('Unclosed quote after "'+e+'"'),{type:RW.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(RW.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,RW.isIdentifierPart(e));)this.index++;return{type:RW.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],i=!1,n=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===e){i=!0,this.index++,e===RW.CPAREN_CODE&&n&&n>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(r===RW.COMMA_CODE){if(this.index++,n++,n!==t.length)if(e===RW.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===RW.CBRACK_CODE)for(let e=t.length;e<n;e++)t.push(null)}else if(t.length!==n&&0!==n)this.throwError("Expected comma");else{let e=this.gobbleExpression();(!e||e.type===RW.COMPOUND)&&this.throwError("Expected comma"),t.push(e)}}return i||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(RW.CPAREN_CODE);if(this.code===RW.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:RW.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:RW.ARRAY_EXP,elements:this.gobbleArguments(RW.CBRACK_CODE)}}},LW=new class{add(e,t,i){if("string"!=typeof arguments[0])for(let n in arguments[0])this.add(n,arguments[0][n],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][i?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}};Object.assign(RW,{hooks:LW,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)})}}(RW),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),RW.max_unop_len=RW.getMaxKeyLen(RW.unary_ops),RW.max_binop_len=RW.getMaxKeyLen(RW.binary_ops);var zW=e=>new RW(e).parse();Object.getOwnPropertyNames(RW).forEach(e=>{void 0===zW[e]&&"prototype"!==e&&(zW[e]=RW[e])}),zW.Jsep=RW;var BW={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let i=t.node,n=this.gobbleExpression();if(n||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:i,consequent:n,alternate:r},i.operator&&e.binary_ops[i.operator]<=.9){let n=i;for(;n.right.operator&&e.binary_ops[n.right.operator]<=.9;)n=n.right;t.node.test=n.right,n.right=t.node,t.node=i}}else this.throwError("Expected :")}})}};function jW(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(e){e(i)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,i)})}}}zW.plugins.register(BW);var FW=class{constructor(e,t,i){var n;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(e=>e()),this.emitter=jW(),this._innerCallUserAPI=async e=>{this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await async function(e,t){var i,n,r,a,s;let o,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new AbortController,h=e.url,u=null!==(i=null===(n=e.proxy)||void 0===n?void 0:n.enabled)&&void 0!==i&&i;if("OpenAI"===(null===(r=e.integration)||void 0===r?void 0:r.type)){let i=VW(""===e.integration.prompt?[]:JSON.parse(e.integration.prompt),t),n=""===e.integration.behavior?[]:VW(JSON.parse(e.integration.behavior),t);l='{\n\t\t"model": "'.concat(e.integration.model,'",\n\t\t"messages": [').concat(e.integration.useBehavior?'\n\t\t{\n\t\t\t"role": "system",\n\t\t\t"content": "'.concat(n,'"\n\t\t},'):"",'\n\t\t{\n\t\t\t"role": "user",\n\t\t\t"content": "').concat(i,'"\n\t\t}\n\t\t]\n\t}')}if(u){let i;h="".concat("https://apis.spline.design/","file/").concat(e.proxy.fileId,"/external-api/request?uuidexternalapi=").concat(e.proxy.proxyId),void 0!==l?i=l:"POST"===e.method&&e.body&&(i=VW(JSON.parse(e.body),t)),void 0!==i&&(h+="&data=".concat(encodeURIComponent(i.replace(/(\r\n|\n|\r|\t)/gm,""))))}else"OpenAI"===(null===(a=e.integration)||void 0===a?void 0:a.type)?o=l:"POST"===e.method&&e.body&&(o=VW(JSON.parse(e.body),t));let d=await fetch(h,{method:u?"GET":e.method,headers:u?void 0:NW(e),signal:c.signal,body:o});if(!d.ok)throw new Error("status:"+d.status+"_:_"+d.statusText);if("OpenAI"===(null===(s=e.integration)||void 0===s?void 0:s.type)){let e=await d.json();return u&&(e=e.response),{content:e.choices[0].message.content}}{let e=await d.json();return u&&(e=e.response),e}}(this.userAPI,e),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(t){var i,n;let r=null!==(i=null===(n=t.message)||void 0===n||null===(n=n.split("_:_"))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.replace("status:",""))&&void 0!==i?i:"null";this.error=r,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},"OpenAI"===(null===t||void 0===t||null===(n=t.integration)||void 0===n?void 0:n.type)?this.result={content:""}:"GET"===t.method&&""!==t.url&&(this.prefetchPromise=this.prefetch(i)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=jO(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=void 0!==this.userAPI.debounce&&this.userAPI.debounce>0?jO(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.userAPI=e,this._updateDebouncedCallUserAPI(),""!==this.userAPI.url&&"GET"===this.userAPI.method&&i&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return mI.zoom(this.result,e)}catch(ine){console.error(ine)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?mI.zoom(this.result,e):this.result;if(function(e){return"object"==typeof e&&null!==e}(t))return Object.entries(t);if(function(e){return Array.isArray(e)}(t))return t.map((e,t)=>[t.toString(),e]);throw function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e}(t)?new Error("This path points to a value, use retrieveValue() instead. "+(null===e||void 0===e?void 0:e.join("."))):new Error("Path error"+(null===e||void 0===e?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function NW(e){let t=new Headers;return e.headers.forEach(e=>{""!==e.data.key&&t.append(e.data.key,e.data.value)}),t}var UW=(e,t)=>{if("string"==typeof e){let i=t.getVariable(e);if(i)return UW(i,t)}return Qz.isBoolean(e)?Qz.getDisplayedValue(e).toLowerCase():Qz.getDisplayedValue(e)},VW=(e,t)=>e.map((e,i)=>{if("text"in e)return e.text;if("type"in e){if("paragraph"===e.type)return(i>0?"\n":"")+VW(e.children,t);if("variable"===e.type){let i=t.getVariable(e.variableId);if(void 0!==i)return UW(i,t)}}return""}).join(""),WW=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],HW=["0","1","2","3","4","5","6","7","8","9","."],GW=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function qW(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}function YW(e,t){let i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"number",a="";for(let l=0;l<e.length;l++){let i=e[l];if("objType"in i&&"api"===i.objType){let e=JSON.parse(i.id),n=e[0],r=t.getUserAPI(n);if(void 0!==r&&r instanceof FW){let t=r.retrieveValue(e.slice(1));void 0!==t&&(a+=t)}continue}if("objType"in i&&"webhook"===i.objType){let e=JSON.parse(i.id),[n,r]=e,s=t.getUserWebhook(n);if(void 0!==s){let e=s.getParameterValue(r);void 0!==e&&(a+=e)}continue}if("objType"in i&&"aiAssistant"===i.objType){var s;let e=t.openAIRealtime;if("objId"in i&&void 0!==i.objId){let n;if(t.scene.data.objects.traverse((e,t)=>{var r;let a=null===(r=t.events)||void 0===r?void 0:r.find(e=>e.id===i.objId);a&&(n=a)}),void 0!==n&&"AIAssistantListener"===n.data.type){let t=null===e||void 0===e?void 0:e.computeAnalysisForListenerEvent(n.data);if(void 0!==t){a+=t;continue}}}a+=null!==(s=null===e||void 0===e?void 0:e.voice)&&void 0!==s?s:0;continue}if("id"in i){let n=e[l-1];if(l>0&&"id"in n)return void console.error("Two variables in a row",e);let s=t.getVariable(i.id),o=Qz.getDisplayedValue(s);"number"===r&&Qz.isTextValue(s)&&Array.isArray(s.textValue)&&1===s.textValue.length?o=parseFloat(o).toString():"boolean"===r&&Qz.isBoolean(s)?o=s?"true":"false":"boolean"===r&&Qz.isTextValue(s)&&!Array.isArray(s.textValue)&&(o='"'+o+'"'),a+=o;continue}"string"!==r?"and"!==i.name?"or"!==i.name?"True"!==i.name?"False"!==i.name?"boolean"!==r||qW(i.name)||HW.includes(i.name)||WW.includes(i.name)||GW.includes(i.name.replace(/\($/g,""))?a+=i.name:a+='"'+i.name+'"':a+="false":a+="true":a+="||":a+="&&":('"'!==i.name&&("+"!==i.name||i.escaped)&&(a+=i.name),"+"===i.name&&!i.escaped&&"\\"===a[a.length-1]&&(a=a.slice(0,-1)+i.name))}if("string"===r)return a;if(0===e.length){if("number"===r)return 0;if("boolean"===r)return!1}try{i=zW(a)}catch(o){return void console.error(a,o)}try{n=XW(i)}catch(o){console.error(a,i,o)}return n}function XW(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return Number(XW(e.left)===XW(e.right));case"!=":return Number(XW(e.left)!==XW(e.right));case">":return Number(XW(e.left)>XW(e.right));case">=":return Number(XW(e.left)>=XW(e.right));case"<":return Number(XW(e.left)<XW(e.right));case"<=":return Number(XW(e.left)<=XW(e.right));case"+":return XW(e.left)+XW(e.right);case"-":return XW(e.left)-XW(e.right);case"*":return XW(e.left)*XW(e.right);case"/":return XW(e.left)/XW(e.right);case"%":return XW(e.left)%XW(e.right);case"&&":return XW(e.left)&&XW(e.right);case"||":return XW(e.left)||XW(e.right);case"^":return Math.pow(XW(e.left),XW(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-XW(e.argument);case"!":return Number(!XW(e.argument));default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if("Identifier"===e.callee.type){if("random"===e.callee.name){let t=0,i=1;if(e.arguments.length>=1)try{t=XW(e.arguments[0])}catch(h6){console.warn(h6)}if(e.arguments.length>=2)try{i=XW(e.arguments[1])}catch(h6){console.warn(h6)}return t=Math.min(i,t),i=Math.max(i,t),t+Math.random()*(i-t)}return Math[e.callee.name].apply(null,e.arguments.map(XW))}throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}zW.addBinaryOp("^",11,!0);var QW=new My,KW=new My;var ZW=class extends Cb{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&1===this.inputs.parameters.extrusion.depth}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&1===e.depth)||!function(e,t){let i=2*Math.PI;return(e%i+i)%i===(t%i+i)%i}(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:i,offset:n}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),n=Math.max(0,Math.min(n,1));let r=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(n*r),s=this.inputs.path.isClosed?Math.ceil((i+n)*r):Math.ceil(Math.min(1,i+n)*r),o=Math.min(Math.max(2,s-a+1),r+2),l=[],c=[];for(let R=0;R<o;R++){let i=this.inputs.path.isClosed?(R+a)%e.length:Math.min(R+a,e.length-1);l.push(e[i].clone()),c.push(t[i].clone())}let h=(e,t,i)=>{l[e]=l[e].clone().lerp(l[t],i),c[e]=function(e,t,i){let n=[new Zv,new Zv,new Zv],r=[new Zv,new Zv,new Zv];return e.extractBasis(n[0],n[1],n[2]),t.extractBasis(r[0],r[1],r[2]),n.forEach((e,t)=>{let n=r[t],a=wv.lerp(e.length(),n.length(),i);e.lerp(n,i).setLength(a)}),(new My).makeBasis(n[0],n[1],n[2])}(c[e],c[t],i)},u=0,d=n*r%1;(!this.inputs.path.isClosed||i<=1)&&(d||0===n)&&(u=d,h(0,1,u));let p=0,f=(n+i)*r%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&n+i<1)&&f&&(p=f,h(l.length-1,l.length-2,1-p)),0===i){let e=l.length-1;l[e].copy(l[0]),c[e].copy(c[0])}this._applyPathModifiers(c,u,p);let{bevel:m,bevelSides:g}=this.inputs.parameters.extrusion,v=m>0?this.inputs.parameters.extrusion.capType:"flat",y=5;"Custom"===this.inputs.parameters.extrusion.shape.type&&(y="low"===this.inputs.parameters.extrusion.shape.shapeQuality?5:12);let b,{regions:x,infos:w,vertices:A}=this._computeShapePoints(y),S=0;"round"===v&&(b=new HV(this.inputs.shapeData,2*m,m,y,g,void 0,!0),S=b.getAttribute("position").count);let _=0,E=0;w.sort((e,t)=>e.start-t.start),w.forEach(e=>{e.verticesStart=_,e.verticesCount=e.continuous.reduce((e,t,i)=>e+(0!==i&&t?1:2),0),E+=e.verticesCount,_=E});let C,M=E*o,T=0;if(this._isOpenEnded()&&"flat"===v){try{C=IV({windingRule:aV.ODD,elementType:sV.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch(I){C=VV}T=C.vertexCount}let P=M+2*T+2*S,D=M+2*T,O={positions:new Float32Array(3*P),normals:new Float32Array(3*P),uvs:new Float32Array(2*P)},k=[];if(w.forEach(e=>{this._extrudeRegion(e,A,c,l,O,k,this._isGeometryClosed()&&!this._isOpenEnded())}),C&&(this._closeEnd(C,M,k,O,c[0],l[0],!1),this._closeEnd(C,M+T,k,O,c[c.length-1],l[l.length-1],!0)),b){O.positions.set(b.getAttribute("position").array,3*D),O.normals.set(b.getAttribute("normal").array,3*D),O.uvs.set(b.getAttribute("uv").array,2*D);for(let n=D;n<D+S;n++)O.uvs[2*n+1]=1e-4;let e=k.length;k.push(...b.getIndex().array.map(e=>e+D)),D+=S,O.positions.set(b.getAttribute("position").array,3*D),O.normals.set(b.getAttribute("normal").array,3*D),O.uvs.set(b.getAttribute("uv").array,2*D);let t=k.length;k.push(...b.getIndex().array.map(e=>e+D)),this.setAttribute("position",new mb(O.positions,3)),this.setAttribute("normal",new mb(O.normals,3)),this.setAttribute("uv",new mb(O.uvs,2)),this.setIndex(k);let i=QW;i.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(i,D,P),i.copy(c[0]).setPosition(l[0]).multiply(KW.makeScale(1,1,-1)),this.applyMatrix4OnRange(i,D-S,D),this.reverseIndicesOnRange(e,t)}else this.setAttribute("position",new mb(O.positions,3)),this.setAttribute("normal",new mb(O.normals,3)),this.setAttribute("uv",new mb(O.uvs,2)),this.setIndex(k)}_extractPathPoints(){let e=gU(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(e=>{t[t.length-1].distanceToSquared(e)>.001&&t.push(e)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],i=e.length,n=this.inputs.path.isClosed,r=new Zv,a=new Zv,s=new Zv,o=new Zv,l=new Zv(0,1,0);for(let f=0;f<i;f++){let c,h,u=e[f];c=0===f?n?e[e.length-2]:u.clone().multiplyScalar(2).sub(e[1]):e[f-1],h=f===i-1?n?e[1]:u.clone().multiplyScalar(2).sub(e[f-1]):e[f+1];let d=u.clone().sub(c).normalize(),p=h.clone().sub(u).normalize(),m=d.clone().add(p).normalize();s.copy(m),0===f&&(m.equals(l)||m.clone().negate().equals(l))&&l.set(0,0,1);let g=l.clone().cross(m).normalize(),v=m.clone().cross(g).normalize();l.copy(v),o.copy(g),0===f&&(r.copy(v),a.copy(m));let y=(new My).makeBasis(g,v,m);t.push(y)}let c=n?a:s,h=n?r:new Zv(0,1,0),u=c.clone().cross(o).normalize(),d=Math.acos(h.dot(u));if(isNaN(d))return t;let p=h.clone().cross(u);c.dot(p)>0&&(d*=-1);for(let f=1;f<t.length;f++){let e=(new My).makeRotationZ(d*f/t.length);t[f].multiply(e)}return t}_applyPathModifiers(e,t,i){let n=e.length,{angle:r,twist:a,startScale:s,endScale:o}=this.inputs.parameters.extrusion,l=new My,c=new My;return e.forEach((e,h)=>{let u=0===h?0:h===n-1?1:(h-t)/(n-(0===i?0:1)-(t+(1-i)));l.makeRotationZ(wv.lerp(r,r+a,u)*wv.DEG2RAD);let d=wv.lerp(s,o,u);c.makeScale(d,d,d),e.multiply(l).multiply(c)}),e}_computeShapePoints(){let e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aV.ODD,r=this.inputs.shapeData,a=r.extractShapePointsToFlatArray([],i),s=r.shapeHoles.map(e=>{let t=e.extractShapePointsToFlatArray([],i),n=[];for(let i=t.length-1;i>=1;i-=2){let e=t[i-1],r=t[i-0];n.push(e,r)}return n});try{e=IV({windingRule:n,elementType:sV.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch(p){e=NV}try{t=IV({windingRule:aV.ODD,elementType:sV.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]})}catch(f){t=UV}if(!e)throw new Error("error generating geometry");let o=e.elementCount;if(t){e.elementCount+=t.elementCount;for(let i=0;i<t.elements.length;i++){let n=t.elements[i],r=i%2===0?e.vertexCount:0;e.elements.push(n+r)}for(let i=0;i<t.vertexIndices.length;i++){let n=t.vertexIndices[i],r=e.vertexCount;e.vertexIndices.push(n+r)}for(let i=0;i<t.vertices.length;i++){let n=t.vertices[i];e.vertices.push(n)}}let l=1/0,c=-1/0,h=1/0,u=-1/0;for(let m=0,g=e.vertexCount;m<g;m++){let t=2*m,i=e.vertices[t+0],n=e.vertices[t+1];i<l&&(l=i),i>c&&(c=i),n<h&&(h=n),n>u&&(u=n)}let d=[];for(let m=e.elementCount-1;m>=0;m--){let t=m>=o,i=2*m,n=e.elements[i+0],a=e.elements[i+1],s=n+a,l={start:n,count:a,normals:[],isHole:t,continuous:[],verticesStart:0,verticesCount:0};d.push(l);let c=n,h=s-1,u=n+1,p=r.roundedCurves.length;do{let i=c-n,o=e.vertices[2*h+0],d=e.vertices[2*h+1],f=e.vertices[2*c+0],m=e.vertices[2*c+1],g=e.vertices[2*u+0],v=e.vertices[2*u+1],y=f-o,b=m-d,x=Math.sqrt(y*y+b*b);y/=x,b/=x;let w=f-g,A=m-v,S=Math.sqrt(w*w+A*A);w/=S,A/=S,l.normals[2*i+0]=-A,l.normals[2*i+1]=w;let _=e.vertexIndices[c];if(Array.isArray(_))l.continuous[i]=!1;else{let[e,t]=r.getCurveIndexFromVertexId(_-1,!0);if(t>0&&t<1)l.continuous[i]=!0;else{let n=1===t?e+1:e-1;n=(n+p)%p;let a=1===t?0:1,s=r.roundedCurves[e].getTangent(t),o=r.roundedCurves[n].getTangent(a);l.continuous[i]=s.dot(o)>.95}}t&&(l.normals[2*i+0]*=-1,l.normals[2*i+1]*=-1),[h,c,u]=[c,u,u+1],u>=s&&(u-=a)}while(u!==n+1)}return{regions:[a,...s],infos:d,vertices:e.vertices}}_insertVertex(e,t,i,n,r){let a=2*t,s=3*t;e.positions[s+0]=i.x,e.positions[s+1]=i.y,e.positions[s+2]=i.z,e.normals[s+0]=n.x,e.normals[s+1]=n.y,e.normals[s+2]=n.z,e.uvs[a+0]=r.x,e.uvs[a+1]=r.y}_extrudeRegion(e,t,i,n,r,a,s){let o=new Zv,l=new Zv,c=new Zv,h=new Zv,u=new Av;i.forEach((a,s)=>{let d=n[s],p=e.verticesStart*i.length+e.verticesCount*s;for(let n=0;n<e.count;n++){let f=2*(e.start+n);if(o.set(t[f+0],t[f+1],0),c.copy(o).applyMatrix4(a).add(d),e.continuous[n])h.set(e.normals[2*n+0],e.normals[2*n+1],0);else{let i=0===n?2*(e.start+e.count-1):f-2;l.set(t[i+0],t[i+1],0),h.copy(o).sub(l),h.set(-h.y,h.x,0),e.isHole||h.negate()}if(h.applyMatrix4(a).normalize(),u.set(0===n?1:n/e.count,s/(i.length-1)),this._insertVertex(r,p,c,h,u),p++,!e.continuous[n]||0===n){if(0===n)h.set(e.normals[2*n+0],e.normals[2*n+1],0),u.set(0,s/(i.length-1));else{let i=n===e.count-1?2*e.start:f+2;l.set(t[i+0],t[i+1],0),h.copy(l).sub(o),h.set(-h.y,h.x,0),e.isHole||h.negate()}h.applyMatrix4(a).normalize(),this._insertVertex(r,p,c,h,u),p++}}});let d=i.length-1;for(let p=0;p<d;p++){let t=e.verticesStart*i.length+e.verticesCount*p,n=e.verticesStart*i.length+e.verticesCount*(p+1),r=0;for(let i=0;i<e.count;i++){(!e.continuous[i]||0===i)&&r++;let s=i===e.count-1?0:r+1,o=t+r,l=t+s,c=n+s,h=n+r;e.isHole?a.push(o,c,l,o,h,c):a.push(o,l,c,o,c,h),r++}}}_closeEnd(e,t,i,n,r,a,s){let o=e.vertexCount,l=new Zv(0,0,s?-1:1).applyMatrix4(r),c=new Zv,h=new Av;for(let d=0;d<o;d++){let i=2*d;c.set(e.vertices[i+0],e.vertices[i+1],0).applyMatrix4(r).add(a),this._insertVertex(n,t+d,c,l,h)}let u=e.elements;for(let d=0;d<e.elementCount;d++){let e=3*d,n=u[e+0]+t,r=u[e+(s?1:2)]+t,a=u[e+(s?2:1)]+t;i.push(n,r,a)}}applyMatrix4OnRange(e,t,i){let n,r,a,s,o=e.elements,l=(new Sv).getNormalMatrix(e).elements,c=this.attributes.position,h=this.attributes.normal;if(!c||!h)return;let u=c.array,d=h.array,p=c.itemSize;for(let f=t*p,m=i*p;f<m;f+=p)n=u[f+0],r=u[f+1],a=u[f+2],s=1/(o[3]*n+o[7]*r+o[11]*a+o[15]),u[f+0]=(o[0]*n+o[4]*r+o[8]*a+o[12])*s,u[f+1]=(o[1]*n+o[5]*r+o[9]*a+o[13])*s,u[f+2]=(o[2]*n+o[6]*r+o[10]*a+o[14])*s,n=d[f+0],r=d[f+1],a=d[f+2],d[f+0]=l[0]*n+l[3]*r+l[6]*a,d[f+1]=l[1]*n+l[4]*r+l[7]*a,d[f+2]=l[2]*n+l[5]*r+l[8]*a;c.needsUpdate=!0,h.needsUpdate=!0}reverseIndicesOnRange(e,t){let i=this.index;if(i){for(let n=e;n<t;n+=3){let e=i.getX(n),t=i.getX(n+1),r=i.getX(n+2);i.setXYZ(n,r,t,e)}i.needsUpdate=!0}}};function JW(){let e=new Cb;return e.setAttribute("position",new mb(new Float32Array([]),3)),e.setIndex(new mb(new Uint16Array([]),1)),e}var $W=JW().attributes,eH=class extends Cb{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,$W),this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);null!==i&&void 0!==i&&i.isLoaded?(this.font=i,this.update(e,t)):this.updateFont(e.font,t).then(()=>{this.update(e,t),null===t||void 0===t||t.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e,t){let i=this.font;if(this.userData={parameters:e,type:"TextGeometry"},null===i||void 0===i||!i.isLoaded)return void console.warn("Cannot update text because its font is not loaded");let{width:n,height:r,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o,text:l,textTransform:c}=e,h=Qz.getDisplayedValue(l),u=function(e,t,i,n){let r="string"==typeof e.width?Number(n.getVariable(e.width)):e.width,a=[""],s="";for(let o of i)s+=o," "===o||"\n"===o?(a[a.length-1]+=s,s="","\n"===o&&a.push("")):t.getTextWidth(a[a.length-1]+s,e)>r&&(a[a.length-1].length&&a.push(""),t.getTextWidth(a[a.length-1]+s,e)>r&&(1===s.length?(a[a.length-1]+=s,s=""):(a[a.length-1]+=s.slice(0,-1),s=s[s.length-1],a.push(""))));return a[a.length-1]+=s,a}(e,i,2===c?h.toUpperCase():3===c?h.toLowerCase():h,t),{shapes:d,charWidths:p,charCoords:f}=i.generateShapes(u,e,t),m=.5*("number"==typeof n?n:Number(t.getVariable(n))),g=.5*("number"==typeof r?r:Number(t.getVariable(r))),v=d.map(e=>(new pV).fromShape(e,!0));this.vectorShapes=v;let y=v.map(e=>YV.create({shape:e,parameters:{depth:a,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:a<=0?aV.NONZERO:aV.ODD,subdivisions:this.isLowResolution&&a>0?1:12}})),b=y.length?qB(y):JW();b.translate(-m,g,0),this.dispose(),this.wrappedText=u,this.charCoords=f,this.charWidths=p,this.deleteAttribute("extrudeNormal"),Object.entries(b.attributes).forEach(e=>{let[t,i]=e;this.setAttribute(t,i)}),this.setIndex(b.index),this.computeBoundingSphere()}clone(){let e=nk(new Cb,eH.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(e=>{let[t,i]=e;this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:(0,ye.A)({},e.userData.parameters),type:"TextGeometry"},this}async setText(e,t){this.font&&await this.font.loadingPromise,await this.update((0,ye.A)((0,ye.A)({},this.userData.parameters),{},{text:{textValue:e}}),t)}get text(){var e;return null!==(e=this.userData.parameters.text)&&void 0!==e?e:""}};var tH,iH,nH=new Promise(e=>{tH=e}),rH=!1;function aH(e){if(!rH)return iH||(iH=async function(){let t=null!==e&&void 0!==e?e:"https://unpkg.com/@splinetool/modelling-wasm@1.10.99/build",i=__webpack_require__.e(917).then(__webpack_require__.bind(__webpack_require__,917)),[n,r]=await Promise.all([i,fetch("".concat(t,"/process.wasm")).then(e=>e.arrayBuffer())]),a=n.default,s=await a({wasmBinary:r});tH(s),rH=!0}(),iH)}var sH=["font"];function oH(e,t,i,n){let r,a,s;"PathGeometry"===e.type?(a=JSON.parse(JSON.stringify(e)),s=[[],["extrusion"]]):(a=(0,ye.A)({},e),s=[[]]);for(let p of s){let e=a;for(let t of p)e=e[t];for(r in e){let i=e[r];BL(i)&&!sH.includes(r)&&(e[r]=t.getVariable(i,[n.uuid,"geometry",...p,r]),BL(e[r])&&(e[r]=1))}}let o,l={parameters:a,type:a.type};if("PathGeometry"===a.type)l.path=a.path;else if("VectorGeometry"===a.type){let e=pV.createFromState(a.shape,a.width,a.height);l.shape=e}else if("NonParametricGeometry"===a.type){var c;if(a.data.groups&&null!==(c=a.data.groups)&&void 0!==c&&c.forEach(e=>{var t;return e.materialIndex=Math.max(null!==(t=e.materialIndex)&&void 0!==t?t:0,0)}),l.geometry=(new cE).parse(a),0===l.geometry.groups.length){var h,u;let e=l.geometry;e.addGroup(0,Math.max(null!==(h=null===(u=e.getIndex())||void 0===u?void 0:u.count)&&void 0!==h?h:0,e.getAttribute("position").count),0)}}else{if("SubdivGeometry"===a.type){let t=new gH(a,i);return t.data=e,t}if("TextGeometry"===a.type)return new eH(a,t);if("InputGeometry"===a.type)return new eH(a,t);if("UIGeometry"===a.type)return DW.create({parameters:{width:a.width,height:a.height,cornerRadius:a.cornerRadius,cornerType:a.cornerType}})}try{o=FH(l)}catch(d){console.error(d),console.error("Error generating geometry with inputs: ".concat(l));let e=pV.createFromState(nz.defaultData(),100,100);l.shape=e,l.type="VectorGeometry",o=FH(l)}return o}var lH=new My;function cH(e,t,i,n){let r,a,s,o=e.position.array,l=e.normal.array,c=lH.makeScale(t,i,n).invert().elements;for(var h=0,u=o.length;h<u;h+=3)o[h]*=t,o[h+1]*=i,o[h+2]*=n,r=l[h],a=l[h+1],s=l[h+2],l[h]=c[0]*r+c[4]*a+c[8]*s,l[h+1]=c[1]*r+c[5]*a+c[9]*s,l[h+2]=c[2]*r+c[6]*a+c[10]*s;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var hH,uH=new ey,dH=new Zv;nH.then(e=>{hH=e});var pH=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),fH=new Uint32Array([0,1,2,3]),mH=new Uint8Array([4]),gH=class extends Cb{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,n=bL.div(t,i);if(n.every(e=>1===e))return;this.subdividedGeometry&&cH(this.subdividedGeometry.attributes,...n),this.originalGeometry&&cH(this.originalGeometry.attributes,...n),this.data=e;let r=this.userData.parameters;this.userData.parameters={width:r.width*n[0],height:r.height*n[1],depth:r.depth*n[2]},this.originalGeometry.boundingSphere.center.multiply(dH.fromArray(n));let a=dH.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return 0===this.subdivPointer&&this.rebuild(),this.subdivPointer}rebuild(){var e;let t,i,n;try{({originalGeometry:t,subdividedGeometry:i,subdivPointer:n}=gH.build(this.data,void 0,!this.flatShading,void 0))}catch(a){t=new Vb(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=null!==i&&void 0!==i?i:void 0;let r=null!==(e=this.subdividedGeometry)&&void 0!==e?e:this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(gH.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new yy,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;uH.setFromBufferAttribute(t),uH.getCenter(i),e.boundingSphere.radius=i.distanceTo(uH.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),uH.getSize(dH);let n={width:dH.x,height:dH.y,depth:dH.z};return this.userData.parameters=n,n}static build(e,t,i,n){var r;let a,s,o,l=null!==(r=null===e||void 0===e?void 0:e.phongAngle)&&void 0!==r?r:35;!1===i&&(l=-1),t&&(hH.free_bvh(t),hH.free_subdivision_surface(t));try{a=gH.allocate(e,n)}catch(g6){console.error(g6,e),a=gH.allocate({positionWASM:pH,indexWASM:fH,verticesPerFaceWASM:mH},n)}if(hH.set_destination_refinement_level(a,0),s=gH.buildLevel(a,!0,l),e.subdivisions>0)try{hH.set_destination_refinement_level(a,e.subdivisions),o=gH.buildLevel(a,!1,l)}catch(c){try{hH.set_destination_refinement_level(a,e.subdivisions-1),o=gH.buildLevel(a,!1,l)}catch(h){o=null}}else o=null;return{subdivPointer:a,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);let n,r,a,s,o,l,c=void 0!==e.shape||void 0!==e.path?t.geometry:oH(e,i,!1,t);if(n="TorusGeometry"===e.type&&e.arc===2*Math.PI?c.getClosedTorusIndicesForBooleanOrSubdiv():c.getIndex(),({positions:r,triIndices:o}=yH(c.getAttribute("position"),n)),"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){let t=e.radialSegments*e.heightSegments*3*2;l=[t,t+3*e.radialSegments]}return({indices:a,verticesPerFace:s}=SH(r,o,c,l)),{positions:r,indices:a,verticesPerFace:s}}static allocate(e,t){var i;let n,r,a,s=[],o=[];e.positionWASM&&e.positionWASM.length>0?(n=e.positionWASM,r=e.indexWASM,a=e.verticesPerFaceWASM):(n=pH,r=fH,a=mH);let l,c=n.length,h=r.length,u=a.length,d=n.length+s.length+o.length,p=r.length+a.length,f=d*Float32Array.BYTES_PER_ELEMENT+p*Uint32Array.BYTES_PER_ELEMENT,m=d*Float32Array.BYTES_PER_ELEMENT,g=(Uint32Array.BYTES_PER_ELEMENT,hH._malloc(f)),v=new Float32Array(hH.HEAPF32.buffer,g,d),y=new Uint32Array(hH.HEAPU32.buffer,g+m,p);v.set(n,0),v.set(s,n.length),v.set(o,n.length+s.length),y.set(r,0),y.set(a,r.length),null!==e&&void 0!==e&&null!==(i=e.scaleBaked)&&void 0!==i&&i.some(e=>1!==e)&&(l=(new My).makeScale(...e.scaleBaked)),t&&(l?l.premultiply(t):l=t);let b=l?hH.alloc_subdivision_surface2(g,c,g+m,h,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,u,l.elements):hH.alloc_subdivision_surface(g,c,g+m,h,g+m+r.length*Uint32Array.BYTES_PER_ELEMENT,u);return hH._free(g),b}static buildLevel(e,t,i,n,r){let a=r?hH.get_mesh_data2(e,t?hH.Level.CONTROL:hH.Level.REFINED,i,r.elements):hH.get_mesh_data(e,t?hH.Level.CONTROL:hH.Level.REFINED,i),s=hH.HEAPU32.subarray(a>>2,8+(a>>2)),o=s.subarray(4,8),l=0,c=hH.HEAPU32[s[l]>>2],h=hH.HEAPF32.subarray(c>>2,(c>>2)+o[l]);l++;let u=hH.HEAPU32[s[l]>>2],d=hH.HEAPF32.subarray(u>>2,(u>>2)+o[l]);l++;let p=hH.HEAPU32[s[l]>>2],f=hH.HEAPU32.subarray(p>>2,(p>>2)+o[l]);l++;let m=hH.HEAPU32[s[l]>>2],g=hH.HEAPU32.subarray(m>>2,(m>>2)+o[l]);if(l++,void 0===n){let e=new Cb;if(e.setIndex(new vb(g,1)),e.setAttribute("position",new yb(h,3)),e.setAttribute("normal",new yb(d,3)),t){e.setAttribute("faceMap",new vb(f,1));let t=new Float32Array(d.length/3*4).fill(0);e.setAttribute("color",new mb(t,4))}return hH.free_mesh_data(a),e.userData.type="SubdivGeometry",e}n.getAttribute("position").copyArray(h),n.getAttribute("normal").copyArray(d),n.attributes.position.needsUpdate=!0,n.attributes.normal.needsUpdate=!0,hH.free_mesh_data(a)}static freeSubdivPointer(e){hH.free_bvh(e),hH.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let n=hH.get_wireframe_data_for_base_level(e),r=hH.HEAPU32.subarray(n>>2,4+(n>>2)),a=r.subarray(2,4),s=0,o=hH.HEAPU32[r[s]>>2],l=hH.HEAPF32.subarray(o>>2,(o>>2)+a[s]);s++;let c=hH.HEAPU32[r[s]>>2],h=hH.HEAPU32.subarray(c>>2,(c>>2)+a[s]);if(void 0===t){let e=new Cb;e.setAttribute("position",new yb(l,3));let t=new Float32Array(l.length);for(let n=0,r=l.length;n<r;)t[n++]=i.r,t[n++]=i.g,t[n++]=i.b;return e.setAttribute("color",new mb(t,3)),e.setIndex(new vb(h,1)),hH.free_wireframe_data_for_base_level(n),e}t.getAttribute("position").copyArray(l),t.attributes.position.needsUpdate=!0,hH.free_wireframe_data_for_base_level(n)}static updateCollabMesh(e,t,i){let n=0===t;n||hH.set_destination_refinement_level(e,t);let r=i?hH.get_topological_data2(e,n?hH.Level.CONTROL:hH.Level.REFINED,i.elements):hH.get_topological_data(e,n?hH.Level.CONTROL:hH.Level.REFINED),a=hH.HEAPU32.subarray(r>>2,6+(r>>2)),s=a.subarray(3,6),o=0,l=hH.HEAPU32[a[o]>>2],c=new Float32Array(hH.HEAPF32.subarray(l>>2,(l>>2)+s[o]));o++;let h=hH.HEAPU32[a[o]>>2],u=new Uint32Array(hH.HEAPU32.subarray(h>>2,(h>>2)+s[o]));o++;let d=hH.HEAPU32[a[o]>>2],p=new Uint8Array(hH.HEAPU32.subarray(d>>2,(d>>2)+s[o]));return hH.free_topological_data(r),{positions:c,indices:u,verticesPerFace:p}}},vH=["getX","getY","getZ"];function yH(e,t){let i={},n=t?t.count:e.count,r=0,a=[],s=[];for(let l=0;l<n;l++){let n=t?t.getX(l):l,o="";for(let t=0;t<3;t++)o+="".concat(~~(1e4*e[vH[t]](n)),",");if(o in i)a.push(i[o]);else{for(let t=0;t<3;t++)s.push(e[vH[t]](n));i[o]=r,a.push(r),r++}}let o=[];for(let l=0;l<a.length;l+=3)a[l]===a[l+1]||a[l]===a[l+2]||a[l+1]===a[l+2]||o.push(a[l],a[l+1],a[l+2]);return{positions:s,triIndices:o}}var bH=new Zv,xH=new Zv,wH=new Zv,AH=new Zv;function SH(e,t,i,n){let r=[],a=[];if(void 0!==i.userData.shape&&0===i.userData.parameters.depth&&0===i.userData.shape.shapeHoles.length){let t=i.userData.shape.extractShapePointsToFlatArray([]),n=i.userData.parameters.spikes;if("EllipseGeometry"===i.userData.type&&n<=24&&n%4===0&&i.userData.parameters.angle>=360){let e=t.length/2/n;t=t.filter((t,i)=>Math.floor(i/2)%e===0)}let s=0;for(let e=0;e<t.length;e+=2)s+=(t[e]-t[(0===e?t.length:e)-2])*(t[e+1]+t[(0===e?t.length:e)-1]);e.length=0;let o=0;if(s<0)for(let i=0;i<t.length;i+=2)e.push(t[i],t[i+1],0),r.push(o++);else for(let i=t.length-2;i>=0;i-=2)e.push(t[i],t[i+1],0),r.push(o++);return a.push(o),{indices:r,verticesPerFace:a}}let s=new Float32Array([i.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(i.useNgonForTopBottomFaceDuringBake){let i=0;if((e[3*t[o]+2]===s||0===e[3*t[o]+2])&&i++,(e[3*t[o+1]+2]===s||0===e[3*t[o+1]+2])&&i++,(e[3*t[o+2]+2]===s||0===e[3*t[o+2]+2])&&i++,3===i)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){bH.set(e[3*t[o]],e[3*t[o]+1],e[3*t[o]+2]),xH.set(e[3*t[o+1]],e[3*t[o+1]+1],e[3*t[o+1]+2]),wH.set(e[3*t[o+4]],e[3*t[o+4]+1],e[3*t[o+4]+2]),AH.set(e[3*t[o+5]],e[3*t[o+5]+1],e[3*t[o+5]+2]),xH.sub(bH).normalize(),wH.sub(bH).normalize(),AH.sub(bH).normalize();let i=xH.cross(wH).dot(AH);Math.abs(i)>.005||n&&n.some((e,t)=>t%2!==1&&(o>=n[t]&&o<n[t+1]))?(r.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3):(r.push(t[o],t[o+1],t[o+4],t[o+5]),a.push(4),o+=6)}else r.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3}if(i.useNgonForTopBottomFaceDuringBake){let t=[],n=[],o=0;for(let i=0,r=0;i<e.length;i+=3,r++)0===e[i+2]&&(t.push(r),o++),e[i+2]===s&&n.push(r);if(0===i.userData.parameters.extrudeBevelSize){let e=n[0];n[0]=n[1],n[1]=e}t.reverse(),r.push(...t,...n),a.push(o,o)}return{indices:r,verticesPerFace:a}}var _H,EH,CH,MH,TH={};function PH(e){if(EH)return EH;return EH=async function(){let t=null!==e&&void 0!==e?e:"https://unpkg.com/@splinetool/boolean-wasm@1.10.99/build",i=__webpack_require__.e(516).then(__webpack_require__.bind(__webpack_require__,3516)),[n,r]=await Promise.all([i,fetch("".concat(t,"/boolean.wasm")).then(e=>e.arrayBuffer())]),a=n.default,s=await a({wasmBinary:r});_H(s)}(),EH}function DH(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,n=t*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(e[0])?i:n,a=CH._malloc(r);return(Number.isInteger(e[0])?new Uint32Array(CH.HEAPU32.buffer,a,t):new Float32Array(CH.HEAPF32.buffer,a,t)).set(e,0),a}function OH(e){switch(e){case 0:return CH.OP.UNION;case 1:return CH.OP.INTERSECTION;case 2:return CH.OP.A_MINUS_B;default:throw new Error("Unknown boolean operation "+e)}}function kH(e,t){void 0===MH&&(MH=CH.init_csg());let i=DH(e),n=CH.csg_calc_topological(MH,i,e.length,OH(t));CH._free(i);let r=CH.HEAPU32.subarray(n>>2,6+(n>>2)),a=r.subarray(3,6),s=0,o=CH.HEAPU32[r[s]>>2],l=new Float32Array(CH.HEAPF32.subarray(o>>2,(o>>2)+a[s]));s++;let c=CH.HEAPU32[r[s]>>2],h=new Uint32Array(CH.HEAPU32.subarray(c>>2,(c>>2)+a[s]));s++;let u=CH.HEAPU32[r[s]>>2],d=new Uint8Array(CH.HEAPU32.subarray(u>>2,(u>>2)+a[s]));return CH.free_mesh_data(n),{positions:l,indices:h,verticesPerFace:d}}function IH(e,t,i,n){void 0===MH&&(MH=CH.init_csg());let r=DH(e),a=CH.csg_calc(MH,r,e.length,n,OH(t));CH._free(r);let s=CH.HEAPU32.subarray(a>>2,5+(a>>2)),o=s.subarray(2,5),l=0,c=CH.HEAPU32[s[l]>>2],h=CH.HEAPF32.subarray(c>>2,(c>>2)+o[l]);l++;let u=CH.HEAPU32[s[l]>>2],d=CH.HEAPF32.subarray(u>>2,(u>>2)+o[l]);l++;let p=o[l];i.setAttribute("position",new yb(h,3)),i.setAttribute("normal",new yb(d,3));let f=CH.HEAPF32.subarray(5+(a>>2),5+(a>>2)+6);return null===i.boundingSphere&&(i.boundingSphere=new yy),i.boundingSphere.center.set(f[0],f[1],f[2]),i.boundingSphere.radius=(f[3]**2+f[4]**2+f[5]**2)**.5,i.userData.parameters={width:2*f[3],height:2*f[4],depth:2*f[5]},CH.free_mesh_data(a),p}function RH(e,t,i){if(void 0===CH)return-1;let n,r,a;if(t&&void 0!==e.userData.positions){let t=e.userData;a=t.verticesPerFace.length,n=t.positions,r=Array(t.verticesPerFace.reduce((e,t)=>e+t,0)+a);for(let e=0,i=0,n=0;e<t.verticesPerFace.length;e++){r[n++]=t.verticesPerFace[e];for(let a=0;a<t.verticesPerFace[e];a++)r[n++]=t.indices[i++]}}else({positions:n,faceIndices:r,nFaces:a}=function(e,t,i){let n,r;r="TorusGeometry"===e.userData.parameters.type&&e.userData.parameters.arc===2*Math.PI?e.getClosedTorusIndicesForBooleanOrSubdiv():e.getIndex();let a,{positions:s,triIndices:o}=yH(e.getAttribute("position"),r);if(t&&i){let{indices:t,verticesPerFace:i}=SH(s,o,e);a=i.length,n=[];for(let e=0,r=0;e<a;e++){n.push(i[e]);for(let a=0;a<i[e];a++)n.push(t[r++])}}else{let e=o.length;n=Array(e+e/3),a=0;for(let t=0,i=0;i<n.length;)n[i++]=3,a++,n[i++]=o[t++],n[i++]=o[t++],n[i++]=o[t++]}return{positions:s,faceIndices:n,nFaces:a}}(e,t,i));let s=n.length,o=r.length,l=n.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=(Uint32Array.BYTES_PER_ELEMENT,CH._malloc(h)),p=new Float32Array(CH.HEAPF32.buffer,d,l),f=new Uint32Array(CH.HEAPU32.buffer,d+u,c);p.set(n,0),f.set(r,0);let m=CH.get_csg_mesh(d,s,d+u,o,a);return CH._free(d),m}function LH(e){return CH.has_open_edges(e)}function zH(e,t){CH.transform_csg_mesh(e,t.elements)}function BH(e){CH.free_csg_mesh(e)}((e,t)=>{for(var i in t)Rm(e,i,{get:t[i],enumerable:!0})})(TH,{calcBoolean:()=>IH,calcBooleanTopological:()=>kH,freeMeshSet:()=>BH,getMeshSet:()=>RH,hasOpenEdges:()=>LH,transformMeshSet:()=>zH}),new Promise(e=>{_H=e}).then(e=>CH=e);var jH={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return a.thetaLength=wv.clamp(a.thetaLength,0,360),{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let t,{width:i,depth:n,height:r,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c,cornerRadiusTop:h,cornerRadiusBottom:u,cornerSegments:d}=e.parameters;return 0===c?(t=new Cb,t.setAttribute("position",new yb([],3))):t=h>0||u>0||c<360?new CU(0,i/2,r,a,s,o,l,c*Math.PI/180,h,u,d,0,!0):new LS(i/2,r,a,s,o),t.scale(1,1,n/i),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"ConeGeometry"})})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let t,{width:i,height:n,depth:r,widthSegments:a,heightSegments:s,depthSegments:o,cornerRadius:l,cornerSegments:c}=e.parameters;return t=0===l?new Vb(i,n,r,a,s,o):new TU(i,n,r,a,s,o,l,c),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"CubeGeometry"})})}},CylinderGeometry:SU,DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let{width:t,height:i,depth:n,detail:r,corner:a,cornerSides:s}=e.parameters,o=0===r&&0!==a?new DU(.5*t,a,s):new BS(.5*t,r);return o.scale(1,i/t,n/t),Object.assign(o,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"DodecahedronGeometry"})})}},EllipseGeometry:QV,HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),s=Math.abs(a.width),o=Math.abs(null!==(n=a.height)&&void 0!==n?n:s),l=Math.abs(null!==(r=a.depth)&&void 0!==r?r:s),c=Math.abs(Math.min(s,l))/2;return{parameters:Object.assign(a,{width:s,height:o,depth:l,radius:c,segments:Math.round(a.segments),pathSegments:Math.round(a.pathSegments),cornerSegments:Math.round(a.cornerSegments)})}}static build(e){let{width:t,height:i,depth:n,radius:r,revolutions:a,segments:s,pathRadius:o,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=e.parameters,d=new nW(!1,t,i,n,r,a,s,o,l,c,h,u);return Object.assign(d,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"HelixGeometry"})})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let{width:t,height:i,depth:n,detail:r,corner:a,cornerSides:s}=e.parameters,o=0===r&&0!==a?new rW(.5*t,a,s):new p_(.5*t,r);return o.scale(1,i/t,n/t),Object.assign(o,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"IcosahedronGeometry"})})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a,s;(null!==(i=null===(n=e.parameters)||void 0===n?void 0:n.points)&&void 0!==i?i:[]).forEach(e=>{Array.isArray(e)&&(e.x=e[0],e.y=e[1])});let o=Object.assign({},null!==(r=null===t||void 0===t?void 0:t.parameters)&&void 0!==r?r:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(a=o.height)&&void 0!==a?a:o.width),depth:Math.abs(null!==(s=o.depth)&&void 0!==s?s:o.width)})}}static build(e){let{points:t,segments:i,verticalSegments:n}=e.parameters,r=new jS;r.moveTo(t[0].x,t[0].y),r.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new IS(r.extractPoints(n).shape,i);return a.rotateZ(Math.PI),Object.assign(a,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"LatheGeometry"})})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n;let r,a=null!==(i=null!==(n=e.geometry)&&void 0!==n?n:null===t||void 0===t?void 0:t.geometry)&&void 0!==i?i:(new Cb).copy(new Vb(100,100,100));void 0===t?(a.computeBoundingBox(),a.boundingBox.getSize(_W),r={width:_W.x,height:_W.y,depth:_W.z,subdivisions:0}):r=t.parameters;let s=(0,ye.A)((0,ye.A)({},r),e.parameters);return{parameters:{width:Math.abs(s.width),height:Math.abs(s.height),depth:Math.abs(s.depth),subdivisions:Math.abs(s.subdivisions)},geometry:a}}static build(e){var t;let{width:i,height:n,depth:r,subdivisions:a}=e.parameters,s=null!==(t=e.geometry)&&void 0!==t?t:(new Cb).copy(new Vb(100,100,100)),o=s.userData.parameters;void 0===o?(s.computeBoundingBox(),s.boundingBox.getSize(_W)):_W.set(o.width,o.height,o.depth),(i!==_W.x||n!==_W.y||r!==_W.z)&&s.scale(0===_W.x?1:i/_W.x,0===_W.y?1:n/_W.y,0===_W.z?1:r/_W.z);let l=s.originalGeometry;try{a>0?(void 0===l||(null===o||void 0===o?void 0:o.subdivisions)!==a)&&(void 0===l&&(l=s),s=new SW(a).modify(l).toBufferGeometry()):(void 0!==l&&(s=l),l=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals())}catch(c){void 0!==l&&(s=l),l=void 0,void 0===s.getAttribute("normal")&&s.computeVertexNormals()}return void 0!==l&&Object.assign(s,{originalGeometry:l}),delete e.geometry,Object.assign(s,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"NonParametricGeometry"})})}static loadFromUrl(e,t,i){new cE(i).load(e,e=>{let i=this.normalizeInputs({geometry:e});e.boundingBox.getSize(_W);let n=100/_W.x;Object.assign(i.parameters,{width:100,height:_W.y*n,depth:_W.z*n}),t(this.build(i))})}},PolygonGeometry:EW,PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let{width:t,height:i,depth:n,radialSegments:r,heightSegments:a,openEnded:s,cornerRadius:o,cornerSegments:l}=e.parameters,c=new PW(.5*t,i,r,a,s,o,l);return c.scale(1,1,n/t),Object.assign(c,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"PyramidGeometry"})})}},RectangleGeometry:DW,SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return a.thetaLength=wv.clamp(a.thetaLength,0,180),{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let t,{width:i=100,height:n=i,depth:r=i,widthSegments:a=64,heightSegments:s=64,phiStart:o,phiLength:l,thetaStart:c,thetaLength:h}=e.parameters;return 0===h?(t=new Cb,t.setAttribute("position",new yb([],3))):t=new f_(.5*i,a,s,o,l,c,h*wv.DEG2RAD),t.scale(1,n/i,r/i),Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"SphereGeometry"})})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n;let r=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(null!==(n=r.height)&&void 0!==n?n:r.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:n=8,heightSegments:r=8}=e.parameters,a=new cx(t,i,n,r);return a.scale(1,1,1),Object.assign(a,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"PlaneGeometry"})})}},BackdropGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:a.width)})}}static build(e){let{width:t,height:i,depth:n,angle:r,cornerRadius:a,cornerSegments:s}=e.parameters,o=new OW(t,i,n,r,a,s);return Object.assign(o,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"BackdropGeometry"})})}},StarGeometry:kW,TextFrameGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}static build(e){let{width:t,height:i}=e.parameters,n=new cx(t,i);return Object.assign(n,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"TextFrameGeometry"})})}},TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),s=Math.abs(a.width),o=Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width);a.shapeBlendNode&&(o=s);let l=Math.round(Math.abs(null!==(r=a.depth)&&void 0!==r?r:.25*a.width));return{parameters:Object.assign(a,{width:s,height:o,depth:l})}}static build(e){let{width:t,height:i,depth:n,radialSegments:r,tubularSegments:a,arc:s,cornerRadius:o,cornerSegments:l}=e.parameters,c=function(e,t,i,n,r,a,s,o,l,c,h){[t,i]=[i,t],s=t/2;let u=wv.clamp(r/360,0,1);if(0===u){let e=new Cb;return e.setAttribute("position",new yb([],3)),e}return 1===u&&(c=0),new nW(!0,e,t,i,n,u,a,s,o,l,c,h)}(t,i,n,.5*t,s,a,0,0,r,o,l);return c.scale(1,i/t,1),Object.assign(c,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"TorusGeometry"})})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a;let s=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(n=s.height)&&void 0!==n?n:s.width),depth:Math.abs(null!==(r=s.depth)&&void 0!==r?r:s.width),tube:null!==(a=s.tube)&&void 0!==a?a:.125*s.width})}}static build(e){let{width:t,tube:i,tubularSegments:n,radialSegments:r,p:a,q:s}=e.parameters,o=.5*t;o!==i&&(o-=i);let l=new g_(o,i,n,r,a,s);return Object.assign(l,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"TorusKnotGeometry"})})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r;let a=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof pV?e.shape:new pV,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(n=a.height)&&void 0!==n?n:a.width*(a.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(null!==(r=a.depth)&&void 0!==r?r:0)})}}static build(e){let{width:t=100,height:i,cornerRadius:n,depth:r,extrudeBevelSize:a,extrudeBevelSegments:s,isRect:o}=e.parameters,l=e.shape,c=.5*t,h=.5*i;o?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,p=l.points.length;d<p;d++)l.points[d].roundness=n;l.roundness=n,l.update();let u=YV.create({shape:l,parameters:{roundness:n,depth:r,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(u,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"TriangleGeometry"})})}},PathGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,n,r,a,s;let o=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),l=Math.abs(o.width),c=Math.abs(null!==(n=o.height)&&void 0!==n?n:o.width),h=Math.abs(null!==(r=o.depth)&&void 0!==r?r:0),u=null!==(a=null===t||void 0===t?void 0:t.shapeData)&&void 0!==a?a:QV.create({parameters:lz}).userData.shape;return{path:null!==(s=e.path)&&void 0!==s?s:rz.defaultData(),parameters:Object.assign(o,{width:l,height:c,depth:h,extrusion:(0,ye.A)((0,ye.A)({},dz),o.extrusion)}),shapeData:u}}static build(e){if(e.path.points.length>=2){let t=new ZW(e);return Object.assign(t,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"PathGeometry"})})}return Object.assign(new Cb,{userData:(0,ye.A)((0,ye.A)({},e),{},{type:"PathGeometry"})})}},VectorGeometry:YV},FH=e=>jH[e.type].create(e);function NH(e){return null!==e&&"booleanOp"in e}var UH=class extends(AU(Nb)){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new My}updateVisible(e){super.updateVisible(e),this.visible=!NH(this.parent)&&this.visible,NH(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(TH.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.booleanWasTransformed=!0:this.freeBooleanPointer(),NH(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof UH&&(e.freeBooleanPointer(),NH(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let i=super.updateTransformState(e,t);return i&&NH(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.onVariableUpdate(e),NH(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},VH=new ey;function WH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.count,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=1/0,s=1/0,o=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=t;u<i;u++){let t=e.getX(u),i=e.getY(u),n=e.getZ(u);t<a&&(a=t),i<s&&(s=i),n<o&&(o=n),t>l&&(l=t),i>c&&(c=i),n>h&&(h=n)}VH.min.set(a,s,o),VH.max.set(l,c,h),VH.getCenter(n),VH.getSize(r).multiplyScalar(.5)}var HH=new Cb,GH=new db,qH=class extends UH{constructor(e,t){super(HH,GH),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");void 0!==i?WH(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},YH=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},null===YH.uuidContext)throw new Error("plz startContext");YH.uuidContext===YH.globalContext?this.uuid="_gid"+YH.uuidContext.nodeContextUuid++:this.uuid="_uid"+YH.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){null===this.uuidContext||this.uuidContext===YH.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=null!==t&&void 0!==t?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=null!==i&&void 0!==i?i:{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=null!==i&&void 0!==i?i:{},e.addFlow(i.slot,i.cache,i.context);let n={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),n}build(e,t,i){t=null!==t&&void 0!==t?t:this.getType(e,t);let n=e.getNodeData(null!==i&&void 0!==i?i:this);return e.analyzing&&this.appendDepsNode(e,n,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,n,r,a){return""}generate(e,t,i,n,r){return""}parse(e,t,i,n){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let n=e.getTypeLength(i);(n>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=n,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}},XH=YH;XH.globalContext={nodeContextUuid:0},XH.uuidContext=YH.globalContext;var QH=class{constructor(e){e=null!==e&&void 0!==e?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},KH=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=void 0===i||i,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},ZH=class extends XH{constructor(e,t){super(e),this.scope="",t=null!==t&&void 0!==t?t:{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,i,n){if(t=null!==t&&void 0!==t?t:this.getType(e),this.getShared(e,t)){let r=this.getUnique(e,t);r&&void 0===this.uuid&&(this.uuid=wv.generateUUID()),i=e.getUUID(null!==i&&void 0!==i?i:this.getUUID(),!r);let a=e.getNodeData(i),s=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,i)):super.build(e,t,i);if(r)return a.name=a.name||super.build(e,t,i),a.name;if(!this.getLabel()&&(!this.getShared(e,s)||e.context.ignoreCache||1===a.deps))return super.build(e,t,i);i=this.getUUID(!1);let o=this.getTemp(e,i);if(o)return e.format(o,s,t);{o=super.generate(e,t,i,a.output,n);let r=this.generate(e,s,i);return e.addNodeCode(o+" = "+r+";"),e.format(o,s,t)}}return super.build(e,t,i)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,n,r){return this.getShared(e,t)||console.error("TempNode is not shared"),i=null!==i&&void 0!==i?i:this.uuid,e.getTempVar(i,null!==n&&void 0!==n?n:this.getType(e),r,this.getLabel()).name}},JH=class extends ZH{constructor(e,t){(t=null!==t&&void 0!==t?t:{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,n,r,a){i=e.getUUID(null!==i&&void 0!==i?i:this.getUUID()),n=null!==n&&void 0!==n?n:this.getType(e);let s=e.getNodeData(i);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,i,n,r,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(n,this,r,a,this.getLabel())),e.format(s.vertex.name,n,t)):(s.fragment||(s.fragment=e.createFragmentUniform(n,this,r,a,this.getLabel())),e.format(s.fragment.name,n,t))}},$H=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;super("v2"),this.nodeType="Vector2",this.value=e instanceof Av?e:new Av(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,n,r,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",n,t)}},eG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;super("v3"),this.nodeType="Vector3",this.value=e instanceof Zv?e:new Zv(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,n,r,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,t)}},tG=class extends JH{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Zj?e:new Zj(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,n,r,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",n,t)}},iG=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,nG=/[a-z_0-9]+/gi,rG=class extends ZH{constructor(e,t,i,n,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===r,this.isInterface=!1,this.parse(e,t,i,n)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,n,r){let a,s=0,o=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;a=nG.exec(this.src);)l.push(a);for(let c=0;c<l.length;c++){let t=l[c],i=t[0],n=!this.isMethod||!this.getInputByName(i),r=i;if(this.keywords[i]||this.useKeywords&&n&&KH.containsKeyword(i)){let t=this.keywords[i];if(!t){let n=KH.getKeywordData(i);n.cache&&(t=e.keywords[i]),t=t||KH.getKeyword(i,e),n.cache&&(e.keywords[i]=t)}r=t.build(e)}i!==r&&"."!==o[t.index+s-1]&&(o=o.substring(0,t.index+s)+r+o.substring(t.index+i.length+s),s+=r.length-i.length),void 0===this.getIncludeByName(r)&&KH.contains(r)&&e.include(KH.get(r))}return"source"===t?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,i,n){if(this.src=e||"",this.includes=null!==t&&void 0!==t?t:[],this.extensions=null!==i&&void 0!==i?i:{},this.keywords=null!==n&&void 0!==n?n:{},this.isMethod){let e=iG.exec(this.src);if(this.inputs=[],e&&4==e.length){this.type=e[1],this.name=e[2];let t=e[3].match(nG);if(t){let e=0;for(;e<t.length;){let i,n=t[e++];"in"===n||"out"===n||"inout"===n?i=t[e++]:(i=n,n="");let r=t[e++];this.inputs.push({name:r,type:i,qualifier:n})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},aG=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,sG=class extends ZH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||sG.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,n,r){this.src=e||"";let a,s,o="",l=aG.exec(e);this.useDefine=null!==r&&void 0!==r?r:"#"===this.src.charAt(0),l&&l.length>1?(s=l[1],a=l[2],o=l[3]):(a=this.src,s="f"),this.name=a,this.type=s,this.value=o}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,n,r){return e.format(this.name,this.getType(e),t)}},oG=sG;oG.PI="PI",oG.PI2="PI2",oG.RECIPROCAL_PI="RECIPROCAL_PI",oG.RECIPROCAL_PI2="RECIPROCAL_PI2",oG.LOG2="LOG2",oG.EPSILON="EPSILON";var lG=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),cG=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),hG=class extends ZH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,n,r){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.src=e,this.inputs=[];let t=lG.exec(e);if(t){let e,i=t[2];for(;e=cG.exec(i);)this.inputs.push({type:e[1],name:e[2]});this.name=t[1]}else this.name="";this.type=this.name}},uG=class extends ZH{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=null!==e&&void 0!==e?e:0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",n=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(n,this.getType(e),t)}};KH.addKeyword("uv",function(){return new uG}),KH.addKeyword("uv2",function(){return new uG(1)});var dG=class extends ZH{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=null!==t&&void 0!==t?t:dG.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Jg:return["Linear"];case $g:return["sRGB"];default:return[]}}generate(e,t){var i;let n=this.input.build(e,"v4"),r=this.getType(e),a=dG.Nodes[this.method],s=e.include(a);if(s===dG.LINEAR_TO_LINEAR)return e.format(n,r,t);if(2===(null===(i=a.inputs)||void 0===i?void 0:i.length)){let i=this.factor.build(e,"f");return e.format(s+"( "+n+", "+i+" )",r,t)}return e.format(s+"( "+n+" )",r,t)}fromEncoding(e){let t=dG.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=dG.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},pG=dG;pG.Nodes={LinearToLinear:new rG(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new rG(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new rG(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},pG.LINEAR_TO_LINEAR="LinearToLinear",pG.SRGB_TO_LINEAR="sRGBToLinear",pG.LINEAR_TO_SRGB="LinearTosRGB";var fG=class extends rG{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>4?arguments[4]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>2?arguments[2]:void 0,arguments.length>1?arguments[1]:void 0),this.nodeType="Expression"}},mG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gv,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=null!==t&&void 0!==t?t:new uG,this.bias=i,this.project=void 0!==n&&n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var i;if("sampler2D"===t)return this.getTexture(e,t);let n,r,a=this.getTexture(e,t),s=this.uv.build(e,this.project?"v4":"v2"),o=this.bias?this.bias.build(e,"f"):void 0;void 0===o&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":o?"tex2DBias":"tex2D",r=o?n+"( "+a+", "+s+", "+o+" )":n+"( "+a+", "+s+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=null!==(i=this.colorSpace)&&void 0!==i?i:new pG(new fG("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,c),e.removeContext(),e.format(r,c,t)}},gG=class extends JH{constructor(e){super("f"),this.nodeType="Float",this.value=null!==e&&void 0!==e?e:0}generateReadonly(e,t,i,n,r,a){return e.format(this.value+(this.value%1?"":".0"),n,t)}},vG=class extends ZH{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=null!==t&&void 0!==t?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,n,r){n=this.getType(e);let a=this.value,s=a.build(e,t)+"( ",o=[];if(a.inputs){for(let t=0;t<a.inputs.length;t++){let i=a.inputs[t],n=this.inputs[t]||this.inputs[i.name];o.push(n.build(e,e.getTypeByFormat(i.type)))}s+=o.join(", ")+" )"}return e.format(s,n,t)}},yG=class extends ZH{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yG.ADD;super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let n=this.a.build(e,i),r=this.b.build(e,i);return e.format("( "+n+" "+this.op+" "+r+" )",i,t)}},bG=yG;bG.ADD="+",bG.SUB="-",bG.MUL="*",bG.DIV="/";var xG=class extends ZH{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xG.ABS,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:n=t,"string"!=typeof i?this.c=i:n=i,this.method=n,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case xG.MIX:case xG.CLAMP:case xG.REFRACT:case xG.SMOOTHSTEP:case xG.FACEFORWARD:return 3;case xG.MIN:case xG.MAX:case xG.MOD:case xG.STEP:case xG.REFLECT:case xG.DISTANCE:case xG.DOT:case xG.CROSS:case xG.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,n=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>n?this.a.getType(e):i>n?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case xG.LENGTH:case xG.DISTANCE:case xG.DOT:return"f";case xG.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,n,r,a=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case xG.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case xG.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case xG.CROSS:i=this.a.build(e,"v3"),n=this.b.build(e,"v3");break;case xG.STEP:i=this.a.build(e,1===a?"f":l),n=this.b.build(e,l);break;case xG.MIN:case xG.MAX:case xG.MOD:i=this.a.build(e,l),n=this.b.build(e,1===s?"f":l);break;case xG.REFRACT:i=this.a.build(e,l),n=this.b.build(e,l),r=this.c.build(e,"f");break;case xG.MIX:i=this.a.build(e,l),n=this.b.build(e,l),r=this.c.build(e,1===o?"f":l);break;default:i=this.a.build(e,l),this.b&&(n=this.b.build(e,l)),this.c&&(r=this.c.build(e,l))}let h=[];h.push(i),n&&h.push(n),r&&h.push(r);let u=this.getNumInputs(e);if(h.length!==u)throw Error('Arguments not match used in "'.concat(this.method,'". Require ').concat(u,", currently ").concat(h.length,"."));return e.format(this.method+"( "+h.join(", ")+" )",c,t)}},wG=xG;wG.RAD="radians",wG.DEG="degrees",wG.EXP="exp",wG.EXP2="exp2",wG.LOG="log",wG.LOG2="log2",wG.SQRT="sqrt",wG.INV_SQRT="inversesqrt",wG.FLOOR="floor",wG.CEIL="ceil",wG.NORMALIZE="normalize",wG.FRACT="fract",wG.SATURATE="saturate",wG.SIN="sin",wG.COS="cos",wG.TAN="tan",wG.ASIN="asin",wG.ACOS="acos",wG.ARCTAN="atan",wG.ABS="abs",wG.SIGN="sign",wG.LENGTH="length",wG.NEGATE="negate",wG.INVERT="invert",wG.MIN="min",wG.MAX="max",wG.MOD="mod",wG.STEP="step",wG.REFLECT="reflect",wG.DISTANCE="distance",wG.DOT="dot",wG.CROSS="cross",wG.POW="pow",wG.MIX="mix",wG.CLAMP="clamp",wG.REFRACT="refract",wG.SMOOTHSTEP="smoothstep",wG.FACEFORWARD="faceforward";var AG=class extends ZH{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,n){var r,a,s,o;let l=new vG(AG.Nodes.bilinearCubeUV,[t,i,n]);this.colorSpaceTL=null!==(r=this.colorSpaceTL)&&void 0!==r?r:new pG(new fG("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(e)+".tl"),this.colorSpaceTR=null!==(a=this.colorSpaceTR)&&void 0!==a?a:new pG(new fG("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(e)+".tr"),this.colorSpaceBL=null!==(s=this.colorSpaceBL)&&void 0!==s?s:new pG(new fG("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(e)+".bl"),this.colorSpaceBR=null!==(o=this.colorSpaceBR)&&void 0!==o?o:new pG(new fG("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(e)+".br");let c={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(c),this.colorSpaceTLExp=new fG(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new fG(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new fG(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new fG(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let h=new fG("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return h.keywords.cubeUV_TL=this.colorSpaceTLExp,h.keywords.cubeUV_TR=this.colorSpaceTRExp,h.keywords.cubeUV_BL=this.colorSpaceBLExp,h.keywords.cubeUV_BR=this.colorSpaceBRExp,h.keywords.cubeUV=l,h}generate(e,t){if(e.isShader("fragment")){let i=this.uv,n=this.bias||e.context.roughness,r=new vG(AG.Nodes.roughnessToMip,[n]),a=new wG(r,AG.Nodes.m0,AG.Nodes.cubeUV_maxMipLevel,wG.CLAMP),s=new wG(a,wG.FLOOR),o=new wG(a,wG.FRACT),l=this.bilinearCubeUV(e,this.value,i,s),c=this.bilinearCubeUV(e,this.value,i,new bG(s,new gG(1).setReadonly(!0),bG.ADD)),h=new wG(l,c,o,wG.MIX);return e.format(h.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},SG=AG;SG.Nodes=function(){let e=new hG("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new oG("float cubeUV_maxMipLevel 8.0",!0),i=new oG("float cubeUV_minMipLevel 4.0",!0),n=new oG("float cubeUV_maxTileSize 256.0",!0),r=new oG("float cubeUV_minTileSize 16.0",!0),a=new rG("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");a.useKeywords=!1;let s=new rG("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");s.useKeywords=!1;let o=new rG("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,a,s,t,i,n,r]);o.useKeywords=!1;let l=new oG("float r0 1.0",!0),c=new oG("float v0 0.339",!0),h=new oG("float m0 -2.0",!0),u=new oG("float r1 0.8",!0),d=new oG("float v1 0.276",!0),p=new oG("float m1 -1.0",!0),f=new oG("float r4 0.4",!0),m=new oG("float v4 0.046",!0),g=new oG("float m4 2.0",!0),v=new oG("float r5 0.305",!0),y=new oG("float v5 0.016",!0),b=new oG("float m5 3.0",!0),x=new oG("float r6 0.21",!0),w=new oG("float v6 0.0038",!0),A=new oG("float m6 4.0",!0);return{bilinearCubeUV:o,roughnessToMip:new rG("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,c,h,u,d,p,f,m,g,v,y,b,x,w,A]),m0:h,cubeUV_maxMipLevel:t}}();var _G=class extends ZH{constructor(e){super("v3"),this.nodeType="Normal",this.scope=null!==e&&void 0!==e?e:_G.VIEW}getShared(){return this.scope===_G.WORLD}build(e,t,i,n){let r=e.context[this.scope+"Normal"];return r?r.build(e,t,i,n):super.build(e,t,i)}generate(e,t,i,n,r){let a;switch(this.scope){case _G.VIEW:a=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case _G.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case _G.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal")}return e.format(a,this.getType(e),t)}},EG=_G;EG.LOCAL="local",EG.WORLD="world",EG.VIEW="view",EG.NORMAL="normal",KH.addKeyword("viewNormal",function(){return new EG(EG.VIEW)}),KH.addKeyword("localNormal",function(){return new EG(EG.NORMAL)}),KH.addKeyword("worldNormal",function(){return new EG(EG.WORLD)});var CG=class extends ZH{constructor(e){super("v3"),this.nodeType="Position",this.scope=null!==e&&void 0!==e?e:CG.LOCAL}getType(){return this.scope===CG.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case CG.LOCAL:case CG.WORLD:return!1}return!0}generate(e,t,i,n,r){let a;switch(this.scope){case CG.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case CG.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case CG.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case CG.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(a,this.getType(),t)}},MG=CG;MG.LOCAL="local",MG.WORLD="world",MG.VIEW="view",MG.PROJECTION="projection",KH.addKeyword("position",function(){return new MG}),KH.addKeyword("worldPosition",function(){return new MG(MG.WORLD)}),KH.addKeyword("viewPosition",function(){return new MG(MG.VIEW)});var TG=class extends ZH{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=null!==e&&void 0!==e?e:TG.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===TG.SPHERE?"v2":this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let n;switch(this.scope){case TG.VECTOR:{let t=new EG(EG.VIEW),r=e.context.roughness,a=t.build(e,"v3"),s=new MG(MG.VIEW).build(e,"v3"),o=r?r.build(e,"f"):void 0,l="reflect( -normalize( ".concat(s," ), ").concat(a," )");o&&(l="normalize( mix( ".concat(l,", ").concat(a,", ").concat(o," * ").concat(o," ) )"));let c="inverseTransformDirection( ".concat(l,", viewMatrix )");i?(e.addNodeCode("vec3 reflectVec = ".concat(c,";")),n="reflectVec"):n=c;break}case TG.CUBE:{let t=new TG(TG.VECTOR).build(e,"v3"),r="vec3( -"+t+".x, "+t+".yz )";i?(e.addNodeCode("vec3 reflectCubeVec = ".concat(r,";")),n="reflectCubeVec"):n=r;break}case TG.SPHERE:{let t="normalize( ( viewMatrix * vec4( "+new TG(TG.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode("vec2 reflectSphereVec = ".concat(t,";")),n="reflectSphereVec"):n=t;break}}return e.format(n,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},PG=TG;PG.CUBE="cube",PG.SPHERE="sphere",PG.VECTOR="vector";var DG=class extends ZH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mG,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new SG(this.value,null!==t&&void 0!==t?t:new PG(PG.VECTOR),i),this.irradianceNode=new SG(this.value,new EG(EG.WORLD),new gG(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},OG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jb,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=null!==t&&void 0!==t?t:new PG,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var i,n;if("samplerCube"===t)return this.getTexture(e,t);let r,a=this.getTexture(e,t),s=null===(i=this.uv)||void 0===i?void 0:i.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;void 0===o&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f")),r=o?"texCubeBias( "+a+", "+s+", "+o+" )":"texCube( "+a+", "+s+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=null!==(n=this.colorSpace)&&void 0!==n?n:new pG(new fG("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,c),e.removeContext(),e.format(r,c,t)}},kG=["x","y","z","w"],IG=["float","vec2","vec3","vec4"],RG={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},LG={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},zG=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,i){let n=this.getIncludes(t,i);if(!n)return"";let r="";n=n.sort(e);for(let e=0;e<n.length;e++)n[e].src&&(r+=n[e].src+"\n");return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode("\nuniform int frameIndex;\nuniform vec2 resolution;\nuniform mat4 previousModelViewMatrix;\nuniform mat4 previousProjectionMatrix;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n"),this.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n\nuniform int frameIndex;\nuniform vec2 resolution;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos) {\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n"),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let e=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+e+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+e+";"),this.addVertexFinalCode("vUv"+e+" = uv"+e+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("\n\t\t\t\t#ifndef SHAPEBLEND \n\t\t\t\t\tvObjectNormal = normal;\n\t\t\t\t#else\n\t\t\t\t\tvObjectNormal = objectNormal;\n\t\t\t\t#endif\n\t\t\t")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode("\n// TODO: This could be generated CPU side and passed to the shader every frame\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\n// TODO: Pass correct view size\nvec2 offset = haltonSequence[frameIndex];\noffset.x /= resolution.x;\noffset.y /= resolution.y;\n\nvec4 currentPosition = gl_Position;\nvec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);\n\n// We want to calculate the velocity with unjittered positions\n// so that things that are not moving get a velocity = 0\nvCurrentPosition = currentPosition;\nvPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);\n#ifdef OUTLINE_COMPENSATION\nvPreviousPosition.xy += OUTLINE_COMPENSATION;\n#endif\ngl_Position = currentPositionJittered;\n\n"),this.addFragmentFinalCode("\nvec2 oldPos = vPreviousPosition.xy;\n    oldPos /= vPreviousPosition.w;\n    oldPos.xy = (oldPos.xy+1.)/2.0;\n\nvec2 newPos = vCurrentPosition.xy;\n    newPos /= vCurrentPosition.w;\n    newPos.xy = (newPos.xy+1.)/2.0;\n\nvec2 velocity = (newPos - oldPos);\n\n// Discard fully transparent pixels \nif (gl_FragColor.a <= 0.0) discard;\n\ngVelocity = vec4(velocity, 0.0, 1.0);\n")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=null!==e&&void 0!==e?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode("".concat(t," ").concat(e,";")),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode("".concat(t," ").concat(e,";")),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode("".concat(t," ").concat(e,";")),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}clearNodeCode(e){e=null!==e&&void 0!==e?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"varying",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=this.getVars(n),o=s[e];if(!o){let n=s.length;o={name:i||"node"+r+n+(a?"_"+a:""),type:t},s.push(o),s[e]=o}return o}getTempVar(e,t,i,n){return this.getVar(e,t,i,this.shader,"T",n)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){t=null!==t&&void 0!==t?t:"";let i="";for(let n=0,r=e.length;n<r;++n){let r=e[n],a=r.type,s=r.name,o=r.size,l=this.getFormatByType(a);if(void 0===l)throw new Error("Node pars "+l+" not found.");l.includes("[]")?i+=t+" "+l.substring(0,l.length-2)+" "+s+"[".concat(o,"];\n"):i+=t+" "+l+" "+s+";\n"}return i}getVars(e){return this.inputs.vars[null!==e&&void 0!==e?e:this.shader]}getNodeData(e){let t=e instanceof XH?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,n,r,a){if(t.includes("[]")){let s=this.inputs.arrayUniforms,o=s.list.length,l=new QH({type:t,size:i.size,name:n||"nodeUA"+o+(a?"_"+a:""),node:i,needsUpdate:r});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}{let s=this.inputs.uniforms,o=s.list.length,l=new QH({type:t,name:n||"nodeU"+o+(a?"_"+a:""),node:i,needsUpdate:r});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,n,r){return this.createUniform("vertex",e,t,i,n,r)}createFragmentUniform(e,t,i,n,r){return this.createUniform("fragment",e,t,i,n,r)}include(e,t,i){let n;if(e="string"==typeof e?KH.get(e):e,!1===this.context.include)return e.name;e instanceof rG?n=this.includes.functions:e instanceof oG?n=this.includes.consts:e instanceof hG&&(n=this.includes.structs);let r=n[this.shader]=n[this.shader]||[];if(e){var a;let n=r[e.name];if(n||(n=r[e.name]={node:e,deps:[]},r.push(n),n.src=e.build(this,"source")),e instanceof rG&&t&&r[t.name]&&-1===r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),null!==(a=e.includes)&&void 0!==a&&a.length)){let i=0;do{this.include(e.includes[i++],t)}while(i<e.includes.length)}return i&&(n.src=i),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return IG[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n=0;n<arguments.length;n++){let e=t[n];if(null!==e&&void 0!==e&&e.isNode)return e}}resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n=0;n<arguments.length;n++){let e=t[n];if(void 0!==e){if(e.isNode)return e;if(e.isTexture)switch(e.mapping){case vg:case yg:return new OG(e);case bg:return new DG(new mG(e));default:return new mG(e)}else{if(e.isVector2)return new $H(e);if(e.isVector3)return new eG(e);if(e.isVector4)return new tG(e)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return RG[e]||e}getFormatByType(e){return LG[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return kG[e]}getIndexByElement(e){return kG.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Jg,t===Jg&&this.context.gamma&&(t=$g),t}},BG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;super("c"),this.nodeType="Color",this.value=e instanceof Zj?e:new Zj(e||0,t,i,n)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,n,r,a){i=e.getUUID(null!==i&&void 0!==i?i:this.getUUID()),n=null!==n&&void 0!==n?n:this.getType(e);let s=e.getNodeData(i),o=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let t=this.alpha.build(e,"f");e.addFragmentNodeCode("accumAlpha += ( 1.0 - accumAlpha ) * ".concat(t,";"))}return o?this.generateReadonly(e,t,i,n,r,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(n,this,r,a,this.getLabel())),e.format(s.vertex.name,n,t)):(s.fragment||(s.fragment=e.createFragmentUniform(n,this,r,a,this.getLabel())),e.format(s.fragment.name,n,t))}generateReadonly(e,t,i,n,r,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",n,t)}},jG=class extends JH{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(null!==e&&void 0!==e?e:0)}generateReadonly(e,t,i,n,r,a){return e.format(this.value.toString(),n,t)}},FG=class extends JH{constructor(e){super("b"),this.nodeType="Bool",this.value=null!==e&&void 0!==e&&e}generateReadonly(e,t,i,n){return e.format(this.value?"true":"false",n,t)}},NG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}},UG=class extends JH{},VG=class extends UG{constructor(e){super("v3"),this.image=e,this._value=new Zv}get value(){var e,t;return this._value.x=this.image.isVideo?null!==(e=this.image.img.videoWidth)&&void 0!==e?e:0:this.image.img.width,this._value.y=this.image.isVideo?null!==(t=this.image.img.videoHeight)&&void 0!==t?t:0:this.image.img.height,this._value}},WG=class extends UG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1008,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1006;super("t"),this.image=e,this.wrap=t,this.minFilter=i,this.magFilter=n}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},HG=class extends JH{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=null!==e&&void 0!==e?e:new Sv}generateReadonly(e,t,i,n,r,a){return e.format("mat3("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},GG=class extends JH{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=null!==e&&void 0!==e?e:new My}generateReadonly(e,t,i,n,r,a){return e.format("mat4("+this.value.elements.join(", ")+")",n,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function qG(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0).premultiply((new Sv).makeRotation(n*wv.DEG2RAD))}var YG=class extends HG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(new Sv),this.repeat=e,this.offset=t,this.rotation=i,qG(this.value,e,t,i)}updateMatrix(){qG(this.value,this.repeat,this.offset,this.rotation)}},XG=class extends JH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof qv?new Array(e).fill(t):new Array(e).fill(new qv(0))}},QG=class extends ZH{constructor(e,t,i,n){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=n}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},KG=class extends ZH{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){let i=e.include(KG.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.color.build(e,"v3")),n.push(this.mask?"luminance(".concat(this.mask.build(e,"v3"),")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},ZG=KG;ZG.Nodes={customColor:new rG("vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color;\n\t\t\t}")};var JG=class extends ZH{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){let i=e.include(JG.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.cnormal.build(e,"v3")),n.push("normal"),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},$G=JG;$G.Nodes={customNormal:new rG("vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var eq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h,u){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=i,this.projection=n,this.axis=r,this.side=a,this.size=s,this.blending=o,this.mat=l,this.isMask=u,this.alpha=c,this.mode=h,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i,n="g".concat(this.uuid.toString().replace(/-/g,""));switch(this.projection.value){case 3:i=e.include(eq.Nodes.cylindrical);break;case 2:i=e.include(eq.Nodes.spherical);break;case 1:let t=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],r=["zy","xz","xy"][this.axis.value],a=new rG("\n\t\tvec3 ".concat(n,"_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 projected = (1. + (position.").concat(r,")) / 2.;\n\t\t\t\tvec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t").concat(2===this.side.value?"":"lalpha *= step(0.0, ".concat(1===this.side.value?"-1.0 * ":"","dot(vObjectNormal, ").concat(t,"));"),"\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"));i=e.include(a);break;case 4:i=e.include(eq.Nodes.triplanar);break;default:i=e.include(eq.Nodes.uv)}e.addFragmentVariable(this.calpha,"float");let r=[];if(r.push("normal"),r.push(this.texture.generate(e,"t")),r.push(this.textureSize.build(e,"v2")),r.push(this.crop.build(e,"f")),r.push(this.mat.build(e,"mat3")),r.push(this.size.build(e,"v2")),r.push(this.blending.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),4===this.projection.value){let t="".concat(n,"_writeUvs"),i=t+"0",a=t+"1",s=t+"2",o="".concat(n,"_triplanarWeights");e.addFragmentVariable(i,"vec2"),e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(o,"vec3"),r.push(i),r.push(a),r.push(s),r.push(o)}else{let t="".concat(n,"_writeUvs");e.addFragmentVariable(t,"vec2"),r.push(t)}return e.format(i+"("+r.join(",")+")",this.getType(e),t)}},tq=eq;tq.Nodes={cylindrical:new rG("\nvec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\t\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new rG("\nvec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new rG("vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"),triplanar:new rG("vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {\n\t\t\t\tvec3 p = position;\n\t\t\t\tvec2 uv0 = (1.0 + p.xy) / 2.0;     \n\t\t\t\tvec2 uv1 = (1.0 + p.zy) / 2.0;\t\t\n\t\t\t\tvec2 uv2 = (1.0 + p.xz) / 2.0;\t\t\n\t\n\t\t\t\tuv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\n\t\t\t\t// Write out all sets of UVs that we generated\n\t\t\t\twriteUvs0 = uv0;\n\t\t\t\twriteUvs1 = uv1;\n\t\t\t\twriteUvs2 = uv2;\n\t\t\t\twriteWeights = weights;\n\n\t\t\t\t// Derivatives for LOD\n\t\t\t\tvec2 df0 = fwidth(uv0);\n\t\t\t\tvec2 df1 = fwidth(uv1);\n\t\t\t\tvec2 df2 = fwidth(uv2);\n\t\t\t\tif (df0.x > 0.5) df0.x = 0.0;\n\t\t\t\tif (df1.x > 0.5) df1.x = 0.0;\n\t\t\t\tif (df2.x > 0.5) df2.x = 0.0;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                \tvec4 tmp = \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#else\n                \tvec4 tmp = \n\t\t\t\t\t\ttextureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttextureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttextureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\n\t\t\t\t// Apply cropping across all 3 planes\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;//n * 0.5 + 0.5;\n\t\t\t}\t\t\t\n\t\t\t")};var iq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=n,this.isVector=r,this.isWorldSpace=a,this.origin=s,this.direction=o,this.colors=l,this.steps=c,this.isMask=u,this.alpha=h,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){let i="g".concat(this.uuid.toString().replace(/-/g,"")),n=new rG("vec3 ".concat(i,"_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[").concat(i,"_MAX_COLORS], float steps[").concat(i,"_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ").concat(i,"_IS_VECTOR\n                   #ifdef ").concat(i,"_LINEAR\n                       #ifdef ").concat(i,"_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ").concat(i,"_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ").concat(i,"_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ").concat(i,"_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ").concat(i,"_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a * mask;\n               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t   \n               return color.rgb;\n\t\t\t}"),[iq.Nodes.vectorLinearWorldSpaceDepth,iq.Nodes.vectorLinearObjectSpaceDepth,iq.Nodes.vectorSphericalObjectSpaceDepth,iq.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define("".concat(i,"_MAX_COLORS"),this.colors.value.length),this.smooth.value&&e.define("".concat(i,"_SMOOTH")),this.isVector.value>.5&&e.define("".concat(i,"_IS_VECTOR")),0===this.gradientType.value&&e.define("".concat(i,"_LINEAR")),this.isWorldSpace.value>.5&&e.define("".concat(i,"_WORLDSPACE")),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let r=e.include(n),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(r+"("+a.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nq=iq;nq.Nodes={vectorLinearWorldSpaceDepth:new rG("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new rG("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new rG("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new rG("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var rq=class extends ZH{constructor(e,t,i,n,r,a,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=n,this.factor=r,this.isMask=o,this.alpha=a,this.mode=s,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new rG("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\t\tfloat lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn color;\n\t\t\t\t}"),n=e.include(i),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},aq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=n,this.offset=r,this.morph=a,this.angle=s,this.isMask=l,this.alpha=o,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(aq.Nodes.gradient),n=[];return n.push(this.gradientType.build(e,"i")),n.push(this.smooth.build(e,"b")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.offset.build(e,"v2")),n.push(this.morph.build(e,"v2")),n.push(this.angle.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},sq=aq;sq.Nodes={gradient:new rG("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var oq=class extends ZH{constructor(e,t,i,n,r){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=n,this.alpha=t,this.mode=i,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha"),this.rotation=r}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(oq.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let n=[];return n.push(this.texture.generate(e,"t")),n.push("normal"),n.push(this.isMask.build(e,"b")),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),n.push(this.rotation.build(e,"f")),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},lq=oq;lq.Nodes={matcap:new rG("vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {\n\t\t\t\t\tvec3 viewDir = normalize( vViewPosition );\n\t\t\t\t\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\t\t\t\t\tvec3 y = cross( viewDir, x );\n\t\t\t\t\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) );\n\t\t\t\t\tuv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;\n\t\t\t\t\tuv = uv * 0.495 + 0.5;\n\t\t\t\t\tvec4 matcapColor = texture2D( matcapTex, uv );\n\n\t\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\t\n\t\t\t\t\treturn matcapColor.rgb;\n            \t}")};var cq=function(){let e=new rG("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new rG("float simplexFast(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t mediump vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t mediump vec3 hs = s;\n\t\t\t \n\t\t\t mediump vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t mediump vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t mediump vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t mediump vec3 x1 = x - i1 + G3;\n\t\t\t mediump vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t mediump vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t mediump vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(hs), x);\n\t\t\t d.y = dot(random3(hs + i1), x1);\n\t\t\t d.z = dot(random3(hs + i2), x2);\n\t\t\t d.w = dot(random3(hs + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new oG("float F3 0.3333333"),t.keywords.G3=new oG("float G3 0.1666667");let i=new rG("float simplexPrecise(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);i.keywords.F3=new oG("float F3 0.3333333"),i.keywords.G3=new oG("float G3 0.1666667");let n=new rG("float simplexFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplexFast(m * rot1)\n\t\t\t\t + 0.2666667 * simplexFast(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplexFast(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplexFast(8.0 * m);\n\t\t}",[t]),r=new rG("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),a=new rG("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new rG("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[r,a]),o=new rG("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new rG("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),c=new rG("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[l]),h=new rG("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[c]);h.keywords.NUM_OCTAVES=new oG("int NUM_OCTAVES ".concat(5));let u=new rG("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new rG("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[r,a,u]),p=new rG("float hashwithoutsine13(vec3 p3)\n\t\t{\n\t\t\tp3  = fract(p3 * .1031);\n\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t}"),f=new rG("vec3 hashwithoutsine33(vec3 p3)\n\t\t{\n\t\t\tp3 = fract(p3 * vec3(.1031, .1030, .0973));\n\t\t\tp3 += dot(p3, p3.yxz+33.33);\n\t\t\treturn fract((p3.xxy + p3.yxx)*p3.zyx);\n\t\t}"),m=new rG("float metric(in vec3 p)\n\t\t{\n\t\t\t// L2 \n\t\t\treturn length(p);\n\n\t\t\t// Chebyshev \n\t\t\t// vec3 a = abs(p);\n\t\t\t// return max(a.x, max(a.y, a.z));\n\t\t}"),g=new rG("float smin( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(b, a, h) - correction;\n\t\t}"),v=new rG("float smax( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(a, b, h) + correction;\n\t\t}"),y=new rG("float remap(float value, float input_min, float input_max, float output_min, float output_max) {\n\t\t\t// Compute width of each interval\n\t\t\tfloat input_width = input_max - input_min;\n\t\t\tfloat output_width = output_max - output_min;\n\t\t\n\t\t\t// Convert input range into a 0-1 range \n\t\t\tfloat scaled = (value - input_min) / input_width;\n\t\t\n\t\t\t// Convert the 0-1 range into a value in output range\n\t\t\treturn output_min + (scaled * output_width);\n\t\t}");return{simplexFast:t,simplexPrecise:i,simplexFractal:n,simplexAshima:s,fbm:h,perlin:d,voronoi:new rG('float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) \n\t\t{\n\t\t\t// Integer and fractional parts of this point\'s coordinates\n\t\t\tivec3 p = ivec3(floor(x));\n\t\t\tvec3 f = fract(x);\n\n\t\t\t// Different variables that we will use to construct noise:\n\t\t\t//\n\t\t\t// f1: distance to the closest feature point\n\t\t\t// f2: distance to the second closest feature point\n\t\t\t// e: distance to the closest edge (cell boundary)\n\t\t\t//\n\t\t\t// We also compute "smooth" versions of all of the above quantites, essentially\n\t\t\t// replacing "hard" minimums with "smooth" minimums (described by IQ)\n\t\t\tfloat f1_smooth = 8.0;\n\t\t\tfloat f1 = 8.0;\n\t\t\tfloat f2_smooth = 8.0;\n\t\t\tfloat f2 = 8.0;\n\t\t\tfloat e_smooth = 8.0;\n\t\t\tfloat e = 8.0;\n\n\t\t\t// Variables stored from closest cell\n\t\t\tivec3 mb;\n\t\t\tvec3 mr; \n\n\t\t\tint steps = quality;\n\t\t\t\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d = length(r);\n\t\t\t\t\n\t\t\t\tf1_smooth = smin(d, f1_smooth, smoothness);\n\n\t\t\t\t// Store un-smoothed distances too \n\t\t\t\tif (d < f1) \n\t\t\t\t{\n\t\t\t\t\tf2 = f1;\n\t\t\t\t\tf1 = d;\n\n\t\t\t\t\tmb = ivec3(x, y, z);\n\t\t\t\t\tmr = r;\n\t\t\t\t} \n\t\t\t\telse if (d < f2) \n\t\t\t\t{\n\t\t\t\t\tf2 = d;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\t\n\t\t\t// Second pass for edge distance  \n\t\t\t// skip for styles don\'t need\n\t\t\tif (style != 0 &&  style != 5 && style != 7)\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\t// Start search at the cell that contains the closest point to "x" (found in 1st pass)\n\t\t\t\tivec3 b = mb + ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d1 = dot(0.5 * (mr + r), (r - mr)); \t\t\t\t// IQ normalizes "r - mr" but that breaks things for the smooth version?\n\t\t\t\tfloat d2 = dot(0.5 * (mr + r), normalize(r - mr));\n\n\t\t\t\te_smooth = smin(d1, e_smooth, smoothness);\n\n\t\t\t\te = min(e, d2);\n\n\t\t\t\t// Also compute a smooth version of F2 in this pass\n\t\t\t\t{\n\t\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\t\tif (b != mb) \n\t\t\t\t\t{\n\t\t\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\t\t\tfloat d = length(r);\n\n\t\t\t\t\t\tf2_smooth = smin(d, f2_smooth, smoothness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Different visualization modes \n\t\t\tif (style == 0) \n\t\t\t{\n\t\t\t\treturn f1_smooth;\n\t\t\t}\n\t\t\tif (style == 1) \n\t\t\t{\n\t\t\t\treturn f2_smooth;\n\t\t\t}\n\t\t\tif (style == 2) \n\t\t\t{\n\t\t\t\treturn f2_smooth - f1_smooth;\n\t\t\t\t\n\t\t\t\t// "Pebbles" also cool\n\t\t\t\t//return step(0.2, f2_smooth - f1_smooth);\n\t\t\t}\n\t\t\tif (style == 3) \n\t\t\t{\n\t\t\t\t// This one is really good for rock / stone effects\n\t\t\t\tfloat a = f1; \n\t\t\t\tfloat b = f2;\n\t\t\t\tfloat k = 3.0;\n\t\t\t\tfloat h = max(k - abs(a - b), 0.0) / k;\n\t\t\t\tfloat final = min(a, b) - h * h * k * (1.0 / 4.0);\n\t\t\t\treturn final;\n\t\t\t}\n\t\t\tif (style == 4) \n\t\t\t{\n\t\t\t\t// Some random adjustments to make this style stand out more \n\t\t\t\treturn exp(5.0 * e_smooth);\n\t\t\t}\n\t\t\tif (style == 5) \n\t\t\t{\n\t\t\t\treturn pow(f1_smooth, 3.0);\n\t\t\t}\n\t\t\tif (style == 6) \n\t\t\t{\t\t\t\t\n\t\t\t\tconst float eps = 0.0125;\n\n\t\t\t\t// Thicker lines as the user increases the smoothness slider\n\t\t\t\tfloat thickness = smoothness * 0.25 + eps;\n\n\t\t\t\t// Blurrier lines as the user increases the smoothness slider\n\t\t\t\tfloat blur = pow(smoothness, 3.0) * 0.25 + eps;\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\tthickness - thickness * blur, \n\t\t\t\t\tthickness + thickness * blur, \n\t\t\t\t\te\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (style == 7) \n\t\t\t{\n\t\t\t\treturn hashwithoutsine13(vec3(p + mb) + seed);\n\t\t\t}\n\t\t}\n\t',[p,f,m,g,v,y])}}(),hq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g,v,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=n,this.fB=r,this.distortion=a,this.colorA=s,this.colorB=o,this.colorC=l,this.colorD=c,this.noiseType=u,this.voronoiStyle=p,this.highCut=f,this.lowCut=m,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=d,this.alpha=h,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t,i,n,r){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=["simplexFast","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseType.value],s="voronoi"==a?"\n\t\tfloat v = ".concat(a,'(st + move, voronoiStyle, smoothness, seed, quality);\n\n\t\t// Apply clipping to colors\n\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t// Note that the voronoi mode only uses colors "A" and "C" from the UI \n\t\tvec4 color = mix(colorA, colorC, v); \n\t\t'):"\n\t\tvec3 q = vec3(".concat(a,"(st),\n\t\t\t\t\t   ").concat(a,"(st + vec3(1.0)),\n\t\t\t\t\t   ").concat(a,"(st + vec3(1.0)));\n\t\tvec3 r = vec3(").concat(a,"(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t  ").concat(a,"(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t  ").concat(a,"(st * q));\n\t\tfloat f = ").concat(a,"(st + r);\n\t\tvec4 color;\n\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\t\t"),o=new rG("vec3 ".concat(a,"customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) \n\t\t\t{\n                // Prevent scale of zero \n\t\t\t\tscale = max(abs(scale), 0.001);\n\n\t\t\t\tvec3 st = position / size;\n\t\t\t\tst /= scale;\n\n\t\t\t\t").concat(s,"\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}"),[cq.simplexFast,cq.simplexFractal,cq.simplexAshima,cq.fbm,cq.perlin,cq.voronoi]),l=e.include(o),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};hq.numOctaves=5;var uq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=n,this.contourThreshold=r,this.outlineThreshold=a,this.contourFrequency=s,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=p,this.pixelRatio=f,this.alpha=m,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){let i="g".concat(this.uuid.toString().replace(/-/g,""));if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION","".concat(i,"_offset")),this.firstTime){let t=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),r=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(t,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(r,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode("\n                vID = randomColor.r;\n                vec2 ".concat(i,"_offset = vec2(0.0);\n                if (").concat(r,") {\n                    vec4 ").concat(i,"_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ").concat(i,"_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    ").concat(i,"_offset = normalize(").concat(i,"_clipNormal.xy) / ").concat(n," * (").concat(t," / 2.0) * ").concat(i,"_clipPosition.w * 2.0 * ").concat(a,";\n                    ").concat(i,"_clipPosition.xy += ").concat(i,"_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ").concat(i,"_clipPosition;\n                }\n            "))}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(uq.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},dq=uq;dq.Nodes=function(){let e=new rG("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    vec2 texelSize = (vec2(1.0) / resolution);\n    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);\n\tuvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);\n\tuvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);\n\tuvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);\n\tuvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);\n\tuvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);\n\tuvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);\n  \tvec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new rG("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                //resultAlpha = 1.0;\n                //result = vec3(sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha * mask;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\t \n                 return result;\n             }",[e])}}();var pq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=i,this.blending=n,this.offset=r,this.colorA=a,this.colorB=s,this.frequency=o,this.size=l,this.variation=c,this.smoothness=h,this.zigzag=u,this.rotation=d,this.vertical=p,this.horizontal=f,this.sides=m,this.isMask=v,this.alpha=g,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){let i;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float"),this.style.value){case 0:default:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave"}let n="g".concat(this.uuid.toString().replace(/-/g,"")),r=new rG("float hashwithoutsine12(vec2 p)\n\t\t\t\t{\n\t\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * .1031);\n\t\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t\t}"),a=new rG("vec2 rotate_uv(in vec2 uv, float a, bool repeat) \n\t\t\t\t{\n\t\t\t\t\tconst float mid = 0.5;\n\t\t\t\t\tfloat radians = a * (PI / 180.0);\n\t\t\t\t\tvec2 rotated = vec2(\n\t\t\t\t\t\tcos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,\n\t\t\t\t\t\tcos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid\n\t\t\t\t\t);\n\t\t\t\t\treturn repeat ? fract(rotated): rotated;\n\t\t\t\t}"),s="";if(4===this.projection.value){let e=2===this.style.value?"".concat(i,"(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),t=2===this.style.value?"".concat(i,"(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),n=2===this.style.value?"".concat(i,"(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)");s="\n\t\t\t\tvec3 p = position;\n\t\t\t\tfloat factor = 0.0125;\n\t\t\t\tvec2 uv0 = fract(p.xy * factor);\n\t\t\t\tvec2 uv1 = fract(p.zy * factor);\n\t\t\t\tvec2 uv2 = fract(p.xz * factor);\n\t\t\t\t\n\t\t\t\tuv0 = rotate_uv(uv0 + offset, rotation, true);\n\t\t\t\tuv1 = rotate_uv(uv1 + offset, rotation, true);\n\t\t\t\tuv2 = rotate_uv(uv2 + offset, rotation, true);\n\t\n\t\t\t\tfloat d0 = ".concat(e,";\n\t\t\t\tfloat d1 = ").concat(t,";\n\t\t\t\tfloat d2 = ").concat(n,";\n\t\t\t\t\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\t\t\t\td0 *= weights.z;\n\t\t\t\td1 *= weights.x;\n\t\t\t\td2 *= weights.y;\n\t\t\t\tfloat draw = d0 + d1 + d2;\n\t\n\t\t\t\tvec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;\n\t\t\t\t")}else{let e=2===this.style.value?"".concat(i,"(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)"):"".concat(i,"(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)"),t="";0===this.axis.value?t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.z);\n\t\t\t\t\tfloat phi = acos(p.x / radius);":1===this.axis.value?t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.x, p.z);\n\t\t\t\t\tfloat phi = acos(p.y / radius);":(this.axis.value,t="float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.x);\n\t\t\t\t\tfloat phi = acos(p.z / radius);");let n="";switch(this.projection.value){case 0:n="custom_uv = vUv.st;";break;case 1:case 3:default:break;case 2:n="\n\t\t\t\t\t\t\tvec3 p = position;\n\t\t\t\t\t\t\t".concat(t,"\n\t\t\t\t\t\t\tcustom_uv = vec2(theta, phi);\n\t\t\t\t\t\t\tcustom_uv /= PI;\n\t\t\t\t\t\t\t")}s="\n\t\t\t\tvec2 custom_uv;\n\t\t\t\t".concat(n,"\n\t\n\t\t\t\tcustom_uv += offset;\n\t\t\t\tcustom_uv = fract(custom_uv);\n\t\t\t\tcustom_uv = rotate_uv(custom_uv, rotation, true);\n\t\n\t\t\t\tfloat draw = ").concat(e,";\n\t\t\t\t")}let o=new rG("vec3 ".concat(n,"_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\t\tconst float TWO_PI = PI * 2.0;\n\t\t\t\t\tfloat smoothness_remapped = pow(smoothness, 5.0);\t\n\n\t\t\t\t\t").concat(s,"\n\n\t\t\t\t\t// Construct final output color\n\t\t\t\t\tvec4 color = mix(colorA, colorB, draw);\n\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t// Apply cuts\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(vertical.x, custom_uv.y) * \n\t\t\t\t\t\tstep(custom_uv.y, vertical.y);\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(horizontal.x, abs(custom_uv.x)) * \n\t\t\t\t\t\tstep(abs(custom_uv.x), horizontal.y);\n\n\t\t\t\t\t// Accumulate alpha \n\t\t\t\t\tfloat lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t\t}"),[a,r,pq.DrawFunctions.circle,pq.DrawFunctions.ring,pq.DrawFunctions.polygon,pq.DrawFunctions.cross,pq.DrawFunctions.diamond,pq.DrawFunctions.checkerboard,pq.DrawFunctions.line,pq.DrawFunctions.wave]),l=e.include(o),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},fq=pq;fq.DrawFunctions=function(){let e=new rG("float hashwithoutsine12(vec2 p) {\n\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * 0.1031);\n\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t}"),t=new rG("vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {\n                // Create tiles in UV-space\n                uv *= frequency;\n\n                // Integer coords\n                vec2 i = floor(uv);\n\n                // Offset every other row based on zigzag param, then compute fractional coords\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = fract(uv);\n\n\t\t\t\t// Rotate the tile itself:\n\t\t\t\t// const float mid = 0.5;\n\t\t\t\t// f = vec2(\n\t\t\t\t// \tcos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,\n\t\t\t\t// \tcos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid\n\t\t\t\t// );\n\t\t\t\t// f = fract(f);\n\n                f = f * 2.0 - 1.0;\n\n\t\t\t\t// Recompute integer coords after shifting - then, random value per tile \n\t\t\t\ti = floor(uv);\n\t\t\t\tfloat rand = (hashwithoutsine12(i) * 5.0 + 1.0);\n\t\t\t\tfloat jitter = mix(1.0, rand, variation);\n\t\t\t\tf *= jitter;\n\n                return f;\n            }",[e]);return{tileAndCenter:t,circle:new rG("float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(\n                    -smoothness, \n                     smoothness, \n                     length(f) - size\n                );\n            }",[t]),ring:new rG("float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\n\t\t\t\tfloat d = length(f);\n                const float inner_width = 0.5;\n\n                float outer = smoothstep(-smoothness, smoothness, d - size);\n                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);\n\t\t\t\treturn outer + (1.0 - inner);   \n            }",[t]),polygon:new rG("float sdf_ngon(in vec2 p, in float r, in int n) {\n                float an = (PI * 2.0) / float(n);\n                float he = r * tan(0.5 * an);\n                \n                // Rotate to first sector\n                p = -p.yx; \n                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);\n                vec2  cs = vec2(cos(bn), sin(bn));\n                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;\n            \n                // Side of polygon\n                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);\n            }\n            \n            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));\n            }",[t]),cross:new rG("float sdf_cross(in vec2 p, in vec2 b, float r ) {\n                p = abs(p); \n\t\t\t\tp = (p.y > p.x) ? p.yx : p.xy;\n                vec2  q = p - b;\n                float k = max(q.y, q.x);\n                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n                return sign(k) * length(max(w, 0.0)) + r;\n            }\n            \n            // Avoid namespace conflicts \n            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));\n            }",[t]),diamond:new rG("float ndot(vec2 a, vec2 b) { \n                return a.x*b.x - a.y*b.y; \n            }\n            \n            float sdf_diamond(in vec2 p, in vec2 b) {\n                p = abs(p);\n                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);\n                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));\n                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);\n            }\n\n            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\t            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));\n            }",[t]),checkerboard:new rG("float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                uv *= frequency;\n                vec2 i = floor(uv);\n\n                float offset = mod(i.y, 2.0);\n\n                uv.x += offset + zigzag * offset;\n                float x = floor(uv.x);\n                \n                return mod(x, 2.0);\n            }"),line:new rG("float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);\n\t\t\t\t\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat row = floor(uv * frequency).y;\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(row));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\ts - smoothness, \n\t\t\t\t\ts + smoothness, \n\t\t\t\t\tabs(f.y)\n\t\t\t\t);\n            }",[t]),wave:new rG("// Uses bisection \n            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {\n                // Convert all data to a primitive cosine wave\n                p = c * (p - vec2(d, a));\n                \n                const float TWO_PI = PI * 2.0;\n\n                // Reduce to principal half cycle\n                p.x = mod(p.x, TWO_PI); \n                if (p.x > PI) {\n                    p.x = TWO_PI - p.x;\n                }\n            \n                // Find zero of derivative (minimize distance)\n                float xa = 0.0;\n                float xb = TWO_PI;\n\n                // 24 bit precision\n                for (int i = 0; i < 24; i++) {\n                    float x = 0.5 * (xa + xb);\n                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));\n                    if (y < 0.0) xa = x; \n                    else xb = x;\n                }\n                float x = 0.5 * (xa + xb);\n                \n                // Compute distance    \n                vec2 q = vec2(x, b * c * cos(x));\n                return length(p - q) / c;\n            }\n\n            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                float repeat = frequency.x;\n                uv *= repeat;\n                vec2 i = floor(uv);\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = vec2(uv.x, fract(uv.y));\n\n                // Generalized cosine: y(x) = a + b * cos(cx + d)\n                const float amplitude = 0.125;\n                float wave_frequency = frequency.y * 0.1;\n                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);\n\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(i.y));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);\n            }")}}();var mq=class extends ZH{constructor(e,t,i,n,r,a,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=n,this.noiseScale=r,this.offset=a,this.isMask=o,this.alpha=s,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(mq.Nodes.rainbow),n=[];return n.push(this.filmThickness.build(e,"f")),n.push(this.movement.build(e,"f")),n.push(this.wavelengths.build(e,"v3")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.offset.build(e,"v3")),n.push(this.isMask.build(e,"b")),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},gq=mq;gq.Nodes=function(){let e=new rG("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n\t\t\t\tfloat f = 0.0;\n\t\t\t\t\n\t\t\t\tif (noiseStrength != 0.0) {\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\tfloat noise = simplexFast(1.6 * st + vec3(1.8, 1.5, 1.9) * simplexFast(st) + vec3(1.7, 9.2, 1.0));\n\t\t\t\t\tf = noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tvec3 waves = wavelengths * vec3(1.0, 0.8, 0.6) + 1.0;\n\t\t\t\tfloat angle = dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal));\n\n\t\t\t\tmediump vec3 color = cos((((filmThickness + f) / waves) * angle) + movement);\n\t\t\t\treturn .5 + .5 * color;\n\t\t\t }",[cq.simplexFast]);return{rainbow:new rG("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tmediump vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n\t\t\t\tfloat rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n\n\t\t\t\tfloat lalpha = alpha * rainbowContribution * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn res;\n\t\t\t }",[e])}}();var vq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=n,this.isWorldSpace=r,this.noiseStrength=a,this.noiseScale=s,this.shadowColor=o,this.offset=l,this.alpha=c,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(vq.Nodes.toon),n=[];return n.push(this.positioning.build(e,"i")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.source.build(e,"v3")),n.push(this.isWorldSpace.build(e,"b")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.shadowColor.build(e,"v4")),n.push(this.offset.build(e,"v3")),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},yq=vq;yq.Nodes=function(){let e=new rG("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new rG("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),i=new rG("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),n=new rG("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),r=new rG('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[n]);return{toon:new rG('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotLightCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplexFast(st),\n\t\t\t\t\t// \tsimplexFast(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplexFast(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[cq.simplexFast,e,i,r])}}();var bq={textureBicubic:new rG("float w0( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n        }\n    \n        float w1( float a ) {\n            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n        }\n    \n        float w2( float a ){\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n        }\n    \n        float w3( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * a * a );\n        }\n    \n        // g0 and g1 are the two amplitude functions\n        float g0( float a ) {\n            return w0( a ) + w1( a );\n        }\n    \n        float g1( float a ) {\n            return w2( a ) + w3( a );\n        }\n    \n        // h0 and h1 are the two offset functions\n        float h0( float a ) {\n            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n        }\n    \n        float h1( float a ) {\n            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n        }\n    \n        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n            uv = uv * texelSize.zw + 0.5;\n    \n            vec2 iuv = floor( uv );\n            vec2 fuv = fract( uv );\n    \n            float g0x = g0( fuv.x );\n            float g1x = g1( fuv.x );\n            float h0x = h0( fuv.x );\n            float h1x = h1( fuv.x );\n            float h0y = h0( fuv.y );\n            float h1y = h1( fuv.y );\n    \n            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n    \n            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + \n                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n        }\n\n        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n            vec2 fLodSizeInv = 1.0 / fLodSize;\n            vec2 cLodSizeInv = 1.0 / cLodSize;\n            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n            return mix( fSample, cSample, fract( lod ) );\n        }")};var xq=class extends ZH{constructor(e,t,i,n,r,a,s,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=n,this.transmissionSamplerMap=r,this.transmissionDepthMap=a,this.aspectRatio=s,this.alpha=o,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Eq.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(xq.Nodes.transmission),n=[];return n.push(this.thickness.build(e,"f")),n.push(this.ior.build(e,"f")),n.push(this.roughness.build(e,"f")),n.push(this.transmissionSamplerSize.build(e,"v2")),n.push(this.transmissionSamplerMap.getTexture(e,"t")),n.push(this.transmissionDepthMap.getTexture(e,"t")),n.push(this.aspectRatio.build(e,"v2")),n.push("normal"),n.push(this.mask?"luminance(".concat(this.mask.flow(e,"v3").result,")"):"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},wq=xq;wq.Nodes=function(){let e=new rG("vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n\t\t\t\t// Special case for blur == 0.0\n\t\t\t\tif (lod == 0.0) {\n\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\treturn texture2DLodEXT( sp, U, 0.0).rgb;\n\t\t\t\t\t#else\n\t\t\t\t\treturn textureLod( sp, U, 0.0).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec2 texelSize = vec2(1.0) / resolution;\n                vec2 halton = haltonSequence[frameIndex];\n                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n                float temporalAngle  = temporalOffset * PI2;\n\t\t\t\tvec3 res = vec3(0.0);\n                vec2 uv = vec2(0.0);\n                vec2 offset = vec2(0.0);\n                vec2 vogelSample = vec2(0.0);\n                for (int i = 0; i < NUM_SAMPLES; i++) {\n                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;\n                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20\n                    uv = U + offset;\n                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    res += textureLod(sp, uv, lod).rgb;\n                }\n                return res / float(NUM_SAMPLES);\n            }"),t=new rG("vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        \n\t\t\t\t// Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t        // The thickness is specified in local space\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),i=new rG("float applyIorToRoughness( float roughness, float ior ) {\n\t\t\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t\t\t}"),n=new rG('vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\t\t\t// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see\n\t\t\t\t// also the code in convertTransmission.ts, which runs during export\n\t\t\t\t#ifdef IS_THREEJS_EXPORT\n\t\t\t\t\tfloat lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);\n\t\t\t\t\treturn textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;\n\t\t\t\t#else\n\t\t\t\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t\t\t\tfloat lod = applyIorToRoughness(roughness, ior);\n\t\t\t\t\treturn blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t\t\t\t#endif\n\t\t\t}',[bq.textureBicubic,i,e]),r=new rG("vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\n\t\t\t\tvec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n\t\t\t\tvec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n\t\t\t\tunrefractedCoords += 1.0;\n\t\t\t\tunrefractedCoords /= 2.0;\n\n\t\t\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\t\t\treturn getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    \t\t}",[n,t]);return{transmission:new rG("vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                \n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn transmission;\n            }",[r])}}();var Aq=(e=>(e.NOISE="noise",e.MAP="map",e))(Aq||{}),Sq=class extends ZH{constructor(e,t,i,n,r,a,s,o,l,c,h){super("v3"),this.displacementTypeIndex=new jG(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,"map"===Object.values(Aq)[this.displacementTypeIndex.value]&&(this.mat=new HG(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=c,this.noiseFunctionIndex=h,this.voronoiStyle=n,this.smoothness=r,this.seed=a,this.highCut=s,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,n=[];switch(n.push("displaced_position"),n.push("displaced_normal"),Object.values(Aq)[this.displacementTypeIndex.value]){case"map":i=e.include(Sq.Nodes.map),n.push(this.movementOrTexture.getTexture(e,"t")),n.push("uv"),n.push(this.cropOrOffset.build(e,"f")),this.mat&&n.push(this.mat.build(e,"mat3"));break;case"noise":{let t=["simplexPrecise","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseFunctionIndex.value],r=new rG("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),a="voronoi"==t?"\n\t\t\t\t\tfloat v = ".concat(t,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);\n\t\t\t\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\t\t\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\t\t\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t\t\t\treturn p + n * v * intensity;\n\t\t\t\t\t"):"\n\t\t\t\t\treturn p + n * ".concat(t,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t"),s=new rG("vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {\n\t\t\t\t\t\t\t".concat(a,"\n\t\t\t\t\t\t}"),[cq.simplexPrecise,cq.simplexFractal,cq.simplexAshima,cq.fbm,cq.perlin,cq.voronoi]),o=new rG("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[s,r]);i=e.include(o),n.push(this.scale.build(e,"f")),n.push(this.cropOrOffset.build(e,"v3")),n.push(this.movementOrTexture.build(e,"f")),n.push(this.voronoiStyle.build(e,"i")),n.push(this.smoothness.build(e,"f")),n.push(this.seed.build(e,"f")),n.push(this.highCut.build(e,"f")),n.push(this.lowCut.build(e,"f")),n.push(this.quality.build(e,"i"));break}}return n.push(this.intensity.build(e,"f")),n.push("displaced_normal"),e.format(i+"("+n.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},_q=Sq;_q.Nodes=function(){let e=new rG("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new rG("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new rG("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var Eq={normalRenderTarget:new mG,normalRenderTargetDepth:new mG,transmissionRenderTarget:new mG,aspectRatio:new $H,transmissionSize:new $H(2048,2048),transmissionRenderTargetDepth:new mG,aoRenderTarget:new mG,aoEnabled:new FG,pixelRatioNode:new gG(1),resolution:new $H,penumbraSize:new NG(5,.5),frameIndex:new jG(0),transmissionLod:new jG(2),taaEnabled:new FG(!0)};for(let ane of Object.values(Eq))ane.isRenderGlobal=!0;var Cq,Mq={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.10.99/build/ui.wasm"},Tq=class extends XH{constructor(){super("basic"),this.nodeType="Basic",this.color=new BG(TL),this.shadingAlpha=new gG(1),this.shadingBlend=new jG(0),this.previousModelViewMatrix=new GG,this.previouseProjectionMatrix=new GG}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({resolution:Eq.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(qb.merge([ux.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];i&&n.push(i.code,i.result?"displaced_position = "+i.result+";":""),n.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join("\n")}else{void 0===this.color&&(this.color=new BG(TL)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),n=this.alpha?this.alpha.flow(e,"f"):void 0,r=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==n,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let s=["#include <normal_fragment_begin>",i.code];n&&s.push(n.code,"#ifdef ALPHATEST"," if ( "+n.result+" <= ALPHATEST ) discard;","#endif"),a?s.push(a.code,"vec3 outgoingLight = ".concat(i.result,";"),"vec3 finalColor = spe_blend(outgoingLight, ".concat(a.result,", 1.0, SPE_BLENDING_NORMAL);")):s.push("vec3 finalColor = ".concat(i.result,";"));let o="1.0";this.mask&&(this.mask.analyze(e),o="luminance(".concat(this.mask.flow(e,"v3").result,")")),n?s.push("gl_FragColor = vec4( finalColor, accumAlpha * ".concat(n.result," * ").concat(o," );")):s.push("gl_FragColor = vec4("+i.result+", 1.0 );"),r&&s.push("gl_FragColor.a *= ".concat(r.result,";")),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join("\n")}return t}},Pq=class extends XH{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new BG(TL),this.emissive=new BG(0),this.emissiveIntensity=new gG(1),this.previousModelViewMatrix=new GG,this.previouseProjectionMatrix=new GG,this.shadingAlpha=new gG(1),this.shadingBlend=new jG(0),this.occlusion=new FG(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({resolution:Eq.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(qb.merge([ux.fog,ux.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];i&&n.push(i.code,i.result?"displaced_position = "+i.result+";":""),n.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t"),n.push("\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join("\n")}else{e.mergeUniform({penumbraSize:Eq.penumbraSize}),e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({aoMap:Eq.aoRenderTarget}),e.mergeUniform({aoEnabled:Eq.aoEnabled}),void 0===this.color&&(this.color=new BG(TL)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.emissive.flow(e,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];u.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&u.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),n&&u.push(n.code,"reflectedLight.directDiffuse += "+n.result+" * "+r.result+";"),u.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d="luminance(".concat(this.mask.flow(e,"v3").result,")")),u.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(s.result," * ").concat(d," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(s.result," * ").concat(d,", ").concat(o.result," );\n\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),l&&u.push(l.code,"outgoingLight = spe_blend(outgoingLight, ".concat(l.result,", 1.0, SPE_BLENDING_NORMAL);")),c?u.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(c.result," );")):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&u.push("gl_FragColor.a *= ".concat(h.result,";")),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}},Dq={dHdxy:new rG("vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {\n\n            // Gradient of UVs w.r.t. X coordinate (in screen-space)\n            vec2 dSTdx = dFdx(bumpMapUv);\n\n            // Gradient of UVs w.r.t. Y coordinate (in screen-space)\n            vec2 dSTdy = dFdy(bumpMapUv);\n            \n            // Forward differencing\n            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);\n            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;\n            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;\n            \n            return vec2( dBx, dBy );\n        }"),perturbNormalArb:new rG("vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n            vec3 vSigmaX = dFdx( surf_pos.xyz );\n            vec3 vSigmaY = dFdy( surf_pos.xyz );\n            vec3 vN = surf_norm; // normalized\n            \n            vN = normalize(vN);\n\n            vec3 R1 = cross( vSigmaY, vN );\n            vec3 R2 = cross( vN, vSigmaX );\n\n            R1 = normalize(R1);\n            R2 = normalize(R2);\n    \n            float fDet = dot( vSigmaX, R1 ) * faceDirection;\n    \n            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n            return normalize( abs( fDet ) * vN - vGrad );\n        }")},Oq=class extends XH{constructor(){super("phong"),this.nodeType="Phong",this.color=new BG(TL),this.specular=new BG(1118481),this.shininess=new gG(30),this.previousModelViewMatrix=new GG,this.previouseProjectionMatrix=new GG,this.shadingAlpha=new gG(1),this.shadingBlend=new jG(0),this.occlusion=new FG(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({resolution:Eq.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(qb.merge([ux.fog,ux.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];i&&n.push(i.code,i.result?"displaced_position = "+i.result+";":""),n.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join("\n")}else{e.mergeUniform({penumbraSize:Eq.penumbraSize}),e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({aoMap:Eq.aoRenderTarget}),e.mergeUniform({aoEnabled:Eq.aoEnabled}),void 0===this.color&&(this.color=new BG(TL)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];if(this.bumpMap){e.include(Dq.dHdxy),e.include(Dq.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),i=this.bumpMap.flow(e,"v3"),n=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",r="";r=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(t.result,", uv0, ").concat(n,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(t.result,", uv1, ").concat(n,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(t.result,", uv2, ").concat(n,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(t.result,", bumpMapCachedUv, ").concat(n,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),u.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(i.result,";\n\t\t\t\t\t").concat(r,"\n\t\t\t\t\t"))}u.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",r.code,"\tvec3 specular = "+r.result+";",a.code,"\tfloat shininess = max( 0.0001, "+a.result+" );","\tfloat specularStrength = 1.0;"),c&&u.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d="luminance(".concat(this.mask.flow(e,"v3").result,")")),u.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(s.result," * ").concat(d," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(s.result," * ").concat(d,", ").concat(o.result," );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),l&&u.push(l.code,"outgoingLight = spe_blend(outgoingLight, ".concat(l.result,", 1.0, SPE_BLENDING_NORMAL);")),c?u.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(c.result,");")):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&u.push("gl_FragColor.a *= ".concat(h.result,";")),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}},kq=class extends XH{constructor(){super("standard"),this.nodeType="Standard",this.color=new BG(TL),this.roughness=new gG(.3),this.metalness=new gG(0),this.reflectivity=new gG(.5),this.previousModelViewMatrix=new GG,this.previouseProjectionMatrix=new GG,this.shadingAlpha=new gG(1),this.shadingBlend=new jG(0),this.occlusion=new FG(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({resolution:Eq.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(qb.merge([ux.fog,ux.lights])),ux.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];i&&n.push(i.code,i.result?"displaced_position = "+i.result+";":""),n.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join("\n")}else{e.mergeUniform({penumbraSize:Eq.penumbraSize}),e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({aoMap:Eq.aoRenderTarget}),e.mergeUniform({aoEnabled:Eq.aoEnabled});let i={gamma:!0};void 0===this.color&&(this.color=new BG(TL)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:i}),a=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==h,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let p=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Dq.dHdxy),e.include(Dq.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),i=this.bumpMap.flow(e,"v3"),n=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",r="";r=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(t.result,", uv0, ").concat(n,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(t.result,", uv1, ").concat(n,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(t.result,", uv2, ").concat(n,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(t.result,", bumpMapCachedUv, ").concat(n,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),p.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(i.result,";\n\t\t\t\t\t").concat(r,"\n\t\t\t\t\t"))}if(p.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"\tfloat metalnessFactor = "+s.result+";"),this.roughnessMap){let t=this.roughnessMap.texture.flow(e,"t"),i=this.roughnessMap.flow(e,"v3"),n="";n=4===this.roughnessMap.projection.value?"\n\t\t\t\t\tfloat roughnessChange = 1.0;\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tfloat r0 = luminance(texture(").concat(t.result,", uv0).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r1 = luminance(texture(").concat(t.result,", uv1).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r2 = luminance(texture(").concat(t.result,", uv2).rgb) * roughnessScale;\n\n\t\t\t\t\t\troughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);\n\t\t\t\t\t}\n\t\t\t\t\tfloat roughnessFactor = roughnessChange * ").concat(a.result,";\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 roughnessMapCachedUv = g".concat(this.roughnessMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\n\t\t\t\t\tvec4 vals = texture(").concat(t.result,",  roughnessMapCachedUv);\n\t\t\t\t\tfloat roughnessFactor = luminance(vals.rgb) * ").concat(a.result,";\n\t\t\t\t\t"),p.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(i.result,";\n\n\t\t\t\t\tconst float roughnessScale = 1.0;\n\n\t\t\t\t\t").concat(n,"\n\t\t\t\t"))}else p.push(a.code,"\tfloat roughnessFactor = "+a.result+";");h&&p.push(h.code,"#ifdef ALPHATEST","\tif ( "+h.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?p.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(e),f="luminance(".concat(this.mask.flow(e,"v3").result,")")),p.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(o.result," * ").concat(f," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(o.result," * ").concat(f,", ").concat(l.result," );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t")),c&&p.push(c.code,"outgoingLight = spe_blend(outgoingLight, ".concat(c.result,", 1.0, SPE_BLENDING_NORMAL);")),h?p.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(h.result," );")):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&p.push("gl_FragColor.a *= ".concat(u.result,";")),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join("\n")}return t}},Iq=class extends XH{constructor(){super("toon"),this.nodeType="Toon",this.color=new BG(TL),this.specular=new BG(1118481),this.shininess=new gG(30),this.previousModelViewMatrix=new GG,this.previouseProjectionMatrix=new GG,this.shadingAlpha=new gG(1),this.shadingBlend=new jG(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({resolution:Eq.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(qb.merge([ux.fog,ux.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];i&&n.push(i.code,i.result?"displaced_position = "+i.result+";":""),n.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),n.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=n.join("\n")}else{e.mergeUniform({penumbraSize:Eq.penumbraSize}),e.mergeUniform({frameIndex:Eq.frameIndex}),e.mergeUniform({aoMap:Eq.aoRenderTarget}),e.mergeUniform({aoEnabled:Eq.aoEnabled}),void 0===this.color&&(this.color=new BG(TL)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),r=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];if(this.bumpMap){e.include(Dq.dHdxy),e.include(Dq.perturbNormalArb);let t=this.bumpMap.texture.flow(e,"t"),i=this.bumpMap.flow(e,"v3"),n=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",r="";r=4===this.bumpMap.projection.value?"\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g").concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(").concat(t.result,", uv0, ").concat(n,");\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(").concat(t.result,", uv1, ").concat(n,");\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(").concat(t.result,", uv2, ").concat(n,");\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t"):"\n\t\t\t\t\tvec2 bumpMapCachedUv = g".concat(this.bumpMap.uuid.toString().replace(/-/g,""),"_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(").concat(t.result,", bumpMapCachedUv, ").concat(n,");\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t"),h.push("// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t".concat(i.result,";\n\t\t\t\t\t").concat(r,"\n\t\t\t\t\t"))}h.push(i.code,"\tvec3 diffuseColor = "+i.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"\tvec3 specular = "+n.result+";",r.code,"\tfloat shininess = max( 0.0001, "+r.result+" );","\tfloat specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let u="1.0";this.mask&&(this.mask.analyze(e),u="luminance(".concat(this.mask.flow(e,"v3").result,")")),h.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(a.result," * ").concat(u," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(a.result," * ").concat(u,", ").concat(s.result," );\n\t\t\t\t}\n\t\t\t\t")),o&&h.push(o.code,"outgoingLight = spe_blend(outgoingLight, ".concat(o.result,", 1.0, SPE_BLENDING_NORMAL);")),l?h.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(l.result," );")):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&h.push("gl_FragColor.a *= ".concat(c.result,";")),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}},Rq=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return null===(t=this.cache.get(e))||void 0===t?void 0:t.data}load(e){let t=Date.now(),i=this.cache.get(e);return void 0===i?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},Lq=class extends Rq{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}};var zq=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,0===this.refCount&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount,0}},Bq=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data),0}load(e){let t=this.cache.get(e);return void 0===t&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},jq=class extends zq{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo="video"===e.type,this.isBuffer=!0===e.isWebGLRenderTarget,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let e of Object.values(this._cache))for(let t of Object.values(e))for(let e of Object.values(t))e&&(e.image=this.img,e.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,"string"!=typeof e){var i=new FileReader;let t;i.readAsDataURL(new Blob([e],{type:"video/mp4"})),await new Promise(e=>{i.onloadend=i=>{var n;t=null===(n=i.target)||void 0===n?void 0:n.result,e(null)}}),this.img.src=t}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=function(e){return"string"==typeof e?e:(Cq||(Cq=new Lq),Cq.load(e))}(e),this.img.onload=t,await new Promise(e=>{this.img.onload=()=>{t(),e(null)}})}getTexture(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1008,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1006,r=null===(t=this._cache[e])||void 0===t||null===(t=t[i])||void 0===t?void 0:t[n];if(r)return r;{let t;return t=this.isBuffer?this.img.texture:this.isVideo?new dS(this.img,void 0,e,e):new Gv(this.img,void 0,e,e,n,i),this.loaded&&(t.needsUpdate=!0),void 0===this._cache[e]&&(this._cache[e]={}),void 0===this._cache[e][i]&&(this._cache[e][i]={}),this._cache[e][i][n]=t,t}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let i of Object.values(t))for(let t of Object.values(i))t&&(t.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[i,n]of Object.entries(t))for(let[t,r]of Object.entries(n))null!==r&&void 0!==r&&r.dispose(),void 0!==this._cache[e]&&void 0!==this._cache[e][i]&&(this._cache[e][i][t]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Fq=class extends jq{};function Nq(e,t){var i=function(e){if(!Vq[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i="06/25/2014, 00:00:00"===t||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===t;Vq[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Vq[e]}(t);return i.formatToParts?function(e,t){try{for(var i=e.formatToParts(t),n=[],r=0;r<i.length;r++){var a=Uq[i[r].type];a>=0&&(n[a]=parseInt(i[r].value,10))}return n}catch(s){if(s instanceof RangeError)return[NaN];throw s}}(i,e):function(e,t){var i=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[n[3],n[1],n[2],n[4],n[5],n[6]]}(i,e)}var Uq={year:0,month:1,day:2,hour:3,minute:4,second:5};var Vq={};function Wq(e,t,i,n,r,a,s){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(n,r,a,s),o}var Hq=36e5,Gq={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function qq(e,t,i){var n,r,a;if(!e||(n=Gq.timezoneZ.exec(e)))return 0;if(n=Gq.timezoneHH.exec(e))return Xq(a=parseInt(n[1],10))?-a*Hq:NaN;if(n=Gq.timezoneHHMM.exec(e)){a=parseInt(n[1],10);var s=parseInt(n[2],10);return Xq(a,s)?(r=Math.abs(a)*Hq+6e4*s,a>0?-r:r):NaN}if(function(e){if(Qq[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Qq[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());var o=i?t:function(e){return Wq(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),l=Yq(o,e),c=i?l:function(e,t,i){var n=e.getTime(),r=n-t,a=Yq(new Date(r),i);if(t===a)return t;r-=a-t;var s=Yq(new Date(r),i);return a===s?a:Math.max(a,s)}(t,l,e);return-c}return NaN}function Yq(e,t){var i=Nq(e,t),n=Wq(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),r=e.getTime(),a=r%1e3;return n-(r-=a>=0?a:1e3+a)}function Xq(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var Qq={};var Kq=Nm(Hm(),1),Zq=Nm(Gm(),1),Jq=36e5,$q=6e4,eY={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function tY(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var i=t||{},n=null==i.additionalDigits?2:(0,Kq.default)(i.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r=function(e){var t,i={},n=eY.dateTimePattern.exec(e);if(n?(i.date=n[1],t=n[3]):(n=eY.datePattern.exec(e),n?(i.date=n[1],t=n[2]):(i.date=null,t=e)),t){var r=eY.timeZone.exec(t);r?(i.time=t.replace(r[1],""),i.timeZone=r[1].trim()):i.time=t}return i}(e),a=function(e,t){var i,n=eY.YYY[t],r=eY.YYYYY[t];if(i=eY.YYYY.exec(e)||r.exec(e),i){var a=i[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(i=eY.YY.exec(e)||n.exec(e),i){var s=i[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}(r.date,n),s=a.year,o=function(e,t){if(null===t)return null;var i,n,r,a;if(0===e.length)return n=new Date(0),n.setUTCFullYear(t),n;if(i=eY.MM.exec(e),i)return n=new Date(0),r=parseInt(i[1],10)-1,sY(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(i=eY.DDD.exec(e),i){n=new Date(0);var s=parseInt(i[1],10);return function(e,t){if(t<1)return!1;var i=aY(e);return!(i&&t>366||!i&&t>365)}(t,s)?(n.setUTCFullYear(t,0,s),n):new Date(NaN)}if(i=eY.MMDD.exec(e),i){n=new Date(0),r=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return sY(t,r,o)?(n.setUTCFullYear(t,r,o),n):new Date(NaN)}if(i=eY.Www.exec(e),i)return a=parseInt(i[1],10)-1,oY(t,a)?iY(t,a):new Date(NaN);if(i=eY.WwwD.exec(e),i){a=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return oY(t,a,l)?iY(t,a,l):new Date(NaN)}return null}(a.restDateString,s);if(isNaN(o))return new Date(NaN);if(o){var l,c=o.getTime(),h=0;if(r.time&&(h=function(e){var t,i,n;if(t=eY.HH.exec(e),t)return i=parseFloat(t[1].replace(",",".")),lY(i)?i%24*Jq:NaN;if(t=eY.HHMM.exec(e),t)return i=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),lY(i,n)?i%24*Jq+n*$q:NaN;if(t=eY.HHMMSS.exec(e),t){i=parseInt(t[1],10),n=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return lY(i,n,r)?i%24*Jq+n*$q+1e3*r:NaN}return null}(r.time),isNaN(h)))return new Date(NaN);if(r.timeZone||i.timeZone){if(l=qq(r.timeZone||i.timeZone,new Date(c+h)),isNaN(l))return new Date(NaN)}else l=(0,Zq.default)(new Date(c+h)),l=(0,Zq.default)(new Date(c+h+l));return new Date(c+h+l)}return new Date(NaN)}function iY(e,t,i){t=t||0,i=i||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var r=7*t+i+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}var nY=[31,28,31,30,31,30,31,31,30,31,30,31],rY=[31,29,31,30,31,30,31,31,30,31,30,31];function aY(e){return e%400===0||e%4===0&&e%100!==0}function sY(e,t,i){if(t<0||t>11)return!1;if(null!=i){if(i<1)return!1;var n=aY(e);if(n&&i>rY[t]||!n&&i>nY[t])return!1}return!0}function oY(e,t,i){return!(t<0||t>52||null!=i&&(i<0||i>6))}function lY(e,t,i){return!(null!=e&&(e<0||e>=25)||null!=t&&(t<0||t>=60)||null!=i&&(i<0||i>=60))}function cY(e,t){return t.color(e)}function hY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0,i=t.format,n=e.getSeconds(),r=e;t&&null!==t.timeZone&&(r=function(e,t,i){var n=tY(e,i),r=qq(t,n,!0),a=new Date(n.getTime()-r),s=new Date(0);return s.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),s.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),s}(new Date,t.timeZone));let a,s=r.getHours(),o=r.getMinutes();"12ampm"===t.format12h24h&&(a=s>=12?"PM":"AM");let l,c,h=s;switch("24"!==t.format12h24h&&(h=s%12,0===h&&(h=12)),i){case"HH:mm:ss":l=[h,o,n];break;case"HH:mm":l=[h,o];break;case"HH":l=[h],a=void 0;break;case"mm":l=[o],a=void 0;break;case"ss":l=[n],a=void 0;break;case"year":c=r.getFullYear();break;case"month":c=r.getMonth()+1;break;case"dayOfYear":c=Math.floor((r.getTime()-new Date(r.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=r.getDate();break;case"secondOfDay":c=60*s*60+60*o+n;break;default:console.error("Unknown time format",i),c=0}return void 0!==l?{textValue:l,suffix:a}:c}function uY(e,t){switch(e.type){case"fresnel":return function(e,t){let{bias:i,scale:n,intensity:r,factor:a,color:s}=e;return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{color:cY(s,t),bias:i,scale:n,intensity:r,factor:a})}(e,t);case"gradient":return function(e,t){let{gradientType:i,smooth:n,colors:r,steps:a,angle:s,offset:o,morph:l}=e;return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{gradientType:i,smooth:n,colors:r.map(e=>new qv(e[0],e[1],e[2],e[3])),num:r.length,steps:a,offset:new Av(...o),morph:new Av(...l),angle:s})}(e,t);case"depth":return function(e,t){let{gradientType:i,near:n,far:r,isVector:a,isWorldSpace:s,origin:o,direction:l,colors:c,steps:h,smooth:u}=e;return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{gradientType:i,near:n,far:r,isVector:a,isWorldSpace:s,origin:new Zv(...o),direction:l?new Zv(...l):new Zv(1,0,0),colors:c.map(e=>void 0!==e?new qv(e[0],e[1],e[2],e[3]):new qv(0,0,0,0)),steps:h.slice(0,c.length),smooth:u})}(e,t);case"normal":return function(e,t){let{cnormal:i}=e;return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{cnormal:new Zv(i[0],i[1],i[2])})}(e,t);case"noise":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{scale:e.scale,move:e.move,fA:new Av(...e.fA),fB:new Av(...e.fB),size:new Zv(...e.size),distortion:new Av(...e.distortion),colorA:cY(e.colorA,t),colorB:cY(e.colorB,t),colorC:cY(e.colorC,t),colorD:cY(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality})}(e,t);case"rainbow":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{filmThickness:e.filmThickness,movement:e.movement,wavelengths:new Zv(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new Zv(...e.offset)})}(e,t);case"toon":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{positioning:e.positioning,colors:e.colors.map(e=>new qv(e[0],e[1],e[2],e[3])),num:e.colors.length,steps:e.steps,source:new Zv(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:cY(e.shadowColor,t),offset:new Zv(...e.offset)})}(e,t);case"outline":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{outlineColor:cY(e.outlineColor,t),contourColor:cY(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new Zv(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation})}(e,t);case"transmission":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{thickness:e.thickness,ior:e.ior,roughness:e.roughness})}(e,t);case"color":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{color:cY(e.color,t)})}(e,t);case"pattern":return function(e,t){return(0,ye.A)((0,ye.A)({},dY(e,t)),{},{style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new Av(...e.offset),colorA:cY(e.colorA,t),colorB:cY(e.colorB,t),frequency:new Av(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new Av(...e.vertical),horizontal:new Av(...e.horizontal),sides:e.sides})}(e,t)}}function dY(e,t){var i;let{alpha:n,mode:r,isMask:a}=e,s="string"==typeof n?(null!==(i=Number(t.getVariable(n)))&&void 0!==i?i:100)/100:n;return(0,ye.A)((0,ye.A)({},function(e){return{type:e.type}}(e)),{},{alpha:s,mode:r,isMask:a})}var pY=class extends Zj{},fY={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},mY={depth:["colors"]};function gY(e,t,i){if("isMask"===t)return!0;let n=fY[e.type],r=mY[e.type];if(void 0!==r){let n=e.color;if(r.includes(t)){var a;let e=null===(a=n[t])||void 0===a||null===(a=a.value)||void 0===a?void 0:a.length;if(void 0!==e&&e!==i.length)return!0}}return void 0!==n&&n.includes(t)}function vY(e,t){if(Array.isArray(t)){if(!Array.isArray(e)||e.length!==t.length)return!1;for(let[i,n]of t.entries()){let t=e[i];if("string"==typeof n||"number"==typeof n&&"string"==typeof t)return!0}return!1}let i="string"==typeof e,n="string"==typeof t;return i!==n||i&&n}function yY(e,t,i){var n,r;let a=i.uniforms["f".concat(i.id,"_texture")];if(!a)return!1;let s=!1,o=e;if("image"in o){let e=o.image,i=t.image(e),n=a;n.image instanceof Fq||n.image.deref(),n.image=i}if("video"in o){let e=o.video,i=t.video(e),n=a;n.image instanceof Fq||n.image.deref(),n.image=i}if("wrapping"in o){a.wrap=o.wrapping}if("minFilter"in o){a.minFilter=o.minFilter}if("magFilter"in o){a.magFilter=o.magFilter}if("rotation"in o&&i.uniforms["f".concat(i.id,"_rotation")])return i.uniforms["f".concat(i.id,"_rotation")].value=(null!==(n=xY(null!==(r=o.rotation)&&void 0!==r?r:0,t))&&void 0!==n?n:0)*wv.DEG2RAD,s;if("repeat"in o||"offset"in o||"rotation"in o){let e="mat",n=i.uniforms["f".concat(i.id,"_").concat(e)];if("repeat"in o){let e=o.repeat;vY(i.data.texture.repeat,e)&&(s=!0),n.repeat=SY(e,t).map((t,i)=>"string"==typeof e[i]?1/t:t)}if("offset"in o){let e=o.offset;vY(i.data.texture.offset,e)&&(s=!0),n.offset=SY(e,t).map((t,i)=>"string"==typeof e[i]?-t:t)}if("rotation"in o){var l,c;let e=i.data.texture.rotation,r=null!==(l=o.rotation)&&void 0!==l?l:0;(void 0===e||vY(e,r))&&(s=!0),n.rotation=null!==(c=xY(r,t))&&void 0!==c?c:0}n.updateMatrix()}return s}var bY=(e,t,i)=>{var n,r;return null!==(n=Math.max(0,Math.min(1,Number(null!==(r=t.getVariable("number"==typeof e?100*e:e,i))&&void 0!==r?r:100)/100)))&&void 0!==n?n:1},xY=(e,t,i)=>"number"==typeof e?e:t.getVariable(e,i),wY=(e,t)=>{var i,n,r;return e||(e=new Zv),e.x=null!==(i=xY(e.x,t))&&void 0!==i?i:0,e.y=null!==(n=xY(e.y,t))&&void 0!==n?n:0,e.z=null!==(r=xY(e.z,t))&&void 0!==r?r:0,e},AY=(e,t)=>{var i,n;return e||(e=new Av),e.x=null!==(i=xY(e.x,t))&&void 0!==i?i:0,e.y=null!==(n=xY(e.y,t))&&void 0!==n?n:0,e},SY=(e,t)=>{let i=e.map(e=>{var i;return null!==(i=xY(e,t))&&void 0!==i?i:0});return[i[0],i[1]]},_Y=class{constructor(e,t,i,n,r){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let a in n)this.uniforms["f".concat(this.id,"_").concat(a)]=n[a];for(let a in i)PY(a,this,i,r)}get type(){return this.data.type}static create(e,t,i,n){if("light"===i.type)return MY.createLightLayer(e,t,i,n);if("texture"===i.type||"video"===i.type){var r,a,s,o,l,c,h,u,d,p;let f="texture"===i.type?null!==(r=n.uiBuffer(i.texture.image))&&void 0!==r?r:n.image(i.texture.image):n.video(i.texture.video),m=new WG(f,i.texture.wrapping,null!==(a=i.texture.minFilter)&&void 0!==a?a:1008,null!==(s=i.texture.magFilter)&&void 0!==s?s:1006),g=new VG(f),v=new YG(SY(i.texture.repeat,n),SY(i.texture.offset,n),xY(null!==(o=i.texture.rotation)&&void 0!==o?o:0,n)),y=new gG(i.crop?1:0),b=new jG(null!==(l=i.projection)&&void 0!==l?l:0),x=new jG(null!==(c=["x","y","z"].indexOf(i.axis))&&void 0!==c?c:0),w=new jG(null!==(h=i.side)&&void 0!==h?h:0),A=new $H(i.size?new Av(...SY(i.size,n)):new Av(100,100)),S=new gG(null!==(u=i.blending)&&void 0!==u?u:0),_=new gG(bY(i.alpha,n)),E=new jG(null!==(d=i.mode)&&void 0!==d?d:0),C=new FG(null!==(p=i.isMask)&&void 0!==p&&p),M=new tq(m,g,y,b,x,w,A,S,v,_,E,C),T=new fG(M.calpha,"f");return new EY(e,t,i,{texture:m,textureSize:g,crop:y,projection:b,axis:x,side:w,size:A,blending:S,mat:v,alpha:_,mode:E,isMask:C},M,E,T,C,n)}if("matcap"===i.type){var f,m,g,v,y,b;let r=n.image(i.texture.image),a=new WG(r,i.texture.wrapping,null!==(f=i.texture.minFilter)&&void 0!==f?f:1008,null!==(m=i.texture.magFilter)&&void 0!==m?m:1006),s=new gG(bY(i.alpha,n)),o=new jG(null!==(g=i.mode)&&void 0!==g?g:0),l=new FG(null!==(v=i.isMask)&&void 0!==v&&v),c=new gG((null!==(y=xY(null!==(b=i.texture.rotation)&&void 0!==b?b:0,n))&&void 0!==y?y:0)*wv.DEG2RAD),h=new lq(a,s,o,l,c),u=new fG(h.calpha,"f");return new EY(e,t,i,{texture:a,alpha:s,mode:o,isMask:l,rotation:c},h,o,u,l,n)}if("displace"===i.type){if("noise"===i.displacementType){var x,w,A,S,_,E,C,M,T,P;let r=new eG(new Zv(...i.offset.map(e=>{var t;return null!==(t=xY(e,n))&&void 0!==t?t:0}))),a=new gG(null!==(x=xY(i.scale,n))&&void 0!==x?x:10),s=new gG(null!==(w=xY(i.intensity,n))&&void 0!==w?w:8),o=new gG(null!==(A=xY(i.movement,n))&&void 0!==A?A:1),l=new jG(null!==(S=i.noiseType)&&void 0!==S?S:0),c=new jG(null!==(_=i.voronoiStyle)&&void 0!==_?_:0),h=new gG(null!==(E=xY(i.smoothness,n))&&void 0!==E?E:.5),u=new gG(null!==(C=xY(i.seed,n))&&void 0!==C?C:0),d=new gG(null!==(M=xY(i.highCut,n))&&void 0!==M?M:1),p=new gG(null!==(T=xY(i.lowCut,n))&&void 0!==T?T:0),f=new jG(null!==(P=xY(i.quality,n))&&void 0!==P?P:1),m=new _q(s,o,r,c,h,u,d,p,f,a,l);return new CY(e,t,i,{offset:r,scale:a,intensity:s,movement:o,noiseType:l,voronoiStyle:c,smoothness:h,seed:u,highCut:d,lowCut:p,quality:f},m,n)}throw new Error}return function(e,t,i,n){let r=uY(i,n);return function(e,t,i,n,r){switch(e.type){case"color":{var a;let s=new BG(null!==(a=n.color)&&void 0!==a?a:TL),o=TY(n),l=new ZG(s,o.alpha),c=new fG(l.calpha,"f");return new EY(t,i,e,(0,ye.A)({color:s},o),l,o.mode,c,o.isMask,r)}case"fresnel":{var s,o,l,c,h;let a=new BG(null!==(s=n.color)&&void 0!==s?s:16777215),u=new gG(null!==(o=xY(n.bias,r))&&void 0!==o?o:.1),d=new gG(null!==(l=xY(n.scale,r))&&void 0!==l?l:1),p=new gG(null!==(c=xY(n.intensity,r))&&void 0!==c?c:2),f=new gG(null!==(h=xY(n.factor,r))&&void 0!==h?h:1),m=TY(n),g=new rq(a,u,d,p,f,m.alpha,m.mode,m.isMask),v=new fG(g.calpha,"f");return new EY(t,i,e,(0,ye.A)({color:a,bias:u,scale:d,intensity:p,factor:f},m),g,m.mode,v,m.isMask,r)}case"rainbow":{var u,d,p,f;let a=new gG(null!==(u=xY(n.filmThickness,r))&&void 0!==u?u:30),s=new gG(null!==(d=xY(n.movement,r))&&void 0!==d?d:0),o=new eG(wY(n.wavelengths,r)),l=new gG(null!==(p=xY(n.noiseStrength,r))&&void 0!==p?p:0),c=new gG(null!==(f=xY(n.noiseScale,r))&&void 0!==f?f:1),h=new eG(wY(n.offset,r)),m=TY(n),g=new gq(a,s,o,l,c,h,m.alpha,m.isMask),v=new fG(g.calpha,"f");return new EY(t,i,e,(0,ye.A)({filmThickness:a,movement:s,wavelengths:o,noiseStrength:l,noiseScale:c,offset:h},m),g,m.mode,v,m.isMask,r)}case"transmission":{var m,g,v;let a=new gG(xY(null!==(m=n.thickness)&&void 0!==m?m:10,r)),s=new gG(xY(null!==(g=n.ior)&&void 0!==g?g:1.5,r)),o=new gG(xY(null!==(v=n.roughness)&&void 0!==v?v:.5,r)),l=Eq.transmissionSize,c=Eq.transmissionRenderTarget,h=Eq.transmissionRenderTargetDepth,u=window.innerWidth,d=window.innerHeight,p=u>=d?new $H(d/u,1):new $H(1,u/d),f=TY(n),y=new wq(a,s,o,l,c,h,p,f.alpha),b=new fG(y.calpha,"f");return new EY(t,i,e,(0,ye.A)({thickness:a,ior:s,roughness:o,aspectRatio:p},f),y,f.mode,b,f.isMask,r)}case"toon":{var y,b,x,w,A,S;let a,s,o=new jG(null!==(y=n.positioning)&&void 0!==y?y:0);n.colors?a=new XG(n.colors.length,n.colors):(a=new XG(10,new qv(0,0,0,1)),a.value[1]=new qv(1,1,1,1)),n.steps?s=new NG(n.steps.length,n.steps):(s=new NG(10,1),s.value[0]=0);let l=new eG(wY(null!==(b=n.source)&&void 0!==b?b:new Zv(0,0,0),r)),c=new FG(null===(x=n.isWorldSpace)||void 0===x||x),h=new gG(xY(null!==(w=n.noiseStrength)&&void 0!==w?w:0,r)),u=new gG(xY(null!==(A=n.noiseScale)&&void 0!==A?A:1,r)),d=new tG(n.shadowColor),p=new eG(wY(null!==(S=n.offset)&&void 0!==S?S:new Zv(0,0,0),r)),f=TY(n),m=new yq(o,a,s,l,c,h,u,d,p,f.alpha),g=new fG(m.calpha,"f");return new EY(t,i,e,(0,ye.A)({positioning:o,colors:a,steps:s,source:l,isWorldSpace:c,noiseStrength:h,noiseScale:u,shadowColor:d,offset:p},f),m,f.mode,g,f.isMask,r)}case"outline":{var _,E,C,M,T,P,D,O,k,I,R;let a=new BG(null!==(_=n.outlineColor)&&void 0!==_?_:16777215),s=new BG(null!==(E=n.contourColor)&&void 0!==E?E:16777215),o=new gG(xY(null!==(C=n.outlineWidth)&&void 0!==C?C:.1,r)),l=new gG(xY(null!==(M=n.contourWidth)&&void 0!==M?M:.1,r)),c=new gG(xY(null!==(T=n.outlineThreshold)&&void 0!==T?T:.1,r)),h=new gG(xY(null!==(P=n.contourThreshold)&&void 0!==P?P:.1,r)),u=new gG(xY(null!==(D=n.outlineSmoothing)&&void 0!==D?D:.1,r)),d=new gG(xY(null!==(O=n.contourFrequency)&&void 0!==O?O:.1,r)),p=new eG(wY(null!==(k=n.contourDirection)&&void 0!==k?k:new Zv(0,1,0),r)),f=new FG(null!==(I=n.positionalLines)&&void 0!==I&&I),m=new FG(null===(R=n.compensation)||void 0===R||R),g=Eq.normalRenderTarget,v=Eq.normalRenderTargetDepth,y=Eq.pixelRatioNode,b=Eq.resolution,x=TY(n),w=new dq(a,s,o,l,c,h,u,d,p,f,m,b,g,v,y,x.alpha),A=new fG(w.calpha,"f");return new EY(t,i,e,(0,ye.A)({outlineColor:a,contourColor:s,outlineWidth:o,contourWidth:l,outlineThreshold:c,contourThreshold:h,outlineSmoothing:u,contourFrequency:d,contourDirection:p,positionalLines:f,compensation:m},x),w,x.mode,A,x.isMask,r)}case"depth":{var L,z,B,j,F,N;let a,s,o=new jG(null!==(L=n.gradientType)&&void 0!==L?L:0),l=new FG(null!==(z=n.smooth)&&void 0!==z&&z),c=new gG(null!==(B=xY(n.near,r))&&void 0!==B?B:50),h=new gG(null!==(j=xY(n.far,r))&&void 0!==j?j:200),u=new gG(null!==(F=n.isVector)&&void 0!==F?F:1),d=new gG(null!==(N=n.isWorldSpace)&&void 0!==N?N:0),p=new eG(wY(n.origin,r)),f=new eG(wY(n.direction,r));n.colors?a=new XG(n.colors.length,n.colors):(a=new XG(2,new qv(0,0,0,1)),a.value[1]=new qv(1,1,1,1)),n.steps?s=new NG(n.steps.length,n.steps):(s=new NG(2,1),s.value[0]=0);let m=TY(n),g=new nq(o,l,c,h,u,d,p,f,a,s,m.alpha,m.isMask),v=new fG(g.calpha,"f");return new EY(t,i,e,(0,ye.A)({gradientType:o,smooth:l,near:c,far:h,isVector:u,isWorldSpace:d,origin:p,direction:f,colors:a,steps:s},m),g,m.mode,v,m.isMask,r)}case"noise":{var U,V,W,H,G,q,Y,X,Q,K,Z,J,$;let a=new gG(null!==(U=xY(n.scale,r))&&void 0!==U?U:1),s=new eG(wY(null!==(V=n.size)&&void 0!==V?V:new Zv(100,100,100),r)),o=new gG(null!==(W=xY(n.move,r))&&void 0!==W?W:1),l=new $H(AY(null!==(H=n.fA)&&void 0!==H?H:new Av(1.7,9.2),r)),c=new $H(AY(null!==(G=n.fB)&&void 0!==G?G:new Av(8.3,2.8),r)),h=new $H(AY(null!==(q=n.distortion)&&void 0!==q?q:new Av(1,1),r)),u=new tG(n.colorA),d=new tG(n.colorB),p=new tG(n.colorC),f=new tG(n.colorD),m=new jG(null!==(Y=n.noiseType)&&void 0!==Y?Y:0),g=new jG(null!==(X=n.voronoiStyle)&&void 0!==X?X:0),v=new gG(null!==(Q=xY(n.highCut,r))&&void 0!==Q?Q:1),y=new gG(null!==(K=xY(n.lowCut,r))&&void 0!==K?K:0),b=new gG(null!==(Z=xY(n.smoothness,r))&&void 0!==Z?Z:.5),x=new gG(null!==(J=xY(n.seed,r))&&void 0!==J?J:.5),w=new jG(null!==($=n.quality)&&void 0!==$?$:1),A=TY(n),S=new hq(a,s,o,l,c,h,u,d,p,f,A.alpha,m,A.isMask,g,v,y,b,x,w),_=new fG(S.calpha,"f");return new EY(t,i,e,(0,ye.A)((0,ye.A)({scale:a,size:s,move:o,fA:l,fB:c,distortion:h,colorA:u,colorB:d,colorC:p,colorD:f,noiseType:m},A),{},{voronoiStyle:g,highCut:v,lowCut:y,smoothness:b,seed:x,quality:w}),S,A.mode,_,A.isMask,r)}case"normal":{var ee;let a=new eG(null!==(ee=n.cnormal)&&void 0!==ee?ee:new Zv(1,1,1)),s=TY(n),o=new $G(a,s.alpha),l=new fG(o.calpha,"f");return new EY(t,i,e,(0,ye.A)({cnormal:a},s),o,s.mode,l,s.isMask,r)}case"gradient":{var te,ie,ne,re,ae;let a,s,o=new jG(null!==(te=n.gradientType)&&void 0!==te?te:0),l=new FG(null!==(ie=n.smooth)&&void 0!==ie&&ie);n.colors?a=new XG(n.colors.length,n.colors):(a=new XG(10,new qv(0,0,0,1)),a.value[1]=new qv(1,1,1,1)),n.steps?s=new NG(n.steps.length,n.steps):(s=new NG(10,1),s.value[0]=0);let c=new $H(AY(null!==(ne=n.offset)&&void 0!==ne?ne:new Av(0,0),r)),h=new $H(AY(null!==(re=n.morph)&&void 0!==re?re:new Av(0,0),r)),u=new gG(xY(null!==(ae=n.angle)&&void 0!==ae?ae:0,r)),d=TY(n),p=new sq(o,l,a,s,c,h,u,d.alpha,d.isMask),f=new fG(p.calpha,"f");return new EY(t,i,e,(0,ye.A)({gradientType:o,smooth:l,colors:a,steps:s,offset:c,morph:h,angle:u},d),p,d.mode,f,d.isMask,r)}case"pattern":{var se,oe,le,ce,he,ue,de,pe,fe,me,ge,ve,be;let a=new jG(null!==(se=n.style)&&void 0!==se?se:0),s=new jG(null!==(oe=n.projection)&&void 0!==oe?oe:0),o=new jG(null!==(le=["x","y","z"].indexOf(n.axis))&&void 0!==le?le:0),l=new gG(xY(null!==(ce=n.blending)&&void 0!==ce?ce:0,r)),c=new $H(AY(n.offset,r)),h=new tG(n.colorA),u=new tG(n.colorB),d=new $H(AY(null!==(he=n.frequency)&&void 0!==he?he:new Av(10,10),r)),p=new gG(xY(null!==(ue=n.size)&&void 0!==ue?ue:.5,r)),f=new gG(xY(null!==(de=n.variation)&&void 0!==de?de:0,r)),m=new gG(xY(null!==(pe=n.smoothness)&&void 0!==pe?pe:.5,r)),g=new gG(xY(null!==(fe=n.zigzag)&&void 0!==fe?fe:0,r)),v=new gG(xY(null!==(me=n.rotation)&&void 0!==me?me:0,r)),y=new $H(AY(null!==(ge=n.vertical)&&void 0!==ge?ge:new Av(0,1),r)),b=new $H(AY(null!==(ve=n.horizontal)&&void 0!==ve?ve:new Av(0,1),r)),x=new jG(null!==(be=n.sides)&&void 0!==be?be:6),w=TY(n),A=new fq(a,s,o,l,c,h,u,d,p,f,m,g,v,y,b,x,w.alpha,w.isMask),S=new fG(A.calpha,"f");return new EY(t,i,e,(0,ye.A)({style:a,projection:s,axis:o,blending:l,offset:c,colorA:h,colorB:u,frequency:d,size:p,variation:f,smoothness:m,zigzag:g,rotation:v,vertical:y,horizontal:b,sides:x},w),A,w.mode,S,w.isMask,r)}default:{let a=new BG(1,0,0,1),s=TY(n),o=new ZG(a,s.alpha),l=new fG(o.calpha,"f");return new EY(t,i,e,(0,ye.A)({color:a},s),o,s.mode,l,s.isMask,r)}}}(i,e,t,r,n)}(e,t,i,n)}updateByOp(e,t,i){let n=e,r=!1;if(void 0===n.path[0]){for(let e of Object.keys(n.props))try{let i=this.data[e],n=t[e];if(Array.isArray(i)&&Array.isArray(n)){for(let[e,t]of n.entries()){let n=i[e];if("string"==typeof t||"number"==typeof t&&"string"==typeof n){r=!0;break}}if(r)break}else if("string"==typeof n&&"number"==typeof i||"number"==typeof n&&"string"==typeof i||"string"==typeof n&&"string"==typeof i&&n!==i){r=!0;break}}catch(a){console.error(a)}if(0===n.type)return"type"in n.props||"category"in n.props||"visible"in n.props||"noiseType"in n.props?(i.scene.markNeedsUpdateRendererDirty(),!0):function(e,t,i,n){let r=!1;for(let[a,s]of Object.entries(e)){if("bumpMap"===a||"roughnessMap"===a){r=!0;continue}if(!a||void 0===s)continue;if(PY(a,i,n,t)){"visible"===a&&"light"===i.type&&(r=!0);continue}i.visible=n.visible;let e=i.uniforms["f".concat(i.id,"_").concat(a)];if(e&&!(e instanceof UG))switch(r=r||gY(i,a,s),e.constructor){case BG:if("string"==typeof s){let i=t.getColor(s);i&&(e.value=i);break}{let t=s;e.value instanceof pY?e.value=new Zj(t.r,t.g,t.b,t.a):e.setRGBA(t);break}case tG:if("string"==typeof s){let i=t.getColor(s);i&&(e.value=i);break}{let t=s;e.value instanceof pY?e.value=new Zj(t.r,t.g,t.b,t.a):e.value.setRGBA(t.r,t.g,t.b,t.a);break}case $H:{let t=s;e.value.setX(t[0]),e.value.setY(t[1]);break}case eG:{let t=s;e.value.setX(t[0]),e.value.setY(t[1]),e.value.setZ(t[2]);break}case mG:yY(s,t,i);break;case XG:e.value=s.map(e=>new qv(...e));break;default:e.value=s}}return r}(n.props,i.shared,this,t)||r}else if("texture"===n.path[0])return!("texture"in t)&&!("video"in t)||(yY(n.props,i.shared,this)||r);return r}dispose(){if(function(e){let t=e instanceof _Y?e.type:e;return"texture"===t||"video"===t||"displace_map"===t||"matcap"===t}(this)){let e=this.uniforms["f".concat(this.id,"_texture")];if(!e)return!1;let t=e;t.image instanceof Fq||t.image.deref()}}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey("f".concat(this.id,"_").concat(e))}setValue(e,t){let i="f".concat(this.id,"_").concat(e);this.hasValueByKey(i)&&void 0!==t&&(this.uniforms[i].value=t)}getNode(e){let t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log("Layer.getName: error ".concat(e))}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},EY=class extends _Y{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,l),this.params=n,this.color=r,this.mode=a,this.alpha=s,this.isMask=o}},CY=class extends _Y{constructor(e,t,i,n,r,a){super(e,t,i,n,a),this.position=r}},MY=class extends _Y{constructor(e,t,i,n,r,a){super(e,t,i,r,a),this.node=n}static createLightLayer(e,t,i,n){let r,a,s=new gG(bY(i.alpha,n)),o=new jG(i.mode),l=new gG(i.bumpMapIntensity),c=new gG(bY(i.alphaOverride,n));if(i.visible)if("lambert"===i.category){var h,u;r=new Pq;let e=new BG(null!==(h=n.color(i.emissive))&&void 0!==h?h:0),t=new FG(null===(u=i.occlusion)||void 0===u||u);a={emissive:e,occlusion:t},r.emissive=e,r.occlusion=t}else if("toon"===i.category){var d,p;r=new Iq;let e=new gG(null!==(d=i.shininess)&&void 0!==d?d:30),t=new BG(null!==(p=n.color(i.specular))&&void 0!==p?p:1118481);a={shininess:e,specular:t},r.shininess=e,r.specular=t}else if("physical"===i.category){var f,m,g,v;r=new kq;let e=new gG(null!==(f=i.roughness)&&void 0!==f?f:.3),t=new gG(null!==(m=i.metalness)&&void 0!==m?m:0),n=new gG(null!==(g=i.reflectivity)&&void 0!==g?g:.5),s=new FG(null===(v=i.occlusion)||void 0===v||v);a={roughness:e,metalness:t,reflectivity:n,occlusion:s},r.roughness=e,r.metalness=t,r.reflectivity=n,r.occlusion=s}else{var y,b,x;r=new Oq;let e=new gG(null!==(y=i.shininess)&&void 0!==y?y:30),t=new BG(void 0!==i.specular&&null!==(b=n.color(i.specular))&&void 0!==b?b:1118481),s=new FG(null===(x=i.occlusion)||void 0===x||x);a={shininess:e,specular:t,occlusion:s},r.shininess=e,r.specular=t,r.occlusion=s}else r=new Tq,a={};return r.alpha=new gG(1),r.shadingAlpha=s,r.shadingBlend=o,r.bumpMapIntensity=l,r.alphaOverride=c,a.alpha=r.shadingAlpha,a.mode=r.shadingBlend,a.bumpMapIntensity=r.bumpMapIntensity,a.alphaOverride=r.alphaOverride,new MY(e,t,i,r,a,n)}get category(){return this.node.category}};function TY(e){var t,i,n;return{alpha:new gG(null!==(t=e.alpha)&&void 0!==t?t:1),mode:new jG(null!==(i=e.mode)&&void 0!==i?i:0),isMask:new FG(null!==(n=e.isMask)&&void 0!==n&&n)}}function PY(e,t,i,n){if("displace"===i.type&&("intensity"===e||"visible"===e)){var r;let e=t.uniforms["f".concat(t.id,"_intensity")];return e?(e.value=(null!==(r=xY(i.intensity,n))&&void 0!==r?r:1)*(i.visible?1:0),e):void 0}if("displace"!==i.type&&("alpha"===e||"visible"===e)){let r=t.uniforms["f".concat(t.id,"_alpha")];if(!r)return;if(r.value=bY(i.alpha,n)*(i.visible?1:0),"outline"===i.type&&"visible"===e){let e=t.uniforms["f".concat(t.id,"_compensation")];e&&(e.value=i.compensation&&i.visible)}return r}}function DY(e,t,i,n,r,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],o=i;for(let l of s)l in o&&(o=o[l]);for(let l of e)l in o&&r.getVariable(o[l],["material",a,"layer",n,...s,String(l)]);for(let l of t)l in o&&o[l].forEach((e,t)=>{r.getVariable(e,["material",a,"layer",n,...s,String(l),0===t?"x":1===t?"y":"z"])})}function OY(e,t){let i=0,n=e.layers.find(e=>"light"===e.data.type);if(n){let e=n.data,i=Number(t.getVariable(e.alphaOverride));if(("string"==typeof e.alphaOverride?i/100:e.alphaOverride)<1)return!0}for(let a of e.layers){if("displace"!==a.data.type&&a.data.isMask)return!0;if("displace"!==a.data.type&&"alpha"in a.data&&"light"!==a.data.type&&"fresnel"!==a.data.type&&"texture"!==a.data.type&&"matcap"!==a.data.type&&"rainbow"!==a.data.type&&"outline"!==a.data.type&&"pattern"!==a.data.type){var r;let e=a.data.visible?a.data.alpha:0;if("string"==typeof e&&(e=Math.max(0,Math.min(1,Number(null!==(r=t.getVariable(e))&&void 0!==r?r:100)/100))),1===e&&"depth"===a.data.type||"gradient"===a.data.type){for(let t of a.data.colors)if(t[3]<1){e=t[3];break}}else if(1===e&&"noise"===a.data.type){let i=t.color(a.data.colorA).a,n=t.color(a.data.colorB).a,r=t.color(a.data.colorC).a,s=t.color(a.data.colorD).a,o=Math.min(i,Math.min(n,Math.min(r,s)));o<1&&(e=o)}i+=(1-i)*e}}return i<1}var kY=class extends Yb{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.shadersPatchedForShapeBlend=!1,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},IY=class extends kY{constructor(e,t,i,n){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=n}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,Object.assign(this.defines,e.defines),Object.assign(this.uniforms,e.uniforms),this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,i,n){return this.root.getFlavor(e,t,i,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},RY=class extends kY{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,XH.startContext(this),this.reset0(e,t),XH.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,i,n){var r;let a=i?6:(e?3:0)+t;if(a+=7*((null!==(r=null===n||void 0===n?void 0:n.resolutionLevel)&&void 0!==r?r:0)-(null!==n&&void 0!==n&&n.useChildrenColors?4:0)),0===a)return this;void 0===this.flavors&&(this.flavors=[]),a-=1;let s=this.flavors[a];return void 0===s&&(s=new IY(e,t,i,this),s.needsJitter=this.needsJitter,this.flavors[a]=s,s.flatShading=e,s.side=t,s.updateAfterBuild(),n&&(s.defines.SHAPEBLEND=n.resolutionLevel,s.defines.SHAPEBLEND_C=n.useChildrenColors?1:0)),s}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e,t;return null!==(e=null===(t=this.lightLayer.getNode("occlusion"))||void 0===t?void 0:t.value)&&void 0!==e&&e}reset(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];XH.startContext(this),(this.data!==e||i)&&this.reset0(e,t),XH.endContext(this)}reset0(e,t){var i,n;this.data=e;let r=null!==(i=e.layers)&&void 0!==i?i:iz.defaultTwoLayerData("phong").layers;try{this.layers=r.map(e=>_Y.create(this.layerIdGen++,e.id,e.data,t.shared))}catch(a){this.layers=[]}this.layers.reverse(),this.name=null!==(n=e.name)&&void 0!==n?n:"Untitled Material",this.onUpdate(t.shared),this.transparent=OY(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,i){if("alphaOverride"===e[0])this.transparent=OY(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if("layer"===e[0]){let n=e[1],r=e[2];if(n&&r){let a=this.layers.find(e=>e.uuid===n);if(null!==a&&void 0!==a&&a.hasValue(r))if("alpha"===r)this.transparent=OY(this.data,i.shared),a.setValue(r,Math.max(0,Math.min(Number(t)/100,1)));else{let n=a.getValue(r),s=e[3],o=e[4];if(n instanceof Gv){let e,r=n[s];return"number"==typeof r?e=Number(t):r.isVector2&&(e=r.toArray(),"x"===o?e[0]=Number(t):"y"===o&&(e[1]=Number(t))),void yY({[s]:e},i.shared,a)}("x"===s||"y"===s||"z"===s)&&n.isVector3||("x"===s||"y"===s)&&n.isVector2?n[s]=Number(t):a.setValue(r,t)}}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(e=>"light"===e.data.type);t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(t=>{"alpha"in t.data&&"string"==typeof t.data.alpha&&e.shared.getVariable(t.data.alpha,["material",this.uuid,"layer",t.id,"alpha"]),"displace"===t.data.type?"noise"===t.data.displacementType?DY(["intensity","scale","movement","smoothness","seed","highCut","lowCut"],["offset"],t.data,t.id,e.shared,this.uuid):DY(["intensity"],[],t.data,t.id,e.shared,this.uuid):"depth"===t.data.type?DY(["near","far"],["origin","direction"],t.data,t.id,e.shared,this.uuid):"fresnel"===t.data.type?DY(["bias","scale","intensity","factor"],[],t.data,t.id,e.shared,this.uuid):"rainbow"===t.data.type?DY(["filmThickness","movement","noiseStrength","noiseScale"],["offset","wavelengths"],t.data,t.id,e.shared,this.uuid):"noise"===t.data.type?DY(["scale","move","seed","highCut","lowCut","smoothness"],["size","distortion","fA","fB"],t.data,t.id,e.shared,this.uuid):"pattern"===t.data.type?DY(["blending","size","variation","smoothness","zigzag","rotation"],["offset","frequency","vertical","horizontal"],t.data,t.id,e.shared,this.uuid):"outline"===t.data.type?DY(["outlineWidth","contourWidth","outlineThreshold","contourThreshold","outlineSmoothing","contourFrequency"],["contourDirection"],t.data,t.id,e.shared,this.uuid):"toon"===t.data.type?DY(["noiseStrength","noiseScale"],["offset","source"],t.data,t.id,e.shared,this.uuid):"transmission"===t.data.type?DY(["roughness","thickness","ior"],[],t.data,t.id,e.shared,this.uuid):"texture"===t.data.type||"video"===t.data.type?(DY([],["size"],t.data,t.id,e.shared,this.uuid),DY(["rotation"],["repeat","offset"],t.data,t.id,e.shared,this.uuid,["texture"])):"gradient"===t.data.type?DY(["angle"],["offset","morph"],t.data,t.id,e.shared,this.uuid):"matcap"===t.data.type&&DY(["rotation"],[],t.data,t.id,e.shared,this.uuid,["texture"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(e=>e instanceof MY),void 0===this.lightLayer&&(this.lightLayer=new MY(0,"",(0,ye.A)((0,ye.A)({},tz.defaultData("light","phong")),{},{visible:!1}),new Tq,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(e=>e instanceof MY);if(!e)return;let t=e.data,i=t.bumpMap,n=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let r=0;r<this.layers.length;++r){let t=this.layers[r];t instanceof EY&&t.color instanceof tq&&(t.uuid===i&&(e.node.bumpMap=t.color),t.uuid===n&&(e.node.roughnessMap=t.color))}}updateByOp(e,t,i){if(XH.startContext(this),void 0!==t?this.data=t:t=this.data,this.transparent=OY(t,i.shared),"layers"===e.path[0]){let n=i.shared,r=e.path[1];if(void 0===r)i.scene.markNeedsUpdateRendererDirty(),this.reset0(t,i);else{0===e.type&&void 0!==e.props.occlusion&&i.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(e=>e.uuid===r);if(a){let s,o=t.layers.data(r);0===e.type&&("alpha"in e.props||"alphaOverride"in e.props)&&(s="alpha"in e.props?(0,ye.A)((0,ye.A)({},e.props),{},{alpha:bY(e.props.alpha,n,["material",this.uuid,"layer",r,"alpha"])}):(0,ye.A)((0,ye.A)({},e.props),{},{alphaOverride:bY(e.props.alphaOverride,n,["material",this.uuid,"alphaOverride"])})),a.updateByOp((0,ye.A)((0,ye.A)((0,ye.A)({},e),s?{props:s}:{}),{},{path:e.path.slice(2)}),o,i)&&this.reset0(t,i)}}}else this.reset0(t,i);XH.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof EY?t.color.mask=void 0:t instanceof MY&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof EY&&t.isMask.value&&t.data.visible&&e>0){let i=e-1,n=this.layers[i];n instanceof MY?n.node.mask=new bG(t.color,t.alpha,bG.MUL):n instanceof EY&&(n.isMask.value||(n.color.mask=new bG(t.color,t.alpha,bG.MUL)))}}}blendColors(){let e=this.layers.findIndex(e=>e instanceof EY),t=this.layers.findIndex(e=>e instanceof MY);if(-1!==e&&e<t){let i=this.layers[e].color;for(let n=e+1;n<t;++n){let e=this.layers[n];if(e instanceof EY){if(e.isMask.value)continue;i=new QG(i,e.color,e.alpha,e.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new fG("outgoingLight","f"),t=this.layers.findIndex(e=>e instanceof MY);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let t=this.layers[i];if(t instanceof EY){if(t.isMask.value)continue;e=new QG(e,t.color,t.alpha,t.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(e=>e instanceof CY);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new bG(t,e[i].position,bG.ADD),t=new bG(t,new gG(.5).setReadonly(!0),bG.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.shapeBlendhack&&this.shapeBlendhack(this),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}clampUniformsForPreview(e,t){let i=(e,t,i)=>Math.min(Math.max(e,t),i);for(let n of this.layers)if("displace"===n.type){let r=i(n.uniforms["f".concat(n.id,"_intensity")].value,e,t);n.uniforms["f".concat(n.id,"_intensity")].value=r}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new zG;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this.shadersPatchedForShapeBlend=!1,this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof EY){let t=e.params.texture;if(t instanceof WG&&!t.image.loaded)return!1}return!0}};Object.defineProperties(kY.prototype,{properties:{get:function(){return this.fragment.properties}}});var LY=class extends RY{constructor(e,t,i){super(e,t,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},zY=new Map;function BY(e){if("string"==typeof e)return e;let t=zY.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},zY.set(e,t)),t.url}var jY,FY,NY,UY=new Promise(e=>{jY=e}),VY=!1;function WY(){if(!VY)return FY||(FY=async function(){await __webpack_require__.e(519).then(__webpack_require__.bind(__webpack_require__,5519)),jY(void 0!==window?window:global),VY=!0}())}function HY(e,t){e.forEach(e=>{"dragDropActions"in e.data?(t.push(...e.data.dragDropActions.drag),t.push(...e.data.dragDropActions.drop)):"inActions"in e.data?(t.push(...e.data.inActions),t.push(...e.data.outActions)):"gameActions"in e.data?(t.push(...e.data.gameActions.idle),t.push(...e.data.gameActions.move),t.push(...e.data.gameActions.jump),t.push(...e.data.gameActions.run)):"breakpoints"in e.data?e.data.breakpoints.forEach(e=>{t.push(...e.data.actions)}):"actions"in e.data&&(t.push(...e.data.actions),e.data.actions.forEach(e=>{"Conditional"===e.data.type&&e.data.ifActions&&(t.push(...e.data.ifActions),t.push(...e.data.elseActions))}))})}function GY(e){let t=!1,i=[];return e.scene.objects.traverse((e,n)=>{if("Page"===n.type&&void 0!==n.uiScene&&n.uiScene.objects.traverse((e,n)=>{if(void 0===n.events||!1===Array.isArray(n.events))return!0;HY(n.events,i),t=t||i.some(e=>"Audio"===e.data.type)}),void 0===n.events||!1===Array.isArray(n.events))return!0;HY(n.events,i),t=t||i.some(e=>"Audio"===e.data.type)}),t}UY.then(e=>NY=e);var qY,YY,XY=class{constructor(e){let t,{src:i,volume:n,delay:r,loop:a}=e;this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)},t="string"==typeof i?{src:i}:{src:BY(i),format:"wav"},this.sound=new NY.Howl(t),this.sound.on("end",this.onEnd),this.src=i,void 0!==n&&(this.volume=n),void 0!==r&&(this.delay=r),void 0!==a&&(this.loop=a)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}pause(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},QY=class{constructor(){this.type="ShapePath",this.color=new Fv,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new kS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var i;return null!==(i=this.currentPath)&&void 0!==i&&i.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){var r;return null!==(r=this.currentPath)&&void 0!==r&&r.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,a){var s;return null!==(s=this.currentPath)&&void 0!==s&&s.bezierCurveTo(e,t,i,n,r,a),this}splineThru(e){var t;return null!==(t=this.currentPath)&&void 0!==t&&t.splineThru(e),this}toShapes(){let e=0,t=1,i=2,n=3,r=4,a=5,s=6,o={loc:e,t:0};function l(t,n,r,a){let s=t.x,l=n.x,h=r.x,u=a.x,d=t.y,p=n.y,f=r.y,m=a.y,g=(u-h)*(d-f)-(m-f)*(s-h),v=(m-f)*(l-s)-(u-h)*(p-d),y=g/v,b=((l-s)*(d-f)-(p-d)*(s-h))/v;if(0===v&&0!==g||y<=0||y>=1||b<0||b>1)return null;if(0===g&&0===v){for(let h=0;h<2;h++){if(c(0===h?r:a,t,n),o.loc===e){let e=0===h?r:a;return{x:e.x,y:e.y,t:o.t}}if(o.loc===i){return{x:+(s+o.t*(l-s)).toPrecision(10),y:+(d+o.t*(p-d)).toPrecision(10),t:o.t}}}return null}for(let i=0;i<2;i++)if(c(0===i?r:a,t,n),o.loc===e){let e=0===i?r:a;return{x:e.x,y:e.y,t:o.t}}return{x:+(s+y*(l-s)).toPrecision(10),y:+(d+y*(p-d)).toPrecision(10),t:y}}function c(l,c,h){let u,d=h.x-c.x,p=h.y-c.y,f=l.x-c.x,m=l.y-c.y,g=d*m-f*p;return l.x===c.x&&l.y===c.y?(o.loc=e,void(o.t=0)):l.x===h.x&&l.y===h.y?(o.loc=t,void(o.t=1)):void(g<-Number.EPSILON?o.loc=n:g>Number.EPSILON?o.loc=r:d*f<0||p*m<0?o.loc=a:Math.sqrt(d*d+p*p)<Math.sqrt(f*f+m*m)?o.loc=s:(u=0!==d?f/d:m/p,o.loc=i,o.t=u))}function h(e,t,i){let n=new Av;t.getCenter(n);let r=[];return i.forEach(t=>{t.boundingBox.containsPoint(n)&&function(e,t){let i=[],n=[];for(let r=1;r<e.length;r++){let a=e[r-1],s=e[r];for(let e=1;e<t.length;e++){let r=l(a,s,t[e-1],t[e]);null!==r&&void 0===i.find(e=>e.t<=r.t+Number.EPSILON&&e.t>=r.t-Number.EPSILON)&&(i.push(r),n.push(new Av(r.x,r.y)))}}return n}(e,t.points).forEach(e=>{r.push({identifier:t.identifier,isCW:t.isCW,point:e})})}),r.sort((e,t)=>e.point.x-t.point.x),r}let u=0,d=999999999,p=-999999999,f=[];this.subPaths.forEach(e=>{let t=e.getPoints(),i=-999999999,n=999999999,r=-999999999,a=999999999;for(let s=0;s<t.length;s++){let e=t[s];e.y>i&&(i=e.y),e.y<n&&(n=e.y),e.x>r&&(r=e.x),e.x<a&&(a=e.x)}p<=r&&(p=r+1),d>=a&&(d=a-1),t.length&&f.push({curves:e.curves,points:t,isCW:h_.isClockWise(t),identifier:u++,boundingBox:new IE(new Av(a,n),new Av(r,i))})});let m=f.map(e=>{var t;return function(e,t,i,n,r){(null==r||""===r)&&(r="nonzero");let a=new Av;e.boundingBox.getCenter(a);let s=h([new Av(i,a.y),new Av(n,a.y)],e.boundingBox,t);s.sort((e,t)=>e.point.x-t.point.x);let o=[],l=[];s.forEach(t=>{t.identifier===e.identifier?o.push(t):l.push(t)});let c=o[0].point.x,u=[],d=0;for(;d<l.length&&l[d].point.x<c;)u.length>0&&u[u.length-1]===l[d].identifier?u.pop():u.push(l[d].identifier),d++;if(u.push(e.identifier),"evenodd"===r){let t=u.length%2===0,i=u[u.length-2];return{identifier:e.identifier,isHole:t,for:i}}if("nonzero"===r){let i=!0,n=null,r=null;for(let e=0;e<u.length;e++){let a=u[e];t[a]&&(i?(r=t[a].isCW,i=!1,n=a):r!==t[a].isCW&&(r=t[a].isCW,i=!0))}return{identifier:e.identifier,isHole:i,for:n}}console.warn('fill-rule: "'+r+'" is currently not implemented.')}(e,f,d,p,null===(t=this.userData)||void 0===t?void 0:t.style.fillRule)}),g=[];return f.forEach(e=>{let t=m[e.identifier];if(t&&!t.isHole){let t=new jS;t.curves=e.curves,m.filter(t=>(null===t||void 0===t?void 0:t.isHole)&&t.for===e.identifier).forEach(e=>{if(e){let i=f[e.identifier],n=new kS;n.curves=i.curves,t.holes.push(n)}}),g.push(t)}}),g}},KY=!1,ZY=new Promise(e=>{qY=e}),JY=!1;function $Y(){if(KY=!0,!JY)return YY||(YY=async function(){let e=await __webpack_require__.e(946).then(__webpack_require__.bind(__webpack_require__,8946));qY(e),JY=!0}())}var eX=new class{async load(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},{load:n}=await ZY;n(e,(e,n)=>{e||!n?i(null!==e&&void 0!==e?e:"Something went wrong"):t(n)})}async parse(e){let{parse:t,Bidi:i}=await ZY;try{let n=t(e),r=new i,a=e=>n.charToGlyphIndex(e.char);return r.registerModifier("glyphIndex",null,a),r.applyFeatures(n,n.defaultRenderOptions.features),{font:n,bidi:r}}catch(n){console.error(n)}}};async function tX(e){let t,i,n=!1;if(e.url?(t=await async function(e){return await(await fetch(e)).arrayBuffer()}(e.url),i=e.url,n=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){if(!KY)return{font:void 0,url:i,intercepted:n,arr:t,bidi:null};{let e=await eX.parse(t);if(e)return{font:e.font,url:i,intercepted:n,arr:t,bidi:e.bidi}}}}function iX(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var nX=class{constructor(e){var t;this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=null!==(t=e.isUserFont)&&void 0!==t&&t,this._loadingPromise=tX(e).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(e){var t;this._isLoaded=!1,this._isUserFont=null!==(t=e.isUserFont)&&void 0!==t&&t,this._loadingPromise=tX(e).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let n=this._bidi;n.getTextGlyphs(t);let r=n.tokenizer.tokens,a=[],s=0,o=i.length===r.length;for(let l=0;l<i.length;l++){let n=i[l].index,c=String.fromCharCode(i[l].unicode),h=r[s];if(iX(n,h)||o)a.push({char:c,index:n,replacements:[h.state.glyphIndex],replacementChars:[h.char]}),s++;else{let i=h.char,r="",o=[h.state.glyphIndex],l=[],u=!1;for(;!u;)s++,r=t.charAt(s),i+=r,o.push(e.charToGlyphIndex(r)),l=e.stringToGlyphs(i),1===l.length&&l[0].index===n&&(u=!0),s>t.length&&(u=!0);a.push({char:c,index:n,replacements:o,replacementChars:Array.from(i)}),s++}}return a}generateShapes(e,t,i){if(!this._isLoaded)return;let n=this.font,r=t.fontSize/this.unitsPerEm,a=t.fontSize*t.lineHeight,s=e.map(e=>this.getTextWidth(e,t)),o="string"==typeof t.width?Number(i.getVariable(t.width)):t.width,l="string"==typeof t.height?Number(i.getVariable(t.height)):t.height,c=this.getCharWidth("\n",t),h=1===t.horizontalAlign?c:0,u=this.getLineInitialOffsetX(s[0],o,t.horizontalAlign,e[0],c),d=this.getLineInitialOffsetY(a,e.length,l,r,t.verticalAlign),p=[],f=e.map(e=>[]),m=e.map(e=>[]);for(let y=0;y<e.length;y++){var g;let l=e[y],v={features:{liga:!0},letterSpacing:t.letterSpacing},b=[];try{b=n.stringToGlyphs(l,v)}catch(M6){console.warn(M6)}u=this.getLineInitialOffsetX(s[y],o,t.horizontalAlign,l,c);let x=[];try{x=this.reverseLigaturesTable(n,l,b)}catch(M6){console.warn(M6)}let w=this.computeSpaceWidthForLine(e,y,t,i),A=0,S=b[0];S&&2===t.horizontalAlign&&void 0!==S.leftSideBearing&&(u-=S.leftSideBearing*r),null!==(g=this.font)&&void 0!==g&&g.forEachGlyph(l,u,d,t.fontSize,v,(e,i,a,s,o)=>{let l=0===e.index?"\n":e.unicode?String.fromCharCode(e.unicode):void 0,c=x[A],u=0;if("\n"===l)u=h;else if(" "===l)u=w;else{let n=this.createPath(e,r,i,a,t);n&&(u=n.offsetX,p.push(n.path))}if(1===c.replacements.length)m[y].push([i,a]),f[y].push(u);else{let e=c.replacements.map(e=>{var t;return(null!==(t=n.glyphs.get(e).advanceWidth)&&void 0!==t?t:0)*r}),t=e.reduce((e,t)=>e+t,0),s=e.map(e=>e/t),o=i;for(let i=0;i<s.length;i++){let e=u*s[i];m[y].push([o,a]),f[y].push(e),o+=e}}A++}),d-=a}let v=[];for(let y=0,b=p.length;y<b;y++)v.push(...p[y].toShapes());return{shapes:v,charWidths:f,lineWidths:s,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:0}get descender(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:0}get familyName(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontFamily)&&void 0!==e?e:""}get subfamilyName(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontSubfamily)&&void 0!==e?e:""}get unitsPerEm(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.unitsPerEm)&&void 0!==e?e:1}getLineInitialOffsetX(e,t,i,n,r){return(3===i||2===i)&&n.indexOf("\n")>=0&&(e-=r),3===i?.5*t-.5*e:2===i?t-e:0}getLineInitialOffsetY(e,t,i,n,r){let a=t*e,s=e-Math.abs(this.ascender-this.descender)*n,o=-this.ascender*n-s/2;return 3===r?-(i-a-o):2===r?-(.5*i-.5*a-o):o}createPath(e,t,i,n,r){var a;let s=e.getPath(i,-n,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");let o=new QY,l=(null!==(a=e.advanceWidth)&&void 0!==a?a:1)*t;if(e)for(let h of s.commands){var c;let e=null===(c=o.currentPath)||void 0===c?void 0:c.currentPoint;if(!e||"Z"===h.type||e.x!==h.x||-e.y!==h.y)switch(h.type){case"M":o.moveTo(h.x,-h.y);break;case"L":o.lineTo(h.x,-h.y);break;case"Q":o.quadraticCurveTo(h.x1,-h.y1,h.x,-h.y);break;case"C":o.bezierCurveTo(h.x1,-h.y1,h.x2,-h.y2,h.x,-h.y)}}return o.subPaths.forEach(e=>{let t=function(e){if(e.length){let t=e[0];if(t instanceof CS)return t.v1;if(t instanceof _S||t instanceof TS)return t.v0}}(e.curves);void 0!==t&&e.currentPoint.distanceTo(t)>0&&e.lineTo(t.x,t.y)}),{offsetX:l,path:o}}getCharWidth(e,t){var i,n;return null!==(i=null===(n=this.font)||void 0===n?void 0:n.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==i?i:0}getTextWidth(e,t){var i,n;return null!==(i=null===(n=this.font)||void 0===n?void 0:n.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==i?i:0}computeSpaceWidthForLine(e,t,i,n){let r=this.getCharWidth(" ",i),a=e[t];if(a){let s=this.countSpaces(a.trimEnd());if(4===i.horizontalAlign&&t<e.length-1&&s){return(("string"==typeof i.width?Number(n.getVariable(i.width)):i.width)-(this.getTextWidth(a,i)-s*r))/s}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};var rX=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,i){let n=this.objects.get(e);return void 0===n?(n=this.createObject(e,t,i),this.objects.set(e,n)):n.isShared=!0,n}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&!0!==i.isShared)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){t===this.objects.get(e)&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},aX=class extends rX{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,i){let n=oH(e,t,this.flatShading,i);return n.computeBoundingSphere(),n}},sX={markNeedsUpdateRendererDirty:()=>{}},oX=1e3,lX=512e3;var cX="https://hooks.spline.design",hX="".concat(cX,"/events?hashFile="),uX=("".concat(cX,"/"),class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=jW(),this.reconnectWaitFor=oX,this._onError=e=>{var t,i,n;null!==(t=this.eventSource)&&void 0!==t&&t.removeEventListener("message",this._onMessage),null!==(i=this.eventSource)&&void 0!==i&&i.removeEventListener("error",this._onError),null!==(n=this.eventSource)&&void 0!==n&&n.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=e=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=oX,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=oX,this._connected=!1},this._onMessage=e=>{let t,i=e.data;try{t=JSON.parse(i)}catch(n){console.error("Error parsing webhook message",n)}if(t){let e=!1;this.userWebhook.parametersSchemas.forEach(i=>{let{data:n}=i;void 0!==t[n.name]&&function(e,t){let i=typeof e;return!!(("string"===t||"number"===t)&&i===t||"boolean"===t&&("true"===e||"false"===e||!0===e||!1===e)||"image"===t&&"string"===i&&e.startsWith("http"))}(t[n.name],n.type)&&(void 0===this.result&&(this.result={}),this.result[n.name]=t[n.name],e=!0)}),e&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(hX+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,i,n;null!==(e=this.eventSource)&&void 0!==e&&e.removeEventListener("message",this._onMessage),null!==(t=this.eventSource)&&void 0!==t&&t.removeEventListener("error",this._onError),null!==(i=this.eventSource)&&void 0!==i&&i.removeEventListener("open",this._onConnected),null!==(n=this.eventSource)&&void 0!==n&&n.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>lX&&(this.reconnectWaitFor=lX),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){if(this.getParametersKeys().includes(e)){var t;if(this.result)return null===(t=this.result)||void 0===t?void 0:t[e];for(let t of this.userWebhook.parametersSchemas)if(t.data.name===e)return Yz.defaultParameterValueByType(t.data.type)}}}),dX=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],pX=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],fX=[],mX=[];for(let ane=1;ane<=8;ane++)for(let e=0;e<dX.length;e++){let t=dX[e];fX.push(t/Math.pow(2,8-ane)),mX.push(pX[e]+ane)}var gX=[32,2e3],vX=fX.filter((e,t)=>fX[t]>gX[0]&&fX[t]<gX[1]),yX=mX.filter((e,t)=>fX[t]>gX[0]&&fX[t]<gX[1]),bX=class{static getFrequencies(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"frequency",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-100,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-30;i||(i=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(i));let s,o,l,c=t/2,h=1/i.length*c;if("music"===n||"voice"===n){let e="voice"===n?vX:fX,t=Array(e.length).fill(r);for(let n=0;n<i.length;n++){let r=n*h,a=i[n];for(let i=e.length-1;i>=0;i--)if(r>e[i]){t[i]=Math.max(t[i],a);break}}s=t,o="voice"===n?vX:fX,l="voice"===n?yX:mX}else s=Array.from(i),o=s.map((e,t)=>h*t),l=o.map(e=>"".concat(e.toFixed(2)," Hz"));let u=s.map(e=>Math.max(0,Math.min((e-r)/(a-r),1)));return{values:new Float32Array(u),frequencies:o,labels:l}}};var xX=class{constructor(e){this.value=0,this.frequencies=new Float32Array(0);let t=new AudioContext;this.source=t.createMediaStreamSource(e),this.analyser=t.createAnalyser(),this.source.connect(this.analyser),this.analyser.fftSize=8192,this.analyser.smoothingTimeConstant=.1}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-30;if(!this.analyser)throw new Error("Not connected, please call .connect() first");return bX.getFrequencies(this.analyser,44100,void 0,"voice",e,t)}update(){let e=this.getFrequencies(),t=e.values.reduce((e,t)=>e+t,0)/e.values.length;this.value=t,this.frequencies=e.values}disconnect(){this.source.disconnect(),this.analyser.disconnect()}},wX=class{constructor(e,t,i){this.data=e,this.id=t,this.shared=i,this.emitter=jW(),this.rafId=0,this.voice=0,this.frequencies=new Float32Array([0]),this.events=[],this.isConnected=!1,this.isToolsAdded=!1,this.tools=[],this.onMessage=e=>{var t;let i=JSON.parse(e.data);if(this.appendEvent(i),"session.created"===i.type&&this.onSessionCreated(),"response.done"===i.type&&null!==(t=i.response)&&void 0!==t&&t.output)for(let n of i.response.output)if("function_call"===n.type)for(let[e,t]of this.tools)n.name===e.name&&(t(JSON.parse(n.arguments)),setTimeout(()=>{this.sendClientEvent({type:"response.create",response:{instructions:"notice the user about what you just did"}})}))},this.onSessionCreated=()=>{this.isToolsAdded||this.registerTools()},this.onOpen=()=>{this.events=[],this.isConnected=!0,this.sendClientEvent({type:"response.create",response:{instructions:"Say hi"}})},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected&&this.analyser){this.analyser.update();let e=this.analyser.value,t=this.analyser.frequencies;this.voice=e,this.frequencies=t,this.emitter.emit("voice",{value:e,frequencies:t})}}}update(e){this.data=e}setColorByName(e,t){let i=this.shared.getColorByName(e);if(i){var n;let{id:e}=i,{r:r,g:a,b:s}=null!==(n=IW.hexStringToRgb(t))&&void 0!==n?n:{r:0,g:0,b:0};this.shared.updateColor(e,{r:r/255,g:a/255,b:s/255})}}async connect(){if(this.isConnected)return;let e=await async function(t){try{return(await(await fetch("https://relayserver.spline.design/session?uuidfile="+t)).json()).token}catch(e){console.error("Token generation error:",e)}}(this.data.integration.hash);this.pc=new RTCPeerConnection,this.audioElement=document.createElement("audio"),this.audioElement.autoplay=!0,this.pc.ontrack=e=>{let t=e.streams[0];this.audioElement.srcObject=t,this.analyser=new xX(t)};let t=await navigator.mediaDevices.getUserMedia({audio:!0});this.pc.addTrack(t.getTracks()[0]),this.dc=this.pc.createDataChannel("oai-events"),this.dc.addEventListener("message",this.onMessage),this.dc.addEventListener("open",this.onOpen);let i=await this.pc.createOffer();await this.pc.setLocalDescription(i);let n={type:"answer",sdp:await(await fetch("https://api.openai.com/v1/realtime?model=".concat("gpt-4o-realtime-preview-2024-12-17"),{method:"POST",body:i.sdp,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/sdp"}})).text()};await this.pc.setRemoteDescription(n),this.animate()}appendEvent(e){this.events=[e,...this.events]}sendClientEvent(e){this.dc?(e.event_id=e.event_id||crypto.randomUUID(),this.dc.send(JSON.stringify(e)),this.appendEvent(e)):console.error("Failed to send message - no data channel available",e)}registerTools(){this.isToolsAdded=!0,this.registerTool({type:"function",name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},e=>{let{color:t}=e;this.setColorByName("Voice Assistant Color",t)});let e=this.shared.getVariablesNames().join(", ");this.registerTool({type:"function",name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the variable that needs to be set. Here's a list of available variables: ".concat(e,". It the variable does not exist, don't call the function and warn the user about it.")},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},e=>{let{name:t,value:i}=e,n=this.shared.getVariableByName(t);if(n){let e,t=this.shared.getVariable(n.id);e="number"==typeof t?parseFloat(i):"boolean"==typeof t?"true"===i.toLowerCase():{textValue:i},this.shared.updateVariable(n.id,e)}});let t=this.shared.getColorNames().join(", ");this.registerTool({type:"function",name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the color asset that needs to be set. Here's a list of available color assets: ".concat(t,". It the color asset does not exist, don't call the function and warn the user about it.")},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},e=>{let{name:t,value:i}=e;this.setColorByName(t,i)});let i=this.shared.scene,n=[];i.traverseEntity(e=>{e.data.events.forEach(e=>{if("AIAssistantTrigger"===e.data.type){let{description:t}=e.data;n.push(t)}})}),this.registerTool({type:"function",name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:"The name of the event that needs to be triggered. Here's a list of available events: ".concat(JSON.stringify(n),".")},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},e=>{let{description:t,direction:i}=e;this.emitter.emit("trigger_event",{description:t,direction:i})}),this.sendClientEvent({type:"session.update",session:{tools:this.tools.map(e=>{let[t]=e;return t})}})}registerTool(e,t){this.tools.push([e,t])}disconnect(){var e,t,i,n,r,a;cancelAnimationFrame(this.rafId),null!==(e=this.analyser)&&void 0!==e&&e.disconnect(),this.voice=0,this.isConnected=!1,this.isToolsAdded=!1,null!==(t=this.dc)&&void 0!==t&&t.removeEventListener("message",this.onMessage),null!==(i=this.dc)&&void 0!==i&&i.removeEventListener("open",this.onOpen),null!==(n=this.dc)&&void 0!==n&&n.close(),null!==(r=this.pc)&&void 0!==r&&r.getSenders().forEach(e=>{e.track&&e.track.stop()}),null!==(a=this.pc)&&void 0!==a&&a.close(),this.pc=void 0}computeAnalysisForListenerEvent(e){if("range"===e.analysis){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((e,t)=>e+t,0)/t.length}return"single"===e.analysis?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function AX(e){return"variable_"+e}var SX=class extends Bq{constructor(e){super(),this.shared=e}create(e){return new jq(e,this.shared)}},_X=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.data=e,this.needsJitter=i,this.enableLocalStorageForPersistentVariables=n,this.geometryCache=new aX(!0),this.geometryCache2=new aX(!1),this.imageHolderCache=new SX(this),this.thisContext={scene:sX,shared:this},this.deletedMaterial=new LY(iz.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Fq(AB.emptyImage,this),this.deletedVideo=new Fq(qL.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.timelineAnimations={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,a]of Object.entries(t.images))this.addImage(r,a);if(t.videos)for(let[r,a]of Object.entries(t.videos))this.addVideo(r,a);if(t.audios)for(let[r,a]of Object.entries(t.audios))this.addAudio(r,a);if(t.particles)for(let[r,a]of Object.entries(t.particles))this.addParticle(r,a);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.data=e,this.resetLib(e.lib);for(let{id:s,data:o}of e.variables)this.addVariableHolder(s,o),t&&this.updateVariableHolder(s,o);for(let[s,o]of Object.entries(null!==(n=e.userAPIs)&&void 0!==n?n:{})){var n;this.addUserAPI(s,o)}for(let[s,o]of Object.entries(null!==(r=e.userWebhooks)&&void 0!==r?r:{})){var r;this.addUserWebhook(s,o)}if(!i){for(let[t,i]of Object.entries(e.images))this.addImage(t,i);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i)}for(let[s,o]of Object.entries(e.colors))this.addColor(s,o);for(let[s,o]of Object.entries(e.materials))this.addMaterial(s,o);for(let[s,o]of Object.entries(e.audios))this.addAudio(s,o);for(let[s,o]of Object.entries(e.particles))this.addParticle(s,o);for(let[s,o]of Object.entries(e.fonts))this.addFont(s,o);for(let[s,o]of Object.entries(null!==(a=e.timelineAnimations)&&void 0!==a?a:{})){var a;this.addAnimation(s,o)}}addMaterial(e,t){if(this.materials[e]){let i=this.materials[e];i.reset(t,this.thisContext),i.dispose()}else{let i=new LY(t,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return null!==(t=this.materials[e])&&void 0!==t?t:this.deletedMaterial}material(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):null==e?(console.error("material is undefined or null"),this.deletedMaterial):new RY(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Fq(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){var t;return null!==(t=this.images[e])&&void 0!==t?t:this.deletedImage}image(e){return"string"==typeof e?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Fq(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Fq(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){var t;return null!==(t=this.videos[e])&&void 0!==t?t:this.deletedVideo}video(e){return"string"==typeof e?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):(this.colors[e]=new pY(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){if(this.colors[e]){var i,n,r,a;this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let s=this.colors[e];return this.colors[e].r=null!==(i=t.r)&&void 0!==i?i:s.r,this.colors[e].g=null!==(n=t.g)&&void 0!==n?n:s.g,this.colors[e].b=null!==(r=t.b)&&void 0!==r?r:s.b,this.colors[e].a=null!==(a=t.a)&&void 0!==a?a:s.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if("string"!=typeof e)return new Zj(e.r,e.g,e.b,"a"in e?e.a:1);{let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Zj(0,0,0,0))}return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof XY)return t;{let i=new XY({src:t.data});return this.audios[e]=i,i}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof XY&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new nX(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}addAnimation(e,t){this.timelineAnimations[e]=t}getAnimation(e){return this.timelineAnimations[e]}deleteAniamtion(e){this.timelineAnimations[e]&&delete this.timelineAnimations[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof XY&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(void 0===this.variables[e]){let i=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let n=localStorage.getItem(AX(e));i=null!==n?JSON.parse(n):t.value}return this.variables[e]={value:i,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)void 0!==this.variables[e].dynamicVariablePlayState&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(void 0===this.variables[e])return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(AX(e),JSON.stringify(t));let i=t;for(;"string"==typeof i;)i=this.variables[i].value;let n=this.entityOpContext.scene;for(let r=this.variables[e].locations.length-1;r>=0;r--){let t=this.variables[e].locations[r];if("material"===t[0]){let e=t[1],r=i,a={scene:n,shared:this},s=t.slice(2);n.traverseMaterial(t=>{var i;let n=null!==(i=t.root)&&void 0!==i?i:t;n.uuid===e&&n.onVariableUpdate(s,r,a)});let o=this.materials[e];o&&o.onVariableUpdate(s,r,a)}else{let a=n.find(t[0]);if(void 0===a){this.variables[e].locations.splice(r,1);continue}if("geometry"!==t[1]&&"particles"!==t[1]){for(let e=1;e<t.length-1;e++)a=a[t[e]];"rotation"===t[1]?a[t[t.length-1]]=i*wv.DEG2RAD:a[t[t.length-1]]=i}if(a=n.find(t[0]),"ParticleEmitter"===a.type&&a.updateVariableState(i,t),$N.is(a))if("position"===t[1]||"rotation"===t[1]||"scale"===t[1])a.onVariableUpdate();else if("geometry"===t[1]){let e=a;a.component&&(e=a.component);let t=e.dataPatched;e.chooseGeoemtryCache(this).forceDelete(t.geometry),e.createGeometryDelayed(this.entityOpContext),e.onVariableUpdate(!0),e.invalidateDownstreamBooleanData(),e.instances.forEach(e=>{let t=e.dataPatched;e.chooseGeoemtryCache(this).forceDelete(t.geometry),e.createGeometryDelayed(this.entityOpContext),e.onVariableUpdate(!0),e.invalidateDownstreamBooleanData()})}else"morphTargetInfluences"===t[1]&&a.updateMorphInfluences(t[2],i)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){if(Array.isArray(e)){var i,n,r,a;if("mouse"===e[0])return null!==(i=null===(n=this.mouseProperty)||void 0===n?void 0:n[e[1]])&&void 0!==i?i:0;if("raycast"===e[0])return null!==(r=null===(a=this.raycastProperty)||void 0===a?void 0:a[e[1]])&&void 0!==r?r:0;let t=this.entityOpContext.scene.find(e[0]);if("width"===e[1]||"height"===e[1]||"depth"===e[1])return t.geometry.userData.parameters[e[1]];for(let i=1;i<e.length;i++)t=t[e[i]];return"rotation"===e[1]&&(t*=wv.RAD2DEG),t}for(let o in this.variables){var s;if(void 0===t)break;let e=this.variables[o],i=null===(s=e.locations)||void 0===s?void 0:s.findIndex(e=>mI.equal(e,t));void 0!==i&&-1!==i&&e.locations.splice(i,1)}if("string"==typeof e){let i=e,n=e;do{if(n=i,void 0===this.variables[i])break;let e=this.variables[i].value;t&&void 0!==this.variables[n]&&this.variables[n].locations.push(t),i=e}while("string"==typeof i);return i}return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){var t;return null===(t=this.variables[e])||void 0===t?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return null===(t=this.variables[e])||void 0===t?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i.asset);for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.asset);for(let[t,i]of Object.entries(e.particles))this.addParticle(t,i.asset);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i.asset);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i.asset);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,i.asset);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i.asset);for(let[t,i]of Object.entries(e.variables))this.addVariableHolder(t,i.asset)}updateLibByOp(e,t){"images"===e.path[0]?1===e.path.length&&1===e.type?this.addImage(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteImage(e.id):"videos"===e.path[0]?1===e.path.length&&1===e.type?this.addVideo(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVideo(e.id):"audios"===e.path[0]?1===e.path.length&&1===e.type?this.addAudio(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteAudio(e.id):"particles"===e.path[0]?1===e.path.length&&1===e.type?this.addParticle(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteParticle(e.id):"colors"===e.path[0]?1===e.path.length&&1===e.type?this.addColor(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteColor(e.id):"materials"===e.path[0]?1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteMaterial(e.id):"fonts"===e.path[0]?1===e.path.length&&1===e.type?this.addFont(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteFont(e.id):"variables"===e.path[0]?1===e.path.length&&1===e.type?this.addVariableHolder(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVariable(e.id):"components"===e.path[0]&&t.updateByLibOp(e,this)}updateByOp(e,t,i){if(this.data=t,"images"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addImage(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteImage(e.id);else if("videos"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addVideo(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteVideo(e.id);else if("audios"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):1===e.path.length&&1===e.type?this.addAudio(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteAudio(e.id);else if("particles"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):1===e.path.length&&1===e.type?this.addParticle(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteParticle(e.id);else if("colors"===e.path[0])2===e.path.length&&0===e.type?this.updateColor(e.path[1],e.props):1===e.path.length&&1===e.type?this.addColor(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteColor(e.id);else if("materials"===e.path[0])1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data):1===e.path.length&&2===e.type?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(qk.drop(e,2),t.materials[e.path[1]],{shared:this,scene:i});else if("fonts"===e.path[0])2===e.path.length&&0===e.type?this.updateFont(e.path[1],e,i):1===e.path.length&&1===e.type?this.addFont(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteFont(e.id);else if("variables"===e.path[0])2===e.path.length&&0===e.type?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):1===e.path.length&&4===e.type?this.addVariableHolder(e.id,e.data):1===e.path.length&&5===e.type&&this.deleteVariable(e.id);else if("userAPIs"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserAPI(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserAPI(e.id);else if("string"==typeof e.path[1]){let i=t.userAPIs[e.path[1]];if(i){let t=0===e.type&&void 0===e.props.debounce,n=this.getUserAPI(e.path[1]);n instanceof wX?n.update(i):null===n||void 0===n||n.update(i,this,t)}}}else if("userWebhooks"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserWebhook(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserWebhook(e.id);else if("string"==typeof e.path[1]){var n;let i=t.userWebhooks[e.path[1]];i&&(null===(n=this.getUserWebhook(e.path[1]))||void 0===n||n.update(i))}}else"lib"===e.path[0]&&this.updateLibByOp(qk.drop(e,1),i)}updateFont(e,t,i){if(t.props.url){let n=this.getFont(e),r=(0,ye.A)((0,ye.A)({},this.data.fonts[e]),{},{url:t.props.url});n.update(r),n.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}addUserAPI(e,t){var i,n;return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):(null===(i=this.openAIRealtime)||void 0===i?void 0:i.id)===e?(this.openAIRealtime.update(t),!0):"VoiceAssistant"===(null===(n=t.integration)||void 0===n?void 0:n.type)?(this.openAIRealtime=new wX(t,e,this),!1):(this.userAPIs[e]=new FW(e,t,this),!1)}getUserAPI(e){var t;return(null===(t=this.openAIRealtime)||void 0===t?void 0:t.id)===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new uX(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}},EX=(new _X(eB.emptyData()),class extends qH{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),null!==function(e,t){let i=[];if(t.length!==e.length)return null;for(var n=0;n<e.length;){if("*"===t[n])i.push(e[n]);else if(e[n]!==t[n])return null;n+=1}return i}(e.path,["materials"])&&0===e.type&&Array.isArray(this.material))for(let[n,r]of Object.entries(e.props)){let e=i.shared.material(r);this.material[Number(n)]=e}else if(wI(e.path,["material"])&&this.material instanceof kY)"material"in t&&"string"!=typeof t.material&&this.material.updateByOp(qk.drop(e,1),t.material,i);else if(wI(e.path,["materials","*"])&&Array.isArray(this.material)){let n=e.path[1];if("materials"in t&&n<this.material.length){let r=t.materials[n];"string"!=typeof r&&this.material[n].updateByOp(qk.drop(e,2),r,i)}}}get needsAO(){return void 0!==this.material&&(Array.isArray(this.material)?this.material[0]:this.material).hasAO}updateState(e,t){var i,n,r;super.updateState(e,t),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow);let a,s=this.dataPatched;"Mesh"===this.dataPatched.type&&this.dataPatched.geometry.shapeBlendNode&&this.layers.set(9),"Mesh"===this.dataPatched.type&&"ShapeBlendGeometry"===this.dataPatched.geometry.type&&(a={resolutionLevel:this.dataPatched.geometry.resolutionLevel,useChildrenColors:this.dataPatched.geometry.useChildrenColors}),"NonParametricGeometry"!==(null===(i=e.geometry)||void 0===i?void 0:i.type)&&"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(s.flatShading,s.side,s.wireframe,a),t.scene.markNeedsUpdateRendererDirty()),("NonParametricGeometry"===(null===(n=e.geometry)||void 0===n?void 0:n.type)||"materials"in e)&&("materials"in e&&void 0!==e.materials?(this.disposeMaterial(),this.material=e.materials.map(e=>t.shared.material(e).getFlavor(s.flatShading,s.side,s.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(s.flatShading,s.side,s.wireframe)],t.scene.markNeedsUpdateRendererDirty()));let o=this.data;if("NonParametricGeometry"!==(null===(r=o.geometry)||void 0===r?void 0:r.type)&&"materials"in o&&void 0!==o.materials&&(this.disposeMaterial(),this.material=t.shared.material(o.materials[0]).getFlavor(s.flatShading,s.side,s.wireframe)),void 0!==e.flatShading||void 0!==e.wireframe||void 0!==e.side)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(s.flatShading,s.side,s.wireframe);else this.material=this.material.getFlavor(s.flatShading,s.side,s.wireframe,a)}disposeMaterial(){this.material&&uk(this.material).forEach(e=>{e instanceof kY&&(e instanceof LY||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}}),CX=new Zv,MX=new qv,TX=new qv,PX=new Zv,DX=new My,OX=class extends EX{constructor(e,t,i){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=(new My).fromArray(t.bindMatrix),this.bindMatrixInverse=new My)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Cb&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(void 0!==this.localGeometry)return this.localGeometry;if(this.geometryCreateDeleyed instanceof _X){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return cz.is2DParametricMesh(e.type)&&0===e.depth}get is2DType(){return cz.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return"NonParametricGeometry"===this.geometry.userData.type}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),wI(e.path,["geometry"])&&this.updateByPatchedOpGeometry(qk.drop(e,1),t.geometry,i)}removeInteractionGeometry(e){var t;null!==(t=this.localGeometry)&&void 0!==t&&t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if("NonParametricGeometry"===i||"SubdivGeometry"===i){let i,n,r,a=e;if(void 0===this.localGeometry){let e=(0,ye.A)((0,ye.A)({},this.data.geometry),a);this.localGeometry=oH(e,t,this.data.flatShading,this)}a.scaleBaked?[i,n,r]=a.scaleBaked:({width:i,height:n,depth:r}=a);let s=this.localGeometry.userData;void 0!==s.sxPrev&&cH(this.localGeometry.attributes,i/s.sxPrev,n/s.syPrev,r/s.szPrev),s.sxPrev=i,s.syPrev=n,s.szPrev=r}else{var n;let i=(0,ye.A)((0,ye.A)({},this.data.geometry),e);null!==(n=this.localGeometry)&&void 0!==n&&n.dispose(),this.localGeometry=oH(i,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,i){var n;let r=!1;0===e.type&&0===e.path.length&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof gH&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||(null!==(n=i.scene)&&void 0!==n&&n.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){void 0!==e.geometry&&this.updateGeometryOnStateUpdate(e.geometry,t);let i=e.morphTargetInfluences;if(i){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:e,value:n}}of i)this.updateMorphInfluences(e,t.shared.getVariable(n,[this.uuid,"morphTargetInfluences",e]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(void 0===this.morphTargetDictionary)return;let i=this.morphTargetDictionary[e];void 0!==i&&(this.morphTargetInfluences[i]=t)}updateGeometryGroupsIfNeeded(){var e,t;Array.isArray(this.material)&&0===this.geometry.groups.length&&this.geometry.addGroup(0,Math.max(null!==(e=null===(t=this.geometry.getIndex())||void 0===t?void 0:t.count)&&void 0!==e?e:0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){var i,n;let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,.5*r.depth):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,null!==(i=r.depth)&&void 0!==i?i:0).multiplyScalar(.5)):r.centerOffset?e.fromArray(r.centerOffset):e.setScalar(0),t.set(r.width,r.height,null!==(n=r.depth)&&void 0!==n?n:0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new qv,i=this.geometry.attributes.skinWeight;for(let n=0,r=i.count;n<r;n++){t.fromBufferAttribute(i,n);let e=1/t.manhattanLength();e!==1/0?t.multiplyScalar(e):t.set(1,0,0,0),i.setXYZW(n,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let i=this.skeleton;if(void 0===i)return;let n=this.geometry;MX.fromBufferAttribute(n.attributes.skinIndex,e),TX.fromBufferAttribute(n.attributes.skinWeight,e),CX.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){let e=TX.getComponent(r);if(0!==e){let n=MX.getComponent(r);DX.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(PX.copy(CX).applyMatrix4(DX),e)}}return t.applyMatrix4(this.bindMatrixInverse)}};function kX(e){if(Array.isArray(e.material)){for(let t of e.material)if(0===t.getLayersOfType("outline").length)return}else if(!(e.material instanceof kY)||0===e.material.getLayersOfType("outline").length)return;e instanceof OX&&e.is2DAndNoDepth?function(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),n=new Zv;for(let r=0;r<t.length;r+=3)n.set(t[r],t[r+1],t[r+2]).normalize(),i[r]=n.x,i[r+1]=n.y,i[r+2]=n.z;e.geometry.setAttribute("extrudeNormal",new yb(i,3))}(e):function(e){if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,i=e.geometry.attributes,n=i.position.array,r=i.normal.array,a=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){var s;let e="".concat(n[l],"_").concat(n[l+1],"_").concat(n[l+2]),i=new Zv(r[l],r[l+1],r[l+2]);t.has(e)?null===(s=t.get(e))||void 0===s||s.normals.push(i):t.set(e,{normals:[i],result:new Zv})}t.forEach((e,t)=>{for(let i of e.normals)e.result.add(i);e.result.divideScalar(e.normals.length)});for(let l=0;l<n.length;l+=3){var o;let e="".concat(n[l],"_").concat(n[l+1],"_").concat(n[l+2]),i=null===(o=t.get(e))||void 0===o?void 0:o.result;i&&(a[l]=i.x,a[l+1]=i.y,a[l+2]=i.z)}e.geometry.setAttribute("extrudeNormal",new yb(a,3))}(e)}function IX(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),n=parseInt(e.uuid.replace(/\D/g,"")),r=[wv.seededRandom(n),wv.seededRandom(n+1e4),wv.seededRandom(n+2e4)];for(let a=0;a<t.length;a++)i[a]=r[a%3];e.geometry.setAttribute("randomColor",new mb(i,3))}var RX=new ey,LX=new Zv;function zX(e){let t=!1;return e.scene.objects.traverse((e,i)=>{"Mesh"===i.type&&"SubdivGeometry"===i.geometry.type&&(t=!0)}),t}var BX=class extends OX{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new My,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return void 0!==this.localGeometry?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return void 0!==this.localGeometry?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){var e;return null!==(e=this.data.geometry.phongAngle)&&void 0!==e?e:45}updateEntityBoxSize(e,t){var i;let n=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(n.width,n.height,null!==(i=n.depth)&&void 0!==i?i:0).multiplyScalar(.5)}createGeometryByControls(e){var t,i,n,r;if(!0===this.skipReactionUpdate)return;let a=null===(t=this.localGeometry)||void 0===t?void 0:t.uuid,{originalGeometry:s,subdividedGeometry:o,subdivPointer:l}=gH.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=l,void 0!==s&&(null!==(i=this.originalGeometry)&&void 0!==i&&i.dispose(),this.originalGeometry=s),void 0!==o&&(null!==(n=this.subdividedGeometry)&&void 0!==n&&n.dispose(),this.subdividedGeometry=null!==o&&void 0!==o?o:void 0),this.localGeometry=null!==(r=this.subdividedGeometry)&&void 0!==r?r:this.originalGeometry,kX(this),IX(this),this.calcBoundingBox(),a&&(this.localGeometry.uuid=a)}updateState(e,t){if(super.updateState(e,t),void 0!==e.flatShading){let i=this.material;this.material=Array.isArray(i)?i.map(e=>e.getFlavor(!1,e.side,e.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];gH.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&gH.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=gH.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=gH.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=null!==(e=this.subdividedGeometry)&&void 0!==e?e:this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,qH.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new yy,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;RX.setFromBufferAttribute(t),RX.getCenter(i),e.boundingSphere.radius=i.distanceTo(RX.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),RX.getSize(LX),this.hasNonUniformScale&&LX.divide(this.scale);let n={width:LX.x,height:LX.y,depth:LX.z};return this.geometry.userData.parameters=n,n}updateBoundingSphere(e){let t=this.originalGeometry;RX.min.set(e[0],e[2],e[4]),RX.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(RX.min.applyMatrix4(this.shearScaleInv),RX.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new yy);let i=t.boundingSphere.center;RX.getCenter(i),t.boundingSphere.radius=i.distanceTo(RX.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(gH.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,null!==(e=this.originalGeometry)&&void 0!==e&&e.dispose(),null===(t=this.subdividedGeometry)||void 0===t||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},jX={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},FX={polygon_center:0,edge:1,vertex:2},NX=(e,t)=>(i,n)=>t&&0!==i&&0!==e?e*n/100:0,UX=(e,t)=>{let i=Math.abs(t),n=-1*i;return(e- -1)*(i-n)/2+n},VX=new Zv,WX=new Zv,HX=new Zv,GX=new Zv;function qX(e,t){let i=HX.fromArray(e),n=GX.fromArray(t);WX.copy(n).sub(i);let r=WX.length();return WX.normalize().multiplyScalar(.5*r),VX.copy(i).add(WX).toArray()}var YX=new cb,XX=new Zv,QX=new Zv,KX=new Zv;var ZX=e=>.5*(1-Math.cos(e*Math.PI)),JX=class{constructor(){this.perlin=new Array(4096)}noise(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==this.perlin){this.perlin=new Array(4096);for(let e=0;e<4096;e++)this.perlin[e]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let n,r,a,s,o,l=Math.floor(e),c=Math.floor(t),h=Math.floor(i),u=e-l,d=t-c,p=i-h,f=0,m=.5;for(let g=0;g<4;g++){let e=l+(c<<4)+(h<<8);n=ZX(u),r=ZX(d),a=this.perlin[4095&e],a+=n*(this.perlin[e+1&4095]-a),s=this.perlin[e+16&4095],s+=n*(this.perlin[e+16+1&4095]-s),a+=r*(s-a),e+=256,s=this.perlin[4095&e],s+=n*(this.perlin[e+1&4095]-s),o=this.perlin[e+16&4095],o+=n*(this.perlin[e+16+1&4095]-o),s+=r*(o-s),a+=ZX(p)*(s-a),f+=a*m,m*=.5,l<<=1,u*=2,c<<=1,d*=2,h<<=1,p*=2,u>=1&&(l++,u--),d>=1&&(c++,d--),p>=1&&(h++,p--)}return f}noiseSeed(e){let t=(()=>{let e,t;return{setSeed(i){t=e=(null!==i&&void 0!==i?i:4294967296*Math.random())>>>0},getSeed:()=>e,rand:()=>(t=(1664525*t+1013904223)%4294967296,t/4294967296)}})();t.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=t.rand()}},$X=new Zv,eQ=new My,tQ=new Cy;function iQ(e){let t=!1;return e.scene.objects.traverse((e,i)=>{"Mesh"===i.type&&("TextGeometry"===i.geometry.type||"InputGeometry"===i.geometry.type)&&(t=!0)}),t}var nQ,rQ,aQ,sQ,oQ=class extends OX{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e,t;let i=this.dataPatched;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,i.geometry.height,this.fontScale,i.geometry.verticalAlign))&&void 0!==e?e:0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:1)*this.fontScale}get descender(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!isNaN(e.ray.origin.x)&&0!==this.scale.x&&0!==this.scale.y&&0!==this.scale.z&&(eQ.copy(i).invert(),tQ.copy(e.ray).applyMatrix4(eQ),tQ.intersectBox(this.singleBBox,$X))){let n=$X.applyMatrix4(i),r=e.ray.origin.distanceTo(n);t.push({distance:r,point:n.clone(),object:this})}}},lQ=1e-4,cQ=new Zv,hQ=new Zv;nH.then(e=>{rQ=[(nQ=e).get_face_center,nQ.get_edge_midpoint,nQ.get_vertex_position],aQ=[nQ.get_face_normal,nQ.get_edge_normal,nQ.get_vertex_normal],sQ=[nQ.face_count,nQ.edge_count,nQ.vertex_count]});var uQ=new My,dQ=new My,pQ=new Zv,fQ=new Zv,mQ=new Zv,gQ=new Zv,vQ=new Zv,yQ=new Zv,bQ=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new JX,"perlin"===e.noiseType?(this.perlin.noiseSeed(e.seed),this.noise=t?(e,t,i)=>this.perlin.noise(e,t,i):e=>this.perlin.noise(e)):this.noise=t?function(){let e=GN(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random),t=new Float64Array(e).map(e=>HN[e%12*3]),i=new Float64Array(e).map(e=>HN[e%12*3+1]),n=new Float64Array(e).map(e=>HN[e%12*3+2]);return function(r,a,s){let o,l,c,h,u,d,p,f,m,g,v=(r+a+s)*NN,y=VN(r+v),b=VN(a+v),x=VN(s+v),w=(y+b+x)*UN,A=r-(y-w),S=a-(b-w),_=s-(x-w);A>=S?S>=_?(u=1,d=0,p=0,f=1,m=1,g=0):A>=_?(u=1,d=0,p=0,f=1,m=0,g=1):(u=0,d=0,p=1,f=1,m=0,g=1):S<_?(u=0,d=0,p=1,f=0,m=1,g=1):A<_?(u=0,d=1,p=0,f=0,m=1,g=1):(u=0,d=1,p=0,f=1,m=1,g=0);let E=A-u+UN,C=S-d+UN,M=_-p+UN,T=A-f+2*UN,P=S-m+2*UN,D=_-g+2*UN,O=A-1+.5,k=S-1+.5,I=_-1+.5,R=255&y,L=255&b,z=255&x,B=.6-A*A-S*S-_*_;if(B<0)o=0;else{let r=R+e[L+e[z]];B*=B,o=B*B*(t[r]*A+i[r]*S+n[r]*_)}let j=.6-E*E-C*C-M*M;if(j<0)l=0;else{let r=R+u+e[L+d+e[z+p]];j*=j,l=j*j*(t[r]*E+i[r]*C+n[r]*M)}let F=.6-T*T-P*P-D*D;if(F<0)c=0;else{let r=R+f+e[L+m+e[z+g]];F*=F,c=F*F*(t[r]*T+i[r]*P+n[r]*D)}let N=.6-O*O-k*k-I*I;if(N<0)h=0;else{let r=R+1+e[L+1+e[z+1]];N*=N,h=N*N*(t[r]*O+i[r]*k+n[r]*I)}return 32*(o+l+c+h)}}((0,BN.default)(e.seed)):function(){let e=GN(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random),t=new Float64Array(e).map(e=>WN[e%12*2]),i=new Float64Array(e).map(e=>WN[e%12*2+1]);return function(n,r){let a,s,o=0,l=0,c=0,h=(n+r)*jN,u=VN(n+h),d=VN(r+h),p=(u+d)*FN,f=n-(u-p),m=r-(d-p);f>m?(a=1,s=0):(a=0,s=1);let g=f-a+FN,v=m-s+FN,y=f-1+2*FN,b=m-1+2*FN,x=255&u,w=255&d,A=.5-f*f-m*m;if(A>=0){let n=x+e[w];A*=A,o=A*A*(t[n]*f+i[n]*m)}let S=.5-g*g-v*v;if(S>=0){let n=x+a+e[w+s];S*=S,l=S*S*(t[n]*g+i[n]*v)}let _=.5-y*y-b*b;if(_>=0){let n=x+1+e[w+1];_*=_,c=_*_*(t[n]*y+i[n]*b)}return 70*(o+l+c)}}((0,BN.default)(e.seed))}},xQ=class extends(eU(Jy)){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(null===this.parent)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof iU&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof iU&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){"toObject"!==this.parameters.type&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(t=void 0!==e?e:"grid"===this.parameters.type?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,"toObject"===this.parameters.type)if(this.parameters.toObject.object){if(void 0===e&&"random"!==this.parameters.toObject.spreadType)return}else t=0;if("toObject"===this.parameters.type&&this.objectForSample){let e=this.children;if(e.length===t)return;if(e.length<t)for(let i=0,n=t-e.length;i<n;++i){let e=new iU(this.object);e.expand(),this.add(e)}else for(let i=0,n=e.length-t;i<n;++i)this.remove(e[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let e=0,i=t-this.children.length;e<i;++e){let e=new iU(this.object);e.expand(),this.add(e)}else for(let e=0,i=this.children.length-t;e<i;++e)this.remove(this.children[e])}}getRandom(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null===this.random||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new bQ(e,t)),this.random}_updateRadial(e){var t;let i,n=e.radial,r=n.start*wv.DEG2RAD,a=r-n.end*wv.DEG2RAD,s=new By(n.rotation[0],n.rotation[1],n.rotation[2]);switch(n.axis){case"z":i=new Zv(0,0,1);break;case"y":i=new Zv(0,1,0);break;default:i=new Zv(1,0,0)}let o=null!==(t=e.randomnessObject)&&void 0!==t?t:RL.defaultData([1,1,1]).randomnessObject,l=this.getRandom(o),c=NX(o.strength,this.parameters.randomness);for(let[h,u]of this.children.entries()){let t=h*(o.freqScale/10)+o.movement,d=l.noise(t,t,t),p=h+1;u.scale.x=n.scale[0]+c(p,UX(d,o.scale[0]))||lQ,u.scale.y=n.scale[1]+c(p,UX(d,o.scale[1]))||lQ,u.scale.z=n.scale[2]+c(p,UX(d,o.scale[2]))||lQ,u.position.setScalar(0);let f=a/e.count*h-r;switch(n.axis){case"x":u.rotation.set(0,f,0);break;case"y":u.rotation.set(0,0,f);break;case"z":u.rotation.set(f,0,0)}u.translateOnAxis(i,n.radius),u.position.x+=n.position[0]+c(p,UX(d,o.position[0])),u.position.y+=n.position[1]+c(p,UX(d,o.position[1])),u.position.z+=n.position[2]+c(p,UX(d,o.position[2]));let m=c(p,UX(d,o.rotation[0])),g=c(p,UX(d,o.rotation[1])),v=c(p,UX(d,o.rotation[2]));!0===n.alignment?(u.rotation.x+=s.x+m,u.rotation.y+=s.y+g,u.rotation.z+=s.z+v):u.rotation.set(s.x+m,s.y+g,s.z+v)}}_updateLinear(e){var t;if("linear"!==e.type)throw new Error;let i=e.linear,n=new By(i.rotation[0],i.rotation[1],i.rotation[2]),r=null!==(t=e.randomnessObject)&&void 0!==t?t:RL.defaultData([1,1,1]).randomnessObject,a=this.getRandom(r),s=NX(r.strength,this.parameters.randomness);for(let[o,l]of this.children.entries()){let e=o*(r.freqScale/10)+r.movement,t=a.noise(e,e,e),c=o+1,h=s(c,UX(t,r.rotation[0])),u=s(c,UX(t,r.rotation[1])),d=s(c,UX(t,r.rotation[2]));l.scale.x=1+(i.scale[0]-1)*o+s(c,UX(t,r.scale[0]))||lQ,l.scale.y=1+(i.scale[1]-1)*o+s(c,UX(t,r.scale[1]))||lQ,l.scale.z=1+(i.scale[2]-1)*o+s(c,UX(t,r.scale[2]))||lQ,l.rotation.x=n.x*o+h,l.rotation.y=n.y*o+u,l.rotation.z=n.z*o+d,l.position.x=i.position[0]*o+s(c,UX(t,r.position[0])),l.position.y=i.position[1]*o+s(c,UX(t,r.position[1])),l.position.z=i.position[2]*o+s(c,UX(t,r.position[2]))}}_updateGrid(e){var t;let i=0,n=e.grid,r=null!==(t=e.randomnessObject)&&void 0!==t?t:RL.defaultData([1,1,1]).randomnessObject,a=this.getRandom(r,!0),s=NX(r.strength,this.parameters.randomness);if(!0===n.useCenter){let e={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},t=new Zv(n.size[0]*(n.count[0]-e.x)*.5,n.size[1]*(n.count[1]-e.y)*.5,n.size[2]*(n.count[2]-e.z)*.5);for(let o=0;o<n.count[0];o++)for(let e=0;e<n.count[1];e++)for(let l=0;l<n.count[2];l++){let c=a.noise((o+1)*(r.freqScale/10)+r.movement,(e+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement),h=this.children[i++];h.scale.x=1+s(i,UX(c,r.scale[0]))||lQ,h.scale.y=1+s(i,UX(c,r.scale[1]))||lQ,h.scale.z=1+s(i,UX(c,r.scale[2]))||lQ;let u=s(i,UX(c,r.rotation[0])),d=s(i,UX(c,r.rotation[1])),p=s(i,UX(c,r.rotation[2]));h.rotation.set(u,d,p),h.position.x=n.size[0]*o-t.x+s(i,UX(c,r.position[0])),h.position.y=n.size[1]*e-t.y+s(i,UX(c,r.position[1])),h.position.z=n.size[2]*l-t.z+s(i,UX(c,r.position[2]))}}else for(let o=0;o<n.count[0];o++)for(let e=0;e<n.count[1];e++)for(let t=0;t<n.count[2];t++){let l=a.noise((o+1)*(r.freqScale/10)+r.movement,(e+1)*(r.freqScale/10)+r.movement,(t+1)*(r.freqScale/10)+r.movement),c=this.children[i++];c.scale.x=1+s(i,UX(l,r.scale[0]))||lQ,c.scale.y=1+s(i,UX(l,r.scale[1]))||lQ,c.scale.z=1+s(i,UX(l,r.scale[2]))||lQ;let h=s(i,UX(l,r.rotation[0])),u=s(i,UX(l,r.rotation[1])),d=s(i,UX(l,r.rotation[2]));c.rotation.set(h,u,d),c.position.x=n.size[0]*o+s(i,UX(l,r.position[0])),c.position.y=-n.size[1]*e+s(i,UX(l,r.position[1])),c.position.z=-n.size[2]*t+s(i,UX(l,r.position[2]))}}_updateToObject(e){var t,i;if("toObject"!==e.type)throw new Error;let{toObject:n}=e,r=new By(n.rotation[0],n.rotation[1],n.rotation[2]),a=null!==(t=e.randomnessObject)&&void 0!==t?t:RL.defaultData([1,1,1]).randomnessObject,s=this.getRandom(a),o=NX(a.strength,this.parameters.randomness);if(!n.object){for(let[,e]of this.children.entries())e.position.set(0,0,0),e.scale.setScalar(1),e.rotation.set(0,0,0);return void(this.objectForSample=void 0)}if(!this.objectForSample)return;if(this.objectForSample instanceof oQ){if(null===(i=this.objectForSample.font)||void 0===i||!i.isLoaded||void 0===this.objectForSample.geometry.attributes.position)return void(this._pendingMediaLoad=!0);this._pendingMediaLoad=!1}if(void 0===this.objectForSample.geometry&&this.objectForSample.isAncestorOf(this.object.uuid))return void console.warn('Oh no! The object "'.concat(this.object.name,'" (').concat(this.object.uuid,") seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead."));let l=this.getSubdivData();if(l.length>0){let e=Math.round(l.length*n.count/100);this._updateCount(e)}else{let e=this.objectForSample.geometry.getAttribute("position");if(!e||isNaN(e.count)||0===e.count)return void console.warn('Oh no! The object "'.concat(this.object.name,'" (').concat(this.object.uuid,') cannot be cloned on the surface of "').concat(this.objectForSample.name,'" (').concat(this.objectForSample.uuid,") because the latter does not have a valid geometry."))}this.objectForSample.updateMatrixWorld();let c=new XN(this.objectForSample).build(),h=jX[n.axis],u=this.children;c.setRandomGenerator((0,BN.default)(this.object.uuid+n.seed));for(let[d,p]of u.entries()){let e=d*(a.freqScale/10)+a.movement,t=s.noise(e,e,e),i=d+1,u=o(i,UX(t,a.rotation[0])),f=o(i,UX(t,a.rotation[1])),m=o(i,UX(t,a.rotation[2]));"random"===n.spreadType?c.sample(mQ,gQ):(l.length&&(mQ.fromArray(l[d].pos),gQ.fromArray(l[d].norm)),this.objectForSample instanceof BX&&mQ.applyMatrix4(uQ.copy(this.objectForSample.matrixWorld).invert())),mQ.applyMatrix4(this.object.hiddenMatrix.clone().invert()),p.position.copy(mQ),pQ.fromArray(h);let g="normal"===n.align?gQ:this.object.getWorldDirection(yQ),v=fQ.fromArray(n.position);fQ.x+=o(i,UX(t,a.position[0])),fQ.y+=o(i,UX(t,a.position[1])),fQ.z+=o(i,UX(t,a.position[2]));let y=Math.acos(g.dot(pQ)),b=vQ.crossVectors(pQ,g).normalize(),x=dQ.makeRotationAxis(b,y),w=g.clone().cross(this.object.up).normalize(),A=w.clone().cross(g).normalize(),S=(new My).makeBasis(w,g,A),_=new Zv(pQ.y,pQ.z,pQ.x).normalize(),E=_.clone().cross(pQ).normalize(),C=(new My).makeBasis(_,pQ,E).invert(),M=(new My).multiplyMatrices(S,C);p.rotation.setFromRotationMatrix(M),v.applyMatrix4(x),p.position.add(v),p.rotation.x=p.rotation.x+r.x+u,p.rotation.y=p.rotation.y+r.y+f,p.rotation.z=p.rotation.z+r.z+m,p.scale.setScalar(1),p.scale.x=p.scale.x+n.scale[0]+o(i,UX(t,a.scale[0]))||lQ,p.scale.y=p.scale.y+n.scale[1]+o(i,UX(t,a.scale[1]))||lQ,p.scale.z=p.scale.z+n.scale[2]+o(i,UX(t,a.scale[2]))||lQ,p.scale.multiply(this.object.scale),p.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,i=(e,i)=>{let n=Math.round(1e4*e[0])+"_"+Math.round(1e4*e[1])+"_"+Math.round(1e4*e[2]),r=t.get(n);r?(r.pos[0]+=e[0],r.pos[1]+=e[1],r.pos[2]+=e[2],r.norm[0]+=i[0],r.norm[1]+=i[1],r.norm[2]+=i[2],r.count+=1):t.set(n,{pos:[...e],norm:[...i],count:1})};if("random"===e)return[];if(this.objectForSample instanceof BX){let t=this.objectForSample,n=FX[e],r=sQ[n],a=rQ[n],s=aQ[n],o=r(t.subdivPointerNew);for(let e=0;e<=o-1;e++){let n=a(t.subdivPointerNew,e),r=s(t.subdivPointerNew,e);cQ.fromArray(n).applyMatrix4(t.matrixWorld),hQ.fromArray(r),i(cQ.toArray(),hQ.toArray())}}else(this.objectForSample.geometry.index?function(e){let t=[];for(let i=0;i<=e.index.count;i++)if(XX.fromArray(e.index.array,3*i),YX.setFromAttributeAndIndices(e.attributes.position,XX.x,XX.y,XX.z),YX.getNormal(QX),YX.getMidpoint(KX),!(isNaN(KX.x)||isNaN(KX.y)||isNaN(KX.z))){let{a:e,b:i,c:n}=YX,r=e.toArray(),a=i.toArray(),s=n.toArray(),o=e.distanceTo(i),l=i.distanceTo(n),c=n.distanceTo(e),h=qX(r,a),u=qX(a,s),d=qX(s,r),p=[o,l,c],f=Math.max(...p),m=p.filter(e=>Math.round(e)===Math.round(f)).length>1,g=[],v=YX.getMidpoint(KX).toArray();f===o&&!m&&(g=[u,d,d],v=h),f===l&&!m&&(g=[h,d,d],v=u),f===c&&!m&&(g=[h,u,u],v=d),m&&(g=[h,u,d]),t.push({vertices:[r,a,s],faceCenters:g,midpoint:v,norm:YX.getNormal(QX).toArray()})}return t}(this.objectForSample.geometry):function(e){let t=[],{position:i}=e.attributes;for(let n=0;n<i.count;n++){YX.setFromAttributeAndIndices(i,3*n,3*n+1,3*n+2),YX.getNormal(QX),YX.getMidpoint(KX);let e=YX.a.toArray(),r=YX.b.toArray(),a=YX.c.toArray();t.push({vertices:[e,r,a],faceCenters:[qX(e,r),qX(r,a),qX(a,e)],midpoint:KX.toArray(),norm:QX.toArray()})}return t}(this.objectForSample.geometry)).forEach((t,n)=>{"polygon_center"===e&&i(t.midpoint,t.norm),"vertex"===e&&(i(t.vertices[0],t.norm),i(t.vertices[1],t.norm),i(t.vertices[2],t.norm)),"edge"===e&&(i(t.faceCenters[0],t.norm),i(t.faceCenters[1],t.norm),i(t.faceCenters[2],t.norm))});let n=Array.from(t.values());for(let r of n)r.pos[0]/=r.count,r.pos[1]/=r.count,r.pos[2]/=r.count,r.norm[0]/=r.count,r.norm[1]/=r.count,r.norm[2]/=r.count;return n}updateState(e,t){var i;if(this.parameters=uO(e),"toObject"!==this.parameters.type)(null===this.parent||this.parent!==this.object)&&(this.removeFromParent(),null!==(i=this.object.parent)&&void 0!==i&&i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(null===this.parent||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let e=t.find(this.parameters.toObject.object);this.objectForSample=e instanceof qH?e:void 0,this.matrix=new My,this.hiddenMatrix=new My,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,e&&e.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},wQ=e=>{var t;return(t=class extends e{}).geometryHelper=new Vb(30,30,30),t},AQ=new Cy,SQ=new yy,_Q=new My,EQ=function(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=t,o=a.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),SQ.copy(s.boundingSphere),SQ.applyMatrix4(o),!1===i.ray.intersectsSphere(SQ)||(_Q.copy(o).invert(),AQ.copy(i.ray).applyMatrix4(_Q),null!==s.boundingBox&&!1===AQ.intersectsBox(s.boundingBox)))return;let l,c,h,u,d,p,f=s.index,m=s.attributes.position,g=s.drawRange;if(!1===r){for(d=Math.max(0,g.start),p=Math.min(f.count,g.start+g.count);d<p;d+=3)if(c=f.getX(d),h=f.getX(d+1),u=f.getX(d+2),l=v(e,i,AQ,m,c,h,u),l)return l.faceIndex=Math.floor(d/3),void n.push(l)}else{let t=s.attributes.position,r=new Zv,o=new Zv,l=new Zv,c=new Zv,h=2,u=1/((a.scale.x+a.scale.y+a.scale.z)/3),d=u*u;for(let s=Math.max(0,g.start),p=Math.min(t.count,g.start+g.count)-1;s<p;s+=h){if(r.fromBufferAttribute(t,s),o.fromBufferAttribute(t,s+1),AQ.distanceSqToSegment(r,o,c,l)>d)continue;c.applyMatrix4(a.matrixWorld);let h=i.ray.origin.distanceTo(c);h<i.near||h>i.far||n.push({distance:h,point:l.clone().applyMatrix4(a.matrixWorld),object:e})}}function v(e,t,i,n,r,a,s){let o=new Zv,l=new Zv,c=new Zv,h=new Zv,u=new Zv;if(o.fromBufferAttribute(n,r),l.fromBufferAttribute(n,a),c.fromBufferAttribute(n,s),null===i.intersectTriangle(o,l,c,!1,h))return null;u.copy(h),u.applyMatrix4(e.matrixWorld);let d=t.ray.origin.distanceTo(u);return d<t.near||d>t.far?null:{faceIndex:1,distance:d,point:u.clone(),object:e}}},CQ=new Zv,MQ=new Xb,TQ=class extends uS{constructor(e){let t=new Cb,i=new iS({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={},s=new Fv(15711266),o=new Fv(15711266),l=new Fv(2857471);function c(e,t,i){h(e,i),h(t,i)}function h(e,t){n.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}c("n1","n2",s),c("n2","n4",s),c("n4","n3",s),c("n3","n1",s),c("f1","f2",s),c("f2","f4",s),c("f4","f3",s),c("f3","f1",s),c("n1","f1",s),c("n2","f2",s),c("n3","f3",s),c("n4","f4",s),c("p","n1",o),c("p","n2",o),c("p","n3",o),c("p","n4",o),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),t.setAttribute("position",new yb(n,3)),t.setAttribute("color",new yb(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;MQ.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=.8;PQ("n1",t,e,MQ,-1,-1,i),PQ("n2",t,e,MQ,1,-1,i),PQ("n3",t,e,MQ,-1,1,i),PQ("n4",t,e,MQ,1,1,i);let n=i;PQ("f1",t,e,MQ,-1,-1,n),PQ("f2",t,e,MQ,1,-1,n),PQ("f3",t,e,MQ,-1,1,n),PQ("f4",t,e,MQ,1,1,n);let r=n;PQ("u1",t,e,MQ,.35,1.1,r),PQ("u2",t,e,MQ,-.35,1.1,r),PQ("u3",t,e,MQ,0,1.55,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function PQ(e,t,i,n,r,a,s){CQ.set(r,a,s).unproject(n);let o=t[e];if(void 0!==o){let e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],CQ.x,CQ.y,CQ.z)}}var DQ,OQ=class extends(wQ(TQ)){constructor(e){super(e),this.object=e,this.object=e,this.name="CombinedCameraHelper: ".concat(e.uuid)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){EQ(this.object,this.geometry,e,t,!0)}};(e=>{e.is=e=>"objectHelper"in e})(DQ||(DQ={}));var kQ=(e,t)=>class extends(AU(e)){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(e,t){this.objectHelper.raycast(e,t)}showGizmos(){for(let e in this.gizmos){let t=this.gizmos[e];t instanceof XE&&(t.visible=!0)}}updateEntityBoxSize(e,t){this.objectHelper.visible&&this.geometryHelper instanceof Vb?(e.setScalar(0),t.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(e,t)}hideGizmos(){for(let e in this.gizmos){let t=this.gizmos[e];t instanceof XE&&(t.visible=!1)}}},IQ=new Zv,RQ=new Zv,LQ=new Kv,zQ=new Zv,BQ=new Zv,jQ=new Zv,FQ=class extends(kQ(Xb,OQ)){constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ye.A)((0,ye.A)({},kz.defaultData),{},{name:""});super(),this._cameraType="OrthographicCamera",this.targetOffset=IL.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new My,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,n=this.height;this.orthoCamera=new xx(-.5*i,.5*i,.5*n,-.5*n,-5e4,1e4),this.perspCamera=new Qb(45,i/n,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,i){"number"==typeof e&&(e=new Zv(e,t,i)),super.lookAt(e),this.getWorldPosition(IQ),this.targetOffset=IQ.distanceTo(e)}getTarget(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zv;return this.getWorldDirection(RQ),this.getWorldPosition(IQ),RQ.multiplyScalar(this.targetOffset),e.copy(IQ).add(RQ),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(IQ),IQ.distanceTo(e)}updateUp(){this.getWorldQuaternion(LQ),zQ.set(0,0,1).applyQuaternion(LQ),BQ.copy(Jy.DEFAULT_UP),this.isUpVectorFlipped&&BQ.negate(),BQ.applyQuaternion(LQ),jQ.copy(Jy.DEFAULT_UP).projectOnPlane(zQ),this.angleOffsetFromUp=jQ.angleTo(BQ),this.angleOffsetFromUp*=jQ.cross(BQ).dot(zQ)>=0?1:-1}updateTransformState(e,t){let i=super.updateTransformState(e,t);return void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),i}getViewFrontToObject(e){let t=e.getWorldPosition(new Zv),i=e.getWorldDirection(new Zv).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new Zv).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new Zv;e.getWorldPosition(t);return this.getViewToTarget(t)}setViewplaneSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.aspect=e/t,i){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-395*i,this.right=395*i,this.top=1/n*395,this.bottom=1/n*-395}else this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,n,r,a){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,i,n,r,a):this.orthoCamera.setViewOffset(e,t,i,n,r,a)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return XO(t,e)}updateCameraSubtype(e,t){let i="perspective"===e?"PerspectiveCamera":"OrthographicCamera";void 0!==t.zoom&&this.setZoom(i,t.zoom),void 0!==t.near&&this.setNear(i,t.near),void 0!==t.fov&&"PerspectiveCamera"===i&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),void 0!==e.far&&(this.far=e.far),void 0!==e.orthographic&&this.updateCameraSubtype("orthographic",e.orthographic),void 0!==e.perspective&&this.updateCameraSubtype("perspective",e.perspective),void 0!==e.type&&(this.cameraType=e.type),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),1===e.path.length&&0===e.type&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return(0,ye.A)((0,ye.A)((0,ye.A)({},super.toState(e)),this.toCameraState(e)),{},{type:this.cameraType})}},NQ=new My,UQ=new My;function VQ(e){let t=!1;return e.scene.objects.traverse((e,i)=>{var n;"BooleanGeometry"===(null===(n=i.geometry)||void 0===n?void 0:n.type)&&(t=!0)}),t}var WQ,HQ=class extends EX{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Cb,this.onAfterRender=(e,t,i,n,r,a)=>{super.onAfterRender(e,t,i,n,r,a),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){var e;return null!==(e=this.data.geometry.phongAngle)&&void 0!==e?e:45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&void 0!==e.props.operation&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(-1!==this.booleanMeshSetAddress&&!e)return;for(let s=0;s<this.children.length;s++){let i=this.children[s];i instanceof HQ&&!0===i.dataPatched.visible&&i.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(let s=0;s<this.children.length;s++){var i;let r=this.children[s];if(r instanceof qH&&!0===r.dataPatched.visible&&(null===(i=r.geometry.attributes.position)||void 0===i?void 0:i.count)>0&&r.geometry.drawRange.count>0&&0!==r.booleanMeshSetAddress){NQ.multiplyMatrices(r.hiddenMatrix,r.matrix);try{if(-1===r.booleanMeshSetAddress){var n;if((null!==(n=r.geometry.index)&&void 0!==n?n:r.geometry.getAttribute("position")).count/3<15e5&&(r.booleanMeshSetAddress=TH.getMeshSet(r.geometry,!0===e,t)),-1===r.booleanMeshSetAddress)return;TH.transformMeshSet(r.booleanMeshSetAddress,NQ),r.booleanMatrixInvOld.copy(NQ).invert(),r.booleanWasTransformed=!1}else r instanceof HQ&&!0===r.needsTransformForDownstream?(TH.transformMeshSet(r.booleanMeshSetAddress,NQ),r.needsTransformForDownstream=!1):!0===r.booleanWasTransformed&&(TH.transformMeshSet(r.booleanMeshSetAddress,UQ.multiplyMatrices(NQ,r.booleanMatrixInvOld)),r.booleanMatrixInvOld.copy(NQ).invert(),r.booleanWasTransformed=!1)}catch(a){console.error(a),r.booleanMeshSetAddress=0,r.geometry.userData.booleanOperationDidFail=!0;continue}!1===TH.hasOpenEdges(r.booleanMeshSetAddress)||s===this.children.length-1&&2===this.booleanOp?(this.meshSetAddresses.push(r.booleanMeshSetAddress),r.geometry.userData.booleanOperationDidFail=!1):r.geometry.userData.booleanOperationDidFail="openEdges"}}if(0===this.meshSetAddresses.length)return this.geometry.setAttribute("position",new yb([],0)),void this.geometry.setDrawRange(0,0);if(!0===e)return TH.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Cb,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=TH.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(u6){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(u6)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,kX(this),IX(this)}dispose(){super.dispose(),this.geometry.dispose()}};(e=>{e.is=function(e){return $N.is(e)&&e instanceof Y_}})(WQ||(WQ={}));var GQ=(e,t)=>class extends(kQ(e,t)){updateState_Light(e,t){this.updateState_Entity(e,t),void 0!==e.color&&(this.color=t.shared.color(e.color)),void 0!==e.intensity&&(this.intensity=e.intensity),void 0!==e.depth&&(this.shadow.camera.far=e.depth,this.shadow.needsUpdate=!0),void 0!==e.shadows&&(this.castShadow=e.shadows)}},qQ=e=>e instanceof qH,YQ=e=>null!==e&&e instanceof HQ,XQ=e=>DQ.is(e),QQ=new Zv(1,1,1),KQ=new Zv,ZQ=new Zv,JQ=new Kv,$Q=class extends(wQ(QE)){constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:15),this.object=e,this.dummy=new OA,this.object.updateMatrixWorld(),this.name="EmptyObjectHelper: ".concat(e.uuid),this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){EQ(this.object,$Q.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(KQ,JQ,ZQ),this.matrix.compose(KQ,JQ,QQ),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},eK=class extends(kQ(OA,$Q)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&1===Object.keys(e).length&&t.scene.reloadSplats()}},tK=class extends(kQ(OA,$Q)){constructor(e,t,i){super(),this.super_Entity(e,t),this.context=i,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},iK=0,nK=1,rK="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",aK=class extends Yb{constructor(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super({name:"BokehMaterial",defines:{PASS:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"2":"1"},uniforms:{kernel64:new ME(null),kernel16:new ME(null),inputBuffer:new ME(null),cocBuffer:new ME(null),texelSize:new ME(new Av),scale:new ME(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}",vertexShader:rK}),this.toneMapped=!1,e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=new Float32Array(128),t=new Float32Array(32),i=0,n=0;for(let s=0;s<80;++s){let r=2.39996323*s,a=Math.sqrt(s)/Math.sqrt(80),o=a*Math.cos(r),l=a*Math.sin(r);s%5===0?(t[n++]=o,t[n++]=l):(e[i++]=o,e[i++]=l)}let r=[],a=[];for(let s=0;s<128;)r.push(new qv(e[s++],e[s++],e[s++],e[s++]));for(let s=0;s<32;)a.push(new qv(t[s++],t[s++],t[s++],t[s++]));this.uniforms.kernel64.value=r,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function sK(e,t,i){return e*(t-i)-t}function oK(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var lK=class extends Yb{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ME(null),focusDistance:new ME(0),focusRange:new ME(0),cameraNear:new ME(.3),cameraFar:new ME(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:rK}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-sK(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=oK(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-sK(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=oK(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Qb?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},cK=class extends Yb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av;super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ME(null),texelSize:new ME(new Av),halfTexelSize:new ME(new Av),kernel:new ME(0),scale:new ME(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},hK=class extends Yb{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ME(null),opacity:new ME(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:rK}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},uK={DEPTH:0,LUMA:1,COLOR:2},dK={DISABLED:0,DEPTH:1,CUSTOM:2},pK=class extends Yb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uK.COLOR;super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:Qm.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new ME(null),depthBuffer:new ME(null),predicationBuffer:new ME(null),texelSize:new ME(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},fK={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},mK=class extends Yb{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super({name:"EffectMaterial",defines:{THREE_REVISION:Qm.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ME(null),depthBuffer:new ME(null),resolution:new ME(new Av),texelSize:new ME(new Av),cameraNear:new ME(.3),cameraFar:new ME(1e3),aspect:new ME(1),time:new ME(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(fK.FRAGMENT_HEAD,e.get(fK.FRAGMENT_HEAD)).replace(fK.FRAGMENT_MAIN_UV,e.get(fK.FRAGMENT_MAIN_UV)).replace(fK.FRAGMENT_MAIN_IMAGE,e.get(fK.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(fK.VERTEX_HEAD,e.get(fK.VERTEX_HEAD)).replace(fK.VERTEX_MAIN_SUPPORT,e.get(fK.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Qb?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return fK}},gK=class extends Yb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super({name:"LuminanceMaterial",defines:{THREE_REVISION:Qm.replace(/\D+/g,"")},uniforms:{inputBuffer:new ME(null),threshold:new ME(0),smoothing:new ME(1),range:new ME(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:rK}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},vK=0,yK=1,bK=class extends Yb{constructor(){super({name:"MaskMaterial",uniforms:{maskTexture:new ME(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),inputBuffer:new ME(null),strength:new ME(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:rK}),this.toneMapped=!1,this.setColorChannel(iK),this.setMaskFunction(vK)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Pg&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},xK=class extends Yb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Av,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Av;super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new ME(null),searchTexture:new ME(null),areaTexture:new ME(null),resolution:new ME(t),texelSize:new ME(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},wK=new Xb,AK=null;var SK=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NA,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wK;this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new Nb(function(){if(null===AK){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(AK=new Cb).setAttribute?(AK.setAttribute("position",new mb(e,3)),AK.setAttribute("uv",new mb(t,2))):(AK.addAttribute("position",new mb(e,3)),AK.addAttribute("uv",new mb(t,2)))}return AK}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new NA),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e){}render(e,t,i,n,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof NA||t===this.renderer)continue;this[e].dispose()}}}},_K=class extends SK{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super("CopyPass"),this.fullscreenMaterial=new hK,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Yv(1,1,{minFilter:Cg,magFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,n,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){void 0!==i&&(this.renderTarget.texture.type=i,i!==Pg?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===$g&&(this.renderTarget.texture.encoding=$g))}},EK=class extends SK{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,n,r){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},CK=new Fv,MK=class extends SK{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,n,r){let a=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==a,c=s>=0;l?(CK.copy(e.getClearColor(CK)),e.setClearColor(a,c?s:o)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(CK,o):c&&e.setClearAlpha(o)}},TK=-1,PK=class extends ov{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TK,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TK,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.resizable=e,this.base=new Av(1,1),this.preferred=new Av(t,i),this.target=this.preferred,this.s=n}get width(){let e,{base:t,preferred:i,scale:n}=this;return e=i.width!==TK?i.width:i.height!==TK?Math.round(i.height*(t.width/Math.max(t.height,1))):Math.round(t.width*n),e}set width(e){this.preferredWidth=e}get height(){let e,{base:t,preferred:i,scale:n}=this;return e=i.height!==TK?i.height:i.width!==TK?Math.round(i.width/Math.max(t.width/Math.max(t.height,1),1)):Math.round(t.height*n),e}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(TK),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return TK}},DK=!1,OK=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case 2:t=this.materialsFlatShadedDoubleSide;break;case 1:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case 2:t=this.materialsDoubleSide;break;case 1:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=0;t[2].skinning=!0,this.materialsBackSide=t.map(t=>{let i=t.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=1,i}),this.materialsDoubleSide=t.map(t=>{let i=t.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=2,i}),this.materialsFlatShaded=t.map(t=>{let i=t.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(t=>{let i=t.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=1,i}),this.materialsFlatShadedDoubleSide=t.map(t=>{let i=t.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=2,i})}}render(e,t,i){let n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,DK){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let e of n)e[0].material=e[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return DK}static set workaroundEnabled(e){DK=e}},kK=class extends SK{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new MK,this.overrideMaterialManager=null===i?null:new OK(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new OK(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,n,r){let a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,c=a.background,h=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;null!==o&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=l,a.background=c,e.shadowMap.autoUpdate=h}},IK=class extends SK{constructor(e,t){let{resolutionScale:i=1,width:n=PK.AUTO_SIZE,height:r=PK.AUTO_SIZE,renderTarget:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super("DepthPass"),this.needsSwap=!1,this.renderPass=new kK(e,t,new _A({depthPacking:3201}));let s=this.renderPass;s.skipShadowMapUpdate=!0,s.ignoreBackground=!0;let o=s.getClearPass();o.overrideClearColor=new Fv(16777215),o.overrideClearAlpha=1,this.renderTarget=a,void 0===this.renderTarget&&(this.renderTarget=new Yv(1,1,{minFilter:Sg,magFilter:Sg,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new PK(this,n,r,i);l.addEventListener("change",e=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,n,r){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},RK=(new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),{SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18}),LK=new Map([[RK.SKIP,null],[RK.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[RK.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[RK.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[RK.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[RK.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[RK.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[RK.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[RK.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[RK.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[RK.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[RK.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[RK.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[RK.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),zK=class extends ov{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.f=e,this.opacity=new ME(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return LK.get(this.blendFunction)}},BK={NONE:0,DEPTH:1,CONVOLUTION:2},jK=class extends ov{constructor(e,t){let{attributes:i=BK.NONE,blendFunction:n=RK.SCREEN,defines:r=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=r,this.uniforms=a,this.extensions=s,this.blendMode=new zK(n),this.blendMode.addEventListener("change",e=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof NA||t===this.renderer)continue;this[e].dispose()}}}};function FK(e,t,i){for(let n of t){let t="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let e of i.entries())null!==e[1]&&i.set(e[0],e[1].replace(r,t))}}function NK(e,t,i,n,r,a,s){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==o.get("fragment")&&/mainImage/.test(o.get("fragment")),c=void 0!==o.get("fragment")&&/mainUv/.test(o.get("fragment")),h=[],u=[],d=!1,p=!1;if(void 0===o.get("fragment"))console.error("Missing fragment shader",t);else if(c&&0!==(s&BK.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||c){let f=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=mK.Section;if(c){let t="\t".concat(e,"MainUv(UV);\n");i.set(m.FRAGMENT_MAIN_UV,i.get(m.FRAGMENT_MAIN_UV)+t),d=!0}if(null!==o.get("vertex")&&/mainSupport/.test(o.get("vertex"))){let t="\t".concat(e,"MainSupport(");t+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?"vUv);\n":");\n",i.set(m.VERTEX_MAIN_SUPPORT,i.get(m.VERTEX_MAIN_SUPPORT)+t),h=h.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(e=>e[1])),u=u.concat(h).concat([...o.get("vertex").matchAll(f)].map(e=>e[1]))}u=u.concat([...o.get("fragment").matchAll(f)].map(e=>e[1])),u=u.concat([...t.defines.keys()].map(e=>e.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((t,i)=>a.set(e+i.charAt(0).toUpperCase()+i.slice(1),t)),t.defines.forEach((t,i)=>r.set(e+i.charAt(0).toUpperCase()+i.slice(1),t)),FK(e,u,r),FK(e,u,o);let g=t.blendMode;if(n.set(g.blendFunction,g),l){let t=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,n="".concat(e,"MainImage(color0, UV, ");0!==(s&BK.DEPTH)&&t.test(o.get("fragment"))&&(n+="depth, ",p=!0),n+="color1);\n\t";let r=e+"BlendOpacity";a.set(r,g.opacity),n+="color0 = blend".concat(g.blendFunction,"(color0, color1, ").concat(r,");\n\n\t"),i.set(m.FRAGMENT_MAIN_IMAGE,i.get(m.FRAGMENT_MAIN_IMAGE)+n),n="uniform float ".concat(r,";\n\n"),i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+n)}i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+o.get("fragment")+"\n"),null!==o.get("vertex")&&i.set(m.VERTEX_HEAD,i.get(m.VERTEX_HEAD)+o.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:h,transformedUv:d,readDepth:p}}var UK=class extends SK{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];super("EffectPass"),this.fullscreenMaterial=new mK(null,null,null,e),this.effects=i.sort((e,t)=>t.attributes-e.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=mK.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,n=new Map,r=new Map,a=new Set,s=0,o=0,l=0,c=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===RK.SKIP)l|=d.getAttributes()&BK.DEPTH;else if(0!==(l&d.getAttributes()&BK.CONVOLUTION))console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let e=NK("e"+s++,d,t,i,n,r,l);if(o+=e.varyings.length,c=c||e.transformedUv,h=h||e.readDepth,null!==d.extensions)for(let t of d.extensions)a.add(t)}let u=/\bblend\b/g;for(let d of i.values()){let i=d.getShaderCode().replace(u,"blend".concat(d.blendFunction));t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+i+"\n")}if(0!==(l&BK.DEPTH)){if(h){let i="float depth = readDepth(UV);\n\n\t";t.set(e.FRAGMENT_MAIN_IMAGE,i+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(c){let i="vec2 transformedUv = vUv;\n";t.set(e.FRAGMENT_MAIN_UV,i+t.get(e.FRAGMENT_MAIN_UV)),n.set("UV","transformedUv")}else n.set("UV","vUv");t.forEach((e,t,i)=>i.set(t,e.trim().replace(/^#/,"\n#"))),this.uniformCount=r.size,this.varyingCount=o,this.skipRendering=0===s,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(r).setDefines(n)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,n,r){for(let a of this.effects)a.update(e,t,n);if(!this.skipRendering||this.renderToScreen){let r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let n of this.effects)n.initialize(e,t,i),n.addEventListener("change",e=>this.handleEvent(e));this.updateMaterial(),this.verifyResources(),void 0!==i&&i!==Pg&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},VK=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],WK=class extends SK{constructor(){let{resolutionScale:e=.5,width:t=PK.AUTO_SIZE,height:i=PK.AUTO_SIZE,kernelSize:n=QK.LARGE}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("KawaseBlurPass"),this.renderTargetA=new Yv(1,1,{minFilter:Cg,magFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new PK(this,t,i,e);r.addEventListener("change",e=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new cK,this.ditheredBlurMaterial=new cK,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=n}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,n,r){let a,s,o=this.scene,l=this.camera,c=this.renderTargetA,h=this.renderTargetB,u=VK[this.kernelSize],d=this.blurMaterial,p=t;for(this.fullscreenMaterial=d,a=0,s=u.length-1;a<s;++a){let t=0===(1&a)?c:h;d.kernel=u[a],d.inputBuffer=p.texture,e.setRenderTarget(t),e.render(o,l),p=t}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=u[a],d.inputBuffer=p.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(o,l)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(n,r),this.ditheredBlurMaterial.setSize(n,r)}initialize(e,t,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Pg?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===$g&&(this.renderTargetA.texture.encoding=$g,this.renderTargetB.texture.encoding=$g))}static get AUTO_SIZE(){return PK.AUTO_SIZE}},HK=class extends SK{constructor(){let{width:e=PK.AUTO_SIZE,height:t=PK.AUTO_SIZE,renderTarget:i,luminanceRange:n,colorOutput:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("LuminancePass"),this.fullscreenMaterial=new gK(r,n),this.needsSwap=!1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new Yv(1,1,{minFilter:Cg,magFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new PK(this,e,t);a.addEventListener("change",e=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,n,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){void 0!==i&&i!==Pg&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},GK=class extends SK{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new MK(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,n,r){let a=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,h,4294967295),s.stencil.setClear(u),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},qK=class extends SK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,i,n,r){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){void 0!==i&&i!==Pg&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},YK=.001,XK=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*YK}getFixedDelta(){return this.fixedDelta*YK}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return this.elapsed*YK}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},QK={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},KK=class extends jK{constructor(){let{blendFunction:e=RK.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:n=.5,intensity:r=1,width:a=PK.AUTO_SIZE,height:s=PK.AUTO_SIZE,kernelSize:o=QK.LARGE}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new ME(null)],["intensity",new ME(r)]])}),this.renderTarget=new Yv(1,1,{minFilter:Cg,magFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new HK({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new WK({resolutionScale:n,width:a,height:s,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",e=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let n=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,n),this.blurPass.render(e,n,n)):this.blurPass.render(e,t,n)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),void 0!==i&&(this.renderTarget.texture.type=i,e.outputEncoding===$g&&(this.renderTarget.texture.encoding=$g))}},ZK=class extends jK{constructor(){let{blendFunction:e=RK.NORMAL,brightness:t=0,contrast:i=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new ME(t)],["contrast",new ME(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},JK=class extends jK{constructor(){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:arguments.length>0&&void 0!==arguments[0]?arguments[0]:RK.NORMAL})}},$K=class extends jK{constructor(){let{blendFunction:e=RK.NORMAL,offset:t=new Av(.001,5e-4)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:BK.CONVOLUTION,uniforms:new Map([["offset",new ME(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},eZ=class extends jK{constructor(e){let{blendFunction:t=RK.NORMAL,worldFocusDistance:i,worldFocusRange:n,focusDistance:r=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,width:l=PK.AUTO_SIZE,height:c=PK.AUTO_SIZE}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:BK.DEPTH,uniforms:new Map([["nearColorBuffer",new ME(null)],["farColorBuffer",new ME(null)],["nearCoCBuffer",new ME(null)],["scale",new ME(1)]])}),this.camera=e,this.renderTarget=new Yv(1,1,{minFilter:Cg,magFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new qK(new lK(e));let h=this.cocMaterial;h.focusDistance=r,h.focusRange=s,void 0!==i&&(h.worldFocusDistance=i),void 0!==n&&(h.worldFocusRange=n),this.blurPass=new WK({kernelSize:QK.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",e=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new qK(new bK(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=yK,d.colorChannel=nK,this.bokehNearBasePass=new qK(new aK(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new qK(new aK(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new qK(new aK(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new qK(new aK(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return oK(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let n=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(null!==this.target){let e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=e}this.cocPass.render(e,null,r),this.blurPass.render(e,r,a),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,n),this.bokehFarFillPass.render(e,n,this.renderTargetFar),this.bokehNearBasePass.render(e,t,n),this.bokehNearFillPass.render(e,n,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let n=i.width,r=i.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(i=>i.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(e=>e.setSize(n,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(e=>e.fullscreenMaterial.setSize(n,r))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(n=>n.initialize(e,t,i)),this.blurPass.initialize(e,t,Pg),void 0!==i&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===$g&&(this.renderTarget.texture.encoding=$g,this.renderTargetNear.texture.encoding=$g,this.renderTargetFar.texture.encoding=$g,this.renderTargetMasked.texture.encoding=$g))}},tZ=(new Zv,new My,class extends jK{constructor(){let{blendFunction:e=RK.NORMAL,hue:t=0,saturation:i=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new ME(new Zv)],["saturation",new ME(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}}),iZ=(new Fv,class extends jK{constructor(){let{blendFunction:e=RK.SCREEN,premultiply:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}}),nZ=class extends jK{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new ME(!1)],["d",new ME(new Av)]])}),this.resolution=new Av,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},rZ=(Math.PI,new Zv,new Zv,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),aZ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",sZ={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},oZ=class extends jK{constructor(){let e,t,{preset:i=sZ.MEDIUM,edgeDetectionMode:n=uK.COLOR,predicationMode:r=dK.DISABLED}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:RK.NORMAL,attributes:BK.CONVOLUTION|BK.DEPTH,uniforms:new Map([["weightMap",new ME(null)]])}),arguments.length>1&&(e=arguments[0],t=arguments[1],arguments.length>2&&(i=arguments[2]),arguments.length>3&&(n=arguments[3])),this.renderTargetEdges=new Yv(1,1,{minFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new MK(!0,!1,!1),this.clearPass.overrideClearColor=new Fv(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new qK(new pK),this.edgeDetectionMaterial.edgeDetectionMode=n,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new qK(new xK);let a=new F_;a.onLoad=()=>{let i=new Gv(e);i.name="SMAA.Search",i.magFilter=Sg,i.minFilter=Sg,i.generateMipmaps=!1,i.needsUpdate=!0,i.flipY=!0,this.weightsMaterial.searchTexture=i;let n=new Gv(t);n.name="SMAA.Area",n.magFilter=Cg,n.minFilter=Cg,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!1,this.weightsMaterial.areaTexture=n,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),void 0!==e&&void 0!==t?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(e=new Image,t=new Image,e.addEventListener("load",()=>a.itemEnd("search")),t.addEventListener("load",()=>a.itemEnd("area")),e.src=rZ,t.src=aZ),this.applyPreset(i)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case sZ.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case sZ.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case sZ.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case sZ.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0}}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return rZ}static get areaImageDataURL(){return aZ}},lZ={DEFAULT:0,ESKIL:1},cZ=class extends jK{constructor(){let{blendFunction:e=RK.NORMAL,technique:t=lZ.DEFAULT,eskil:i=!1,offset:n=.5,darkness:r=.5}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new ME(n)],["darkness",new ME(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===lZ.ESKIL}set eskil(e){this.technique=e?lZ.ESKIL:lZ.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}};new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),new Map([[uZ(0,0,0,0),new Float32Array([0,0,0,0])],[uZ(0,0,0,1),new Float32Array([0,0,0,1])],[uZ(0,0,1,0),new Float32Array([0,0,1,0])],[uZ(0,0,1,1),new Float32Array([0,0,1,1])],[uZ(0,1,0,0),new Float32Array([0,1,0,0])],[uZ(0,1,0,1),new Float32Array([0,1,0,1])],[uZ(0,1,1,0),new Float32Array([0,1,1,0])],[uZ(0,1,1,1),new Float32Array([0,1,1,1])],[uZ(1,0,0,0),new Float32Array([1,0,0,0])],[uZ(1,0,0,1),new Float32Array([1,0,0,1])],[uZ(1,0,1,0),new Float32Array([1,0,1,0])],[uZ(1,0,1,1),new Float32Array([1,0,1,1])],[uZ(1,1,0,0),new Float32Array([1,1,0,0])],[uZ(1,1,0,1),new Float32Array([1,1,0,1])],[uZ(1,1,1,0),new Float32Array([1,1,1,0])],[uZ(1,1,1,1),new Float32Array([1,1,1,1])]]);function hZ(e,t,i){return e+(t-e)*i}function uZ(e,t,i,n){let r=hZ(e,t,.75),a=hZ(i,n,.75);return hZ(r,a,.875)}var dZ=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(e){this.effect.blendMode.opacity.value=e},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(e){this.effect.blendMode.setBlendFunction(Number(e))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=RK.NORMAL}},pZ=class extends dZ{constructor(){super(KK),this.blendFunction=RK.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},fZ=class extends dZ{constructor(){super(ZK)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},mZ=class extends dZ{constructor(){super($K),this.effect.offset=new Av(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},gZ=class extends dZ{constructor(){super(JK)}},vZ=class extends dZ{constructor(){super(tZ),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},yZ=class extends dZ{constructor(){super(iZ),this.blendFunction=RK.OVERLAY}},bZ=class extends dZ{constructor(){super(cZ)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},xZ=class extends dZ{constructor(e){super(eZ)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&!1===this.isPerspectiveCamera||!e.isPerspectiveCamera&&!0===this.isPerspectiveCamera)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},wZ=class extends dZ{constructor(){super(nZ)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},AZ=class extends Yb{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new ME(null)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}",fragmentShader:"#define GLSLIFY 1\nlayout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},SZ=class extends SK{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new AZ,this.resolutionVector=new Av,this.resolveMaterial=new Yb({name:"TAAResolveMaterial",uniforms:{inputBuffer:new ME(null),historyBuffer:new ME(null),velocityBuffer:new ME(null),depthBuffer:new ME(null),resolution:new ME(new Av)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\n#include <common>\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;\n#define USE_YCOCG\n#define USE_CATMULL_ROM\nconst float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){\n#ifdef USE_YCOCG\nvec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);\n#else\nreturn texture(tex,uv);\n#endif\n}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){\n#ifdef CHOOSE_LONGEST_MOTION_VECTOR\nfloat longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;\n#else\nfloat closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;\n#endif\n}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);\n#ifdef USE_CATMULL_ROM\nvec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);\n#else\nvec4 previousColor=sample_color(historyBuffer,previousPixelPos);\n#endif\n#ifdef USE_YCOCG\npreviousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);\n#endif\nvec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);\n#ifdef USE_YCOCG\nvec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;\n#endif\nvec4 previousColorClipped=clamp(previousColor,cmin,cmax);\n#ifdef LUMINANCE_DIFFERENCES\n#ifdef USE_YCOCG\nfloat lum0=currentColor.r;float lum1=previousColorClipped.r;\n#else\nfloat lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);\n#endif\nfloat unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));\n#else\nconst float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);\n#endif\n#ifdef USE_YCOCG\ngl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);\n#else\ngl_FragColor=result;\n#endif\n}"}),this.historyRenderTarget=new Yv(1024,1024,{minFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Yv(1024,1024,{minFilter:Cg,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},_Z=class extends SK{constructor(e,t,i){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new IK(e,t,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new AZ,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new AZ,this.depthPass=new IK(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,i){let n=this.camera.layers.mask,r=e;r.setRenderTarget(r.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],r.clear(),r.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,i),r.shadowMap.needsUpdate=!1,r.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=n}},EZ=new NA,CZ=new Yb({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        layout(location = 1) out vec4 gVelocity;\n\n        void main() {\n            gl_FragColor = vec4(0.0);\n\t\t\tgVelocity = vec4(0.0);\n        }\n    "}),MZ=class extends SK{constructor(e,t,i){super("OpaquePass",null!==t&&void 0!==t?t:EZ,i),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=null!==e&&void 0!==e?e:EZ}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(e=>{e.layers.isEnabled(3)&&e instanceof qH&&(this.originalMaterials.push([e,e.material]),e.material=CZ)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(e=>{e[0].material=e[1]})}},TZ=class{constructor(e){let{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:n=0,frameBufferType:r=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.renderer=e,this.helperStartIndex=0,this.copyPass=new _K,this.depthTexture=null,this.timer=new XK,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,i,r,n,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,i,r,n,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,i,r,n,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){var t,i;let n=e.getSize(new Av),r=null!==(t=null===(i=e.getContext().getContextAttributes())||void 0===i?void 0:i.alpha)&&void 0!==t&&t,a=this.inputBuffer.texture[0].type;a===Pg&&e.outputEncoding===$g&&(this.inputBuffer.texture[0].encoding=$g,this.outputBuffer.texture[0].encoding=$g,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(n.width,n.height,!1);for(let t of this.passes)t.initialize(e,r,a)}}replaceRenderer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.renderer,n=i.domElement.parentNode;return this.setRenderer(e),t&&null!==n&&(n.removeChild(i.domElement),n.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new RA(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=zg,e.type=Ig):e.type=Dg,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,n,r,a){let s,o=this.renderer,l=null===o?new Av:o.getDrawingBufferSize(new Av),c={minFilter:Cg,magFilter:Cg,wrapS:wg,wrapT:wg,stencilBuffer:t,depthBuffer:e};return n>0?(s=new Yv(l.width,l.height,c),s.samples=n):(r?(s=new Qv(l.width,l.height,2,c),s.texture[1].type=kg):s=new Yv(l.width,l.height,c),s.depthTexture=new RA(2048,2048),s.depthTexture.type=Og),i===Pg&&null!==o&&o.outputEncoding===$g&&(Array.isArray(s.texture)?s.texture.forEach(e=>e.encoding=$g):s.texture.encoding=$g),Array.isArray(s.texture)?s.texture.forEach((e,t)=>{e.name="EffectComposer.Buffer ".concat(r," ").concat(t),e.generateMipmaps=!1}):(s.texture.name="EffectComposer.Buffer ".concat(r),s.texture.generateMipmaps=!1),s.name=a,s}addPass(e,t){var i,n;let r,a=this.passes,s=this.renderer,o=s.getDrawingBufferSize(new Av),l=null!==(i=null===(n=s.getContext().getContextAttributes())||void 0===n?void 0:n.alpha)&&void 0!==i&&i;if(e.MRTCompatible&&(r=this.inputBuffer.texture[0].type),e.MRTCompatible||(r=this.inputBuffer.texture.type),e.setRenderer(s),e.setSize(o.width,o.height),e.initialize(s,l,r),this.autoRenderToScreen&&(a.length>0&&(a[a.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?a.splice(t,0,e):a.push(e),this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let t=this.createDepthTexture();for(e of a)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,i=t.indexOf(e);if(-1!==i&&t.splice(i,1).length>0){if(null!==this.depthTexture){let i=(e,t)=>e||t.needsDepthTexture;t.reduce(i,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t,i,n,r,a=this.renderer,s=this.copyPass,o=this.inputBuffer,l=this.outputBuffer,c=this.inputBufferSingle,h=this.outputBufferSingle,u=!1;void 0===e&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(a,o,l,e,u):d.render(a,c,h,e,u),d.needsSwap&&(u&&(s.renderToScreen=d.renderToScreen,t=a.getContext(),i=a.state.buffers.stencil,i.setFunc(t.NOTEQUAL,1,4294967295),s.render(a,o,l,e,u),i.setFunc(t.EQUAL,1,4294967295)),n=o,r=c,o=l,c=h,l=n,h=r),d instanceof GK?u=!0:d instanceof EK&&(u=!1))}setSize(e,t,i){let n=this.renderer;if(this._width=e,this._height=t,void 0===e||void 0===t){let i=n.getSize(new Av);e=i.width,t=i.height}n.setSize(e,t,i);let r=n.getDrawingBufferSize(new Av);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height),this.inputBufferSingle.setSize(r.width,r.height),this.outputBufferSingle.setSize(r.width,r.height);for(let a of this.passes)a.setSize(r.width,r.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),null!==this.inputBufferSingle&&this.inputBufferSingle.dispose(),null!==this.outputBufferSingle&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},PZ=new Yb({name:"CombineMaterial",uniforms:{inputBufferA:new ME(null),inputBufferB:new ME(null)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n    vUv = position.xy * 0.5 + 0.5;\n}\n",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D inputBufferA;\n    uniform sampler2D inputBufferB;\n\n    // TODO: Why do we need these when postpro of framemode is enabled???\n    layout(location = 1) out vec4 gVelocity;\n\n    void main() {\n\tvec4 resA = texture2D(inputBufferA, vUv);\n\tvec4 resB = texture2D(inputBufferB, vUv);\n    float a = resA.a + resB.a * ( 1.0 - resA.a );\n\n\tvec4 res;\n\tres.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));\n\tres.a = resA.a + resB.a * (1.0 - resA.a);\n\tgl_FragColor = res;\n    gVelocity = vec4(0.0);\n    }\n"}),DZ=class extends SK{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=PZ,this.helperPass=new MZ(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new MZ(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new oZ({preset:sZ.LOW,edgeDetectionMode:uK.COLOR});this.effectPass=new UK(this.camera,t),this.rt=new Yv(10,10,{minFilter:Cg,magFilter:Cg,wrapS:wg,wrapT:wg,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,i){this.rt.depthTexture=t.depthTexture;let n=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(n),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},OZ=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],kZ=new Yb({vertexShader:"#define GLSLIFY 1\n#include <skinning_pars_vertex>\n#include <morphtarget_pars_vertex>\nout vec3 n;void main(){\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\nvec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}",fragmentShader:"#define GLSLIFY 1\nin vec3 n;void main(){gl_FragColor=vec4(n,1.0);}"}),IZ=new Yb({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){\n#ifdef DEBUG\nfloat d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);\n#else\nvec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;\n#endif\n}",uniforms:{texture_ao_lrez:new ME(null),texture_depth_lrez:new ME(null),texture_depth_hrez:new ME(null),near:new ME(null),far:new ME(null)}}),RZ=class extends SK{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,n=1024;this.gBuffer=new Yv(i,n,{type:sk?kg:Og,depthTexture:new RA(i,n),minFilter:Cg,magFilter:Cg}),this.depthBufferHighRes=new Yv(i,n,{depthTexture:new RA(i,n)}),this.aoBuffer=new Yv(i,n,{minFilter:Cg,magFilter:Cg}),this.splineScene=e,this.splineCamera=t;let r=new Float32Array(2*OZ.length);for(let s=0;s<OZ.length;s++){let e=2*s;r[e+0]=OZ[s][0],r[e+1]=OZ[s][1]}this.blueNoiseInDiskTexture=new GA(r,OZ.length,1,jg,Og),this.blueNoiseInDiskTexture.wrapS=xg,this.blueNoiseInDiskTexture.wrapT=xg,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new Yb({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}\n#define USE_GBUFFER_NORMALS\nvoid main(){vec3 view_space_p=get_view_position(v_uv);\n#ifdef USE_GBUFFER_NORMALS\nvec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;\n#else\nvec3 view_space_n=-rebuild_normal(v_uv,view_space_p);\n#endif\nfloat radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}",uniforms:{near:new ME(null),far:new ME(null),fov:new ME(null),proj_info:new ME(new qv),is_ortho:new ME(!1),resolution:new ME(new Av),radius_of_influence:new ME(8),radius_in_screen_space:new ME(1),exponent:new ME(1),ao_color:new ME(new Zv),bias:new ME(.5),texture_depth:new ME(null),texture_normals:new ME(null),texture_blue_noise:new ME(null),texture_blue_noise_in_disk:new ME(this.blueNoiseInDiskTexture),frame_index:new ME(0),fog_enabled:new ME(!1),fog_near:new ME(1),fog_far:new ME(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Yv(i,n,{minFilter:Cg,magFilter:Cg,wrapS:wg,wrapT:wg,depthBuffer:!1,type:Og});let a=new oZ({preset:sZ.ULTRA,edgeDetectionMode:uK.COLOR});this.effectPass=new UK(this.camera,a)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let i=this._runHalfRes?.5:1,n=e*i,r=t*i;this.gBuffer.setSize(n,r),this.aoBuffer.setSize(n,r),this.hbaoMaterial.uniforms.resolution.value.set(n,r),this.aaBuffer.setSize(n,r),this.effectPass.setSize(n,r)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,IZ.uniforms.texture_depth_hrez.value=e,IZ.needsUpdate=!0}render(e,t,i){this.splineScene.overrideMaterial=kZ;let n=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=n,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let e=this.splineCamera.perspCamera.projectionMatrix.elements,t=2/e[0],i=2/e[5],n=-(1-e[8])/e[0],r=-(1+e[9])/e[5];this.hbaoMaterial.uniforms.proj_info.value.set(t,i,n,r);let a=this.splineCamera.perspCamera.fov*(Math.PI/180),s=this.hbaoMaterial.uniforms.resolution.value.y/(2*Math.tan(.5*a)),o=.5*this.hbaoMaterial.uniforms.radius_of_influence.value*s;this.hbaoMaterial.uniforms.radius_in_screen_space.value=o,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let e=this.splineCamera.orthoCamera.projectionMatrix.elements,t=2/e[0],i=2/e[5],n=-(1+e[12])/e[0],r=-(1-e[13])/e[5];this.hbaoMaterial.uniforms.proj_info.value.set(t,i,n,r);let a=this.hbaoMaterial.uniforms.resolution.value.y/i*.5,s=this.hbaoMaterial.uniforms.radius_of_influence.value*a;this.hbaoMaterial.uniforms.radius_in_screen_space.value=s,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=IZ,IZ.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,IZ.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,IZ.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},LZ=class extends qK{constructor(){super(new Yb({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tMap;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uCoords;\n\n// Draws a rectangle at center <st> with size <size>\nfloat rectangle(vec2 st, vec2 size) {\n    size = vec2(0.5) - size * 0.5;\n    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));\n    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));\n\n    return uv.x * uv.y;\n}\n\nuniform vec2 uSize;\nuniform float uScale;\nuniform float uDPR;\nuniform float uCurrent;\nuniform vec3 uSceneColor;\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n    screenUv *= 1.0 / uDPR;\n\n    vec2 center = vec2(0.5, -0.5);\n    vec2 outsideUv = screenUv;\n    outsideUv += center;\n    outsideUv -= uCoords.xy / uResolution.xy;\n    outsideUv = (outsideUv - 0.5) + 0.5;\n    outsideUv -= center;\n    vec2 s = (uSize / uResolution) * uScale;\n    float isOutside = 1.0 - rectangle(outsideUv, s);\n    \n    vec2 mid = vec2(0.5);\n    vec2 insideUv = (screenUv - mid + s * mid) / s;\n    vec4 background = texture2D(tInput, screenUv);\n    vec4 image = texture2D(tMap, insideUv);\n    gl_FragColor = mix(image, background, isOutside);\n}\n",uniforms:{tInput:new ME(null),tMap:new ME(null),uResolution:new ME(new Av),uSize:new ME(new Av),uCoords:new ME(new Av),uScale:new ME(1),uSceneColor:new ME(new Fv(16711680)),uDPR:new ME(1),uCurrent:new ME(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},zZ=[],BZ=class extends qK{constructor(){super(new Yb({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D toScene;\nuniform sampler2D fromScene;\nuniform vec2 resolution;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nuniform float mixRatio;\nuniform sampler2D tMixTexture;\nuniform int useTexture;\nuniform float threshold;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( fromScene, screenUv );\n\tvec4 texel2 = texture2D( toScene, screenUv );\n\n\tif (useTexture==1) {\n\t\t\n\t\tvec4 transitionTexel = texture2D( tMixTexture, screenUv );\n\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\n\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixf );\n\t} else {\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixRatio );\n\t\t\n\t}\n}\n",uniforms:{toScene:new ME(null),fromScene:new ME(null),uResolution:new ME(new Av),uDPR:new ME(1),mixRatio:new ME(0),threshold:new ME(.1),useTexture:new ME(0),tMixTexture:{value:zZ[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},jZ=class extends qK{constructor(){super(new Yb({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D inputBuffer;\nuniform sampler2D blurredInputBuffer;\nuniform sampler2D overlay;\nuniform float blurIntensity;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( overlay, screenUv );\n\tvec4 texel2 = texture2D( inputBuffer, screenUv );\n\tvec4 texel3 = texture2D( blurredInputBuffer, screenUv );\n\n\tfloat blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;\n    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );\n}\n",uniforms:{inputBuffer:new ME(null),blurredInputBuffer:new ME(null),overlay:new ME(null),uResolution:new ME(new Av),uDPR:new ME(1),blurIntensity:new ME(0)}})),this._blurEnabled=!1,this.blurTarget=new Yv(1,1,{minFilter:Cg,magFilter:Cg,wrapS:wg,wrapT:wg}),this.blurPass=new WK({width:window.innerWidth,height:window.innerHeight,kernelSize:QK.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let e=t.data.backgroundBlur,i=e.radius;this._blurEnabled=e.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=i/3}}render(e,t,i,n,r){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,n,r)),super.render(e,t,i,n,r)}},FZ=class extends qK{constructor(){super(new Yb({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tOverlayImage;\nvarying vec2 vUv;\nuniform vec2 uResolution;\nuniform vec2 uRightBottom;\nuniform vec2 uImageSize;\nuniform float uScale;\nuniform float uDPR;\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {\n\tvec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);\n\tif (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\n\t\treturn vec4(0.0);\n\t}\n\treturn texture2D(image, uv);\n}\n\nvoid main() {\n    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);\n\tvec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);\n    vec4 background = texture2D(tInput, screenUV);\n    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);\n    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));\n}\n",uniforms:{tInput:new ME(null),tOverlayImage:new ME(null),uResolution:new ME(new Av),uImageSize:new ME(new Av),uRightBottom:new ME(new Av(20,20)),uScale:new ME(.25),uDPR:new ME(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function NZ(e,t){return t&&t.enabled&&e.push(t.effect),e}var UZ=e=>Object.values(RK).includes(e)?e:RK.NORMAL,VZ=class extends ov{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=mz.defaultData,this._scene=new NA,this._camera=new FQ,this.effects=new Map,this.blueNoiseTexture=new GA,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new hE,this.renderer=e,this.debug=!1,this.effects.set("bloom",new pZ),this.effects.set("chromaticAberration",new mZ),this.effects.set("vignette",new bZ),this.effects.set("noise",new yZ),this.effects.set("colorAverage",new gZ),this.effects.set("hueSaturation",new vZ),this.effects.set("brightnessContrast",new fZ),this.effects.set("depthOfField",new xZ),this.effects.set("pixelation",new wZ),this.effectComposer=new TZ(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new MZ(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new _Z(this.scene,this.camera,this.renderer),this.aoPass=new RZ(this.scene,this.camera),this.taaPass=new SZ,this.taaPass.renderToScreen=!1,this.helperPass=new DZ(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new LZ,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new jZ,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new FZ,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new BZ,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){void 0!==e?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let i=this.effectComposer.passes[t];!0!==i.enabled||e||!this._renderToScreen?i.renderToScreen=!1:(i.renderToScreen=!0,e=!0)}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new GA(e,128,128),this.blueNoiseTexture.wrapS=xg,this.blueNoiseTexture.wrapT=xg,this.blueNoiseTexture.minFilter=Sg,this.blueNoiseTexture.magFilter=Sg,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,i,n,r,a,s,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=i,this.aoPass.aoColor=n,this.aoPass.fogEnabled=r,this.aoPass.fogNear=a,this.aoPass.fogFar=s,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if(null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){var i;let e=[this.effects.get("pixelation")].reduce(NZ,[]);e.length>0&&(this.uvEffectPass=new UK(this.camera,...e),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(NZ,[]);if(t.length>0&&(this.effectPass=new UK(this.camera,...t),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&null!==(i=this.effects.get("depthOfField"))&&void 0!==i&&i.enabled&&void 0!==window)){let e=this.renderer.viewportWidth,t=this.renderer.viewportHeight;this.renderer.setSize(e-1,t-1),this.renderer.setSize(e,t)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new Av;this.renderer.getDrawingBufferSize(e),this._rt=new Yv(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:xg,wrapT:xg}),this._rt.samples=0,this._savePass=new _K(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new _K(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(!0===e?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(null!==e?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=null!==e,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t}=e,i=xe(e,Dm),n=!1;t!==this.postprocessingState.enabled&&(n=!0);for(let r of Object.entries(i)){let e=r[1],t=this.effects.get(r[0]);if(t){t.enabled!==e.enabled&&(n=!0),t.enabled=e.enabled;for(let[i,n]of Object.entries(e))"blendFunction"===i?t.blendFunction=UZ(n):t[i]=n}}this.postprocessingState=e,n&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,n){e instanceof qv?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,n),this.effectComposer.outputBuffer.scissor.set(e,t,i,n));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(e,t,i,n)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,n){e instanceof qv?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,n),this.effectComposer.outputBuffer.viewport.set(e,t,i,n))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.dispose()}},WZ=hx.lights_fragment_begin,HZ=hx.shadowmask_pars_fragment,GZ=null,qZ=new Yb({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n#include <skinning_pars_vertex>\n#include <morphtarget_pars_vertex>\n\t\nvoid main()\n{\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\nvec3 transformed = vec3(position);\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}}),YZ=new Gv,XZ=new Av,QZ=class extends jA{constructor(e){var t,i;super(e),t=this,this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Av,this.dummyCamera=new FQ,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.getContext(),a=0;e&&(a|=r.COLOR_BUFFER_BIT),i&&(a|=r.DEPTH_BUFFER_BIT),n&&(a|=r.STENCIL_BUFFER_BIT),r.clear(a),r.clearBufferfv(r.COLOR,1,[0,0,0,1])},this.pipeline=new VZ(this,null!==(i=null===e||void 0===e?void 0:e.needsDOFResize)&&void 0!==i&&i),this.autoClear=!1;let n=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=1,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let a=this.getContext();if(a&&"drawingBufferColorSpace"in a)try{a.drawingBufferColorSpace="display-p3"}catch(s){console.warn(s)}this.setPixelRatio=e=>{this._pixelRatio!==e&&(this._pixelRatio=e,n(e))},this.setSize=function(e,i){var n,a;let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(t.viewportWidth!==e||t.viewportHeight!==i)&&(t.viewportWidth=e,t.viewportHeight=i,r(e,i,s),null!==(n=t.normalRenderTarget)&&void 0!==n&&n.setSize(e*t._pixelRatio,i*t._pixelRatio),t._resizeTransmission(e,i),null!==(a=t.transmissionDepthTarget)&&void 0!==a&&a.setSize(e*t._pixelRatio/2,i*t._pixelRatio/2),t.pipeline.resize(e,i,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){void 0===this.aoRenderTarget&&(this.aoRenderTarget=new Yv(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Cg,magFilter:Cg,wrapS:wg,wrapT:wg,depthBuffer:!1}))}_resizeTransmission(e,t){var i,n;null!==(i=this.transmissionRenderTarget)&&void 0!==i&&i.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),null===(n=this.aoRenderTarget)||void 0===n||n.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return 1===Eq.transmissionLod.value}set hdTransmission(e){Eq.transmissionLod.value=!0===e?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new Yv(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Tg,magFilter:Cg,wrapS:wg,wrapT:wg,depthBuffer:!1}),this.transmissionDepthTarget=new Yv(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Sg,magFilter:Sg,depthBuffer:!1}))}createNormalRenderTarget(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new Yv(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Sg,magFilter:Sg,type:Og,depthTexture:new RA(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),t.traverseEntity(e=>{e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),qZ.uniforms.depthContrast.value=i instanceof FQ?(i.far-i.near)/1e4:1,t.overrideMaterial=qZ,this.render(t,i),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?S0:null,i.layers.enable(0),i.layers.enable(3),t.traverseEntity(e=>{e.layers.isEnabled(8)&&(e.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let n=t.height,r=t.width,a=this.viewportWidth/this.viewportHeight;r<n?r=n*a:n=r/a,this.dummyCamera.setViewplaneSize(r,n);for(let s=0;s<i;s++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t){var i;let{sceneHelpers:n=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:a,overrideNormal:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e instanceof E0?e.activePage:e,l=o.visible;o.visible=!0;let c=o.scene;this.xr.enabled&&(!1===this.isXRCopyPassSet&&null!==this.getRenderTarget()&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(o.bgColor,o.bgColor.a),o.penumbraSizeArray.forEach((e,t)=>{Eq.penumbraSize.value[t]=e}),Eq.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?Eq.resolution.value.set(this.resolution.x,this.resolution.y):Eq.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==s?(Eq.normalRenderTarget.value=s,Eq.normalRenderTargetDepth.value=YZ):c.needsNormal()&&(this.createNormalRenderTarget(),Eq.normalRenderTarget.value=this.normalRenderTarget.texture,Eq.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(c,o,t));let h=o.data.ao,u=h.occlusion;if(u&&(this.createAORenderTarget(),Eq.aoRenderTarget.value=this.aoRenderTarget.texture),Eq.aoEnabled.value=u,this.pipeline.setAmbientOcclusionParams(h.occlusion,h.radius,h.bias,o.aoColor,null!==o.fog,o.backupFog.near,o.backupFog.far,h.aoFullRes&&!sk),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&null!==(i=o.uiCanvas)&&void 0!==i&&i.enabled&&o.uiCanvas.texture&&o.uiCanvas.texture.image.width>0){let e=this.getSize(XZ),t=this.getPixelRatio();(o.uiCanvas.width!==this.viewportWidth||o.uiCanvas.height!==this.viewportHeight||o.uiCanvas.dpr!==t)&&o.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},t),o.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=o.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(e.x,e.y,t),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let e=this.getSize(XZ),t=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(e.x,e.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=t}let d=!1;if(void 0!==a)Eq.transmissionRenderTarget.value=a,Eq.transmissionRenderTargetDepth.value=YZ,this.pipeline.setTransmissionPassEnabled(!1);else{let e=c.needsTransmission();e&&(void 0===this.transmissionRenderTarget&&(d=!0),this.createTransmissionRenderTarget(),Eq.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Eq.aspectRatio.value=function(e,t){return e>=t?new Av(t/e,1):new Av(1,e/t)}(this.viewportWidth,this.viewportHeight),Eq.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(e)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=n,this.pipeline.sceneHelpersOnTop=r,this.pipeline.taaPass.enabled=Eq.taaEnabled.value,this.pipeline.scene=o,this.pipeline.camera=t,d&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==o.postprocessing&&(this.pipeline.updatePostprocessing(o.postprocessing),!n&&!r&&this.pipeline.disableHelpers()),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),c.shapeBlendIntances.forEach(e=>{e.onBeforeShadowPass(this)}),o.overrideMaterial=c.wireframeState?S0:null,this.pipeline.render(),Eq.taaEnabled.value&&(Eq.frameIndex.value=(Eq.frameIndex.value+1)%16),t instanceof FQ&&t.copyHistory(),o.visible=l}renderFromSceneForSceneTransitionPass(e,t,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let n=this.pipeline.sceneTransitionPass.uniforms;n.uDPR.value=window.devicePixelRatio,n.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,i,n,r;this._superDispose(),this.pipeline.dispose(),null!==(e=this.aoRenderTarget)&&void 0!==e&&e.dispose(),null!==(t=this.transmissionRenderTarget)&&void 0!==t&&t.dispose(),null!==(i=this.transmissionDepthTarget)&&void 0!==i&&i.dispose(),null!==(n=this.normalRenderTarget)&&void 0!==n&&n.dispose(),null===(r=this.normalRenderTarget)||void 0===r||null===(r=r.depthTexture)||void 0===r||r.dispose()}},KZ=class extends(wQ(WE)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,arguments.length>2&&void 0!==arguments[2]?arguments[2]:10066329),this.object=e,this.added=!1,this.name="DirectionalLightHelper: ".concat(e.uuid)}raycast(e,t){EQ(this.object,KZ.geometryHelper,e,t)}},ZZ=class extends(wQ(FE)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,arguments.length>2&&void 0!==arguments[2]?arguments[2]:6710886),this.object=e,this.name="PointLightHelper: ".concat(e.uuid)}raycast(e,t){EQ(this.object,ZZ.geometryHelper,e,t)}},JZ=class extends(wQ(jE)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:6710886),this.object=e,this.name="SpotLightHelper: ".concat(e.uuid)}raycast(e,t){EQ(this.object,JZ.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=JZ._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let n=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,a=this.cone.material.length;r<a;r++)this.cone.material[r].color.set(n);else this.cone.material.color.set(n)}}},$Z=JZ;$Z._vector=new Zv;var eJ=class extends OA{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new Nb(new cx(1,1),new db({transparent:!0,opacity:0,side:2})),this.add(this.caretMesh),this.selectionMesh=new Nb(new cx(1,1),new db({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:2})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e,t;return null!==(e=null===(t=this.object)||void 0===t?void 0:t.AD)&&void 0!==e?e:0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=.5*-this.caretHeight,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(void 0===this.object)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(void 0===this.object)return;let e=this.object,t=e.parent;null!==t&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),null!==t?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let i of this.children)i.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let i=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,i&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e){if(void 0===this.object)return;this.caretIndex=e;let t=this.object.wrappedText,[i,n]=iJ(t,e),[r,a]=e>0?iJ(t,e-1):[null,null];"\n"===(e>0&&t.length?t[r].charAt(a):null)&&(i++,n=0),this.current.start=e,this.current.end=void 0;let[s,o]=tJ(this.object,i,n),{AD:l,descender:c}=this.object,h=c+.5*l,{width:u,height:d,depth:p}=this.object.geometry.userData.parameters,f="string"==typeof u?0:u,m="string"==typeof d?0:d;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(s-.5*f,o+h+.5*m,p),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(void 0===this.object)return;let i=this.object.wrappedText;this.current.start=e,this.current.end=t;let n=[],r=[],a=function(e,t,i){let[n,r]=iJ(e,t),[a,s]=iJ(e,i),o=[];r>=e[n].length&&(n++,r=0);for(let l=n;l<=a;l++){let t=e[l],i=l===n?r:0,c=l===a?s:t.length;o.push([l,i,c])}return o}(i,e,t),{lineHeight:s,AD:o,descender:l}=this.object,c=l+.5*o-.5*s;for(let[g,v,y]of a)if(v!==y){let[e,t]=tJ(this.object,g,v),[i,a]=tJ(this.object,g,y);t+=c,a+=c,a+=s;let o=n.length/3;n.push(e,t,0),n.push(i,t,0),n.push(i,a,0),n.push(e,a,0),r.push(o+0,o+1,o+2),r.push(o+2,o+3,o+0)}let h=new Cb;h.setIndex(r),h.setAttribute("position",new yb(n,3));let{width:u,height:d,depth:p}=this.object.geometry.userData.parameters,f="string"==typeof u?0:u,m="string"==typeof d?0:d;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=h,this.selectionMesh.position.x=.5*-f,this.selectionMesh.position.y=.5*m,this.selectionMesh.position.z=p,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"previous";if(void 0===this.object||void 0===this.object.font)return;let n=this.object.wrappedText,r=n.length,a=this.object.lineHeight,s=r*a,{height:o,verticalAlign:l}=this.object.geometry.userData.parameters,c="string"==typeof o?0:o,h=0;3===l?h=c-s:2===l&&(h=.5*c-.5*s);let u=Math.min(Math.floor(Math.max(Math.min(-t-h,s),0)/a),r-1),d=this.object.charCoords[u],p=this.object.charWidths[u],f=0,m=!1;if("previous"===i){for(let g=0;g<d.length;g++)if(d[g][0]+.5*p[g]-e>0){f=g,m=!0;break}}else if("closest"===i){let t=1/0;for(let i=0;i<d.length;i++){let n=d[i][0]+.5*p[i],r=Math.abs(n-e);r<t&&(t=r,f=i,m=!0)}}else for(let g=0;g<d.length;g++){let t=d[g][0],i=d[g][0]+p[g];if(e>=t&&e<i){f=g,m=!0;break}}return m||(f=d.length),{index:this.getGlobalIndexFromLineAndCharIndexes(n,u,f),lineIndex:u,characterIndex:f}}getGlobalIndexFromLineAndCharIndexes(e,t,i){return e.slice(0,t).reduce((e,t)=>e+t.length,0)+i}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function tJ(e,t,i){let{charCoords:n,charWidths:r,initialOffsetY:a,lineHeight:s}=e;if(n[t]&&0===n[t].length||0===n.length){let i=0,{horizontalAlign:n}=e.data.geometry,r=e.wrappedText,{width:o}=e.geometry.userData.parameters;return 1===r.length&&0===r[0].length&&(3===n?i=.5*o:2===n&&(i=o)),[i,a-s*t]}let o=n[t];if(void 0===o||0===o.length)return[0,0];let[l,c]=o[Math.min(i,o.length-1)];return i>=o.length&&(l+=r[t][i-1]),[l,c]}function iJ(e,t){var i,n;let r=0;for(let a=0;a<e.length;a++){let i=e[a],n=t-r;if(n<=i.length)return[a,n];r+=i.length}return[Math.max(0,e.length-1),null!==(i=null===(n=e[e.length-1])||void 0===n?void 0:n.length)&&void 0!==i?i:0]}function nJ(e,t){return"string"==typeof e?t.data.colors[e]:e}function rJ(e){return e.colors[0]}var aJ,sJ=class extends(GQ(oE,KZ)){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.top=1250,n.bottom=-1250,n.right=1250,n.left=-1250,n.near=-1e4,n.far=2500;let r=new qE(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof qE&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;void 0!==e.size&&function(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),i&&this.update()}},oJ=new Zv,lJ=new Zv,cJ=new Kv,hJ=class extends(GQ(eE,$Z)){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=2*wv.RAD2DEG*this.angle,n.aspect=1,n.near=100,n.far=2500;let r=new qE(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof qE&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),lJ.setFromMatrixPosition(this.matrixWorld),cJ.setFromRotationMatrix(this.matrixWorld),oJ.copy(this.up).applyQuaternion(cJ).negate().multiplyScalar(this.distance),this.target.position.copy(lJ).add(oJ),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function uJ(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function dJ(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function pJ(e){let[t,i,n]=function(e){let t=(e[0][0]+e[1][1])/2,i=(e[0][0]-e[1][1])/2,n=(e[1][0]+e[0][1])/2,r=(e[1][0]-e[0][1])/2,a=Math.sqrt(t*t+r*r),s=Math.sqrt(i*i+n*n),o=a+s,l=a-s,c=Math.atan2(n,i),h=Math.atan2(r,t),u=(h-c)/2,d=(h+c)/2,p=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]],f=[[o,0],[0,l]],m=[[Math.cos(u),Math.sin(u)],[-Math.sin(u),Math.cos(u)]];return p[0][0]*=-1,p[0][1]*=-1,m[0][0]*=-1,m[1][0]*=-1,[p,f,m]}(e),r=uJ(t,dJ(n)),a=uJ(uJ(n,i),dJ(n));return{rotation:Math.atan2(r[1][0],r[0][0]),scale:[a[0][0],a[1][1]],shear:[a[0][1]/a[1][1],a[1][0]/a[0][0]]}}(e=>{function t(e){return[e[0],e[3],e[1],e[4],e[2],e[5]]}e.identity=function(){return[1,0,0,0,1,0,0,0,1]},e.copy=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.identity();for(let e=0,n=t.length;e<n;e++)i[e]=t[e];return i},e.create=function(t,i,n,r,a,s){return e.setAbcdef(e.identity(),t,i,n,r,a,s)},e.setAbcdef=function(e,t,i,n,r,a,s){return e[0]=t,e[1]=n,e[2]=a,e[3]=i,e[4]=r,e[5]=s,e},e.append=function(i,n){let[r,a,s,o,l,c]=t(i),[h,u,d,p,f,m]=t(n),g=h*r+u*s,v=h*a+u*o,y=d*r+p*s,b=d*a+p*o,x=f*r+m*s+l,w=f*a+m*o+c;return e.create(g,v,y,b,x,w)},e.prepend=function(i,n){let[r,a,s,o,l,c]=t(i),[h,u,d,p,f,m]=t(n),g=r,v=a,y=s,b=o;(1!==h||0!==u||0!==d||1!==p)&&(g=r*h+a*d,v=r*u+a*p,y=s*h+o*d,b=s*u+o*p);let x=l*h+c*d+f,w=l*u+c*p+m;return e.create(g,v,y,b,x,w)},e.getAbcdef=t,e.invert=function(t){let[i,n,r,a,s,o]=e.getAbcdef(t),l=i*a-n*r,c=a/l,h=-n/l,u=-r/l,d=i/l,p=(r*o-a*s)/l,f=-(i*o-n*s)/l;return e.create(c,h,u,d,p,f)},e.apply=function(t,i){let[n,r]=t,[a,s,o,l,c,h]=e.getAbcdef(i);return[a*n+o*r+c,s*n+l*r+h]},e.applyInverse=function(t,i){let[n,r,a,s,o,l]=e.getAbcdef(i),c=1/(n*s+a*-r),[h,u]=t;return[s*c*h+-a*c*u+(l*a-o*s)*c,n*c*u+-r*c*h+(-l*n+o*r)*c]},e.scale=function(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,[r,a,s,o,l,c]=e.getAbcdef(t);return e.setAbcdef(t,r*i,a*n,s*i,o*n,l*i,c*n),t},e.rotate=function(t,i){let n=Math.cos(i),r=Math.sin(i),[a,s,o,l,c,h]=e.getAbcdef(t);return e.setAbcdef(t,a*n-s*r,a*r+s*n,o*n-l*r,o*r+l*n,c*n-h*r,c*r+h*n),t},e.rotateAround=function(t,i,n){let[r,a]=n,s=e.translate(t,-r,-a);return s=e.rotate(s,i),s=e.translate(s,r,a),s},e.translate=function(t,i,n){let[r,a,s,o,l,c]=e.getAbcdef(t);return e.setAbcdef(t,r,a,s,o,l+i,c+n),t},e.setTranslate=function(t,i,n){let[r,a,s,o]=e.getAbcdef(t);return e.setAbcdef(t,r,a,s,o,i,n),t},e.setPosition=function(t,i,n){let[r,a,s,o]=e.getAbcdef(t);return e.setAbcdef(t,r,a,s,o,i,n),t},e.getScale=function(t){let[i,n,r,a]=e.getAbcdef(t);return[Math.sqrt(i*i+n*n),Math.sqrt(r*r+a*a)]},e.getPosition=function(t){let[,,,,i,n]=e.getAbcdef(t);return[i,n]},e.getRotation=function(t,i){return e.decompose(t,i).rotation},e.decompose=function(t,i){let[n,r,a,s,o,l]=e.getAbcdef(t),{rotation:c,scale:h,shear:u}=pJ([[n,a],[r,s]]);return{position:[o+(i[0]*n+i[1]*a)-i[0],l+(i[0]*r+i[1]*s)-i[1]],scale:h,rotation:c,shear:u,pivot:i}},e.compose=function(t,i,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],[s,o]=t,[l,c]=r,[h,u,d,p]=function(e){let{rotation:t,scale:i,shear:n}=e,r=Math.cos(t),a=Math.sin(t),s=uJ([[r,-a],[a,r]],[[i[0],n[0]*i[1]],[n[1]*i[0],i[1]]]);return[s[0][0],s[1][0],s[0][1],s[1][1]]}({rotation:n,scale:i,shear:a}),f=s-(l*h+c*d)+l,m=o-(l*u+c*p)+c;return e.create(h,u,d,p,f,m)}})(aJ||(aJ={}));var fJ=Math.PI/180;Math.PI;var mJ=class{constructor(e,t,i){var n;this.uuid=e,this.data=t,this.localMatrix=aJ.identity(),this.worldMatrix=aJ.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new EJ,this._recursiveBBox=new EJ,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=jW(),this.dpr=null!==(n=i.dpr)&&void 0!==n?n:1,this.dataPatched=t}project(e,t){let i=this.worldMatrix;return t&&(i=aJ.append(t.worldMatrix,i)),aJ.applyInverse(e,i)}intersects(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],i),n)}intersectsInLocalSpace(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{min:n,max:r}=i?this.recursiveBBox:this.singleBBox;return e>=n[0]&&e<=r[0]&&t>=n[1]&&t<=r[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=aJ.compose(this.position,this.scale,function(e){return e*fJ}(this.rotation),FB.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,i){let n=this.parent;t&&null!==n&&void 0!==n&&n.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=aJ.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=aJ.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return FB.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;void 0!==e.position&&(t=!0,this.position=e.position),void 0!==e.rotation&&(t=!0,this.rotation=e.rotation),void 0!==e.scale&&(t=!0,this.scale=e.scale),void 0!==e.shear&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,i){0===e.type&&void 0!==e.props.visible&&(this.visible=e.props.visible),this.data=t,this.data=t;let n=e,r=wI(e.path,["states","*"]);if(null!==r){if(0===e.type){let[t]=r;if((null===this||void 0===this?void 0:this.stateSelection)===t){let t=(0,ye.A)({},e.props);if(delete t.name,Object.values(e.props).some(e=>void 0===e)){let i=this.data;if(void 0!==i){let n=mI.zoom(i,e.path.slice(2));if(n)for(let i in e.props)void 0===e.props[i]&&i in n&&(t[i]=n[i])}}n=(0,ye.A)((0,ye.A)({},e),{},{props:t,path:e.path.slice(2)})}}}else if(0===e.type){let t=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==t){if(void 0!==e.props.name&&t.name){let{name:e}=t;t=xe(t,Om)}let i=mI.removeOverridden(e.path,e.props,t);n=(0,ye.A)((0,ye.A)({},e),{},{props:i})}}this.updateByPatchedOpBase(n,TB.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==this.data.states.length||i){for(let e of this.data.states)TB.toOps(this.data,e.data).forEach(e=>{let i=Gk.replaceProps(e,this.data);this.dataPatched=this.data,this.updateByPatchedOp(i,this.data,t)});if(null!==e){let i=this.data.states.data(e);i&&(this.dataPatched=TB.patch(this.data,i),TB.toOps(this.data,i).forEach(e=>{this.updateByPatchedOp(e,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.visible&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,i){this.dataPatched=t,this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){0===e.path.length&&0===e.type&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{"frame2d"===t.data.type&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new mJ(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){var t;this.emitter.emit(e.type,(0,ye.A)((0,ye.A)({},e),{},{target:null!==(t=e.target)&&void 0!==t?t:this}))}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let i=t.indexOf(this)+1;return t[i]?t[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof mJ&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},gJ=class extends mJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof gJ&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(!0!==t)for(let i of this.children)i instanceof gJ?i.traverse(e):t=e(i)}intersectsChildrenHelper(e,t,i,n,r){for(let a of this.children)if(a.intersects(e,t,i,!1)&&(r.push(a),n)||a instanceof gJ&&a.intersectsChildrenHelper(e,t,i,n,r))return!0;return!1}intersectsChildren(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.intersectsChildrenHelper(e,t,i,n,r),r}intersectsChildrenHelperReverse(e,t,i,n,r){for(let a of this.children)if(a instanceof gJ&&a.intersectsChildrenHelperReverse(e,t,i,n,r)||a.intersects(e,t,i,!1)&&(r.push(a),n))return!0;return!1}intersectsChildrenReverse(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.intersectsChildrenHelperReverse(e,t,i,n,r),r}updateWorldMatrix(e,t,i){if(super.updateWorldMatrix(e,t,i),i&&this.children)for(let n of this.children)n.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(i=>{i.uuid===e&&(t=i)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new gJ(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},vJ=class extends gJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.updateState(t,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new vJ(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}};function yJ(e,t){let[[i,n],[r,a]]=e,[[s,o],[l,c]]=t,h=(i-r)*(o-c)-(n-a)*(s-l);if(0===h)return!1;let u=((i-s)*(o-c)-(n-o)*(s-l))/h,d=-((i-r)*(n-o)-(n-a)*(i-s))/h;return u>=0&&u<=1&&d>=0&&d<=1}var bJ,xJ,wJ,AJ,SJ=[[-1,1],[-1,-1],[1,-1],[1,1]],_J=(e,t,i)=>{let n=e.getCenter(),r=e.getHalfSize(),a=aJ.append(t,e.worldMatrix);0===r[0]&&0===r[1]?i.push(aJ.apply(n,a)):SJ.forEach(e=>{let t=[e[0]*r[0]+n[0],e[1]*r[1]+n[1]];i.push(aJ.apply(t,a))})},EJ=class{constructor(){this.matrix=aJ.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(),this.makeEmpty(),aJ.copy(e.worldMatrix,this.matrix);let i=aJ.invert(e.worldMatrix);this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t){let i=[];!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&e instanceof gJ?e.traverse(e=>{e.visible&&_J(e,t,i)}):_J(e,t,i),this.setFromPoints(i)}setFromSize(e,t,i){this.makeEmpty(),aJ.copy(i,this.matrix),this.expandBySize(e,t,i)}expandBySize(e,t,i){[aJ.apply([0,0],i),aJ.apply([0,t],i),aJ.apply([e,t],i),aJ.apply([e,0],i)].forEach(e=>this.expandByPoint(e))}getCenter(){let[e,t]=this.min,[i,n]=this.getHalfSize();return aJ.apply([e+i,t+n],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[.5*(this.max[0]-this.min[0]),.5*(this.max[1]-this.min[1])]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),i=this.getCenter(),[n,r,a,s]=aJ.getAbcdef(this.matrix),o=aJ.create(n,r,a,s,i[0],i[1]);this.vertices=SJ.map(i=>{let[n,r]=i;return aJ.apply([n*e,r*t],o)})}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let i=this.matrix;return t&&(i=aJ.append(t.worldMatrix,i)),aJ.applyInverse(e,i)}intersects(e,t,i){return this.intersectsInLocalSpace(...this.project([e,t],i))}intersectsInLocalSpace(e,t){let{min:i,max:n}=this;return e>=i[0]&&e<=n[0]&&t>=i[1]&&t<=n[1]}containsPoint(e){let[t,i]=e,[n,r]=this.min,[a,s]=this.max;return t>=n&&t<=a&&i>=r&&i<=s}intersectsBBox2D(e){for(let t=0,i=this.edges.length;t<i;t++){let i=this.edges[t];for(let t=0,n=e.edges.length;t<n;t++){if(yJ(i,e.edges[t]))return!0}}for(let t=0,i=e.vertices.length;t<i;t++){let i=e.vertices[t];if(this.containsPoint(i))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],aJ.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new EJ;return e.copy(this),e}},CJ=new Promise(e=>{bJ=e}),MJ=!1;function TJ(){if(!MJ)return xJ||(xJ=async function(){var e;let t=await __webpack_require__.e(160).then(__webpack_require__.bind(__webpack_require__,1160));bJ(null!==(e=t.default)&&void 0!==e?e:t),MJ=!0}())}function PJ(e){let t=!1;return e.scene.objects.traverse((e,i)=>{("Mesh"===i.type&&"UIGeometry"===i.geometry.type||"Page"===i.type&&void 0!==i.uiFrame)&&(t=!0)}),t}var DJ=aJ.identity(),OJ=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=_L.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=_L.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t}catch(i){console.log(e.width,t)}this._currentM3Transform=DJ,this._currentTransform=new Float32Array(DJ)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await async function(e){let t=await CJ;wJ||(AJ||(AJ=t({locateFile:()=>e})),wJ=await AJ)}(this.wasmURL),this._surface=wJ.MakeWebGLCanvasSurface(this.canvas),this.ctx=null===(e=this._surface)||void 0===e?void 0:e.getCanvas(),this._paint=new wJ.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(wJ.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(wJ.PaintStyle.Stroke),null===(t=this.ctx)||void 0===t||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,t)}registerFont(e,t){if(this._fonts.has(t))return;let i=wJ.FontMgr.FromData(e);if(!i)throw new Error("Invalid font data for "+t);this._fonts.set(t,i)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(IJ(e),wJ.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(IJ(e),wJ.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth("center"===this._strokeMode?e:2*e)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;null===(e=this.ctx)||void 0===e||e.clear(wJ.TRANSPARENT)}save(){var e;null===(e=this.ctx)||void 0===e||e.save()}restore(){var e;null===(e=this.ctx)||void 0===e||e.restore()}beginPath(){var e;null!==(e=this._currentPath)&&void 0!==e&&e.delete(),this._currentPath=new wJ.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,i,n){var r;let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=wJ.XYWHRect(e,t,i,n);if(0===a&&0===s&&0===l&&0===o)null===(r=this.ctx)||void 0===r||r.clipRect(c,wJ.ClipOp.Intersect,!0);else{var h;let e=wJ.RRectXY(c,a,a);e[4]=e[5]=a,e[6]=e[7]=s,e[8]=e[9]=o,e[10]=e[11]=l,null===(h=this.ctx)||void 0===h||h.clipRRect(e,wJ.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=aJ.invert(this.currentTransform);this.ctx.concat(e);let t=aJ.translate(aJ.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.ctx&&this._currentPath){let d,p=!1;if(i&&this._hasDropShadow()){var n,r,a;let i,s=e.copy();s.setColor(IJ(this._dropShadowColor)),this._dropShadowBlur>0&&(i=wJ.MaskFilter.MakeBlur(wJ.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(null!==(n=null===(r=this.camera)||void 0===r?void 0:r.scale)&&void 0!==n?n:1),!1),s.setMaskFilter(i)),this.ctx.save(),this.ctx.clipPath(this._currentPath,wJ.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(s),this.ctx.restore(),s.delete(),null===(a=i)||void 0===a||a.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,wJ.ClipOp.Intersect,!0);let t=wJ.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,wJ.TileMode.Clamp,null),i=e.copy();i.setImageFilter(t),i.setAlphaf(1);let n=this._currentPath.computeTightBounds();this.ctx.saveLayer(i,n,null,wJ.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),i.delete(),t.delete(),p=!0}if(this._layerBlur>0){var s,o;let i=e.copy();d=wJ.MaskFilter.MakeBlur(wJ.BlurStyle.Normal,this._layerBlur*this.dpr*(null!==(s=null===(o=this.camera)||void 0===o?void 0:o.scale)&&void 0!==s?s:1),!1),i.setMaskFilter(d),t(i),i.delete(),d.delete(),p=!0}if(p||t(e),i&&this._hasInnerShadow()){var l,c,h,u;let e,t=new wJ.Paint;t.setAntiAlias(!0),t.setStyle(wJ.PaintStyle.Fill),t.setColor(IJ(this._innerShadowColor)),this._innerShadowBlur>0&&(e=wJ.MaskFilter.MakeBlur(wJ.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(null!==(l=null===(c=this.camera)||void 0===c?void 0:c.scale)&&void 0!==l?l:1),!1),t.setMaskFilter(e));let i=this._currentPath.computeTightBounds(),[n,r,a,s]=i,o=a-n,d=s-r;this.ctx.save(),this.ctx.clipPath(this._currentPath,wJ.ClipOp.Intersect,!0),this.ctx.saveLayer(t,i,null,wJ.SaveLayerInitWithPrevious),null!==(h=this.ctx)&&void 0!==h&&h.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(wJ.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+o+Math.abs(2*this._innerShadowOffsetX),2e3+d+Math.abs(2*this._innerShadowOffsetY)),t),t.setBlendMode(wJ.BlendMode.Clear),this.ctx.drawPath(this._currentPath,t),this.ctx.restore(),this.ctx.restore(),t.delete(),null===(u=e)||void 0===u||u.delete()}}}_paintInner(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.ctx&&this._currentPath&&e){let i=this.ctx,n=this._currentPath;this._applyEffectsToPaint(e,e=>{let r=!1;!t&&"center"!==this._strokeMode&&(i.save(),i.clipPath(n,"outside"===this._strokeMode?wJ.ClipOp.Difference:wJ.ClipOp.Intersect,!0),r=!0),i.drawPath(n,e),r&&i.restore()},t)}}_hasDropShadow(){var e;return(null===(e=this._dropShadowColor)||void 0===e?void 0:e.a)>0}_hasInnerShadow(){var e;return(null===(e=this._innerShadowColor)||void 0===e?void 0:e.a)>0}path(e){var t;null===(t=this._currentPath)||void 0===t||t.addPath(wJ.Path.MakeFromSVGString(e))}ellipse(e,t,i,n,r,a,s,o){var l;if(!kJ([e,t,i,n])||!this._currentPath)return;if(i<0||n<0)throw Error("radii cannot be negative");let c=wJ.XYWHRect(e-i,t-n,2*i,2*n);null===(l=this._currentPath)||void 0===l||l.addOval(c)}rect(e,t,i,n){var r;let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=wJ.XYWHRect(e,t,i,n);if(kJ(c))if(0===a&&0===s&&0===l&&0===o)null===(r=this._currentPath)||void 0===r||r.addRect(c);else{var h;let e=wJ.RRectXY(c,a,a);e[4]=e[5]=a,e[6]=e[7]=s,e[8]=e[9]=o,e[10]=e[11]=l,null===(h=this._currentPath)||void 0===h||h.addRRect(e)}}getHorizontalAlign(e){switch(e){case 2:return wJ.TextAlign.Right;case 3:return wJ.TextAlign.Center;case 4:return wJ.TextAlign.Justify;default:return wJ.TextAlign.Left}}drawTextInner(e,t,i,n,r,a){let[s,o,l,c]=n,h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=0,{ctx:d}=this;if(!d)return u;let p=a.copy(),f=a.copy();return f.setAlphaf(0),this._applyEffectsToPaint(p,n=>{t.pushPaintStyle(i,n,f),t.addText(e);let a=t.build();a.layout(l);let h=o;2===r?h+=(c-a.getHeight())/2:3===r&&(h+=c-a.getHeight()),d.drawParagraph(a,s,h),u=a.getHeight(),t.reset(),a.delete()},h),p.delete(),f.delete(),u}drawText(e,t){let i=0,n=this._fonts.get(t.font),{ctx:r,_paintFill:a,_paintStroke:s}=this;if(n&&r){let r=new wJ.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),o=new wJ.ParagraphStyle({textStyle:r,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),l=wJ.XYWHRect(t.x,t.y,t.width,t.height),c=wJ.ParagraphBuilder.Make(o,n);a&&(i=this.drawTextInner(e,c,r,l,t.verticalAlign,a,!0)),s&&(i=this.drawTextInner(e,c,r,l,t.verticalAlign,s,!1)),c.delete()}return{height:i}}render(){var e;null===(e=this._surface)||void 0===e||e.flush()}moveTo(e,t){var i;null===(i=this._currentPath)||void 0===i||i.moveTo(e,t)}lineTo(e,t){var i;null===(i=this._currentPath)||void 0===i||i.lineTo(e,t)}bezierCurveTo(e,t,i,n,r,a){var s;null===(s=this._currentPath)||void 0===s||s.cubicTo(e,t,i,n,r,a)}quadraticCurveTo(e,t,i,n){var r;null===(r=this._currentPath)||void 0===r||r.quadTo(e,t,i,n)}setTransform(e){var t,i,n,r;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.ctx)return;let s=this.ctx.getTotalMatrix(),o=aJ.invert(s);if(o&&this.ctx.concat(o),null!==(t=this.ctx)&&void 0!==t&&t.scale(this.dpr,this.dpr),null!==(i=this.camera)&&void 0!==i&&i.enabled&&(null!==(n=this.ctx)&&void 0!==n&&n.concat(this.camera.worldMatrix),a)){var l;let e=aJ.getScale(this.camera.worldMatrix);null===(l=this.ctx)||void 0===l||l.scale(1/e[0],1/e[1])}null!==(r=this.ctx)&&void 0!==r&&r.concat(e),this.currentTransform=e}transform(e){var t;null===(t=this.ctx)||void 0===t||t.concat(e)}setSize(e,t){var i;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=wJ.MakeWebGLCanvasSurface(this.canvas),this.ctx=null===(i=this._surface)||void 0===i?void 0:i.getCanvas()))}};function kJ(e){for(let t=0;t<e.length;t++)if(void 0!==e[t]&&!Number.isFinite(e[t]))return!1;return!0}function IJ(e){let{r:t,g:i,b:n,a:r}=e;return wJ.Color4f(t,i,n,r)}var RJ,LJ,zJ,BJ=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_L.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){void 0!==e.color&&(this.color=e.color),void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.blurRadius&&(this.blurRadius=e.blurRadius),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.spread&&(this.spread=e.spread)}},jJ=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.radius&&(this.radius=e.radius)}},FJ=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_L.transparent,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color)}},NJ=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_L.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color),void 0!==e.thickness&&(this.thickness=e.thickness),void 0!==e.mode&&(this.mode=e.mode)}},UJ=class extends mJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new FJ(e+"-fill",t.fill,i),this.stroke=new NJ(e+"-stroke",t.stroke,i),this.dropShadow=new BJ(e+"-dropShadow",t.dropShadow,i),this.innerShadow=new BJ(e+"-innerShadow",t.innerShadow,i),this.backgroundBlur=new jJ(e+"-backgroundBlur",t.backgroundBlur,i),this.layerBlur=new jJ(e+"-layerBlur",t.layerBlur,i)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_L.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_L.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=5*this.layerBlur.radius:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=5*this.backgroundBlur.radius:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=5*this.dropShadow.blurRadius,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=_L.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=5*this.innerShadow.blurRadius,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=_L.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),0===e.type&&(wI(e.path,["fill"])?this.fill.update(e.props):wI(e.path,["stroke"])?this.stroke.update(e.props):wI(e.path,["dropShadow"])?this.dropShadow.update(e.props):wI(e.path,["innerShadow"])?this.innerShadow.update(e.props):wI(e.path,["layerBlur"])?this.layerBlur.update(e.props):wI(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new UJ(this.uuid,this.data,e);return t.parent=void 0,t}},VJ=class extends UJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,i)}innerDraw(e){e.ellipse(.5*this.width,.5*this.height,.5*this.width,.5*this.height,0,0,2*Math.PI)}intersectsInLocalSpace(e,t){return function(e,t,i,n,r,a){let s=e-i,o=t-n;return s*s/(r*r)+o*o/(a*a)<=1}(e,t,.5*this.width,.5*this.height,.5*this.width,.5*this.height)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new VJ(this.uuid,this.data,e);return t.parent=void 0,t}},WJ=class extends UJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new WJ(this.uuid,this.data,e);return t.parent=void 0,t}},HJ=class extends UJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_L.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_L.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var t,i,n;(null===(t=this._fontHolder)||void 0===t?void 0:t.arrayBuffer)&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let r=this.data.textTransform,a=this.data.text.textValue.toString(),s=2===r?a.toUpperCase():3===r?a.toLowerCase():a,{height:o}=e.drawText(s,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:null!==(i=this.data.lineHeight)&&void 0!==i?i:1,letterSpacing:null!==(n=this.data.letterSpacing)&&void 0!==n?n:0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=o}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,t){let{shared:i}=t;void 0!==e.font&&(this._fontHolder=i.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new HJ(this.uuid,this.data,e);return t.parent=void 0,t}},GJ=class extends UJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,i)}computeExtremas(){0===this.curves.length&&this.computeCurves();let e=this.curves.map(e=>RJ.extremas(e)),t=[1/0,1/0],i=[-1/0,-1/0];for(let n=0,r=e.length;n<r;n++){let r=e[n];r[0][0]<t[0]&&(t[0]=r[0][0]),r[0][1]<t[1]&&(t[1]=r[0][1]),r[1][0]>i[0]&&(i[0]=r[1][0]),r[1][1]>i[1]&&(i[1]=r[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,n=this.data.points.length;i<n;i++){let e=this.data.points[i].data,t=this.data.points[i-1].data,n={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(n)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,t]=this.extremasBBox.min,[i,n]=this.getHalfSize();return[e+i,t+n]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[.5*(t[0]-e[0]),.5*(t[1]-e[1])]}innerDraw(e){for(let n=0,r=this.data.points.length;n<r;n++){let t=this.data.points[n].data;if(0===n){let[i,n]=t.position;e.moveTo(i,n)}else{let i=this.data.points[n-1].data,[r,a]=i.controlNext.position,[s,o]=t.controlPrevious.position,[l,c]=t.position,h={start:i.position,cp1:i.controlNext.position,cp2:t.controlPrevious.position,end:t.position};RJ.derive(h),e.bezierCurveTo(r,a,s,o,l,c)}}let t=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[n,r]=i.controlNext.position,[a,s]=t.controlPrevious.position,[o,l]=t.position;e.bezierCurveTo(n,r,a,s,o,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new GJ(this.uuid,this.data,e);return t.parent=void 0,t}};(e=>{function t(e,t,i){let n=e-2*t+i;if(0!==n){let r=-Math.sqrt(Math.abs(t*t-e*i)),a=-e+t;return[-(r+a)/n,-(-r+a)/n]}return t!==i&&0===n?[(2*t-i)/(2*(t-i))]:[]}e.derive=function(e){let t=e.start,i=e.cp1,n=e.cp2,r=e.end,a={start:[3*(i[0]-t[0]),3*(i[1]-t[1])],cp:[3*(n[0]-i[0]),3*(n[1]-i[1])],end:[3*(r[0]-n[0]),3*(r[1]-n[1])]};return e.derivative=a,a.derivative=LJ.derive(a),a},e.droot=function(i){var n;let r=null!==(n=i.derivative)&&void 0!==n?n:e.derive(i),a=r.start,s=r.cp,o=r.end;return[t(a[0],s[0],o[0]),t(a[1],s[1],o[1])]},e.extremas=function(t){let[i,n]=e.droot(t),r=[t.start[0],t.end[0]],a=[t.start[1],t.end[1]];for(let s of i)r.push(e.compute(t,Math.min(1,Math.max(0,s)))[0]);for(let s of n)a.push(e.compute(t,Math.min(1,Math.max(0,s)))[1]);return r.sort((e,t)=>e-t),a.sort((e,t)=>e-t),[[r[0],a[0]],[r[r.length-1],a[a.length-1]]]},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let i=1-t,n=i*i,r=t*t,a=n*i,s=n*t*3,o=i*r*3,l=t*r;return[a*e.start[0]+s*e.cp1[0]+o*e.cp2[0]+l*e.end[0],a*e.start[1]+s*e.cp1[1]+o*e.cp2[1]+l*e.end[1]]}})(RJ||(RJ={})),(e=>{e.derive=function(e){let t=e.start,i=e.cp,n=e.end,r={start:[2*(i[0]-t[0]),2*(i[1]-t[1])],end:[2*(n[0]-i[0]),2*(n[1]-i[1])]};return r.derivative=zJ.derive(r),e.derivative=r,r},e.droot=function(t){var i;let n=null!==(i=t.derivative)&&void 0!==i?i:e.derive(t),r=n.start,a=n.end;return[r[0]!==a[0]?r[0]/(r[0]-a[0]):0,r[1]!==a[1]?r[1]/(r[1]-a[1]):0]},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let i=1-t,n=i*i,r=i*t*2,a=t*t;return[n*e.start[0]+r*e.cp[0]+a*e.end[0],n*e.start[1]+r*e.cp[1]+a*e.end[1]]}})(LJ||(LJ={})),(e=>{e.derive=function(e){let t=e.start,i=e.end,n=[i[0]-t[0],i[1]-t[1]];return e.derivative=n,e.derivative},e.compute=function(e,t){if(0===t)return[...e.start];if(1===t)return[...e.end];let i=e.start,n=e.end;return[i[0]+(n[0]-i[0])*t,i[1]+(n[1]-i[1])*t]}})(zJ||(zJ={}));var qJ=class extends gJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new WJ(e+"-background",IB.defaultData,i),this.background.parent=this,this.updateState(t,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),null===(e=this.background)||void 0===e||e.updateLocalMatrix()}updateWorldMatrix(e,t,i){var n;super.updateWorldMatrix(e,t,i),null===(n=this.background)||void 0===n||n.updateWorldMatrix(e,t,i)}draw(e){if(!this.visible)return;e.save();let t=this.width,i=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur),void 0!==e.clipped&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),0===e.type&&(wI(e.path,["fill"])?this.fill.update(e.props):wI(e.path,["stroke"])?this.stroke.update(e.props):wI(e.path,["dropShadow"])?this.dropShadow.update(e.props):wI(e.path,["innerShadow"])?this.innerShadow.update(e.props):wI(e.path,["layerBlur"])?this.layerBlur.update(e.props):wI(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new qJ(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},YJ=Nm(Ym(),1),XJ=class extends UJ{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=this.path;QJ(this.path)&&(console.warn("Invalid SVG path",this.uuid),e="");let t=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(t),i.setAttribute("d",e),t.appendChild(i),this._pathBBox=i.getBBox(),t.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),void 0!==e.path&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new XJ(this.uuid,this.data,e);return t.parent=void 0,t}};function QJ(e){return/NaN/.test(e)}function KJ(e){let t,i=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"];return e.map(e=>{let n=[];i.forEach(t=>{if(t in e){let i=1*e[t];n.length&&i>=0&&n.push(","),n.push(i)}});let r=(t===e.code?n[0]<0?"":",":e.code)+n.join("");return t=e.code,r}).join("")}var ZJ=class{constructor(e,t,i){this.uuid=e,this.data=t,this.group=new vJ(ZJ.GROUP_ID,(0,ye.A)({},BB.defaultData),i),this.createChildrenObjects(t.objects,this.group,i)}createObject(e,t,i,n,r,a){let s=function(e,t,i){switch(t.type){case"ellipse2d":return new VJ(e,t,i);case"rectangle2d":return new WJ(e,t,i);case"text2d":return new HJ(e,t,i);case"vector2d":return new GJ(e,t,i);case"path2d":return new XJ(e,t,i);case"frame2d":return new qJ(e,t,i);default:return new vJ(e,t,i)}}(e,t,a);s&&(n.add(s),n.children.splice(r,0,n.children.pop()),s.updateWorldMatrix(),i.length>0&&(s instanceof vJ||s instanceof qJ)&&this.createChildrenObjects(i,s,a))}createChildrenObjects(e,t,i){let n=0;for(let r of e)this.createObject(r.id,r.data,r.children,t,n,i),n+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,i,n){let r=this.find(e);if(r)try{r.updateByOp(t,i,{shared:n})}catch(a){console.error(a)}}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let i=null===e.parent?this.group:this.find(e.parent);void 0!==i&&i instanceof gJ&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,t),i.requestRender())}else if(0===e.path.length&&8===e.type){let t=this.find(e.id);if(void 0!==t&&void 0!==t.parent&&t.parent instanceof gJ){let e=t.parent;t.resetBBoxNeedsUpdate(),null!==e&&void 0!==e&&e.remove(t),null===e||void 0===e||e.requestRender()}}else if(0===e.path.length&&9===e.type){let t=this.find(e.id);if(void 0!==t){let i=t.parent,n=null===e.parent?this:this.find(e.parent);if(n instanceof gJ||n===this){n.add(t);let r=e.localIndex;n.children.splice(r,0,n.children.pop()),t.updateWorldMatrix(!0,!1,!0),null!==i&&void 0!==i&&i.requestRender(),t.requestRender()}t.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.group.intersectsChildren(e,t,i,n,r,!0)}intersectsChildrenReverse(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.group.intersectsChildrenReverse(e,t,i,n,r,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let i=[],n=t;for(;n!==this.group;){let e=n;n=n.parent;let t=n.children.indexOf(e);i.splice(0,0,t)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let e=this.getWithSortKey(i.id);void 0!==e&&t.push(e)}return t.sort((e,t)=>dk(e.sortKey,t.sortKey)),t.map(e=>e.entity)}},JJ=ZJ;function $J(e){let{constraints:t,newParentWidth:i,newParentHeight:n,initialParentWidth:r,initialParentHeight:a,objectInitialWidth:s,objectInitialHeight:o,objectInitialPosition:l}=e,{horizontalConstraint:c,verticalConstraint:h}=t,u=i-r,d=n-a,p=s,f=o,m=l[0],g=l[1];if(0!==c)if(1===c)m+=u;else if(3===c)m+=u/2;else if(2===c)p=Math.max(1,p+u);else if(4===c){let e=i/r;p*=e,m*=e}if(0!==h)if(1===h)g+=d;else if(3===h)g+=d/2;else if(2===h)f=Math.max(1,f+d);else if(4===h){let e=n/a;f*=e,g*=e}return{width:p,height:f,position:[m,g]}}JJ.GROUP_ID="scene2d";Nm(Ym(),1);var e$=new xx(-1,1,1,-1,0,1),t$=new class extends Cb{constructor(){super(),this.setAttribute("position",new yb([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new yb([0,2,0,0,2,0],2))}},i$=new Yb({defines:{},uniforms:{tDiffuse:new ME(null)},vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvUv = uv;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t}",fragmentShader:"\n\tuniform sampler2D tDiffuse;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\tgl_FragColor = texel;\n\t}"}),n$=new class{constructor(e){this._mesh=new Nb(t$,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,e$)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}(i$),r$=null,a$=null,s$=aJ.identity(),o$=class{constructor(e,t,i,n){this.uuid=e,this.width=t,this.height=i,this.context=n,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let e=this.width,t=this.height,i=this.dpr;this.renderer.dpr=this.isScreenSpace?i:Math.floor(2048/Math.max(e,t)),this.renderer.setSize(e,t)},this.onFrameOverrideObjectEvent=e=>{var t;if(void 0!==(null===(t=e.target)||void 0===t?void 0:t.uuid)){var i;let t=null===(i=this.frameRoot)||void 0===i?void 0:i.find(e.target.uuid);t&&t.dispatchEvent((0,ye.A)((0,ye.A)({},e),{},{target:t}))}},this.scene2d=new JJ(wv.generateUUID(),NB.defaultData,{dpr:window.devicePixelRatio,shared:n.shared}),this.canvas=(null===r$&&(r$=document.createElement("canvas")),r$),this.renderer=(e=>(null===a$&&(a$=new OJ(e)),a$))(this.canvas),this.promise=this.init(),this.renderTarget=new Yv(1,1,{type:kg,stencilBuffer:!1,depthBuffer:!1}),n.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=n.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new pS(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof OJ&&(this.renderer.wasmURL=Mq.skiaWasmUrl),await this.renderer.init()}render(e){if(this.isFrameDirty){var t,i;this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),null!==(t=this.frameOverride)&&void 0!==t&&t.draw(this.renderer),this.renderer.render(),i$.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let n=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),n$.render(e),e.setRenderTarget(n),null===(i=this.textureHolder)||void 0===i||i.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,i,n){this.scene2d.updateEntityByOp(e,t,i,n),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){var t,i;this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let n=null!==(t=null===e||void 0===e?void 0:e.width)&&void 0!==t?t:this.width,r=null!==(i=null===e||void 0===e?void 0:e.height)&&void 0!==i?i:this.height;this.frameOverride.width=n,this.frameOverride.height=r,this.frameOverride.localMatrix=s$,this.isScreenSpace&&(this.frameOverride.fill.color=_L.from0to1([0,0,0,0])),this.frameOverride.data=(0,ye.A)((0,ye.A)({},this.frameOverride.data),{},{width:n,height:r}),l$({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e){var t,i,n,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.devicePixelRatio,s=Math.max(1,null!==(t=null===e||void 0===e?void 0:e.width)&&void 0!==t?t:this.width),o=Math.max(1,null!==(i=null===e||void 0===e?void 0:e.height)&&void 0!==i?i:this.height);this.dpr=a,this.width=s,this.height=o,this._innerApplySize();let l=1;(s*a<512||o*a<512)&&(l=Math.max(512/(s*a),512/(o*a))),this.renderTarget.setSize(s*a*l,o*a*l),null!==(n=this._canvasTexture)&&void 0!==n&&n.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),null===(r=this.frameOverride)||void 0===r||r.requestRender()}applyFrame(e){var t,i;let n=this.context.scene.find2D(e);if(n&&n instanceof qJ)return this.disposeFrameOverride(),this.frameRoot=n,this.frameOverride=n.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),null!==(t=this.frame)&&void 0!==t&&t.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(e=>{e.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(e=>{e.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),null!==(i=this.frame)&&void 0!==i&&i.requestRender(),n}get frame(){return this.frameOverride}get frameId(){var e;return null===(e=this.frame)||void 0===e?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return null===(e=this.textureHolder)||void 0===e?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,i;null!==(e=this.frameOverride)&&void 0!==e&&e.removeEventListener("render",this.onRenderRequestedDownstream),null!==(t=this.frameOverride)&&void 0!==t&&t.traverse(e=>{e.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),null!==(i=this.frameOverride)&&void 0!==i&&i.traverse(e=>{e.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function l$(e){let{objectOverride:t,objectRoot:i,newParentWidth:n,newParentHeight:r,initialParentWidth:a,initialParentHeight:s}=e;if(t instanceof qJ&&i instanceof qJ||t instanceof vJ&&i instanceof vJ)for(let o=0,l=t.children.length;o<l;o++){let e=t.children[o],l=i.children[o];e&&l&&e.uuid===l.uuid&&c$({objectOverride:e,objectRoot:l,newParentWidth:n,newParentHeight:r,initialParentWidth:a,initialParentHeight:s})}}function c$(e){let{objectOverride:t,objectRoot:i,newParentWidth:n,newParentHeight:r,initialParentWidth:a,initialParentHeight:s}=e,[o,l]=function(e){if(u$(e))return[e.width,e.height];if(e instanceof XJ){let[t,i]=e.getHalfSize();return[2*t,2*i]}if(e instanceof vJ){let[t,i]=e.recursiveBBox.getHalfSize();return[2*t,2*i]}return[0,0]}(i),{width:c,height:h,position:u}=$J({constraints:t.data,newParentWidth:n,newParentHeight:r,initialParentWidth:a,initialParentHeight:s,objectInitialWidth:o,objectInitialHeight:l,objectInitialPosition:i.position});if(t.position=u,t.data=(0,ye.A)((0,ye.A)({},t.data),{},{position:u}),t.states)for(let d in t.states)h$({stateId:d,objectOverride:t,objectRoot:i,newParentWidth:n,newParentHeight:r,initialParentWidth:a,initialParentHeight:s});if(u$(t)||t instanceof vJ)u$(t)&&(t.width=c,t.height=h,t.data=(0,ye.A)((0,ye.A)({},t.data),{},{width:c,height:h})),l$({objectOverride:t,objectRoot:i,newParentWidth:c,newParentHeight:h,initialParentWidth:o,initialParentHeight:l});else if(t instanceof XJ){let e=i,n=0!==o?c/o:1,a=0!==l?h/l:1;t.path=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t<=0||i<=0)return e;if(QJ(e))return console.warn("Cannot scale invalid path",e),KJ([]);try{let n=(0,YJ.parseSVG)(e).map(e=>{let n=(0,ye.A)({},e);return"x"in n&&(n.x=n.x*t),"y"in n&&(n.y=n.y*i),"x1"in n&&(n.x1=n.x1*t),"x2"in n&&(n.x2=n.x2*t),"y1"in n&&(n.y1=n.y1*i),"y2"in n&&(n.y2=n.y2*i),"rx"in n&&(n.rx=n.rx*t),"ry"in n&&(n.ry=n.ry*i),n});return KJ(n)}catch(r){return console.warn("Error parsing SVG path",r),KJ([])}}(e.path,n,a),t.data=(0,ye.A)((0,ye.A)({},t.data),{},{path:t.path})}}function h$(e){var t,i;let{stateId:n,objectOverride:r,objectRoot:a,newParentWidth:s,newParentHeight:o,initialParentWidth:l,initialParentHeight:c}=e,h=null===(t=r.states)||void 0===t?void 0:t[n],u=null===(i=a.states)||void 0===i?void 0:i[n];if(h&&u){let{width:e,height:t,position:i}=$J({constraints:r.data,newParentWidth:s,newParentHeight:o,initialParentWidth:l,initialParentHeight:c,objectInitialWidth:FB.isResizeable(u)?u.width:0,objectInitialHeight:FB.isResizeable(u)?u.height:0,objectInitialPosition:u.position});Object.assign(r.states[n],{position:i}),FB.isResizeable(h)&&Object.assign(r.states[n],{width:e,height:t})}}function u$(e){return e instanceof WJ||e instanceof qJ||e instanceof VJ||e instanceof HJ}var d$=class extends(AU(NA)){constructor(e,t,i){super(),this.data=t,this.bgColor=new Zj(1,1,1,1),this.fog=null,this.backupFog=new FA(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new Fv,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new FQ(CL,(0,ye.A)((0,ye.A)((0,ye.A)({},kz.defaultData),t.camera),{},{name:"Personal Camera"})),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new X_(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new JJ((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return null===(e=this.uiCanvas)||void 0===e?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new o$(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var t,i;null!==(t=this.uiCanvas)&&void 0!==t&&t.applyFrame(e),null===(i=this.uiCanvas)||void 0===i||i.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){void 0!==e.color&&(this.ambientLight.color=cY(e.color,t)),void 0!==e.intensity&&(this.ambientLight.intensity=e.intensity),void 0!==e.enabled&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(e=>{e instanceof HQ&&e.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof EX)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){void 0!==e.softShadowQuality&&this.isActive&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";if(GZ===e)return!1;GZ=e;let t=(e=>{switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}})(e);hx.shadowmap_pars_fragment=(e=>"\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ".concat(e,";\nconst int gShadowSamples = ").concat(e,";\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, ",5," - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        vec2 halton = haltonSequence[frameIndex];\n        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n        float temporalAngle  = temporalOffset * PI2;\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n"))(t);let i=WZ.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + ".concat(3,", spotShadowMap[ i ]")),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),hx.lights_fragment_begin=i;let n=HZ.slice();return n=n.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),hx.shadowmask_pars_fragment=n,!0}(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){this.scene.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=cY(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){void 0!==e.aoColor&&(this.aoColor=cY(e.aoColor,t))}updateByOp(e,t,i,n){let r=this.data.uiFrame;super.updateByOp(e,t,i,n);let a=t;wI(e.path,["fog"])?this.updateFog(a.fog,i.shared):wI(e.path,["ao"])?this.updateAo(a.ao,i.shared):wI(e.path,["ambient"])?this.updateAmbientLight(a.ambient,i.shared):wI(e.path,["shadow"])?this.updateShadow(a.shadow):0===e.type&&0===e.path.length&&(void 0!==e.props.uiFrame||r!==a.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),void 0!==e.backgroundColor&&this.setBackgroundColor(cY(e.backgroundColor,t.shared)),void 0!==e.fog&&this.updateFog(e.fog,t.shared),void 0!==e.ambient&&this.updateAmbientLight(e.ambient,t.shared),void 0!==e.ao&&this.updateAo(e.ao,t.shared),void 0!==e.shadow&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e,t;return null!==(e=null===(t=this.scene)||void 0===t?void 0:t.find(this.data.publish.playCamera))&&void 0!==e?e:this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return null===this.penumbraSizeArrayCache&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(i=>{var n,r;if(!i.visible)return!0;i instanceof sJ&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=null!==(n=i.data.penumbraSize)&&void 0!==n?n:.5,e+=1),i instanceof hJ&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=null!==(r=i.data.penumbraSize)&&void 0!==r?r:.5,t+=1)})}raycastWithClones(e){let t=[],i=n=>{for(let r of n.children){let n=r.cloner;$N.is(r)&&(r.visible||(null===n||void 0===n?void 0:n.object.data.visible))&&((qQ(r)||XQ(r)&&this.scene.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),o0(r,e,t,!0)),i(r))}};return i(this),t}updateEntity2DByOp(e,t,i,n){var r;null===(r=this.uiCanvas)||void 0===r||r.updateEntity2DByOp(e,t,i,n)}},p$=class extends(GQ(aE,ZZ)){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let n=this.shadow.camera;n.fov=90,n.aspect=1,n.near=100,n.far=2500;let r=new Zv(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),a=new Zv(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z),s=new ey(r,a),o=new XE(s,new Fv(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof XE){let e=this.shadow.camera,i=new Zv(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),n=new Zv(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},f$=class extends OX{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");void 0!==i?WH(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},m$=class extends OX{constructor(e,t,i){super(e,t,i),this._shapeId=null,this._context=i}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){let e,t=(0,ye.A)({},this.data.geometry.extrusion.shape);for(let r in t)"string"==typeof t[r]&&(t[r]=this._context.shared.getVariable(t[r],[this.uuid,"geometry","extrusion","shape",r]));if("Custom"===t.type){let n=t.shapeId;if(n!==this._shapeId&&this.detachShape(),n){var i;this._shapeId=n;let t=this._context.scene.find(n);null!==t&&void 0!==t&&t.data&&(t.attachedPaths.add(this),e=null===(i=t.geometry.userData)||void 0===i?void 0:i.shape),e||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let i;switch(t.type){case"Rectangle":i=DW;break;case"Ellipse":i=QV;break;case"Polygon":i=EW;break;case"Star":i=kW;break;default:throw new Error("Unknown shape type: ".concat(t.type))}e=i.create({parameters:t}).userData.shape}let n=this.geometry;e&&n.inputs&&(n.inputs.shapeData=e,n.build())}detachShape(){var e;null!==this._shapeId&&(null===(e=this._context.scene.find(this._shapeId))||void 0===e||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");void 0!==i?WH(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},g$=class extends oQ{constructor(e,t,i){super(e,t,i),this.data=t}},v$=class extends(kQ(OA,$Q)){constructor(e,t,i){super(),"Instance"===t.type&&"string"==typeof e&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return"Component"===this.data.type&&"string"==typeof this.identity}get isInstanceRoot(){return"Instance"===this.data.type&&"string"==typeof this.identity}transformAssignData(e,t){let i=wB.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(i){let t,n;for(let r of Lz.rootOverrideProps)void 0===e[r]?(void 0===t&&(t=(0,ye.A)({},e)),t[r]=i.data[r]):(void 0===n&&(n={}),n[r]=e[r],void 0===t&&(t=(0,ye.A)({},e)),t[r]=Hk.apply(i.data[r],e[r]));return this.overrideData=n,t}return(0,ye.A)((0,ye.A)((0,ye.A)({},Cz.defaultData),e),JO(Cz.defaultData,Lz.rootOverrideProps))}updateByOp(e,t,i,n){let r;if(this.isInstanceRoot&&!n)if(t=this.transformAssignData(t,i),0===e.type&&0===e.path.length&&this.component)for(let a of Lz.rootOverrideProps)a in e.props&&void 0===e.props[a]&&(void 0===r&&(r=(0,ye.A)((0,ye.A)({},e),{},{props:(0,ye.A)({},e.props)})),r.props[a]=this.component.data[a]);else if(0===e.type&&e.path.length>0&&Lz.rootOverrideProps.includes(e.path[0])){let i=e.path[0];void 0===r&&(r=(0,ye.A)((0,ye.A)({},e),{},{path:[],props:{[i]:t[i]}}))}super.updateByOp(null!==r&&void 0!==r?r:e,t,i,n)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(void 0===this.component){var i;let n=null!==(i=e.scene.find(t.component))&&void 0!==i?i:null,r=!1;if(n!==this.oldComponent){if(this.oldComponent){let t=0;for(let i of this.children){if(!$N.is(i))break;e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),y$(i),t+=1}this.children.splice(0,t)}r=!0}if(n){let i={};x$(e,[this.uuid],t.overrides,this,n,n,0,r,i);for(let t of this.children)if($N.is(t)){let n=t.data;"Empty"===n.type&&n.animations&&t.traverseEntity(t=>{let n=t.dataPatched;if(t instanceof OX&&n.bones&&n.boneInverses){let n=t.dataPatched;if(n.bones&&n.boneInverses){let r=n.bones.map(t=>e.scene.find(i[t])),a=n.boneInverses.map(e=>(new My).fromArray(e)),s=new XA(r,a);t.bind(s,t.bindMatrix)}}else t.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function y$(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)$N.is(i)&&y$(i)}}function b$(e,t,i,n){return e.component===t&&VO(e.identity,n)?e.overrideData===i?2:1:0}function x$(e,t,i,n,r,a,s,o,l){if(s>50)return!1;if(n.component!==r){if(n.component){let e=n.component.instances.indexOf(n);e>=0&&n.component.instances.splice(e,1)}r.instances.find(e=>e===n)||r.instances.push(n),n.component=r}r instanceof v$&&r.isInstanceRoot&&r.expandInstanceChildren(e);let c=0;for(let u of r.children)if($N.is(u)){let r=[...t,..."string"==typeof u.identity?[u.identity]:u.identity],d=Rz.resolve(i,r,1);null==d||d instanceof Xk||(Object.setPrototypeOf(d,Xk.prototype),console.error("wrong prototype"));let p,f=null;if(!o){var h;let t=n.children[c];if(f=$N.is(t)?t:null,null!==f){let e=b$(f,u,d,r);p=e>=1?f.stateSelection:void 0,2!==e&&(f=null)}if(null===f&&(f=null!==(h=e.scene.findInstance(r))&&void 0!==h?h:null,null!==f)){let t=b$(f,u,d,r);if(p=t>=1?f.stateSelection:void 0,2!==t)f=null;else{let t=f.parent.children.indexOf(f);f.parent.children.splice(t,1),n.children.splice(c,0,f),f.parent===n?t<=c&&console.error("not possible"):(f.parent=n,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(null===f){let t=d?Hk.apply(u.data,d):u.data;kL.is(t.type)&&(t=(0,ye.A)((0,ye.A)({},t),{},{type:"Empty"})),f=uU.createEntity(r,t,e),f.overrideData=d,n.add(f),n.children.splice(n.children.length-1,1),n.children.splice(c,0,f),f.updateState(f.data,e),p&&f.changeSelectedState(p,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){l[f.identity[f.identity.length-1]]=f.uuid}c+=1,x$(e,t,i,f,u,a,s+1,o,l)}if(!o){let t=c;for(;;){let t=n.children[c];if(!$N.is(t))break;e.pendingDeletes.add(t),c+=1}n.children.splice(t,c-t)}return!0}var w$=class extends(kQ(HA,$Q)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},A$=class extends OX{constructor(e,t,i){super(e,t,i),this.onBeforeRender=e=>{this.uiCanvas.render(e)},this.uiCanvas=new o$(e+"-canvas",t.geometry.width,t.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),0===e.type&&(void 0!==e.props.frame&&this.applyFrame(e.props.frame,i.shared),(void 0!==e.props.width||void 0!==e.props.height)&&this.applySize(e.props,i.shared))}applySize(e,t){var i,n;let r=null!==(i=null===e||void 0===e?void 0:e.width)&&void 0!==i?i:this.dataPatched.geometry.width,a=null!==(n=null===e||void 0===e?void 0:e.height)&&void 0!==n?n:this.dataPatched.geometry.height;this.uiCanvas.applySize({width:r,height:a}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var t;let i=this.frame;i&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),null!==(t=this.localGeometry)&&void 0!==t&&t.dispose(),this.localGeometry=oH(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){var i,n;let r=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:r.radius,alpha:r.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:r.radius,alpha:r.enabled?1:0}),null===(i=(n=this.material).reset)||void 0===i||i.call(n,this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,i,n){this.uiCanvas.updateEntity2DByOp(e,t,i,n),e===this.frameId&&0===t.type&&(void 0!==t.props.cornerRadius?this.applyGeometryParametersFromFrame(n):wI(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:n}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return null===(e=this.frame)||void 0===e?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){var i;super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t);let n=(0,ye.A)((0,ye.A)({},this.data.geometry),e);null!==(i=this.localGeometry)&&void 0!==i&&i.dispose(),this.localGeometry=oH(n,t,this.data.flatShading,this)}},S$=class{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let n=Og,r=new NA,a=new Xb;a.position.z=1;let s={passThruTexture:{value:null}},o=h("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",s),l=new Nb(new cx(2,2),o);function c(i){i.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function h(e,t){let i=new Yb({uniforms:t=t||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return c(i),i}r.add(l),this.setDataType=function(e){return n=e,this},this.addVariable=function(e,t,i){let n={name:e,initialValueTexture:i,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Sg,magFilter:Sg};return this.variables.push(n),n},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!1===i.capabilities.isWebGL2&&!1===i.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===i.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(let i=0;i<this.variables.length;i++){let n=this.variables[i];n.renderTargets[0]=this.createRenderTarget(e,t,n.wrapS,n.wrapT,n.minFilter,n.magFilter),n.renderTargets[1]=this.createRenderTarget(e,t,n.wrapS,n.wrapT,n.minFilter,n.magFilter),this.renderTexture(n.initialValueTexture,n.renderTargets[0]),this.renderTexture(n.initialValueTexture,n.renderTargets[1]);let r=n.material,a=r.uniforms;if(null!==n.dependencies)for(let e=0;e<n.dependencies.length;e++){let t=n.dependencies[e];if(t.name!==n.name){let e=!1;for(let i=0;i<this.variables.length;i++)if(t.name===this.variables[i].name){e=!0;break}if(!e)return"Variable dependency not found. Variable="+n.name+", dependency="+t.name}a[t.name]={value:null},r.fragmentShader="\nuniform sampler2D "+t.name+";\n"+r.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0;for(let i=0,n=this.variables.length;i<n;i++){let n=this.variables[i];if(null!==n.dependencies){let t=n.material.uniforms;for(let i=0,r=n.dependencies.length;i<r;i++){let r=n.dependencies[i];t[r.name].value=r.renderTargets[e].texture}}this.doRenderTarget(n.material,n.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let e=this.variables;for(let t=0;t<e.length;t++){let i=e[t];i.initialValueTexture&&i.initialValueTexture.dispose();let n=i.renderTargets;for(let e=0;e<n.length;e++)n[e].dispose()}},this.addResolutionDefine=c,this.createShaderMaterial=h,this.createRenderTarget=function(i,r,a,s,o,l){return new Yv(i=i||e,r=r||t,{wrapS:a=a||wg,wrapT:s=s||wg,minFilter:o=o||Sg,magFilter:l=l||Sg,format:Rg,type:n,depthBuffer:!1})},this.createTexture=function(){let i=new Float32Array(e*t*4),n=new GA(i,e,t,Rg,Og);return n.needsUpdate=!0,n},this.renderTexture=function(e,t){s.passThruTexture.value=e,this.doRenderTarget(o,t),s.passThruTexture.value=null},this.doRenderTarget=function(e,t){let n=i.getRenderTarget(),s=i.xr.enabled,c=i.shadowMap.autoUpdate,h=i.outputEncoding,u=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=Jg,i.toneMapping=0,l.material=e,i.setRenderTarget(t),i.render(r,a),l.material=o,i.xr.enabled=s,i.shadowMap.autoUpdate=c,i.outputEncoding=h,i.toneMapping=u,i.setRenderTarget(n)}}},_$=new cb,E$=new Zv,C$=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let n=1;t&&(n=t.getX(r)+t.getX(r+1)+t.getX(r+2)),_$.a.fromBufferAttribute(e,r),_$.b.fromBufferAttribute(e,r+1),_$.c.fromBufferAttribute(e,r+2),n*=_$.getArea(),i[r/3]=n}this.distribution=new Float32Array(e.count/3);let n=0;for(let r=0;r<i.length;r++)n+=i[r],this.distribution[r]=n;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){let n=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*n);return this.sampleFace(r,e,t,i)}binarySearch(e){let t=this.distribution,i=0,n=t.length-1,r=-1;for(;i<=n;){let a=Math.ceil((i+n)/2);if(0===a||t[a-1]<=e&&t[a]>e){r=a;break}e<t[a]?n=a-1:i=a+1}return r}sampleFace(e,t,i,n){let r=this.randomFunction(),a=this.randomFunction();return r+a>1&&(r=1-r,a=1-a),_$.a.fromBufferAttribute(this.positionAttribute,3*e),_$.b.fromBufferAttribute(this.positionAttribute,3*e+1),_$.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(_$.a,r).addScaledVector(_$.b,a).addScaledVector(_$.c,1-(r+a)),void 0!==i&&_$.getNormal(i),void 0!==n&&void 0!==this.colorAttribute&&(_$.a.fromBufferAttribute(this.colorAttribute,3*e),_$.b.fromBufferAttribute(this.colorAttribute,3*e+1),_$.c.fromBufferAttribute(this.colorAttribute,3*e+2),E$.set(0,0,0).addScaledVector(_$.a,r).addScaledVector(_$.b,a).addScaledVector(_$.c,1-(r+a)),n.r=E$.x,n.g=E$.y,n.b=E$.z),this}};function M$(e,t){let i=e,n=new Float32Array(4*t*t);for(let a=0;a<t*t;a++)n[4*a]=i[3*a],n[4*a+1]=i[3*a+1],n[4*a+2]=i[3*a+2],n[4*a+3]=0;let r=new GA(n,t,t,Rg,Og);return r.needsUpdate=!0,r}var T$="\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform sampler2D uDirections;     \nuniform vec3 uDirectionsAxis;\nuniform vec4 uWorldQuaternion;\nuniform vec3 uGravity;        \nuniform float uNoiseStrength;     // Variation of the noise\nuniform float uNoiseScale;        // Scale of the noise\nuniform float uNoiseSeed;         // Seed of the noise\nuniform float particleSize;\nuniform float uSpeed;     // update speed of the particles\nuniform float uRandomMassFactor;\n\n// COLLIDER\nuniform vec3 uColliderPos;                // Collider Position\nuniform vec3 uColliderSize;               // Collider Dimension\nuniform vec4 uColliderQuaternion;         // Collider Rotation\nuniform vec4 uColliderQuaternionInvert;   // Collider Rotation\nuniform float uBounce;                    // Bounce factor\nuniform float uForceDamping;\nuniform float uForceIntensity;\n\n\n\n\n    vec3 mod289(vec3 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 permute(vec4 x) {\n        return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    vec4 taylorInvSqrt(vec4 r)\n    {\n    return 1.79284291400159 - 0.85373472095314 * r;\n    }\n    \n    vec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n    float snoise(vec3 v)\n    {\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n    \n    // Permutations\n    i = mod289(i);\n    vec4 p = permute( permute( permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n    \n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n    }\n    \n    vec3 snoiseVec3( vec3 x ){\n    \n      float s  = snoise(vec3( x ));\n      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n      vec3 c = vec3( s , s1 , s2 );\n      return c;\n    \n    }\n    \n      \n    vec3 curlNoise( vec3 p, float seed){\n      p += seed;\n      const float e = .1;\n      vec3 dx = vec3( e   , 0.0 , 0.0 );\n      vec3 dy = vec3( 0.0 , e   , 0.0 );\n      vec3 dz = vec3( 0.0 , 0.0 , e   );\n    \n      vec3 p_x0 = snoiseVec3( p - dx );\n      vec3 p_x1 = snoiseVec3( p + dx );\n      vec3 p_y0 = snoiseVec3( p - dy );\n      vec3 p_y1 = snoiseVec3( p + dy );\n      vec3 p_z0 = snoiseVec3( p - dz );\n      vec3 p_z1 = snoiseVec3( p + dz );\n    \n      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n    \n      const float divisor = 1.0 / ( 2.0 * e );\n      return normalize( vec3( x , y , z ) * divisor );\n    \n    }\n\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n\nvec3 fbm_vec3(vec3 p, float frequency, float offset)\n{\n  return vec3(\n    cnoise((p+vec3(offset))*frequency),\n    cnoise((p+vec3(offset+20.0))*frequency),\n    cnoise((p+vec3(offset-30.0))*frequency)\n  );\n}\n\n"+"\nfloat rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n } \nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n  \n  return acceleration;\n}\n\nvec4 conjugate(vec4 q) {\n  return vec4(q.w, -q.x, -q.y, -q.z);\n}\n\n// Function to compute the normal of the ellipsoid at a given point\nvec3 ellipsoidNormal(vec3 p, vec3 radii) {\n  return normalize(p / (radii * radii));\n}\n\nfloat friction = .3;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    vec3 directions = texture2D( uDirections, vUv ).xyz;    \n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float mass = rand(originalPosition.xy) * 0.5 + 0.5;\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active\n    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision\n\n    // Randomness Mass\n    mass = (1.0 - (uRandomMassFactor * mass));\n    \n    if (isActive == 1.0) {\n      // **************************************************************\n      // FORCES NOISES\n      // **************************************************************\n      #ifdef USE_CURL_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {\n          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;\n        }\n      #endif\n      // **************************************************************\n      #ifdef USE_SIMPLEX_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {\n          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);\n        }\n      #endif\n      // ************************************************************** \n      #ifdef USE_FBM_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      \n          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;\n        }\n      #endif\n\n      // COLLIDER\n      ".concat("\n  #ifdef USE_COLLIDER\n    float restitution = max(uBounce * 2., .01); // Energy Loss\n    // SPHERE COLLIDER\n    // **************************************************************\n    #ifdef USE_SPHERE_COLLIDER       \n      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n      vec3 radii = uColliderSize;\n      // Adjust position relative to collider\n      vec3 relPos = position - uColliderPos;\n      // Apply rotation of the collider to the relative position\n      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n      // Scale relative position by radii (for ellipsoid collision detection)\n      vec3 scaledPos = relPos / radii;\n      // Calculate ellipsoidal distance\n      float dist = length(scaledPos); // Distance in terms of ellipsoid\n      \n      // Check for collision\n      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {\n          // Compute the normal at the collision point, accounting for particle size\n        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          \n        // Compute the normal at the collision point\n        vec3 normal = ellipsoidNormal(adjustedPos, radii);\n        // Rotate the normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);\n        // Reflect the velocity vector off the normal\n        velocity = reflect(velocity, normal) * restitution;\n\n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif\n\n    // BOX COLLIDER or PLANE COLLIDER \n    // **************************************************************\n    #ifdef USE_BOX_COLLIDER\n      // Box dimensions and repulsion variables\n      vec3 boxHalfSize = uColliderSize / 2.0;\n      // Convert world position to box's local space\n      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n      // Collision detection\n      vec3 localDistance = abs(localPos) - boxHalfSize;\n      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    \n\n      // Collision Detected\n      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      \n        // Find the nearest face normal for bounce direction\n        vec3 normal;\n        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {\n            normal = vec3(sign(localPos.x), 0.0, 0.0);\n        } else if (localDistance.y > localDistance.z) {\n            normal = vec3(0.0, sign(localPos.y), 0.0);\n        } else {\n            normal = vec3(0.0, 0.0, sign(localPos.z));\n        }            \n        // Rotate normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);      \n        // Reflect velocity and apply repulsion force\n        velocity = reflect(velocity, normal) * restitution;\n        \n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif      \n  #endif      \n  // END COLLIDER    \n","\n      // ATTRACTION\n      ").concat("\n  #ifdef USE_ATTRACTOR\n\n      #ifdef USE_SPHERE_COLLIDER      \n        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n        vec3 radii = uColliderSize;\n        // Adjust position relative to collider\n        vec3 relPos = position - uColliderPos;\n        // Apply rotation of the collider to the relative position\n        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n        // Scale relative position by radii (for ellipsoid collision detection)\n        vec3 scaledPos = relPos / radii;\n        // Calculate ellipsoidal distance\n        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid\n        float insideCheck = 1.0;\n\n      #endif\n\n\n      #ifdef USE_BOX_COLLIDER\n        // Box dimensions\n        vec3 boxHalfSize = uColliderSize / 2.0;\n        // Convert world position to box's local space\n        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n        vec3 localDistance = abs(localPos) - boxHalfSize;\n        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n        float insideCheck = particleSize;\n      #endif      \n  \n      // Apply vortex force inside the Helper\n      #ifdef USE_FORCE_LOCAL_SPACE\n        if (distToSurface <= insideCheck ) {    \n            // Define parameters for the attractor field\n            #ifdef USE_SPHERE_COLLIDER      \n              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed\n            #endif\n\n            #ifdef USE_BOX_COLLIDER\n              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed\n              #endif\n\n            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)\n          \n            // Use the same radii calculation code as for the collider\n            vec3 attractorRadii = uColliderSize;\n            // Adjust position relative to attractor center\n            vec3 relPos = position - uColliderPos;\n            // Apply rotation of the collider to the relative position\n            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n            // Scale relative position by radii (for ellipsoid attraction)\n            vec3 scaledPos = relPos / attractorRadii;\n\n            // Calculate ellipsoidal distance as attractor radius\n            float attractorRadius = length(scaledPos);\n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * attractorStrength;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= attractorDamping;\n        }\n      #else \n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= uForceDamping;\n      #endif    \n  #endif      \n","  \n      // VORTEX\n      ").concat("\n  #ifdef USE_VORTEX\n    // Box dimensions\n    vec3 boxHalfSize = uColliderSize / 2.0;\n    // Convert world position to box's local space\n    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n    vec3 localDistance = abs(localPos) - boxHalfSize;\n    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n\n    // Apply vortex force inside the box\n    if (distToSurface <= particleSize) {\n      float vortexStrength = uForceIntensity;\n      vec3 localTopCenter = vec3(0.0, 0., 0.0);\n\n      // Transform the local top center to the world space\n      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);\n      // Calculate the vector from particle to vortex center\n      vec3 vortexVector = vortexCenter - position;\n\n      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector\n      // Note: important to add a tiny z component to the up vector to avoid instability\n      vec3 upVector = vec3(0.0, 1.0, 0.01);\n      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));\n      rotationAxis = normalize(rotationAxis);\n\n      // Add rotational component to velocity\n      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; \n\n      vec3 rotationVelocity = rotationAxis * rotationSpeed;\n      // velocity += rotationVelocity * 0.005 ;\n      velocity = rotationVelocity * 0.005 ;\n\n      // Calculate vortex force\n      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;\n      // Apply the vortex force to the particle\n      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);\n      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);\n    }\n  #endif      \n","\n    } \n    // End isActive\n\n    // SPAWN BIRTH \n    // **************************************************************\n    // if (isSpawning == 1.)\n    #ifdef USE_NORMALS\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);\n    #else\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    \n    #endif\n    \n    // if (collisionFlag == 0.0)\n    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);\n\n    gl_FragColor = vec4(velocity, collisionFlag);\n}\n"),P$="\n\n  // Linear Fade In\n  float linearFadeIn(float t) {\n    return t;\n  }\n\n\n  // linear fade out\n  float linearFadeOut(float t) {\n    return 1.0 - t;\n  }\n  \n  float linearInOut(float t) {\n    return t < 0.5 ? t :  (1.0 - t);  \n  }\n\n    // lerp\n    float lerp(float a, float b, float t) {\n      return a + (b - a) * t;\n    }\n\n  // Ease In Out Quart\n  float exponentialInOut(float t) {\n    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :\n    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :\n    1.0;\n   }\n\n  // constant\n  float constant(float t) {\n    return 1.0;\n  } \n",D$="\n  uniform sampler2D uPosition;\n  uniform float uSize;\n  uniform float uSizeEnd;\n  uniform vec3 uWorldOffset;\n  uniform vec4 uWorldQuaternion;\n  // Billboard Behavior - Currently at Zero, but we can change that\n  uniform float uRotation;\n  uniform float uRotationEnd;\n  uniform vec2 center;\n\n  // Randomness\n  uniform float uRandScaleFactor;\n  uniform float uRandRotationFactor;\n\n  attribute vec2 ref;\n\n  varying float v_LifeLeft;    // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  ".concat("\n\nfloat rand(vec3 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n    \n  return acceleration;\n}\n","\n  ").concat(P$,"\n"),O$="\n  uniform vec4 uColor;                // start color\n  uniform vec4 uColor2;               // end color\n  uniform sampler2D uTexture;         // texture\n  varying float v_LifeLeft;   // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  float random(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n  "+P$+"  \n  ".concat("\nvec3 rgb2xyz (in vec3 rgb) {\n    float r = rgb.r;\n\tfloat g = rgb.g;\n\tfloat b = rgb.b;\n\n\tr = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tfloat x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tfloat y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tfloat z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n    \n    vec3 xyz = vec3(\n        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,\n        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,\n        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0\n    );\n    return(xyz);\n}\n\nvec3 xyz2lab (in vec3 xyz) {\n\tfloat x = xyz.x / 95.047;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 108.883;\n\n\tx = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);\n\ty = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);\n\tz = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);\n\n    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));\n    return(lab);\n}\n\nvec3 rgb2lab(in vec3 rgb) {\n    vec3 xyz = rgb2xyz(rgb);\n    vec3 lab = xyz2lab(xyz);\n    return(lab);\n}\n\nvec3 xyz2rgb (in vec3 xyz) {\n\tfloat x = xyz.x / 100.0;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 100.0;\n\t\n    \n\tfloat r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);\n\tfloat g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);\n\tfloat b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);\n\n\tr = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;\n\tg = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;\n\tb = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;\n\n\tr = min(max(0.0, r), 1.0);\n\tg = min(max(0.0, g), 1.0);\n\tb = min(max(0.0, b), 1.0);\n\n\treturn(vec3(r, g, b));\n}\n\nvec3 lab2xyz (in vec3 lab) {\n    float l = lab.x;\n\tfloat a = lab.y;\n\tfloat b = lab.z;\n\n  \tfloat y = (l + 16.0) / 116.0;\n\tfloat x = a / 500.0 + y;\n\tfloat z = y - b / 200.0;\n\n\tfloat y2 = pow(y, 3.0);\n\tfloat x2 = pow(x, 3.0);\n\tfloat z2 = pow(z, 3.0);\n\n  \ty = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100.0;\n\tz *= 108.883;\n\n\treturn(vec3(x, y, z));\n}\nvec3 lab2rgb (in vec3 lab) {\n    vec3 xyz = lab2xyz(lab);\n    vec3 rgb = xyz2rgb(xyz);\n    return(rgb);\n}\n\n","\n\n"),k$=class extends Yb{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],XH.startContext(XH.globalContext),this.lightLayer=new MY(0,"",(0,ye.A)((0,ye.A)({},tz.defaultData("light","phong")),{},{visible:!1}),new Tq,{},t.shared),XH.endContext(XH.globalContext),this.build()}updateState(e){void 0!==e.coloring&&(this.isColoringRandom="random"===e.coloring),void 0!==e.color&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),void 0!==e.color2&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),void 0!==e.size&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),void 0!==e.ease&&(this.easeOpacity=e.ease,this.build()),void 0!==e.easeSize&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new zG;return e.needsJitter=this.needsJitter,e.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n"),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode("\n    // Discard fully transparent pixels \n    if (gl_FragColor.a <= 0.0) discard;\n\n    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);\n"),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(D$),e.addFragmentParsCode(O$),e.addVertexFinalCode((e=>{let{easeSize:t="linearFadeOut"}=e;return"\n  vUv = uv;  \n  vRef = ref;\n  // Normalized LifeTime 1 to 0\n  float lifeLeft = texture2D(uPosition, ref).w;\n  v_LifeLeft = lifeLeft;\n  // Position From DataTexture Simulation\n  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;\n  // Apply World Quaternion\n  pos = applyQuaternionToVector(uWorldQuaternion, pos);  \n            \n  #ifdef  USE_SIZE_END\n    // Scaled Over Time\n    float t = 1. - lifeLeft;\n    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd\n    vec3 scaledPosition = position * vec3(currentSize);\n  #else\n    // Change Size Behavior over LifeTime\n    float easeSize = ".concat(t,"(1. - lifeLeft);\n    // Scaled Over Time\n    vec3 scaledPosition = position * vec3(uSize * easeSize);\n  #endif\n\n  // Billboard Behavior\n  vec2 scale;\n  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    \n  // Randomness \n  float randRef = rand(ref);\n  scale *= (1.0 - (uRandScaleFactor * randRef));\n  // Rotation\n  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);\n  float originalRotation = (1.0 - uRotation) * 2.0 * PI;\n  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;\n  // OverTime\n  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);\n\n  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;\n  vec2 rotatedPosition;\n  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;\n  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;\n  \n  mat4 instanceMatrix = mat4(\n    vec4(1.0, 0.0, 0.0, 0.0),\n    vec4(0.0, 1.0, 0.0, 0.0),\n    vec4(0.0, 0.0, 1.0, 0.0),\n    vec4(pos.x, pos.y, pos.z, 1.0)\n  );  \n\n  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n  mvPosition.xy += rotatedPosition;\n  gl_Position = projectionMatrix  * mvPosition;   \n")})({easeSize:this.easeSize})),e.addFragmentFinalCode((e=>{let{easeOpacity:t="linearFadeOut"}=e;return"  \n  // if Particle is dead, hide it\n  if (v_LifeLeft <= 0.005 ) {\n    discard;\n  }\n\n  #ifdef USE_RANDOM_COLORING\n    float randVal = random(vRef); // Generate a random value based on the reference\n    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors\n  #else\n    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);\n  #endif\n\n  // Opacity over Life Time\n  float finalAlpha = ".concat(t,"(1. - v_LifeLeft);  \n  vec4 textureColor = texture2D(uTexture, vUv).rgba; \n  finalColor = textureColor.rgb * color.rgb;\n  finalAlpha = color.a * textureColor.a * finalAlpha;\n  \n  gl_FragColor = vec4(finalColor, finalAlpha);     \n\n")})({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=(0,ye.A)((0,ye.A)({},e.uniforms),this.uniforms),this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},I$=class{constructor(e,t,i,n){var r;this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=function(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}(t);this.targetMesh="BufferGeometry"===(null===n||void 0===n?void 0:n.geometry.type)||"Mesh"===(null===n||void 0===n?void 0:n.type)&&n&&n.geometry.hasAttribute("position")&&n.geometry.hasAttribute("normal")?n:this.getMesh(i,1);let{positions:a,dataTexture:s,dataTextureNormals:o}=this.createPositions(this.textureSize,null!==(r=this.targetMesh)&&void 0!==r?r:this.getMesh(i,1));this.positionsTexture=s,this.positionsAttribute=a,this.directionsTexture=o}createPositions(e,t){let{positions:i,normals:n}=function(e,t){let i=new Nb(e.geometry,e.material),n=[],r=[],a=new Zv,s=new Zv;null!==i.geometry.index&&(i.geometry=i.geometry.toNonIndexed());let o=new C$(i).build();for(let l=0;l<t;l++)o.sample(a,s),n.push(a.x,a.y,a.z),r.push(s.x,s.y,s.z);return{positions:new Float32Array(n),normals:new Float32Array(r)}}(t,e*e);return{dataTexture:M$(i,e),positions:i,dataTextureNormals:M$(n,e)}}getMesh(e,t){let i=null;switch(e){case"SphereEmitterShape":i=new f_(.5*t,32,32);break;case"TorusEmitterShape":i=new m_(.5*t,.3,15,40);break;case"ConeEmitterShape":i=new LS(t,t,15);break;case"BoxEmitterShape":i=new Vb(t,t,t);break;case"PlaneEmitterShape":i=new cx(t,t),i.rotateX(-Math.PI/2);break;default:i=new f_(t,32,32)}return new Nb(i,new db({color:16711680}))}applyToShader(e,t){this.size=(new Zv).fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function R$(e){let t=(0,ye.A)({},e),i=NL.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let n=(0,ye.A)((0,ye.A)({},i.shape),t.shape),r=(0,ye.A)((0,ye.A)({},i.renderMaterial),t.renderMaterial);return(0,ye.A)((0,ye.A)((0,ye.A)({},i),t),{},{shape:n,renderMaterial:r})}var L$=class extends Jy{constructor(e,t){var i,n,r,a;super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new q_,this.currentWorldPosition=new Zv,this.systemQuaternion=new Kv,this.worldGravity=new Zv(0,0,0),this.directionAxis=new Zv(0,0,0),this.colliderV3=new Zv(0,0,0),this.colliderQuaternion=new Kv(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let s=t.data;this.material=new k$(s.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:s.renderMaterial.color},uColor2:{value:s.renderMaterial.color2},uPosition:{value:new Zv(0,0,0)},uEmissionData:{value:new Zv(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new Zv(0,0,0)},uWorldQuaternion:{value:new qv(0,0,0,1)},uRandScaleFactor:{value:null!==(i=s.randomScale)&&void 0!==i?i:0},uRandRotationFactor:{value:null!==(n=s.randomRotation)&&void 0!==n?n:0},uRotation:{value:null!==(r=s.renderMaterial.spriteRotation[0])&&void 0!==r?r:0},uRotationEnd:{value:null!==(a=s.renderMaterial.spriteRotation[1])&&void 0!==a?a:0}},this.setTexture(this.material.uniforms,s.renderMaterial.texture),this.init(s)}setTexture(e,t){let i=t.data;if("string"==typeof t){let i=this.shared.image(t),n=new Gv(i.img);return n.needsUpdate=!0,void(e.uTexture.value=n)}if("string"!=typeof i){let t=new Image;t.onload=()=>{let i=new Gv(t);i.needsUpdate=!0,e.uTexture.value=i};let n=new Blob([i],{type:"image/*"}),r=URL.createObjectURL(n);t.src=r}}updateGeometryAttributes(e,t){var i;let n=function(e){let t=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let n=0;n<e;n++){let r=i*e+n;t[2*r+0]=i/(e-1),t[2*r+1]=n/(e-1)}return t}(t);null===(i=this.emitterShape)||void 0===i||!i.positionsAttribute||e.geometry.setAttribute("ref",new QA(n,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var i;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset)return void this.reset();this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let n=1e3/t,r=this.targetFPS/n,a=this.previousRatio+(r-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=a,this.previousRatio=a;let s=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=s,this.material.uniforms.uPosition.value=null===(i=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))||void 0===i?void 0:i.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(R$((0,ye.A)((0,ye.A)({},this.system.data),{},{colliderEntityId:null}))),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),0===this.colliderV3.y&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;"size"===t[2]&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),"sizeEnd"===t[2]&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(e,t)=>{let i=[...this.system.data.shape.size];i[e]=t,this.updateParticleState({shape:(0,ye.A)((0,ye.A)({},this.system.data.shape),{},{size:i})})};"shape_size_0"===t[2]&&i(0,e),"shape_size_1"===t[2]&&i(1,e),"shape_size_2"===t[2]&&i(2,e),"speed"===t[2]&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/10),"gravity"===t[2]&&this.worldGravity.set(0,e/100,0),"noiseStrength"===t[2]&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),"noiseScale"===t[2]&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),"direction_x"===t[2]&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),"direction_y"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),"direction_z"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState((0,ye.A)((0,ye.A)({},e),{},{size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]})),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){if(this.positionSimRT&&this.velocitySimRT){var t,i;if(this.shouldReInitGPUCompute(e)&&this.init(R$(this.system.data)),void 0!==e.life&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),void 0!==e.speed&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10),void 0!==e.collisionBounce&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),void 0!==e.noiseStrength&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),void 0!==e.noiseScale&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),void 0!==e.noiseSeed&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),void 0!==e.randomMass&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),void 0!==(null===(t=e.renderMaterial)||void 0===t?void 0:t.size)){let t=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(t)}if(void 0!==(null===(i=e.renderMaterial)||void 0===i?void 0:i.spriteRotation)&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),void 0!==e.shape){var n,r;let t=null!==(n=e.shape.size)&&void 0!==n?n:this.system.data.shape.size,i=[Number(this.shared.getVariable(t[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(t[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(t[2],[this.uuid,"particles","shape_size_2"]))],a=(0,ye.A)((0,ye.A)({},R$(this.system.data).shape),{},{size:i});null===(r=this.emitterShape)||void 0===r||r.applyToShader(this.positionSimRT.material.uniforms,a)}if(void 0!==e.gravity&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),void 0!==e.direction){let t=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(t),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}void 0!==e.randomRotation&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),void 0!==e.randomScale&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(void 0!==e.forceIntensity&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),void 0!==e.forceDambing&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*wv.DEG2RAD,Number(e[1])*wv.DEG2RAD,Number(e[2])*wv.DEG2RAD],i=new By(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:i,colliderEntityId:n,shape:r,emitTimeDuration:a,emitTimeCycle:s,life:o,directionMode:l,noiseType:c}=e;return void 0!==t||void 0!==i||n||null===n||void 0!==s||void 0!==r||void 0!==o||void 0!==a||void 0!==l||void 0!==c}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:"infinity"===e.emitTimeCycle?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to ".concat(1e5,".")),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape){if(isNaN(this.emitterShape.positionsTexture.source.data.data[0]))return void this.init(e);clearInterval(t)}},100);if(!this.emitterShape)return;let i=new S$(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),n=this.updateSimulationDefinition(e),r=i.addVariable("uCurrentPosition",n+"\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform float uTime;\nuniform float uSpeed;     // update speed of the particles\nuniform vec3 uWorldOffset;    \nuniform vec4 uWorldQuaternion;\nuniform float uMaxLifeTime;\nuniform vec3 uEmitterSize;\nuniform float uFPSRatio;     // 1  for 60 FPS\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n        vec2(12.9898,78.233)))*\n        43758.5453123);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n    vec3 acceleration = force / mass;\n    \n    return acceleration;\n  }\n  \n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted\n    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);\n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided\n    float lifeTime = uMaxLifeTime;\n\n    // Calculate the position adjustment based on collision\n    //     if (collisionFlag > .5) {  \n    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0\n    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise\n    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);\n\n    // Update position based on collision or normal movement\n    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);\n    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);\n\n    // EMISSION RATE - BIRTH\n    // if (isSpawning == 1.0) {\n    // Better Approach to avoid If statement\n    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;\n    originalPosition = mix(originalPosition, newPosition, isSpawning);\n    position = mix(position, originalPosition, isSpawning);;\n    timeStart = mix(timeStart, uTime, isSpawning);\n\n    // Calculate timeLeft for life normalization\n    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);\n    float life_Normalize = timeLeft / lifeTime;\n\n    // Use isActive to blend between the calculated color and black\n    vec4 activeColor = vec4(position, life_Normalize);\n    // if (isActive == 1.0) {\n    gl_FragColor = mix(vec4(0.0), activeColor, isActive);\n\n}\n",this.emitterShape.positionsTexture),a=i.addVariable("uCurrentVelocity",n+T$,this.emitterShape.directionsTexture),s=i.addVariable("uCurrentEmissionRate","\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\n\nuniform sampler2D uIndex; // Texture with corresponding index\nuniform float uLastIndexEmitted; // Last emitted index\nuniform float uParticlesToEmit; // Number of particles to emit on that frame\nuniform float uTime;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    float particleIndex = texture(uIndex, vUv).x;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;\n\n\n    // ********** Detect Colision to Create a flag and use it in position **********\n    // We are doing this here, so\n\n    // ********** Emit Particles **********\n    // X = isSpawning 0.0 or 1.0\n    // Y = isActive 0.0 or 1.0\n    // Check if the vertex index is between the first value and the last value\n    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {\n    //     // Emit a particle by writing 1 to the red channel of the color output\n    //     // r: 1. == emit the particle\n    //     // g: 1. == particle is now active\n    //     timeStart = uTime;\n    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);\n    // } else {\n    //     // The Particle is either already emitted or not in the range of the particles to emit\n    //     // Do not emit a particle by writing 0 to the red channel of the color output        \n    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);\n    // }\n    // Determine if the particle is within the emission range\n    float emitLowerBound = step(uLastIndexEmitted, particleIndex);\n    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);\n    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise\n\n    // Set timeStart and color\n    timeStart = mix(timeStart, uTime, emitParticle);\n    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);\n\n\n}\n",function(e){let t=new Float32Array(4*e*e);for(let n=0;n<e*e;n++)t[4*n]=0,t[4*n+1]=0,t[4*n+2]=0,t[4*n+3]=0;let i=new GA(t,e,e,Rg,Og);return i.needsUpdate=!0,i}(this.emitterShape.textureSize));i.setVariableDependencies(r,[r,a,s]),i.setVariableDependencies(a,[r,a,s]),i.setVariableDependencies(s,[r,a,s]);let o=function(e){let{size:t}=e,i=new Float32Array(4*t*t);for(let r=0;r<t*t;r++)i[4*r]=r,i[4*r+1]=0,i[4*r+2]=0,i[4*r+3]=0;let n=new GA(i,t,t,Rg,Og);return n.needsUpdate=!0,n}({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new Zv(0,0,0)},uWorldQuaternion:{value:new qv(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new Zv(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};r.material.uniforms=l;let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let h=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),u={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new qv(0,0,0,1)},uColliderPos:{value:new Zv(0,0,0)},uColliderSize:{value:new Zv(0,0,0)},uForceIntensity:{value:h?h.forceIntensity:0},uForceDamping:{value:h?h.forceDambing:0},uColliderQuaternion:{value:new qv(0,0,0,1)},uColliderQuaternionInvert:{value:new qv(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10}};a.material.uniforms=u;let d={uIndex:{value:o},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};s.material.uniforms=d;let p=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],f=(0,ye.A)((0,ye.A)({},R$(this.system.data).shape),{},{size:p});this.emitterShape.applyToShader(r.material.uniforms,f),i.init(),this.gpuCompute=i,this.positionSimRT=r,this.velocitySimRT=a,this.emissionRateSimRT=s,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){return[Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]))]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let t=this.system.getColliderData(e.colliderEntityId);switch(null===t||void 0===t?void 0:t.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0}let i=null===t||void 0===t?void 0:t.colliderType;"sphere"===i&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),"box"===i&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),"helper"===(null===t||void 0===t?void 0:t.forceRange)&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}"normals"===e.directionMode&&(this.simFeaturesDefinition.USE_NORMALS=!0),"curl"===e.noiseType&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),"simplex"===e.noiseType&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),"fbm"===e.noiseType&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[i,n]of Object.entries(this.simFeaturesDefinition))n&&(t+="#define ".concat(i,"\n"));return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let i=new Zv(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if("MeshEmitterShape"===e.type){let n=null;return this.system.context.scene.traverseEntity(t=>{t.uuid===e.fromMeshId&&(n=t)}),n?new I$(i,t,e.type,n):new I$(i,t,"SphereEmitterShape")}return new I$(i,t,e.type)}createPrimaryEmitter(e){let t,i=e*e;return t=new tS(new cx(1,1,1),this.material,i),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount(e){let{birthRatePerSecond:t,particleMaxLifeTime:i,loopDuration:n=0}=e;return Math.ceil(t*(i+n))}dispose(){var e,t;!this.gpuCompute||(null!==(e=this.rootObject)&&void 0!==e&&null!==(e=e.parent)&&void 0!==e&&e.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),null===(t=this.emitterShape)||void 0===t||t.dispose())}GoEmitSomeParticles(e,t){let i=e-this.lastEmitTime,n=1/t;if(i>=n){let t=Math.max(1,Math.floor(i/n));return this.lastEmitTime=e,this.emittedParticlesAmount+t>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=t,t}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(R$(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},z$=class extends qH{constructor(e,t,i){super(e,t),this.type="ParticleSystem",this.geometry=new Cb,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=e=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(e))},this.context=i,this.data=(0,ye.A)((0,ye.A)({},t),R$(t)),this.geometry.setAttribute("position",new yb([],3)),this.material=new db({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new L$(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t="one_time"===this.data.emitTimeCycle;if(("loop"===this.data.emitTimeCycle||t)&&this.currentLoopTime>1e3*this.data.emitTimeDuration&&(this.stopped||(this.stop(),t||this.start(1e3*this.data.emitTimeDelay))),this.emitter&&this.started){let t=this.actualTime/1e3;this.emitter.update(t,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(t=>t.identity===e);return t?t.data:null}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),wI(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:(0,ye.A)((0,ye.A)({},this.data.renderMaterial),qk.drop(e,1).props)}),wI(e.path,["shape"])&&this.updateParticleState({shape:(0,ye.A)((0,ye.A)({},this.data.shape),qk.drop(e,1).props)})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(void 0!==e.colliderEntityId&&null!==e.colliderEntityId){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}null===e.colliderEntityId&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.currentLoopTime=0,t?this.timeoutId=window.setTimeout(()=>{this.start(0)},t):(this.started=!0,this.stopped=!1,this.isFrozen=!1,null===(e=this.emitter)||void 0===e||e.startEmitting(this.actualTime/1e3))}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,null!==(e=this.emitter)&&void 0!==e&&e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,null===(e=this.emitter)||void 0===e||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};var B$=function(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch(e){}}();function j$(e,t,i){return console.assert(void 0!==t.type),"Mesh"===t.type?function(e,t,i){var n,r;let a;return void 0!==B$&&(null!==(n=null===t||void 0===t||null===(r=t.geometry)||void 0===r?void 0:r.subdivisions)&&void 0!==n?n:0)>B$&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=B$),"TextGeometry"===t.geometry.type?new oQ(e,t,i):"InputGeometry"===t.geometry.type?new g$(e,t,i):(a="SubdivGeometry"===t.geometry.type?new BX(e,t,i):"PathGeometry"===t.geometry.type?new m$(e,t,i):"VectorGeometry"===t.geometry.type?new f$(e,t,i):"BooleanGeometry"===t.geometry.type?new HQ(e,t,i):"ShapeBlendGeometry"===t.geometry.type?new q$(e,t,i):"UIGeometry"===t.geometry.type?new A$(e,t,i):new OX(e,t,i),a)}(e,t,i):"Empty"===t.type?new eK(e,t):"Particle"===t.type?new z$(e,t,i):"ParticleCollider"===t.type?new tK(e,t,i):"Splat"===t.type?new eK(e,t):"Bone"===t.type?new w$(e,t):"Page"===t.type?new d$(e,t,i):"PointLight"===t.type?new p$(e,t,i):"SpotLight"===t.type?new hJ(e,t,i):"DirectionalLight"===t.type?new sJ(e,t,i):"Component"===t.type||"Instance"===t.type?new v$(e,t,i):kL.is(t.type)?new FQ(e,t):(console.error(t),new eK(e,t))}uU.createEntity=j$,uU.changeEntityProptotype=function(e,t,i){let n=j$(e.identity,t,i),r=e.children,a=e.attachedPaths,s=e.parent,o=e.component,l=e.instances,c=e.overrideData,h=e.uuid,u=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(n));for(let d of Object.keys(n))e[d]=n[d];e.children=[...e.children,...r],e.attachedPaths=a,e.parent=s,e.component=o,e.instances=l,e.uuid=h,e.overrideData=c,e.updateState(e.data,i),u&&e.changeSelectedState(u,i),e.resetBBoxNeedsUpdate()},uU.Cloner=xQ;var F$=new Cb;F$.setAttribute("position",new mb(new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),3));var N$=class extends v_{constructor(e){super((0,ye.A)((0,ye.A)({},e),{},{depthTest:!1,depthWrite:!1,glslVersion:av,vertexShader:"\n\t\t\t\tprecision highp float;\n\t\t\t\tin vec3 position;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position, 1);\n\t\t\t\t}\n\t\t\t"}))}customProgramCacheKey(){return""}};var U$=new Xb,V$=24,W$=96,H$={shapeInput:()=>"\n\t\t\tconst float posRowCoord = ".concat(.1,";  // vec4: px py pz opType\n\t\t\tconst float quatRowCoord = ").concat(.3,";  // vec4: qx qy qz qw\n\t\t\tconst float param1RowCoord = ").concat(.5,";// vec4: type param1 param2 param3\n\t\t\tconst float param2RowCoord = ").concat(.7,";// vec4: blendRange roundness scale param4\n\t\t\tconst float colorRowCoord = ").concat(.9,"; // vec4: r g b a\n\t\t\tuniform sampler2D shapesDataTexture;\n\t\t\tvec4 shapePos(float iin) { \n\t\t\t\tvec4 r = texture(shapesDataTexture, vec2(iin, posRowCoord));\n\t\t\t\treturn r;\n\t\t\t}\n\t\t\tvec4 shapeQuat(float iin) {\n\t\t\t\tvec4 r = texture(shapesDataTexture, vec2(iin, quatRowCoord));\n\t\t\t\treturn r;\n\t\t\t}\n\t\t\tvec4 shapeParams1(float iin) {\n\t\t\t\tvec4 r = texture(shapesDataTexture, vec2(iin, param1RowCoord));\n\t\t\t\treturn r;\n\t\t\t}\n\t\t\tvec4 shapeParams2(float iin) {\n\t\t\t\tvec4 r = texture(shapesDataTexture, vec2(iin, param2RowCoord));\n\t\t\t\treturn r;\n\t\t\t}\n\t\t\tvec4 shapeColor(float iin) {\n\t\t\t\tvec4 r = texture(shapesDataTexture, vec2(iin, colorRowCoord));\n\t\t\t\treturn r;\n\t\t\t}\n\t\t"),getxyzi:"\n\t\t\t// this code must complement lookup\n\t\t\tfloat xi = mod(gl_FragCoord.x - 0.5, VOXEL_RESOLUTION);\n\t\t\tfloat yi = mod(gl_FragCoord.y - 0.5, VOXEL_RESOLUTION);\n\t\t\tfloat zi = floor((gl_FragCoord.x - 0.5) * INV_VOXEL_RESOLUTION) + floor((gl_FragCoord.y - 0.5) * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;\n\t\t",lookup:"\n\t\t\tuniform sampler2D potentialPassTexture;\n\t\t\tuniform sampler2D voxelPassTexture; // includes normal (in xyz) and key (in w)\n\t\t\t\n\t\t\t// box or marching cube lookup value in value texture, integer box coord inputs\n\t\t\t// this code must complement codebits.getxyzi\n\t\t\tvec4 look(float xi, float yi, float zi, sampler2D rt) {// range 0 .. numv etc\n\t\t\t\tvec2 uv = vec2(\n\t\t\t\t\tmod(zi, Z_LAYERS_PER_ROW) + (xi + 0.5) / VOXEL_RESOLUTION,\n\t\t\t\t\tfloor(zi / Z_LAYERS_PER_ROW) + (yi + 0.5) / VOXEL_RESOLUTION\n\t\t\t\t); \n\t\t\t\tuv /= Z_LAYERS_PER_ROW;\n\t\t\t\treturn texture(rt, uv);\n\t\t\t}\n\t\t",getpart:"\n\t\t\tfloat getpart(inout float a, float b) {\n\t\t\t\tfloat t = floor(a/b);\n\t\t\t\tfloat r = a - t*b;\n\t\t\t\ta = t;\n\t\t\t\treturn r;\n\t\t\t}\n\t\t",triTable:new Float32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,1,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,9,9,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,2,8,10,2,8,9,10,-1,-1,-1,-1,-1,-1,-1,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,0,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,1,11,9,1,11,8,9,-1,-1,-1,-1,-1,-1,-1,1,10,3,3,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,10,0,10,8,0,10,11,8,-1,-1,-1,-1,-1,-1,-1,0,9,3,9,11,3,9,10,11,-1,-1,-1,-1,-1,-1,-1,10,8,9,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,4,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,4,1,7,4,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,2,1,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,3,4,0,3,10,2,1,-1,-1,-1,-1,-1,-1,-1,10,2,9,2,0,9,7,4,8,-1,-1,-1,-1,-1,-1,-1,9,10,2,7,9,2,3,7,2,4,9,7,-1,-1,-1,-1,7,4,8,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,11,4,2,11,4,0,2,-1,-1,-1,-1,-1,-1,-1,1,0,9,7,4,8,11,3,2,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,9,2,11,9,1,2,9,-1,-1,-1,-1,1,10,3,10,11,3,4,8,7,-1,-1,-1,-1,-1,-1,-1,10,11,1,11,4,1,4,0,1,4,11,7,-1,-1,-1,-1,8,7,4,11,0,9,10,11,9,3,0,11,-1,-1,-1,-1,11,7,4,9,11,4,10,11,9,-1,-1,-1,-1,-1,-1,-1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,9,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,0,0,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,8,5,3,8,5,1,3,-1,-1,-1,-1,-1,-1,-1,10,2,1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,10,2,1,5,9,4,-1,-1,-1,-1,-1,-1,-1,10,2,5,2,4,5,2,0,4,-1,-1,-1,-1,-1,-1,-1,5,10,2,5,2,3,4,5,3,8,4,3,-1,-1,-1,-1,4,5,9,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,11,8,0,5,9,4,-1,-1,-1,-1,-1,-1,-1,4,5,0,5,1,0,11,3,2,-1,-1,-1,-1,-1,-1,-1,5,1,2,8,5,2,11,8,2,5,8,4,-1,-1,-1,-1,11,3,10,3,1,10,4,5,9,-1,-1,-1,-1,-1,-1,-1,5,9,4,1,8,0,1,10,8,10,11,8,-1,-1,-1,-1,0,4,5,11,0,5,10,11,5,3,0,11,-1,-1,-1,-1,8,4,5,10,8,5,11,8,10,-1,-1,-1,-1,-1,-1,-1,8,7,9,9,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,9,3,5,9,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,7,0,7,1,0,7,5,1,-1,-1,-1,-1,-1,-1,-1,3,5,1,7,5,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,9,7,5,9,2,1,10,-1,-1,-1,-1,-1,-1,-1,2,1,10,0,5,9,0,3,5,3,7,5,-1,-1,-1,-1,2,0,8,5,2,8,7,5,8,2,5,10,-1,-1,-1,-1,5,10,2,3,5,2,7,5,3,-1,-1,-1,-1,-1,-1,-1,5,9,7,9,8,7,2,11,3,-1,-1,-1,-1,-1,-1,-1,7,5,9,2,7,9,0,2,9,11,7,2,-1,-1,-1,-1,11,3,2,8,1,0,8,7,1,7,5,1,-1,-1,-1,-1,1,2,11,7,1,11,5,1,7,-1,-1,-1,-1,-1,-1,-1,8,5,9,7,5,8,3,1,10,11,3,10,-1,-1,-1,-1,0,7,5,9,0,5,0,11,7,10,0,1,0,10,11,-1,0,10,11,3,0,11,0,5,10,7,0,8,0,7,5,-1,5,10,11,5,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,9,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,8,9,1,6,10,5,-1,-1,-1,-1,-1,-1,-1,5,6,1,1,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,1,6,2,1,8,0,3,-1,-1,-1,-1,-1,-1,-1,5,6,9,6,0,9,6,2,0,-1,-1,-1,-1,-1,-1,-1,8,9,5,2,8,5,6,2,5,8,2,3,-1,-1,-1,-1,11,3,2,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,11,0,2,11,5,6,10,-1,-1,-1,-1,-1,-1,-1,9,1,0,11,3,2,6,10,5,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,9,1,2,11,9,11,8,9,-1,-1,-1,-1,11,3,6,3,5,6,3,1,5,-1,-1,-1,-1,-1,-1,-1,11,8,0,5,11,0,1,5,0,6,11,5,-1,-1,-1,-1,6,11,3,6,3,0,5,6,0,9,5,0,-1,-1,-1,-1,9,5,6,11,9,6,8,9,11,-1,-1,-1,-1,-1,-1,-1,6,10,5,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,3,7,4,10,5,6,-1,-1,-1,-1,-1,-1,-1,0,9,1,6,10,5,7,4,8,-1,-1,-1,-1,-1,-1,-1,5,6,10,7,9,1,3,7,1,4,9,7,-1,-1,-1,-1,2,1,6,1,5,6,8,7,4,-1,-1,-1,-1,-1,-1,-1,5,2,1,6,2,5,4,0,3,7,4,3,-1,-1,-1,-1,7,4,8,5,0,9,5,6,0,6,2,0,-1,-1,-1,-1,9,3,7,4,9,7,9,2,3,6,9,5,9,6,2,-1,2,11,3,4,8,7,5,6,10,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,7,4,0,2,4,11,7,2,-1,-1,-1,-1,9,1,0,8,7,4,11,3,2,6,10,5,-1,-1,-1,-1,1,2,9,2,11,9,11,4,9,4,11,7,6,10,5,-1,7,4,8,5,11,3,1,5,3,6,11,5,-1,-1,-1,-1,11,1,5,6,11,5,11,0,1,4,11,7,11,4,0,-1,9,5,0,5,6,0,6,3,0,3,6,11,7,4,8,-1,9,5,6,11,9,6,9,7,4,9,11,7,-1,-1,-1,-1,9,4,10,10,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,4,10,9,4,3,8,0,-1,-1,-1,-1,-1,-1,-1,1,0,10,0,6,10,0,4,6,-1,-1,-1,-1,-1,-1,-1,1,3,8,6,1,8,4,6,8,10,1,6,-1,-1,-1,-1,9,4,1,4,2,1,4,6,2,-1,-1,-1,-1,-1,-1,-1,8,0,3,9,2,1,9,4,2,4,6,2,-1,-1,-1,-1,4,2,0,6,2,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,4,2,8,6,2,4,-1,-1,-1,-1,-1,-1,-1,9,4,10,4,6,10,3,2,11,-1,-1,-1,-1,-1,-1,-1,2,8,0,11,8,2,10,9,4,6,10,4,-1,-1,-1,-1,2,11,3,6,1,0,4,6,0,10,1,6,-1,-1,-1,-1,1,4,6,10,1,6,1,8,4,11,1,2,1,11,8,-1,4,6,9,6,3,9,3,1,9,3,6,11,-1,-1,-1,-1,1,11,8,0,1,8,1,6,11,4,1,9,1,4,6,-1,6,11,3,0,6,3,4,6,0,-1,-1,-1,-1,-1,-1,-1,8,4,6,8,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,7,10,8,7,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,7,0,7,10,0,10,9,0,10,7,6,-1,-1,-1,-1,7,6,10,7,10,1,8,7,1,0,8,1,-1,-1,-1,-1,7,6,10,1,7,10,3,7,1,-1,-1,-1,-1,-1,-1,-1,6,2,1,8,6,1,9,8,1,7,6,8,-1,-1,-1,-1,9,6,2,1,9,2,9,7,6,3,9,0,9,3,7,-1,0,8,7,6,0,7,2,0,6,-1,-1,-1,-1,-1,-1,-1,2,3,7,2,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,3,2,8,6,10,9,8,10,7,6,8,-1,-1,-1,-1,7,0,2,11,7,2,7,9,0,10,7,6,7,10,9,-1,0,8,1,8,7,1,7,10,1,10,7,6,11,3,2,-1,1,2,11,7,1,11,1,6,10,1,7,6,-1,-1,-1,-1,6,9,8,7,6,8,6,1,9,3,6,11,6,3,1,-1,1,9,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,6,0,7,0,11,3,0,6,11,-1,-1,-1,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,8,1,3,8,6,7,11,-1,-1,-1,-1,-1,-1,-1,2,1,10,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,8,0,3,7,11,6,-1,-1,-1,-1,-1,-1,-1,0,9,2,9,10,2,7,11,6,-1,-1,-1,-1,-1,-1,-1,7,11,6,3,10,2,3,8,10,8,9,10,-1,-1,-1,-1,3,2,7,7,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,7,0,6,7,0,2,6,-1,-1,-1,-1,-1,-1,-1,6,7,2,7,3,2,9,1,0,-1,-1,-1,-1,-1,-1,-1,2,6,1,6,8,1,8,9,1,6,7,8,-1,-1,-1,-1,6,7,10,7,1,10,7,3,1,-1,-1,-1,-1,-1,-1,-1,6,7,10,10,7,1,7,8,1,8,0,1,-1,-1,-1,-1,7,3,0,10,7,0,9,10,0,7,10,6,-1,-1,-1,-1,10,6,7,8,10,7,9,10,8,-1,-1,-1,-1,-1,-1,-1,4,8,6,6,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,3,6,0,3,6,4,0,-1,-1,-1,-1,-1,-1,-1,11,6,8,6,4,8,1,0,9,-1,-1,-1,-1,-1,-1,-1,6,4,9,3,6,9,1,3,9,6,3,11,-1,-1,-1,-1,4,8,6,8,11,6,1,10,2,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,0,3,11,6,0,6,4,0,-1,-1,-1,-1,8,11,4,11,6,4,9,2,0,9,10,2,-1,-1,-1,-1,3,9,10,2,3,10,3,4,9,6,3,11,3,6,4,-1,3,2,8,2,4,8,2,6,4,-1,-1,-1,-1,-1,-1,-1,2,4,0,2,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,4,3,2,6,4,2,8,3,4,-1,-1,-1,-1,4,9,1,2,4,1,6,4,2,-1,-1,-1,-1,-1,-1,-1,3,1,8,1,6,8,6,4,8,1,10,6,-1,-1,-1,-1,0,1,10,6,0,10,4,0,6,-1,-1,-1,-1,-1,-1,-1,3,6,4,8,3,4,3,10,6,9,3,0,3,9,10,-1,4,9,10,4,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,9,4,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,5,9,4,6,7,11,-1,-1,-1,-1,-1,-1,-1,1,0,5,0,4,5,11,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,11,4,3,8,4,5,3,5,1,3,-1,-1,-1,-1,4,5,9,2,1,10,11,6,7,-1,-1,-1,-1,-1,-1,-1,7,11,6,10,2,1,3,8,0,5,9,4,-1,-1,-1,-1,11,6,7,10,4,5,10,2,4,2,0,4,-1,-1,-1,-1,8,4,3,4,5,3,5,2,3,2,5,10,6,7,11,-1,3,2,7,2,6,7,9,4,5,-1,-1,-1,-1,-1,-1,-1,4,5,9,6,8,0,2,6,0,7,8,6,-1,-1,-1,-1,2,6,3,6,7,3,0,5,1,0,4,5,-1,-1,-1,-1,8,2,6,7,8,6,8,1,2,5,8,4,8,5,1,-1,4,5,9,6,1,10,6,7,1,7,3,1,-1,-1,-1,-1,10,6,1,6,7,1,7,0,1,0,7,8,4,5,9,-1,10,0,4,5,10,4,10,3,0,7,10,6,10,7,3,-1,10,6,7,8,10,7,10,4,5,10,8,4,-1,-1,-1,-1,5,9,6,9,11,6,9,8,11,-1,-1,-1,-1,-1,-1,-1,11,6,3,3,6,0,6,5,0,5,9,0,-1,-1,-1,-1,8,11,0,11,5,0,5,1,0,11,6,5,-1,-1,-1,-1,3,11,6,5,3,6,1,3,5,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,5,9,8,11,9,6,5,11,-1,-1,-1,-1,3,11,0,11,6,0,6,9,0,9,6,5,10,2,1,-1,5,8,11,6,5,11,5,0,8,2,5,10,5,2,0,-1,3,11,6,5,3,6,3,10,2,3,5,10,-1,-1,-1,-1,9,8,5,8,2,5,2,6,5,2,8,3,-1,-1,-1,-1,6,5,9,0,6,9,2,6,0,-1,-1,-1,-1,-1,-1,-1,8,5,1,0,8,1,8,6,5,2,8,3,8,2,6,-1,6,5,1,6,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,3,1,10,6,1,6,8,3,9,6,5,6,9,8,-1,0,1,10,6,0,10,0,5,9,0,6,5,-1,-1,-1,-1,8,3,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,11,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,5,7,11,0,3,8,-1,-1,-1,-1,-1,-1,-1,7,11,5,11,10,5,0,9,1,-1,-1,-1,-1,-1,-1,-1,5,7,10,7,11,10,1,8,9,1,3,8,-1,-1,-1,-1,2,1,11,1,7,11,1,5,7,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,2,1,5,7,1,11,2,7,-1,-1,-1,-1,5,7,9,7,2,9,2,0,9,7,11,2,-1,-1,-1,-1,2,5,7,11,2,7,2,9,5,8,2,3,2,8,9,-1,10,5,2,5,3,2,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,2,8,2,5,8,5,7,8,5,2,10,-1,-1,-1,-1,1,0,9,3,10,5,7,3,5,2,10,3,-1,-1,-1,-1,2,8,9,1,2,9,2,7,8,5,2,10,2,5,7,-1,5,3,1,5,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,1,7,0,5,7,1,-1,-1,-1,-1,-1,-1,-1,3,0,9,5,3,9,7,3,5,-1,-1,-1,-1,-1,-1,-1,7,8,9,7,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,5,8,10,5,8,11,10,-1,-1,-1,-1,-1,-1,-1,4,0,5,0,11,5,11,10,5,0,3,11,-1,-1,-1,-1,9,1,0,10,4,8,11,10,8,5,4,10,-1,-1,-1,-1,4,11,10,5,4,10,4,3,11,1,4,9,4,1,3,-1,1,5,2,5,8,2,8,11,2,8,5,4,-1,-1,-1,-1,11,4,0,3,11,0,11,5,4,1,11,2,11,1,5,-1,5,2,0,9,5,0,5,11,2,8,5,4,5,8,11,-1,5,4,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,2,2,5,3,5,4,3,4,8,3,-1,-1,-1,-1,2,10,5,4,2,5,0,2,4,-1,-1,-1,-1,-1,-1,-1,2,10,3,10,5,3,5,8,3,8,5,4,9,1,0,-1,2,10,5,4,2,5,2,9,1,2,4,9,-1,-1,-1,-1,5,4,8,3,5,8,1,5,3,-1,-1,-1,-1,-1,-1,-1,5,4,0,5,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,8,3,5,8,5,0,9,5,3,0,-1,-1,-1,-1,5,4,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,11,4,11,9,4,11,10,9,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,9,4,7,11,9,11,10,9,-1,-1,-1,-1,11,10,1,4,11,1,0,4,1,11,4,7,-1,-1,-1,-1,4,1,3,8,4,3,4,10,1,11,4,7,4,11,10,-1,7,11,4,4,11,9,11,2,9,2,1,9,-1,-1,-1,-1,4,7,9,7,11,9,11,1,9,1,11,2,3,8,0,-1,4,7,11,2,4,11,0,4,2,-1,-1,-1,-1,-1,-1,-1,4,7,11,2,4,11,4,3,8,4,2,3,-1,-1,-1,-1,10,9,2,9,7,2,7,3,2,9,4,7,-1,-1,-1,-1,7,10,9,4,7,9,7,2,10,0,7,8,7,0,2,-1,10,7,3,2,10,3,10,4,7,0,10,1,10,0,4,-1,2,10,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,3,1,7,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,1,8,0,1,7,8,-1,-1,-1,-1,3,0,4,3,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,10,9,8,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,10,9,11,-1,-1,-1,-1,-1,-1,-1,10,1,0,8,10,0,11,10,8,-1,-1,-1,-1,-1,-1,-1,10,1,3,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,1,9,11,1,8,11,9,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,9,2,1,9,11,2,-1,-1,-1,-1,11,2,0,11,0,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,9,8,10,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,8,1,0,8,10,1,-1,-1,-1,-1,2,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),numTrisTable:new Float32Array([0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,2,3,4,4,3,3,4,4,3,4,5,5,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,2,3,3,4,3,4,2,3,3,4,4,5,4,5,3,2,3,4,4,3,4,5,3,2,4,5,5,4,5,2,4,1,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,2,4,3,4,3,5,2,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,3,4,4,3,4,5,5,4,4,3,5,2,5,4,2,1,2,3,3,4,3,4,4,5,3,4,4,5,2,3,3,2,3,4,4,5,4,5,5,2,4,3,5,4,3,2,4,1,3,4,4,5,4,5,3,4,4,5,5,2,3,4,2,1,2,3,3,2,3,4,2,1,3,2,4,1,2,1,1,0])},G$=class extends OX{constructor(e,t,i){super(e,t,i),this.data=t,this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!1,this._npart=-1,this.spatialn=1,this.drawRangeNeedsForceUpdate=!0,this._resolutionLevel=-1,this.resolution=64,this.spatialDivisions=25,this.zLayersPerRow=8,this.basePyramidSize=512,this.pyramidTexture1Width=341,this.pyramidTexture1Height=256,this.pyramidTexture2Width=170,this.pyramidTexture2Height=128,this.numLevels=9,this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=0,this.bboxOffset=0,this.shapesDataTexture={value:void 0},this.spatialscene=new NA,this.potentialPassScene=new NA,this.voxelPassScene=new NA,this._spatialPassRenderTargets=[],this._potentialPassRenderTargets=[],this._voxelPassRenderTargets=[],this._pyramidRenderTargets=[],this.geometry=new Cb,this.geometry.drawRange.count=0,this.spatialPassUniforms={span:{value:-1},shapesDataTexture:this.shapesDataTexture,npart:{value:this.npart},spatialn:{value:this.spatialn}},this.spatialMesh=new Nb(F$,this.spatialPassMaterial()),this.spatialMesh.frustumCulled=!1,this.spatialscene.add(this.spatialMesh);let n=new GA(H$.triTable,16,256,Bg,Og);n.needsUpdate=!0;let r=new GA(H$.numTrisTable,256,1,Bg,Og);r.needsUpdate=!0,this.voxelPassUniforms={potentialPassTexture:{value:void 0},numTrisTable:{value:r}},this.voxelMesh=new Nb(F$,this.voxelPassMaterial()),this.voxelMesh.frustumCulled=!1,this.voxelPassScene.add(this.voxelMesh),this.potentialPassUniforms={shapesDataTexture:this.shapesDataTexture,spatialPassTexture:{value:void 0},npart:{value:this.npart},spatialn:{value:this.spatialn}},this.potentialMesh=new Nb(F$,this.potentialPassMaterial()),this.potentialMesh.frustumCulled=!1,this.potentialPassScene.add(this.potentialMesh),this.marchPassUniforms={triTable:{value:n},potentialPassTexture:{value:void 0},voxelPassTexture:{value:void 0},pyramidTexture1:{value:void 0},pyramidTexture1Size:{value:void 0},pyramidTexture2:{value:void 0},pyramidTexture2Size:{value:void 0}},this.frustumCulled=!1,this.onBeforeShadowPass=e=>{if(t0.call(this),0===this.npart)return void(this.geometry.drawRange.count=0);let t=this.material.root;if(t.shadersPatchedForShapeBlend){if(this.customDepthMaterialNeedsUpdate){this.customDepthMaterialNeedsUpdate=!1,this.customDepthMaterial=new Yb({vertexShader:t.vertexShader,fragmentShader:"\n\t\t\t\t\t\t#include <packing>\n\t\t\t\t\t\tvoid main()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgl_FragColor = packDepthToRGBA(gl_FragCoord.z);\n\t\t\t\t\t\t}\n\t\t\t\t\t",uniforms:t.uniforms,defines:this.material.defines}),this.isMeshDepthMaterial=!0,this.customDistanceMaterial=new Yb({vertexShader:t.vertexShader,fragmentShader:"\n\t\t\t\t\t#include <common>\n\t\t\t\t\t#include <packing>\n\t\t\t\t\tuniform vec3 referencePosition;\n\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\tuniform float farDistance;\n\t\t\t\t\t// World-space position\n\t\t\t\t\tvarying vec3 vWPosition;\n\t\t\t\t\tvoid main()\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat dist = length(vWPosition - referencePosition);\n\t\t\t\t\t\tdist = (dist - nearDistance) / (farDistance - nearDistance);\n\t\t\t\t\t\tdist = saturate(dist);\n\t\t\t\t\t\t// Required by Three.js for this to work\n\t\t\t\t\t\tgl_FragColor = packDepthToRGBA( dist );\n\t\t\t\t\t}",uniforms:(0,ye.A)({nearDistance:{value:0},farDistance:{value:0},referencePosition:{value:new Zv},opacity:{value:0}},t.uniforms),defines:this.material.defines});let e=this.customDistanceMaterial;e.referencePosition=new Zv,e.nearDistance=0,e.farDistance=0,e.opacity=1,e.isMeshDistanceMaterial=!0}}else this.patchVertexShaderForShapeBlend(t),t.shadersPatchedForShapeBlend=!0,this.customDepthMaterialNeedsUpdate=!0;if(this.spatialPassUniforms.npart.value=this.npart,this.spatialPassUniforms.spatialn.value=this.spatialn,this.potentialPassUniforms.npart.value=this.npart,this.potentialPassUniforms.spatialn.value=this.spatialn,this.needsRebuild){this.needsRebuild=!1,this.spatialMesh.material.defines.RES=this.resolutionLevel,this.spatialMesh.material.needsUpdate=!0,this.potentialMesh.material.defines.RES=this.resolutionLevel,this.potentialPassUniforms.spatialPassTexture.value=this.spatialPassRenderTarget.texture,this.potentialMesh.material.needsUpdate=!0,this.voxelMesh.material.defines.RES=this.resolutionLevel,this.voxelMesh.material.needsUpdate=!0,this.voxelPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.voxelPassTexture.value=this.voxelPassRenderTarget.texture[0],this.material.defines.RES=this.resolutionLevel,this.material.defines.LEVELS=this.pyramidLevelSizes.length,this.material.defines.LOOP=this.pyramidLevelSizes.length%2===0?this.pyramidLevelSizes.length-3:this.pyramidLevelSizes.length-2,this.material.defines.HALF=this.pyramidLevelSizes.length%2===0?1:0,this.material.needsUpdate=!0;let e=this.pyramidLevelSizes.length%2===0?0:1,t=this.pyramidLevelSizes.length%2===0?1:0;this.marchPassUniforms.pyramidTexture2.value=this.pyramidRenderTarget[e].texture,this.marchPassUniforms.pyramidTexture2Size.value=new Av(this.pyramidRenderTarget[e].width,this.pyramidRenderTarget[e].height),this.marchPassUniforms.pyramidTexture1.value=this.pyramidRenderTarget[t].texture,this.marchPassUniforms.pyramidTexture1Size.value=new Av(this.pyramidRenderTarget[t].width,this.pyramidRenderTarget[t].height),Object.assign(this.material.uniforms,this.marchPassUniforms)}let i=e.shadowMap.enabled;e.shadowMap.enabled=!1;let n=e.getRenderTarget();e.setRenderTarget(this.spatialPassRenderTarget),e.render(this.spatialscene,U$),e.setRenderTarget(this.potentialPassRenderTarget),e.render(this.potentialPassScene,U$),e.setRenderTarget(this.voxelPassRenderTarget),e.render(this.voxelPassScene,U$),G$.streamCompaction.renderPyramid(this.resolutionLevel,this.pyramidLevelSizes,e,this.voxelPassRenderTarget,this.pyramidRenderTarget).then(e=>{this.material.wireframe&&(3*e>this.geometry.attributes.position.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.dispose(),this.geometry=new Cb,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.geometry.attributes.position=new mb(new Float32Array(3*e*2),3)),(3*e>this.geometry.drawRange.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.drawRange.count=3*Math.floor(1.2*e)),this.drawRangeNeedsForceUpdate=!1}),e.shadowMap.enabled=i,e.setRenderTarget(n)}}set npart(e){e!==this._npart&&(this.drawRangeNeedsForceUpdate=!0,this._npart=e,this.spatialn=Math.ceil(e/96))}get npart(){return this._npart}set resolutionLevel(e){let t=Math.min(8,Math.max(5,e));if(t!==this._resolutionLevel){switch(this._resolutionLevel=t,this.resolution=Math.pow(2,t),this.resolutionLevel){case 5:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192],this.bboxSize=496,this.bboxOffset=-8;break;case 6:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=504,this.bboxOffset=-4;break;case 7:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192,384,768,1536],this.bboxSize=508,this.bboxOffset=-2;break;case 8:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096],this.bboxSize=510,this.bboxOffset=-1}this.pyramidTexture1Width=0,this.pyramidTexture2Width=0,this.pyramidTexture1Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-2],this.pyramidTexture2Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-3];for(let e=this.pyramidLevelSizes.length-2;e>=0;e--)(this.pyramidLevelSizes.length-2)%2===e%2?this.pyramidTexture1Width+=this.pyramidLevelSizes[e]:this.pyramidTexture2Width+=this.pyramidLevelSizes[e];this.basePyramidSize=this.pyramidLevelSizes[this.pyramidLevelSizes.length-1],this.zLayersPerRow=this.basePyramidSize/this.resolution,this.numLevels=this.pyramidLevelSizes.length-1,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!0}}get resolutionLevel(){return this._resolutionLevel}get spatialPassRenderTarget(){let e=this._spatialPassRenderTargets[this.resolutionLevel];return e||(e=new Yv(this.spatialDivisions*this.spatialn,this.spatialDivisions**2,{format:Rg,type:Og,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Sg,magFilter:Sg}),this._spatialPassRenderTargets[this.resolutionLevel]=e),e}get potentialPassRenderTarget(){let e=this._potentialPassRenderTargets[this.resolutionLevel];return e||(e=new Yv(this.basePyramidSize,this.basePyramidSize,{format:Rg,type:Og,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Sg,magFilter:Sg}),this._potentialPassRenderTargets[this.resolutionLevel]=e),e}get voxelPassRenderTarget(){let e=this._voxelPassRenderTargets[this.resolutionLevel];return e||(e=new Qv(this.basePyramidSize,this.basePyramidSize,2,{stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Sg,magFilter:Sg}),e.texture[0].format=Rg,e.texture[0].type=Og,e.texture[1].format=Bg,e.texture[1].type=Og,this._voxelPassRenderTargets[this.resolutionLevel]=e),e}get pyramidRenderTarget(){let e=this._pyramidRenderTargets[this.resolutionLevel];if(!e){e=[new Yv(this.pyramidTexture1Width,this.pyramidTexture1Height,{format:Rg,type:Og,stencilBuffer:!1,depthBuffer:!1,magFilter:Sg,minFilter:Sg}),new Yv(this.pyramidTexture2Width,this.pyramidTexture2Height,{format:Rg,type:Og,stencilBuffer:!1,depthBuffer:!1,magFilter:Sg,minFilter:Sg})],this._pyramidRenderTargets[this.resolutionLevel]=e}return e}updateState(e,t){let i=this.material;super.updateState(e,t),i!==this.material&&(this.needsRebuild=!0),e.geometry&&(this.resolutionLevel=e.geometry.resolutionLevel,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]}),e.wireframe&&!this.geometry.getAttribute("position")?this.geometry.setAttribute("position",new mb(new Float32Array(3*this.geometry.drawRange.count),3)):!e.wireframe&&this.geometry.getAttribute("position")&&this.geometry.deleteAttribute("position")}spatialPassMaterial(){let e="\n\t\t\tprecision highp float;\n\t\t\tout vec4 pc_FragColor;\n\t\t\tconst float spatialDivisions = ".concat(this.spatialDivisions,".;\n\t\t\tuniform float span;\n\t\t\tuniform float npart;\n\t\t\tuniform float spatialn;\n\t\t\t").concat(H$.shapeInput(),"\n\n\t\t\tvec3 low, high;     // range of current div; subset of -1 .. 1 with span border\n\n\t\t\t// lookup one element/channel's worth of spheres for current division\n\t\t\t// stating with low sphere number lowi\n\t\t\t// gives a key to which spheres from lowi..lowi+23 are active within given div (low..high)\n\t\t\tfloat spatialKey(float lowi) {\n\t\t\t\tfloat t = 0.;\n\t\t\t\tfor (float ii = ").concat(23,".; ii >= 0.; ii--) {\n\t\t\t\t\tfloat i = ii + lowi;\n\t\t\t\t\tfloat iin = (i + 0.5) / ").concat(W$,".;\n\t\t\t\t\tvec4 shape = shapePos(iin);\n\t\t\t\t\tvec3 d = shape.xyz;\n\t\t\t\t\tfloat op = shape.w;\n\t\n\t\t\t\t\tt *= 2.;\n\t\t\t\t\tt += (\n\t\t\t\t\t\tlow.x < d.x && d.x < high.x &&\n\t\t\t\t\t\tlow.y < d.y && d.y < high.y &&\n\t\t\t\t\t\tlow.z < d.z && d.z < high.z &&\n\t\t\t\t\t\ti < npart || op == -2. // always include if op is -2, which is the intersection operation\n\t\t\t\t\t) ? 1. : 0.;\n\t\t\t\t}\n\t\t\t\treturn t;\n\t\t\t}\n\n\t\t\t").concat(H$.getpart,"\n\n\t\t\tvoid main() {               // spatialial fragment shader\n\t\t\t\t// find active div\n\t\t\t\tvec3 div;                               // which div is current\n\t\t\t\t// out holds x=> x, lowi faster moving and y=> z, y faster moving\n\t\t\t\tfloat yz = float(gl_FragCoord.y - 0.5);     // contains  z, y faster moving\n\t\t\t\tdiv.y = getpart(yz, spatialDivisions);\n\t\t\t\tdiv.z = yz; // getpart(yz, spatialDivisions.z); // what's left, should be the same as getpart\n\n\t\t\t\tfloat lx = float(gl_FragCoord.x - 0.5);     // contains x, lowi faster moving\n\t\t\t\tfloat lowi = getpart(lx, spatialn) * ").concat(96,".;\n\t\t\t\tdiv.x = lx;\n\n\t\t\t\tlow = div / spatialDivisions * 2. - 1. - span;\n\t\t\t\thigh = (div+1.) / spatialDivisions * 2. - 1. + span;\n\n\t\t\t\t// find active range of spheres\n\t\t\t\tpc_FragColor.x = spatialKey(lowi);\n\t\t\t\tpc_FragColor.y = spatialKey(lowi+").concat(V$,".);\n\t\t\t\tpc_FragColor.z = spatialKey(lowi+").concat(48,".);\n\t\t\t\tpc_FragColor.w = spatialKey(lowi+").concat(72,".);\n\t\t\t}\n\t\t");return new N$({name:"Spatial Pass",fragmentShader:e,uniforms:this.spatialPassUniforms})}potentialPassMaterial(){let e="\n\t\t\tprecision highp float;\n\t\t\tout vec4 pc_FragColor;\n\n\t\t\t".concat(H$.shapeInput(),"\n\t\t\tuniform sampler2D spatialPassTexture;\n\n\t\t\tconst float res = float(RES);\n\t\t\tconst float VOXEL_RESOLUTION = pow(2., res);\n\t\t\tconst float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));\n\t\t\tconst float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.;\n\t\t\tconst float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;\n\n\t\t\tuniform float npart;\n\t\t\tuniform float spatialn;\n\t\t\tconst float spatialDivisions = ").concat(this.spatialDivisions,".;\n\t\t\tconst float spatialDivisions2 = spatialDivisions * spatialDivisions;\n\t\t\tconst float spatialDivisionsSub1 = spatialDivisions - 1.;\n\n\t\t\t").concat(H$.getpart,"\n\n\t\t\tvec3 packRGBAToVec3(vec4 color) {\n\t\t\t\tuint r = uint(color.r * 255.);\n\t\t\t\tuint g = uint(color.g * 255.);\n\t\t\t\tuint combined = (r << 8) | g; \n\t\t\t\treturn vec3(float(combined) * 0.00001525902, color.b, color.a); // 1/65535\n\t\t\t}\n\n\t\t\tvoid applyQuaternionToVector(in vec4 q, inout vec3 v) {\n\t\t\t\tv += 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * SDF functions (reference: https://iquilezles.org/articles/distfunctions/)\n\t\t\t */\n\n\t\t\t// branchless version of \"Smooth Union, Subtraction and Intersection - bound, bound, bound\" in above reference\n\t\t\tfloat smoothOperation(float op, float sdf, float d, float k) {\n\t\t\t  //        union: op =  1 => signSubtract =  1, signIntersection =  1\n\t\t\t  //     subtract: op = -1 => signSubtract = -1, signIntersection =  1\n\t\t\t\t// intersection: op = -2 => signSubtract = -1, signIntersection = -1\n\n\t\t\t\tfloat signSubtract = clamp(op, -1., 1.);\n\t\t\t\tfloat signIntersection = 2. * (op - signSubtract) + 1.;\n\t\t\t\tfloat h = clamp(\n\t\t\t\t\t0.5 + signSubtract * 0.5 * (sdf - signSubtract * signIntersection * d) / k,\n\t\t\t\t\t0.0,\n\t\t\t\t\t1.0\n\t\t\t\t);\n\t\t\t\treturn mix(sdf, signSubtract * signIntersection * d, h) - \n\t\t\t\t\t\t\t signSubtract * k * h * (1.0 - h);\n\t\t\t}\n\n\t\t\tfloat sdSphere( vec3 p, float s )\n\t\t\t{\n\t\t\t\treturn length(p)-s;\n\t\t\t}\n\n\t\t\tfloat sdEllipsoid( vec3 p, vec3 r )\n\t\t\t{\n\t\t\t\tfloat k0 = length(p/r);\n\t\t\t\tfloat k1 = length(p/(r*r));\n\t\t\t\treturn k0*(k0-1.0)/k1;\n\t\t\t}\n\n\t\t\tfloat sdBox( vec3 p, vec3 b )\n\t\t\t{\n\t\t\t\tvec3 q = abs(p) - b;\n\t\t\t\treturn length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n\t\t\t}\n\n\t\t\tfloat sdTorus( vec3 p, vec2 t )\n\t\t\t{\n\t\t\t\tvec2 q = vec2(length(p.xy)-t.x,p.z);\n\t\t\t\treturn length(q)-t.y;\n\t\t\t}\n\n\t\t\tfloat sdCappedTorus( vec3 p, vec2 sc, float ra, float rb)\n\t\t\t{\n\t\t\t\tp.x = abs(p.x);\n\t\t\t\tfloat k = (sc.y*p.x>sc.x*p.y) ? dot(p.xy,sc) : length(p.xy);\n\t\t\t\treturn sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;\n\t\t\t}\n\n\t\t\tfloat dot2( in vec2 v ) { return dot(v,v); }\n\t\t\tfloat sdCappedCone( vec3 p, float h, float r1, float r2 )\n\t\t\t{\n\t\t\t\tvec2 q = vec2( length(p.xz), p.y );\n\t\t\t\tvec2 k1 = vec2(r2,h);\n\t\t\t\tvec2 k2 = vec2(r2-r1,2.0*h);\n\t\t\t\tvec2 ca = vec2(q.x-min(q.x,(q.y<0.0)?r1:r2), abs(q.y)-h);\n\t\t\t\tvec2 cb = q - k1 + k2*clamp( dot(k1-q,k2)/dot2(k2), 0.0, 1.0 );\n\t\t\t\tfloat s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;\n\t\t\t\treturn s*sqrt( min(dot2(ca),dot2(cb)) );\n\t\t\t}\n\n\t\t\tfloat sdCappedCylinder( vec3 p, float h, float r )\n\t\t\t{\n\t\t\t\tvec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);\n\t\t\t\treturn min(max(d.x,d.y),0.0) + length(max(d,0.0));\n\t\t\t}\n\n\t\t\tfloat maxBlend = 0.0;\n\t\t\t// compute potential from A (=24) spheres, using the bit flags in 'activeKey'\n\t\t\t// to avoid lookup/compute for inactive spheres\n\t\t\t// return field potential, side effect updates track,\n\t\t\t// compute and return +ve and -ve values separately\n\t\t\tvoid fillSpatialInner(\n\t\t\t\tfloat ii,\n\t\t\t\tfloat activeKey,\n\t\t\t\tvec3 corner,\n\t\t\t\tinout float sdf,\n\t\t\t\tinout float colorDivisor,\n\t\t\t\tinout vec4 trackColor\n\t\t\t) {\n\t\t\t\tfor (float i = 0.; i < ").concat(V$,".; i++) {\n\t\t\t\t\tif (activeKey < 1.) break; // activeKey exhausted, no more active spheres\n\t\t\t\t\tactiveKey *= 0.5;\n\t\t\t\t\tif (fract(activeKey) < 0.5) continue;\n\n\t\t\t\t\tfloat iin = (i + ii + 0.5) * ").concat(1/W$,";\n\t\t\t\t\tvec4 shape = shapePos(iin);\n\t\t\t\t\tvec4 quat = shapeQuat(iin);\n\t\t\t\t\tvec4 params1 = shapeParams1(iin);\n\t\t\t\t\tvec4 params2 = shapeParams2(iin);\n\n\t\t\t\t\tvec3 p = corner - shape.xyz;\n\t\t\t\t\tapplyQuaternionToVector(quat, p);\n\t\t\t\t\tp /= params2.z; // scale\n\t\t\t\t\tfloat d; // d in -1..1 coordinates\n\t\t\t\t\tswitch (int(params1.x)) {\n\t\t\t\t\t\tcase 0: d = sdSphere(p, params1.y); break;\n\t\t\t\t\t\tcase 1: d = sdEllipsoid(p, params1.yzw); break;\n\t\t\t\t\t\tcase 2: d = sdBox(p, params1.yzw); break;\n\t\t\t\t\t\tcase 3: d = sdCappedCylinder(p, params1.y, params1.z); break;\n\t\t\t\t\t\tcase 4: d = sdCappedCone(p, params1.y, params1.z, params1.w); break;\n\t\t\t\t\t\tcase 5: d = sdTorus(p, params1.yz); break;\n\t\t\t\t\t\tcase 6: d = sdCappedTorus(p, params1.yz, params1.w, params2.w); break;\n\t\t\t\t\t}\n\t\t\t\t\td -= params2.y; // rounded edge\n\t\t\t\t\td *= params2.z; // scale\n\n\t\t\t\t\tfloat k = params2.x;\n\t\t\t\t\tfloat op = shape.w;\n\n\t\t\t\t\tsdf = smoothOperation(shape.w, sdf, d, k);\n\n\t\t\t\t\tfloat isNegativeOne = step(-1.5, op) * step(op, -0.5); // 1 when op == -1, 0 otherwise\n\t\t\t\t\tfloat colorCull = smoothstep(maxBlend, 0., -d);\n\t\t\t\t\tfloat cullFactor = mix(1.0, colorCull, isNegativeOne);\n\t\t\t\t\ttrackColor *= cullFactor;\n\t\t\t\t\tcolorDivisor *= cullFactor;\n\n\t\t\t\t\tmaxBlend = max(maxBlend, k);\n\n\t\t\t\t\tk += 2. * INV_VOXEL_RESOLUTION; // avoid division by zero, and other color artifacts with very small k\n\t\t\t\t\tfloat nearness = smoothstep(k, 0., d);\n\n\t\t\t\t\tvec4 color = shapeColor(iin);\n\t\t\t\t\tnearness *= float(color.a >= 0.);\n\n\t\t\t\t\tcolorDivisor += nearness;\n\t\t\t\t\ttrackColor += color * nearness;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvec3 div;\n\t\t\t// compute potential from all spheres; collect +ve and =ve values separately\n\t\t\t// work in blocks of A*4 (=96) spheres, using the bit flags in 4 float channel 'activeKey' values\n\t\t\t// TODO check if extra vec3 output useful, not really used at present\n\t\t\tfloat fillSpatial(vec3 corner, inout vec4 trackColor) {\n\t\t\t\tfloat sdf = 1e3; // hack: initialize to large value\n\t\t\t\tfloat colorDivisor = 0.;\n\t\t\t\t// spatialPassTexture holds x=> lowi, x faster moving and y=> z, y faster moving\n\t\t\t\tfloat divyz = (div.y + div.z * spatialDivisions + 0.5) / (spatialDivisions2);\n\t\t\t\tfor (float ii = 0.; ii < spatialn; ii++) {\n\t\t\t\t\tfloat i = ii * ").concat(96,".;\n\n\t\t\t\t\tvec4 activeKey = texture(spatialPassTexture, vec2((div.x * spatialn + ii + 0.5)/(spatialn * spatialDivisions), divyz));\n\t\t\t\t\tfillSpatialInner(i, activeKey.x, corner, sdf, colorDivisor, trackColor);\n\t\t\t\t\tfillSpatialInner(i+").concat(V$,"., activeKey.y, corner, sdf, colorDivisor, trackColor);\n\t\t\t\t\tfillSpatialInner(i+").concat(48,"., activeKey.z, corner, sdf, colorDivisor, trackColor);\n\t\t\t\t\tfillSpatialInner(i+").concat(72,"., activeKey.w, corner, sdf, colorDivisor, trackColor);\n\t\t\t\t}\n\n\t\t\t\ttrackColor /= colorDivisor;\n\t\t\t\treturn mix(sdf, 0.0, step(1e20 - 0.1, sdf));\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\t").concat(H$.getxyzi,"    // get xi yi zi from 2d position\n\n\t\t\t\tvec3 xyzi = vec3(xi,yi,zi);\n\t\t\t\tvec3 corner = xyzi / VOXEL_RESOLUTION_SUB1 * 2. - 1.;  // -1..1 coords\n\n\t\t\t\tdiv = floor(xyzi / VOXEL_RESOLUTION_SUB1 * spatialDivisionsSub1);\n\n\t\t\t\tvec4 c = vec4(0.);\n\t\t\t\tfloat t = fillSpatial(corner, c);\n\n\t\t\t\tpc_FragColor = vec4(t, packRGBAToVec3(c)); // RGB texture\n\t\t\t}\n\t\t");return new N$({name:"PotentialPass",fragmentShader:e,uniforms:this.potentialPassUniforms})}voxelPassMaterial(){let e="\n\t\t\tprecision highp float;\n\t\t\tlayout(location = 0) out vec4 pc_FragColor;\n\t\t\tlayout(location = 1) out vec4 numTris;\n\n\t\t\tconst float res = float(RES);\n\t\t\tconst float VOXEL_RESOLUTION = pow(2., res);\n\t\t\tconst float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.; \n\t\t\tconst float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));\n\t\t\tconst float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;\n\t\t\tuniform sampler2D numTrisTable; // 256 x 1\n\n\t\t\tfloat keyi(float f000, float f100, float f010, float f110, float f001, float f101, float f011, float f111) {\n\t\t\t\treturn (float(f000 < 0.) * 1.) +\n\t\t\t\t\t\t\t (float(f100 < 0.) * 2.) +\n\t\t\t\t\t\t\t (float(f010 < 0.) * 8.) +\n\t\t\t\t\t\t\t (float(f110 < 0.) * 4.) +\n\t\t\t\t\t\t\t (float(f001 < 0.) * 16.) +\n\t\t\t\t\t\t\t (float(f101 < 0.) * 32.) +\n\t\t\t\t\t\t\t (float(f011 < 0.) * 128.) +\n\t\t\t\t\t\t\t (float(f111 < 0.) * 64.);\n\t\t\t}\n\n\t\t\t".concat(H$.lookup,"\n\n\t\t\tvec3 compNormi(float xi, float yi, float zi) {\n\t\t\t\tfloat dx = look(xi + 1., yi, zi, potentialPassTexture).r - look(xi - 1., yi, zi, potentialPassTexture).r;\n\t\t\t\tfloat dy = look(xi, yi + 1., zi, potentialPassTexture).r - look(xi, yi - 1., zi, potentialPassTexture).r;\n\t\t\t\tfloat dz = look(xi, yi, zi + 1., potentialPassTexture).r - look(xi, yi, zi - 1., potentialPassTexture).r;\n\t\t\t\t// if we allow (common) 0,0,0 case through then NaN can spread\n\t\t\t\t// eg r = vec4(compNorm i(???), 1.) will pollute r.w\n\t\t\t\tif (dx == 0.0 && dy == 0.0 && dz == 0.0) {\n\t\t\t\t\treturn vec3(0.199, 0.299, 0.399);\n\t\t\t\t}\n\t\t\t\treturn normalize(vec3(dx, dy, dz));\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\t").concat(H$.getxyzi,"    // get xi yi zi from 2d\n\n\t\t\t\tvec3 normal = compNormi(xi, yi, zi);  // even if our key is -1 this may be needed by a neighbouring voxel\n\n\t\t\t\tif (xi >= VOXEL_RESOLUTION_SUB1 || yi >= VOXEL_RESOLUTION_SUB1 || zi >= VOXEL_RESOLUTION_SUB1) {\n\t\t\t\t\tpc_FragColor = vec4(normal, 0.);\n\t\t\t\t\tnumTris = vec4(0.);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfloat\n\t\t\t\t\tf000 = look(xi, yi, zi, potentialPassTexture).r,\n\t\t\t\t\tf100 = look(xi+1., yi, zi, potentialPassTexture).r,\n\t\t\t\t\tf010 = look(xi, yi+1., zi, potentialPassTexture).r,\n\t\t\t\t\tf110 = look(xi+1., yi+1., zi, potentialPassTexture).r,\n\t\t\t\t\tf001 = look(xi, yi, zi+1., potentialPassTexture).r,\n\t\t\t\t\tf101 = look(xi+1., yi, zi+1., potentialPassTexture).r,\n\t\t\t\t\tf011 = look(xi, yi+1., zi+1., potentialPassTexture).r,\n\t\t\t\t\tf111 = look(xi+1., yi+1., zi+1., potentialPassTexture).r;\n\t\t\t\tfloat key = keyi(f000, f100, f010, f110, f001, f101, f011, f111);\n\n\t\t\t\tpc_FragColor = vec4(normal, key);\n\n\t\t\t\tnumTris = texture(numTrisTable, vec2((key + 0.5) / 256., 0.5));\n\t\t\t}\n\t\t");return new N$({name:"VoxelPass",fragmentShader:e,uniforms:this.voxelPassUniforms})}patchVertexShaderForShapeBlend(e){let t="\n\t\t#ifdef SHAPEBLEND \n\t\t\tprecision highp sampler2D;\n\n\t\t\tuniform float isol;\n\n\t\t\tuniform sampler2D triTable;     // 256 x 16\n\t\t\tuniform sampler2D pyramidTexture1;\n\t\t\tuniform vec2 pyramidTexture1Size;\n\t\t\tuniform sampler2D pyramidTexture2;\n\t\t\tuniform vec2 pyramidTexture2Size;\n\n\t\t\tconst vec2 halfPixelOffset = vec2(0.5, 0.5);\n\n\t\t\tconst vec2 rShift = vec2(0., 1.);\n\t\t\tconst vec2 gShift = vec2(1., 1.);\n\t\t\tconst vec2 bShift = vec2(1., 0.);\n\n\t\t\tconst float res = float(RES);\n\t\t\tconst float VOXEL_RESOLUTION = pow(2., res);\n\t\t\tconst float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));\n\t\t\tconst float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;\n\n\t\t\tconst float scale_factor = ".concat(2,".;\n\n\t\t\t#if SHAPEBLEND == 5\n\t\t\t\tconst float levelShiftX[7] = float[7](4., 6., 12., 24., 48., 96., 192.);\n\t\t\t\tconst float scale = 8. * scale_factor;\n\t\t\t\tconst vec3 originOffset = vec3(16.);\n\t\t\t#elif SHAPEBLEND == 7\n\t\t\t\tconst float levelShiftX[10] = float[10](4., 6., 12., 24., 48., 96., 192., 384., 768., 1536.); \n\t\t\t\tconst float scale = 2. * scale_factor;\n\t\t\t\tconst vec3 originOffset = vec3(64.);\n\t\t\t#elif SHAPEBLEND == 8\n\t\t\t\tconst float levelShiftX[11] = float[11](4., 8., 16., 32., 64., 128., 256., 512., 1024., 2048., 4096.);\n\t\t\t\tconst float scale = scale_factor;\n\t\t\t\tconst vec3 originOffset = vec3(128.);\n\t\t\t#else\n\t\t\t\tconst float levelShiftX[8] = float[8](4., 8., 16., 32., 64., 128., 256., 512.);\n\t\t\t\tconst float scale = 4. * scale_factor;\n\t\t\t\tconst vec3 originOffset = vec3(32.);\n\t\t\t#endif\n\n\t\t\t").concat(H$.lookup,"\n\n\t\t\tconst vec3 offsets[24] = vec3[](\n\t\t\t\tvec3(0., 0., 0.), vec3(1., 0., 0.),\n\t\t\t\tvec3(1., 0., 0.), vec3(1., 1., 0.),\n\t\t\t\tvec3(0., 1., 0.), vec3(1., 1., 0.),\n\t\t\t\tvec3(0., 0., 0.), vec3(0., 1., 0.),\n\t\t\t\tvec3(0., 0., 1.), vec3(1., 0., 1.),\n\t\t\t\tvec3(1., 0., 1.), vec3(1., 1., 1.),\n\t\t\t\tvec3(0., 1., 1.), vec3(1., 1., 1.),\n\t\t\t\tvec3(0., 0., 1.), vec3(0., 1., 1.),\n\t\t\t\tvec3(0., 0., 0.), vec3(0., 0., 1.),\n\t\t\t\tvec3(1., 0., 0.), vec3(1., 0., 1.),\n\t\t\t\tvec3(1., 1., 0.), vec3(1., 1., 1.),\n\t\t\t\tvec3(0., 1., 0.), vec3(0., 1., 1.)\n\t\t\t);\n\n\t\t\tvec2 computeShiftedPosition1(vec2 xy, float levelOriginX) {\n\t\t\t\tvec2 xyShifted = xy;\n\t\t\t\txyShifted.x += levelOriginX;\n\t\t\t\treturn (xyShifted + halfPixelOffset) / pyramidTexture1Size;\n\t\t\t}\n\n\t\t\tvec2 computeShiftedPosition2(vec2 xy, float levelOriginX) {\n\t\t\t\tvec2 xyShifted = xy;\n\t\t\t\txyShifted.x += levelOriginX;\n\t\t\t\treturn (xyShifted + halfPixelOffset) / pyramidTexture2Size;\n\t\t\t}\n\n\t\t\tvec4 unpackVec3ToRGBA(vec3 vec) {\n\t\t\t\tuint combined = uint(vec.x * 65535.0 + 0.5); // Add 0.5 for rounding\n\t\t\t\tfloat g = float(combined & uint(0xFF)) * 0.00392156862; // 1/255\n\t\t\t\tfloat r = float((combined >> 8) & uint(0xFF)) * 0.00392156862; \n\t\t\n\t\t\t\treturn vec4(r, g, vec.y, vec.z);\n\t\t\t}\n\n\t\t\tout vec4 marchColor;\n\t\t\t// end of marchvertPre\n\t\t#endif\n\t\t");e.vertexShader=t+e.vertexShader.replace("#include <project_vertex>","\n\t\t#ifdef SHAPEBLEND\n\t\t\tfloat triIndex = floor(float(gl_VertexID/3));\n\t\t\tfloat vertexIndex = float(gl_VertexID);\n\t\t\t\n\t\t\t// Initial pyramid lookup\n\t\t\tfloat levelOriginX1 = pyramidTexture1Size.x - 2.;\n\t\t\tfloat levelOriginX2 = pyramidTexture2Size.x - 1.;\n\t\t\tvec2 xy = vec2(0.);\n\t\t\tvec4 lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));\n\t\t\t\n\t\t\t// Early exit check\n\t\t\tif (triIndex >= lookUp.r) return;\n\t\t\t\n\t\t\t// Optimize loop variables\n\t\t\tfloat start = 0.;\n\t\t\tvec4 triIndexVec = vec4(triIndex);\n\t\t\t\n\t\t\t// Main position computation loop\n\t\t\tfor (int i = 0; i < LOOP;) {\n\t\t\t\t// Compute boundaries\n\t\t\t\tvec4 ends = lookUp + vec4(start);\n\t\t\t\tvec4 starts = vec4(ends.gba, start);\n\t\t\t\tvec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * \n\t\t\t\t\t\t\t\t\t\t\tvec4(lessThan(triIndexVec, ends));\n\t\t\t\t\n\t\t\t\t// Update position\n\t\t\t\txy *= 2.;\n\t\t\t\txy += check.r * rShift + check.g * gShift + check.b * bShift;\n\t\t\t\t\n\t\t\t\t// Update loop variables\n\t\t\t\tstart = dot(check, starts);\n\t\t\t\tlevelOriginX2 -= levelShiftX[i];\n\t\t\t\t\n\t\t\t\t// Update lookup\n\t\t\t\tlookUp = texture(pyramidTexture1, computeShiftedPosition1(xy, levelOriginX1));\n\t\t\t\ti++;\n\n\t\t\t\tends = lookUp + vec4(start);\n\t\t\t\tstarts = vec4(ends.gba, start);\n\t\t\t\tcheck = vec4(greaterThanEqual(triIndexVec, starts)) * \n\t\t\t\t\t\t\t\t\t\t\tvec4(lessThan(triIndexVec, ends));\n\t\t\t\t\n\t\t\t\t// Update position\n\t\t\t\txy *= 2.;\n\t\t\t\txy += check.r * rShift + check.g * gShift + check.b * bShift;\n\t\t\t\t\n\t\t\t\t// Update loop variables\n\t\t\t\tstart = dot(check, starts);\n\t\t\t\tlevelOriginX1 -= levelShiftX[i];\n\t\t\t\t\n\t\t\t\t// Update lookup\n\t\t\t\tlookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\t#if HALF == 1\n\t\t\t\tvec4 ends = lookUp + vec4(start);\n\t\t\t\tvec4 starts = vec4(ends.gba, start);\n\t\t\t\tvec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * vec4(lessThan(triIndexVec, ends));\n\t\t\t\n\t\t\t\t// Update position\n\t\t\t\txy *= 2.;\n\t\t\t\txy += check.r * rShift + check.g * gShift + check.b * bShift;\n\t\t\t\n\t\t\t\t// Update loop variables\n\t\t\t\tstart = dot(check, starts);\n\t\t\t#endif\n\t\t\t\n\t\t\t// Compute final coordinates\n\t\t\tvec3 gridPos;\n\t\t\tgridPos.x = mod(xy.x, VOXEL_RESOLUTION);\n\t\t\tgridPos.y = mod(xy.y, VOXEL_RESOLUTION);\n\t\t\tgridPos.z = floor(xy.x * INV_VOXEL_RESOLUTION) + \n\t\t\t\t\t\t\t\t\tfloor(xy.y * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;\n\t\t\t\n\t\t\t// Vertex key computation\n\t\t\tvertexIndex -= start * 3.;\n\t\t\tfloat vk = vertexIndex * 0.0625 + 0.03125; // Optimized division by 16 and addition of 1/32\n\t\t\t\n\t\t\t// Voxel lookup and edge computation\n\t\t\tvec4 voxel = look(gridPos.x, gridPos.y, gridPos.z, voxelPassTexture);\n\t\t\tfloat key = (voxel.w + 0.5) * 0.00390625; // Optimized division by 256\n\t\t\t\n\t\t\t// Edge lookup and offset computation\n\t\t\tfloat edgeNum = texture(triTable, vec2(vk, key)).x;\n\t\t\tint edgeIndex = int(edgeNum) * 2;\n\t\t\t\n\t\t\t// Compute edge positions\n\t\t\tvec3 p1 = gridPos + offsets[edgeIndex];\n\t\t\tvec3 p2 = gridPos + offsets[edgeIndex + 1];\n\t\t\t\n\t\t\t// Compute potentials and normals\n\t\t\tvec4 potential1 = look(p1.x, p1.y, p1.z, potentialPassTexture);\n\t\t\tvec4 potential2 = look(p2.x, p2.y, p2.z, potentialPassTexture);\n\t\t\t\n\t\t\t// Final position and normal computation\n\t\t\tfloat mu = potential1.r / (potential1.r - potential2.r);\n\n\t\t\tmarchColor = mix(\n\t\t\t\tunpackVec3ToRGBA(potential1.gba),\n\t\t\t\tunpackVec3ToRGBA(potential2.gba),\n\t\t\t\tmu\n\t\t\t);\n\n\t\t\ttransformed = p1 + (p2 - p1) * mu;\n\t\t\ttransformed -= originOffset;\n\t\t\ttransformed *= scale;\n\t\t\tvec4 data1 = look(p1.x, p1.y, p1.z, voxelPassTexture);\n\t\t\tvec4 data2 = look(p2.x, p2.y, p2.z, voxelPassTexture);\n\t\t\tobjectNormal = normalize(mix(data1.xyz, data2.xyz, mu));\n\t\t\ttransformedNormal = normalMatrix * objectNormal;\n\t\t\t#ifndef FLAT_SHADED\n\t\t\t\tvNormal = transformedNormal;\n\t\t\t#endif\n\t\t#endif\n\t\t\n#include <project_vertex>");let i=e.fragmentShader.match(/vec3 diffuseColor[^\n]*\n/);if(!i)return;let n="\n\t\t#ifdef SHAPEBLEND_C\n\t\t\t#if SHAPEBLEND_C == 1\n\t\t\t\t".concat(i[0].replace(/nodeU0,/g,"marchColor.rgb,").replace(/nodeU\d+(?=,g_uid\d+_calpha\))/g,"marchColor.a"),"\n\t\t\t#else\n\t\t\t\t").concat(i[0],"\n\t\t\t#endif\n\t\t#else\n\t\t\t").concat(i[0],"\n\t\t#endif\n\t\t");e.fragmentShader="in vec4 marchColor;\n"+e.fragmentShader.replace(i[0],n),Object.assign(e.uniforms,this.marchPassUniforms)}initDebugPass(e){console.log("fboToDebug.width",e.width,e.height),this.geometry=new cx(e.width,e.height),this.geometry.userData={parameters:{width:4,height:4}};let t={inputTexture:{value:Array.isArray(e.texture)?e.texture[1]:e.texture},pyramidTextureSize:{value:void 0}},i=e=>{e.vertexShader="\n\t\t\t\tprecision highp float;\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t}\n\t\t\t",e.fragmentShader="\n\t\t\t\tlayout(location = 1) out vec4 gVelocity;\n\n\t\t\t\tprecision highp float;\n\t\t\t\t\n\t\t\t\tuniform sampler2D inputTexture;\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tuniform vec2 pyramidTextureSize;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\t\t// Sample the input texture using UV coordinates\n\t\t\t\t\t\tgl_FragColor = texture(inputTexture, vUv);\n\t\t\t\t\t\tgVelocity = vec4(0.0);\n\t\t\t\t}\n\t\t\t",t.pyramidTextureSize.value=new Av(this.pyramidRenderTarget.width,this.pyramidRenderTarget.height),Object.assign(e.uniforms,t)};this.material.shapeBlendhack=i,this.material.root.shapeBlendhack=i}},q$=G$;q$.streamCompaction=new class{constructor(){this.pyramidPassScene=new NA,this.pyramidPassMaterial=new N$({name:"PyramidPass"}),this.pyramidPassUniforms={inputTexture:{value:void 0},inputWidth:{value:0},inputHeight:{value:0},inputShiftX:{value:0},outputShiftX:{value:0}},this.pyramidTopLevelReadPixelBuffer=new Float32Array(4);this.pyramidPassMaterial.fragmentShader="\n\t\t\tprecision highp float;\n\t\t\tprecision highp sampler2D;\n\t\t\tlayout(location = 0) out vec4 pc_FragColor;\n\t\t\tuniform sampler2D inputTexture;\n\t\t\tuniform float inputWidth;\n\t\t\tuniform float inputHeight;\n\t\t\tuniform float inputShiftX;\n\t\t\tuniform float outputShiftX;\n\t\t\tconst vec2 half_unit_coord = vec2(0.5);\n\t\t\tconst vec4 one = vec4(1.0);\n\t\t\tvoid main() {\n\t\t\t\tvec2 inputSize = vec2(inputWidth, inputHeight);\n\t\t\t\tvec2 input_pixel_uv = 1. / inputSize;\n\t\t\t\tvec2 coord = gl_FragCoord.xy - half_unit_coord;\n\t\t\t\tcoord.x -= outputShiftX;\n\t\t\t\tcoord = coord * 2. + half_unit_coord;\n\t\t\t\tcoord.x += inputShiftX;\n\n\t\t\t\t// sample bottom left corner\n\t\t\t\tvec2 input_uv = coord / inputSize;\n\t\t\t\tfloat bl = texture(inputTexture, input_uv).r;\n\n\t\t\t\t// sample bottom right corner\n\t\t\t\tinput_uv.x += input_pixel_uv.x;\n\t\t\t\tfloat br = texture(inputTexture, input_uv).r;\n\n\t\t\t\t// sample top right corner\n\t\t\t\tinput_uv.y += input_pixel_uv.y;\n\t\t\t\tfloat tr = texture(inputTexture, input_uv).r;\n\n\t\t\t\t// sample top left corner\n\t\t\t\tinput_uv.x -= input_pixel_uv.x;\n\t\t\t\tfloat tl = texture(inputTexture, input_uv).r;\n\n\t\t\t\tpc_FragColor.a = bl;\n\t\t\t\tpc_FragColor.b = pc_FragColor.a + br;\n\t\t\t\tpc_FragColor.g = pc_FragColor.b + tr;\n\t\t\t\tpc_FragColor.r = pc_FragColor.g + tl; \n\t\t\t}\n\t\t",this.pyramidPassMaterial.uniforms=this.pyramidPassUniforms,this.pyramidPassMaterial.depthTest=!1,this.pyramidPassMaterial.depthWrite=!1;let e=new Nb(F$,this.pyramidPassMaterial);e.frustumCulled=!1,this.pyramidPassScene.add(e)}renderPyramid(e,t,i,n,r){(new IE).min.setScalar(0);let a=t.length-1,s=new qv;i.getViewport(s),this.pyramidPassUniforms.inputShiftX.value=0,this.pyramidPassUniforms.outputShiftX.value=0;let o=a-1;for(let c=o;c>=0;c--){let a=c%2===o%2?r[0]:r[1],s=c===o?n:c%2===o%2?r[1]:r[0];this.pyramidPassUniforms.inputTexture.value=Array.isArray(s.texture)?s.texture[1]:s.texture,this.pyramidPassUniforms.inputWidth.value=s.width,this.pyramidPassUniforms.inputHeight.value=s.height,i.setRenderTarget(a);let l=t[c],h=i.getPixelRatio();i.setViewport(this.pyramidPassUniforms.outputShiftX.value/h,0,l/h,l/h),2===c&&e%2!==0&&i.setViewport(this.pyramidPassUniforms.outputShiftX.value/h,0,3/h,3/h),i.render(this.pyramidPassScene,U$);let u=this.pyramidPassUniforms.inputShiftX.value;this.pyramidPassUniforms.inputShiftX.value=this.pyramidPassUniforms.outputShiftX.value,this.pyramidPassUniforms.outputShiftX.value=u,c<o&&(this.pyramidPassUniforms.outputShiftX.value+=t[c+1])}i.setViewport(s);let l=t.length%2===0?0:1;return i.readRenderTargetPixelsAsync(r[l],r[l].width-1,0,1,1,this.pyramidTopLevelReadPixelBuffer).then(()=>this.pyramidTopLevelReadPixelBuffer[0])}};var Y$=new My,X$=new My,Q$=new Kv,K$=new Zv,Z$=new Zv,J$=new Kv;function $$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.children.length;for(;i--;){let n=this.children[i];qN.is(n)&&e0.call(n,e,t+1)}}function e0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0!==e(this,t)){let i=this.children.length;for(;i--;){let n=this.children[i];qN.is(n)&&e0.call(n,e,t+1)}}}function t0(){if(void 0===this.shapesDataTexture.value){let e=new GA(new Float32Array(1920),W$,5,Rg,Og);this.shapesDataTexture.value=e}let e=this.shapesDataTexture.value,t=e.image.data;e.needsUpdate=!0;let i=0,n=this.data.geometry.blendRange,r=Y$.copy(this.matrixWorld).invert(),a=0;$$.call(this,e=>{var s;if(!1===e.visible)return!0;let o;if(e instanceof xQ)return;if(e instanceof tK||e instanceof z$)return;o=e instanceof iU?e.object:e;let l=null===(s=e.data)||void 0===s?void 0:s.cloner;if($N.is(e)&&l&&!l.hideBase&&"radial"!==l.type&&!0!==l.disabled||!(o instanceof OX))return;let c=o.geometry.userData.parameters,h=c.shapeBlendNode;if(void 0===h)return;if(X$.multiplyMatrices(r,e.matrixWorld).decompose(Z$,Q$,K$),"TorusGeometry"===c.type&&360!==c.arc){let e=c.arc*Math.PI/180;e/=4,Q$.multiply(J$.set(0,0,Math.sin(e),Math.cos(e)))}let u=h.overrideGlobalBlend?h.blendRange:n;u=u/this.bboxSize*2,t[4*a]=(Z$.x-this.bboxOffset)/this.bboxSize*2,t[4*a+1]=(Z$.y-this.bboxOffset)/this.bboxSize*2,t[4*a+2]=(Z$.z-this.bboxOffset)/this.bboxSize*2,t[4*a+3]=0===h.operation?1:2===h.operation?-1:-2,t[384+4*a]=-Q$.x,t[384+4*a+1]=-Q$.y,t[384+4*a+2]=-Q$.z,t[384+4*a+3]=Q$.w;let d=new Float32Array(4),p=0;if("SphereGeometry"===c.type)c.width===c.height&&c.width===c.depth?d[0]=0:d[0]=1,d[1]=c.width/this.bboxSize,d[2]=c.height/this.bboxSize,d[3]=c.depth/this.bboxSize,i=Math.max(i,d[1]*K$.x+u,d[2]*K$.x+u,d[3]*K$.x+u);else if("CubeGeometry"===c.type){p=c.cornerRadius;let e=c.width,t=c.height,n=c.depth;d[0]=2,d[1]=(e-2*p)/this.bboxSize,d[2]=(t-2*p)/this.bboxSize,d[3]=(n-2*p)/this.bboxSize,i=Math.max(i,Math.sqrt(e**2+t**2+n**2)/this.bboxSize*K$.x+u)}else if("CylinderGeometry"===c.type){p=c.cornerRadius;let e=c.height,t=c.radiusBottom,n=c.radiusTop;if(n>=t){let i=Math.atan2(n-t,e),r=(Math.PI/2-i)/2;n-=p/Math.tan(r),t-=p*Math.tan(r)}else if(t>n){let i=Math.atan2(t-n,e),r=(Math.PI/2-i)/2;n-=p*Math.tan(r),t-=p/Math.tan(r)}d[1]=(c.height-2*p)/this.bboxSize,t===n?(d[0]=3,d[2]=t/this.bboxSize*2):(d[0]=4,d[2]=t/this.bboxSize*2,d[3]=n/this.bboxSize*2),i=Math.max(i,4*d[1]*K$.x+u)}else if("TorusGeometry"===c.type){if(d[0]=5,d[1]=(c.width-c.depth)/this.bboxSize,d[2]=c.depth/this.bboxSize,360!==c.arc){d[0]=6,d[3]=d[1],t[1152+4*a+3]=d[2];let e=2*Math.atan2(d[2]/2,d[1]),i=c.arc*Math.PI/180/2-e;d[1]=Math.sin(i),d[2]=Math.cos(i)}i=Math.max(i,c.width*K$.x/this.bboxSize+u)}t.set(d,768+4*a),t[1152+4*a]=u,t[1152+4*a+1]=p/this.bboxSize*2,t[1152+4*a+2]=K$.x;let f=o.material,m=f.uniforms.nodeU0.node.value,g=f.uniforms.nodeU1.value;0!==h.operation&&!h.useColor&&(g=-1),t[1536+4*a]=m.r,t[1536+4*a+1]=m.g,t[1536+4*a+2]=m.b,t[1536+4*a+3]=g,g<1&&1===this.material.defines.SHAPEBLEND_C&&(this.material.transparent=!0),a++}),this.npart=a,this.spatialPassUniforms.span.value=1.4*i}function i0(e,t){let i=!1,n=512&e.layers.mask,r=t.getLayersOfType("transmission"),a=t.getLayersOfType("outline");return a.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),i=!0,IX(e),kX(e)),0===r.length&&0===a.length&&e.layers.set(0),n&&e.layers.set(9),e instanceof EX&&e.needsAO&&e.layers.enable(5),i}function n0(e,t){if(!t.layers)return!1;let i=512&e.layers.mask,n=!1,r=t.getLayersOfType("transmission").filter(e=>e.data.visible),a=t.getLayersOfType("outline").filter(e=>e.data.visible);return r.length>0&&(e.layers.set(3),a.length>0&&e.layers.enable(8),n=!0),0===r.length&&0===a.length&&e.layers.set(0),i&&e.layers.set(9),e.needsAO&&e.layers.enable(5),n}var r0=new TE,a0=new My,s0=new Cy;function o0(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.cloner;if(r)for(let a of r.children){let r=a0.copy(a.matrixWorld).invert(),s=s0.copy(t.ray).applyMatrix4(r),o=e.matrixWorld;s.applyMatrix4(o);let l=r0;l.set(s.origin,s.direction),l.near=t.near,l.far=t.far;let c=l.intersectObject(e,!1);c.length>0&&i.push((0,ye.A)((0,ye.A)({},c[0]),{},{object:n?a:e}))}}var l0=class{constructor(){this._constraints=new Map}setConstraint(e,t){null===t?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((i,n)=>{let r=[n,i],a=i;for(;this._constraints.has(a);){if(a=this._constraints.get(a),r.includes(a)){console.warn("circular dependency detected: ".concat(r.join(" -> ")));break}t.has(a)||r.push(a)}for(let s=r.length-2;s>=0;s--)if(!t.has(r[s])){let i=e.find(r[s]);i?i.applyPathSnapping(e):console.warn("missing entity ".concat(r[s])),t.add(r[s])}})}findDependency(e,t){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===t)return!0;return!1}},c0=class{};function h0(e){let t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g;function v(e,t,s){let o=new Float32Array(h,a,3*i);n=0;let l=new Uint32Array(h,r,i);for(let i=0;i<s.length-1;i++){let r=t[i],a=e[i].elements,c=r.filter(e=>e.enabled&&"Include"===e.mode).map(e=>"Box"===e.type?b(e):w(e)),h=r.filter(e=>e.enabled&&"Exclude"===e.mode).map(e=>"Box"===e.type?b(e):w(e));for(let e=s[i];e<s[i+1];e++){let t=p[3*e],i=p[3*e+1],r=p[3*e+2];if((0===c.length||y(t,i,r,c))&&(0===h.length||!y(t,i,r,h))){let s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);o[3*n]=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,o[3*n+1]=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,o[3*n+2]=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,l[n]=e,n++}}}}function y(e,t,i,n,r){return n["Intersect"===r?"every":"some"](n=>{let r=function(e,t,i,n,r){let a=e-r[0],s=t-r[1],o=i-r[2],l=1/(n[3]*a+n[7]*s+n[11]*o+n[15]);return{x:(n[0]*a+n[4]*s+n[8]*o+n[12])*l+r[0],y:(n[1]*a+n[5]*s+n[9]*o+n[13])*l+r[1],z:(n[2]*a+n[6]*s+n[10]*o+n[14])*l+r[2]}}(e,t,i,n.invRotationMatrix,n.cropCenter);return Array.isArray(n)?function(e,t,i,n){return e>=n[0]&&e<=n[3]&&t>=n[1]&&t<=n[4]&&i>=n[2]&&i<=n[5]}(r.x,r.y,r.z,n):function(e,t,i,n){let r=(e-n.cropCenter[0])*n.invRadiusX,a=(t-n.cropCenter[1])*n.invRadiusY,s=(i-n.cropCenter[2])*n.invRadiusZ;return r*r+a*a+s*s<=1}(r.x,r.y,r.z,n)})}function b(e){let t=e.cropSize[0]/2,i=e.cropSize[1]/2,n=e.cropSize[2]/2,r=[e.cropCenter[0]-t,e.cropCenter[1]-i,e.cropCenter[2]-n,e.cropCenter[0]+t,e.cropCenter[1]+i,e.cropCenter[2]+n],a=x(e.cropRotation);return Object.assign(r,{invRotationMatrix:a,cropCenter:e.cropCenter})}function x(e){let t=[],i=e[0]*Math.PI/180,n=e[1]*Math.PI/180,r=e[2]*Math.PI/180,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),h=Math.sin(r),u=a*c,d=a*h,p=s*c,f=s*h;return t[0]=o*c,t[1]=-o*h,t[2]=l,t[4]=d+p*l,t[5]=u-f*l,t[6]=-s*o,t[8]=f-u*l,t[9]=p+d*l,t[10]=a*o,t[12]=0,t[13]=0,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t}function w(e){let t=2/e.cropSize[0],i=2/e.cropSize[1],n=2/e.cropSize[2],r=x(e.cropRotation);return{invRadiusX:t,invRadiusY:i,invRadiusZ:n,cropCenter:e.cropCenter,invRotationMatrix:r}}e.onmessage=x=>{if(x.data.getCroppedIndexes){let t=new Uint32Array(function(e,t){let i=[],n=t.filter(e=>e.enabled&&"Include"===e.mode).map(e=>"Box"===e.type?b(e):w(e)),r=t.filter(e=>e.enabled&&"Exclude"===e.mode).map(e=>"Box"===e.type?b(e):w(e)),a=e.length;for(let s=0;s<a;s+=3){let t=e[s],a=e[s+1],o=e[s+2];(0===n.length||y(t,a,o,n))&&(0===r.length||!y(t,a,o,r))||i.push(s/3)}return i}(new Float32Array(x.data.positions),x.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:t},[t])}else if(x.data.positions)u=x.data.positions,p=new Float32Array(u),m=x.data.meshMatrixWorlds,g=x.data.cropsArray,f=x.data.meshIndexIntervals,v(m,g,f),e.postMessage({sortSetupComplete:!0});else if(x.data.sort||x.data.newMatrixWorlds||x.data.newCropsArray)(x.data.newMatrixWorlds||x.data.newCropsArray)&&(g=x.data.newCropsArray||g,m=x.data.newMatrixWorlds||m,v(m,g,f)),function(u){let p,f=new Float64Array(h,s,16);for(let e=0;e<16;e++)f[e]=u[e];if(n>1){t.exports.sortIndexes(r,a,c,s,o,l,d.DepthMapRange,n);let e=new Uint32Array(n);p=e.buffer,e.set(new Uint32Array(h,l,n))}else if(1===n){let e=new Uint32Array(n);e[0]=new Uint32Array(h,r,i)[0],p=e.buffer}else p=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:p},[p])}(x.data.sort.view,x.data.sort.cameraPosition);else if(x.data.init){d=x.data.init.Constants,i=x.data.init.splatCount;let n=d.BytesPerInt,u=3*d.BytesPerFloat,p=new Uint8Array(x.data.init.sorterWasmBytes),f=i*(n+u)+(i*d.BytesPerInt*2+d.DepthMapRange*d.BytesPerInt*2)+32*d.MemoryPageSize,m=Math.floor(f/d.MemoryPageSize)+1,g={module:{},env:{memory:new WebAssembly.Memory({initial:2*m,maximum:3*m,shared:!0})}};WebAssembly.compile(p).then(e=>WebAssembly.instantiate(e,g)).then(p=>{t=p,r=0,a=i*n,s=a+i*u,c=s+16*d.BytesPerFloat*2,o=c+i*d.BytesPerInt,l=o+d.DepthMapRange*d.BytesPerInt,h=g.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}Um(c0,"DepthMapRange",65536),Um(c0,"MemoryPageSize",65536),Um(c0,"BytesPerFloat",4),Um(c0,"BytesPerInt",4);var u0=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(i){return e[0]=i,t[0]}}(),d0=function(e,t,i,n){return e+(t<<8)+(i<<16)+(n<<24)},p0=new Av;function f0(e){let t=!1;return e.scene.objects.traverse((e,i)=>{if(!1===i.visible)return!0;"Splat"===i.type&&(t=!0)}),t}var m0,g0,v0,y0=class extends Nb{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;super(i,n),this.splatCount=t,this.meshIndexIntervals=s,this.meshMatrixWorlds=o,this.splatBuffers=e,this.geometry=i,this.material=n,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=r,this.devicePixelRatio=a,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=y0.buildGeomtery(t),o=y0.buildMaterial(r);return new y0(e,t,s,o,i,n,r,a)}static buildMaterial(e){let t={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new Av},viewport:{type:"v2",value:new Av},basisViewport:{type:"v2",value:new Av},debugColor:{type:"v3",value:new Fv},covariancesTextureSize:{type:"v2",value:new Av(1024,1024)},centersColorsTextureSize:{type:"v2",value:new Av(1024,1024)},orthoZoom:{type:"f",value:-1}};return new Yb({uniforms:t,vertexShader:"\n            precision highp float;\n            #include <common>\n\n            attribute uint splatIndex;\n\n            uniform highp sampler2D covariancesTexture;\n            uniform highp usampler2D centersColorsTexture;\n            uniform vec2 focal;\n            uniform vec2 viewport;\n            uniform vec2 basisViewport;\n            uniform vec2 covariancesTextureSize;\n            uniform vec2 centersColorsTextureSize;\n\t\t\t\t\t\tuniform highp sampler2D meshMatrixWorldsTexture;\n\t\t\t\t\t\tuniform uint meshIndexIntervals[257];\n\t\t\t\t\t\tuniform float orthoZoom;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\n            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\n            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));\n            const uvec4 shift4 = uvec4(0, 8, 16, 24);\n            vec4 uintToRGBAVec (uint u) {\n               uvec4 urgba = mask4 & u;\n               urgba = urgba >> shift4;\n               vec4 rgba = vec4(urgba) * encodeNorm4;\n               return rgba;\n            }\n\n            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {\n                vec2 samplerUV = vec2(0.0, 0.0);\n                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;\n                samplerUV.y = float(floor(d)) / dimensions.y;\n                samplerUV.x = fract(d);\n                return samplerUV;\n            }\n\n            void main () {\n                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));\n                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));\n                vColor = uintToRGBAVec(sampledCenterColor.r);\n\n                vPosition = position.xy * 2.0;\n\n\t\t\t\t\t\t\t\tuint meshIndex;\n\t\t\t\t\t\t\t\tfor (int i = 1; i < 257; i++) {\n\t\t\t\t\t\t\t\t\tif (splatIndex < meshIndexIntervals[i]) {\n\t\t\t\t\t\t\t\t\t\tmeshIndex = uint(i - 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfloat strideMulmeshIndex = float(4u*meshIndex);\n\t\t\t\t\t\t\t\tfloat meshMatrixWorldsTextureLength = float(256*4);\n\n\t\t\t\t\t\t\t\tmat4 modelMat = mat4(\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmat4 modelViewMat = viewMatrix * modelMat;\n\t\t\t\t\t\t\t\tvec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); \n                vec4 clipCenter = projectionMatrix * viewCenter;\n\n                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;\n\n                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);\n                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);\n\n                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix\n                mat3 Vrk = mat3(\n                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,\n                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,\n                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z\n                );\n                float s = 1.0 / (viewCenter.z * viewCenter.z);\n\n                mat3 W = transpose(mat3(modelViewMat));\n                mat3 T = orthoZoom > 0.0 ? W : W * mat3(\n\t\t\t\t\t\t\t\t\tfocal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,\n\t\t\t\t\t\t\t\t\t0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,\n\t\t\t\t\t\t\t\t\t0., 0., 0.\n\t\t\t\t\t\t\t\t);\n                mat3 cov2Dm = transpose(T) * Vrk * T;\n                cov2Dm[0][0] += 0.3;\n                cov2Dm[1][1] += 0.3;\n\n                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because\n                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],\n                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't\n                // need cov2Dm[1][0] because it is a symetric matrix.\n                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);\n\n                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;\n\n                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix\n                // so that we can determine the 2D basis for the splat. This is done using the method described\n                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html\n                //\n                // This is a different approach than in the original work at INRIA. In that work they compute the\n                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle\n                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance\n                // matrix (called 'conic') to determine fragment opacity.\n                float a = cov2Dv.x;\n                float d = cov2Dv.z;\n                float b = cov2Dv.y;\n                float D = a * d - b * b;\n                float trace = a + d;\n                float traceOver2 = 0.5 * trace;\n                float term2 = sqrt(trace * trace / 4.0 - D);\n                float eigenValue1 = traceOver2 + term2;\n\t\t\t\t\t\t\t\tfloat eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value\n\n                const float maxSplatSize = 1024.0;\n                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));\n                // since the eigen vectors are orthogonal, we derive the second one from the first\n                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);\n                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);\n                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);\n\n                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;\n\n\t\t\t\t\t\t\t\tif (orthoZoom > 0.0) {\n\t\t\t\t\t\t\t\t\tndcOffset *= orthoZoom;\n\t\t\t\t\t\t\t\t}\n\n                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);\n            }",fragmentShader:"\n            precision highp float;\n            #include <common>\n\n            uniform vec3 debugColor;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\t\t\t\t\t\tlayout(location = 1) out vec4 gVelocity; \n\n            void main () {\n                // compute the negative squared distance from the center of the splat to the\n                // current fragment in the splat's local space.\n                float A = -dot(vPosition, vPosition);\n                if (A < -4.0) discard;\n                vec3 color = vColor.rgb;\n                A = exp(A) * vColor.a;\n                gl_FragColor = vec4(color.rgb, A);\n\t\t\t\t\t\t\t\tgVelocity = vec4(0.0); // so it is ignored by TAA\n            }",transparent:!0,alphaTest:1,blending:1,depthTest:!0,depthWrite:!1,side:2})}static buildGeomtery(e){let t=new Cb;t.setIndex([0,1,2,0,2,3]);let i=new Float32Array(12),n=new mb(i,3);t.setAttribute("position",n),n.setXYZ(0,-1,-1,0),n.setXYZ(1,-1,1,0),n.setXYZ(2,1,1,0),n.setXYZ(3,1,-1,0),n.needsUpdate=!0;let r=(new lE).copy(t),a=new Uint32Array(e),s=new QA(a,1,!1);return s.setUsage(35048),r.setAttribute("splatIndex",s),r.instanceCount=e,r}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(e=>e.buildPreComputedBuffers()),this.covariances=new Float32Array(6*this.splatCount),this.colors=new Uint8Array(4*this.splatCount),this.centers=new Float32Array(3*this.splatCount);let e=0,t=0,i=0;for(let n of this.splatBuffers){let r=n.nsplats;this.colors.subarray(e,e+4*r).set(n.colorsA),e+=4*r,this.centers.subarray(t,t+3*r).set(n.decoded.xyz.denormDequant().data),t+=3*r,this.covariances.subarray(i,i+6*r).set(new Float32Array(n.precomputedCovarianceBufferData)),i+=6*r}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new Av(4096,1024);for(;t.x*t.y*2<6*e;)t.y*=2;let i,n,r=new Av(4096,1024);for(;r.x*r.y*4<4*e;)r.y*=2;if(this.halfPrecisionCovariancesOnGPU){n=new Uint16Array(t.x*t.y*2);for(let e=0;e<this.covariances.length;e++)n[e]=ZE.toHalfFloat(this.covariances[e]);i=new GA(n,t.x,t.y,jg,kg)}else n=new Float32Array(t.x*t.y*2),n.set(this.covariances),i=new GA(n,t.x,t.y,jg,Og);i.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=i,this.material.uniforms.covariancesTextureSize.value.copy(t);let a=new Uint32Array(r.x*r.y*4);for(let c=0;c<e;c++){let e=4*c,t=3*c,i=4*c;a[i]=d0(this.colors[e],this.colors[e+1],this.colors[e+2],this.colors[e+3]),a[i+1]=u0(this.centers[t]),a[i+2]=u0(this.centers[t+1]),a[i+3]=u0(this.centers[t+2])}let s=new GA(a,r.x,r.y,1033,Dg);s.internalFormat="RGBA32UI",s.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=s,this.material.uniforms.centersColorsTextureSize.value.copy(r);let o=new Float32Array(4096);for(let c=0;c<this.meshMatrixWorlds.length;c++)o.set(this.meshMatrixWorlds[c].elements,16*c);let l=new GA(o,1024,1,Rg,Og);l.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=l,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:n,texture:i,size:t},centerColors:{data:a,texture:s,size:r},meshMatrixWorlds:{data:o,texture:l}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,i,n){this.splatCount>0&&(p0.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(p0),this.material.uniforms.basisViewport.value.set(2/p0.x,2/p0.y),this.material.uniforms.focal.value.set(t,i),this.material.uniforms.orthoZoom.value=n,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},b0=new Promise(e=>{m0=e}),x0=!1;function w0(){if(!x0)return g0||(g0=async function(){let e=await __webpack_require__.e(23).then(__webpack_require__.bind(__webpack_require__,5023));m0(e),x0=!0}())}b0.then(e=>v0=e);var A0=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Um(this,"updateView",function(){let e=new My,t=[],i=new Zv(0,0,-1),n=new Zv(0,0,-1),r=new Zv,a=new Zv;return function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0,l=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!s){n.set(0,0,-1).applyQuaternion(o.quaternion);let e=!1,t=!1;if(n.dot(i)<=.95&&(e=!0),a.copy(o.position).sub(r).length()>=1&&(t=!0),!e&&!t&&!l&&!c&&!this.needsInitialRender)return}this.needsInitialRender=!1,r.copy(o.position),i.copy(n),e.copy(o.matrixWorld).invert(),e.premultiply(this.dummyPerspectiveMatrix),t[0]=o.position.x,t[1]=o.position.y,t[2]=o.position.z;let h=(0,ye.A)((0,ye.A)({sort:{view:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount}},l?{newMatrixWorlds:this.meshMatrixWorlds}:{}),c?{newCropsArray:this.cropsArray}:{});this.sortRunning?this.queuedMessage=h:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(h))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=(new My).makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let i=new Av;null!==this.splatMesh&&this.splatMesh.getSplatCount()>0&&(e.getSize(i),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.activePage=this.scene.activePage,e.position&&(e.position=(new Zv).fromArray(e.position)),e.orientation&&(e.orientation=(new Kv).fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(e=>{"Splat"===e.data.type&&t.push(e)}),this.splatMesh&&this.splatMesh.dispose(),0===t.length)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(e=>e.matrixWorld),this.meshMatrixWorldsOld=t.map(e=>e.matrixWorld.clone()),this.cropsArray=t.map(e=>e.data.crops.map(e=>e.data));let i=t.map(e=>new v0.GSplineBuffer(new Uint8Array(e.data.buffer).buffer)),n=0,r=[0];for(let a of i)n+=a.getSplatCount(),r.push(n);return this.setupSplatMesh(i,n,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,r,this.meshMatrixWorlds),this.setupSortWorker(n),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,16*t);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,!this.meshMatrixWorlds.every((e,t)=>e.equals(this.meshMatrixWorldsOld[t]))&&(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(e=>e.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,i)=>{var n;t.data.crops.forEach((t,n)=>{void 0===this.cropsArray[i][n]?(e=!0,this.cropsArray[i][n]=t.data):Object.entries(t.data).forEach(t=>{var r;let[a,s]=t;(Array.isArray(s)&&s.some((e,t)=>e!==this.cropsArray[i][n][a][t])||s!==(null===(r=this.cropsArray[i][n])||void 0===r?void 0:r[a]))&&(e=!0,this.cropsArray[i][n][a]=s)})}),t.data.crops.length!==(null===(n=this.cropsArray[i])||void 0===n?void 0:n.length)&&(this.cropsArray[i].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zv,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Kv,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;this.splatMesh=y0.buildMesh(e,t,r,a,s,o),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(n),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(e,t,i)=>this.update(e,i)}setupSortWorker(e){this.sortWorker=function(e){let t=new Worker(URL.createObjectURL(new Blob(["(",h0.toString(),")(self)"],{type:"application/javascript"}))),i=atob("AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL"),n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return t.postMessage({init:{sorterWasmBytes:n.buffer,splatCount:e,Constants:{BytesPerFloat:c0.BytesPerFloat,BytesPerInt:c0.BytesPerInt,DepthMapRange:c0.DepthMapRange,MemoryPageSize:c0.MemoryPageSize}}}),t}(e),this.sortWorker.onmessage=e=>{var t;e.data.sortDone?(this.sortRunning=!1,null!==(t=this.splatMesh)&&void 0!==t&&t.updateIndexes(new Uint32Array(e.data.indexesBuffer)),this.lastSortTime=e.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):e.data.sortCanceled?this.sortRunning=!1:e.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):e.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){null!==this.splatMesh&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},S0=new db;S0.wireframe=!0;var _0=new Zv,E0=class extends NA{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.shapeBlendIntances=[],this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new l0,this.invisibleObjects=new eK("jflkdsafjasdifjaslk",(0,ye.A)((0,ye.A)({},Mz.defaultData),{},{visible:!1,name:"buildin invisible"})),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new d$("fdasfa",(0,ye.A)((0,ye.A)({},zz.defaultData),{},{name:""}),{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=function(e){let t=!1;return e.traverseEntity(e=>{if(e instanceof EX)if(Array.isArray(e.material))for(let i=0;i<e.material.length;i++)n0(e,e.material[i])&&(t=!0);else n0(e,e.material)&&(t=!0)}),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=function(e){let t=!1;return e.traverseEntity(e=>{if(e instanceof EX)if(Array.isArray(e.material))for(let i=0;i<e.material.length;i++)i0(e,e.material[i])&&(t=!0);else i0(e,e.material)&&(t=!0)}),t}(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof d$&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let i=[],n=t;for(;n!==this;){let e=n;n=n.parent;let t=n.children.indexOf(e);i.splice(0,0,t)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let e=this.getWithSortKey(i.id);void 0!==e&&t.push(e)}return t.sort((e,t)=>dk(e.sortKey,t.sortKey)),t.map(e=>e.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(void 0===i)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if("f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera"===e)return this.activePage.personalCamera;if(e===CL)return this.activePage.personalCamera}if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof d$&&t.uiScene){let i=t.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof d$&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(i=>{void 0===t&&i instanceof A$&&(t=i.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof d$&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);t?Array.isArray(t.identity)&&void 0===this.findInstance(t.identity)&&console.error("not found instance"):console.error("not found")}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(e=>{this.toExpandCloner.add(e)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;null===(t=e.cloner)||void 0===t||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){1===e.path.length&&"components"===e.path[0]&&1===e.type&&this.createChildrenObjects([(0,ye.A)((0,ye.A)({},e.data.asset),{},{id:e.id})],this.invisibleObjects,t)}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let i=null===e.parent?this:this.find(e.parent);if(void 0===i)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(this),n.resetBBoxNeedsUpdate(),qQ(n)&&YQ(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty(),n.updatePathSnapping()}else if(0===e.path.length&&8===e.type){let t=this.find(e.id);if(void 0===t)throw new Error("unexpected");t.traverseEntity(e=>{e instanceof q$&&(this.shapeBlendIntances=this.shapeBlendIntances.filter(t=>t!==e))}),this.markToExpandCloner(t),t.resetBBoxNeedsUpdate(),this.unregisterObject(t);let i=t.parent;this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(t),this.markPenumbraSizeDirty(),t.parent.remove(t),YQ(t.parent)&&(t.parent.invalidateUpstreamBooleanData(),t.parent.invalidateDownstreamBooleanData().recomputeBoolean()),qQ(t)&&(t.freeBooleanPointer(),i instanceof HQ&&i.invalidateDownstreamBooleanData().recomputeBoolean()),t instanceof m$&&t.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(t),this.pathConstraints.removeDependencies(t.uuid),t.updatePathSnapping()}else if(0===e.path.length&&9===e.type){var i;let t=this.find(e.id);if(void 0===t)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(t);let n=t.parent;this.markNeedsRecomputeInstancesForAncessors(n),null!==(i=t.cloner)&&void 0!==i&&i.resetOnMove(),this.markToExpandCloner(t);let r=null===e.parent?this:this.find(e.parent);if(void 0===r)throw new Error("unexpected");r.add(t),this.markNeedsRecomputeInstancesForAncessors(r),this.markToExpandCloner(t),t.invalidateClonerTransform(t),t.updateVisible(this),t.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;r.children.splice(a,0,r.children.pop()),qQ(t)&&(t.invalidateUpstreamBooleanData(),YQ(t.parent)?t.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof HQ&&n.invalidateDownstreamBooleanData().recomputeBoolean()),t.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){var e;return null!==(e=this.find(this.data.publish.playPage))&&void 0!==e?e:this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let i of this.children)i instanceof d$&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)));this.activePage!==(null===(t=this.splatViewer)||void 0===t?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,i,n){if(0===t.type){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:e}=t.props;t=(0,ye.A)((0,ye.A)({},t),{},{props:e}),this.markNeedsRecomputeInstances()}"pathSnapping"===t.path[0]&&void 0!==t.props.pathId&&this.pathConstraints.setConstraint(e,t.props.pathId)}let r=this.find(e);if(r)try{(function(e,t,i,n){e.updateByOp(t,i,n,!1)})(r,t,i,{scene:this,shared:n}),r instanceof OX&&r.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}updateEntity2DByOp(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];e.updateEntityByOp(t,i,n,r),this.traverseEntity(e=>{var s;(e instanceof A$||e instanceof d$)&&(a.includes(null!==(s=e.frameId)&&void 0!==s?s:"")||e.frameId===t)&&e.updateEntity2DByOp(t,i,n,r)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let i=Object.entries(t.data.lib.components).map((e,t)=>({data:e[1].asset.data,children:e[1].asset.children,id:e[0],fi:t}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(e=>{e instanceof FQ&&e.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(e=>{("Component"===e.data.type||"Instance"===e.data.type)&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){$N.is(e)&&("Component"===e.data.type&&this.markNeedsRecomputeInstances(),e.traverseAncestors(e=>{$N.is(e)&&"Component"===e.data.type&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,n,r,a,s){if(e){let o=n.find(e);o&&o!==n&&r.forInstancesRec(n=>{n.data=bI(n.data,r=>{let o=r.events.data(s.id),l=n.goUp(a);if(l){let n=[...uk(l.identity),e].join("-"),r=this.entityIdentityToEntity[n];if(r){let e=r.uuid;mI.zoom(o,t)[i]=e}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,i,n,r,a){e.forEach(e=>{"Transition"===e.data.type||"Animation"===e.data.type?this.relativeizeInner(e.data.object,[...t,e.id],"object",i,n,r,a):"Conditional"===e.data.type&&(this.rewriteActions(e.data.ifActions,[...t,e.id,"ifActions"],i,n,r,a),this.rewriteActions(e.data.elseActions,[...t,e.id,"elseActions"],i,n,r,a))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof v$&&"string"==typeof e.identity&&"Component"===e.data.type)return e.traverseEntity((t,i)=>{t.data.events.forEach(n=>{if("GameControl"===n.data.type){let r=!1;if(t.forInstancesRec(e=>{e.data=bI(e.data,t=>{e.isInstanceRoot||(t.events.delete(n.id),r=!0)}).data}),!1===r)for(let a of tB.list)this.rewriteActions(n.data.gameActions[a],["gameActions",a],e,t,i,n)}else"Conditional"===n.data.type?("Distance"===n.data.condition.type?(this.relativeizeInner(n.data.condition.fromObject,["condition"],"fromObject",e,t,i,n),this.relativeizeInner(n.data.condition.toObject,["condition"],"toObject",e,t,i,n)):"State"===n.data.condition.type?this.relativeizeInner(n.data.condition.object,["condition"],"object",e,t,i,n):"Comparison"===n.data.condition.type&&("Property"===n.data.condition.lOperand.type&&this.relativeizeInner(n.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,n),"Property"===n.data.condition.rOperand.type&&this.relativeizeInner(n.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,n)),this.rewriteActions(n.data.inActions,["inActions"],e,t,i,n),this.rewriteActions(n.data.outActions,["outActions"],e,t,i,n)):"actions"in n.data&&this.rewriteActions(n.data.actions,["actions"],e,t,i,n)})}),!0})}expandInstances(e,t,i){let n=new Set;this.traverseEntity(r=>{if(r instanceof v$&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:n}),t||r.resetBBoxNeedsUpdate(),i&&r.traverseEntity(e=>{i.addClip(e)}),!0});for(let r of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),y$(r)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(e=>{e instanceof v$&&e.isInstanceRoot&&(e.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(e=>{let t="string"==typeof e.identity?e.identity:e.identity.join("-");this.entityIdentityToEntity[t]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[t]),e.dispose()})}clearScene(){for(let e of this.children)$N.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let i=[],n=r=>{for(let a of r.children){let r=a.cloner;if($N.is(a)&&!a.raycastLock&&(a.visible||null!==r&&void 0!==r&&r.object.data.visible))if(!0===t&&a.isInstanceRoot){let t=[];if(e.intersectObject(a,!0,t),t.length){let e=t[0];e.object=a,e.point.applyMatrix4(e.object.matrixWorld);let n=a.matrixWorld.clone().invert();e.point.applyMatrix4(n),i.push(e)}}else(qQ(a)||XQ(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,i),o0(a,e,i)),n(a)}};return n(this.activePage),i}raycastWithClones(e){let t=[],i=n=>{for(let r of n.children){let n=r.cloner;$N.is(r)&&(r.visible||(null===n||void 0===n?void 0:n.object.data.visible))&&((qQ(r)||XQ(r)&&this.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),o0(r,e,t,!0)),i(r))}};return i(this),t}forEachEntity(e){for(let t of this.children)$N.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)$N.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)$N.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(i=>{if(i instanceof OX&&"Mesh"===i.data.type&&("TextGeometry"===i.data.geometry.type||"InputGeometry"===i.data.geometry.type)&&i.data.geometry.font===e){let n=i.geometry,r=i.data.geometry;n.updateFont(e,t).then(()=>{n.update(r,t);let e=i.invalidateDownstreamBooleanData();YQ(e)&&e.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)qN.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)$N.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,i){let n=0;for(let r of e)this.createObject(r.id,r.data,r.children,t,n,i),n+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,n,r,a){var s;let o={scene:this,shared:a},l=j$(e,t,o);return l instanceof q$&&this.shapeBlendIntances.push(l),l&&(this.entityByUuid[e]=l,n.add(l),n.children.splice(r,0,n.children.pop()),i.length>0&&(l.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,l,a)),l.updateState(t,o),l instanceof OX&&l.updateGeometryGroupsIfNeeded(),l.updateVisible(this),l.cloner&&this.toExpandCloner.add(l),null!==(s=t.pathSnapping)&&void 0!==s&&s.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),"Empty"===t.type&&t.animations&&l.traverseEntity(e=>{let t=e.dataPatched;if(e instanceof OX&&t.bones&&t.boneInverses){let i=t.bones.map(e=>this.find(e)),n=t.boneInverses.map(e=>(new My).fromArray(e)),r=new XA(i,n);e.bind(r,e.bindMatrix)}else e.matrixAutoUpdate=!0}),l}getCenter(e){let t=[];for(let n=0,r=e.length;n<r;++n){let{id:i,recursive:r}=e[n],a=this.find(i),s=r?a.recursiveBBox:a.singleBBox;t.push(...s.vertices)}let i=new ey;return i.setFromPoints(t),i.getCenter(_0),_0}copyMatrixWorld(e,t){if(null===e)return void t.identity();let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(null===e)return void t.identity();let n=null===(i=this.find(e))||void 0===i?void 0:i.parent;n?t.copy(n.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof qH)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof kY&&e(t.material[i]);else t.material instanceof kY&&e(t.material)})}updateViewPlaneSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.traverseConcreteEntity(n=>{n instanceof FQ&&n.setViewplaneSize(e,t,i)})}initializeSplatViewer(){this.splatViewer=new A0({scene:this}),this.reloadSplats()}reloadSplats(){var e;null===(e=this.splatViewer)||void 0===e||e.loadSplat()}},C0=(e,t)=>{let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},M0=e=>e*(Math.PI/180),T0=e=>e*(180/Math.PI),P0=new Map,D0=e=>{P0.has(e)&&clearTimeout(P0.get(e)),P0.set(e,setTimeout(e,100))},O0=(e,t,i)=>{let n,r=t.split(/[ ,]+/g);for(let a=0;a<r.length;a+=1)n=r[a],e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&e.attachEvent(n,i)},k0=(e,t,i)=>{let n,r=t.split(/[ ,]+/g);for(let a=0;a<r.length;a+=1)n=r[a],e.removeEventListener?e.removeEventListener(n,i):e.detachEvent&&e.detachEvent(n,i)},I0=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),R0=()=>{if(typeof window>"u")return;return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},L0=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},z0=(e,t,i)=>{let n=B0(e);for(let r in n)if(n.hasOwnProperty(r))if("string"==typeof t)n[r]=t+" "+i;else{let e="";for(let n=0,r=t.length;n<r;n+=1)e+=t[n]+" "+i+", ";n[r]=e.slice(0,-2)}return n},B0=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},j0=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},F0=(e,t)=>{if(e.length)for(let i=0,n=e.length;i<n;i+=1)t(e[i]);else t(e)};typeof window<"u"&&(N0="ontouchstart"in window,U0=!!window.PointerEvent,V0=!!window.MSPointerEvent);var N0,U0,V0,W0,H0={start:"mousedown",move:"mousemove",end:"mouseup"},G0={};function q0(){}U0?W0={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:V0?W0={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:N0?(W0={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},G0=H0):W0=H0,q0.prototype.on=function(e,t){var i,n=this,r=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var a=0;a<r.length;a+=1)i=r[a],n._handlers_[i]=n._handlers_[i]||[],n._handlers_[i].push(t);return n},q0.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},void 0===e?i._handlers_={}:void 0===t?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i},q0.prototype.trigger=function(e,t){var i,n=this,r=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var a=0;a<r.length;a+=1)i=r[a],n._handlers_[i]&&n._handlers_[i].length&&n._handlers_[i].forEach(function(e){e.call(n,{type:i,target:n},t)})},q0.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{let i={};for(let n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)?i[n]=t[n]:e.hasOwnProperty(n)&&(i[n]=e[n]);return i})(t.options,e))},q0.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){"function"==typeof i["on"+t]?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},O0(e,W0[t],i._domHandlers_[t]),G0[t]&&O0(e,G0[t],i._domHandlers_[t]),i},q0.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},k0(e,W0[t],i._domHandlers_[t]),G0[t]&&k0(e,G0[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var Y0=q0;function X0(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=X0.id,X0.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}X0.prototype=new Y0,X0.constructor=X0,X0.id=0,X0.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},X0.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{let i=B0(e);for(let n in i)i.hasOwnProperty(n)&&(i[n]=t);return i})("borderRadius","50%"),i=z0("transition","opacity",e),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},j0(n.el,i),"circle"===this.options.shape&&j0(n.back,t),j0(n.front,t),this.applyStyles(n),this},X0.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this},X0.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},X0.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},X0.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},X0.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)},t.options.fadeTime)),t},X0.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=i,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,n={};n.x=!0===i||!1!==i.x?0:t.instance.frontPosition.x,n.y=!0===i||!1!==i.y?0:t.instance.frontPosition.y,t.setPosition(e,n)}return t},X0.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var n=i.options.fadeTime+"ms",r={};r.front=z0("transition",["top","left"],n);var a={front:{}};a.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(r),i.applyStyles(a),i.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(i),i.restCallback()},i.options.fadeTime)},X0.prototype.restCallback=function(){var e=this,t={};t.front=z0("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},X0.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},X0.prototype.computeDirection=function(e){var t,i,n,r=e.angle.radian,a=Math.PI/4,s=Math.PI/2;if(r>a&&r<3*a&&!e.lockX?t="up":r>-a&&r<=a&&!e.lockY?t="left":r>3*-a&&r<=-a&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(i=r>-s&&r<s?"left":"right"),e.lockX||(n=r>0?"up":"down"),e.force>this.options.threshold){var o,l={};for(o in this.direction)this.direction.hasOwnProperty(o)&&(l[o]=this.direction[o]);var c={};for(o in this.direction={x:i,y:n,angle:t},e.direction=this.direction,l)l[o]===this.direction[o]&&(c[o]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+i,e),c.y||this.trigger("plain:"+n,e),c.angle||this.trigger("dir dir:"+t,e)}else this.resetDirection();return e};var Q0=X0;function K0(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=K0.id,K0.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),("static"===i.options.mode||"semi"===i.options.mode)&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let n=getComputedStyle(i.options.zone.parentElement);return n&&"flex"===n.display&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}K0.prototype=new Y0,K0.constructor=K0,K0.id=0,K0.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===e)return t[i];return!1}},K0.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},K0.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}},K0.prototype.createNipple=function(e,t){var i=this,n=i.manager.scroll,r={},a=i.options,s=i.parentIsFlex?n.x:n.x+i.box.left,o=i.parentIsFlex?n.y:n.y+i.box.top;if(e.x&&e.y)r={x:e.x-s,y:e.y-o};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",a.zone.appendChild(l);var c=l.getBoundingClientRect();a.zone.removeChild(l),r=e,e={x:c.left+n.x,y:c.top+n.y}}var h=new Q0(i,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(L0(h.ui.el,r),L0(h.ui.front,h.frontPosition)),i.nipples.push(h),i.trigger("added "+h.identifier+":added",h),i.manager.trigger("added "+h.identifier+":added",h),i.bindNipple(h),h},K0.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},K0.prototype.bindNipple=function(e){var t,i=this,n=function(e,n){t=e.type+" "+n.id+":"+e.type,i.trigger(t,n)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)},K0.prototype.pressureFn=function(e,t,i){var n=this,r=0;clearInterval(n.pressureIntervals[i]),n.pressureIntervals[i]=setInterval(function(){var i=e.force||e.pressure||e.webkitForce||0;i!==r&&(t.trigger("pressure",i),n.trigger("pressure "+t.identifier+":pressure",i),r=i)}.bind(n),100)},K0.prototype.onstart=function(e){var t=this,i=t.options,n=e;e=I0(e),t.updateBox();return F0(e,function(r){t.actives.length<i.maxNumberOfNipples?t.processOnStart(r):n.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(i){if(Object.values(n.touches).findIndex(function(e){return e.identifier===i})<0){var r=[e[0]];r.identifier=i,t.processOnEnd(r)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(r))}),t.manager.bindDocument(),!1},K0.prototype.processOnStart=function(e){var t,i=this,n=i.options,r=i.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},o=i.getOrCreate(r,s);o.identifier!==r&&i.manager.removeIdentifier(o.identifier),o.identifier=r;var l=function(t){t.trigger("start",t),i.trigger("start "+t.id+":start",t),t.show(),a>0&&i.pressureFn(e,t,t.identifier),i.processOnMove(e)};if((t=i.idles.indexOf(o))>=0&&i.idles.splice(t,1),i.actives.push(o),i.ids.push(o.identifier),"semi"!==n.mode)l(o);else{if(!(C0(s,o.position)<=n.catchDistance))return o.destroy(),void i.processOnStart(e);l(o)}return o},K0.prototype.getOrCreate=function(e,t){var i,n=this,r=n.options;return/(semi|static)/.test(r.mode)?(i=n.idles[0])?(n.idles.splice(0,1),i):"semi"===r.mode?n.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):i=n.createNipple(t,e)},K0.prototype.processOnMove=function(e){var t=this,i=t.options,n=t.manager.getIdentifier(e),r=t.nipples.get(n),a=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e)){if(!r)return console.error("Found zombie joystick with ID "+n),void t.manager.removeIdentifier(n);if(i.dynamicPage){var s=r.el.getBoundingClientRect();r.position={x:a.x+s.left,y:a.y+s.top}}r.identifier=n;var o=r.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=r.position.y),i.lockY&&(l.x=r.position.x);var c,h,u=C0(l,r.position),d=((e,t)=>{let i=t.x-e.x,n=t.y-e.y;return T0(Math.atan2(n,i))})(l,r.position),p=M0(d),f=u/o,m={distance:u,position:l};if("circle"===r.options.shape?(c=Math.min(u,o),h=((e,t,i)=>{let n={x:0,y:0};return i=M0(i),n.x=e.x-t*Math.cos(i),n.y=e.y-t*Math.sin(i),n})(r.position,c,d)):(h=((e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)}))(l,r.position,o),c=C0(h,r.position)),i.follow){if(u>o){let e=l.x-h.x,i=l.y-h.y;r.position.x+=e,r.position.y+=i,r.el.style.top=r.position.y-(t.box.top+a.y)+"px",r.el.style.left=r.position.x-(t.box.left+a.x)+"px",u=C0(l,r.position)}}else l=h,u=c;var g=l.x-r.position.x,v=l.y-r.position.y;r.frontPosition={x:g,y:v},i.dataOnly||L0(r.ui.front,r.frontPosition);var y={identifier:r.identifier,position:l,force:f,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:p,degree:d},vector:{x:g/o,y:-v/o},raw:m,instance:r,lockX:i.lockX,lockY:i.lockY};(y=r.computeDirection(y)).angle={radian:M0(180-d),degree:180-d},r.trigger("move",y),t.trigger("move "+r.id+":move",y)}else this.processOnEnd(e)},K0.prototype.processOnEnd=function(e){var t=this,i=t.options,n=t.manager.getIdentifier(e),r=t.nipples.get(n),a=t.manager.removeIdentifier(r.identifier);!r||(i.dataOnly||r.hide(function(){"dynamic"===i.mode&&(r.trigger("removed",r),t.trigger("removed "+r.id+":removed",r),t.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(t.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),t.trigger("end "+r.id+":end",r),t.ids.indexOf(r.identifier)>=0&&t.ids.splice(t.ids.indexOf(r.identifier),1),t.actives.indexOf(r)>=0&&t.actives.splice(t.actives.indexOf(r),1),/(semi|static)/.test(i.mode)?t.idles.push(r):t.nipples.indexOf(r)>=0&&t.nipples.splice(t.nipples.indexOf(r),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[a.id]=a.identifier))},K0.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()},K0.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(e){e.destroy()}),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var Z0=K0;function J0(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=R0(),t.config(e),t.prepareCollections();var i=function(){var e;t.collections.forEach(function(i){i.forEach(function(i){e=i.el.getBoundingClientRect(),i.position={x:t.scroll.x+e.left,y:t.scroll.y+e.top}})})};if(typeof window>"u")return t.collections;O0(window,"resize",function(){D0(i)});var n=function(){t.scroll=R0()};return O0(window,"scroll",function(){D0(n)}),t.collections}J0.prototype=new Y0,J0.constructor=J0,J0.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(e){return!(i=e.get(t))}),i}},J0.prototype.create=function(e){return this.createCollection(e)},J0.prototype.createCollection=function(e){var t=this,i=new Z0(t,e);return t.bindCollection(i),t.collections.push(i),i},J0.prototype.bindCollection=function(e){var t,i=this,n=function(e,n){t=e.type+" "+n.id+":"+e.type,i.trigger(t,n)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)},J0.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},J0.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},J0.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},J0.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t},J0.prototype.onmove=function(e){return this.onAny("move",e),!1},J0.prototype.onend=function(e){return this.onAny("end",e),!1},J0.prototype.oncancel=function(e){return this.onAny("end",e),!1},J0.prototype.onAny=function(e,t){var i,n=this,r="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=I0(t);var a=function(e,t,i){i.ids.indexOf(t)>=0&&(i[r](e),e._found_=!0)};return F0(t,function(e){i=n.getIdentifier(e),F0(n.collections,a.bind(null,e,i)),e._found_||n.removeIdentifier(i)}),!1},J0.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(e){e.destroy()}),e.off()},J0.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var $0=new J0,e1=function(e){return $0.create(e)},t1=new Map,i1=new Map,n1=class{constructor(e,t,i,n){this.data=t;let{audio:r,volume:a,delay:s,loop:o}=t;if(!r)throw new Error("Missing property");let l="string"==typeof r?n.getAudio(r).src:r.data;this.audioPlayer=new XY({src:l,volume:a,delay:s,loop:o}),i1.has(i.uuid)?i1.get(i.uuid).push(this):i1.set(i.uuid,[this]),t1.set(e,this)}playByToggle(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},r1=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=t1.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=i1.get(e);null===t||void 0===t||!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>e.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(e=>e.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...i1.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(e=>{e.forEach(e=>{e.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(e=>{e.forEach(e=>{e.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},a1=class{constructor(e,t,i,n,r){if(this.data=t,this.shared=n,this.condition=r,"play"===t.interaction)this.interaction=new n1(e,t,i,n);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new r1(t)}}dispatchBasic(){if(!1===J1(this.shared,this.condition))return!1;this.interaction instanceof n1?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===J1(this.shared,this.condition))return!1;this.interaction instanceof n1?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(!1===J1(this.shared,this.condition))return!1;this.interaction instanceof n1&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},s1=class{constructor(e,t,i,n){this.data=e,this.page=t,this.shared=i,this.condition=n,this.delay=0,this.emission=e.emission,void 0!==e.delay&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e):this.particleSystem.start()}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e):this.particleSystem.stop()}freeze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e):this.particleSystem.froze()}unFreeze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e):this.particleSystem.unFroze()}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e?this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e):this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze()}}dispatchBasic(){if(!1===J1(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchConditional(){if(!1===J1(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchGameControl(e){if(!1===J1(this.shared,this.condition)||!this.particleSystem)return!1;"start"===e?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},o1=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e);function l1(e,t){if(t=(0,ye.A)({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},t),e=e.trim(),/^data:/i.test(e))return((e,t)=>{let{stripHash:i}=t,n=Em(/^data:([^,]*?),([^#]*?)(?:#(.*))?$/,{type:1,data:2,hash:3}).exec(e);if(!n)throw new Error("Invalid URL: ".concat(e));let{type:r,data:a,hash:s}=n.groups,o=r.split(";");s=i?"":s;let l=!1;"base64"===o[o.length-1]&&(o.pop(),l=!0);let c=(o.shift()||"").toLowerCase(),h=[...o.map(e=>{let[t,i=""]=e.split("=").map(e=>e.trim());return"charset"===t&&(i=i.toLowerCase(),"us-ascii"===i)?"":"".concat(t).concat(i?"=".concat(i):"")}).filter(Boolean)];return l&&h.push("base64"),(h.length>0||c&&"text/plain"!==c)&&h.unshift(c),"data:".concat(h.join(";"),",").concat(l?a.trim():a).concat(s?"#".concat(s):"")})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===n.protocol&&(n.protocol="http:"),t.forceHttps&&"http:"===n.protocol&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,t=0,i="";for(;;){let r=e.exec(n.pathname);if(!r)break;let a=r[0],s=r.index;i+=n.pathname.slice(t,s).replace(/\/{2,}/g,"/"),i+=a,t=s+a.length}i+=n.pathname.slice(t,n.pathname.length).replace(/\/{2,}/g,"/"),n.pathname=i}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch(a){}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=n.pathname.split("/"),i=e[e.length-1];o1(i,t.removeDirectoryIndex)&&(e=e.slice(0,-1),n.pathname=e.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...n.searchParams.keys()])o1(o,t.removeQueryParameters)&&n.searchParams.delete(o);if(!0===t.removeQueryParameters&&(n.search=""),t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch(s){}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let r=e;return e=n.toString(),!t.removeSingleSlash&&"/"===n.pathname&&!r.endsWith("/")&&""===n.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===n.pathname)&&""===n.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var c1=class{constructor(e,t,i,n){let{url:r,context:a}=e;if(this.controlsManager=t,this.shared=i,this.condition=n,!r)throw new Error("Missing property");this.url=r.startsWith("mailto:")?r:l1(r,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=null!==a&&void 0!==a?a:"tab"}dispatch(){var e;if(!1===J1(this.shared,this.condition))return!1;sk?window.location.assign(this.url):("tab"===this.context||rk&&"none"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank","width=".concat(window.innerWidth,", height=").concat(window.innerHeight)):window.open(this.url,"_parent"),null!==(e=this.controlsManager.orbitControls)&&void 0!==e&&e.onPointerUp(fk[0]),fk.splice(0,fk.length))}},h1=class{constructor(e,t,i,n,r){this.data=e,this.page=t,this.controlsManager=i,this.shared=n,this.condition=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=e=>{var t;this.timeoutIdQueue.shift();let i=this.page.scene.find(e);if(void 0===i)return;let n=this.controlsManager.sharedGameControlGlobals.rapierWorld,r=!n||(null===(t=i.dataPatched.physics)||void 0===t?void 0:t.fusedBody);if(i.cloner){for(let e of i.cloner.children){var a;r?(e.playModeVisible=!1,e.rigidBody&&"positioned"===(null===(a=i.dataPatched.physics)||void 0===a?void 0:a.rigidBody)&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),n.removeRigidBody(e.rigidBody),e.rigidBody=void 0),e.bvhGeometry&&(e.bvhGeometry=void 0)):void 0===this.clone||this.clone===e?(e.playModeVisible=!1,e.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),n.removeRigidBody(e.rigidBody),e.rigidBody=void 0)):void 0===e.playModeVisible&&(e.playModeVisible=!0)}(r||void 0===this.clone||!1===this.clone)&&(i.visible=!1,i.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(i.rigidBody.collider(0).handle),n.removeRigidBody(i.rigidBody),i.rigidBody=void 0),i.bvhGeometry&&(i.bvhGeometry=void 0))}else i.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(i.rigidBody.collider(0).handle),n.removeRigidBody(i.rigidBody),i.rigidBody=void 0),i.bvhGeometry&&(i.bvhGeometry=void 0),i.visible=!1;this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=void 0===n?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(e=>void 0!==e.bvhGeometry):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(e=>void 0!==e.rigidBody),i.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(!1===J1(this.shared,this.condition))return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()}dispatchFromStart(){if(!1===J1(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},u1=class{constructor(e,t,i,n,r){this.data=e,this.page=t,this.shared=i,this.eventManager=n,this.condition=r,this.shared=i}dispatch(){var e;if(!1===J1(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),D1(this.page,this.shared,!0),this.eventManager.reset(),null!==(e=this.eventManager.controlsManager.gameControl)&&void 0!==e&&e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},1e3*(null!==(e=this.data.delay)&&void 0!==e?e:0))}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}};function d1(e,t,i,n){let r=[];if(!("geometry"in i))return r;let a=e.geometry.userData.parameters,s="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof BX){let t=function(e,t,i,n){var r;if(void 0===i.scaleBaked)return;let a=(null!==(r=t.scaleBaked)&&void 0!==r?r:e.data.geometry.scaleBaked).map(e=>{var t;return"string"==typeof e?Number(null!==(t=n.getVariable(e))&&void 0!==t?t:0):e}),s=i.scaleBaked.map(e=>{var t;return"string"==typeof e?Number(null!==(t=n.getVariable(e))&&void 0!==t?t:0):e});if(bL.isEqual(a,s))return;let o=[];return o.push({update:t=>{e.updateGeometryInteractions({scaleBaked:[wv.lerp(a[0],s[0],t),wv.lerp(a[1],s[1],t),wv.lerp(a[2],s[2],t)]},n),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:a},n),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:s},n),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),o}(e,s,o,n);t&&r.push(...t)}else{let t={};if(Object.assign(t,JO(a,Ez),JO(s,Ez)),Ez.forEach(e=>{let i=hF(e,t,s,o,n);i&&r.push(i)}),e instanceof m$){Object.assign(t,{extrusion:(0,ye.A)({},a.extrusion)});let e=function(e,t,i,n){var r;if(!i.extrusion)return;let a=e.extrusion,s=null!==(r=t.extrusion)&&void 0!==r?r:{},o=i.extrusion,l=[];return pz.forEach(e=>{let t=hF(e,a,s,o,n);t&&l.push(t)}),l}(t,s,o,n);e&&r.push(...e)}r.length&&r.push({update:i=>{e.updateGeometryInteractions(t,n),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:i=>{e.updateGeometryInteractions(t,n),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:i=>{e.updateGeometryInteractions(t,n),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return r}function p1(e,t,i,n){let r=[];if(void 0!==i.intensity){let a=nF("intensity",e,t,i,n);a&&r.push(a)}if(void 0!==i.color){let a=function(e,t,i,n,r){let a=i[e]?i[e]:void 0,s=n[e];if(!s)return;let o=t[e],l=a?"string"==typeof a?r.getColor(a).clone():(new Fv).setRGB(a.r,a.g,a.b):o.clone(),c="string"==typeof s?r.getColor(s).clone():(new Fv).setRGB(s.r,s.g,s.b);if(l.equals(c))return;let h=o.clone();return{update:i=>{var n,r;h.lerpColors(l,c,i),null===(n=t[e])||void 0===n||null===(r=n.copy)||void 0===r||r.call(n,h)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}("color",e,t,i,n);a&&r.push(a)}return r}function f1(e,t,i,n){let r=[],a=OY(i,n)||!!t.layers&&OY(t,n);r.push(function(e,t){return{update:()=>{e.transparent=t}}}(e,a));for(let c of e.layers){var s,o,l;let e=null===(s=t.layers)||void 0===s?void 0:s.data(c.uuid),a=i.layers.data(c.uuid);if(!a||"light"!==c.type&&(null!==(o=c.visible)&&void 0!==o&&!o||null!==(l=a.visible)&&void 0!==l&&!l))continue;let h=c.getNames().filter(e=>!az.some(t=>e.includes(t)));for(let t of h)try{let i,s=c.getValue(t);if("colors"===t)i=w1(c,e,a,t);else if(Array.isArray(s))"steps"===t&&(i=x1(c,e,a,t));else if("number"==typeof s)i=m1(c,e,a,t,n);else{if("boolean"==typeof s)continue;s instanceof Av?i=g1(c,e,a,t):s instanceof Zv?i=v1(c,e,a,t,n):s instanceof Zj?i=b1(c,e,a,t,n):s instanceof Fv?i=y1(c,e,a,t,n):"isTexture"in s&&(i=A1(c,e,a,t))}i&&(Array.isArray(i)?r.push(...i):r.push(i))}catch(Y6){console.error("lerpMaterial: unexpected material layer for ".concat(t),Y6)}}return r}function m1(e,t,i,n,r){var a,s;if(!e.hasValue(n)||!(n in i))return;let o=t?t[n]:e.getValue(n),l=i[n],c="string"==typeof o?Number(null!==(a=r.getVariable(o))&&void 0!==a?a:0):o,h="string"==typeof l?Number(null!==(s=r.getVariable(l))&&void 0!==s?s:0):l;return c!==h?{update:t=>{e.setValue(n,wv.lerp(c,h,t))},start:()=>{e.setValue(n,c)},end:()=>{e.setValue(n,h)}}:void 0}function g1(e,t,i,n){if(!e.hasValue(n)||!(n in i))return;let r=e.getValue(n),a=t?(new Av).fromArray(t[n]):r.clone(),s=(new Av).fromArray(i[n]);return a.equals(s)?void 0:{update:e=>{r.lerpVectors(a,s,e)},start:()=>{r.copy(a)},end:()=>{r.copy(s)}}}function v1(e,t,i,n,r){if(!e.hasValue(n)||!(n in i))return;let a=e.getValue(n),s=t?t[n]:void 0,o=i[n],l=s?aF(new Zv,s,r):a.clone(),c=aF(new Zv,o,r);return l.equals(c)?void 0:{update:e=>{a.lerpVectors(l,c,e)},start:()=>{a.copy(l)},end:()=>{a.copy(c)}}}function y1(e,t,i,n,r){if(!e.hasValue(n)||!(n in i))return;let a=t?t[n]:void 0,s=i[n],o=e.getValue(n),l=a?"string"==typeof a?r.getColor(a).clone():(new Fv).setRGB(a.r,a.g,a.b):o.clone(),c="string"==typeof s?r.getColor(s).clone():(new Fv).setRGB(s.r,s.g,s.b);if(l.equals(c))return;let h=o.clone();return{update:t=>{e.getValue(n)!==h&&e.setValue(n,h),h.lerpColors(l,c,t)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function b1(e,t,i,n,r){if(!e.hasValue(n)||!(n in i))return;let a=t?t[n]:void 0,s=i[n],o=e.getValue(n),l=a?"string"==typeof a?r.color(a).clone():(new Fv).setRGB(a.r,a.g,a.b):o.clone(),c="string"==typeof s?r.getColor(s).clone():new Zj(s.r,s.g,s.b,s.a);if(l.equals(c))return;let h=o.clone();return{update:t=>{e.getValue(n)!==h&&e.setValue(n,h),h.lerpColors(l,c,t)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function x1(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(!e.hasValue(n)||!(n in i))return;let r=[],a=e.getValue(n),s=t?t[n]:a,o=i[n];return VO(s,o)||r.push({update:t=>{let i=[...a];for(let e=0;e<a.length;++e){let n=s[e],r=o[e];i[e]=wv.lerp(n,r,t)}e.setValue(n,i)},start:()=>{e.setValue(n,s)},end:()=>{e.setValue(n,o)}}),r.length?r:void 0}function w1(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"colors";if(!e.hasValue(n)||!(n in i))return;let r=[],a=e.getValue(n),s=t?t[n]:a.map(e=>e.toArray()),o=i[n];for(let l=0;l<a.length;++l){let e=[...s[l]],t=[...o[l]];xL.isEqual(e,t)||r.push({update:i=>{a[l].fromArray(xL.lerp(e,t,i))},start:()=>{a[l].fromArray(e)},end:()=>{a[l].fromArray(t)}})}return r.length?r:void 0}function A1(e,t,i){var n,r,a,s,o,l;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"texture";if(!e.hasValue(c)||!(c in i))return;let h=e.getNode("rotation"),u=null!==(n=null===t||void 0===t||null===(r=t[c])||void 0===r?void 0:r.rotation)&&void 0!==n?n:0,d=null!==(a=null===(s=i[c])||void 0===s?void 0:s.rotation)&&void 0!==a?a:0;if(h&&u!==d)return{update:e=>{h.value=wv.lerp(u,d,e)*wv.DEG2RAD},start:()=>{h.value=u*wv.DEG2RAD},end:()=>{h.value=d*wv.DEG2RAD}};let p=e.getNode("mat");if(!p)return;let f=t?t[c]:p,m=i[c],g=[...f.repeat],v=[...f.offset],y=[...m.repeat],b=[...m.offset],x=null!==(o=f.rotation)&&void 0!==o?o:0,w=null!==(l=m.rotation)&&void 0!==l?l:0;return yL.isEqual(g,y)&&yL.isEqual(v,b)&&x===w?void 0:{update:e=>{p.repeat=yL.lerp(g,y,e),p.offset=yL.lerp(v,b,e),p.rotation=wv.lerp(x,w,e),p.updateMatrix()},start:()=>{p.repeat=[...g],p.offset=[...v],p.rotation=x,p.updateMatrix()},end:()=>{p.repeat=[...y],p.offset=[...b],p.rotation=w,p.updateMatrix()}}}function S1(e,t,i,n,r,a,s){var o,l,c;if("colors"===e)null===(o=w1(t,i,n,e))||void 0===o||o.forEach(e=>e.update(r));else if(Array.isArray(a))"steps"===e&&(null===(l=x1(t,i,n,e))||void 0===l||l.forEach(e=>e.update(r)));else if("number"==typeof a)null===(c=m1(t,i,n,e,s))||void 0===c||c.update(r);else{var h,u,d,p,f;if("boolean"==typeof a)return;a instanceof Av?null===(h=g1(t,i,n,e))||void 0===h||h.update(r):a instanceof Zv?null===(u=v1(t,i,n,e,s))||void 0===u||u.update(r):a instanceof Zj&&s?null===(d=b1(t,i,n,e,s))||void 0===d||d.update(r):a instanceof Fv&&s?null===(p=y1(t,i,n,e,s))||void 0===p||p.update(r):"isTexture"in a&&(null===(f=A1(t,i,n,e))||void 0===f||f.update(r))}}var _1=new Zv,E1=new By;function C1(e,t,i,n,r){var a,s,o,l,c,h,u,d,p,f,m,g,v,y,b,x,w,A;let S,_,E,C,M,T,P,D,O=[];if(e instanceof mJ?(S=lF("position",e,t,i,r),S&&O.push(S),E=nF("rotation",e,t,i,r),E&&O.push(E),C=lF("shear",e,t,i,r),C&&O.push(C)):(D={slide:null!==(a=null!==(s=null!==(o=null===(l=t.pathSnapping)||void 0===l?void 0:l.slide)&&void 0!==o?o:null===(c=e.updatedPathSnapping)||void 0===c?void 0:c.slide)&&void 0!==s?s:null===(h=e.dataPatched.pathSnapping)||void 0===h?void 0:h.slide)&&void 0!==a?a:0,offset:null!==(u=null!==(d=null!==(p=null===(f=t.pathSnapping)||void 0===f?void 0:f.offset)&&void 0!==p?p:null===(m=e.updatedPathSnapping)||void 0===m?void 0:m.offset)&&void 0!==d?d:null===(g=e.dataPatched.pathSnapping)||void 0===g?void 0:g.offset)&&void 0!==u?u:0},T=nF("slide",D,null!==(v=null!==(y=t.pathSnapping)&&void 0!==y?y:e.updatedPathSnapping)&&void 0!==v?v:e.dataPatched.pathSnapping,null!==(b=i.pathSnapping)&&void 0!==b?b:e.dataPatched.pathSnapping,r),T&&O.push(T),P=nF("offset",D,null!==(x=null!==(w=t.pathSnapping)&&void 0!==w?w:e.updatedPathSnapping)&&void 0!==x?x:e.dataPatched.pathSnapping,null!==(A=i.pathSnapping)&&void 0!==A?A:e.dataPatched.pathSnapping,r),P&&O.push(P),!T&&!P&&(S=sF("position",e,t,i,r),S&&O.push(S),_=sF("scale",e,t,i,r),_&&O.push(_),E=function(e,t,i,n,r){var a;let s=null!==t&&void 0!==t&&t.rotation?t.rotation.map(e=>{var t;return("string"==typeof e?Number(null!==(t=r.getVariable(e))&&void 0!==t?t:0):e)*wv.DEG2RAD}):void 0,o=null===(a=i.rotation)||void 0===a?void 0:a.map(e=>{var t;return("string"==typeof e?Number(null!==(t=r.getVariable(e))&&void 0!==t?t:0):e)*wv.DEG2RAD});if(!o)return;let l=s?(new Zv).fromArray(s):(new Zv).setFromEuler(e.rotation),c=(new Zv).fromArray(o);if(l.equals(c))return;let h=_1.subVectors(c,l);if(n&&h.toArray().every(e=>Math.abs(e)<2*Math.PI)){let t=(new Kv).setFromEuler(E1.setFromVector3(l)),i=(new Kv).setFromEuler(E1.setFromVector3(c));return{update:n=>{!function(e,t,i,n){if(0===n)return i.copy(e);if(1===n)return i.copy(t);let r=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(r>=1)return i.copy(e);let a=1-r*r;if(a<=Number.EPSILON){let r=1-n;return i.w=r*e.w+n*t.w,i.x=r*e.x+n*t.x,i.y=r*e.y+n*t.y,i.z=r*e.z+n*t.z,i.normalize(),i}let s=Math.sqrt(a),o=Math.atan2(s,r),l=Math.sin((1-n)*o)/s,c=Math.sin(n*o)/s;i.w=e.w*l+t.w*c,i.x=e.x*l+t.x*c,i.y=e.y*l+t.y*c,i.z=e.z*l+t.z*c}(t,i,e.quaternion,n)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(c)}}}return{update:t=>{_1.lerpVectors(l,c,t),e.rotation.setFromVector3(_1)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(c)}}}(e,t,i,n,r),E&&O.push(E),M=function(e,t,i,n){let r=i[e]?i[e]:void 0,a=n[e];if(!a)return;let s=t[e],o=r?(new My).fromArray(r):s.clone(),l=new Zv,c=new Kv,h=new Zv;o.decompose(l,c,h);let u=(new My).fromArray(a),d=new Zv,p=new Kv,f=new Zv;return u.decompose(d,p,f),o.equals(u)?void 0:{update:e=>{iF.slerpQuaternions(c,p,e),eF.lerpVectors(l,d,e),tF.lerpVectors(h,f,e),s.compose(eF,iF,tF)},start:()=>{s.compose(l,c,h)},end:()=>{s.compose(d,p,f)}}}("hiddenMatrix",e,t,i),M&&O.push(M))),S||_||E||M||T||P){let i=e instanceof mJ?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{var i;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),null!==(i=e.parent)&&void 0!==i&&i.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),qQ(e)&&YQ(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,D))};O.push({update:i,start:i,end:i})}return O}function M1(e,t,i,n,r){let a,s,o,l,c,h,u,d,p,f,m,g,v,y,b,x=[];if("width"in e&&(a=nF("width",e,t,i,r),a&&x.push(a)),"height"in e&&(s=nF("height",e,t,i,r),s&&x.push(s)),e instanceof UJ||e instanceof qJ){let n=(0,ye.A)({},t.fill),a=(0,ye.A)({},i.fill);void 0!==n.enabled&&n.enabled!==a.enabled&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.fill.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,color:(0,ye.A)((0,ye.A)({},n.color),{},{a:0})}),a.enabled||Object.assign(a,{enabled:!0,color:(0,ye.A)((0,ye.A)({},a.color),{},{a:0})})),o=cF("color",e.fill,n,a,r),o&&x.push(o)}if(e instanceof UJ){let n=(0,ye.A)({},t.stroke),a=(0,ye.A)({},i.stroke);(n.enabled||a.enabled)&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.stroke.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,color:(0,ye.A)((0,ye.A)({},n.color),{},{a:0})}),a.enabled||Object.assign(a,{enabled:!0,color:(0,ye.A)((0,ye.A)({},a.color),{},{a:0})})),l=cF("color",e.stroke,n,a,r),l&&x.push(l),c=nF("thickness",e.stroke,n,a,r),c&&x.push(c)}if(e instanceof UJ){let n=(0,ye.A)({},t.dropShadow),a=(0,ye.A)({},i.dropShadow);(n.enabled||a.enabled)&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.dropShadow.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,color:(0,ye.A)((0,ye.A)({},n.color),{},{a:0})}),a.enabled||Object.assign(a,{enabled:!0,color:(0,ye.A)((0,ye.A)({},a.color),{},{a:0})})),h=cF("color",e.dropShadow,n,a,r),h&&x.push(h),u=nF("blurRadius",e.dropShadow,n,a,r),u&&x.push(u),p=nF("spread",e.dropShadow,n,a,r),p&&x.push(p),d=lF("offset",e.dropShadow,n,a,r),d&&x.push(d)}if(e instanceof UJ){let n=(0,ye.A)({},t.innerShadow),a=(0,ye.A)({},i.innerShadow);(n.enabled||a.enabled)&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.innerShadow.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,color:(0,ye.A)((0,ye.A)({},n.color),{},{a:0})}),a.enabled||Object.assign(a,{enabled:!0,color:(0,ye.A)((0,ye.A)({},a.color),{},{a:0})})),f=cF("color",e.innerShadow,n,a,r),f&&x.push(f),m=nF("blurRadius",e.innerShadow,n,a,r),m&&x.push(m),v=nF("spread",e.innerShadow,n,a,r),v&&x.push(v),g=lF("offset",e.innerShadow,n,a,r),g&&x.push(g)}if(e instanceof UJ||e instanceof qJ){let n=(0,ye.A)({},t.backgroundBlur),a=(0,ye.A)({},i.backgroundBlur);(n.enabled||a.enabled)&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.backgroundBlur.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,radius:0}),a.enabled||Object.assign(a,{enabled:!0,radius:0})),y=nF("radius",e.backgroundBlur,n,a,r),y&&x.push(y)}if(e instanceof UJ){let n=(0,ye.A)({},t.layerBlur),a=(0,ye.A)({},i.layerBlur);(n.enabled||a.enabled)&&(x.push(function(e,t){return{update:()=>{e instanceof UJ&&(e.layerBlur.enabled=t)}}}(e,!0)),n.enabled||Object.assign(n,{enabled:!0,radius:0}),a.enabled||Object.assign(a,{enabled:!0,radius:0})),b=nF("radius",e.layerBlur,n,a,r),b&&x.push(b)}if(e instanceof qJ||e instanceof WJ){let n=rF("cornerRadius",e,t,i,r);n&&x.push(n)}return x}function T1(e,t,i,n,r){let a=[];return e.data.visible&&a.push(...C1(e,t,i,r,n)),e instanceof mJ?a.push(...M1(e,t,i,0,n)):(e.data.visible&&a.push(...fF(e,t,i,n)),e instanceof qH?(e instanceof OX&&e.data.visible&&a.push(...d1(e,t,i,n)),e.data.visible&&a.push(...function(e,t,i,n){let r=[];if(Array.isArray(e.material)){if(!("materials"in i)||!i.materials)return r;let a="materials"in t&&t.materials?t.materials:[],s=i.materials;e.material.forEach((e,t)=>{var i;if(!s[t])return;let o=null!==(i=a[t])&&void 0!==i?i:{},l=s[t];"string"==typeof o||"string"==typeof l||r.push(...f1(e,o,l,n))})}else{if(!("material"in i)||!i.material)return r;let a="material"in t&&t.material?t.material:{},s=i.material;if("string"==typeof a||"string"==typeof s)return r;r.push(...f1(e.material,a,s,n))}return r}(e,t,i,n))):WQ.is(e)?e.data.visible&&a.push(...p1(e,t,i,n)):e instanceof FQ&&a.push(...function(e,t,i,n){var r,a,s,o;let l=[],c="OrthographicCamera"===e.cameraType?null===(r=t.orthographic)||void 0===r?void 0:r.zoom:null===(a=t.perspective)||void 0===a?void 0:a.zoom,h="OrthographicCamera"===e.cameraType?null===(s=i.orthographic)||void 0===s?void 0:s.zoom:null===(o=i.perspective)||void 0===o?void 0:o.zoom;if(void 0!==h){let t=null!==c&&void 0!==c?c:e.zoom,i=h;t!==i&&l.push({update:n=>{e.zoom=wv.lerp(t,i,n),e.updateProjectionMatrix()},start:()=>{e.zoom=t,e.updateProjectionMatrix()},end:()=>{e.zoom=i,e.updateProjectionMatrix()}})}if(void 0!==i.targetOffset){let r=nF("targetOffset",e,t,i,n);r&&l.push(r)}return l}(e,t,i,n))),a.length?{update:e=>{a.forEach(t=>t.update(e))},start:e=>{a.forEach(t=>{var i;return null===(i=t.start)||void 0===i?void 0:i.call(t,e)})},end:e=>{a.forEach(t=>{var i;return null===(i=t.end)||void 0===i?void 0:i.call(t,e)})}}:void 0}var P1=new Zv;function D1(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],a=i=>{let n=i.data;delete i.states,i.currentState=null,i.reversibleToState=null,i.currentTransitionEvent=null;for(let e of n.states){let t=(0,ye.A)({},e.data);i.states||(i.states={}),i.states[e.id]=TB.patch(n,t)}k1(e.scene,i,null,t,void 0!==n.events.find(e=>"Follow"===e.data.type||"LookAt"===e.data.type)),O1(e)};e.scene.traverse2D(a),e.traverseChildren(i=>{var s,o,l,c,h,u;if(n&&(null!==(s=i.rigidBody)&&void 0!==s&&s.setTranslation(i.position0,!0),null!==(o=i.rigidBody)&&void 0!==o&&o.setRotation(i.rotation0,!0),null!==(l=i.rigidBody)&&void 0!==l&&l.setLinvel(P1,!0),null!==(c=i.rigidBody)&&void 0!==c&&c.setAngvel(P1,!0)),!$N.is(i))return;let d=i.uuid,p=i.data;if(delete i.states,i.uuid===CL)return;let f=!1;r.some(t=>{var i;return null===(i=e.scene.find(d))||void 0===i?void 0:i.isDescendantOf(t)})?f=!0:!0===(null===(h=p.physics)||void 0===h?void 0:h.fusedBody)&&"dynamic"===p.physics.rigidBody&&r.push(d),i.data=p,i.currentState=null,i.reversibleToState=null,i.currentTransitionEvent=null;for(let t of p.states){let n=(0,ye.A)({},t.data);!0===e.data.globalPhysics.usePhysics&&p.physics&&("dynamic"===p.physics.rigidBody||f)&&(void 0!==t.data.position&&delete n.position,void 0!==t.data.rotation&&delete n.rotation,void 0!==t.data.hiddenMatrix&&delete n.hiddenMatrix),i.states||(i.states={}),i.states[t.id]=jz.patch(p,n)}k1(e.scene,i,null,t,void 0!==p.events.find(e=>"Follow"===e.data.type||"LookAt"===e.data.type)),i instanceof A$&&i.frame&&(i.frame.traverse(e=>a(e)),null===(u=i.uiCanvas)||void 0===u||u.applySize())}),O1(e),e.frame&&(e.frame.traverse(e=>a(e)),null===(i=e.uiCanvas)||void 0===i||i.applySize())}function O1(e){e.traverseEntity(t=>{for(let i of t.data.events){let t=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":t.push(...i.data.actions);break;case"GameControl":for(let e of Object.values(i.data.gameActions))t.push(...e);break;case"DragDrop":t.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":t.push(...i.data.inActions,...i.data.outActions)}for(let i of t)if("Create"===i.data.type&&"Yes"===i.data.hideBase){let t=e.scene.find(i.data.object);t&&(t.visible=!1)}}})}function k1(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t instanceof OX&&!(t instanceof q$)&&t.removeInteractionGeometry(n),t instanceof mJ?t.changeSelectedState(i,{shared:n},r):t.changeSelectedState(i,{scene:e,shared:n},r),t instanceof OX&&t.updateGeometryGroupsIfNeeded(),t instanceof FQ&&t.updateCameraState(t.dataPatched,{scene:e,shared:n}),!(t instanceof mJ)){if(t.cloner)for(let e of t.cloner.children)e.playModeVisible=void 0;t.updateVisible()}}function I1(e){let t;if(5===e.easing){let{control1:i,control2:n}=e;t="cubicBezier(\n\t\t\t".concat(i[0],", ").concat(i[1],", ").concat(n[0],", ").concat(n[1],"\n\t\t)")}else if(6===e.easing){let{mass:i,stiffness:n,damping:r,velocity:a}=e;t="spring( ".concat(i,", ").concat(n,", ").concat(r,", ").concat(a," )")}else{let i;switch(e.easing){case 0:default:i=OL.linear;break;case 1:i=OL.ease;break;case 2:i=OL.easeIn;break;case 3:i=OL.easeOut;break;case 4:i=OL.easeInOut}let[n,r,a,s]=i;t="cubicBezier( ".concat(n,", ").concat(r,", ").concat(a,", ").concat(s," )")}return{duration:Math.max(e.duration,1e-4),easing:t}}function R1(e){let t={delay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return"alternate"===t.direction&&(t.delay/=2,t.endDelay/=2,"start"===e.delayDirection?(t.pingPongDelayCorrection=t.delay,"number"==typeof t.loop&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):"end"===e.delayDirection?"number"==typeof t.loop&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):"start-end"===e.delayDirection&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var L1={type:"beginState"},z1={type:"completeState",isfromEntity:!1},B1=class{constructor(e,t,i,n,r,a){if(this.object=e,this.data=n,this.sharedAssets=r,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),0===this.targets.t||1===this.targets.t?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let e=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=e,this.object.dispatchEvent({type:"beginState",state:e}),this.object instanceof mJ||this.object.traverseEntity(e=>{e!==this.object&&e instanceof FQ&&e.dispatchEvent(L1)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let e=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=e,this.object.dispatchEvent({type:"completeState",state:e}),this.object instanceof mJ||this.object.traverseEntity(e=>{e!==this.object&&e instanceof FQ&&e.dispatchEvent(z1)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=T1(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},void 0===t){let e=F1(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!e)throw new Error("Missing property");this.from=e}else{let e=F1(this.object,t);if(!e)throw new Error("Missing property");this.from=e}if(void 0===i)throw new Error("Missing property");{let e=F1(this.object,i);if(!e)throw new Error("Missing property");this.to=e}this.useCurrentState=void 0===t||void 0===i,this.params=(0,ye.A)((0,ye.A)((0,ye.A)({targets:this.targets,t:1,autoplay:!1},R1(n)),I1(n)),{},{change:this.onChange}),this.callback=T1(this.object,void 0===t?{}:this.from.data,void 0===i?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},j1=class extends ov{constructor(e,t,i,n,r){var a,s,o;if(super(),this.eventType=e,this.data=t,this.page=i,this.shared=n,this.condition=r,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var e;"normal"!==this.data.tweens[0].data.direction&&(this.toggleIsForward=!this.toggleIsForward),!1!==this.timelineNeedsRebuild&&(null!==(e=this.timeline)&&void 0!==e&&e.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let l=null!==(a=null!==(s=this.page.scene.find(t.object))&&void 0!==s?s:null===(o=this.page.uiCanvas)||void 0===o?void 0:o.find(t.object))&&void 0!==a?a:this.page.scene.find2DInUIObjects(t.object);if(!l)throw new Error("Missing property");if(!l.states)throw new Error("Missing property");if(this.object=l,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay="start-once"===t.tweens[0].data.delayDirection?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return!1===(null===(e=this.timeline)||void 0===e?void 0:e.paused)}get changeBegan(){var e;return null!==(e=this.tweens.some(e=>e.changeBegan))&&void 0!==e&&e}init(){this.initialCurrentState=F1(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return"Toggle"===this.data.runMode&&ZR(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline(){var e;let{isForward:t=!0,needsRebuild:i=!1,isRebuild:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var r;let e=R1(this.data.tweens[0].data);n&&"number"==typeof e.loop&&e.loop--,null!==(r=this.timeline)&&void 0!==r&&r.pause(),this.timeline=Kj.timeline((0,ye.A)((0,ye.A)({autoplay:!1},e),!0===e.loop||e.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}));let c=this.tweens.findIndex(e=>null===e||void 0===e?void 0:e.changeBegan);if(!0===i&&(this.timelineNeedsRebuild=!0),t){let t=-1===c?0:c;for(let i=t;i<this.data.tweens.length-1;i++){var a,s;let n,r=this.data.tweens[i],o=this.data.tweens[i+1];i!==t||!0!==this.object.wasMovedByUser&&!0!==(null===(a=this.object.previousAction)||void 0===a?void 0:a.changeBegan)?n=void 0===r.data.state?this.currentState:r.data.state:(n=void 0,this.object instanceof FQ&&(this.object.wasMovedByUser=!1));let l=new B1(this.object,n,void 0===o.data.state?this.currentState:o.data.state,o.data,this.shared,null!==(s=this.data.allowSlerp)&&void 0!==s&&s);-1!==c&&i===t&&Object.assign(l.params,{startOnceDelay:0}),this.tweens[i]=l,this.timeline.add(l.params,this.timeline.duration+(i===t?e.delay:0))}this.timeline.duration+=e.endDelay}else{let t=-1===c?this.data.tweens.length-1:c+1;for(let i=t;i>0;i--){var o,l;let n,r=this.data.tweens[i],a=this.data.tweens[i-1];i!==t||!0!==this.object.wasMovedByUser&&!0!==(null===(o=this.object.previousAction)||void 0===o?void 0:o.changeBegan)?n=void 0===r.data.state?this.currentState:r.data.state:(n=void 0,this.object instanceof FQ&&(this.object.wasMovedByUser=!1));let s=new B1(this.object,n,void 0===a.data.state?this.currentState:a.data.state,r.data,this.shared,null!==(l=this.data.allowSlerp)&&void 0!==l&&l);-1!==c&&i===t&&Object.assign(s.params,{startOnceDelay:0}),this.tweens[i-1]=s,this.timeline.add(s.params,this.timeline.duration+(i===t?e.endDelay:0))}this.timeline.duration+=e.delay}}catch(u6){u6 instanceof Error&&console.error(u6.message)}!0===(null===(e=this.object.previousAction)||void 0===e?void 0:e.playing)&&this.object.previousAction.pause(),this.object.previousAction=this}play(){var e;if(!1===J1(this.shared,this.condition)||ZR(this.eventType)&&"Once"===this.data.runMode&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;null===(e=this.startTimeout)||void 0===e||e.pause();let t=R1(this.data.tweens[0].data).pingPongDelayCorrection;Kj({targets:{},duration:this.startOnceDelay+t,easing:"linear",complete:()=>{try{this.buildTimeline(),this.timeline.play()}catch(h6){h6 instanceof Error&&console.error(h6.message)}}})}pause(){var e,t;null!==(e=this.timeline)&&void 0!==e&&e.pause(),null!==(t=this.startTimeout)&&void 0!==t&&t.pause(),this.tweens=Array(this.data.tweens.length-1),delete this.startTimeout}stop(){this.pause();let e=void 0===this.data.tweens[0].data.state?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof mJ?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(!1===J1(this.shared,this.condition))return!1;void 0===this.timeline&&this.buildTimeline(),null===(t=this.timeline)||void 0===t||t.seek(e*this.timeline.duration,!0)}toggle(e){var t,i;if(!1===J1(this.shared,this.condition))return!1;null!==(t=this.startTimeout)&&void 0!==t&&t.pause(),this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.playing?(null!==(i=this.timeline)&&void 0!==i&&i.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):Kj({targets:{},duration:this.startOnceDelay,easing:"linear",complete:()=>{var e;null!==(e=this.timeline)&&void 0!==e&&e.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()}})}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function F1(e,t){var i;let n,r;if("string"==typeof t?(n=t,r=null===(i=e.states)||void 0===i?void 0:i[n]):null===t&&(n=null,r=e.data),void 0!==n&&void 0!==r)return{id:n,data:r}}var N1={type:"beginState"},U1={type:"completeState",isfromEntity:!1},V1={type:"requestRender"},W1=class extends ov{constructor(e,t,i,n){super(),this.data=e,this.page=t,this.shared=i,this.condition=n,this.toggleIsForward=!1,this.posStart=new Zv,this.posEnd=new Zv,this.qStart=new Kv,this.qEnd=new Kv,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(){if(!this.data.animate)return;let e=this.page.scene.find(this.data.targetCamera);if(!e||!e.visible)throw new ReferenceError("Target camera not founded or not visible");let t={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=Kj((0,ye.A)((0,ye.A)({targets:t,t:1},I1(this.data)),{},{update:()=>{0===t.t&&("Toggle"!==this.data.runMode||this.toggleIsForward?(this.posEnd.copy(e.position),this.qEnd.copy(e.quaternion),this.zoomEnd=e.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(e.uuid)):this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)),this.page.activeCamera.dispatchEvent(N1));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,t.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,t.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*t.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(V1),1===t.t&&i.dispatchEvent(U1)}}))}switchCamera(e){let t=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),t.dispatchEvent({type:"cameraChange",camera:i})}play(){if(!1===J1(this.shared,this.condition))return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),null===(e=this.animation)||void 0===e||e.play()):this.switchCamera(this.data.targetCamera)},1e3*this.data.delay)}catch(e){}}pause(){var e;null!==(e=this.animation)&&void 0!==e&&e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){if(!1===J1(this.shared,this.condition))return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{var t,i;this.playing?(null!==(t=this.animation)&&void 0!==t&&t.pause(),this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.buildAnimation(!0),null===(i=this.animation)||void 0===i||i.play()):this.timeoutId=window.setTimeout(()=>{var t,i;this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.data.animate?(null!==(t=this.animation)&&void 0!==t&&t.pause(),this.buildAnimation(),null===(i=this.animation)||void 0===i||i.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(U1),this.page.activeCamera.dispatchEvent(V1))},1e3*this.data.delay)}catch(n){}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},H1=class extends ov{constructor(e,t,i,n,r){super(),this.id=e,this.data=t,this.scene=i,this.sharedAssets=n,this.eventType=r,this.toggleIsForward=!1,this._finished=!1,this.hasPlayedOnce=!1,this._shouldForwardLoop=!1,this._shouldPauseOnNextLoopComplete=!1,this._onLoopComplete=()=>{this._shouldPauseOnNextLoopComplete&&(this.timeline.pause(),this._shouldPauseOnNextLoopComplete=!1)};try{let e=R1(this.data);"number"==typeof e.loop&&e.loop--,this.timeline=Kj.timeline((0,ye.A)((0,ye.A)({},e),{},{autoplay:!1})),this._shouldForwardLoop=!0===e.loop||"number"==typeof e.loop&&e.loop>1;let t=this.sharedAssets.data.timelineAnimations[this.data.timeline].mapping;Object.entries(t).forEach(e=>{let[t,i]=e,n=this.scene.find(t);if(!n)return;let r=n.data.timelineAnimations[i];if(!r)return;let a=dF.addKeyframesToTimeline(n,(0,ye.A)({},r),function(e,t){return{position(t){Object.assign(e.position,t),(void 0!==t.x||void 0!==t.y||void 0!==t.z)&&(e.updateMatrix(),e.resetBBoxNeedsUpdate(),e.dispatchEvent({type:"requestRender"}))},rotation(t){let i=Object.keys(t)[0];e.rotation[i]=t[i]*wv.DEG2RAD,(void 0!==t.x||void 0!==t.y||void 0!==t.z)&&(e.updateMatrix(),e.resetBBoxNeedsUpdate(),e.dispatchEvent({type:"requestRender"}))},scale(t){Object.assign(e.scale,t),(void 0!==t.x||void 0!==t.y||void 0!==t.z)&&(e.updateMatrix(),e.resetBBoxNeedsUpdate(),e.dispatchEvent({type:"requestRender"}))},shapeSize(i){e instanceof OX&&(e.userData.value=(0,ye.A)((0,ye.A)({},e.userData.value),i),(void 0!==i.x||void 0!==i.y||void 0!==i.z)&&(e.updateGeometryInteractions({width:e.userData.value.x,height:e.userData.value.y,depth:e.userData.value.z},t),e.resetBBoxNeedsUpdate(),e.invalidateDownstreamBooleanData(),e.dispatchEvent({type:"requestRender"})))},material(i,n,r){r&&(Object.entries(r).forEach(e=>{let[i,{start:r,end:a,t:s}]=e,o=n.getValue(i);void 0!==o&&S1(i,n,r,a,s,o,t)}),e.dispatchEvent({type:"requestRender"}))},opacity(i){if(e instanceof qH&&!Array.isArray(e.material)){let n=e.material.getLayersOfType("light")[0];e.material.transparent=!0,S1("alphaOverride",n,{alphaOverride:i},{alphaOverride:i+1},0,i,t),e.dispatchEvent({type:"requestRender"})}},light(t,i){(e instanceof sJ||e instanceof p$||e instanceof hJ)&&(e[t]=i,e.dispatchEvent({type:"requestRender"}))},cloner(e){var t;null!==(t=e.cloner)&&void 0!==t&&t.update(),e.dispatchEvent({type:"requestRender"})},pathExtrusion(e,i){e.geometry.userData.parameters.extrusion=(0,ye.A)((0,ye.A)({},e.geometry.userData.parameters.extrusion),i),e.updateGeometryInteractions({extrusion:(0,ye.A)({},e.geometry.userData.parameters.extrusion)},t),e.resetBBoxNeedsUpdate(),e.invalidateDownstreamBooleanData(),e.dispatchEvent({type:"requestRender"})},pathSnapping(t){e.userData.pathSnapping=(0,ye.A)((0,ye.A)({},e.userData.pathSnapping),t),e.updatePathSnapping(e.userData.pathSnapping),e.dispatchEvent({type:"requestRender"})}}}(n,this.sharedAssets),this.sharedAssets),s=("start"===this.data.delayDirection?this.data.delay:0)+("start-end"===this.data.delayDirection?this.data.delay:0)+("start-once"===this.data.delayDirection?this.data.delay:0);a.forEach(e=>{this.timeline.add(e,s)}),this.timeline.duration=1e3*r.to+s}),this.timeline.delay=0,this.timeline.duration+=("start"===this.data.delayDirection?this.data.delay:0)+("end"===this.data.delayDirection?this.data.delay:0)+("start-end"===this.data.delayDirection?2*this.data.delay:0)+("start-once"===this.data.delayDirection?2*this.data.delay:0),this.timeline.finished.then(()=>{Object.keys(t).forEach(e=>{let t=this.scene.find(e);t instanceof FQ&&t.dispatchEvent(z1)}),this._finished=!0}),this.timeline.loopComplete=this._onLoopComplete}catch(a){throw new Error("Missing property")}}get playing(){return!1===this.timeline.paused}get finished(){return this._finished}get paused(){return this.timeline.paused}play(){if(void 0!==this.eventType&&ZR(this.eventType)&&"Once"===this.data.runMode&&this.hasPlayedOnce||void 0===this.eventType&&this._finished)return!1;this.hasPlayedOnce=!0;let e=this.sharedAssets.data.timelineAnimations[this.data.timeline].mapping;Object.keys(e).forEach(e=>{let t=this.scene.find(e);t instanceof FQ&&t.dispatchEvent(L1)}),this.timeline.restart()}pause(){this.timeline.pause()}stop(){this.pause(),this.seek(0),this.timeline.reset(),this._finished=!1}seek(e){this.timeline.seek(e*this.timeline.duration,!0)}toggle(e){if(this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.playing){if(!this.toggleIsForward&&this.timeline.reversed&&this._shouldForwardLoop&&this.timeline.remaining%2===1)return void(this._shouldPauseOnNextLoopComplete=!0);this.timeline.reverse(this.timeline.duration-this.timeline.currentTime),this._shouldForwardLoop&&this.timeline.loop&&this.timeline.reversed&&(this._shouldPauseOnNextLoopComplete=!0)}else(!this.toggleIsForward!==this.timeline.reversed||!this.toggleIsForward&&this.timeline.reversed&&"alternate"===this.timeline.direction)&&this.timeline.reverse(),"number"==typeof this.timeline.loop&&"number"==typeof this.timeline.remaining&&this.timeline.remaining<this.timeline.loop&&this.toggleIsForward&&(this.timeline.remaining=this.timeline.loop),this.timeline.play()}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function G1(e){let t=null===e||void 0===e?void 0:e.tracks.filter(e=>"vector"===e.ValueTypeName||"quaternion"===e.ValueTypeName).map(e=>e.times.length);if(null!==t&&void 0!==t&&t.length){let e=HO(t);return e&&e>2?e:2}return 2}var q1=class extends ov{constructor(e,t,i,n,r){var a,s;super(),this.data=e,this.page=t,this.animationControls=i,this.shared=n,this.condition=r,this.startOnceDelay=0,this.toggleIsForward=!1;let o=e.object,l=t.scene.find(e.object);l&&Array.isArray(l.identity)&&(o=l.identity[0]),this.data=(0,ye.A)((0,ye.A)({},e),{},{object:o});let c=this.animationControls.clipIdToAction[e.clipId+"/"+o];if(this.duration=null!==(a=null===c||void 0===c||null===(s=c.getClip())||void 0===s?void 0:s.duration)&&void 0!==a?a:1,this.data.crop2){let e=G1(null===c||void 0===c?void 0:c.getClip());this.leftFrameTime=this.data.crop2[0]/(e-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(e-1)*this.duration}else{var h;let e=null===c||void 0===c||null===(h=c.getClip())||void 0===h||null===(h=h.tracks[0])||void 0===h?void 0:h.times.length;e&&e>1?(this.leftFrameTime=this.data.crop[0]/e*this.duration,this.rightFrameTime=this.data.crop[1]/e*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e,t;return null!==(e=null===(t=this.threeAnimAction)||void 0===t?void 0:t.isRunning())&&void 0!==e&&e}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===J1(this.shared,this.condition))return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var t;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let i=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(t=>{let[n,r]=t,a=n.split("/")[1];this.threeAnimAction!==r&&a===i&&r.isRunning()&&(e?r.fadeOut(.2):r.stop())}),e&&(null===(t=this.threeAnimAction)||void 0===t||t.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;null===(e=this.threeAnimAction)||void 0===e||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=wv.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===J1(this.shared,this.condition))return!1;this.toggleIsForward=null!==e&&void 0!==e?e:!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){var e;this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(e=>{let[n,r]=e,a=n.split("/")[1];this.threeAnimAction!==r&&a===i&&r.isRunning()&&(t?r.fadeOut(.2):r.stop())}),t&&(null===(e=this.threeAnimAction)||void 0===e||e.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var e;let t=null===(e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])||void 0===e?void 0:e.getClip();t&&(t.duration=this.duration),this.pause()}},Y1=class{constructor(e,t,i,n,r){this.data=e,this.page=t,this.eventManager=i,this.shared=n,this.condition=r,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(!1===J1(this.shared,this.condition))return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},1e3*this.data.delay))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(e=>e.uuid!==this.data.target||e.data.uiScene))return;"fade"===this.data.transition&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,1e3*this.data.duration),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(e=>{"ParticleSystem"===e.type&&(e.sleep(),e.wakeUp(),e.data.autoPlay?e.start():e.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),D1(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},X1=class{constructor(e,t,i,n){this.data=e,this.page=t,this.shared=i,this.condition=n,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=J1(this.shared,this.condition)}dispatch(){if(!1===this.evaluatedCondition)return!1;let e=this.shared.getVariable(this.data.variableId),t=YW(this.data.expression,this.shared,Qz.typeOfVariable(e));void 0!==t&&this.shared.updateVariable(this.data.variableId,"string"==typeof t?{textValue:t}:t)}dispose(){}},Q1=class{constructor(e,t,i,n){this.data=e,this.page=t,this.shared=i,this.condition=n,this.timeoutId=null}dispatchInner(){if(!1===J1(this.shared,this.condition))return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if("PlayPause"===this.data.mode)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"===e?"Paused":"Playing");else if("Play"===this.data.mode&&"Playing"!==e)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if("Stop"===this.data.mode&&"Stopped"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if("Pause"===this.data.mode&&"Paused"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if("Restart"===this.data.mode)this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if("Toggle"===this.data.mode){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);"Playing"===e?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,void 0!==t&&!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);"PlayPause"===this.data.mode&&"Playing"===t&&(e=this.data.pauseDelay),0!==e?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},K1=class{constructor(e,t,i,n){this.data=e,this.page=t,this.shared=i,this.condition=n}dispatch(){if(!1===J1(this.shared,this.condition))return!1;("single"===this.data.target?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var t;this.shared.getVariable(e);let i=null===(t=this.shared.data.variables.data(e))||void 0===t?void 0:t.value;void 0!==i&&this.shared.updateVariable(e,i),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(AX(e))})}dispose(){}},Z1=class{constructor(e,t,i,n){this.data=e,this.page=t,this.shared=i,this.condition=n}dispatch(){var e;if(!1===J1(this.shared,this.condition))return!1;this.data.userAPIId&&(null===(e=this.shared.getUserAPI(this.data.userAPIId))||void 0===e||e.callUserAPI(this.shared))}dispose(){}};function J1(e,t){if(void 0===t)return!0;if(0===t.expression.length)return!1;let i=YW(t.expression,e,"boolean");return t.negate?!i:!!i}function $1(e,t,i,n,r,a){let s={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],TimelineAnimation:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},o=t=>l=>{let{id:c,data:h}=l;try{"Audio"===h.type?vL[e.type].includes("Audio")&&s.Audio.push(new a1(c,h,a,n,t)):"Video"!==h.type||a instanceof mJ?"Particles"===h.type?vL[e.type].includes("Particles")&&s.Particles.push(new s1(h,i,n,t)):"Link"===h.type?vL[e.type].includes("Link")&&s.Link.push(new c1(h,r.controlsManager,n,t)):"Create"===h.type?vL[e.type].includes("Create")&&s.Create.push(new u2(h,i,r.controlsManager,n,t)):"Destroy"===h.type?vL[e.type].includes("Destroy")&&s.Destroy.push(new h1(h,i,r.controlsManager,n,t)):"Reset"===h.type?vL[e.type].includes("Reset")&&s.Reset.push(new u1(h,i,n,r,t)):"Transition"===h.type?vL[e.type].includes("Transition")&&s.Transition.push(new j1(e.type,h,i,n,t)):"SwitchCamera"===h.type?vL[e.type].includes("SwitchCamera")&&s.SwitchCamera.push(new W1(h,i,n,t)):"SceneTransition"===h.type?vL[e.type].includes("SceneTransition")&&s.SceneTransition.push(new Y1(h,i,r,n,t)):"Animation"===h.type?vL[e.type].includes("Animation")&&s.Animation.push(new q1(h,i,r.animationControls,n,t)):"SetVariable"===h.type?vL[e.type].includes("SetVariable")&&s.SetVariable.push(new X1(h,i,n,t)):"DynamicVariablePlay"===h.type?vL[e.type].includes("DynamicVariablePlay")&&s.DynamicVariablePlay.push(new Q1(h,i,n,t)):"Conditional"===h.type?vL[e.type].includes("Conditional")&&(h.ifActions.forEach(o({expression:h.condition,negate:!1})),h.elseActions.forEach(o({expression:h.condition,negate:!0}))):"ClearLocalStorage"===h.type?vL[e.type].includes("ClearLocalStorage")&&s.ClearLocalStorage.push(new K1(h,i,n,t)):"UserAPI"===h.type?vL[e.type].includes("UserAPI")&&s.UserAPI.push(new Z1(h,i,n,t)):"TimelineAnimation"===h.type&&vL[e.type].includes("TimelineAnimation")&&s.TimelineAnimation.push(new H1(c,h,i.scene,n,e.type)):vL[e.type].includes("Video")&&s.Video.push(new a2(c,h,a,n,t))}catch(Y6){}};return t.forEach(o()),s}function e2(e){Object.values(e).forEach(e=>{e.forEach(e=>{(e instanceof a1||e instanceof a2||e instanceof j1||e instanceof H1||e instanceof s1||e instanceof q1||e instanceof j1||e instanceof u2||e instanceof h1||e instanceof W1||e instanceof Y1||e instanceof u1||e instanceof X1||e instanceof Q1)&&e.dispose()})})}var t2=new Map,i2=new Map,n2=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:n,loop:r,volume:a,delay:s}=t;if(this.object=i,void 0===n)throw new Error("Missing property");let o=function(e,t){let i;if("material"in e){let n=e.material;i=Array.isArray(n)?e.material[0].layers.find(e=>e.uuid===t):e.material.layers.find(e=>e.uuid===t)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}(i,n);o&&(this.videoElement=o,this.videoElement.loop=r===1/0,sk&&(this.videoElement.autoplay=!0),void 0!==a&&(this.videoElement.volume=a)),void 0!==s&&(this.delay=s),i2.has(i.uuid)?i2.get(i.uuid).push(this):i2.set(i.uuid,[this]),t2.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let e=this.videoElement.play();void 0!==e&&e.then(e=>{}).catch(e=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}seek(e){return new Promise(t=>{if(!this.videoElement)return t();let i=this.videoElement.duration;if(i>0){let t=e%i;this.videoElement.currentTime=t}this.videoElement.addEventListener("seeked",()=>t(),{once:!0})})}playByToggle(){"stop"===this.data.toggle?"playing"===this.status?this.stop():(this.stop(),this.play()):"pause"===this.data.toggle?"playing"===this.status?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},r2=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=t2.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=i2.get(e);null===t||void 0===t||!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>e[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(e=>e[this.data.interaction]()))}pauseAllVideos(){let e=[...i2.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(e=>{e.forEach(e=>{e[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(e=>{e.forEach(e=>{e[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},a2=class{constructor(e,t,i,n,r){if(this.data=t,this.shared=n,this.condition=r,"play"===t.interaction)this.interaction=new n2(e,t,i);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new r2(t)}}dispatchBasic(){if(!1===J1(this.shared,this.condition))return!1;this.interaction instanceof n2?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===J1(this.shared,this.condition))return!1;this.interaction instanceof n2?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},s2=(()=>{let e,t,i,n;function r(i){var r;!e&&!o2()&&(null===(r=t)||void 0===r?void 0:r.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),i&&(t=i,n=i.requestRender)}function a(r){let s=i?r-i:0,o=t.sharedGameControlGlobals.createdObjects,l=t.sharedGameControlGlobals.nCreatedPerAction,c=o.length,h=0;for(;h<c;){let e=o[h];void 0===e.userData.createdTime&&(e.userData.createdTime=r),void 0===e.userData.lifetime&&void 0===e.userData.quantity||e.userData.lifetime&&r-e.userData.createdTime<e.userData.lifetime||e.userData.quantity&&l[e.userData.actionId]<=e.userData.quantity?(e.userData.velocity&&(e.position.addScaledVector(e.userData.velocity,s/1e3),e.updateMatrix(),n()),h++):(l[e.userData.actionId]>e.userData.quantity&&l[e.userData.actionId]--,o.splice(h,1),e.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&e.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(e.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(e.rigidBody)):(e.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(e=>void 0!==e.bvhGeometry)),c--,n())}e=h>0?requestAnimationFrame(a):void 0,i=h>0?r:void 0}return typeof document<"u"&&document.addEventListener("visibilitychange",function(){o2()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):r()}),r})();function o2(){return!!document&&document.hidden}var l2=new Kv,c2=new Zv,h2=new Zv,u2=class{constructor(e,t,i,n,r){this.data=e,this.page=t,this.controlsManager=i,this.shared=n,this.condition=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=wv.generateUUID(),this.dispatch=()=>{if(!1===J1(this.shared,this.condition))return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()},this.dispatchFromStart=()=>{if(!1===J1(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))},this.dispatchThrottled=$O(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{null===this.intervalId&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let e=new iU(this.object);if(e.playModeVisible=!0,e.expand(),"world"!==this.data.coordinateSystem){let t=this.data.coordinateSystem,i=this.page.scene.find(t);i&&(i.updateMatrixWorldSVD(),e.hiddenMatrix.copy(i.matrixWorldRigid))}e.scale.copy(this.object.scale),e.position.fromArray(this.data.position),e.rotation.fromArray(this.data.rotation),e.updateMatrix(),this.page.add(e);let t=this.controlsManager.sharedGameControlGlobals;t.createdObjects.push(e),void 0===t.nCreatedPerAction[this.uniqueId]?t.nCreatedPerAction[this.uniqueId]=1:t.nCreatedPerAction[this.uniqueId]++,e.updateWorldMatrix(!0,!0),e.traverseObject(this.traverseObjectCB),s2(),this.controlsManager.requestRender()},this.traverseObjectCB=e=>{var t,i,n;let r;if(e.hasNonUniformScale&&e.updateMatrixWorldSVD(),this.controlsManager.sharedGameControlGlobals.rapierWorld){var a;if(e instanceof xQ){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;r=e.object}else if(e instanceof iU)r=e.object;else if(r=e,null!==(a=r.dataPatched.cloner)&&void 0!==a&&a.hideBase)return!0}else{if(e instanceof xQ)return;r=e instanceof iU?e.object:e}"Time"===this.data.destroy?e.userData.lifetime=1e3*this.data.lifetime:"Quantity"===this.data.destroy&&(e.userData.quantity=this.data.destroyAfterQuantity,e.userData.actionId=this.uniqueId);let s=(new Zv).fromArray(this.data.velocity),o=r.dataPatched;if(!("visibility"===o.physics.enabled?!o.visible:!o.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(e,r,{fromCreate:!0,dynamic:this.data.dynamic}),"Collision"===this.data.destroy&&(null!==(t=e.rigidBody)&&void 0!==t&&t.collider(0).setActiveEvents(1),e.userData.hasCollisionDestroy=!0),e.matrixWorld.decompose(c2,l2,h2),s.applyQuaternion(l2),this.data.velocity.some(e=>0!==e)&&this.data.dynamic&&(null===(i=e.rigidBody)||void 0===i||i.setLinvel(s.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in e.object&&this.controlsManager.addBoundsTree(e),this.data.velocity.some(e=>0!==e)&&this.data.dynamic&&(e.userData.velocity=s)),!0===(null===(n=r.dataPatched.physics)||void 0===n?void 0:n.fusedBody)))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,"world"!==this.data.coordinateSystem&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");s2(i)}dispose(){null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},d2=.02,p2=new Zv,f2=new Zv,m2=new Zv,g2=new Zv,v2=new Zv,y2=new Zv,b2=new My,x2=new My,w2=new My,A2=(new My,new Kv),S2=new Kv,_2=new By(0,0,0,"YXZ"),E2=new Zv(1,0,0),C2=new Zv(0,1,0),M2=new Zv(0,0,1),T2=new Zv(1,1,1),P2=(new yy,new zE),D2=new ey,O2={type:"requestRender"},k2={type:"updateMatrix"},I2=Math.PI/6,R2=class extends ov{constructor(e,t,i,n,r,a,s,o,l){var c,h,u,d,p,f,m,g,v,y,b,x,w,A,S,_,E,C,M;super(),this.object=e,this.domElement=t,this.data=i,this.gloabalPhysics=n,this.controlsManager=r,this.cameraFollow=a,this.camera=s,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new My,this.target0=new Zv,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=200,this.euler0=new By(0,0,0,"YXZ"),this.position0Cam=new Zv,this.quat0Cam=new Kv,this.scale0Cam=new Zv,this.hiddenMatrix0Cam=new My,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new zE(new Zv(0,-40,0),new Zv(0,40,0)),matrix:new My,position:new Zv,rotation:new Kv},this.euler=new By(0,0,0,"YXZ"),this.eulerDelta=new Zv,this.lastPosition=new Zv,this.lastCameraQuaternion=new Kv,this.lastCameraPosition=new Zv,this.PI_2=Math.PI/2,this.prevMouse=new Av,this.velocityTarget=new Zv,this.velocity=new Zv,this.directionXZ=new Zv,this.rotVelocityStick=new Zv,this.rotVelocityTarget=new Zv,this.rotVelocity=new Zv,this.rotDirection=new Zv,this.nonColliderRotOffset=new My,this.nonColliderPosOffset=new My,this.firstPointerId=-1,this.rot=new Zv,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new My,this.objectToTarget=new Zv,this.objectToTarget0=new Zv,this.objectToCamXZ=new Zv,this.objectToCamXZ0=new Zv,this.targetToCamera=new Zv,this.targetToCamera0=new Zv,this.cameraPolarAxis0=new Zv,this.targetPos=new Zv,this.targetQuat=new Kv,this.lerpFactorPos=(new Zv).setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Kv,this.objXZQuatInv=new Kv,this.objXZRotMat=new My,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new Zv,this.pushedVelocity=new Zv,this.groundYRotation=0,this.objectRealQuat=new Kv,this.colliderWorldQuat=new Kv,this.groundNormal=new Zv,this.groundTilt=new Kv,this.groundTiltInv=new Kv,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new Zv,this.quaternion=new Kv,this.scale=new Zv,this.initialAction=!0,this.onPointerDown=e=>{var t;!(e.target===this.domElement||e.target instanceof HTMLElement&&"SPLINE-VIEWER"===e.target.tagName&&null!==(t=e.target.shadowRoot)&&void 0!==t&&t.contains(this.domElement))||-1!==this.firstPointerId||(this.firstPointerId=e.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),"keys"!==this.rotBy&&!lk&&!ck&&this.domElement.requestPointerLock(),this.prevMouse.set(e.clientX,e.clientY))},this.onPointerUp=e=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),"mouse"===e.pointerType&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=e=>{if(e.pointerId!==this.firstPointerId)return;let t=e.clientX-this.prevMouse.x,i=e.clientY-this.prevMouse.y;this.prevMouse.set(e.clientX,e.clientY),"mouse"===e.pointerType&&"keys"!==this.rotBy&&(ck&&hk<15.5&&!lk?(this.eulerDelta.y=-t*this.mouseOrbitSensitivity,this.eulerDelta.x=-i*this.mouseOrbitSensitivity):(this.eulerDelta.y=-e.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-e.movementY*this.mouseOrbitSensitivity)),"mouse"!==e.pointerType&&"drag"===this.rotByTouch&&(this.eulerDelta.y=-t*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-i*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=e=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?R2.isLocked=!0:R2.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{var e;if(null!==(e=document)&&void 0!==e&&e.hidden)for(let t in this.movementState)this.movementState[t]=0},this.onKeyDown=e=>{!(e.target instanceof HTMLInputElement)&&("ArrowLeft"===e.code||"ArrowUp"===e.code||"ArrowRight"===e.code||"ArrowDown"===e.code||"Space"===e.code)&&e.preventDefault();for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]){this.movementState[t[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=e=>{for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]||e.code.slice(3,e.code.length).toUpperCase()===t[1]){this.movementState[t[0]]=0;break}},this.copyVRGamePadValues=(e,t)=>{for(let i=2;i<4;i++){let n=e.axes[i];0===t?2===i?this.movementState.movePosX=n:this.movementState.movePosZ=n:(e.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,2===i?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(n)>=.3&&(this.vrEulerYOffset+=n<0?1:-1),this.movementState.rotPosY=n):"fly"===this.moveMode&&(this.movementState.moveNegY=n))}},this.sharedGameControlGlobals=r.sharedGameControlGlobals,e===s&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let T=this.euler0.clone(),P=T.y;if(this.objectRealQuat.copy(this.quaternion),T.y=0,this.quaternion.setFromEuler(T),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),T.set(0,P,0),this.quaternion.setFromEuler(T),this.rot.setFromEuler(T),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||!0===this.cameraFollow)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),!0===this.cameraFollow){var D;this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy(null===(D=this.camera)||void 0===D?void 0:D.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let e,t,i=new Zv(0,0,-1).applyQuaternion(this.camera.quaternion),n=(new Zv).subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(n),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ),Math.abs(i.y)<1e-6?(n.y=0,i.y=0,t=n.projectOnVector(i)):t=n.y/i.y>0?i.multiplyScalar(n.y/i.y):i.multiplyScalar(n.length()),this.targetToCamera0.copy(t).negate(),e=this.camera.position.clone().add(t),this.objectToTarget0.subVectors(e,this.position);let r=(new By).setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-r.x,r.x=0,r.z=0,r.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(r)}if(this.object instanceof FQ&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=null!==(c=i.rotByTouch)&&void 0!==c?c:"joystick",this.rotBy=null!==(h=i.rotBy)&&void 0!==h?h:"keys",this.rotationMode=null!==(u=i.rotationMode)&&void 0!==u?u:"normal",this.moveMode=null!==(d=i.moveMode)&&void 0!==d?d:"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=1*(null!==(p=i.speedTranslate)&&void 0!==p?p:250),this.speedOrbit=.025*(null!==(f=i.speedRotate)&&void 0!==f?f:100),this.mouseOrbitSensitivity=16e-6*(null!==(m=i.speedRotate)&&void 0!==m?m:100),this.keyAssignments=i.keyAssignments.map(e=>{let t=[e[0],e[1]];return"\u25b2"===t[1]?t[1]="ArrowUp":"\u25c0"===t[1]?t[1]="ArrowLeft":"\u25bc"===t[1]?t[1]="ArrowDown":"\u25b6"===t[1]?t[1]="ArrowRight":"\u21e7"===t[1]?t[1]="Shift":"\u21b5"===t[1]?t[1]="Enter":"Space"===t[1]?t[1]=" ":"\u2318"===t[1]?t[1]="Meta":"Ctrl"===t[1]?t[1]="Control":"Esc"===t[1]&&(t[1]="Escape"),t}),"mouse"===i.rotBy){let e;e=this.keyAssignments.findIndex(e=>"rotNegX"===e[0]),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex(e=>"rotPosX"===e[0]),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex(e=>"rotPosY"===e[0]),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex(e=>"rotNegY"===e[0]),-1!==e&&(this.keyAssignments[e][1]="")}this.lerpFactorPosStart=1-.02**(1/(60*(null!==(g=i.delayPos[0])&&void 0!==g?g:.3))),this.lerpFactorPosEnd=1-.02**(1/(60*(null!==(v=i.delayPos[1])&&void 0!==v?v:.3))),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(60*(null!==(y=i.delayRot[0])&&void 0!==y?y:.3))),this.lerpFactorRotEnd=1-.02**(1/(60*(null!==(b=i.delayRot[1])&&void 0!==b?b:.3))),this.lerpFactorPosCamera=1-.02**(1/(60*(null!==(x=i.delayPosCamera)&&void 0!==x?x:.3))),this.lerpFactorRotCamera=1-.02**(1/(60*(null!==(w=i.delayRotCamera)&&void 0!==w?w:.3))),this.gravity=12*(null!==(A=this.gloabalPhysics.gravity)&&void 0!==A?A:bz.defaultData.gravity),this.usePhysics=null!==(S=this.gloabalPhysics.usePhysics)&&void 0!==S?S:bz.defaultData.usePhysics,this.jumpPower=20*i.jumpPower,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=null!==(_=i.alignToGround)&&void 0!==_&&_,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=null!==(E=i.orientWith)&&void 0!==E?E:iB.defaultDataThirdPerson.orientWith,this.slopeThresh=65*Math.PI/180,"capsule"===i.collider.type?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*d2/this.pixelsPerMeter,this.stepThresh=.3*i.collider.height/this.pixelsPerMeter,this.colliderHeight=i.collider.height):"sphere"===i.collider.type?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*d2/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*.3/this.pixelsPerMeter,this.colliderHeight=2*i.collider.radius):(this.offset=i.collider.height*d2/this.pixelsPerMeter,this.stepThresh=.3*i.collider.height/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let O=(new Zv).fromArray(i.collider.position),k=(new Kv).setFromEuler((new By).fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(O).multiply(this.scale),this.collider.rotation.copy(k),this.collider.matrix.compose(O,k,T2),void 0!==i.cameraXAxis&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=null!==(C=i.forwardDirection)&&void 0!==C?C:"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=null!==(M=i.runMultiplier)&&void 0!==M?M:2;let I=2*i.navmesh.destinationHelperRadius;if(I>0){let e=new Vk;e.push({fi:0,data:(0,ye.A)((0,ye.A)({},tz.defaultData("light","phong")),{},{alpha:0}),id:"layer1"}),e.push({fi:0,data:(0,ye.A)((0,ye.A)({},tz.defaultData("color")),{},{color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a}),id:"layer2"});let t=new RY({layers:e},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Nb(SU.create({parameters:{width:I,height:I/10,hollow:.7}}),t),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let e=(new By).setFromQuaternion(this.quaternion,"YXZ"),t=e.y;this.objectRealQuat.copy(this.quaternion),e.y=0,this.quaternion.setFromEuler(e),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),e.set(0,t,0),this.quaternion.setFromEuler(e),this.rot.setFromEuler(e),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof FQ?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(null===(e=this.navMeshPathDest)||void 0===e?void 0:e.parent)&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;void 0!==e.gameActions&&(this.actions={},tB.list.forEach(i=>{this.actions[i]=$1((0,ye.A)((0,ye.A)({},e),{},{disabled:!1,type:"GameControl"}),e.gameActions[i],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),e2(this.actions.idle),e2(this.actions.move),e2(this.actions.run),e2(this.actions.jump)}dispatchStartEvent(e){void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(e=>{e.play()}),this.actions[e].Animation.forEach(e=>{e.play(!1===this.initialAction)}),this.actions[e].TimelineAnimation.forEach(e=>{e.play()}),this.actions[e].Create.forEach(e=>{e.dispatchStart()}),this.actions[e].Audio.forEach(e=>{e.dispatchGameControl("start")}),this.actions[e].Particles.forEach(e=>{e.dispatchGameControl("start")})))}dispatchStopEvent(e){void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].TimelineAnimation.forEach(e=>{e.stop()}),this.actions[e].Create.forEach(e=>{e.dispatchStop()}),this.actions[e].Audio.forEach(e=>{e.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(e=>{e.dispatchGameControl("stop")})))}get colliderWorldPosition(){return g2.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,i){var n;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let a=60*r,s=!1;if(this.usePhysics&&this.collisionEnabled){var o;let e=v2.set(0,(0===this.velocity.y?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/120,1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),t=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,e,null===(o=this.object.rigidBody)||void 0===o?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(t){var l;this.onObject=!0,this.groundNormal.set(t.normal2.x,t.normal2.y,t.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),0===(null===(l=t.collider.parent())||void 0===l?void 0:l.bodyType())&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let e=t.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(t.rigidBody===e&&t.userData.isFollowingObj!==this.object.uuid){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(g2,S2,v2),this.groundVelocity.subVectors(g2,t.prevT),this.object.getWorldPosition(v2).add(this.collider.position).sub(g2),this.groundYRotation=_2.setFromQuaternion(S2).y-t.prevR.y,y2.copy(v2).applyAxisAngle(C2,this.groundYRotation),this.groundVelocity.add(y2.sub(v2)).divideScalar(r);break}}else this.onObject=!1}if("walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*a),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,"+z"===this.forwardDir&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let e=this.navMeshPathDest.material;if("walk"===this.moveMode&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let t=g2.subVectors(this.path[1],this.position),i=v2.subVectors(this.path[1],this.path[0]);t.dot(i)<0?this.path.shift():(this.directionXZ.x=i.x,this.directionXZ.z=i.z),e.opacity=e.userData.opacity0}else e.opacity-=.05*e.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),!1===this.didHit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**a),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**a),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**a)):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),(this.onObject||"fly"===this.moveMode)&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let c=m2.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){let e=v2.copy(c);e.y=0,c.set(0,c.y,e.length()*("+z"===this.forwardDir?1:-1))}if(this.directionXZ.manhattanLength()>0&&"none"!==this.orientMode&&!1===this.isFirstPerson)if("camera"===this.orientWith&&this.path.length<=1){let e=g2;this.camera.getWorldDirection(e);let t=y2.copy(C2).multiplyScalar(e.dot(C2));e.sub(t);let i=v2.copy(this.directionXZ);i.x*=-1,this.rot.y=e.angleTo(i)*(e.cross(i).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*("+z"===this.forwardDir?1:-1);if(_2.setFromVector3(this.rot),"walk"===this.moveMode&&(_2.x=0),c.applyEuler(_2),s&&(S2.setFromUnitVectors(C2,this.groundNormal),c.applyQuaternion(S2)),i){let e=_2.set(0,this.vrEulerYOffset*I2,0);i.applyEuler(e),c.x+=i.x,c.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*r}if(!0===this.usePhysics){let e=v2;this.pushedVelocity.set(0,0,0);for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){let i=y2.setFromMatrixPosition(t.matrixWorld).sub(t.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),n=t.rigidBody.collider(0).castCollider(i,this.object.rigidBody.collider(0),g2.copy(c).divideScalar(this.pixelsPerMeter),r,!1);i.multiplyScalar(this.pixelsPerMeter);let a=$N.is(t)?t:t.object;if(null!==n&&this.lastHitObj!==a){let e;t instanceof iU&&(e=t);let i=this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid];if(i)for(let t of i)"character"===t.data.target&&(t.dispatch(e),a.dispatchEvent(s4));this.lastHitObj=a}if(null!==n){this.pushedVelocity.copy(i),e.copy(n.normal1).applyQuaternion(t.quaternion);break}}if(0!==this.pushedVelocity.manhattanLength()){let t=e.dot(c);t<0&&c.addScaledVector(e,-t),c.add(this.pushedVelocity)}else c.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),"normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,"normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**a):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**a),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){if("radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(C2,this.euler.y-this.euler0.y);let e=v2.copy(this.objectToCamXZ).normalize(),t=y2.copy(c).multiplyScalar(r);t.y=0;let i=t.sub(g2.copy(e).multiplyScalar(t.dot(e))).cross(e).y;this.euler.y-=Math.atan2(i,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.rot.y);if(!0===this.cameraFollow&&("walk"===this.moveMode?"Limit"===this.cameraXAxis?this.euler.x=wv.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=wv.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):"Limit"===this.cameraXAxis&&(this.euler.x=wv.clamp(this.euler.x,-this.PI_2,this.PI_2))),"fly"===this.moveMode?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(_2.copy(t),_2.y=0):(_2.copy(this.euler),_2.y=0),this.nonColliderRotOffset.makeRotationFromEuler(_2)),t&&("walk"===this.moveMode?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*I2),A2.setFromAxisAngle(E2,this.rot.x),S2.setFromAxisAngle(C2,this.rot.y),S2.multiply(A2),A2.setFromAxisAngle(M2,this.rot.z),S2.multiply(A2),this.quaternion.copy(S2),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){var h,u;let e=v2.copy(c).multiplyScalar(r/this.pixelsPerMeter),t=null;this.didHit=!1;let i=new Zv;for(let n=0;n<5;n++){var d;let r=e.length(),a=y2.copy(e).normalize();if(t=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(i),this.colliderWorldQuat,a,null===(d=this.object.rigidBody)||void 0===d?void 0:d.collider(0).shape,r,!1,24,void 0,void 0,this.object.rigidBody),null===t){0===n&&0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),i.add(e);break}{this.didHit=!0;let s=this.sharedGameControlGlobals.colliderToEntity.get(t.collider.handle);if(s!==this.lastHitObj&&0===n){this.lastHitObj=s;let e=this.sharedGameControlGlobals.entityToCollisionEvents[null===s||void 0===s?void 0:s.uuid];if(e)for(let i of e)if("character"===i.data.target){var p;let e,n=(null===(p=this.sharedGameControlGlobals.rapierWorld)||void 0===p?void 0:p.getCollider(t.collider.handle))._parent;if(s.cloner)for(let t of s.cloner.children)if(t.rigidBody===n){e=t;break}i.dispatch(e),s.dispatchEvent(s4)}}let o=p2.set(t.normal2.x,t.normal2.y,t.normal2.z).applyQuaternion(this.colliderWorldQuat),l=f2.copy(a).multiplyScalar(t.toi).dot(o),c=t.toi;if(0===c&&(this.position.y+=this.offset*this.pixelsPerMeter),l>this.offset&&(c=t.toi*(l-this.offset)/l,i.addScaledVector(a,c)),e.copy(a).multiplyScalar(r-c),Math.acos(-o.y)>this.slopeThresh){var f;let n=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(i),r=y2.copy(t.witness2).applyQuaternion(this.colliderWorldQuat);r.y=0;let a=n.add(r);a.y+=this.stepThresh;let s=this.sharedGameControlGlobals.rapierWorld.castShape(a,this.colliderWorldQuat,e,null===(f=this.object.rigidBody)||void 0===f?void 0:f.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);null!==s&&0===s.toi&&(o.y=0,o.normalize())}e.addScaledVector(o,-e.dot(o))}}this.position.addScaledVector(i,this.pixelsPerMeter),null!==(h=this.object.rigidBody)&&void 0!==h&&h.setTranslation(g2.copy(this.position).divideScalar(this.pixelsPerMeter),!0),null===(u=this.object.rigidBody)||void 0===u||u.setRotation(A2.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let e=this.onObject?1:5,t=c.multiplyScalar(r/e);for(let i=0;i<e;i++)this.position.add(t),this.collisionAdjustment(r/e)}else this.position.addScaledVector(c,r);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();let e=this.objectToTarget.add(this.position),t=this.targetToCamera.add(e);b2.lookAt(t,e,C2).setPosition(t),b2.decompose(this.targetPos,this.targetQuat,g2),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**a),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**a),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=wv.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=wv.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(k2),(!(this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(void 0===this.camera||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate))||"fly"!==this.moveMode&&!0!==this.onObject&&!1!==this.collisionEnabled||!(null===this.navMeshPathDest||this.navMeshPathDest.material.opacity<-.04*(null===(n=this.navMeshPathDest)||void 0===n||null===(n=n.material)||void 0===n?void 0:n.userData.opacity0)))&&(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(O2),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e,t=A2.setFromAxisAngle(C2,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?wv.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(t),e="Limit"===this.cameraXAxis?wv.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):wv.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=g2.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&i.applyQuaternion(t);let n=S2.setFromAxisAngle(i,e);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(t),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(n)}groundTiltAdjustment(e){180*C2.angleTo(e)/Math.PI<15||180*C2.angleTo(e)/Math.PI>85?A2.identity():A2.setFromUnitVectors(C2,e),this.groundTilt.slerp(A2,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var t;let i=f2.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let n=b2.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(g2,A2,v2).compose(g2,A2,T2);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(e=>{if(e===this.object||e.isDescendantOf(this.object))return;D2.makeEmpty(),e.updateMatrixWorldSVD();let t=e.matrixWorldRigid,r=x2.copy(t).invert(),a=w2.copy(x2).multiply(n);P2.copy(this.collider.segment),P2.start.applyMatrix4(a),P2.end.applyMatrix4(a);let s=p2.copy(this.position).applyMatrix4(r);D2.expandByPoint(P2.start),D2.expandByPoint(P2.end),D2.min.addScalar(-this.collider.radius),D2.max.addScalar(this.collider.radius),e.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder:e=>e.distanceToPoint(P2.end),intersectsBounds:e=>e.intersectsBox(D2),intersectsTriangle:e=>{let n=g2,r=v2,a=e.closestPointToSegment(P2,n,r);if(a<this.collider.radius){let e=this.collider.radius-a,o=r.sub(n).normalize(),l=y2.copy(s);l.addScaledVector(o,e);let c=l.applyMatrix4(t).sub(this.position);i.add(c),P2.start.addScaledVector(o,e),P2.end.addScaledVector(o,e)}}})}),D2.makeEmpty(),P2.copy(this.collider.segment),P2.start.applyMatrix4(n),P2.end.applyMatrix4(n),D2.expandByPoint(P2.start),D2.expandByPoint(P2.end),D2.min.addScalar(-this.collider.radius),D2.max.addScalar(this.collider.radius),null!==(t=this.sharedGameControlGlobals.staticMeshBVH)&&void 0!==t&&t.shapecast({traverseBoundsOrder:e=>e.distanceToPoint(P2.end),intersectsBounds:e=>e.intersectsBox(D2),intersectsTriangle:e=>{let t=g2,n=v2,r=e.closestPointToSegment(P2,t,n);if(r<this.collider.radius){let e=this.collider.radius-r,a=n.sub(t).normalize();this.alignToGround&&this.groundTiltAdjustment(a),i.addScaledVector(a,e),P2.start.addScaledVector(a,e),P2.end.addScaledVector(a,e)}}}),this.onObject=Math.abs(i.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(r),this.position.add(i)}pause(){this.firstPointerId=-1,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.deactivate()}resume(){this.activate()}},L2=R2;L2.isLocked=!1;var z2=Nm(Wm());function B2(e){let t=e.elements,i=t[0]**2+t[1]**2+t[2]**2,n=t[4]**2+t[5]**2+t[6]**2,r=t[8]**2+t[9]**2+t[10]**2,a=t[0]**2+t[4]**2+t[8]**2,s=t[1]**2+t[5]**2+t[9]**2,o=t[2]**2+t[6]**2+t[10]**2,l=1e-8;return i<l||n<l||r<l||a<l||s<l||o<l}function j2(e,t){let i=new Cb;if(t&&B2(t))return i.setAttribute("position",new yb([],3)),i.setIndex([]),i;if(!e.getAttribute("position"))return i.setAttribute("position",new yb([],3)),i.setIndex([]),i;let{positions:n,triIndices:r}=yH(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new yb(n,3)),i.setIndex(r),t&&i.applyMatrix4(t),i}var F2=new My,N2=new My,U2=[[0,0,0],[0,0,0],[0,0,0]];function V2(e){let t=e.elements;U2[0][0]=t[0],U2[0][1]=t[4],U2[0][2]=t[8],U2[1][0]=t[1],U2[1][1]=t[5],U2[1][2]=t[9],U2[2][0]=t[2],U2[2][1]=t[6],U2[2][2]=t[10];let{u:i,v:n}=(0,z2.SVD)(U2),r=F2.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=N2.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1);return r.multiply(a.transpose())}var W2=class extends TE{constructor(){super(),this.layers.enable(3),this.layers.enable(8),this.layers.enable(9)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach(e=>{e.visible&&this.intersectObject(e,t,i)}),i}createRaycastLineHelper(){let e=new iS({color:65280,linewidth:10}),t=new Zv(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new Zv(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),n=this.camera.far-this.camera.near,r=(new Zv).addVectors(t,i.multiplyScalar(n)),a=new Cb;return a.setFromPoints([t,r]),new lS(a,e)}},H2=e=>e instanceof eK||e instanceof v$;function G2(e,t){return e.distance-t.distance}function q2(e,t,i){if(vU(t)&&t.visible){qQ(t)&&t.raycast(e,i);for(let n of t.children)q2(e,n,i)}}function Y2(e,t,i){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&!i.some(t=>void 0!==K2(e,t)))return[];let n=[];return t.children.forEach(t=>q2(e,t,n)),n.sort(G2),n}function X2(e){let t=[];if(e.length){let i=e[0].object;vU(i)&&t.push(i);let n=i.parent;for(;n;)H2(n)&&t.push(n),n=n.parent}return t}function Q2(e,t,i,n){let r=e.frame;if(r){let e=t[0]*r.width,a=(1-t[1])*r.height;for(let t of i){let i=t===r.uuid?r:r.find(t);if(null!==i&&void 0!==i&&i.intersects(e,a))return n(i),!0}}return!1}function K2(e,t){if(qQ(t)){if(t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(H2(t))return Z2(e,t)}function Z2(e,t){if(vU(t)&&t.visible){if(qQ(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let t=Z2(e,i);if(t)return t}}}var J2=class{constructor(e,t,i,n,r,a,s,o){this.renderer=e,this.publish=t,this.scene=i,this.getCamera=n,this.sharedAssets=r,this.requestRender=a,this.isExport=s,this.frame=o,this.raycaster=new W2,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents="window"===t.mouseEventTarget,this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var t;let{pageX:i,pageY:n}=(null===(t=e.touches)||void 0===t?void 0:t.length)>0?e.touches[0]:e;this.pointerWorld=function(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-(t-(i.top+window.scrollY))/i.height*2+1}}(i,n,this._domRect),this.pointerScreen=function(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(t-(i.top+window.scrollY))/i.height}}(i,n,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},$2=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},e3=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],t3=e=>{var t;return null===(t=e3.find(t=>{let[i,n]=t;return n===e}))||void 0===t?void 0:t[0]},i3=e=>{var t;return null===(t=e3.find(t=>{let[i]=t;return i===e}))||void 0===t?void 0:t[1]},n3=(e,t)=>{let i=t3(e);if(i){let e=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(e,"target",{writable:!1,value:t}),e}},r3=class extends $2{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var t;if(!e.eventName||!e.target||"Scroll"===e.eventName)return;let i=null===(t=this.splineEvents[t3(e.eventName)])||void 0===t?void 0:t[e.target.uuid];if(!i)return;"Scroll"===e.eventName&&void 0!==e.deltaY&&Object.assign(i,{deltaY:e.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(i)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(e=>{var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length)for(let[n,r]of e3)if(e.data.events.some(e=>e.data.type===r&&!e.data.disabled)){var i;this.objectsPerEvents.has(n)?null===(i=this.objectsPerEvents.get(n))||void 0===i||i.push(e):this.objectsPerEvents.set(n,[e]);let t={id:e.uuid,name:e.name},a=n3(r,t),s=this.splineEvents[n];s?s[e.uuid]=a:this.splineEvents[n]={[e.uuid]:a}}}),this.objectsPerEvents.forEach(e=>{e.forEach(e=>{e.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(e=>{e.removeEventListener("beginEvent",this.onBeginEvent)})})}},a3=class{constructor(e,t,i,n,r,a){if(this.id=e,this.data=t,this.object=i,this.entered=!1,("KeyDown"===t.type||"KeyUp"===t.type||"KeyPress"===t.type)&&!t.key)throw new Error("Missing property");this.actions=$1(t,t.actions,n,r,a,i)}disconnect(){e2(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),"MousePress"===this.data.type||"KeyPress"===this.data.type?this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.playFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStart())):(this.actions.Transition.some(e=>e.playing&&"Toggle"!==e.data.runMode)||this.actions.Transition.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.SwitchCamera.some(e=>e.playing&&"Toggle"!==e.data.runMode)||this.actions.SwitchCamera.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.Animation.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.TimelineAnimation.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),!1===e&&this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),e?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.playFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}},s3=class extends $2{constructor(e,t,i){super(e),this.eventManager=t,this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=e=>{if(!0===this.useForRaycastProperty&&null===this.sceneInterects){this.eventContext.updateRaycaster(e);let{raycaster:t,page:i}=this.eventContext,n=Y2(t,i,[],!0);this.sceneInterects=n,n.length&&(this.eventContext.sharedAssets.raycastProperty={x:n[0].point.x,y:n[0].point.y,z:n[0].point.z,objX:n[0].object.matrixWorld.elements[12],objY:n[0].object.matrixWorld.elements[13],objZ:n[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=e=>{(e.target===this.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&this.canvasMouseEvents.forEach(t=>{("MouseDown"===t.data.type||"MousePress"===t.data.type)&&(this.onCanvasRaycast(e),t.dispatch())})},this.onCanvasMouseUp=e=>{(e.target===this.eventContext.domElement||"SPLINE-VIEWER"===e.target.tagName)&&this.canvasMouseEvents.forEach(t=>{"MouseUp"===t.data.type?(this.onCanvasRaycast(e),t.dispatch()):"MousePress"===t.data.type&&t.dispatchRelease()})},this.onMouseDown=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseDown"))},this.onMouseUp=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMousePressEvent())},this.onMousePressRelease=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMousePressEvent(!0))},this.onKeyDown=e=>{this.heldKeys[e.key]||(this.handleKeyEvent(e,"KeyDown"),this.handleKeyEventHeld(e,"KeyDown",!0)),this.heldKeys[e.key]=!0},this.onKeyUp=e=>{this.handleKeyEvent(e,"KeyUp"),this.handleKeyEventHeld(e,"KeyUp",!0)},this.onKeyPressDown=e=>{this.heldKeysPress[e.key]?this.handleKeyEventHeld(e,"KeyPress"):(this.handleKeyEvent(e,"KeyPress"),this.handleKeyEventHeld(e,"KeyPress",!0)),this.heldKeysPress[e.key]=!0},this.onKeyPressUp=e=>{this.handleKeyEvent(e,"KeyPress",!0)},this.releaseHeldKey=e=>{delete this.heldKeys[e.key]},this.releaseHeldKeyPress=e=>{delete this.heldKeysPress[e.key]},this._onUserEvent=e=>{var t,i;let{eventName:n,target:r,reverse:a}=e;if(!n||!r)return;let s=i3(n);s&&("MouseDown"===s||"MouseUp"===s||"MousePress"===s?(r.dispatchEvent({type:"beginEvent",eventName:s}),null!==(t=this.eventsPerObjects[s])&&void 0!==t&&null!==(t=t[r.uuid])&&void 0!==t&&t.forEach(e=>{e.dispatchUserEvent(a)}),this.canvasMouseEvents.forEach(e=>{e.dispatchUserEvent(a)})):("KeyDown"===s||"KeyUp"===s||"KeyPress"===s)&&(r.dispatchEvent({type:"beginEvent",eventName:s}),null===(i=this.eventsPerObjects[s])||void 0===i||null===(i=i[r.uuid])||void 0===i||i.forEach(e=>{e.dispatchUserEvent()})))}}connect(){var e,t,i,n,r,a;let{page:s,sharedAssets:o,domElement:l}=this.eventContext,c=(e,t)=>{var i;if(null===(i=e.data)||void 0===i||!i.events.length)return;let n=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let a of n){var r;let i=this.eventsPerObjects[a];if(e.data.events.filter(e=>{let{data:t}=e;return t.type===a&&!0!==t.disabled}).forEach(t=>{let{id:n,data:r}=t;try{let t=new a3(n,r,e,s,o,this.eventManager);t.actions.Video.length&&(this.hasVideoAction=!0),"MouseDown"!==r.type&&"MouseUp"!==r.type&&"MousePress"!==r.type||"Canvas"!==r.mode&&"Window"!==r.mode?(i[e.uuid]?i[e.uuid].some(e=>e.id===t.id)||i[e.uuid].push(t):i[e.uuid]=[t],e instanceof q$&&e.traverseChildren(e=>{var n;if(!e.visible)return!0;e instanceof OX&&"shapeBlendNode"in e.data.geometry&&2!==(null===(n=e.data.geometry.shapeBlendNode)||void 0===n?void 0:n.operation)&&(i[e.uuid]?i[e.uuid].push(t):i[e.uuid]=[t])})):this.canvasMouseEvents.push(t)}catch(y6){}}),null!==(r=i[e.uuid])&&void 0!==r&&r.length&&(this.objectsPerTypes[a].push(e instanceof mJ&&("MouseDown"===a||"MouseUp"===a||"MousePress"===a)?t:e),e instanceof q$)){let t=this.objectsPerTypes[a];e.traverseChildren(e=>{if(!e.visible)return!0;e instanceof OX&&-1===t.indexOf(e)&&t.push(e)})}}};s.traverseEntity(e=>{var t;(e instanceof A$||e instanceof d$)&&null!==(t=e.frame)&&void 0!==t&&t.traverse(t=>{c(t,e)}),c(e)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),l.addEventListener("pointerdown",this.onCanvasMouseDown),l.addEventListener("pointerup",this.onCanvasMouseUp),(null!==(e=this.objectsPerTypes.MouseDown)&&void 0!==e&&e.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMouseDown)),null!==(t=this.objectsPerTypes.MouseUp)&&void 0!==t&&t.length&&(this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMouseUp)),null!==(i=this.objectsPerTypes.MousePress)&&void 0!==i&&i.length&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMousePressRelease)),null!==(n=this.objectsPerTypes.KeyDown)&&void 0!==n&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),null!==(r=this.objectsPerTypes.KeyUp)&&void 0!==r&&r.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),null!==(a=this.objectsPerTypes.KeyPress)&&void 0!==a&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(e=>{let[t,i]=e;i.forEach(e=>{e.addEventListener("userEvent",this._onUserEvent)})}),this.canvasMouseEvents.forEach(e=>{e.object.addEventListener("userEvent",this._onUserEvent)})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(e=>{Object.values(e).forEach(e=>{e.forEach(e=>{e.disconnect()})})}),this.canvasMouseEvents.forEach(e=>{e.disconnect()}),Object.entries(this.objectsPerTypes).forEach(e=>{let[t,i]=e;i.forEach(e=>{e.removeEventListener("userEvent",this._onUserEvent)})}),this.canvasMouseEvents.forEach(e=>{e.object.removeEventListener("userEvent",this._onUserEvent)})}handleMouseEvent(e){let{stopRaycast:t,raycaster:i,page:n,pointerScreen:r}=this.eventContext,a=this.objectsPerTypes[e],s=a.filter(e=>!(e instanceof mJ));if((a.length||this.useForRaycastProperty)&&(!n.uiCanvas||!Q2(n,[r.x,r.y],Object.keys(this.eventsPerObjects[e]),t=>{this.handleObjectMouseEventDispatch(t,e)}))){if(t||this.useForRaycastProperty){let r;if(null===this.sceneInterects?r=Y2(i,n,s,this.useForRaycastProperty):(r=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&r.length&&(this.eventContext.sharedAssets.raycastProperty={x:r[0].point.x,y:r[0].point.y,z:r[0].point.z,objX:r[0].object.matrixWorld.elements[12],objY:r[0].object.matrixWorld.elements[13],objZ:r[0].object.matrixWorld.elements[14]}),t){var o,l,c,h;let t=[null!==(o=null===(l=r[0])||void 0===l||null===(l=l.uv)||void 0===l?void 0:l.x)&&void 0!==o?o:0,null!==(c=null===(h=r[0])||void 0===h||null===(h=h.uv)||void 0===h?void 0:h.y)&&void 0!==c?c:0];X2(r).forEach(i=>{i instanceof A$&&Q2(i,t,Object.keys(this.eventsPerObjects[e]),t=>{this.handleObjectMouseEventDispatch(t,e)}),this.eventsPerObjects[e][i.uuid]&&this.handleObjectMouseEventDispatch(i,e)})}}t||s.forEach(t=>{var n,r,a,s;let o=K2(i,t);o&&(this.handleObjectMouseEventDispatch(t,e),t instanceof A$&&Q2(t,[null!==(n=null===o||void 0===o||null===(r=o.uv)||void 0===r?void 0:r.x)&&void 0!==n?n:0,null!==(a=null===o||void 0===o||null===(s=o.uv)||void 0===s?void 0:s.y)&&void 0!==a?a:0],Object.keys(this.eventsPerObjects[e]),t=>{this.handleObjectMouseEventDispatch(t,e)}))})}}handleMousePressEvent(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="MousePress",i=this.objectsPerTypes[t],n=i.filter(e=>!(e instanceof mJ)),r=[];if(i.length){if(!e){let{stopRaycast:e,raycaster:i,page:a,pointerScreen:s}=this.eventContext,o=!1;if(a.uiCanvas&&(o=Q2(a,[s.x,s.y],Object.keys(this.eventsPerObjects[t]),e=>{r.push(e)})),e&&!o){let e=Y2(i,a,n);r=X2(e),e.forEach(e=>{var i,n,a,s;e.object instanceof A$&&Q2(e.object,[null!==(i=null===e||void 0===e||null===(n=e.uv)||void 0===n?void 0:n.x)&&void 0!==i?i:0,null!==(a=null===e||void 0===e||null===(s=e.uv)||void 0===s?void 0:s.y)&&void 0!==a?a:0],Object.keys(this.eventsPerObjects[t]),e=>{r.push(e)})})}else n.forEach(e=>{var n,a,s,o;let l=K2(i,e);l&&(r.push(e),e instanceof A$&&Q2(e,[null!==(n=null===l||void 0===l||null===(a=l.uv)||void 0===a?void 0:a.x)&&void 0!==n?n:0,null!==(s=null===l||void 0===l||null===(o=l.uv)||void 0===o?void 0:o.y)&&void 0!==s?s:0],Object.keys(this.eventsPerObjects[t]),e=>{r.push(e)}))})}this._prevObjects.length&&this._prevObjects.forEach(e=>{r.includes(e)||this.handleObjectMouseEventDispatchRelease(e,t)}),r.length&&r.forEach(e=>{this.handleObjectMouseEventDispatch(e,t)}),this._prevObjects=r}}handleObjectMouseEventDispatch(e,t){var i;e.dispatchEvent({type:"beginEvent",eventName:t}),null===(i=this.eventsPerObjects[t])||void 0===i||null===(i=i[e.uuid])||void 0===i||i.forEach(e=>{e.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var i;e.dispatchEvent({type:"beginEvent",eventName:t}),null===(i=this.eventsPerObjects[t])||void 0===i||null===(i=i[e.uuid])||void 0===i||i.forEach(e=>{e.dispatchRelease()})}handleKeyEvent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.objectsPerTypes[t].forEach(n=>{let r=this.eventsPerObjects[t][n.uuid];r.some(t=>{let{data:i}=t;return"key"in i&&i.key===e.key})&&n.dispatchEvent({type:"beginEvent",eventName:t}),r.forEach(t=>{"key"in t.data&&t.data.key===e.key&&(i?t.dispatchRelease():t.dispatch(!0))})})}handleKeyEventHeld(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.objectsPerTypes[t].forEach(n=>{this.eventsPerObjects[t][n.uuid].forEach(t=>{"key"in t.data&&t.data.key===e.key&&t.dispatchHeld(i)})})}},o3=new Zv,l3=new Zv,c3=class{constructor(e,t,i,n,r){this.actionsIn=$1(e,e.inActions,i,n,r,t),this.actionsOut=$1(e,e.outActions,i,n,r,t)}disconnect(){e2(this.actionsIn),e2(this.actionsOut)}},h3=class extends c3{constructor(e,t,i,n,r,a){super(t,i,n,r,a),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let n of this.objects)if(!n.visible)return;let e=o3.setFromMatrixPosition(this.objects[0].matrixWorld),t=l3.setFromMatrixPosition(this.objects[1].matrixWorld),i=e.distanceTo(t)<=this.distance?"in":"out";if(this.stage!==i){this.stage=i;let e="in"===i?this.actionsIn:this.actionsOut;e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Link.forEach(e=>e.dispatch()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.TimelineAnimation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}};let{distance:s,fromObject:o,toObject:l}=t.condition;this.distance=s;for(let c of[o,l]){if(!c)throw new Error("Missing property");let e=n.find(c);if(!e)throw new Error("Missing property");this.objects.push(e)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},u3=class extends c3{constructor(e,t,i,n,r,a){var s,o;super(t,i,n,r,a),this.id=e,this.data=t,this.object=i,this.onBegin=e=>{let{target:t,state:i}=e;this.toState!==i&&(this.actionsOut.Audio.forEach(e=>e.dispatchConditional()),this.actionsOut.Particles.forEach(e=>e.dispatchConditional()),this.actionsOut.Video.forEach(e=>e.dispatchConditional()),this.actionsOut.Link.forEach(e=>e.dispatch()),this.actionsOut.Create.forEach(e=>e.dispatch()),this.actionsOut.Destroy.forEach(e=>e.dispatch()),this.actionsOut.Reset.forEach(e=>e.dispatch()),this.actionsIn.Transition.forEach(e=>e.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(e=>e.play()),this.actionsOut.Animation.forEach(e=>e.play()),this.actionsOut.TimelineAnimation.forEach(e=>e.play()),this.actionsIn.SwitchCamera.forEach(e=>e.pause()),this.actionsOut.SwitchCamera.forEach(e=>e.play()),this.actionsOut.SceneTransition.forEach(e=>e.dispatch()),this.actionsOut.SetVariable.forEach(e=>e.checkConditions()),this.actionsOut.SetVariable.forEach(e=>e.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actionsOut.ClearLocalStorage.forEach(e=>e.dispatch()),this.actionsOut.UserAPI.forEach(e=>e.dispatch()))},this.onComplete=e=>{let{target:t,state:i}=e;this.toState===i&&(this.actionsIn.Audio.forEach(e=>e.dispatchConditional()),this.actionsIn.Particles.forEach(e=>e.dispatchConditional()),this.actionsIn.Video.forEach(e=>e.dispatchConditional()),this.actionsIn.Link.forEach(e=>e.dispatch()),this.actionsIn.Create.forEach(e=>e.dispatch()),this.actionsIn.Destroy.forEach(e=>e.dispatch()),this.actionsIn.Reset.forEach(e=>e.dispatch()),this.actionsOut.Transition.forEach(e=>e.pause()),this.actionsOut.Transition.forEach(e=>e.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(e=>e.play()),this.actionsIn.Animation.forEach(e=>e.play()),this.actionsIn.TimelineAnimation.forEach(e=>e.play()),this.actionsOut.SwitchCamera.forEach(e=>e.pause()),this.actionsIn.SwitchCamera.forEach(e=>e.play()),this.actionsIn.SceneTransition.forEach(e=>e.dispatch()),this.actionsIn.SetVariable.forEach(e=>e.checkConditions()),this.actionsIn.SetVariable.forEach(e=>e.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actionsOut.ClearLocalStorage.forEach(e=>e.dispatch()),this.actionsOut.UserAPI.forEach(e=>e.dispatch()))};let{condition:l}=t;if(!l.object)throw new Error("Missing property");let c=null!==(s=n.find(l.object))&&void 0!==s?s:n.scene.find2D(l.object);if(!c)throw new Error("Missing property");if(this.toObject=c,l.state&&(null===(o=this.toObject.states)||void 0===o||!o[l.state]))throw new Error("Missing property");this.toState=l.state}connect(){kT(this.actionsOut).forEach(e=>{var t;(null===(t=this.actionsOut[e])||void 0===t?void 0:t.length)&&this.toObject.addEventListener("beginState",this.onBegin)}),kT(this.actionsIn).forEach(e=>{var t;(null===(t=this.actionsIn[e])||void 0===t?void 0:t.length)&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),kT(this.actionsOut).forEach(e=>{var t;(null===(t=this.actionsIn[e])||void 0===t?void 0:t.length)&&this.toObject.removeEventListener("beginState",this.onBegin)}),kT(this.actionsIn).forEach(e=>{var t;(null===(t=this.actionsIn[e])||void 0===t?void 0:t.length)&&this.toObject.removeEventListener("completeState",this.onComplete)})}},d3=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(i=>{var n;if(null!==(n=i.data)&&void 0!==n&&n.events.length)for(let{id:a,data:s}of i.data.events)if(!s.disabled&&"Conditional"===s.type)try{let n;"Comparison"===s.condition.type||("Distance"===s.condition.type?n=new h3(a,s,i,e,t,this.eventManager):"State"===s.condition.type&&(n=new u3(a,s,i,e,t,this.eventManager))),n&&(this.eventsPerConditions[s.condition.type].push(n),(n.actionsIn.Video.length||n.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch(r){}}),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(e=>e.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(e=>e.disconnect()))}},p3=new Zv,f3=new Zv,m3=new Zv,g3=new nx,v3=new Zv,y3=new Zv,b3=new Zv,x3=new Kv,w3=new By,A3=new My,S3=new Sv,_3=new Zv,E3=new Zv,C3=.2;function M3(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var T3=function(){let e=new My;return(t,i,n)=>{let r=t.obj;e.copy(r.hiddenMatrix),null!==r.parent&&e.premultiply(r.parent.matrixWorld),e.invert(),r.position.copy(i),"global"===t.reference&&M3(r.position,t.limits),r.position.applyMatrix4(e),"parent"===t.reference?M3(r.position,t.limits):"local"===t.reference&&(x3.copy(t.quat0).invert(),r.position.sub(t.position0),r.position.applyQuaternion(x3),M3(r.position,t.limits),x3.invert(),r.position.applyQuaternion(x3),r.position.add(t.position0)),e.multiply(null!==n&&void 0!==n?n:r.matrixWorld).decompose(v3,r.quaternion,y3),r.updateMatrix(),r.hasNonUniformScale&&(r.updateMatrixWorld(),r.updateMatrixWorldSVD()),r instanceof qH&&YQ(r.parent)&&r.invalidateDownstreamBooleanData(!0)}}(),P3=class{constructor(e,t,i,n,r,a,s){this.object=e,this.id=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=0===this.data.resetSpeed?1:8/this.data.resetSpeed+1,this.snapDampingFactor=0===this.data.snapSpeed?1:8/this.data.snapSpeed+1,this.actionsDrag=$1(i,i.dragDropActions.drag,n,r,a,this.object),this.actionsDrop=$1(i,i.dragDropActions.drop,n,r,a,this.object);let o=[];this.data.objects.forEach(e=>{let t=n.find(e);!t||!1!==t.data.visible&&(o.push(t),s[t.uuid]&&s[t.uuid].forEach(e=>{let t=n.find(e);!t||!1!==t.data.visible&&o.push(t)}))}),this.data.dropDestinations.forEach(e=>{let t=n.find(e);!t||!1!==t.data.visible&&(this.dropDestIds.push(t.uuid),s[t.uuid]&&s[t.uuid].forEach(e=>{let t=n.find(e);!t||!1!==t.data.visible&&this.dropDestIds.push(t.uuid)}))}),this.dragItems=o.map(e=>("locked"===this.data.planeMode&&(e.userData.lockedPlane=!0),e.userData.worldPosition0=(new Zv).setFromMatrixPosition(e.matrixWorld),{obj:e,fromPosition:(new Zv).setFromMatrixPosition(e.matrixWorld),pointStart:new Zv,pointEnd:new Zv,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:(new Zv).copy(e.position),quat0:(new Kv).copy(e.quaternion),snapped:!1,orientationMatrix:new My,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return null!==this.activeIdx?this.dragItems[this.activeIdx]:null}dispose(){e2(this.actionsDrag),e2(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},D3=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=e=>{if(fk.length>1)return;this.eventContext.updateRaycaster(e);let{raycaster:t,page:i}=this.eventContext,n=i.raycastWithClones(t);if(this.lastDropDestination=null,0!==n.length){for(let e of this.events){let t=0;for(let{obj:i,pointEnd:a,pointStart:s}of e.dragItems){if(i===n[0].object||i===n[0].object.object||$N.is(i)&&i.isAncestorOf(n[0].object.uuid)){var r;if(e.activeIdx=t,e.activeDragItem.reset=!1,e.activeDragItem.currentDampingFactor=e.data.dampingFactor,e.activeDragItem.snapped=!1,"hand"===e.data.cursor&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){e.activeDragItem.obj.rigidBody&&e.activeDragItem.obj.rigidBody.setBodyType(2,!0);let t=e.activeDragItem.obj;i.hasNonUniformScale&&i.updateMatrixWorldSVD(),(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(v3,x3,y3),w3.setFromQuaternion(x3),void 0===t.prevR?(t.prevR=w3.clone(),t.prevT=v3.clone()):(t.prevR.copy(w3),t.prevT.copy(v3)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(e.activeDragItem.obj)}return this.calcPlaneIntersectPos(i,s,e.data.plane,e.data.referenceFrame),a.copy(s),(this.eventManager.controlsManager.usePhysics&&"dynamic"===(null===(r=i.data.physics)||void 0===r?void 0:r.rigidBody)||!1===e.data.drop||!1===e.data.resetOnSnapFail)&&e.activeDragItem.fromPosition.setFromMatrixPosition(e.activeDragItem.obj.matrixWorld),this.activeEvent=e,void(this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1))}t++}}this.activeEvent=null}else this.activeEvent=null},this.onPointerMove=e=>{if(fk.length>1)return;this.eventContext.updateRaycaster(e);let{raycaster:t,page:i}=this.eventContext,n=i.raycastWithClones(t);if(0===fk.length){let e=!1;for(let t of this.events){for(let{obj:i}of t.dragItems){var r,a,s;if(i===(null===(r=n[0])||void 0===r?void 0:r.object)||i===(null===(a=n[0])||void 0===a||null===(a=a.object)||void 0===a?void 0:a.object)||$N.is(i)&&i.isAncestorOf(null===(s=n[0])||void 0===s?void 0:s.object.uuid)){switch(e=!0,t.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move")}break}}if(e)break}return void(e||this.setCursor("default"))}if(this.activeEvent&&this.activeEvent.activeDragItem){let e,t=this.activeEvent.activeDragItem;if(t.snapped=!1,this.activeEvent.data.drop&&(e=n.filter(e=>t.obj!==e.object&&!t.obj.isAncestorOf(e.object.uuid)&&!(e.object instanceof eK)&&("all"===this.activeEvent.data.dropOn||this.activeEvent.dropDestIds.some(t=>t===e.object.uuid||i.scene.find(t).isAncestorOf(e.object.uuid))))[0]),e){let i=b3.copy(e.face.normal).applyMatrix3(S3.getNormalMatrix(e.object.matrixWorld));if("center"===this.activeEvent.data.snapTo)t.fromPosition.setFromMatrixPosition(e.object.matrixWorld);else if("surface"===this.activeEvent.data.snapTo){if(t.fromPosition.copy(e.point),"bbox"===this.activeEvent.data.snapSurfaceMode){v3.copy(i).applyMatrix3(S3.setFromMatrix4(t.obj.matrixWorld).transpose());let e=t.obj;v3.x>C3?y3.x=-e.recursiveBBox.min.x:v3.x<-C3&&(y3.x=-e.recursiveBBox.max.x),v3.y>C3?y3.y=-e.recursiveBBox.min.y:v3.y<-C3&&(y3.y=-e.recursiveBBox.max.y),v3.z>C3?y3.z=-e.recursiveBBox.min.z:v3.z<-C3&&(y3.z=-e.recursiveBBox.max.z),y3.applyMatrix3(S3.invert())}else y3.copy(i).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);t.fromPosition.add(y3)}this.activeEvent.data.autoOrient&&(v3.set(0,1,0).cross(i),v3.length()<1e-4&&v3.set(-1,0,0).cross(i),y3.crossVectors(b3,v3),t.orientationMatrix.makeBasis(v3,y3,i)),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart),t.currentDampingFactor=this.activeEvent.snapDampingFactor,t.snapped=!0,this.lastDropDestination!==e.object&&(this.lastDropDestination=e.object,this.activeEvent.actionsDrop.Transition.forEach(e=>{e.play()}),this.activeEvent.actionsDrop.Animation.forEach(e=>{e.play()}),this.activeEvent.actionsDrop.Audio.forEach(e=>{e.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(e=>{e.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(e=>{e.dispatchThrottled()}))}else t.orientationMatrix.makeRotationFromQuaternion(t.quat0),this.lastDropDestination=null,t.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(t.obj,t.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(e=>{e.stop()}),this.activeEvent.actionsDrop.Audio.forEach(e=>{e.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(e=>{e.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(e=>{e.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(e=>e.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(e=>e.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(e=>e.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(e=>e.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(e=>e.dispatch()),!1===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(e=>{e.play()}),this.activeEvent.actionsDrag.Animation.forEach(e=>{e.play()}),this.activeEvent.actionsDrag.Audio.forEach(e=>{e.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(e=>{e.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(e=>{e.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(e=>{e.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(e=>{e.stop()}))},500),this.updateDragItem(t),t.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=e=>{if(this.activeEvent&&this.activeEvent.activeDragItem){var t;"hand"===this.activeEvent.data.cursor&&this.setCursor("grab");let e="dynamic"===(null===(t=this.activeEvent.activeDragItem.obj.data.physics)||void 0===t?void 0:t.rigidBody);!1===this.activeEvent.activeDragItem.snapped&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(!1===this.eventManager.controlsManager.usePhysics||!e)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&e&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),!0===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(e=>{e.stop(),null!==e.object.currentState&&e.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(e=>{e.stop()}),this.activeEvent.actionsDrag.Audio.forEach(e=>{e.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(e=>{e.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(e=>e.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(e=>e.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(e=>e.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(e=>e.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(e=>e.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(t=>{t.component&&(e[t.component.uuid]?e[t.component.uuid].push(t.uuid):e[t.component.uuid]=[t.uuid])}),this.eventContext.page.traverseEntity(t=>{var i;null===(i=t.data)||void 0===i||i.events.filter(e=>"DragDrop"===e.data.type&&!e.data.disabled).forEach(i=>{this.events.push(new P3(t,i.id,i.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(e=>e.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,i,n){let{getCamera:r,raycaster:a}=this.eventContext;r().getWorldDirection(f3),f3.negate();let s=x3.identity();switch("parent"===n?A3.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(v3,s,y3):"local"===n&&e.matrixWorld.decompose(v3,s,y3),i){case"x":v3.set(1,0,0).applyQuaternion(s),_3.copy(f3).cross(v3),E3.copy(v3).cross(_3);break;case"y":v3.set(0,1,0).applyQuaternion(s),_3.copy(f3).cross(v3),E3.copy(v3).cross(_3);break;case"z":v3.set(0,0,1).applyQuaternion(s),_3.copy(f3).cross(v3),E3.copy(v3).cross(_3);break;case"xy":E3.set(0,0,1).applyQuaternion(s);break;case"yz":E3.set(1,0,0).applyQuaternion(s);break;case"xz":E3.set(0,1,0).applyQuaternion(s);break;case"adaptive":f3.angleTo(y3.set(0,1,0))>Math.PI/6?(v3.crossVectors(y3.set(0,1,0),f3),E3.crossVectors(v3,y3)):E3.set(0,1,0);break;default:E3.copy(f3)}m3.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:m3;if(g3.setFromNormalAndCoplanarPoint(E3,o),a.ray.intersectPlane(g3,t)&&("x"===i||"y"===i||"z"===i)){let e=y3.subVectors(t,o).dot(v3);t.copy(o).addScaledVector(v3,e)}}updateDragItem(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m3.setFromMatrixPosition(e.obj.matrixWorld),"current"===e.reset?p3.subVectors(e.fromPosition,m3).divideScalar(e.currentDampingFactor):"original"===e.reset?(p3.subVectors(e.obj.userData.worldPosition0,m3).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):p3.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(m3).divideScalar(e.currentDampingFactor),e.paused=!(e.currentDampingFactor>1)||p3.length()<.01,(this.activeEvent&&1===this.activeEvent.data.dampingFactor||n)&&T3(e,p3.add(m3),null!==(t=this.activeEvent)&&void 0!==t&&t.data.drop&&null!==(i=this.activeEvent)&&void 0!==i&&i.data.autoOrient?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},O3=new Zv,k3=new Zv,I3=new Zv,R3=new Zv,L3=new nx,z3={type:"requestRender"},B3=function(){let e=new Zv,t=new Zv;return(i,n,r)=>r>0?(e.subVectors(i,n),e.length()<=r?i:t.copy(n).add(e.normalize().multiplyScalar(r))):n}(),j3=function(){let e=new My;return(t,i)=>{t.position.copy(i),null!==t.parent&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof qH&&YQ(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),F3=class{constructor(e,t,i,n,r,a){this.data=e,this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new Zv,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=(0,ye.A)((0,ye.A)((0,ye.A)({},rL.defaultData),e),void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}),void 0===e.target||"cursor"===e.target||(this.target=n.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=$1(e,e.actions,n,r,a,i)}},N3=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=e=>{if(!(fk.length>1)){this.eventContext.updateRaycaster(e);for(let e of this.events)void 0===e.target&&this.updateSingleEvent(e)}},this.onMouseEnter=e=>{for(let t of this.events)void 0===t.target&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)void 0===t.target&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(t=>{var i,n;let r=null===(i=t.data)||void 0===i?void 0:i.events.find(e=>"Follow"===e.data.type&&!e.data.disabled);r&&(!e.data.globalPhysics.usePhysics||"dynamic"!==(null===(n=t.dataPatched.physics)||void 0===n?void 0:n.rigidBody))&&this.events.push(new F3(r.data,r.id,t,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),lk&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events)if(void 0!==n.target){let e=n.target,t=this.onTargetChange(n);this.pairOfEventListeners.push([e,t]),e.addEventListener("requestRender",t)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),lk&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,n]of this.pairOfEventListeners)i.removeEventListener("requestRender",n);for(let i of this.events)i.paused=!0,i.isReset=!1,e2(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.events.forEach(e=>{e.actions.Create.forEach(e=>{e.dispatchThrottled()})});let{plane:n,limitDistance:r,limitDistanceEnabled:a}=e.data;if(e.object.getWorldPosition(I3),e.isReset)R3.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(R3);else{let{getCamera:e,raycaster:t}=this.eventContext;if("custom"===n?(e().getWorldDirection(k3),k3.negate(),O3.copy(k3)):"xy"===n?O3.set(0,0,1):"xz"===n?O3.set(0,1,0):"yz"===n&&O3.set(1,0,0),L3.setFromNormalAndCoplanarPoint(O3,I3),!t.ray.intersectPlane(L3,R3))return}if(!e.isReset)if(R3.distanceTo(e.worldPosition0)>r&&a&&e.target){if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;R3.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor}else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;!1===e.data.enabledTranslation[0]&&(R3.x=I3.x),!1===e.data.enabledTranslation[1]&&(R3.y=I3.y),!1===e.data.enabledTranslation[2]&&(R3.z=I3.z);let s=B3(I3,R3,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let t=O3.subVectors(s,I3).divideScalar(e.currentDampingFactor);I3.add(t),i&&j3(e.object,I3),e.paused=t.length()<.01}else j3(e.object,s),e.paused=!0;null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(z3)}},U3=new Zv,V3=new Zv,W3=new My,H3=new Kv,G3=new Kv,q3=new Zv,Y3=new Zv,X3=new Zv,Q3=new Zv,K3=new nx,Z3={type:"requestRender"},J3={type:"changeRotation"},$3=function(){let e=new My;return function(t,i){null!==t.parent?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply(V2(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof qH&&YQ(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),e5=class{constructor(e,t,i,n){this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Kv,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=(0,ye.A)((0,ye.A)((0,ye.A)({},aL.defaultData),e),void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}),void 0===e.target||"cursor"===e.target||(this.target=n.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},t5=class extends $2{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(fk.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let e of this.events)void 0===e.target&&this.updateSingleEvent(e)}},this.onMouseEnter=e=>{for(let t of this.events)void 0===t.target&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)void 0===t.target&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let e=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(e)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>t=>{let{eventName:i,target:n}=t;if(!i||!n)return;let r=i3(i);r&&"LookAt"===r&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(t=>{var i,n;let r=null===(i=t.data)||void 0===i?void 0:i.events.find(e=>"LookAt"===e.data.type&&!e.data.disabled);r&&(!e.data.globalPhysics.usePhysics||"dynamic"!==(null===(n=t.dataPatched.physics)||void 0===n?void 0:n.rigidBody))&&this.events.push(new e5(r.data,r.id,t,e))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),lk&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events){if(void 0!==n.target){let e=this.onTargetChange(n),t=n.target;this.pairOfEventListeners.push([t,e]),t.addEventListener("requestRender",e)}let e=this.createUserEventListener(n),t=n.object;this.pairOfUserEventListeners.push([t,e]),t.addEventListener("userEvent",e)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),lk&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[i,n]of this.pairOfEventListeners)i.removeEventListener("requestRender",n);for(let[i,n]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",n);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var t;let{tilt:i,axis:n,distance:r,plane:a,limitDistance:s,enabledRotation:o,limitDistanceEnabled:l}=e.data,{getCamera:c,raycaster:h}=this.eventContext,{object:u,target:d}=e;if(u.getWorldPosition(q3),!e.isReset)if(e.target)e.target.getWorldPosition(Y3);else{if("custom"===a?(c().getWorldDirection(V3),V3.negate(),K3.setFromNormalAndCoplanarPoint(V3,q3)):("xy"===a?U3.set(0,0,1):"xz"===a?U3.set(0,1,0):"yz"===a&&U3.set(1,0,0),K3.setFromNormalAndCoplanarPoint(U3,q3)),!h.ray.intersectPlane(K3,Y3))return;r>0&&("custom"===a||void 0===a)&&Y3.addScaledVector(V3,r)}if(e.isReset||(d?"target"===i?X3.copy(d.up).applyMatrix4(W3.extractRotation(d.matrixWorld)).normalize():o.some(e=>!1===e)?("x"===n?(Q3.set(0,0,1),!1===o[2]&&Q3.set(0,1,0)):"y"===n?(Q3.set(1,0,0),!1===o[0]&&Q3.set(0,0,1)):(Q3.set(0,1,0),!1===o[1]&&Q3.set(1,0,0)),X3.copy(Q3).applyQuaternion(e.worldQuaternion0).normalize()):X3.set(0,1,0):"custom"===a?X3.set(0,1,0):X3.copy(U3)),e.isReset)G3.copy(e.worldQuaternion0);else if(q3.distanceTo(Y3)>s&&l&&d){if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;G3.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor}else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;(function(e,t,i,n,r,a){let s=e.elements;r5.subVectors(t,i),0===r5.lengthSq()&&(r5.z=1),r5.normalize(),n5.crossVectors(n,r5),0===n5.lengthSq()&&(1===Math.abs(n.z)?r5.x+=1e-4:r5.z+=1e-4,r5.normalize(),n5.crossVectors(n,r5)),n5.normalize(),i5.crossVectors(r5,n5),"x"===r?1===a.z?[n5,i5,r5]=[r5,n5,i5]:(n5.negate(),[n5,r5]=[r5,n5]):"y"===r?1===a.x?[n5,i5,r5]=[i5,r5,n5]:(n5.negate(),[i5,r5]=[r5,i5]):1===a.x&&(n5.negate(),[n5,i5]=[i5,n5]),s[0]=n5.x,s[4]=i5.x,s[8]=r5.x,s[1]=n5.y,s[5]=i5.y,s[9]=r5.y,s[2]=n5.z,s[6]=i5.z,s[10]=r5.z})(W3,Y3,q3,X3,n,Q3),G3.setFromRotationMatrix(W3),H3.setFromUnitVectors(Q3.applyQuaternion(G3),X3),o.some(e=>!1===e)&&"target"!==i&&G3.premultiply(H3).normalize()}e.currentDampingFactor>1?(u.updateWorldMatrix(!0,!1),H3.setFromRotationMatrix(V2(u.matrixWorld)),H3.slerp(G3,1/e.currentDampingFactor),$3(u,W3.makeRotationFromQuaternion(H3)),e.paused=8*(1-H3.dot(G3))<1e-6):($3(u,W3.makeRotationFromQuaternion(G3)),e.paused=!0),null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),u.dispatchEvent(Z3),u.dispatchEvent(J3)}},i5=new Zv,n5=new Zv,r5=new Zv;var a5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=$1(t,t.actions,n,r,a,i)}disconnect(){e2(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.TimelineAnimation.forEach(e=>e.playFromCurrent()),this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),e?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.playFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.playFromCurrent()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}},s5=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onMouseUp=e=>{fk.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=e=>{fk.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onUserEvent=e=>{var t;let{eventName:i,target:n,reverse:r}=e;if(!i||!n)return;let a=i3(i);a&&"MouseHover"===a&&(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(t=this.eventsPerObjects[n.uuid])||void 0===t||t.forEach(e=>e.dispatchUserEvent(r)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,i=(i,n)=>{var r;if(i.visible&&null!==(r=i.data)&&void 0!==r&&r.events.length){var a;for(let{id:n,data:r}of i.data.events)if(!r.disabled&&"MouseHover"===r.type)try{let a=new a5(n,r,i,e,t,this.eventManager);this.eventsPerObjects[i.uuid]?this.eventsPerObjects[i.uuid].push(a):this.eventsPerObjects[i.uuid]=[a]}catch(g6){}(null===(a=this.eventsPerObjects[i.uuid])||void 0===a?void 0:a.length)&&this.objects.push(i instanceof mJ?n:i)}};if(e.traverseEntity(e=>{var t;(e instanceof A$||e instanceof d$)&&null!==(t=e.frame)&&void 0!==t&&t.traverse(t=>{i(t,e)}),i(e)}),!this.objects.length)return;let{domElement:n}=this.eventContext;this.domEventsNeeded.clear(),lk&&(this.domEventsNeeded.add("pointerdown"),n.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),n.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(e=>{e.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),lk&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(e=>{e.forEach(e=>{e.disconnect()})}),this.objects.forEach(e=>{e.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(){let e=[];if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){let{stopRaycast:t,raycaster:i,page:n,pointerScreen:r}=this.eventContext,a=!1;if(n.uiCanvas&&(a=Q2(n,[r.x,r.y],Object.keys(this.eventsPerObjects),t=>{e.push(t)})),t&&!a){let t=Y2(i,n,this.objects);e=X2(t),t.forEach(t=>{var i,n,r,a;t.object instanceof A$&&Q2(t.object,[null!==(i=null===t||void 0===t||null===(n=t.uv)||void 0===n?void 0:n.x)&&void 0!==i?i:0,null!==(r=null===t||void 0===t||null===(a=t.uv)||void 0===a?void 0:a.y)&&void 0!==r?r:0],Object.keys(this.eventsPerObjects),t=>{e.push(t)})})}else this.objects.forEach(t=>{var n,r,a,s;let o=K2(i,t);o&&(e.push(t),t instanceof A$&&Q2(t,[null!==(n=null===o||void 0===o||null===(r=o.uv)||void 0===r?void 0:r.x)&&void 0!==n?n:0,null!==(a=null===o||void 0===o||null===(s=o.uv)||void 0===s?void 0:s.y)&&void 0!==a?a:0],Object.keys(this.eventsPerObjects),t=>{e.push(t)}))})}this._prevObjects.length&&this._prevObjects.forEach(t=>{var i;e.includes(t)||(t.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(i=this.eventsPerObjects[t.uuid])||void 0===i||i.forEach(e=>e.dispatchLeave()))}),e.length&&e.forEach(e=>{var t;e.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(t=this.eventsPerObjects[e.uuid])||void 0===t||t.forEach(e=>e.dispatchEnter())}),this._prevObjects=e}},o5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=$1(t,t.actions,n,r,a,i)}connect(){this.scrollCounter=0}disconnect(){e2(this.actions)}dispatch(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(e=>e.seek(i)),this.actions.Animation.forEach(e=>e.seek(t)),this.actions.TimelineAnimation.forEach(e=>e.seek(i)),this.actions.Create.forEach(e=>e.dispatchThrottled()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),e?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Animation.forEach(e=>{e.playFromCurrent()}),this.actions.TimelineAnimation.forEach(e=>{e.playFromCurrent()})),this.actions.Create.forEach(e=>e.dispatchThrottled()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}},l5=class{constructor(e,t,i,n,r,a,s){this.id=e,this.data=t,this.object=i,this.domElement=a,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=$1(t,t.actions,n,r,s,i)}getStickyParentElement(){let e=this.domElement;for(;e;){if("sticky"===window.getComputedStyle(e).position)return e;e=e.parentElement}return null}computeScrollBounds(){var e,t;let i=this.getStickyParentElement(),n=null===i||void 0===i?void 0:i.parentElement,r=this.domElement.getBoundingClientRect(),a={top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:r.width,height:r.height};if(n){let e=n.getBoundingClientRect(),t=window.getComputedStyle(i),l=parseFloat(t.marginTop)+parseFloat(t.marginBottom),c=parseFloat(t.top),h=parseFloat(t.bottom),u=e.height-l;if(isNaN(c)){if(!isNaN(h)){var s,o;let t=null!==(s=document.body.clientHeight)&&void 0!==s?s:window.innerHeight,i=window.innerWidth-(null!==(o=document.documentElement.clientWidth)&&void 0!==o?o:window.innerWidth);r.bottom===t-h?(a.top+=e.top-r.height+h+i,a.bottom+=e.top-r.height+h+i):r.bottom<t-h&&(a.top-=u-r.height,a.bottom-=u-r.height)}}else r.top===c?(a.top+=e.top-c,a.bottom+=e.top-c):r.top<0&&(a.top-=u-r.height,a.bottom-=u-r.height)}let l=document.body,c=document.documentElement,h=window.pageYOffset||c.scrollTop||l.scrollTop,u=c.clientTop||l.clientTop||0,d=Math.round(a.top+h-u);if("enter"===this.data.startFrom){let e=window.innerHeight,t=a.height,i=this.data.enterAnchor,n="top"===i?e:"bottom"===i?e-t:e-.5*t;this.scrollStart=d-n}else this.scrollStart=0;this.scrollStart+=null!==(e=this.data.startOffset)&&void 0!==e?e:0,this.scrollEnd=this.scrollStart+(null!==(t=this.data.endAfter)&&void 0!==t?t:400),this.box=a,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){e2(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return void 0===this.box||0===this.box.width&&0===this.box.height&&0===this.box.top&&0===this.box.bottom}computeScroll(e){let{x:t,y:i}=e;this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())});let n=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(i-this.scrollStart)/n));this.actions.Transition.forEach(e=>e.seek(r)),this.actions.Animation.forEach(e=>e.seek(r)),this.actions.TimelineAnimation.forEach(e=>e.seek(r)),this.actions.Create.forEach(e=>e.dispatchThrottled()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),e?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Animation.forEach(e=>{e.playFromCurrent()}),this.actions.TimelineAnimation.forEach(e=>{e.playFromCurrent()})),this.actions.Create.forEach(e=>e.dispatchThrottled()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}},c5=class extends $2{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>e.handleResize())})},this.onScroll=e=>{if(!this.isInview)return;let t={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(e=>{let[i,n]=e;i.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:t}),n.forEach(e=>e.dispatch(t))})},this.onWheel=e=>{!this.isInview||e.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(t=>{let[i,n]=t;i.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:e.deltaY}),n.forEach(t=>t.dispatch(e.deltaY))})},this.onUserEvent=e=>{var t;let{eventName:i,target:n,reverse:r}=e;if(!i||!n)return;let a=i3(i);a&&"Scroll"===a&&(n.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),null===(t=this.wheelEventsPerObject.get(n))||void 0===t||t.forEach(e=>{e.dispatchUserEvent(r)}))}}connect(){let{page:e,sharedAssets:t,domElement:i,isExport:n}=this.eventContext,r=r=>{var a;if(null!==(a=r.data)&&void 0!==a&&a.events.length)for(let{id:l,data:c}of r.data.events)if(!c.disabled&&"Scroll"===c.type)if("load"!==c.trigger&&n){var s;let n=new l5(l,c,r,e,t,i,this.managers);this.scrollEventsPerObject.has(r)?null===(s=this.scrollEventsPerObject.get(r))||void 0===s||s.push(n):this.scrollEventsPerObject.set(r,[n])}else{var o;let i=new o5(l,c,r,e,t,this.managers);this.wheelEventsPerObject.has(r)?null===(o=this.wheelEventsPerObject.get(r))||void 0===o||o.push(i):this.wheelEventsPerObject.set(r,[i])}};e.traverseEntity(e=>{var t;(e instanceof A$||e instanceof d$)&&null!==(t=e.frame)&&void 0!==t&&t.traverse(e=>{r(e)}),r(e)}),this.intersectionObserver=new IntersectionObserver(e=>{let t=e[0];t&&(this.isInview=t.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>e.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>e.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>e.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>e.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)})}},h5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.actions=$1(t,t.actions,n,r,a,i)}disconnect(){e2(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.TimelineAnimation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{var i;(null!==(i=t.interaction.data.triggerAfter)&&void 0!==i?i:"any")===e&&(t.interaction instanceof n1?t.interaction.audioPlayer.play():t.interaction instanceof r1&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{var i;let n=null!==(i=t.interaction.data.triggerAfter)&&void 0!==i?i:"autoplay";n===e&&(t.interaction instanceof n2?t.interaction.play("autoplay"===n):t.interaction instanceof r2&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{var i;(null!==(i=t.data.triggerAfter)&&void 0!==i?i:"any")===e&&t.dispatchBasic()})}async seekVideos(e){let t=[];this.actions.Video.forEach(i=>{var n;"autoplay"===(null!==(n=i.interaction.data.triggerAfter)&&void 0!==n?n:"autoplay")&&i.interaction instanceof n2&&t.push(i.interaction.seek(e))}),await Promise.all(t)}pauseVideos(){this.actions.Video.forEach(e=>{e.interaction instanceof n2&&e.interaction.pause()})}dispatchUserEvent(e){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),e?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.playFromCurrent()),this.actions.TimelineAnimation.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.interaction instanceof n1?e.interaction.audioPlayer.play():e.interaction instanceof r1&&e.interaction.dispatch()}),this.actions.Video.forEach(e=>{e.interaction instanceof n2?e.interaction.play():e.interaction instanceof r2&&e.interaction.dispatch()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()})}},u5=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>{e.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>{e.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>{e.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>{e.actions.Audio.forEach(e=>{e.interaction instanceof n1&&e.interaction.audioPlayer.play()}),e.actions.Video.forEach(e=>{var t;let i=null!==(t=e.interaction.data.triggerAfter)&&void 0!==t?t:"autoplay";e.interaction instanceof n2&&e.interaction.play("autoplay"===i)}),e.actions.Particles.forEach(e=>{e.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>{e.dispatchAfter("autoplay")})})},this.seekVideos=async e=>{let t=[];[...this.eventsAfterPerObject.entries()].forEach(i=>{let[n,r]=i;!n.data.visible||r.forEach(i=>{t.push(i.seekVideos(e))})}),await Promise.all(t)},this.pauseVideos=()=>{[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;i.forEach(e=>{e.pauseVideos()})})},this.onUserEvent=e=>{var t,i;let{eventName:n,target:r,reverse:a}=e;if(!n||!r)return;let s=i3(n);s&&"Start"===s&&(r instanceof mJ||r.dispatchEvent({type:"beginEvent",eventName:"Start"}),null!==(t=this.eventsPerObject.get(r))&&void 0!==t&&t.forEach(e=>{e.dispatchUserEvent(a)}),null===(i=this.eventsAfterPerObject.get(r))||void 0===i||i.forEach(e=>{e.dispatchUserEvent(a)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,i=i=>{var n;if(null!==(n=i.data)&&void 0!==n&&n.events.length)for(let{id:l,data:c}of i.data.events){var r,a,s,o;if(c.disabled||"Start"!==c.type)continue;let n=new h5(l,c,i,t,e,this.eventManager);(n.actions.Transition.length||n.actions.TimelineAnimation.length||n.actions.Animation.length||n.actions.SwitchCamera.length||n.actions.Create.length||n.actions.Destroy.length||n.actions.SceneTransition.length||n.actions.Reset.length||n.actions.SetVariable.length||n.actions.DynamicVariablePlay.length||n.actions.ClearLocalStorage.length||n.actions.UserAPI.length)&&(this.eventsPerObject.has(i)?null===(r=this.eventsPerObject.get(i))||void 0===r||r.push(n):this.eventsPerObject.set(i,[n])),n.actions.Audio.length&&(this.eventsAfterPerObject.has(i)?null===(a=this.eventsAfterPerObject.get(i))||void 0===a||a.push(n):this.eventsAfterPerObject.set(i,[n])),n.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(i)?null===(s=this.eventsAfterPerObject.get(i))||void 0===s||s.push(n):this.eventsAfterPerObject.set(i,[n])),n.actions.Particles.length&&(this.eventsAfterPerObject.has(i)?null===(o=this.eventsAfterPerObject.get(i))||void 0===o||o.push(n):this.eventsAfterPerObject.set(i,[n]))}};if(t.traverseEntity(e=>{var t;(e instanceof A$||e instanceof d$)&&null!==(t=e.frame)&&void 0!==t&&t.traverse(e=>{i(e)}),i(e)}),[...this.eventsAfterPerObject.values()].some(e=>e.length)){if(0===this.eventManager.activateCount){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.addEventListener("pointerdown",this.onMouseDown,{once:!0}),i.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),i.addEventListener("pointerdown",this.onAny),i.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(e=>{let[t,i]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(e=>e.dispatch()),t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(e=>{let[t,i]=e;t.removeEventListener("userEvent",this.onUserEvent),i.forEach(e=>e.disconnect())})}[...this.eventsPerObject.entries()].forEach(e=>{let[t,i]=e;t.removeEventListener("userEvent",this.onUserEvent),i.forEach(e=>e.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},d5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.initialDisabled=!1,this.actions=$1(t,t.actions,n,r,a,i),this.target=t.target}disconnect(){e2(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.Animation.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.TimelineAnimation.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(null!==e&&void 0!==e&&e)}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},p5=class extends $2{constructor(e,t,i,n,r){super(e),this.sharedVariables=t,this.eventManager=i,this.needsMouse=n,this.needsRaycast=r,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=e=>{let t=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let i=new Date,n=[],r=[];for(let c=0;c<this.propertiesToWatch.length;c++){let{objectId:e,property:t,prevValue:i}=this.propertiesToWatch[c],n=this.eventContext.scene.find(e),a=dL.propertyPaths[t];if("width"===a[0]||"height"===a[0]||"depth"===a[0])n=n.geometry.userData.parameters[a[0]];else for(let r=0;r<a.length;r++)n=n[a[r]];null===i?this.propertiesToWatch[c].prevValue=n instanceof Zv?n.clone():n:(n instanceof Zv?!n.equals(i):i!==n)&&(r.push({objId:e,property:t}),n instanceof Zv?this.propertiesToWatch[c].prevValue.copy(n):this.propertiesToWatch[c].prevValue=n)}for(let c=0;c<this.variablesToWatch.length;c++){let{id:e,prevValue:i}=this.variablesToWatch[c],r=t.getVariable(e);r!==i&&(n.push(e),this.variablesToWatch[c].prevValue=r)}for(let c=0;c<this.dynamicVars.length;c++){let{id:r,expectedTime:o,last:l,data:h,timerSeconds:u,startValue:d}=this.dynamicVars[c],p=1e3;if("timer"!==h.dynamicVariableType&&"stopwatch"!==h.dynamicVariableType||"number3decimal"!==h.format?"counter"===h.dynamicVariableType?p=h.updateInterval:"random"===h.dynamicVariableType&&(p=h.isStatic?1/0:h.updateInterval):p=1,-1!==o){if("Stopped"!==t.getDynamicVariablePlayState(r)&&"Restarted"!==t.getDynamicVariablePlayState(r)||(this.dynamicVars[c].last=e,this.dynamicVars[c].expectedTime=e+p,"counter"===h.dynamicVariableType&&t.getVariable(r)!==d&&(t.updateVariable(r,d),this.eventManager.requestRender()),("timer"===h.dynamicVariableType||"stopwatch"===h.dynamicVariableType)&&this.dynamicVars[c].timerSeconds!==d&&(this.dynamicVars[c].timerSeconds=d,t.updateVariable(r,eB.getFormattedTimerTime(d,h)),this.eventManager.requestRender()),"Restarted"===t.getDynamicVariablePlayState(r)&&t.setDynamicVariablePlayState(r,"Playing"),"Stopped"!==t.getDynamicVariablePlayState(r))){if("Paused"===t.getDynamicVariablePlayState(r)){void 0===this.dynamicVars[c].deltaToExpectedTime&&(this.dynamicVars[c].deltaToExpectedTime=Math.max(this.dynamicVars[c].expectedTime-e,0)),this.dynamicVars[c].last=e-(p-this.dynamicVars[c].deltaToExpectedTime),this.dynamicVars[c].expectedTime=e+this.dynamicVars[c].deltaToExpectedTime;continue}if(this.dynamicVars[c].deltaToExpectedTime=void 0,e>=o)if(this.dynamicVars[c].last=e,this.dynamicVars[c].expectedTime+=p,"random"===h.dynamicVariableType){let e=h.min+Math.random()*(h.max-h.min),i=h.decimals;e=Math.round(e*Math.pow(10,i))/Math.pow(10,i),t.updateVariable(r,e),n.push(r),this.eventManager.requestRender()}else if("counter"===h.dynamicVariableType){var a;let e=t.getVariable(r),i=null===(a=t.getDynamicVariableToggleIsForward(r))||void 0===a||a,s=t.getVariable(r)+h.increment*(i?1:-1);h.hasEnd&&(s=h.increment>0?wv.clamp(s,d,h.endValue):wv.clamp(s,h.endValue,d),s===d&&t.setDynamicVariableToggleIsForward(r,void 0),h.repeat?s===h.endValue&&(s=d):(s===d||s===h.endValue)&&t.setDynamicVariablePlayState(r,"Paused")),s!==e&&(n.push(r),t.updateVariable(r,s),this.eventManager.requestRender())}else if("time"===h.dynamicVariableType){let e=t.getVariable(r),a=hY(i,h);if("object"==typeof e&&"textValue"in e&&"object"==typeof a&&"textValue"in a){if(Array.isArray(e.textValue)&&Array.isArray(a.textValue)){if(e.textValue.every((e,t)=>e===a.textValue[t]))continue}else if(e.textValue===a.textValue)continue}else if(e===a)continue;t.updateVariable(r,a),n.push(r),this.eventManager.requestRender()}else{var s;let i=Qz.isTextValue(h.endValue)?m5(h.endValue.textValue):h.endValue,a=null===(s=t.getDynamicVariableToggleIsForward(r))||void 0===s||s,o=u+(e-l)/1e3*("timer"===h.dynamicVariableType?-1:1)*(a?1:-1);o=Math.max(o,0),h.hasEnd&&(o="stopwatch"===h.dynamicVariableType?wv.clamp(o,d,i):wv.clamp(o,i,d),o===d&&t.setDynamicVariableToggleIsForward(r,void 0),h.repeat?Math.abs(o-i)<("number3decimal"===h.format?1e-4:.1)&&(o=d):(Math.abs(o-d)<("number3decimal"===h.format?1e-4:.1)||Math.abs(o-i)<("number3decimal"===h.format?1e-4:.1))&&t.setDynamicVariablePlayState(r,"Paused")),o!==u&&(n.push(r),this.dynamicVars[c].timerSeconds=o,t.updateVariable(r,eB.getFormattedTimerTime(o,h)),this.eventManager.requestRender())}}}else this.dynamicVars[c].last=e,this.dynamicVars[c].expectedTime=e+p}let o=!1;t.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=t.mouseProperty,o=!0);let l=!1;t.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=t.raycastProperty,l=!0),this.events.forEach(e=>{(n.includes(e.data.variableId)||r.find(t=>t.objId===e.data.objectId&&t.property===e.data.property)||"mouseProperty"===e.data.variableId&&o||"raycastProperty"===e.data.variableId&&l)&&(e.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(e=>{var t;null===(t=e.data)||void 0===t||t.events.filter(e=>"VariableChange"===e.data.type&&!e.data.disabled).forEach(t=>{this.events.push(new f5(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(e=>"objectProperty"===e.data.variableId&&null!==e.data.objectId).map(e=>({objectId:e.data.objectId,property:e.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(t=>{let i,{id:n,data:r}=t;if("dynamicVariableType"in r)if("timer"===r.dynamicVariableType||"stopwatch"===r.dynamicVariableType){let e;if(Qz.isTextValue(r.value)&&Array.isArray(r.value.textValue)){let t=r.value.textValue;e=3===t.length?t[2]+60*t[1]+3600*t[0]:t[1]+60*t[0]}else e=r.value;i=e,this.dynamicVars.push({id:n,last:-1,expectedTime:-1,data:r,timerSeconds:e,startValue:i})}else"time"===r.dynamicVariableType&&e.updateVariable(n,hY(new Date,r)),"counter"===r.dynamicVariableType&&(i=Qz.isTextValue(r.value)?m5(r.value.textValue):r.value),this.dynamicVars.push({id:n,last:-1,expectedTime:-1,data:r,startValue:i});else this.events.find(e=>e.data.variableId===n)&&this.variablesToWatch.push({id:n,prevValue:e.getVariable(n)})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},f5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.actions=$1(t,t.actions,n,r,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}dispose(){e2(this.actions)}};function m5(e){return 3===e.length?e[2]+60*e[1]+3600*e[0]:e[1]+60*e[0]}var g5,v5,y5,b5="\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport('".concat("https://unpkg.com/@splinetool/runtime@1.10.99/build/","' + 'navmesh.js'),\n\t\tfetch('").concat("https://unpkg.com/@splinetool/navmesh-wasm@1.10.99/build/","' + 'navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n"),x5={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1};Ck.then(e=>{g5=e,v5=new e.Vec3,y5=new e.Vec3});var w5=new Zv,A5=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.usePhysics=e,this.isExport=t,this.onPointerDown=e=>{if(1!==fk.length)return;let{raycaster:t,page:i}=this.eventContext;this.eventContext.updateRaycaster(e);let n=i.raycastWithClones(t);if(0!==n.length){if(this.gameControl){let e=w5.copy(this.gameControl.colliderWorldPosition);e.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(e,n[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(e,t)=>i=>{var n,r,a,s,o,l;let c;if(i instanceof xQ){if(!i.objectForSample)return!0===i.object.dataPatched.physics.fusedBody&&"dynamic"===i.object.dataPatched.physics.rigidBody||void 0;if(i.objectForSample.dataPatched.physics.fusedBody)return;c=i.object}else if(i instanceof iU)c=i.object;else if(c=i,!1===(null===(n=c.dataPatched.cloner)||void 0===n?void 0:n.disabled)&&null!==(r=c.dataPatched.cloner)&&void 0!==r&&r.hideBase&&!0!==(null===(a=c.dataPatched.physics)||void 0===a?void 0:a.fusedBody))return!0;if(t&&!c.userData.navmesh)return;let h=c.dataPatched;if(!h.visible&&!0!==(null===(s=h.physics)||void 0===s?void 0:s.enabled))return!0;i.updateMatrixWorldSVD();let u=l4(h),d=c.userData.hasDestroy,p=c.userData.hasDrag,f=!1,m=!1;for(let e of h.events)!0!==e.data.disabled&&("GameControl"===e.data.type?f=!0:"Follow"===e.data.type&&(m=!0));if(f||u||m||d||p)return!0;var g;if(this.usePhysics&&"dynamic"===(null===(o=h.physics)||void 0===o?void 0:o.rigidBody)){if(this.usePhysics&&null!==(g=h.physics)&&void 0!==g&&g.fusedBody)return!0}else if("geometry"in i&&i.geometry&&e.push(j2(i.geometry,i.matrixWorld)),this.usePhysics&&null!==(l=h.physics)&&void 0!==l&&l.fusedBody)return i.traverseObject((t,i)=>{var n,r;if(0===i)return;let a;if(t instanceof xQ){if(!t.objectForSample)return!0===t.object.dataPatched.physics.fusedBody&&"dynamic"===t.object.dataPatched.physics.rigidBody||void 0;if(t.objectForSample.dataPatched.physics.fusedBody)return;a=t.object}else if(t instanceof iU)a=t.object;else if(a=t,null!==(n=t.dataPatched.cloner)&&void 0!==n&&n.hideBase)return!0;let s=a.dataPatched;if(!s.visible&&!0!==(null===(r=s.physics)||void 0===r?void 0:r.enabled))return!0;"geometry"in t&&t.geometry&&e.push(j2(t.geometry,t.matrixWorld))}),!0},this.traverseNoPhysics=(e,t)=>i=>{let n;if(i instanceof xQ)return;n=i instanceof iU?i.object:i;let r=n.dataPatched;if("visibility"===r.physics.enabled?!r.visible:!r.physics.enabled)return!0;if(t&&!n.userData.navmesh)return;let a=i.geometry,s=!0===n.userData.hasDestroy,o=!0===n.userData.hasDrag;if(l4(r)||s||o||n.dataPatched.events.some(e=>!0!==e.data.disabled&&"GameControl"===e.data.type))return!0;a&&e.push(j2(a,i.matrixWorld))},this.navmeshWasm=g5,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?b5:"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport(self.location.origin + '/_libraries/navmesh.js'),\n\t\tfetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n")+"\n\nonmessage = function(messageEvent) {\n\tconst meshData = messageEvent.data;\n\tconst positions = meshData[0];\n\tconst offset = meshData[1];\n\tconst indices = meshData[2];\n\tconst indicesLength = meshData[3];\n\tconst parameters = meshData[4];\n\n\tconst module = self.module;\n\tconst rc = new module.rcConfig();\n\trc.cs = parameters.cs;\n\trc.ch = parameters.ch;\n\trc.borderSize = parameters.borderSize ? parameters.borderSize : 0;\n\trc.tileSize = parameters.tileSize ? parameters.tileSize : 0;\n\trc.walkableSlopeAngle = parameters.walkableSlopeAngle;\n\trc.walkableHeight = parameters.walkableHeight;\n\trc.walkableClimb = parameters.walkableClimb;\n\trc.walkableRadius = parameters.walkableRadius;\n\trc.maxEdgeLen = parameters.maxEdgeLen;\n\trc.maxSimplificationError = parameters.maxSimplificationError;\n\trc.minRegionArea = parameters.minRegionArea;\n\trc.mergeRegionArea = parameters.mergeRegionArea;\n\trc.maxVertsPerPoly = parameters.maxVertsPerPoly;\n\trc.detailSampleDist = parameters.detailSampleDist;\n\trc.detailSampleMaxError = parameters.detailSampleMaxError;\n\n\tif (!self.navMesh) {\n\t\tself.navMesh = new module.NavMesh();\n\t}\n\tself.navMesh.build(positions, offset, indices, indicesLength, rc);\n\n\tconst navmeshData = navMesh.getNavmeshData();\n\tconst arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);\n\tconst ret = new Uint8Array(navmeshData.size);\n\tret.set(arrView);\n\tnavMesh.freeNavmeshData(navmeshData);\n\n\tpostMessage(ret);\n}\n"])),this._worker=new Worker(this._workerURL)}init(e,t,i){this.gameControl=t,this.eventContext=i,this.setDefaultQueryExtent((new Zv).setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,e=>{this.buildFromNavmeshData(e.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,i){t.objects.forEach(t=>{var i;let n=e.scene.find(t);n.traverseEntity(e=>{e.userData.navmesh=!0}),null===(i=n.cloner)||void 0===i||i.traverseObject(e=>{e.userData.navmesh=!0})});let n=[],r=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(n,"custom"===t.zones);if(e.traverseChildren(r),t.objects.forEach(t=>{var i;let n=e.scene.find(t);n.traverseEntity(e=>{e.userData.navmesh=void 0}),null===(i=n.cloner)||void 0===i||i.traverseObject(e=>{e.userData.navmesh=void 0})}),0===n.length)return!1;let a=qB(n),{positions:s,triIndices:o}=yH(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([s,s.length/3,o,o.length,(0,ye.A)((0,ye.A)({},x5),t)]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,t,i=this.navMesh.getDebugNavMesh(),n=i.getTriangleCount(),r=new Uint32Array(3*n),a=new Float32Array(3*n*3);for(e=0;e<3*n;e++)r[e]=e;for(e=0;e<n;e++)for(t=0;t<3;t++){let n=i.getTriangle(e).getPoint(t);a[9*e+3*t+0]=n.x,a[9*e+3*t+1]=n.y,a[9*e+3*t+2]=n.z}let s=new Cb;return s.setIndex(new mb(r,1)),s.setAttribute("position",new mb(a,3)),s}getClosestPoint(e){return v5.x=e.x,v5.y=e.y,v5.z=e.z,this.navMesh.getClosestPoint(v5)}getClosestPointToRef(e,t){v5.x=e.x,v5.y=e.y,v5.z=e.z;let i=this.navMesh.getClosestPoint(v5);t.set(i.x,i.y,i.z)}getRandomPointAround(e,t){return v5.x=e.x,v5.y=e.y,v5.z=e.z,this.navMesh.getRandomPointAround(v5,t)}getRandomPointAroundToRef(e,t,i){v5.x=e.x,v5.y=e.y,v5.z=e.z;let n=this.navMesh.getRandomPointAround(v5,t);i.set(n.x,n.y,n.z)}moveAlong(e,t){return v5.x=e.x,v5.y=e.y,v5.z=e.z,y5.x=t.x,y5.y=t.y,y5.z=t.z,this.navMesh.moveAlong(v5,y5)}moveAlongToRef(e,t,i){return v5.x=e.x,v5.y=e.y,v5.z=e.z,y5.x=t.x,y5.y=t.y,y5.z=t.z,this.navMesh.moveAlong(v5,y5)}computePath(e,t){let i=this.getClosestPoint(t);if(y5.x=i.x,y5.y=i.y,y5.z=i.z,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)+Math.pow(t.z-i.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let n=this.navMesh.computePath(v5,y5),r=n.getPointCount(),a=[];for(let s=0;s<r;s++){let e=n.getPoint(s);a.push(new Zv(e.x,e.y,e.z))}return a}createCrowd(e,t){return new S5(this,e,t)}setDefaultQueryExtent(e){v5.x=e.x,v5.y=e.y,v5.z=e.z,this.navMesh.setDefaultQueryExtent(v5)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(t),n=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,t);n.set(e);let r=new this.navmeshWasm.NavmeshData;r.dataPointer=n.byteOffset,r.size=e.length,this.navMesh.buildFromNavmeshData(r),this.navmeshWasm._free(n.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),null===(e=this.eventContext)||void 0===e||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,i){return v5.x=e.x,v5.y=e.y,v5.z=e.z,this.navMesh.addCylinderObstacle(v5,t,i)}addBoxObstacle(e,t,i){return v5.x=e.x,v5.y=e.y,v5.z=e.z,y5.x=t.x,y5.y=t.y,y5.z=t.z,this.navMesh.addBoxObstacle(v5,y5,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.navmeshWasm}},S5=class{constructor(e,t,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,i){let n=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;n.radius=t.radius,n.height=t.height,n.maxAcceleration=t.maxAcceleration,n.maxSpeed=t.maxSpeed,n.collisionQueryRange=t.collisionQueryRange,n.pathOptimizationRange=t.pathOptimizationRange,n.separationWeight=t.separationWeight,n.updateFlags=7,n.obstacleAvoidanceType=0,n.queryFilterType=0,n.userData=0;let r=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),n);return this.transforms.push(i),this.agents.push(r),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new Zv(0,0,0)),r}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let i=this.crowd.getAgentPosition(e);t.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let i=this.crowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let i=this.crowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let i=this.crowd.getAgentParameters(e);void 0!==t.radius&&(i.radius=t.radius),void 0!==t.height&&(i.height=t.height),void 0!==t.maxAcceleration&&(i.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(i.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(i.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(i.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(i.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=.001)return;let t=1/60;{let i=Math.floor(e/t);i>10&&(i=10),i<1&&(i=1);let n=e/i;for(let e=0;e<i;e++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let e=this.agents[i],t=this.getAgentPosition(e);if(this.transforms[i].copy(t),this._agentDestinationArmed[i]){let n=t.x-this._agentDestination[i].x,r=t.z-this._agentDestination[i].z,a=this.reachRadii[i],s=this._agentDestination[i].y-this.reachRadii[i],o=this._agentDestination[i].y+this.reachRadii[i],l=n*n+r*r;t.y>s&&t.y<o&&l<a*a&&(this.onReachTarget(e,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,i=this.crowd.getCorners(e),n=i.getPointCount(),r=[];for(t=0;t<n;t++){let e=i.getPoint(t);r.push(new Zv(e.x,e.y,e.z))}return r}dispose(){this.crowd.destroy()}};function _5(e){let t=!1;return e.scene.objects.forEach(i=>{"Page"===i.data.type&&!t&&i.data.publish.gameControlObject&&Hz.traverseModuleInstances(e,i.id,(e,i,n)=>{for(let r of n)"GameControl"===r.data.type&&r.data.navmesh.enabled&&(t=!0)})}),t}var E5={type:"change"},C5={type:"start"},M5={type:"end",nonOrbit:!0},T5={type:"end",nonOrbit:!1},P5={type:"end",isZoom:!0,nonOrbit:!0},D5={type:"end",changed:!1},O5={type:"cameraAnimatingInTimeline"},k5=new Kv,I5=new Av,R5=2*Math.PI,L5=new Zv,z5=new Av,B5=new Zv,j5=new Kv,F5=new My,N5={type:"requestRender"},U5=class extends ov{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isPlayMode:!1,isExport:!1},n=arguments.length>3?arguments[3]:void 0;super(),this.object=e,this.domElement=t,this.options=i,this.timelineState=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,$m,Zm],this.offset=new Zv,this.eye=new Zv,this.lastPosition=new Zv,this.lastQuaternion=new Kv,this.current=new Av,this.overShoot=new Av,this.overRatio=new Av,this.spherical=new OE,this.sphericalDelta=new OE,this.panOffset=new Zv,this.panLeftV=new Zv,this.panUpV=new Zv,this.panV=new Zv,this.rotateStart=new Av,this.rotateEnd=new Av,this.rotateDelta=new Av,this.panStart=new Av,this.panEnd=new Av,this.panDelta=new Av,this.dollyStart=new Av,this.dollyEnd=new Av,this.dollyDelta=new Av,this.rotationRangeFactor=new Av,this.panRangeFactor=new Av,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.isCurrentlyDamping=!1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=e=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=e.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(B5,j5,L5),this.offset.copy(B5).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(k5.copy(j5).invert()),this.panOffset.applyQuaternion(k5),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(j5),this.panOffset.applyQuaternion(j5)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),B5.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(F5.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(F5));let e=this.spherical.phi%R5;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(Jy.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),e>0&&e>Math.PI||e<0&&e>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping){let e=1===this.hoverRotatePanMode?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-e,this.sphericalDelta.phi*=1-e}else this.sphericalDelta.set(0,0,0);if(this.scale=1,this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8)return this.dispatchEvent(E5),this.object.dispatchEvent(N5),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),void(this.isCurrentlyDamping=!0);this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),this.isCurrentlyDamping=!1},this.onPointerDown=e=>{!1!==this.enabled&&("touch"===e.pointerType||"pen"===e.pointerType&&lk?this.onPointerDownTouch(e):this.onPointerDownMouse(e),-1!==this.state&&(this.isPointerDown=!0,this.dispatchEvent(C5),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&lk||this.domElement.setPointerCapture(e.pointerId)))},this.onPointerLeave=e=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(1===this.hoverRotatePanMode?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,L5.subVectors(this.position0,this.target0),this.spherical.setFromVector3(L5),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):2===this.hoverRotatePanMode&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=e},this.onPointerEnter=e=>{this.resetHoverEffectOnPointerLeave||void 0===this.pointerLeaveEvent?z5.set(e.clientX-this.domElement.clientWidth/2,e.clientY-this.domElement.clientHeight/2):z5.set(e.clientX-this.pointerLeaveEvent.clientX,e.clientY-this.pointerLeaveEvent.clientY),1===this.hoverRotatePanMode?(this.rotateDelta.copy(z5).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(I5,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(e.clientX,e.clientY)):2===this.hoverRotatePanMode&&(this.panDelta.copy(z5).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(e.clientX,e.clientY)),this.update()},this.onPointerMove=e=>{var t;null!==(t=this.timelineState)&&void 0!==t&&t.isPlayingCameraAnimation?this.dispatchEvent(O5):!1!==this.enabled&&(this.checkRaycastLock()||("touch"===e.pointerType||"pen"===e.pointerType&&lk?this.onPointerMoveTouch(e):this.onPointerMoveMouse(e),e.stopPropagation()))},this.onPointerUp=e=>{this.isPointerDown=!1,0===fk.length&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),fk.length>1&&e.preventDefault(),this.hasChange?this.dispatchEvent(0===this.state?T5:M5):this.dispatchEvent(D5),this.state=-1,e&&(e.stopPropagation(),"touch"===e.pointerType||"pen"===e.pointerType&&lk||this.domElement.releasePointerCapture(e.pointerId))},this.onPointerDownMouse=e=>{let t;switch(t=this.useKeyEvents?this.mouseButtons[e.button]:this.mouseButtonsPlay[e.button],t){case 0:if(!0!==e.altKey||e.shiftKey||pk(e)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2;break;case 3:if(pk(e)||e.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 5:if(pk(e)||e.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=e=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(e);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}this.object.wasMovedByUser=!0},this.onPointerDownTouch=e=>{switch(fk.length>1&&e.preventDefault(),this.touches[fk.length-1]){case Km:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case Zm:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case Jm:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case $m:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=e=>{switch(fk.length>1&&e.preventDefault(),this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(e),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(e),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(e),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(e),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=jO(()=>{this.zoomChanged?this.dispatchEvent(P5):this.dispatchEvent(M5),this.zoomChanged=!1},33),this.onMouseWheel=e=>{if(!1!==this.enabled&&(!1!==this.enableZoom||!1!==this.enablePan)&&!this.checkRaycastLock()){var t;if(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&e.preventDefault(),this.dispatchEvent(C5),null!==(t=this.timelineState)&&void 0!==t&&t.isPlayingCameraAnimation)return void this.dispatchEvent(O5);this.handleMouseWheel(e),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0}},this.onGesture=e=>{if(e.preventDefault(),!1!==this.enabled&&!this.checkRaycastLock()&&!sk){var t;if(null!==(t=this.timelineState)&&void 0!==t&&t.isPlayingCameraAnimation)return void this.dispatchEvent(O5);if("gesturechange"===e.type){if(!1===this.enableZoom||!1===this.isTouchZoom)return;this.dispatchEvent(C5),e.scale>this.prevScale?this.dollyIn(this.getZoomScale()):e.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=e.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(M5)}},this.onContextMenu=e=>{e.preventDefault()},this.onTouchEnd=e=>{e.preventDefault()},this.onKeyDown=e=>{!1!==this.enabled&&(this.key=e.key," "===e.key&&this.dispatchEvent(C5))},this.onKeyUp=e=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&"Alt"===e.key&&this.onPointerUp(fk[0])," "===e.key&&this.dispatchEvent(M5))},this.onPointerHover=e=>{"mouse"!==e.pointerType||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot||(this.isPointerDown=!0,2===this.hoverRotatePanMode?this.handleMouseMovePan(e,this.hoverRotatePanStrength):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(e,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=e=>{e.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){"start"===e.type?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){var i,n;this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=null!==(i=e.hoverRotateDamping)&&void 0!==i?i:this.dampingFactor,this.useWindowEvents="window"===t,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/this.maxZoom,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let a=this.object.getTarget().applyQuaternion(k5.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+a.y,this.maxV=e.panVerticalOffset.max+a.y,this.minH=-e.panHorizontalOffset.min+a.x,this.maxH=e.panHorizontalOffset.max+a.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=V5(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=V5(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=V5(V5(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=V5(V5(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=Km),1===e.panTouches&&(this.touches[0]=Zm),2===e.orbitTouches&&(this.touches[1]=$m),2===e.panTouches&&(this.touches[1]=Jm),3===e.orbitTouches&&(this.touches[2]=Km),3===e.panTouches&&(this.touches[2]=Zm),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=null!==(n=e.resetHoverEffectOnPointerLeave)&&void 0!==n&&n}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,n,r,a,s,o){let l,c,h;this.overShoot.set(0,0),e instanceof Zv?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),h=!0):(l=e.theta,c=e.phi,this.current.set(V5(this.spherical.theta),V5(this.spherical.phi)),h=!1),0===i&&(this.current.x+=l,this.current.y+=c),(3===t||2===t)&&(!h&&this.isThetaFlipped?this.current.x>n&&this.current.x<0?this.overShoot.x=n-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>n?this.overShoot.x=n-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(3===t||1===t)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<s&&(this.overShoot.y=s-this.current.y)),h||(this.overShoot.x=V5(this.overShoot.x),this.overShoot.y=V5(this.overShoot.y)),0!==i?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===i&&(this.overRatio.x=W5(Math.abs(this.overRatio.x)),this.overRatio.y=W5(Math.abs(this.overRatio.y))),this.isPointerDown||1===i?2===i&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):2===i&&(!h&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=.05*this.overShoot.x),this.phiIsFree||(c=.05*this.overShoot.y),h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof Zv?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let n=this.object.position;this.panV.copy(n).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*r/i.clientHeight,this.object.matrixWorld),this.panUp(2*t*r/i.clientHeight,this.object.matrixWorld)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrixWorld));this.dispatchEvent(E5)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(E5)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(E5)}setZoom(e){if(this.dispatchEvent(C5),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(M5)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0!==e.movementX?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(I5,-this.object.angleOffsetFromUp);let i=this.domElement,n=this.useWindowEvents?window.innerHeight:i.clientHeight,r=2*Math.PI*this.rotateDelta.x/n,a=2*Math.PI*this.rotateDelta.y/n;this.rotateLeft(r),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0!==e.movementX?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(!1===ok&&!1===pk(e)&&!0===function(e){return 0===e.wheelDeltaY||0===e.deltaY?!(ak&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1,this.dispatchEvent(M5)},30)}else{if(!1===this.enableZoom||this.gesture)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(2===fk.length){let e=.5*(fk[0].pageX+fk[1].pageX),t=.5*(fk[0].pageY+fk[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(fk[0].pageX,fk[0].pageY)}handleTouchStartPan(){if(2===fk.length){let e=.5*(fk[0].pageX+fk[1].pageX),t=.5*(fk[0].pageY+fk[1].pageY);this.panStart.set(e,t)}else this.panStart.set(fk[0].pageX,fk[0].pageY)}handleTouchStartDolly(){let e=fk[0].pageX-fk[1].pageX,t=fk[0].pageY-fk[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===fk.length){let t=wk(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==fk[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===fk.length){let t=wk(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.panEnd.set(i,n)}else{if(e.pointerId!==fk[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=wk(e),i=e.pageX-t.x,n=e.pageY-t.y,r=Math.sqrt(i*i+n*n);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{var e;let t=null===(e=this.options)||void 0===e?void 0:e.showCameraLock;return t&&t(),!0}}return!1}};function V5(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function W5(e){return 1-Math.pow(1-e,4)}var H5,G5=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.page=n,this.currentIntersectedObjects=[],this.actions=$1(t,t.actions,n,r,a,i),this.target=t.target,this.triggeringObjects=[];for(let s of t.triggeringObjects){let e=n.scene.find(s);e&&this.triggeringObjects.push(e)}}isValidTriggeringObject(e){return"all"===this.target||this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){e2(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.TimelineAnimation.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}};Dk.then(e=>H5=e);var q5=new Zv,Y5=new Kv,X5=new Zv,Q5=new By(0,0,0,"YXZ"),K5=new By(0,0,0,"XYZ"),Z5=new Zv,J5=new Zv,$5=new Zv(1,1,1),e4=new Kv,t4=new My,i4=new My,n4={type:"updateMatrix"},r4=new Kv,a4=new yy,s4={type:"beginEvent",eventName:"Collision"},o4={type:"beginEvent",eventName:"Trigger"};var l4=e=>e.states.some(e=>void 0!==e.data.position||void 0!==e.data.rotation||void 0!==e.data.hiddenMatrix||void 0!==e.data.cloner||void 0!==e.data.pathSnapping),c4=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.skipRender=!0,this.processRigidBody=e=>{if(e.bodyType()!==H5.RigidBodyType.Dynamic)return;e.isSleeping()||this.nActiveRigidBodies++;let[t,i,n]=this.rigidBodyToMesh.get(e.handle);if(q5.copy(e.translation()).multiplyScalar(this.pixelsPerMeter),Y5.copy(e.rotation()),t.matrixWorld.compose(q5,Y5,i),t.hasNonUniformScale&&t.matrixWorld.multiply(t.shearScale),t.dispatchEvent(n4),n){let e=t.cloner;if(e&&void 0===e.objectForSample){e.matrixWorld.copy(t.matrixWorld);for(let t of e.children)t.updateMatrixWorld(!0)}for(let i of t.children)i.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(e,t,i)=>{var n,r;if(!1===i)return;let a,s;if(this.sensorToTriggerEvent[e]?(a=this.sensorToTriggerEvent[e],s=this.sharedGameControlGlobals.colliderToEntity.get(t)):this.sensorToTriggerEvent[t]&&(a=this.sensorToTriggerEvent[t],s=this.sharedGameControlGlobals.colliderToEntity.get(e)),a&&s&&a.isValidTriggeringObject(s))a.dispatch();else{for(let i=this.sharedGameControlGlobals.createdObjects.length-1;i>=0;i--){var o,l;let n=this.sharedGameControlGlobals.createdObjects[i];if(n.userData.hasCollisionDestroy&&((null===(o=n.rigidBody)||void 0===o?void 0:o.collider(0).handle)===e||(null===(l=n.rigidBody)||void 0===l?void 0:l.collider(0).handle)===t)){this.sharedGameControlGlobals.createdObjects.splice(i,1),n.removeFromParent(),requestAnimationFrame(()=>{var e;return null===(e=this.sharedGameControlGlobals.rapierWorld)||void 0===e?void 0:e.removeRigidBody(n.rigidBody)});break}}if(void 0!==(null===(n=this.gameControl)||void 0===n?void 0:n.object)&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(e)){let e=this.sharedGameControlGlobals.colliderToEntity.get(t),i=this.sharedGameControlGlobals.entityToCollisionEvents[e.uuid];if(void 0===i)return;for(let n of i)"character"===n.data.target&&this.dispatchCollisionEvent(n,e,t)}else if(void 0!==(null===(r=this.gameControl)||void 0===r?void 0:r.object)&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let t=this.sharedGameControlGlobals.colliderToEntity.get(e),i=this.sharedGameControlGlobals.entityToCollisionEvents[t.uuid];if(void 0===i)return;for(let n of i)"character"===n.data.target&&this.dispatchCollisionEvent(n,t,e)}else{let i=this.sharedGameControlGlobals.colliderToEntity.get(e),n=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid];if(void 0!==n)for(let t of n)"scene"===t.data.target&&this.dispatchCollisionEvent(t,i,e);let r=this.sharedGameControlGlobals.colliderToEntity.get(t),a=this.sharedGameControlGlobals.entityToCollisionEvents[null===r||void 0===r?void 0:r.uuid];if(void 0!==a)for(let e of a)"scene"===e.data.target&&this.dispatchCollisionEvent(e,r,t)}}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=200,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(e=>{e.addEventListener("connected",e=>{"gamepad"in e.data&&"axes"in e.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(e.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let n of t.events){var i;if(!0===n.data.disabled)continue;let e=null===(i=n.data.actions)||void 0===i||null===(i=i.find(e=>"Destroy"===e.data.type))||void 0===i?void 0:i.data;if(e)for(let t of e.objects){let e=this.page.scene.find(t);e&&(e.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events)if(!0!==i.data.disabled&&"DragDrop"===i.data.type)for(let e of i.data.objects){let t=this.page.scene.find(e);t&&(t.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var i,n;let r;if(t instanceof xQ||t instanceof tK||t instanceof z$)return;r=t instanceof iU?t.object:t;let a=r.dataPatched;if("visibility"===(null===(i=a.physics)||void 0===i?void 0:i.enabled)?!a.visible:null===(n=a.physics)||void 0===n||!n.enabled)return!0;let s=t.geometry,o=!0===r.userData.hasDestroy,l=!0===r.userData.hasDrag;if(l4(a)||o||l||r.dataPatched.events.some(e=>!0!==e.data.disabled&&("GameControl"===e.data.type||"Follow"===e.data.type)))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;s&&s.getAttribute("position").count>0&&e.push(j2(s,t.matrixWorld))}),e.length>0){let t=qB(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new zN(t)}}addRigidBody(e,t,i){if(B2(e.matrixWorld))return;let n=[],r="geometry"in e?e.geometry:void 0,a=t.dataPatched;if(void 0!==(null===r||void 0===r?void 0:r.getAttribute("position"))&&n.push(j2(r,e.shearScale)),a.physics.fusedBody){let t=this.gatherChildrenGeom(e,n);e.traverseObject(t),e.children.forEach(e=>e.updateMatrixWorld(!0));let i=e.cloner;i&&void 0===i.objectForSample&&"dynamic"===a.physics.rigidBody&&(i.traverseObject(t),i.children.forEach(e=>e.updateMatrixWorld(!0)))}if(n.length>0){let o,l=!i.fromCreate&&"dynamic"===a.physics.rigidBody||i.fromCreate&&i.dynamic;l?(o=H5.RigidBodyDesc.dynamic(),o.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(o=H5.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):o=H5.RigidBodyDesc.fixed();let c=qB(n);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(q5,Y5,X5),e.position0=q5.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Y5.clone(),q5.divideScalar(this.pixelsPerMeter),o.setTranslation(q5.x,q5.y,q5.z).setRotation(Y5),r?null===c||void 0===c||c.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):null===c||void 0===c||c.scale(X5.x/this.pixelsPerMeter,X5.y/this.pixelsPerMeter,X5.z/this.pixelsPerMeter);let h=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);l&&this.rigidBodyToMesh.set(h.handle,[e,X5.clone(),a.physics.fusedBody]);let u=!(void 0===a.geometry||"SubdivGeometry"===a.geometry.type||"NonParametricGeometry"===a.geometry.type||"BooleanGeometry"===a.geometry.type||"VectorGeometry"===a.geometry.type||"StarGeometry"===a.geometry.type||"RectangleGeometry"===a.geometry.type||"EllipseGeometry"===a.geometry.type||"TriangleGeometry"===a.geometry.type||"TorusGeometry"===a.geometry.type||"HelixGeometry"===a.geometry.type);try{this.addCollider(h,a.physics,c,t,u)}catch(s){try{this.addCollider(h,a.physics,c,t,!1)}catch(y6){console.error(y6)}}e.rigidBody=h}}addBoundsTree(e){var t,i;let n=[];if(void 0!==(null===(t=e.geometry)||void 0===t?void 0:t.getAttribute("position"))&&(null===(i=e.geometry)||void 0===i?void 0:i.getAttribute("position").count)>0&&n.push(j2(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,n)),e.children.forEach(e=>e.updateMatrixWorld(!0)),n.length>0){let t=qB(n,!1);e.bvhGeometry=t,t.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new zN(t),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,i,n){var r,a;let s,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===(null===i||void 0===i?void 0:i.getAttribute("position").count)||0===(null===i||void 0===i||null===(r=i.getIndex())||void 0===r?void 0:r.count))return;i&&(s="trimesh"===t.colliderType?H5.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):H5.ColliderDesc.convexMesh(i.getAttribute("position").array,o?i.getIndex().array:void 0)),s.setFrictionCombineRule(H5.CoefficientCombineRule.Average).setRestitutionCombineRule(H5.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let l=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(l.handle,n),(null===(a=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid])||void 0===a?void 0:a.some(e=>"scene"===e.target))&&l.setActiveEvents(H5.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,n)=>{var r;if(0===n)return;let a;if(i instanceof xQ){if(!i.objectForSample)return!0===i.object.dataPatched.physics.fusedBody&&"dynamic"===i.object.dataPatched.physics.rigidBody||void 0;if(i.objectForSample.dataPatched.physics.fusedBody)return;a=i.object}else if(i instanceof iU)a=i.object;else if(a=i,null!==(r=a.dataPatched.cloner)&&void 0!==r&&r.hideBase)return!0;let s=a.dataPatched;if("visibility"===s.physics.enabled?!s.visible:!s.physics.enabled)return!0;1===n?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let o=i.geometry;void 0!==(null===o||void 0===o?void 0:o.getAttribute("position"))&&t.push(j2(o,i.matrixWorld))}}activate(e){if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,i=!1,n=5,r=8,a=9,s="drag",o=this.page.data.publish.gameControlObject,l=null!==o?this.page.find(o):null,c=null;if(l)for(let f of l.data.events){if(f.data.disabled||"GameControl"!==f.data.type)continue;let e=l;for(;this.usePhysics&&null!==(null===(h=e=e.parent)||void 0===h?void 0:h.parent);){var h,u;null===(u=e.data.physics)||void 0===u||u.fusedBody}f.data.collisionEnabled&&(this.needsCollisionDetection=!0),null===c&&(c=f.data)}if(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(!1===t.data.disabled&&"Trigger"===t.data.type)return this.needsCollisionDetection=!0,!0}),l&&c&&(!0===l.data.visible||!0===l.data.physics.enabled)){i=i||c.camera===t.uuid||l.uuid===t.uuid;let e=new L2(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=e,n=c.joystickPosLoc,r=c.joystickRotLoc,a=c.jumpTouchButtonLoc,s=c.rotByTouch,lk&&c.touchControl&&(this.joystickToGameControls[n]="pos","walk"===c.moveMode&&(this.joystickToGameControls[a]="jmp"),"joystick"===s&&(this.joystickToGameControls[r]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let e=this.gameControl.data;if(!this.navigationMeshWrapper){let t;this.navigationMeshWrapper=new A5(this.usePhysics,this.isExport),t="sphere"===e.collider.type?2*e.collider.radius:e.collider.height,t=Math.floor(t/e.navmesh.ch-1),this.navigationMeshWrapper.init((0,ye.A)((0,ye.A)({},e.navmesh),{},{walkableHeight:t}),this.gameControl,this.eventContext)}}if(!1===i){let{enableRotate:e,enablePan:i,enableZoom:n,autoRotate:r,hoverRotatePanMode:a}=this.eventManager.publish.orbitControls;(e||i||n||r||0!==a)&&(this.orbitControls=new U5(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let d=this.renderer.domElement.width/this.renderer.getPixelRatio(),p=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((e,t)=>{let i=document.body.appendChild(document.createElement("div")),[n,r,a]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[t],s=(d-5*n)/4+n,o={},l="jmp"===e,c=l?0:n;t<10?(t<5?o.top=c/2:o.bottom=c/2,o.left=c/2+t%5*s):10===t?(o.left=c/2,o.top=p/2):(o.right=c/2,o.top=p/2),o.top?o.top-=r[1]:o.bottom+=r[1],o.left?o.left+=r[0]:o.right-=r[0];for(let d in o)o[d]+="px";if(l){let e=i.appendChild(document.createElement("div"));Object.assign(e.style,o,{position:"absolute",width:n+"px",height:n+"px",backgroundColor:"rgba(255,255,255,".concat("show"===a?.4:0,")"),zIndex:"9999",borderRadius:n+"px",border:"show"===a?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let r=n/16*16*.4;return"show"===a&&(e.innerHTML='\n\t\t\t\t\t\t<svg width="'.concat(r,'" height="').concat(.4*n,'" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t')),e.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),e.addEventListener("touchend",e=>e.preventDefault()),void(this.joysticks[t]=[void 0,i])}let h={zone:i,mode:"static",position:o,size:n};"hide"===a&&(h.restOpacity=0);let u=e1(h);u.on("move",(t,i)=>{let n=this.gameControl;"pos"===e?i.force<.2?n.moveForce=0:(n.movementState.movePosZ=Math.sin(-i.angle.radian),n.movementState.movePosX=Math.cos(-i.angle.radian),i.force>1.2?n.movementState.run=1:n.movementState.run=0,i.force<.3?n.moveForce=(i.force-.2)/.1:n.moveForce=1):"rot"===e&&(i.force<.2?n.rotForce=0:(n.movementState.rotPosX=i.vector.y,n.movementState.rotPosY=-i.vector.x,i.force<.3?n.rotForce=(i.force-.2)/.1:n.rotForce=1)),this.requestRender()}),u.on("end",(t,i)=>{let n=this.gameControl;"pos"===e?(n.movementState.movePosZ=0,n.movementState.movePosX=0,n.moveForce=1):"rot"===e&&(n.movementState.rotPosX=0,n.movementState.rotPosY=0,n.rotForce=1)}),this.joysticks[t]=[u,i]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(e=>e.initialDisabled=!1)},80)}initPhysics(){var e;null!==(e=this.sharedGameControlGlobals.rapierWorld)&&void 0!==e&&e.free(),this.sharedGameControlGlobals.rapierWorld=new H5.World(new H5.Vector3(0,this.gravity,0)),this.events=new H5.EventQueue(!0);let t=[],i=[];if(this.page.traverseChildren(e=>{var n;let r;if(e instanceof xQ){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;r=e.object}else if(e instanceof iU)r=e.object;else{var a,s,o;if(e instanceof z$||e instanceof tK)return;if(r=e,!1===(null===(a=r.dataPatched.cloner)||void 0===a?void 0:a.disabled)&&null!==(s=r.dataPatched.cloner)&&void 0!==s&&s.hideBase&&!0!==(null===(o=r.dataPatched.physics)||void 0===o?void 0:o.fusedBody))return!0}let l,c=r.dataPatched;for(let t of c.events)!0!==t.data.disabled&&"GameControl"===t.data.type&&(l=t.data);if(!c.physics||("visibility"===c.physics.enabled?!c.visible:!c.physics.enabled))return!0;e.updateMatrixWorldSVD();let h=l4(c),u=!1,d=r.userData.hasDestroy,p=r.userData.hasDrag,f=!1;for(let t of c.events)if(!0!==t.data.disabled)if("Collision"===t.data.type){u=!0;let e=new d5(t.id,t.data,r,this.page,this.sharedAssets,this.eventManager);e.initialDisabled=!0,this.collisionEvents.push(e),this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid].every(e=>e.id!==t.id)?this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid].push(e):this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid]=[e]}else if("Follow"===t.data.type){f=!0;let i=t.data.target;e.traverseVisible(e=>{e.userData.isFollowingObj=i})}"dynamic"===c.physics.rigidBody&&!1===c.physics.fusedBody&&(e.matrixWorldFusedFalse=e.matrixWorld.clone());let m=e.geometry;if(void 0!==l){let t=H5.RigidBodyDesc.kinematicPositionBased();(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(q5,Y5,X5),e.position0=q5.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Y5.clone(),q5.divideScalar(this.pixelsPerMeter),t.setTranslation(q5.x,q5.y,q5.z).setRotation(Y5);let i,n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(t);e.rigidBody=n,i="sphere"===l.collider.type?H5.ColliderDesc.ball(l.collider.radius/this.pixelsPerMeter):"capsule"===l.collider.type?H5.ColliderDesc.capsule((l.collider.height/2-l.collider.radius)/this.pixelsPerMeter,l.collider.radius/this.pixelsPerMeter):H5.ColliderDesc.cuboid(l.collider.width/this.pixelsPerMeter/2,l.collider.height/this.pixelsPerMeter/2,l.collider.depth/this.pixelsPerMeter/2),i.setFrictionCombineRule(H5.CoefficientCombineRule.Average).setRestitutionCombineRule(H5.CoefficientCombineRule.Average).setDensity(c.physics.density).setFriction(c.physics.friction).setRestitution(c.physics.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(i,n);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,r),q5.fromArray(l.collider.position).multiply(X5.setFromMatrixScale(r.matrixWorld)).divideScalar(this.pixelsPerMeter),a.setTranslationWrtParent(q5);let s=(new Kv).setFromEuler((new By).setFromVector3((new Zv).fromArray(l.collider.rotation)));a.setRotationWrtParent(s),a.setActiveEvents(H5.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(r,!0)}else"dynamic"===c.physics.rigidBody||h||f||d||p||u?(this.addRigidBody(e,r,{hasFollow:f,hasTransformAnim:h,hasDrag:p}),this.generateSensorColliderDescs(r,c.physics.fusedBody)):(m&&t.push(j2(m,e.matrixWorld)),c.physics.fusedBody&&e.traverseObject((e,i)=>{if(0===i)return;let n;if(e instanceof xQ){if(!e.objectForSample)return!0===e.object.dataPatched.physics.fusedBody&&"dynamic"===e.object.dataPatched.physics.rigidBody||void 0;if(e.objectForSample.dataPatched.physics.fusedBody)return;n=e.object}else{var r;if(e instanceof z$||e instanceof tK)return;if(e instanceof iU)n=e.object;else if(n=e,null!==(r=n.dataPatched.cloner)&&void 0!==r&&r.hideBase)return!0}let a=n.dataPatched;if("visibility"===a.physics.enabled?!a.visible:!a.physics.enabled)return!0;let s=e.geometry;void 0!==(null===s||void 0===s?void 0:s.getAttribute("position"))&&t.push(j2(s,e.matrixWorld))}),this.generateSensorColliderDescs(r,c.physics.fusedBody,i));return!(!0!==(null===(n=c.physics)||void 0===n?void 0:n.fusedBody)&&!l)||void 0}),0===t.length)return;let n=qB(t);n.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=H5.RigidBodyDesc.fixed(),a=this.sharedGameControlGlobals.rapierWorld.createRigidBody(r),s=H5.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array).setFrictionCombineRule(H5.CoefficientCombineRule.Multiply).setRestitutionCombineRule(H5.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,a);for(let[o,l]of i){let e=this.sharedGameControlGlobals.rapierWorld.createCollider(o,a);this.sensorToTriggerEvent[e.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let i=new G5(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),n=(new My).compose(Z5.fromArray(t.data.position),e4.setFromEuler(K5.fromArray(t.data.rotation)),$5);if("box"===t.data.triggerZone){let r=new ey;r.min.fromArray(t.data.size).multiplyScalar(-.5),r.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([r,n,e,i])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,n,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){if(this.isEnabled){var e,t,i,n;this.isEnabled=!1,this.page.traverse(e=>{let t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)}),null!==(e=this.sharedGameControlGlobals.rapierWorld)&&void 0!==e&&e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),null!==(t=this.gameControl)&&void 0!==t&&t.reset(),null!==(i=this.gameControl)&&void 0!==i&&i.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(e=>{let[t,i]=e;null!==t&&void 0!==t&&t.destroy(),i.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),null!==(n=this.navigationMeshWrapper)&&void 0!==n&&n.dispose(),this.navigationMeshWrapper=void 0;for(let e of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))e.forEach(e=>e.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,i){if(!this.isEnabled)return!0;let n=!0;if(void 0!==this.orbitControls&&this.orbitControls.needsUpdate&&(this.orbitControls.update(),n=!this.orbitControls.isCurrentlyDamping),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,n=!1):2===this.initializationCounter&&this.gameControl&&(n=!this.gameControl.update(e,t,i)&&n),!1===this.usePhysics&&this.checkTrigger(),this.usePhysics){let t=.016666666666666666;if(0===e)n=this.stepPhysics()&&n;else{let i=e/1e3;i<t&&i>.55*t&&(i=t),this.accumulator+=i;let r=performance.now(),a=0,s=6;for(;this.accumulator>=t&&a<s&&(n=this.stepPhysics()&&n,this.accumulator-=t,a++,!(performance.now()-r>1e3*t)););this.accumulator=this.accumulator%t}}this.skipRender=n}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(q5,Y5,X5),Q5.setFromQuaternion(Y5);let e=t;void 0===e.prevR?(e.prevR=Q5.clone(),e.prevT=q5.clone()):(e.prevR.copy(Q5),e.prevT.copy(q5)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(q5.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(Y5))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),null!==(e=this.events)&&void 0!==e&&e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,i){var n;let r,a=(null===(n=this.sharedGameControlGlobals.rapierWorld)||void 0===n?void 0:n.getCollider(i))._parent;if(t.cloner)for(let s of t.cloner.children)if(s.rigidBody===a){r=s;break}e.dispatch(r),t.dispatchEvent(s4)}updateUseWindowEvents(e){var t;null===(t=this.orbitControls)||void 0===t||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,i){let n=i4.copy(e.matrixWorld).invert();e.traverseEntity((r,a)=>{if(!1===t&&1===a)return!0;for(let t of r.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let a,s=new G5(t.id,t.data,r,this.page,this.sharedAssets,this.eventManager);if(a="box"===t.data.triggerZone?H5.ColliderDesc.cuboid(...t.data.size.map(e=>e/(2*this.pixelsPerMeter))):H5.ColliderDesc.ball(t.data.radius/this.pixelsPerMeter),a.setDensity(0).setSensor(!0).setActiveEvents(H5.ActiveEvents.COLLISION_EVENTS),Z5.fromArray(t.data.position),e4.setFromEuler(K5.fromArray(t.data.rotation)),t4.compose(Z5,e4,$5).premultiply(r.matrixWorld),i?(t4.decompose(Z5,e4,J5),a.setActiveCollisionTypes(H5.ActiveCollisionTypes.KINEMATIC_FIXED|H5.ActiveCollisionTypes.DYNAMIC_FIXED)):(t4.premultiply(n).decompose(Z5,e4,J5),e.rigidBody.bodyType()===H5.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===H5.RigidBodyType.Fixed?a.setActiveCollisionTypes(H5.ActiveCollisionTypes.KINEMATIC_FIXED|H5.ActiveCollisionTypes.DYNAMIC_FIXED):a.setActiveCollisionTypes(H5.ActiveCollisionTypes.KINEMATIC_KINEMATIC|H5.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Z5.divideScalar(this.pixelsPerMeter),a.setTranslation(Z5.x,Z5.y,Z5.z),a.setRotation(e4),i)i.push([a,s]);else{let t=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e.rigidBody);this.sensorToTriggerEvent[t.handle]=s}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[i,n,r,a]=this.sharedGameControlGlobals.triggers[t];for(let t=0;t<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;t++){let s=this.sharedGameControlGlobals.entitiesWithTransformAnim[t];if(r===s||!1===a.isValidTriggeringObject($N.is(s)?s:s.object))continue;let o=i4.copy(r.matrixWorld).decompose(Z5,r4,J5).compose(Z5,r4,$5).multiply(n),l=t4.copy(s.matrixWorld).invert().multiply(o);i instanceof ey?e=s.bvhGeometry.boundsTree.intersectsBox(i,l):(a4.radius=i,a4.center.setFromMatrixPosition(l),e=s.bvhGeometry.boundsTree.intersectsSphere(a4)),e?-1===a.currentIntersectedObjects.indexOf(s)&&(a.currentIntersectedObjects.push(s),a.dispatch(),r.dispatchEvent(o4)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(e=>e!==s)}}}};function h4(e){var t;let i=this._clip.duration,n=null!==(t=this._clip.start)&&void 0!==t?t:0,r=this.loop,a=this.time+e,s=this._loopCount,o=r===Hg;if(0===e)return-1===s?a:o&&1===(1&s)?i-(a-n):a;if(2200===r){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=i)a=i;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),a>=i||a<n){let t=Math.floor((a-n)/(i-n));a-=(i-n)*t,s+=Math.abs(t);let r=this.repetitions-s;if(r<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o||(a=e>0?i:n,1===this.repetitions&&(a=i)),this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===r){let t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:t})}}else this.time=a;if(o&&1===(1&s))return i-(a-n)}return a}var u4,d4=!1,p4=class{constructor(e,t,i,n){this.scene=e,this.requestRender=t,this.updateDisplayProgress=i,this.animationInspectorState=n,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=e=>{"Empty"===e.data.type&&e.data.animations&&e.data.animations.forEach((t,i)=>{let n=t[0]+"/";if(Array.isArray(e.identity)?n+=e.identity[0]:n+=e.uuid,this.clipIdToAction[n])return;let r=z_.parse(JSON.parse(t[2]));e.animations[i]=r;let a=this.mixer.clipAction(r,e);!1===d4&&(Object.getPrototypeOf(a)._updateTime=h4,d4=!0),a.clampWhenFinished=!0,this.clipIdToAction[n]=a})},this.mixer=new CE(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let i=this.scene.find(t);if(!i)return;let n=i.animations.find(t=>t.uuid===e);if(!n)return;let r=this.clipIdToAction[e];!r||(r.stop(),this.mixer.uncacheClip(n),delete this.clipIdToAction[e],i.animations=i.animations.filter(t=>t.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=2201}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,i=this.clipIdToAction[t];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),"pingpong"===e.direction&&0!==e.repeat&&(i.loop=Hg)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(!1===this.isPlaying||null!==(t=this.animationInspectorState)&&void 0!==t&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){var e;return G1(null!==(e=this.activeClip)&&void 0!==e?e:void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let i=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[t].paused=!0)}},f4=new WeakMap,m4=class extends U_{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,n){let r=new H_(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{this.decodeDracoFile(e,t).catch(n)},i,n)}decodeDracoFile(e,t,i,n){let r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(f4.has(e)){let t=f4.get(e);if(t.key===i)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n,r=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(r,a).then(i=>(n=i,new Promise((i,a)=>{n._callbacks[r]={resolve:i,reject:a},n.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{n&&r&&this._releaseTask(n,r)}),f4.set(e,{key:i,promise:s}),s}_createGeometry(e){let t=new Cb;e.index&&t.setIndex(new mb(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let n=e.attributes[i],r=n.name,a=n.array,s=n.itemSize;t.setAttribute(r,new mb(a,s))}return t}_loadLibrary(e,t){let i=new H_(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((t,n)=>{i.load(e,t,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let n=g4.toString(),r=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};function g4(){let e,t;function i(e,t,i,n,r,a){let s=a.num_components(),o=i.num_points()*s,l=o*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),h=e._malloc(l);t.GetAttributeDataArrayForAllPoints(i,a,c,l,h);let u=new r(e.HEAPF32.buffer,h,o).slice();return e._free(h),{name:n,array:u,itemSize:s}}onmessage=function(n){let r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let n=r.buffer,a=r.taskConfig;t.then(e=>{let t=e.draco,s=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(n),n.byteLength);try{let e=function(e,t,n,r){let a,s,o=r.attributeIDs,l=r.attributeTypes,c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,s=t.DecodeBufferToMesh(n,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,s=t.DecodeBufferToPointCloud(n,a)}if(!s.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());let h={index:null,attributes:[]};for(let u in o){let n,s,c=self[l[u]];if(r.useUniqueIDs)s=o[u],n=t.GetAttributeByUniqueId(a,s);else{if(s=t.GetAttributeId(a,e[o[u]]),-1===s)continue;n=t.GetAttribute(a,s)}h.attributes.push(i(e,t,a,u,c,n))}return c===e.TRIANGULAR_MESH&&(h.index=function(e,t,i){let n=3*i.num_faces(),r=4*n,a=e._malloc(r);t.GetTrianglesUInt32Array(i,r,a);let s=new Uint32Array(e.HEAPF32.buffer,a,n).slice();return e._free(a),{array:s,itemSize:1}}(e,t,a)),e.destroy(a),h}(t,s,o,a),n=e.attributes.map(e=>e.array.buffer);e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},n)}catch(l){console.error(l),self.postMessage({type:"error",id:r.id,error:l.message})}finally{t.destroy(o),t.destroy(s)}})}}}function v4(e){return u4||(u4=new m4).setDecoderPath(e?"".concat(e,"/"):"https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),u4.decoderPending}async function y4(e){if(u4){let t,i={attributeIDs:u4.defaultAttributeIDs,attributeTypes:u4.defaultAttributeTypes,useUniqueIDs:!1};try{t=await u4.decodeGeometry(new Int8Array(e).buffer,i)}catch(h6){console.error(h6)}if(t)return{index:t.index?{array:t.index.array}:void 0,attributes:Object.entries(t.attributes).map(e=>{let[t,i]=e;return{name:t,itemSize:i.itemSize,array:i.array}})}}return null}async function b4(e){for(let t of e){let e=await y4(t.geometry.data.draco);if(e){let i=t.geometry.data;e.index&&(i.index={array:e.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let n={};e.attributes.forEach(e=>{let{name:t,array:i,itemSize:r}=e;n[t]={array:i,itemSize:r,type:"Float32Array",normalized:!1}}),i.attributes=n,i.draco=void 0}}}var x4=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],i=(new Date).getTime();if(this._clickCount>0){let e=t[0]-this._lastPosition[0],i=t[1]-this._lastPosition[1];Math.sqrt(e*e+i*i)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=i-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=i},this._onMouseUp=e=>{}}start(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this._target&&this.stop(),this.reset(),this._delay=t,this._distance=i,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},w4=class{constructor(e,t,i,n,r,a,s,o){this.eventId=e,this.id=t,this.data=i,this.dataEvent=n,this.object=r,this.stage=!1,this.actions=$1(n,i.actions,a,s,o,r)}disconnect(){e2(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},A4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(e,t)=>{this.breakpoints.forEach(i=>{let n,r=uL.deviceToSize(i.data.size),a="horizontal"===i.dataEvent.orientation?e:t;switch(i.data.operator){case"<":n=a<r[0];break;case">":n=a>r[0];break;case"<>":n=a>r[0]&&a<r[1]}i.stage!==n&&(i.stage=n,i.stage?i.dispatchIn():i.dispatchOut())})},this.onResizeObserver=new ResizeObserver(e=>{for(let t of e){let{width:e,height:i}=t.contentRect;this.resize(e,i)}})}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let n=i=>{var n;if(i.visible&&null!==(n=i.data)&&void 0!==n&&n.events.length)for(let{data:r,id:a}of i.data.events)r.disabled||"Resize"===r.type&&r.breakpoints.forEach(n=>{let{data:s,id:o}=n;try{let n=new w4(a,o,s,r,i,e,t,this.eventManager);this.breakpoints.push(n)}catch(Y6){}})};e.traverseEntity(e=>{var t;(e instanceof A$||e instanceof d$)&&null!==(t=e.frame)&&void 0!==t&&t.traverse(e=>{n(e)}),n(e)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},S4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=e=>{let{userAPIId:t}=e;this.events.forEach(e=>{e.data.userAPIId===t&&e.dispatchSuccess()})},this.onError=e=>{let{userAPIId:t}=e;this.events.forEach(e=>{e.data.userAPIId===t&&e.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;null===(t=e.data)||void 0===t||t.events.filter(e=>"API"===e.data.type&&!e.data.disabled).forEach(t=>{this.events.push(new _4(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(e=>{let[t,i]=e;i.on("success",this.onSuccess),i.on("error",this.onError),i.autostart&&i.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(e=>{let[t,i]=e;i.off("success",this.onSuccess),i.off("error",this.onError)})}},_4=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.successActions=$1(t,t.successActions,n,r,a,i),this.errorActions=$1(t,t.errorActions,n,r,a,i)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}},E4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=e=>{let{userWebhookId:t}=e;this.events.forEach(e=>{e.data.userWebhookId===t&&e.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;null===(t=e.data)||void 0===t||t.events.filter(e=>"WEBHOOK"===e.data.type&&!e.data.disabled).forEach(t=>{this.events.push(new C4(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(e=>{let[t,i]=e;i.connect(),i.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(e=>{let[t,i]=e;i.off("message",this.onMessage),i.disconnect()})}},C4=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.actions=$1(t,t.actions,n,r,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}};var M4=new Zv(0,0,1),T4=new Zv,P4=new Zv,D4=new Sv,O4=class{constructor(e,t,i,n,r){this.containerScene=e,this.raycaster=t,this.sharedAssets=i,this.requestRender=n,this.onExit=r,this.htmlInput=null,this.virtualInput=null,this.helper=new eJ,this.doubleClickHandler=new x4,this.isDragging=!1,this.plane=new nx,this.caretInterval=0,this.planeIntersection=new Zv,this.projected=new Av,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var e;let t=null===(e=this.virtualInput)||void 0===e?void 0:e.data;if(void 0!==this.virtualInput&&t){let e=t.material,i=function(e,t){let i=SL.fromHex(3223857),n=.8;for(let r of e.layers){if("light"===r.data.type||"displace"===r.data.type||"fresnel"===r.data.type||"matcap"===r.data.type||"texture"===r.data.type||"toon"===r.data.type||"outline"===r.data.type||"transmission"===r.data.type||"noise"===r.data.type)continue;let e="string"==typeof r.data.alpha?Number(t.getVariable(r.data.alpha)):r.data.alpha;if("color"===r.data.type&&e>.3){i=nJ(r.data.color,t),n=e;break}if(("depth"===r.data.type||"gradient"===r.data.type)&&e>.3){let e=rJ(r.data);i={r:e[0],g:e[1],b:e[2]},n="string"==typeof r.data.alpha?1:r.data.alpha;break}}return(0,ye.A)((0,ye.A)({},i),{},{a:n})}("string"==typeof e?this.sharedAssets.data.materials[e]:e,this.sharedAssets);this.helper.setCaretColor(i)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=e=>{if(!this.htmlInput||!this.virtualInput)return;let t=this.helper,i="ArrowLeft"===(null===e||void 0===e?void 0:e.key)||"ArrowRight"===(null===e||void 0===e?void 0:e.key),n="ArrowUp"===(null===e||void 0===e?void 0:e.key)||"ArrowDown"===(null===e||void 0===e?void 0:e.key);this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(t.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:i,verticalKeyMove:n}),this.startAnimateTextCursor()):t.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=function(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),null!==(e=this.htmlInput)&&void 0!==e&&e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var e,t;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let i=this.doubleClickHandler.clickCount,{index:n,lineIndex:r,characterIndex:a}=null!==(e=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,i>1?"inside":"previous"))&&void 0!==e?e:{index:0,lineIndex:0,characterIndex:0};null!==(t=this.virtualInput)&&void 0!==t&&null!==(t=t.wrappedText)&&void 0!==t&&t.length&&"\n"===this.virtualInput.wrappedText[r][Math.max(0,a-1)]&&(n--,a--),this._lastIndex=n,this._isFirstDragMove=!0;let s=this.checkClickedObject();if(1===i){if(null===s)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=n,this.isDragging=!0,this.setInputSelection(n)}else s===this.virtualInput&&(2===i?this.selectClosestWord(r,a):i>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){var t,i;let e=null===(t=this.data)||void 0===t?void 0:t.geometry.text;this.htmlInput.value="string"==typeof e?"":null!==(i=null===e||void 0===e?void 0:e.textValue.toString())&&void 0!==i?i:""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var e,t;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let i=this.selectionOnDragStart,{index:n,lineIndex:r,characterIndex:a}=null!==(e=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous"))&&void 0!==e?e:{index:0};void 0!==r&&void 0!==a&&"\n"===(null===(t=this.virtualInput)||void 0===t?void 0:t.wrappedText[r][a-1])&&n--,this.htmlInput.setSelectionRange(Math.min(i,n),Math.max(i,n))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof g$)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let i=this.virtualInput.wrappedText,n=i[e],r=t+1,a=t;" "!==n[t]&&(r=this.findNextCharOccurence(n,t,"forward"," "),a=this.findNextCharOccurence(n,t,"backward"," "),a>0&&a++,r>=n.length-1&&e===i.length-1&&r++);let s=this.helper,o=s.getGlobalIndexFromLineAndCharIndexes(i,e,a),l=s.getGlobalIndexFromLineAndCharIndexes(i,e,r);this.setInputSelection(o,l)}findNextCharOccurence(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",r=Math.max(0,e.length-1),a="forward"===i?r:0,s="forward"===i?1:-1,o=Math.max(Math.min(t,r),0);for(;o!==a;)if(o+=s,e.charAt(o)===n)return o;return a}getPointOnPlane(){var e;let t=null===(e=this.virtualInput)||void 0===e?void 0:e.data;if(this.virtualInput&&t&&this.raycaster.ray.intersectsPlane(this.plane)){null===this.planeIntersection&&(this.planeIntersection=new Zv);let e=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(e){this.planeIntersection.copy(this.virtualInput.worldToLocal(e));let i="number"==typeof t.geometry.width?t.geometry.width:1,n="number"==typeof t.geometry.height?t.geometry.height:1;this.projected.set(e.x+.5*i,e.y-.5*n)}}}updatePlane(){var e;let t=null===(e=this.virtualInput)||void 0===e?void 0:e.data;this.virtualInput&&t&&(D4.getNormalMatrix(this.virtualInput.matrixWorld),T4.copy(M4).applyMatrix3(D4).normalize(),this.virtualInput.localToWorld(P4.set(0,0,t.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(T4,P4))}setInputSelection(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;null!==(t=this.htmlInput)&&void 0!==t&&t.setSelectionRange(e,n),sk&&null!==(i=this.htmlInput)&&void 0!==i&&i.focus(),setTimeout(()=>{var e;null===(e=this.htmlInput)||void 0===e||e.focus()})}updateTextInputStyles(){var e;let t=null===(e=this.virtualInput)||void 0===e?void 0:e.data;this.virtualInput&&t&&this.htmlInput&&(this.htmlInput.style.fontSize=t.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=t.geometry.letterSpacing*t.geometry.fontSize+"px",this.htmlInput.style.lineHeight=t.geometry.fontSize*t.geometry.lineHeight+"px",this.htmlInput.style.width=t.geometry.width+"px",this.htmlInput.style.height=t.geometry.height+"px",this.htmlInput.style.textAlign=function(e){return 4===e?"justify":2===e?"right":3===e?"center":"left"}(t.geometry.horizontalAlign))}};var k4=(e,t)=>{if("string"==typeof e){let i=t.data(e);if(i)return k4(i.value,t)}return Qz.getDisplayedValue(e)};function I4(e,t){let i=e.text,n="";if("string"==typeof i){let e=t.variables.data(n);e&&(n=k4(e.value,t.variables))}else n=i.textValue.toString();return n}var R4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new NA,this.helper=new eJ,this._onMouseDownFocusIn=e=>{if(fk.length>1)return;this.eventContext.updateRaycaster(e);let t=null;if(this.eventContext.raycaster)for(let i of this._textInputs)if(this.eventContext.raycaster.intersectObject(i,!0).length>0){t=i;break}this.focusOnTextInput(t),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(e),this._onMouseDown(e)},this.onExit=()=>{let{virtualInput:e}=this.textInputManager;if(null===e)return;let t=this.textInputManager.htmlInput;this.helper.hide(),null!==t&&void 0!==t&&t.setSelectionRange(t.value.length,t.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:i}=this.eventContext;i.removeEventListener("pointerdown",this._onMouseDown,!1),i.removeEventListener("pointerup",this._onMouseUp,!1),i.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),i.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=e=>{this.eventContext.updateRaycaster(e),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=e=>{this.eventContext.updateRaycaster(e),this.textInputManager.handleMouseMove()},this._onTextEdit=e=>{let{htmlInput:t,virtualInput:i,helper:n}=this.textInputManager;if(!t||!i)return;let r=t.value;i.textGeometry.setText(r,this.eventContext.sharedAssets).then(()=>{this.eventContext.requestRender()});let a=i.data;n.update();let s=a.geometry.text;if("string"==typeof s){let e=s;this.eventContext.sharedAssets.updateVariable(e,{textValue:r})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=e=>{this.textInputManager.handleCaretUpdate(e)},this._onKeyPress=e=>{"Escape"===e.key&&this.onExit()},this.textInputManager=new O4(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(t=>{t instanceof g$&&e.push(t)}),this._textInputs=e,0===e.length)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let i=this.textInputManager.createInput();document.body.appendChild(i),i.style.display="none",i.addEventListener("keyup",this._onCaretUpdate),i.addEventListener("keydown",this._onCaretUpdate),i.addEventListener("beforeinput",this._onCaretUpdate),i.addEventListener("paste",this._onCaretUpdate),i.addEventListener("cut",this._onCaretUpdate),i.addEventListener("select",this._onCaretUpdate),i.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t,sharedAssets:i}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),null!==e&&void 0!==e&&e.removeEventListener("keyup",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("keydown",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("beforeinput",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("paste",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("cut",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("select",this._onCaretUpdate),null!==e&&void 0!==e&&e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(e=>{let t=I4(e.data.geometry,this.eventContext.sharedAssets.data);e.textGeometry.setText(t,i)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||null===e)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let i=I4(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=i,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDownFocusIn),n.addEventListener("pointerdown",this._onMouseDown,!1),n.addEventListener("pointerup",this._onMouseUp,!1),n.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},L4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=e=>{let{value:t,frequencies:i}=e;this.events.forEach(e=>{e.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;null===(t=e.data)||void 0===t||t.events.filter(e=>"AIAssistantListener"===e.data.type&&!e.data.disabled).forEach(t=>{this.events.push(new z4(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){var e;null===(e=this.openAIRealtime)||void 0===e||e.off("voice",this.onVoice)}},z4=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.actions=$1(t,t.actions,n,r,a,i)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}},B4=class extends $2{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=e=>{let{description:t,direction:i}=e,n=this.events.find(e=>e.data.description===t);n&&("backward"===i?n.dispatchReverse():n.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;null===(t=e.data)||void 0===t||t.events.filter(e=>"AIAssistantTrigger"===e.data.type&&!e.data.disabled).forEach(t=>{this.events.push(new j4(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){var e;null===(e=this.openAIRealtime)||void 0===e||e.off("trigger_event",this.onTriggerEvent)}},j4=class{constructor(e,t,i,n,r,a){this.id=e,this.data=t,this.object=i,this.actions=$1(t,t.actions,n,r,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(e=>e.dispatchConditional()),e.Particles.forEach(e=>e.dispatchConditional()),e.Video.forEach(e=>e.dispatchConditional()),e.Create.forEach(e=>e.dispatch()),e.Destroy.forEach(e=>e.dispatch()),e.Reset.forEach(e=>e.dispatch()),e.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this),e.init()}),e.Transition.forEach(e=>e.play()),e.Animation.forEach(e=>e.play()),e.SwitchCamera.forEach(e=>e.play()),e.SceneTransition.forEach(e=>e.dispatch()),e.SetVariable.forEach(e=>e.checkConditions()),e.SetVariable.forEach(e=>e.dispatch()),e.DynamicVariablePlay.forEach(e=>e.dispatch()),e.ClearLocalStorage.forEach(e=>e.dispatch()),e.UserAPI.forEach(e=>e.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(e=>e.reverseFromCurrent()),e.Particles.forEach(e=>e.reverseFromCurrent()),e.Animation.forEach(e=>e.reverseFromCurrent()),e.SwitchCamera.forEach(e=>e.reverseFromCurrent()),e.Create.forEach(e=>e.dispatchStop())}},F4=class{constructor(e,t,i,n,r){this.publish=e,this.controlsManager=t,this.animationControls=i,this.eventContext=n,this.sharedVariables=r,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=e=>{let t=window.parent!==window,i=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(e.touches.length>1||this.preventTouchScroll||!1===t&&!1===i)&&e.preventDefault()},this.onMouseWheelPreventScroll=e=>{this.preventScroll&&e.preventDefault()},this.onMouseMove=e=>{this.eventContext.sharedAssets.mouseProperty=(0,ye.A)((0,ye.A)({},this.getMousePosition(e)),{},{pressed:e.buttons>0})},this.onMouseDown=e=>{this.eventContext.sharedAssets.mouseProperty=(0,ye.A)((0,ye.A)({},this.getMousePosition(e)),{},{pressed:!0})},this.onMouseUp=e=>{this.eventContext.sharedAssets.mouseProperty=(0,ye.A)((0,ye.A)({},this.getMousePosition(e)),{},{pressed:!1})},this.getMousePosition=e=>{var t;let{domRect:i}=this.eventContext,{pageX:n,pageY:r}=(null===(t=e.touches)||void 0===t?void 0:t.length)>0?e.touches[0]:e;return{x:n-(i.left+window.scrollX),y:r-(i.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=n.requestRender}activate(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new r3(this.eventContext),VariableChange:new p5(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new S4(this.eventContext,this),WEBHOOK:new E4(this.eventContext,this),AIAssistantListener:new L4(this.eventContext,this),AIAssistantTrigger:new B4(this.eventContext,this),Conditional:new d3(this.eventContext,this),Start:new u5(this.eventContext,this),Basic:new s3(this.eventContext,this,this.needsRaycast),MouseHover:new s5(this.eventContext,this),Scroll:new c5(this.eventContext,this),Follow:new N3(this.eventContext,this),DragDrop:new D3(this.eventContext,this),LookAt:new t5(this.eventContext),Resize:new A4(this.eventContext,this),Textfields:new R4(this.eventContext,this)};let{page:i,domElement:n}=this.eventContext;this.hideCursor&&(n.style.cursor="none"),i.traverseEntity(e=>{e.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(e=>e.connect()),n.addEventListener("wheel",this.onMouseWheelPreventScroll),n.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,t||null===(e=this.eventContext.sharedAssets.openAIRealtime)||void 0===e||e.connect()}deactivate(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:n,domElement:r}=this.eventContext;r.style.cursor="",Object.values(this.handlers).forEach(e=>e.disconnect()),null!==(e=this.controlsManager.gameControl)&&void 0!==e&&e.disposeActions(),this.controlsManager.disconnectEvents(),n.traverseEntity(e=>{e.removeEventListener("requestRender",this.requestRender),e.destroyedInAction=!1}),r.removeEventListener("touchmove",this.onTouchMovePreventScroll),r.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),i||null===(t=this.eventContext.sharedAssets.openAIRealtime)||void 0===t||t.disconnect()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=i=>{if("Conditional"===i.data.type&&(i.data.ifActions.forEach(t),i.data.elseActions.forEach(t)),"Conditional"===i.data.type||"SetVariable"===i.data.type)for(let e of"Conditional"===i.data.type?i.data.condition:i.data.expression)"id"in e&&Array.isArray(e.id)&&("mouse"===e.id[0]&&(this.needsMouse=!0),"raycast"===e.id[0]&&(this.needsRaycast=!0));"DynamicVariablePlay"===i.data.type&&""!==i.data.variableId&&("Play"===i.data.mode||"PlayPause"===i.data.mode||"Toggle"===i.data.mode)&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(e=>{var i;if(null!==(i=e.data)&&void 0!==i&&i.events.length)for(let n of e.data.events)if("VariableChange"===n.data.type&&("mouseProperty"===n.data.variableId&&(this.needsMouse=!0),"raycastProperty"===n.data.variableId&&(this.needsRaycast=!0)),"Conditional"===n.data.type)for(let e of["inActions","outActions"])n.data[e].forEach(t);else if("DragDrop"===n.data.type)for(let e of["drag","drop"])n.data.dragDropActions[e].forEach(t);else if("GameControl"===n.data.type)for(let e of["idle","move","jump","run"])n.data.gameActions[e].forEach(t);else if("Resize"===n.data.type)for(let e of n.data.breakpoints)e.data.actions.forEach(t);else"LookAt"===n.data.type||"API"===n.data.type||n.data.actions.forEach(t)})}},N4=class{constructor(e,t,i,n,r){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=(new Av).copy(i),this._editorSize=(new Av).copy(n),this._aspect=t.aspect,this._fov=null!==r&&void 0!==r?r:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.y;this._aspect=e/t,t<=i&&(this._camera.zoom*=i/t),this._renderer.setViewport(0,0,e,t)}updateCamera(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let t=this._frameSize.y,i=this._editorSize.y,n=this._fov;if(e&&t>i){let e=function(e,t,i,n,r){return(e-t)/(i-t)*(r-n)+n}(t,1080,2160,1,15)/100;n*=t/i,n*=1-e}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};var U4=class{get sharedAssets(){return this.shared}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.shared=new _X(e.shared,t,!0,i),this.scene=new E0(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof d$&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof OX&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},V4=class{constructor(e){let{x:t=10,y:i=10}=e;this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left="".concat(t,"px"),this.element.style.top="".concat(i,"px")}dispose(){var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function W4(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function H4(e){return e instanceof BX?"SubdivObject":"NonParametricGeometry"===e.geometry.type?"NonParametric":"Mesh"}function G4(e,t){let i=function(e,t){let i={};return e.traverseEntity(e=>{if(!e.visible||!(e instanceof qH)||"Mesh"!==e.type||Array.isArray(e.material)||e.states&&Object.keys(e.states).length)return;let n=e.parent;for(;n;){if(n instanceof qH&&e.states&&Object.keys(e.states).length)return;n=n.parent}let r=e.material.uuid,a=t.shared.materials[r];if(a){if(!iz.isMergable(a))return}else{var s;let i=null===(s=t.scene.objects.get(e.uuid))||void 0===s?void 0:s.data;if(i&&"material"in i&&"string"!=typeof i.material){if(!iz.isMergable(i.material))return;r=iz.getHash(i.material)}}i[r]||(i[r]={});let o=i[r][H4(e)];if(o){if(o.push(e),e.cloner)for(let t of e.cloner.children)o.push(t)}else if(i[r][H4(e)]=[e],e.cloner)for(let t of e.cloner.children)i[r][H4(e)].push(t)}),i}(t,e),n=function(e){let t=0;return Object.values(e).forEach(e=>{Object.values(e).forEach(e=>{let i=e.length;i>t&&(t=i)})}),t}(i),r=new Array(n),a=0,s=new Array(n),o=0,l=new Array(n),c=0,h=new Array(n),u=0;for(let[d,p]of Object.entries(i))for(let e of Object.values(p)){if(o=0,c=0,e.forEach(e=>{e instanceof qH&&(s[o++]=e.geometry.clone(),l[c++]=e)}),c<2)continue;for(let e=0;e<c;e++)l[e].updateWorldMatrix(!0,!1),s[e].applyMatrix4(l[e].matrixWorld),l[e].matrixWorld.determinant()<0&&W4(s[e]);let n=qB(s.slice(0,o),!1);if(n){let e;if("SubdivObject"===d)console.warn("Turning subdiv object into mesh"),e=new Nb(n,l[0].material);else e=new Nb(n,l[0].material);e.castShadow=l[0].castShadow,e.receiveShadow=l[0].receiveShadow,t.add(e);let s=e=>{u=0;for(let t of e)t.children&&s(t.children),t instanceof qH&&(Array.isArray(t.material)||i[t.material.uuid]&&i[t.material.uuid][H4(t)]&&i[t.material.uuid][H4(t)].length>1||(h[u++]=t));for(let i=0;i<u;i++)t.attach(h[i])};for(let t=0;t<c;t++){let e=l[t];s(e.children),r[a++]=e}}}for(let d=0;d<a;d++)r[d].removeFromParent()}var q4=Nm(Xm(),1),Y4=new Av;function X4(e){let t=new Zj(0,0,0,1);try{t.setStyle(e)}catch(ine){console.error(ine)}finally{return t}}var Q4=class{constructor(e){let{renderOnDemand:t,renderMode:i="auto",wasmPath:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=e=>{var t,i,n,r,a,s,o,l,c,h,u,d,p;if(this.time=e,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,null!==(t=this._perfs)&&void 0!==t&&t.start(),this._renderer)if(this._isPaused||!("manual"===this.renderMode&&!this._renderRequested||"auto"===this.renderMode&&this._skipRender)){if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=null!==(i=this._controls.update(this.dt))&&void 0!==i&&i),this._eventManager&&(null!==(n=this._eventManager.handlers)&&void 0!==n&&n.Start.hasVideoAction||null!==(r=this._eventManager.handlers)&&void 0!==r&&r.Basic.hasVideoAction||null!==(a=this._eventManager.handlers)&&void 0!==a&&a.Conditional.hasVideoAction)&&(this._skipRender=!1),null!==(s=this._animationControls)&&void 0!==s&&s.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,null!==(o=this._scene)&&void 0!==o&&o.traverseVisibleEntity(e=>{"ParticleSystem"===e.type&&(e.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),null!==(l=this._eventManager)&&void 0!==l&&l.isEnabled&&((null===(c=this._eventManager.handlers)||void 0===c?void 0:c.Follow).onAnimationFrameDamping(),(null===(h=this._eventManager.handlers)||void 0===h?void 0:h.LookAt).onAnimationFrameDamping(),(null===(u=this._eventManager.handlers)||void 0===u?void 0:u.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let e=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=e,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),null===(d=this._perfs)||void 0===d||d.end()}else{var f;null===(f=this._perfs)||void 0===f||f.end()}else null===(p=this._perfs)||void 0===p||p.end()},this._resize=e=>{if(this._renderer){var t,i,n,r,a,s,o,l;if(1===this._viewportMode&&this._frameView&&(this._frameView.frameSize=Y4.set(this._viewportWidth,this._viewportHeight)),e){let e=this._viewportWidth,t=this._viewportHeight;this._renderer.setSize(e-1,t-1,!1),this._renderer.setSize(e,t,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=null===(t=this._scene)||void 0===t?void 0:t.activeCamera,null!==(i=this._scene)&&void 0!==i&&i.updateViewPlaneSize(null!==(n=null===(r=this._frameView)||void 0===r||null===(r=r.frameSize)||void 0===r?void 0:r.x)&&void 0!==n?n:this._viewportWidth,null!==(a=null===(s=this._frameView)||void 0===s||null===(s=s.frameSize)||void 0===s?void 0:s.y)&&void 0!==a?a:this._viewportHeight,null!==(o=null===(l=this._frameView)||void 0===l?void 0:l.enableResponsive)&&void 0!==o&&o),this._camera){var c,h,u,d,p;let e=null!==(c=Object.values(null!==(h=null===(u=this._data)||void 0===u?void 0:u.frames)&&void 0!==h?h:{})[0].preset)&&void 0!==c?c:"fullscreen";null!==(d=this._frameView)&&void 0!==d&&d.setCamera(this._camera),null!==(p=this._frameView)&&void 0!==p&&p.updateCamera("fullscreen"!==e),"PerspectiveCamera"===this._camera.cameraType&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=jO(this._resize,10),this._onScroll=e=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":i,n&&(this._wasmPath=tk(n,"/")),this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new V4({x:10,y:10})),function(e){e.addEventListener("pointerdown",yk,!0),e.addEventListener("pointerdown",xk,!0),e.addEventListener("pointermove",xk,!0),e.addEventListener("pointerup",bk,!0),e.addEventListener("pointercancel",bk,!0),e.addEventListener("pointerleave",bk,!0),window.addEventListener("keydown",Ak,!0),window.addEventListener("keyup",Sk,!0)}(e)}async load(e,t,i){(function(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)})(e),this.disposed=!1;let n=await(await fetch(e,i)).arrayBuffer();await this.start(n,{variables:t})}async start(e){var t,i,n,r,a;let{interactive:s=!0,variables:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.disposed)return;let l=await async function(e,t){let[i,n]=yI(NR.deserialize(new Uint8Array(e)));return GB(i),t&&t(i),n.result().data}(e);this._data=l;let c=function(e){let t=[];return e.scene.objects.traverse((e,i)=>{"Mesh"===i.type&&"NonParametricGeometry"===i.geometry.type&&void 0!==i.geometry.data.draco&&t.push(i)}),t}(l);l.version&&(0,q4.default)(l.version,"1.10.99")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),this._wasmPath&&this.setUIWasmUrl("".concat(this._wasmPath,"/ui.wasm")),await Promise.all([c.length&&v4(this._wasmPath),VQ(l)&&PH(this._wasmPath),zX(l)&&aH(this._wasmPath),Hz.physicsEnabled(l.scene.objects)&&Ok(),iQ(l)&&$Y(),f0(l)&&w0(),GY(l)&&WY(),PJ(l)&&TJ(),_5(l)&&Mk(this._wasmPath)].filter(Boolean)),c.length&&await b4(c),null!==(t=this._eventManager)&&void 0!==t&&t.deactivate(),null!==(i=this._controls)&&void 0!==i&&i.deactivate(),null===(n=this._scene)||void 0===n||n.dispose();let h=new U4(l);if(h.resetPersonalCameraFromDocumentData(),this._scene=h.scene,this._sharedAssetsManager=h.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let e=performance.now();G4(l,h.scene);let t=performance.now();console.log("Merged geometries in ",t-e," ms")}VQ(l)&&this._scene.traverse(e=>{YQ(e)&&e.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var e;this._requestRenderAutoMode(),null===(e=this._scene)||void 0===e||e.traverse(e=>{e instanceof xQ&&e.pendingMediaLoad&&e.update()})}),null===(r=this._scene)||void 0===r||r.traverse(e=>{"ParticleSystem"===e.type&&(e.wakeUp(),e.data.autoPlay?e.start():e.stop())});let u=Object.keys(l.shared.fonts).map(e=>this._sharedAssetsManager.getFont(e).loadingPromise);if(Promise.all(u).then(()=>{h.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),iQ(l)&&function(e){if(Hz.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((e,i)=>{if(i.events)if(Array.isArray(i.events)){for(let n of i.events)if(!0!==n.data.disabled&&"GameControl"===n.data.type&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(i.events))if(!0!==n.disabled&&"GameControl"===n.type&&n.collisionEnabled){t=!0;break}}),t}(l)&&await Promise.all(u),PJ(l)){let e=[];this._scene.traverseEntity(t=>{(t instanceof A$||t instanceof d$)&&t.uiCanvas&&e.push(t.uiCanvas)}),await Promise.all(e.map(e=>e.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),D1(this._scene.activePage,this._sharedAssetsManager),!this._renderer){this._renderer=new QZ({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=!0===l.scene.publish.hdTransmission;let e=()=>/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=this._getPixelRatio(e()?l.scene.publish.settings.web.pixelRatioMobile:l.scene.publish.settings.web.pixelRatioDesktop);if(this._renderer.setPixelRatio(t),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),l.shared.images.SplineWatermark){let e=this._sharedAssetsManager.getImage("SplineWatermark");await e.loadPromise;let t=e.getTexture(1001);this._renderer.pipeline.setWatermark(t)}}f0(l)&&this._scene.initializeSplatViewer(),void 0!==l.scene.blueNoiseTextureData&&this._renderer.pipeline.updateBlueNoiseTexture(l.scene.blueNoiseTextureData);let d=Object.values(l.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):("fullscreen"===d.preset?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=d.size[0],this._viewportHeight=d.size[1],this.canvas.style.width="".concat(this._viewportWidth,"px"),this.canvas.style.height="".concat(this._viewportHeight,"px")),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new N4(this._renderer,this._camera,new Av(this._viewportWidth,this._viewportHeight),new Av(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=null!==(a=d.allowResponsive)&&void 0!==a&&a&&"fullscreen"===d.preset),s){let e=new J2(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,d);this._scene.updateMatrixWorld(!0),this._controls=new c4(e),this._animationControls=new p4(this._scene,this._requestRenderAutoMode),this._eventManager=new F4(l.scene.publish,this._controls,this._animationControls,e,l.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),void 0!==o&&this.setVariables(o),0===this.dt&&(this.render(performance.now()),setTimeout(()=>{var e;null===(e=this._renderer)||void 0===e||e.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(void 0!==this._data){let t=Object.entries(e);for(let[e,i]of t)this.setVariable(e,i)}}setVariable(e,t){let i=this._getVariableByName(e);if(i&&!("dynamicVariableType"in i.data)){var n;let e=t;"number"==typeof i.data.value?e="number"==typeof t?t:"boolean"==typeof t?!0===t?1:0:parseFloat(t):"boolean"==typeof i.data.value?e="number"==typeof t?!!t:"boolean"==typeof t?t:"false"!==t.toLocaleLowerCase()&&!!t:"string"!=typeof i.data.value&&void 0!==i.data.value.textValue&&(e=t.toString());let r="string"==typeof e?{textValue:e}:e;null!==(n=this._sharedAssetsManager)&&void 0!==n&&n.updateVariable(i.id,r),this.requestRender(),this._requestRenderAutoMode()}else void 0===i?console.warn("No variable named ".concat(e," was found in your Spline file. Make sure to create it from Spline editor.")):"dynamicVariableType"in i.data&&console.warn("Dynamic variables like ".concat(e," cannot be updated from code."))}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{void 0===e[t.data.name]&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let e=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(e)}}_getVariableValue(e){return"string"!=typeof e&&Qz.isTextValue(e)?Qz.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(t=>t.data.name===e);return t&&this._variablesCache.set(e,t),t}}_getPixelRatio(e){switch(e){case 0:return window.devicePixelRatio;case 1:return 1;case 2:return 2}}findObjectById(e){var t;let i=null===(t=this._scene)||void 0===t?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(i)}findObjectByName(e){var t;let i=null===(t=this._scene)||void 0===t?void 0:t.getObjectByName(e);return this._createProxyObject(i)}getAllObjects(){var e;let t=[];return null!==(e=this._scene)&&void 0!==e&&e.traverseEntity(e=>{if(e.uuid!==CL&&!this._scene.isInvisibleObjects(e)&&!(e instanceof d$)){let i=this._createProxyObject(e);i&&t.push(i)}}),t}getSplineEvents(){var e;return(null===(e=this._eventManager)||void 0===e||null===(e=e.handlers)||void 0===e?void 0:e.Spline).splineEvents}emitEvent(e,t){var i;null===(i=this.findObjectById(t)||this.findObjectByName(t))||void 0===i||i.emitEvent(e)}emitEventReverse(e,t){var i;null===(i=this.findObjectById(t)||this.findObjectByName(t))||void 0===i||i.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,i;(null===(t=this._controls)||void 0===t?void 0:t.orbitControls)instanceof U5&&(null===(i=this._controls)||void 0===i||i.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var t;let i=X4(e);null!==(t=this._scene)&&void 0!==t&&t.activePage.setBackgroundColor(i),this._requestRenderAutoMode()}dispose(){var e,t,i,n,r,a,s;this.disposed=!0,null!==(e=this._eventManager)&&void 0!==e&&e.deactivate(),null!==(t=this._scene)&&void 0!==t&&t.dispose(),null!==(i=this._sharedAssetsManager)&&void 0!==i&&i.dispose(),this._proxyObjectCache.forEach(e=>{RC.unsubscribe(e)}),this._variablesCache.clear(),null!==(n=this._renderer)&&void 0!==n&&n.setAnimationLoop(null),null!==(r=this._renderer)&&void 0!==r&&r.dispose(),this._renderer=void 0,null!==(a=this._sharedAssetsManager)&&void 0!==a&&a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),void 0!==this._resizeObserverTimeout&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),null!==(s=this._controls)&&void 0!==s&&s.deactivate(),this.dt=0,function(e){e.removeEventListener("pointerdown",yk,!0),e.removeEventListener("pointerdown",xk,!0),e.removeEventListener("pointermove",xk,!0),e.removeEventListener("pointerup",bk,!0),e.removeEventListener("pointercancel",bk,!0),e.removeEventListener("pointerleave",bk,!0),window.removeEventListener("keydown",Ak,!0),window.removeEventListener("keyup",Sk,!0)}(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,i;this._isPaused||(null!==(e=this._renderer)&&void 0!==e&&e.setAnimationLoop(null),this._isPaused=!0,null!==(t=this._eventManager)&&void 0!==t&&t.pause(),(null===(i=this._controls)||void 0===i?void 0:i.orbitControls)&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,i;!this._isPaused||(this._isPaused=!1,null!==(e=this._eventManager)&&void 0!==e&&e.resume(),null!==(t=this._controls)&&void 0!==t&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),null===(i=this._renderer)||void 0===i||i.setAnimationLoop(this.render))}setGlobalEvents(e){var t;null===(t=this._eventManager)||void 0===t||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var t;if(!this._scene||null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let i;e.traverseAncestors(e=>{e instanceof d$&&(i=e.name)});let n=this._sharedAssetsManager,r={shared:n,scene:this._scene},a=t=>{if(null===t||"Base State"===t)return null;if(t&&e.data.states){let i=e.data.states.find(e=>e.data.name===t);return i?i.id:void 0}},s={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:i,parentUuid:e.parent instanceof d$||e instanceof E0||null===(t=e.parent)||void 0===t?void 0:t.uuid,emitEvent(t){e.dispatchEvent({type:"userEvent",eventName:t})},emitEventReverse(t){e.dispatchEvent({type:"userEvent",eventName:t,reverse:!0})},hide(){e.visible&&(e.visible=!1,r.shared.requestRender())},show(){e.visible||(e.visible=!0,r.shared.requestRender())},get state(){var t;let i=e.stateSelection;if(null!==i)return null===(t=e.data.states.find(e=>{let{id:t}=e;return t===i}))||void 0===t?void 0:t.data.name},set state(t){let i;if(void 0!==t){let n="string"==typeof t?e.data.states.find(e=>{let{id:i}=e;return i===t}):e.data.states[t];if(n)i=n.id;else{let e="string"==typeof t?a(t):void 0;e&&(i=e)}}e.changeSelectedState(null!==i&&void 0!==i?i:null,r),e.currentState=null!==i&&void 0!==i?i:null,e.dispatchEvent({type:"completeState",state:null!==i&&void 0!==i?i:null}),r.shared.requestRender()},transition(t){var i;let r,s=this,o=Kj.timeline({autoplay:null===(i=t.autoPlay)||void 0===i||i}),l={transition(t){let{from:i,to:l,duration:c,delay:h}=t,u=xe(t,km),d=a(i);void 0===d&&(d=r);let p=a(l);r=p;let f=new B1(e,d,p,(0,ye.A)((0,ye.A)({state:p,repeat:0,delay:null!==h&&void 0!==h?h:0,delayDirection:"start-once",direction:"normal",duration:null!==c&&void 0!==c?c:1e3},u),6===u.easing?PL.defaultData:5===u.easing?DL.defaultData:{}),n,!1);return o.add((0,ye.A)((0,ye.A)({},f.params),{},{begin:()=>{(i&&d||"Base State"===i&&!d)&&(s.state=null!==d&&void 0!==d?d:void 0)},complete:()=>{s.state=null!==p&&void 0!==p?p:void 0}}),o.duration),this},play(){return o.play(),this},pause(){return o.pause(),this},reset(){return o.reset(),this},seek(e){return o.seek(e),this}};return l.transition(t),l},set color(t){var i;let n=X4(t);if(WQ.is(e))return void(e.color=n);if("Mesh"!==e.type||!("material"in e)||!(e instanceof EX))return;let a={r:n.r,g:n.g,b:n.b,a:n.a},s=Array.isArray(e.material)?e.material[0]:e.material,o=null===(i=s.data.layers.find(e=>"color"===e.data.type))||void 0===i?void 0:i.id;o&&s.updateByOp({type:0,path:["layers",o],props:{color:(0,ye.A)({},a)}},s.data,r)}},o=RC(s,(t,i)=>{var n;"object"!=typeof e[t]&&null!==(n=Object.getOwnPropertyDescriptor(e,t))&&void 0!==n&&n.writable&&(e[t]=i),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,o),o}setUIWasmUrl(e){Mq.skiaWasmUrl=e}pauseGameControls(){var e;null===(e=this._eventManager)||void 0===e||null===(e=e.controlsManager.gameControl)||void 0===e||e.pause()}resumeGameControls(){var e;null===(e=this._eventManager)||void 0===e||null===(e=e.controlsManager.gameControl)||void 0===e||e.resume()}async swapGeometry(e,t){var i,n,r;let a;if("string"==typeof t){if(!t.endsWith(".splinegeometry"))throw new Error("Only .splinegeometry format is supported");{let e=await(await fetch(t)).arrayBuffer();a=new Uint8Array(e)}}else a=t;let s=NR.deserialize(a),o="data"in s&&void 0!==s.data.draco;o&&await v4(this._wasmPath);let l=null!==(i=null===(n=this._scene)||void 0===n?void 0:n.getObjectByProperty("uuid",e))&&void 0!==i?i:null===(r=this._scene)||void 0===r?void 0:r.getObjectByName(e);if(!l)return void console.warn("Object ".concat(e," not found"));if("Mesh"!==l.data.type||!(l instanceof EX))return void console.warn("Object ".concat(e," is not a mesh"));let c=l,h=(0,ye.A)((0,ye.A)({},c.data),{},{geometry:s});o&&await b4([h]),c.updateByOp({type:0,path:[],props:{geometry:h.geometry}},h,{shared:this._sharedAssetsManager,scene:this._scene},!1);for(let u of c.data.states){let e=(0,ye.A)({},u.data);c.states||(c.states={}),c.states[u.id]=jz.patch(h,e)}return a}},K4=__webpack_require__(446);function Z4(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}const J4=["className","children","debounceTime","ignoreDimensions","parentSizeStyles","enableDebounceLeadingCall","resizeObserverPolyfill"],$4=[],e6={width:"100%",height:"100%"},t6=(0,t.forwardRef)(function(e,i){let{className:n,children:r,debounceTime:a=300,ignoreDimensions:s=$4,parentSizeStyles:o,enableDebounceLeadingCall:l=!0,resizeObserverPolyfill:c}=e,h=xe(e,J4);const u=(0,t.useRef)(null),d=(0,t.useRef)(0),[p,f]=(0,t.useState)({width:0,height:0,top:0,left:0}),m=(0,t.useMemo)(()=>{const e=Array.isArray(s)?s:[s];return K4(t=>{f(i=>Object.keys(i).filter(e=>i[e]!==t[e]).every(t=>e.includes(t))?i:t)},a,{leading:l})},[a,l,s]);return(0,t.useEffect)(()=>{const e=new(c||window.ResizeObserver)(e=>{e.forEach(e=>{var t;const{left:i,top:n,width:r,height:a}=null!==(t=null==e?void 0:e.contentRect)&&void 0!==t?t:{};d.current=window.requestAnimationFrame(()=>{m({width:r,height:a,top:n,left:i})})})});return u.current&&e.observe(u.current),()=>{window.cancelAnimationFrame(d.current),e.disconnect(),m.cancel()}},[m,c]),(0,He.jsx)("div",(0,ye.A)((0,ye.A)({style:(0,ye.A)((0,ye.A)({},e6),o),ref:Z4([i,u]),className:n},h),{},{children:r((0,ye.A)((0,ye.A)({},p),{},{ref:u.current,resize:m}))}))}),i6=["scene","style","onSplineMouseDown","onSplineMouseUp","onSplineMouseHover","onSplineKeyDown","onSplineKeyUp","onSplineStart","onSplineLookAt","onSplineFollow","onSplineScroll","onLoad","renderOnDemand","wasmPath","children"],n6=(0,t.forwardRef)((e,i)=>{let{scene:n,style:r,onSplineMouseDown:a,onSplineMouseUp:s,onSplineMouseHover:o,onSplineKeyDown:l,onSplineKeyUp:c,onSplineStart:h,onSplineLookAt:u,onSplineFollow:d,onSplineScroll:p,onLoad:f,renderOnDemand:m=!0,wasmPath:g,children:v}=e,y=xe(e,i6);const b=(0,t.useRef)(null),[x,w]=(0,t.useState)(!0),[A,S]=(0,t.useState)();if(A)throw A;return(0,t.useEffect)(()=>{let e;w(!0);const t=[{name:"mouseDown",cb:a},{name:"mouseUp",cb:s},{name:"mouseHover",cb:o},{name:"keyDown",cb:l},{name:"keyUp",cb:c},{name:"start",cb:h},{name:"lookAt",cb:u},{name:"follow",cb:d},{name:"scroll",cb:p}];if(b.current){async function i(){await e.load(n);for(let i of t)i.cb&&e.addEventListener(i.name,i.cb);w(!1),null==f||f(e)}e=new Q4(b.current,{renderOnDemand:m,wasmPath:g}),i().catch(e=>{S(e)})}return()=>{for(let i of t)i.cb&&e.removeEventListener(i.name,i.cb);e.dispose()}},[n]),(0,He.jsx)(t6,(0,ye.A)((0,ye.A)({ref:i,parentSizeStyles:(0,ye.A)({overflow:"hidden"},r),debounceTime:50},y),{},{children:()=>(0,He.jsxs)(He.Fragment,{children:[x&&v,(0,He.jsx)("canvas",{ref:b,style:{display:x?"none":"block"}})]})}))});function r6(e){if(e.constructor!==Array)throw new TypeError("Expected array.");if(16===e.length)return e;if(6===e.length){var t=a6();return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}throw new RangeError("Expected array with either 6 or 16 values.")}function a6(){for(var e=[],t=0;t<16;t++)t%5==0?e.push(1):e.push(0);return e}function s6(e,t){for(var i=r6(e),n=r6(t),r=[],a=0;a<4;a++)for(var s=[i[a],i[a+4],i[a+8],i[a+12]],o=0;o<4;o++){var l=4*o,c=[n[l],n[l+1],n[l+2],n[l+3]],h=s[0]*c[0]+s[1]*c[1]+s[2]*c[2]+s[3]*c[3];r[a+l]=h}return r}var o6=function(e){return"number"==typeof e},l6=function(e){return"function"==typeof e},c6=function(e){return"[object Object]"===Object.prototype.toString.call(e)},h6=function(e){return Array.prototype.slice.apply(e)},u6=function(e){var t=e.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{});return Object.keys(t).filter(function(e){return t[e]>1})};function d6(e){return[].slice.call(arguments,1).forEach(function(t){if(t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}),e}var p6,f6=function(e,t,i){return e+(t-e)*i},m6="data-flip-id",g6="data-inverse-flip-id",v6="data-portal-key",y6="data-exit-container",b6={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},x6=function(e){return c6(e)?e:Object.keys(b6).indexOf(e)>-1?b6[e]:{}};"undefined"!=typeof window&&(p6=window.requestAnimationFrame);var w6=p6=p6||function(e){window.setTimeout(e,1e3/60)},A6=Date.now(),S6="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-A6};function _6(e,t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}var E6=function(){function e(){}return e.prototype.run=function(){var e=this;w6(function(){e.springSystem.loop(S6())})},e}(),C6=function(){this.position=0,this.velocity=0},M6=0,T6=.001,P6=function(){function e(e){this._id="s"+M6++,this._springSystem=e,this.listeners=[],this._startValue=0,this._currentState=new C6,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new C6,this._restSpeedThreshold=.001,this._tempState=new C6,this._timeAccumulator=0,this._wasAtRest=!0,this._cachedSpringConfig={}}var t=e.prototype;return t.getId=function(){return this._id},t.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.setSpringConfig=function(e){return this._springConfig=e,this},t.getCurrentValue=function(){return this._currentState.position},t.getDisplacementDistanceForState=function(e){return Math.abs(this._endValue-e.position)},t.setEndValue=function(e){if(e===this._endValue)return this;if(this.prevEndValue=e,this._endValue===e&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=e,this._springSystem.activateSpring(this.getId());for(var t=0,i=this.listeners.length;t<i;t++){var n=this.listeners[t].onSpringEndStateChange;n&&n(this)}return this},t.setVelocity=function(e){return e===this._currentState.velocity||(this._currentState.velocity=e,this._springSystem.activateSpring(this.getId())),this},t.setCurrentValue=function(e){this._startValue=e,this._currentState.position=e;for(var t=0,i=this.listeners.length;t<i;t++){var n=this.listeners[t];n.onSpringUpdate&&n.onSpringUpdate(this)}return this},t.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.setOvershootClampingEnabled=function(e){return this._overshootClampingEnabled=e,this},t.isOvershooting=function(){var e=this._startValue,t=this._endValue;return this._springConfig.tension>0&&(e<t&&this.getCurrentValue()>t||e>t&&this.getCurrentValue()<t)},t.advance=function(e,t){var i=this.isAtRest();if(!i||!this._wasAtRest){var n=t;t>.064&&(n=.064),this._timeAccumulator+=n;for(var r,a,s,o,l,c,h=this._springConfig.tension,u=this._springConfig.friction,d=this._currentState.position,p=this._currentState.velocity,f=this._tempState.position,m=this._tempState.velocity;this._timeAccumulator>=T6;)this._timeAccumulator-=T6,this._timeAccumulator<T6&&(this._previousState.position=d,this._previousState.velocity=p),a=h*(this._endValue-f)-u*p,o=h*(this._endValue-(f=d+(r=p)*T6*.5))-u*(m=p+a*T6*.5),c=h*(this._endValue-(f=d+(s=m)*T6*.5))-u*(m=p+o*T6*.5),f=d+(l=m)*T6,d+=1/6*(r+2*(s+l)+(m=p+c*T6))*T6,p+=1/6*(a+2*(o+c)+(h*(this._endValue-f)-u*m))*T6;this._tempState.position=f,this._tempState.velocity=m,this._currentState.position=d,this._currentState.velocity=p,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/T6),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),i=!0);var g=!1;this._wasAtRest&&(this._wasAtRest=!1,g=!0);var v=!1;i&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(g,v)}},t.notifyPositionUpdated=function(e,t){var i=this;this.listeners.filter(Boolean).forEach(function(n){e&&n.onSpringActivate&&!i._onActivateCalled&&(n.onSpringActivate(i),i._onActivateCalled=!0),n.onSpringUpdate&&n.onSpringUpdate(i),t&&n.onSpringAtRest&&n.onSpringAtRest(i)})},t.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.wasAtRest=function(){return this._wasAtRest},t.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t._interpolate=function(e){this._currentState.position=this._currentState.position*e+this._previousState.position*(1-e),this._currentState.velocity=this._currentState.velocity*e+this._previousState.velocity*(1-e)},t.addListener=function(e){return this.listeners.push(e),this},t.addOneTimeListener=function(e){var t=this;return Object.keys(e).forEach(function(i){var n;e[i]=(n=e[i],function(){n.apply(void 0,[].slice.call(arguments)),t.removeListener(e)})}),this.listeners.push(e),this},t.removeListener=function(e){return _6(this.listeners,e),this},e}(),D6=function(){function e(e){this.looper=e||new E6,this.looper.springSystem=this,this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}}var t=e.prototype;return t.createSpring=function(e,t){return this.createSpringWithConfig({tension:e,friction:t})},t.createSpringWithConfig=function(e){var t=new P6(this);return this.registerSpring(t),t.setSpringConfig(e),t},t.getIsIdle=function(){return this._isIdle},t.registerSpring=function(e){this._springRegistry[e.getId()]=e},t.deregisterSpring=function(e){_6(this._activeSprings,e),delete this._springRegistry[e.getId()]},t.advance=function(e,t){for(var i=this;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(n){n.systemShouldAdvance()?n.advance(e/1e3,t/1e3):i._idleSpringIndices.push(i._activeSprings.indexOf(n))});this._idleSpringIndices.length>0;){var n=this._idleSpringIndices.pop();n>=0&&this._activeSprings.splice(n,1)}},t.loop=function(e){var t;-1===this._lastTimeMillis&&(this._lastTimeMillis=e-1);var i=e-this._lastTimeMillis;this._lastTimeMillis=e;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(t=this.listeners[n]).onBeforeIntegrate&&t.onBeforeIntegrate(this);for(this.advance(e,i),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(t=this.listeners[n]).onAfterIntegrate&&t.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.activateSpring=function(e){var t=this._springRegistry[e];-1===this._activeSprings.indexOf(t)&&this._activeSprings.push(t),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},e}(),O6=new D6,k6=function(e){var t=e.springConfig,i=t.overshootClamping,n=e.getOnUpdateFunc,r=e.onAnimationEnd,a=e.onSpringActivate,s=O6.createSpring(t.stiffness,t.damping);s.setOvershootClampingEnabled(!!i);var o={onSpringActivate:a,onSpringAtRest:function(){s.destroy(),r()},onSpringUpdate:n({spring:s,onAnimationEnd:r})};return s.addListener(o),s},I6=function(e){var t=k6(e);return t.setEndValue(1),t},R6=function(e,t){if(void 0===t&&(t={}),e&&e.length){t.reverse&&e.reverse();var i,n="number"!=typeof(i=t.speed)?1.1:1+Math.min(Math.max(5*i,0),5),r=1/Math.max(Math.min(e.length,100),10),a=e.map(function(e,t){var i=e.getOnUpdateFunc;return e.getOnUpdateFunc=function(e){var s=i(e);return function(e){var i=e.getCurrentValue();(i=i<.01?0:i>.99?1:i)>=r&&a[t+1]&&a[t+1](Math.max(Math.min(i*n,1),0)),s(e)}},e}).map(function(e){var t=k6(e);if(t)return t.setEndValue.bind(t)}).filter(Boolean);a[0]&&a[0](1)}},L6=function(e){return[0,1,4,5,12,13].map(function(t){return e[t]})},z6=function(e){return e.top<window.innerHeight&&e.bottom>0&&e.left<window.innerWidth&&e.right>0};function B6(e){return JSON.parse(e.dataset.flipConfig||"{}")}var j6=function(e,t){var i;return d6(e,((i={})[t[0]]=t[1],i))},F6=function(e,t){return h6(t?document.querySelectorAll("["+v6+'="'+t+'"]'):e.querySelectorAll("["+m6+"]"))},N6=function(e){return e.map(function(e){return[e,e.getBoundingClientRect()]})},U6=!0,V6=function(e){var t=e.cachedOrderedFlipIds,i=void 0===t?[]:t,n=e.inProgressAnimations,r=void 0===n?{}:n,a=e.flippedElementPositionsBeforeUpdate,s=void 0===a?{}:a,o=e.flipCallbacks,l=void 0===o?{}:o,c=e.containerEl,h=e.applyTransformOrigin,u=e.spring,d=e.debug,p=e.portalKey,f=e.staggerConfig,m=void 0===f?{}:f,g=e.decisionData,v=void 0===g?{}:g,y=e.handleEnterUpdateDelete,b=e.onComplete,x=e.onStart;if(U6&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var w,A=N6(F6((w={element:c,portalKey:p}).element,w.portalKey)).map(function(e){var t=e[0],i=e[1],n=window.getComputedStyle(t);return[t.dataset.flipId,{element:t,rect:i,opacity:parseFloat(n.opacity),transform:n.transform}]}).reduce(j6,{}),S=function(e){var t=e.containerEl,i=e.portalKey;return i?function(e){return function(t){return h6(document.querySelectorAll("["+v6+'="'+e+'"]'+t))}}(i):t?function(e){var t=Math.random().toFixed(5);return e.dataset.flipperId=t,function(i){return h6(e.querySelectorAll('[data-flipper-id="'+t+'"] '+i))}}(t):function(){return[]}}({containerEl:c,portalKey:p}),_=function(e){return function(t){return e("["+m6+'="'+t+'"]')[0]}}(S),E=function(e){return s[e]&&A[e]},C=Object.keys(s).concat(Object.keys(A)).filter(function(e){return!E(e)}),M={flipCallbacks:l,getElement:_,flippedElementPositionsBeforeUpdate:s,flippedElementPositionsAfterUpdate:A,inProgressAnimations:r,decisionData:v},T=function(e){var t,i=e.unflippedIds,n=e.flipCallbacks,r=e.getElement,a=e.flippedElementPositionsBeforeUpdate,s=e.flippedElementPositionsAfterUpdate,o=e.inProgressAnimations,l=e.decisionData,c=i.filter(function(e){return s[e]}).filter(function(e){return n[e]&&n[e].onAppear}),h=i.filter(function(e){return a[e]&&n[e]&&n[e].onExit}),u=new Promise(function(e){t=e}),d=[],p=0,f=h.map(function(e,i){var r=a[e].domDataForExitAnimations,s=r.element,c=r.parent,h=r.childPosition,u=h.top,f=h.left,m=h.width,g=h.height;"static"===getComputedStyle(c).position&&(c.style.position="relative"),s.style.transform="matrix(1, 0, 0, 1, 0, 0)",s.style.position="absolute",s.style.top=u+"px",s.style.left=f+"px",s.style.height=g+"px",s.style.width=m+"px";var v=d.filter(function(e){return e[0]===c})[0];v||(v=[c,document.createDocumentFragment()],d.push(v)),v[1].appendChild(s),p+=1;var y=function(){try{c.removeChild(s)}catch(e){}finally{0==(p-=1)&&t()}};return o[e]={stop:y},function(){return n[e].onExit(s,i,y,l)}});return d.forEach(function(e){e[0].appendChild(e[1])}),f.length||t(),{hideEnteringElements:function(){c.forEach(function(e){var t=r(e);t&&(t.style.opacity="0")})},animateEnteringElements:function(){c.forEach(function(e,t){var i=r(e);i&&n[e].onAppear(i,t,l)})},animateExitingElements:function(){return f.forEach(function(e){return e()}),u}}}(d6({},M,{unflippedIds:C})),P=T.hideEnteringElements,D=T.animateEnteringElements,O=T.animateExitingElements,k=d6({},M,{containerEl:c,flippedIds:i.filter(E),applyTransformOrigin:h,spring:u,debug:d,staggerConfig:m,scopedSelector:S,onComplete:b});x&&x(c,v);var I=function(e){var t,i=e.flippedIds,n=e.flipCallbacks,r=e.inProgressAnimations,a=e.flippedElementPositionsBeforeUpdate,s=e.flippedElementPositionsAfterUpdate,o=e.applyTransformOrigin,l=e.spring,c=e.getElement,h=e.debug,u=e.staggerConfig,d=void 0===u?{}:u,p=e.decisionData,f=void 0===p?{}:p,m=e.onComplete,g=e.containerEl,v=new Promise(function(e){t=e});if(m&&v.then(function(){return m(g,f)}),!i.length)return function(){return t([]),v};var y=[],b=c(i[0]),x=b?b.ownerDocument.querySelector("body"):document.querySelector("body");u6(i);var w=i.map(function(e){var i=a[e].rect,c=s[e].rect,h=a[e].opacity,u=s[e].opacity,d=c.width<1||c.height<1,p=s[e].element;if(!z6(i)&&!z6(c))return!1;if(!p)return!1;var m,g,v,b=B6(p),A=(v=(g=void 0===(m={flipperSpring:l,flippedSpring:b.spring})?{}:m).flippedSpring,d6({},b6.noWobble,x6(g.flipperSpring),x6(v))),S=!0===b.stagger?"default":b.stagger,_={element:p,id:e,stagger:S,springConfig:A};if(n[e]&&n[e].shouldFlip&&!n[e].shouldFlip(f.previous,f.current))return!1;var E=Math.abs(i.left-c.left)+Math.abs(i.top-c.top),C=Math.abs(i.width-c.width)+Math.abs(i.height-c.height),M=Math.abs(u-h);if(0===i.height&&0===c.height||0===i.width&&0===c.width||E<.5&&C<.5&&M<.01)return!1;var T=function(e){if("string"===typeof e){var t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t)return r6(t[2].split(", ").map(parseFloat))}return a6()}(s[e].transform),P={matrix:T},D={matrix:[]},O=[T];b.translate&&(O.push(function(e){var t=a6();return t[12]=e,t}(i.left-c.left)),O.push(function(e){var t=a6();return t[13]=e,t}(i.top-c.top))),b.scale&&(O.push(function(e){var t=a6();return t[0]=e,t}(Math.max(i.width,1)/Math.max(c.width,1))),O.push(function(e){var t=a6();return t[5]=e,t}(Math.max(i.height,1)/Math.max(c.height,1)))),b.opacity&&(D.opacity=h,P.opacity=u);var k=[];if(!n[e]||!n[e].shouldInvert||n[e].shouldInvert(f.previous,f.current)){var I=function(e,t){return h6(e.querySelectorAll("["+g6+'="'+t+'"]'))}(p,e);k=I.map(function(e){return[e,B6(e)]})}D.matrix=L6(O.reduce(s6)),P.matrix=L6(P.matrix);var R,L=function(e){var t=e.element,i=e.invertedChildren,n=e.body;return function(e){var r=e.matrix,a=e.opacity,s=e.forceMinVals;if(o6(a)&&(t.style.opacity=a+""),s&&(t.style.minHeight="1px",t.style.minWidth="1px"),r){var o=function(e){return"matrix("+e.join(", ")+")"}(r);t.style.transform=o,i&&function(e){var t=e.matrix,i=e.body;e.invertedChildren.forEach(function(e){var n=e[0],r=e[1];if(i.contains(n)){var a=t[0],s=t[3],o=t[5],l={translateX:0,translateY:0,scaleX:1,scaleY:1},c="";r.translate&&(l.translateX=-t[4]/a,l.translateY=-o/s,c+="translate("+l.translateX+"px, "+l.translateY+"px)"),r.scale&&(l.scaleX=1/a,l.scaleY=1/s,c+=" scale("+l.scaleX+", "+l.scaleY+")"),n.style.transform=c}})}({invertedChildren:i,matrix:r,body:n})}}}({element:p,invertedChildren:k,body:x});if(n[e]&&n[e].onComplete){var z=n[e].onComplete;R=function(){return z(p,f)}}var B=o6(D.opacity)&&o6(P.opacity)&&D.opacity!==P.opacity,j=!1;return d6({},_,{stagger:S,springConfig:A,getOnUpdateFunc:function(t){var i=t.spring,a=t.onAnimationEnd;return r[e]={destroy:i.destroy.bind(i),onAnimationEnd:a},function(t){n[e]&&n[e].onSpringUpdate&&n[e].onSpringUpdate(t.getCurrentValue()),j||(j=!0,n[e]&&n[e].onStart&&n[e].onStart(p,f));var i=t.getCurrentValue();if(x.contains(p)){var r={matrix:[]};r.matrix=D.matrix.map(function(e,t){return f6(e,P.matrix[t],i)}),B&&(r.opacity=f6(D.opacity,P.opacity,i)),L(r)}else t.destroy()}},initializeFlip:function(){L({matrix:D.matrix,opacity:B?D.opacity:void 0,forceMinVals:d}),n[e]&&n[e].onStartImmediate&&n[e].onStartImmediate(p,f),b.transformOrigin?p.style.transformOrigin=b.transformOrigin:o&&(p.style.transformOrigin="0 0"),k.forEach(function(e){var t=e[0],i=e[1];i.transformOrigin?t.style.transformOrigin=i.transformOrigin:o&&(t.style.transformOrigin="0 0")})},onAnimationEnd:function(i){delete r[e],l6(R)&&R(),p.style.transform="",k.forEach(function(e){e[0].style.transform=""}),d&&p&&(p.style.minHeight="",p.style.minWidth=""),i||(y.push(e),y.length>=w.length&&t(y))},delayUntil:b.delayUntil})}).filter(Boolean);if(w.forEach(function(e){return(0,e.initializeFlip)()}),h)return function(){};var A=w.filter(function(e){return e.delayUntil&&(t=e.delayUntil,w.filter(function(e){return e.id===t}).length);var t}),S={},_={},E={};A.forEach(function(e){e.stagger?(E[e.stagger]=!0,_[e.delayUntil]?_[e.delayUntil].push(e.stagger):_[e.delayUntil]=[e.stagger]):S[e.delayUntil]?S[e.delayUntil].push(e):S[e.delayUntil]=[e]});var C=w.filter(function(e){return e.stagger}).reduce(function(e,t){return e[t.stagger]?e[t.stagger].push(t):e[t.stagger]=[t],e},{}),M=w.filter(function(e){return-1===A.indexOf(e)});return M.forEach(function(e){e.onSpringActivate=function(){S[e.id]&&S[e.id].forEach(I6),_[e.id]&&Object.keys(_[e.id].reduce(function(e,t){var i;return d6(e,((i={})[t]=!0,i))},{})).forEach(function(e){R6(C[e],d[e])})}}),function(){return w.length||t([]),M.filter(function(e){return!e.stagger}).forEach(I6),Object.keys(C).forEach(function(e){E[e]||R6(C[e],d[e])}),v}}(k);y?y({hideEnteringElements:P,animateEnteringElements:D,animateExitingElements:O,animateFlippedElements:I}):(P(),O().then(D),I())}},W6=function(e){var t=e.element,i=e.flipCallbacks,n=void 0===i?{}:i,r=e.inProgressAnimations,a=void 0===r?{}:r,s=F6(t,e.portalKey),o=h6(t.querySelectorAll("["+g6+"]")),l={},c=[],h={};s.filter(function(e){return n&&n[e.dataset.flipId]&&n[e.dataset.flipId].onExit}).forEach(function(e){var t=e.parentNode;if(e.closest){var i=e.closest("["+y6+"]");i&&(t=i)}var n=c.findIndex(function(e){return e[0]===t});-1===n&&(c.push([t,t.getBoundingClientRect()]),n=c.length-1),l[e.dataset.flipId]=c[n][1],h[e.dataset.flipId]=t});var u=N6(s),d=u.map(function(e){var t=e[0],i=e[1],r={};if(n&&n[t.dataset.flipId]&&n[t.dataset.flipId].onExit){var a=l[t.dataset.flipId];d6(r,{element:t,parent:h[t.dataset.flipId],childPosition:{top:i.top-a.top,left:i.left-a.left,width:i.width,height:i.height}})}return[t.dataset.flipId,{rect:i,opacity:parseFloat(window.getComputedStyle(t).opacity||"1"),domDataForExitAnimations:r}]}).reduce(j6,{});return function(e,t){Object.keys(e).forEach(function(t){e[t].destroy&&e[t].destroy(),e[t].onAnimationEnd&&e[t].onAnimationEnd(!0),delete e[t]}),t.forEach(function(e){e.style.transform="",e.style.opacity=""})}(a,s.concat(o)),{flippedElementPositions:d,cachedOrderedFlipIds:u.map(function(e){return e[0].dataset.flipId})}};new D6;function H6(e,t){return H6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H6(e,t)}var G6=(0,t.createContext)({}),q6=(0,t.createContext)("portal"),Y6=function(e){var i,n;function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).inProgressAnimations={},t.flipCallbacks={},t.el=void 0,t}n=e,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,H6(i,n);var a=r.prototype;return a.getSnapshotBeforeUpdate=function(e){return e.flipKey!==this.props.flipKey&&this.el?W6({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},a.componentDidUpdate=function(e,t,i){this.props.flipKey!==e.flipKey&&this.el&&V6({flippedElementPositionsBeforeUpdate:i.flippedElementPositions,cachedOrderedFlipIds:i.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:e.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},a.render=function(){var e=this,i=this.props,n=i.portalKey,r=t.createElement(G6.Provider,{value:this.flipCallbacks},t.createElement(i.element,{className:i.className,ref:function(t){return e.el=t}},this.props.children));return n&&(r=t.createElement(q6.Provider,{value:n},r)),r},r}(t.Component);Y6.defaultProps={applyTransformOrigin:!0,element:"div"};const X6=()=>{const e=(0,t.useRef)(null),i=(0,t.useRef)({x:0,y:0}),n=(0,t.useRef)({x:0,y:0}),r=(0,t.useRef)(),a=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],s=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]],o=(0,t.useCallback)(e=>{const t=500/(500+e[2]);return[e[0]*t,e[1]*t]},[]),l=(0,t.useCallback)((e,t,i)=>{let n=e[0],r=e[1]*Math.cos(t)-e[2]*Math.sin(t),a=e[1]*Math.sin(t)+e[2]*Math.cos(t);return[n*Math.cos(i)+a*Math.sin(i),r,-n*Math.sin(i)+a*Math.cos(i)]},[]),c=(0,t.useCallback)(()=>{const t=e.current;if(!t)return;const h=t.getContext("2d");h.clearRect(0,0,t.width,t.height),n.current.x+=.01,n.current.y+=.01,h.strokeStyle="#ff0000",h.lineWidth=2,s.forEach(e=>{const[t,r]=e,s=[...a[t]],c=[...a[r]],u=l(s,n.current.x,n.current.y),d=l(c,n.current.x,n.current.y),p=o(u),f=o(d);h.beginPath(),h.moveTo(i.current.x+15*p[0],i.current.y+15*p[1]),h.lineTo(i.current.x+15*f[0],i.current.y+15*f[1]),h.stroke()}),r.current=requestAnimationFrame(c)},[o,l]);return(0,t.useEffect)(()=>{const t=e.current;if(!t)return;t.getContext("2d");const n=()=>{t.width=window.innerWidth,t.height=window.innerHeight};n(),window.addEventListener("resize",n);const a=e=>{i.current={x:e.clientX,y:e.clientY}};return window.addEventListener("mousemove",a),r.current=requestAnimationFrame(c),()=>{window.removeEventListener("resize",n),window.removeEventListener("mousemove",a),r.current&&cancelAnimationFrame(r.current)}},[c]),(0,He.jsx)("canvas",{ref:e,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:0,mixBlendMode:"screen"}})},Q6=()=>{const[e]=xc(Oc);return(0,He.jsxs)("div",{style:{position:"relative",width:"130px",height:"130px",margin:"100px auto",backgroundColor:"transparent",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"100px"},children:[(0,He.jsxs)("svg",{viewBox:"0 0 100 100",style:{position:"absolute",width:"100%",height:"100%",transformOrigin:"center",animation:"rotate 10s linear infinite",marginTop:"-67px",marginLeft:"-66px"},children:[(0,He.jsx)("defs",{children:(0,He.jsx)("path",{id:"circlePath",d:"M 50,50 m -40,0 a 40,40 0 1,1 80,0 a 40,40 0 1,1 -80,0"})}),(0,He.jsx)("text",{fill:"#ffffff",fontSize:"11.1",children:(0,He.jsx)("textPath",{xlinkHref:"#circlePath",children:". Salesforce Developer  .  Web Developer  .  AI Developer"})})]}),(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava698@gmail.com",style:{position:"absolute",width:"65px",height:"65px",background:"linear-gradient(90deg, #6a11cb 0%, #e73e0d 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"14px",textAlign:"center",zIndex:1,textDecoration:"none",top:"50%",left:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",transition:"transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease, width 0.3s ease, height 0.3s ease",cursor:"pointer",animation:"glow 1.5s infinite alternate"},onMouseEnter:e=>{e.target.style.transform="translate(-50%, -50%) scale(1.2)",e.target.style.boxShadow="0 8px 30px rgba(0, 0, 0, 0.3)",e.target.style.background="linear-gradient(270deg, #ff7e5f 0%, #02f202 100%)",e.target.style.width="67px",e.target.style.height="67px"},onMouseLeave:e=>{e.target.style.transform="translate(-50%, -50%) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)",e.target.style.background="linear-gradient(90deg, #6a11cb 0%, #e73e0d 100%)",e.target.style.width="66px",e.target.style.height="66px"},onClick:e,children:"Hire Me"}),(0,He.jsx)("style",{children:"\n        @keyframes rotate {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n\n\n         @keyframes glow {\n          0% {\n            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 20px rgba(106, 17, 203, 0.6);\n          }\n          100% {\n            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 20px rgba(37, 117, 252, 0.8);\n          }\n        }\n      "})]})};function K6(e,t){[...t].reverse().forEach(i=>{const n=e.getVariant(i);n&&ki(e,n),e.variantChildren&&e.variantChildren.forEach(e=>{K6(e,t)})})}function Z6(){let e=!1;const t=new Set,i={subscribe:e=>(t.add(e),()=>{t.delete(e)}),start(i,n){er(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");const r=[];return t.forEach(e=>{r.push(wa(e,i,{transitionOverride:n}))}),Promise.all(r)},set:i=>(er(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{!function(e,t){Array.isArray(t)?K6(e,t):"string"===typeof t?K6(e,[t]):ki(e,t)}(e,i)})),stop(){t.forEach(e=>{!function(e){e.values.forEach(e=>e.stop())}(e)})},mount:()=>(e=!0,()=>{e=!1,i.stop()})};return i}function J6(){const e=El(Z6);return yl(e.mount,[]),e}const $6=e=>{let{children:i}=e;const n=J6(),[r,a]=(0,t.useState)(!1);return(0,He.jsx)(vc.span,{animate:n,onMouseOver:()=>{r||(n.start({scale:[1,1.4,.75,1.25,.9,1],color:["#e73e0d","#ff5722","#ff9800","#ff5722","#e73e0d"],textShadow:["0px 0px 0px rgba(0,0,0,0)","4px 4px 10px rgba(0,0,0,0.2)","2px 2px 8px rgba(0,0,0,0.3)","4px 4px 10px rgba(0,0,0,0.2)","0px 0px 0px rgba(0,0,0,0)"],transition:{times:[0,.3,.5,.7,.9],duration:1}}),a(!0))},onAnimationComplete:()=>a(!1),style:{display:"inline-block",cursor:"pointer"},children:i})},e8=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),t8={position:"absolute",width:"100%",height:"100vh",overflow:"hidden",zindex:"1",backgroundColor:"#000000",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center"},i8={position:"absolute",top:"2rem",width:"62%",left:"2.7rem",zIndex:"5",color:"rgb(240, 2, 149)",background:"transparent",padding:"10px",borderRadius:"8px"},n8="sm:px-16 px-6",r8="font-black text-white lg:text-[78px] lg:leading-[110px] mt-2",a8="text-[#dfd9ff] font-medium lg:text-[35px] lg:leading-[40px]";const s8=function(){Up({from:{transform:"translate3d(0, -50px, 0)"},to:{transform:"translate3d(0, 0, 0)"},config:{tension:120,friction:5}});const[e]=xc(Oc),[t]=xc(Hc),i=We({maxWidth:1250}),n=(We({minWidth:1251,maxWidth:1600}),{width:"100%",marginTop:"6px",fontSize:i?"3.5rem":"5rem",color:"#02f202",fontWeight:"500",display:"inline-block",fontFamily:"'Srisakdi', system-ui"}),r={display:"flex",marginTop:i?"-4.8rem":"-4.1rem",marginLeft:"-12rem"};return(0,He.jsxs)("div",{style:t8,children:[(0,He.jsx)(X6,{}),(0,He.jsx)("div",{style:{position:"absolute",right:"5%",top:"50%",transform:"translateY(-50%)",width:i?"40%":"35%",maxWidth:"600px",zIndex:2,pointerEvents:"none"},children:(0,He.jsx)("img",{src:"/images/student-with-laptop.gif",alt:"Student with laptop",style:{width:"100%",height:"auto",objectFit:"contain",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"}})}),(0,He.jsxs)("div",{style:i8,children:[(0,He.jsx)("div",{className:"absolute inset-0 top-[120px] max-w-7xl mx-auto ".concat(n8," flex flex-row items-start gap-5"),children:(0,He.jsxs)("div",{children:[(0,He.jsxs)(vc.div,{variants:e8(.2),initial:"hidden",animate:"show",style:{fontFamily:"'Bodoni Moda', serif",fontSize:i?"6.2rem":"none",marginTop:i?"-3.7rem":"none",marginBottom:i?"2rem":"none"},className:"".concat(r8," text-white"),children:["Hi, I'm"," ",(0,He.jsxs)("span",{className:"text-[#e73e0d]",children:[(0,He.jsx)($6,{children:"U"}),(0,He.jsx)($6,{children:"j"}),(0,He.jsx)($6,{children:"j"}),(0,He.jsx)($6,{children:"a"}),(0,He.jsx)($6,{children:"w"}),(0,He.jsx)($6,{children:"a"}),(0,He.jsx)($6,{children:"l"})]})]}),(0,He.jsx)(vc.div,{variants:e8(.8),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{className:"".concat(a8," mt-2 text-white-100"),style:{fontFamily:"'Vidaloka', serif",fontSize:i?"2.8rem":"none",marginTop:i?"-3rem":"none"},children:["I Craft exceptional & AI innovative ",(0,He.jsx)("br",{})," Web Designing and developing"]})}),(0,He.jsx)(vc.div,{variants:e8(1.6),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{style:n,children:(0,He.jsx)(qe.cU,{words:["Web Designer","Frontend Developer","Backend Developer","AI Developer","Salesforce Developer"],loop:!0,cursor:!0,cursorStyle:"_",typeSpeed:180,deleteSpeed:100,delaySpeed:1e3})})})]})}),(0,He.jsxs)("div",{style:{marginTop:"425px",marginLeft:i?"1rem":"100px",marginTop:i?"35rem":"42.5rem"},children:[(0,He.jsx)("div",{className:"glowbtnAbt",children:(0,He.jsx)(vc.div,{variants:e8(2.6),initial:"hidden",animate:"show",children:(0,He.jsxs)("a",{href:"https://drive.google.com/file/d/1FSn4Er9NH-Qs4ZwZu1ZHWFyMP2Pm4s1K/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",className:"btn",onClick:e,style:{padding:"15px",borderRadius:"20px",backgroundColor:"transparent",textDecoration:"none",color:"#f40388",border:"none",marginBottom:"-10px",marginLeft:"1px",marginTop:"-25px",fontSize:"1.8rem",fontWeight:"bold",fontFamily:"'Vidaloka', serif",transition:"background-color 0.3s",width:i?"36%":"25%",textAlign:"center",cursor:"pointer"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),"About Me"]})})}),(0,He.jsx)("div",{className:"home-socials",style:{marginTop:"20px",fontSize:"25px",marginLeft:"2.8rem",textAlign:"center"},children:(0,He.jsxs)("ul",{className:"social-icons",style:{listStyle:"none",padding:"0",display:"flex",gap:"10px"},children:[(0,He.jsx)(vc.div,{variants:e8(3.5),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",className:"fab fa-linkedin fa-beat-fade",target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>e.currentTarget.style.transform="scale(1.2)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:t})}),(0,He.jsx)(vc.div,{variants:e8(4),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:"https://github.com/ujjwalshriv3",className:"fab fa-github fa-beat-fade",target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>e.currentTarget.style.transform="scale(1.2)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:t})}),(0,He.jsx)(vc.div,{variants:e8(4.5),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava698@gmail.com fa-envelope fa-beat-fade",target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>e.currentTarget.style.transform="scale(1.2)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:t})}),(0,He.jsx)(vc.div,{variants:e8(5),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:"https://x.com/ujjawal_shri123",className:"fab fa-twitter fa-beat-fade",target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>e.currentTarget.style.transform="scale(1.2)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:t})}),(0,He.jsx)(vc.div,{variants:e8(5.5),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:"tel:+8743917011",className:"fas fa-phone fa-beat-fade",target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>e.currentTarget.style.transform="scale(1.2)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",onClick:t})})]})})]}),(0,He.jsx)(vc.div,{variants:e8(6.5),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{style:r,children:(0,He.jsx)(Q6,{})})})]})]})};function o8(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l8=function(){return l8=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l8.apply(this,arguments)};Object.create;function c8(e,t,i){if(i||2===arguments.length)for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var h8=__webpack_require__(7324),u8=__webpack_require__.n(h8),d8="-ms-",p8="-moz-",f8="-webkit-",m8="comm",g8="rule",v8="decl",y8="@keyframes",b8=Math.abs,x8=String.fromCharCode,w8=Object.assign;function A8(e){return e.trim()}function S8(e,t){return(e=t.exec(e))?e[0]:e}function _8(e,t,i){return e.replace(t,i)}function E8(e,t,i){return e.indexOf(t,i)}function C8(e,t){return 0|e.charCodeAt(t)}function M8(e,t,i){return e.slice(t,i)}function T8(e){return e.length}function P8(e){return e.length}function D8(e,t){return t.push(e),e}function O8(e,t){return e.filter(function(e){return!S8(e,t)})}var k8=1,I8=1,R8=0,L8=0,z8=0,B8="";function j8(e,t,i,n,r,a,s,o){return{value:e,root:t,parent:i,type:n,props:r,children:a,line:k8,column:I8,length:s,return:"",siblings:o}}function F8(e,t){return w8(j8("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function N8(e){for(;e.root;)e=F8(e.root,{children:[e]});D8(e,e.siblings)}function U8(){return z8=L8>0?C8(B8,--L8):0,I8--,10===z8&&(I8=1,k8--),z8}function V8(){return z8=L8<R8?C8(B8,L8++):0,I8++,10===z8&&(I8=1,k8++),z8}function W8(){return C8(B8,L8)}function H8(){return L8}function G8(e,t){return M8(B8,e,t)}function q8(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Y8(e){return k8=I8=1,R8=T8(B8=e),L8=0,[]}function X8(e){return B8="",e}function Q8(e){return A8(G8(L8-1,J8(91===e?e+2:40===e?e+1:e)))}function K8(e){for(;(z8=W8())&&z8<33;)V8();return q8(e)>2||q8(z8)>3?"":" "}function Z8(e,t){for(;--t&&V8()&&!(z8<48||z8>102||z8>57&&z8<65||z8>70&&z8<97););return G8(e,H8()+(t<6&&32==W8()&&32==V8()))}function J8(e){for(;V8();)switch(z8){case e:return L8;case 34:case 39:34!==e&&39!==e&&J8(z8);break;case 40:41===e&&J8(e);break;case 92:V8()}return L8}function $8(e,t){for(;V8()&&e+z8!==57&&(e+z8!==84||47!==W8()););return"/*"+G8(t,L8-1)+"*"+x8(47===e?e:V8())}function e7(e){for(;!q8(W8());)V8();return G8(e,L8)}function t7(e,t){for(var i="",n=0;n<e.length;n++)i+=t(e[n],n,e,t)||"";return i}function i7(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case v8:return e.return=e.return||e.value;case m8:return"";case y8:return e.return=e.value+"{"+t7(e.children,n)+"}";case g8:if(!T8(e.value=e.props.join(",")))return""}return T8(i=t7(e.children,n))?e.return=e.value+"{"+i+"}":""}function n7(e,t,i){switch(function(e,t){return 45^C8(e,0)?(((t<<2^C8(e,0))<<2^C8(e,1))<<2^C8(e,2))<<2^C8(e,3):0}(e,t)){case 5103:return f8+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return f8+e+e;case 4789:return p8+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return f8+e+p8+e+d8+e+e;case 5936:switch(C8(e,t+11)){case 114:return f8+e+d8+_8(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return f8+e+d8+_8(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return f8+e+d8+_8(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return f8+e+d8+e+e;case 6165:return f8+e+d8+"flex-"+e+e;case 5187:return f8+e+_8(e,/(\w+).+(:[^]+)/,f8+"box-$1$2"+d8+"flex-$1$2")+e;case 5443:return f8+e+d8+"flex-item-"+_8(e,/flex-|-self/g,"")+(S8(e,/flex-|baseline/)?"":d8+"grid-row-"+_8(e,/flex-|-self/g,""))+e;case 4675:return f8+e+d8+"flex-line-pack"+_8(e,/align-content|flex-|-self/g,"")+e;case 5548:return f8+e+d8+_8(e,"shrink","negative")+e;case 5292:return f8+e+d8+_8(e,"basis","preferred-size")+e;case 6060:return f8+"box-"+_8(e,"-grow","")+f8+e+d8+_8(e,"grow","positive")+e;case 4554:return f8+_8(e,/([^-])(transform)/g,"$1"+f8+"$2")+e;case 6187:return _8(_8(_8(e,/(zoom-|grab)/,f8+"$1"),/(image-set)/,f8+"$1"),e,"")+e;case 5495:case 3959:return _8(e,/(image-set\([^]*)/,f8+"$1$`$1");case 4968:return _8(_8(e,/(.+:)(flex-)?(.*)/,f8+"box-pack:$3"+d8+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+f8+e+e;case 4200:if(!S8(e,/flex-|baseline/))return d8+"grid-column-align"+M8(e,t)+e;break;case 2592:case 3360:return d8+_8(e,"template-","")+e;case 4384:case 3616:return i&&i.some(function(e,i){return t=i,S8(e.props,/grid-\w+-end/)})?~E8(e+(i=i[t].value),"span",0)?e:d8+_8(e,"-start","")+e+d8+"grid-row-span:"+(~E8(i,"span",0)?S8(i,/\d+/):+S8(i,/\d+/)-+S8(e,/\d+/))+";":d8+_8(e,"-start","")+e;case 4896:case 4128:return i&&i.some(function(e){return S8(e.props,/grid-\w+-start/)})?e:d8+_8(_8(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return _8(e,/(.+)-inline(.+)/,f8+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(T8(e)-1-t>6)switch(C8(e,t+1)){case 109:if(45!==C8(e,t+4))break;case 102:return _8(e,/(.+:)(.+)-([^]+)/,"$1"+f8+"$2-$3$1"+p8+(108==C8(e,t+3)?"$3":"$2-$3"))+e;case 115:return~E8(e,"stretch",0)?n7(_8(e,"stretch","fill-available"),t,i)+e:e}break;case 5152:case 5920:return _8(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,i,n,r,a,s,o){return d8+i+":"+n+o+(r?d8+i+"-span:"+(a?s:+s-+n)+o:"")+e});case 4949:if(121===C8(e,t+6))return _8(e,":",":"+f8)+e;break;case 6444:switch(C8(e,45===C8(e,14)?18:11)){case 120:return _8(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+f8+(45===C8(e,14)?"inline-":"")+"box$3$1"+f8+"$2$3$1"+d8+"$2box$3")+e;case 100:return _8(e,":",":"+d8)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return _8(e,"scroll-","scroll-snap-")+e}return e}function r7(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case v8:return void(e.return=n7(e.value,e.length,i));case y8:return t7([F8(e,{value:_8(e.value,"@","@"+f8)})],n);case g8:if(e.length)return function(e,t){return e.map(t).join("")}(i=e.props,function(t){switch(S8(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":N8(F8(e,{props:[_8(t,/:(read-\w+)/,":-moz-$1")]})),N8(F8(e,{props:[t]})),w8(e,{props:O8(i,n)});break;case"::placeholder":N8(F8(e,{props:[_8(t,/:(plac\w+)/,":"+f8+"input-$1")]})),N8(F8(e,{props:[_8(t,/:(plac\w+)/,":-moz-$1")]})),N8(F8(e,{props:[_8(t,/:(plac\w+)/,d8+"input-$1")]})),N8(F8(e,{props:[t]})),w8(e,{props:O8(i,n)})}return""})}}function a7(e){return X8(s7("",null,null,null,[""],e=Y8(e),0,[0],e))}function s7(e,t,i,n,r,a,s,o,l){for(var c=0,h=0,u=s,d=0,p=0,f=0,m=1,g=1,v=1,y=0,b="",x=r,w=a,A=n,S=b;g;)switch(f=y,y=V8()){case 40:if(108!=f&&58==C8(S,u-1)){-1!=E8(S+=_8(Q8(y),"&","&\f"),"&\f",b8(c?o[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=Q8(y);break;case 9:case 10:case 13:case 32:S+=K8(f);break;case 92:S+=Z8(H8()-1,7);continue;case 47:switch(W8()){case 42:case 47:D8(l7($8(V8(),H8()),t,i,l),l);break;default:S+="/"}break;case 123*m:o[c++]=T8(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+h:-1==v&&(S=_8(S,/\f/g,"")),p>0&&T8(S)-u&&D8(p>32?c7(S+";",n,i,u-1,l):c7(_8(S," ","")+";",n,i,u-2,l),l);break;case 59:S+=";";default:if(D8(A=o7(S,t,i,c,h,r,o,b,x=[],w=[],u,a),a),123===y)if(0===h)s7(S,t,A,A,x,a,u,o,w);else switch(99===d&&110===C8(S,3)?100:d){case 100:case 108:case 109:case 115:s7(e,A,A,n&&D8(o7(e,A,A,0,0,r,o,b,r,x=[],u,w),w),r,w,u,o,n?x:w);break;default:s7(S,A,A,A,[""],w,0,o,w)}}c=h=p=0,m=v=1,b=S="",u=s;break;case 58:u=1+T8(S),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==U8())continue;switch(S+=x8(y),y*m){case 38:v=h>0?1:(S+="\f",-1);break;case 44:o[c++]=(T8(S)-1)*v,v=1;break;case 64:45===W8()&&(S+=Q8(V8())),d=W8(),h=u=T8(b=S+=e7(H8())),y++;break;case 45:45===f&&2==T8(S)&&(m=0)}}return a}function o7(e,t,i,n,r,a,s,o,l,c,h,u){for(var d=r-1,p=0===r?a:[""],f=P8(p),m=0,g=0,v=0;m<n;++m)for(var y=0,b=M8(e,d+1,d=b8(g=s[m])),x=e;y<f;++y)(x=A8(g>0?p[y]+" "+b:_8(b,/&\f/g,p[y])))&&(l[v++]=x);return j8(e,t,i,0===r?g8:o,l,c,h,u)}function l7(e,t,i,n){return j8(e,t,i,m8,x8(z8),M8(e,2,-2),0,n)}function c7(e,t,i,n,r){return j8(e,t,i,v8,M8(e,0,n),M8(e,n+1,-1),n,r)}var h7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},u7="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",d7="active",p7="data-styled-version",f7="6.1.19",m7="/*!sc*/\n",g7="undefined"!=typeof window&&"undefined"!=typeof document,v7=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Ujjawal-Portfolio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),y7=(new Set,Object.freeze([])),b7=Object.freeze({});function x7(e,t,i){return void 0===i&&(i=b7),e.theme!==i.theme&&e.theme||t||i.theme}var w7=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),A7=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,S7=/(^-|-$)/g;function _7(e){return e.replace(A7,"-").replace(S7,"")}var E7=/(a)(d)/gi,C7=function(e){return String.fromCharCode(e+(e>25?39:97))};function M7(e){var t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=C7(t%52)+i;return(C7(t%52)+i).replace(E7,"$1-$2")}var T7,P7=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},D7=function(e){return P7(5381,e)};function O7(e){return M7(D7(e)>>>0)}function k7(e){return e.displayName||e.name||"Component"}function I7(e){return"string"==typeof e&&!0}var R7="function"==typeof Symbol&&Symbol.for,L7=R7?Symbol.for("react.memo"):60115,z7=R7?Symbol.for("react.forward_ref"):60112,B7={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},j7={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},F7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},N7=((T7={})[z7]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},T7[L7]=F7,T7);function U7(e){return("type"in(t=e)&&t.type.$$typeof)===L7?F7:"$$typeof"in e?N7[e.$$typeof]:B7;var t}var V7=Object.defineProperty,W7=Object.getOwnPropertyNames,H7=Object.getOwnPropertySymbols,G7=Object.getOwnPropertyDescriptor,q7=Object.getPrototypeOf,Y7=Object.prototype;function X7(e,t,i){if("string"!=typeof t){if(Y7){var n=q7(t);n&&n!==Y7&&X7(e,n,i)}var r=W7(t);H7&&(r=r.concat(H7(t)));for(var a=U7(e),s=U7(t),o=0;o<r.length;++o){var l=r[o];if(!(l in j7||i&&i[l]||s&&l in s||a&&l in a)){var c=G7(t,l);try{V7(e,l,c)}catch(e){}}}}return e}function Q7(e){return"function"==typeof e}function K7(e){return"object"==typeof e&&"styledComponentId"in e}function Z7(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function J7(e,t){if(0===e.length)return"";for(var i=e[0],n=1;n<e.length;n++)i+=t?t+e[n]:e[n];return i}function $7(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function e9(e,t,i){if(void 0===i&&(i=!1),!i&&!$7(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=e9(e[n],t[n]);else if($7(t))for(var n in t)e[n]=e9(e[n],t[n]);return e}function t9(e,t){Object.defineProperty(e,"toString",{value:t})}function i9(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var n9=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,r=n;e>=r;)if((r<<=1)<0)throw i9(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(i),this.length=r;for(var a=n;a<r;a++)this.groupSizes[a]=0}for(var s=this.indexOfGroup(e+1),o=(a=0,t.length);a<o;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),n=i+t;this.groupSizes[e]=0;for(var r=i;r<n;r++)this.tag.deleteRule(i)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var i=this.groupSizes[e],n=this.indexOfGroup(e),r=n+i,a=n;a<r;a++)t+="".concat(this.tag.getRule(a)).concat(m7);return t},e}(),r9=new Map,a9=new Map,s9=1,o9=function(e){if(r9.has(e))return r9.get(e);for(;a9.has(s9);)s9++;var t=s9++;return r9.set(e,t),a9.set(t,e),t},l9=function(e,t){s9=t+1,r9.set(e,t),a9.set(t,e)},c9="style[".concat(u7,"][").concat(p7,'="').concat(f7,'"]'),h9=new RegExp("^".concat(u7,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),u9=function(e,t,i){for(var n,r=i.split(","),a=0,s=r.length;a<s;a++)(n=r[a])&&e.registerName(t,n)},d9=function(e,t){for(var i,n=(null!==(i=t.textContent)&&void 0!==i?i:"").split(m7),r=[],a=0,s=n.length;a<s;a++){var o=n[a].trim();if(o){var l=o.match(h9);if(l){var c=0|parseInt(l[1],10),h=l[2];0!==c&&(l9(h,c),u9(e,h,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(o)}}},p9=function(e){for(var t=document.querySelectorAll(c9),i=0,n=t.length;i<n;i++){var r=t[i];r&&r.getAttribute(u7)!==d7&&(d9(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function f9(){return __webpack_require__.nc}var m9=function(e){var t=document.head,i=e||t,n=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(u7,"]")));return t[t.length-1]}(i),a=void 0!==r?r.nextSibling:null;n.setAttribute(u7,d7),n.setAttribute(p7,f7);var s=f9();return s&&n.setAttribute("nonce",s),i.insertBefore(n,a),n},g9=function(){function e(e){this.element=m9(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,i=0,n=t.length;i<n;i++){var r=t[i];if(r.ownerNode===e)return r}throw i9(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),v9=function(){function e(e){this.element=m9(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),y9=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),b9=g7,x9={isServer:!g7,useCSSOMInjection:!v7},w9=function(){function e(e,t,i){void 0===e&&(e=b7),void 0===t&&(t={});var n=this;this.options=l8(l8({},x9),e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&g7&&b9&&(b9=!1,p9(this)),t9(this,function(){return function(e){for(var t=e.getTag(),i=t.length,n="",r=function(i){var r=function(e){return a9.get(e)}(i);if(void 0===r)return"continue";var a=e.names.get(r),s=t.getGroup(i);if(void 0===a||!a.size||0===s.length)return"continue";var o="".concat(u7,".g").concat(i,'[id="').concat(r,'"]'),l="";void 0!==a&&a.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),n+="".concat(s).concat(o,'{content:"').concat(l,'"}').concat(m7)},a=0;a<i;a++)r(a);return n}(n)})}return e.registerId=function(e){return o9(e)},e.prototype.rehydrate=function(){!this.server&&g7&&p9(this)},e.prototype.reconstructWithOptions=function(t,i){return void 0===i&&(i=!0),new e(l8(l8({},this.options),t),this.gs,i&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,i=e.target;return e.isServer?new y9(i):t?new g9(i):new v9(i)}(this.options),new n9(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(o9(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},e.prototype.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(o9(e),i)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(o9(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),A9=/&/g,S9=/^\s*\/\/.*$/gm;function _9(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=_9(e.children,t)),e})}function E9(e){var t,i,n,r=void 0===e?b7:e,a=r.options,s=void 0===a?b7:a,o=r.plugins,l=void 0===o?y7:o,c=function(e,n,r){return r.startsWith(i)&&r.endsWith(i)&&r.replaceAll(i,"").length>0?".".concat(t):e},h=l.slice();h.push(function(e){e.type===g8&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(A9,i).replace(n,c))}),s.prefix&&h.push(r7),h.push(i7);var u=function(e,r,a,o){void 0===r&&(r=""),void 0===a&&(a=""),void 0===o&&(o="&"),t=o,i=r,n=new RegExp("\\".concat(i,"\\b"),"g");var l=e.replace(S9,""),c=a7(a||r?"".concat(a," ").concat(r," { ").concat(l," }"):l);s.namespace&&(c=_9(c,s.namespace));var u,d=[];return t7(c,function(e){var t=P8(e);return function(i,n,r,a){for(var s="",o=0;o<t;o++)s+=e[o](i,n,r,a)||"";return s}}(h.concat((u=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&u(e)})))),d};return u.hash=l.length?l.reduce(function(e,t){return t.name||i9(15),P7(e,t.name)},5381).toString():"",u}var C9=new w9,M9=E9(),T9=t.createContext({shouldForwardProp:void 0,styleSheet:C9,stylis:M9}),P9=(T9.Consumer,t.createContext(void 0));function D9(){return(0,t.useContext)(T9)}function O9(e){var i=(0,t.useState)(e.stylisPlugins),n=i[0],r=i[1],a=D9().styleSheet,s=(0,t.useMemo)(function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,a]),o=(0,t.useMemo)(function(){return E9({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})},[e.enableVendorPrefixes,e.namespace,n]);(0,t.useEffect)(function(){u8()(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,t.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:o}},[e.shouldForwardProp,s,o]);return t.createElement(T9.Provider,{value:l},t.createElement(P9.Provider,{value:o},e.children))}var k9=function(){function e(e,t){var i=this;this.inject=function(e,t){void 0===t&&(t=M9);var n=i.name+t.hash;e.hasNameForId(i.id,n)||e.insertRules(i.id,n,t(i.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,t9(this,function(){throw i9(12,String(i.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=M9),this.name+e.hash},e}(),I9=function(e){return e>="A"&&e<="Z"};function R9(e){for(var t="",i=0;i<e.length;i++){var n=e[i];if(1===i&&"-"===n&&"-"===e[0])return e;I9(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var L9=function(e){return null==e||!1===e||""===e},z9=function(e){var t,i,n=[];for(var r in e){var a=e[r];e.hasOwnProperty(r)&&!L9(a)&&(Array.isArray(a)&&a.isCss||Q7(a)?n.push("".concat(R9(r),":"),a,";"):$7(a)?n.push.apply(n,c8(c8(["".concat(r," {")],z9(a),!1),["}"],!1)):n.push("".concat(R9(r),": ").concat((t=r,null==(i=a)||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||t in h7||t.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return n};function B9(e,t,i,n){return L9(e)?[]:K7(e)?[".".concat(e.styledComponentId)]:Q7(e)?!Q7(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:B9(e(t),t,i,n):e instanceof k9?i?(e.inject(i,n),[e.getName(n)]):[e]:$7(e)?z9(e):Array.isArray(e)?Array.prototype.concat.apply(y7,e.map(function(e){return B9(e,t,i,n)})):[e.toString()];var r}function j9(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(Q7(i)&&!K7(i))return!1}return!0}var F9=D7(f7),N9=function(){function e(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&j9(e),this.componentId=t,this.baseHash=P7(F9,t),this.baseStyle=i,w9.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,i){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=Z7(n,this.staticRulesId);else{var r=J7(B9(this.rules,e,t,i)),a=M7(P7(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,a)){var s=i(r,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,s)}n=Z7(n,a),this.staticRulesId=a}else{for(var o=P7(this.baseHash,i.hash),l="",c=0;c<this.rules.length;c++){var h=this.rules[c];if("string"==typeof h)l+=h;else if(h){var u=J7(B9(h,e,t,i));o=P7(o,u+c),l+=u}}if(l){var d=M7(o>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,i(l,".".concat(d),void 0,this.componentId)),n=Z7(n,d)}}return n},e}(),U9=t.createContext(void 0);U9.Consumer;var V9={};new Set;function W9(e,i,n){var r=K7(e),a=e,s=!I7(e),o=i.attrs,l=void 0===o?y7:o,c=i.componentId,h=void 0===c?function(e,t){var i="string"!=typeof e?"sc":_7(e);V9[i]=(V9[i]||0)+1;var n="".concat(i,"-").concat(O7(f7+i+V9[i]));return t?"".concat(t,"-").concat(n):n}(i.displayName,i.parentComponentId):c,u=i.displayName,d=void 0===u?function(e){return I7(e)?"styled.".concat(e):"Styled(".concat(k7(e),")")}(e):u,p=i.displayName&&i.componentId?"".concat(_7(i.displayName),"-").concat(i.componentId):i.componentId||h,f=r&&a.attrs?a.attrs.concat(l).filter(Boolean):l,m=i.shouldForwardProp;if(r&&a.shouldForwardProp){var g=a.shouldForwardProp;if(i.shouldForwardProp){var v=i.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new N9(n,p,r?a.componentStyle:void 0);function b(e,i){return function(e,i,n){var r=e.attrs,a=e.componentStyle,s=e.defaultProps,o=e.foldedComponentIds,l=e.styledComponentId,c=e.target,h=t.useContext(U9),u=D9(),d=e.shouldForwardProp||u.shouldForwardProp,p=x7(i,h,s)||b7,f=function(e,t,i){for(var n,r=l8(l8({},t),{className:void 0,theme:i}),a=0;a<e.length;a+=1){var s=Q7(n=e[a])?n(r):n;for(var o in s)r[o]="className"===o?Z7(r[o],s[o]):"style"===o?l8(l8({},r[o]),s[o]):s[o]}return t.className&&(r.className=Z7(r.className,t.className)),r}(r,i,p),m=f.as||c,g={};for(var v in f)void 0===f[v]||"$"===v[0]||"as"===v||"theme"===v&&f.theme===p||("forwardedAs"===v?g.as=f.forwardedAs:d&&!d(v,m)||(g[v]=f[v]));var y=function(e,t){var i=D9();return e.generateAndInjectStyles(t,i.styleSheet,i.stylis)}(a,f),b=Z7(o,l);return y&&(b+=" "+y),f.className&&(b+=" "+f.className),g[I7(m)&&!w7.has(m)?"class":"className"]=b,n&&(g.ref=n),(0,t.createElement)(m,g)}(x,e,i)}b.displayName=d;var x=t.forwardRef(b);return x.attrs=f,x.componentStyle=y,x.displayName=d,x.shouldForwardProp=m,x.foldedComponentIds=r?Z7(a.foldedComponentIds,a.styledComponentId):"",x.styledComponentId=p,x.target=r?a.target:e,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0,r=t;n<r.length;n++)e9(e,r[n],!0);return e}({},a.defaultProps,e):e}}),t9(x,function(){return".".concat(x.styledComponentId)}),s&&X7(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function H9(e,t){for(var i=[e[0]],n=0,r=t.length;n<r;n+=1)i.push(t[n],e[n+1]);return i}var G9=function(e){return Object.assign(e,{isCss:!0})};function q9(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(Q7(e)||$7(e))return G9(B9(H9(y7,c8([e],t,!0))));var n=e;return 0===t.length&&1===n.length&&"string"==typeof n[0]?B9(n):G9(B9(H9(n,t)))}function Y9(e,t,i){if(void 0===i&&(i=b7),!t)throw i9(1,t);var n=function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return e(t,i,q9.apply(void 0,c8([n],r,!1)))};return n.attrs=function(n){return Y9(e,t,l8(l8({},i),{attrs:Array.prototype.concat(i.attrs,n).filter(Boolean)}))},n.withConfig=function(n){return Y9(e,t,l8(l8({},i),n))},n}var X9=function(e){return Y9(W9,e)},Q9=X9;w7.forEach(function(e){Q9[e]=X9(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=j9(e),w9.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,i,n){var r=n(J7(B9(this.rules,t,i,n)),""),a=this.componentId+e;i.insertRules(a,a,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,i,n){e>2&&w9.registerId(this.componentId+e),this.removeStyles(e,i),this.createStyles(e,t,i,n)}}();var K9,Z9,J9,$9,eee,tee;(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var i=f9(),n=J7([i&&'nonce="'.concat(i,'"'),"".concat(u7,'="true"'),"".concat(p7,'="').concat(f7,'"')].filter(Boolean)," ");return"<style ".concat(n,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw i9(2);return e._emitSheetCSS()},this.getStyleElement=function(){var i;if(e.sealed)throw i9(2);var n=e.instance.toString();if(!n)return[];var r=((i={})[u7]="",i[p7]=f7,i.dangerouslySetInnerHTML={__html:n},i),a=f9();return a&&(r.nonce=a),[t.createElement("style",l8({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new w9({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw i9(2);return t.createElement(O9,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw i9(3)}})(),"__sc-".concat(u7,"__");const iee=window.innerWidth<=1023,nee=window.innerWidth<=1330,ree=Q9.div(K9||(K9=o8(["\n  position: absolute;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  justify-content: flex-end;\n  background-image: url(",");\n  background-size: cover;\n  z-index: 1;\n"])),sh),aee=Q9.div(Z9||(Z9=o8(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  top: 24% ;\n  right: 50px;\n  width: 45%;\n  z-index: 3;\n\n  @media (max-width: 1330px) {\n    top: 17% ;\n    width: 58%;\n    right: 1%;\n  }\n  @media (max-width: 1024px) {\n    top: 10%;\n    width: 60%;\n    justify-content: right;\n  }\n"]))),see=Q9.div(J9||(J9=o8(["\n  width: 30%;\n  min-height: 200px;\n  margin: 22px 10px 10px; /* Adjusted bottom margin to reduce space between rows */\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.1); /* Semi-transparent background */\n  border-radius: 18px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n  text-align: center;\n  transition: transform 0.3s, box-shadow 0.3s, background 0.3s;\n  cursor: pointer;\n  perspective: 1000px;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  backdrop-filter: blur(8px); /* Glassmorphism blur effect */\n  border: 1px solid rgba(255, 255, 255, 0.7); /* Optional border for added effect */\n  \n  &:hover {\n    transform: rotateY(0deg) rotateX(8deg) scale(1.1);\n    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);\n    background: rgba(255, 255, 255, 0.2); /* Slightly more opaque on hover */\n  }\n  * {\n    position: relative;\n    z-index: 1; /* Ensure content is above the overlay */\n  }\n\n  @media (max-width: 1330px) {\n    width: 30%; \n    min-height: 180px; \n  }\n\n  @media (max-width: 1024px) {\n    width: 28%;\n    min-height: 160px;\n  }\n"]))),oee=Q9.div($9||($9=o8(["\n  font-size: 2.3rem;\n  font-weight: bold;\n  margin-bottom: 5px;\n  color: rgb(240, 2, 149);\n"]))),lee=Q9.div(eee||(eee=o8(["\n  margin: 10px 0;\n  font-size: 1.2em;\n  color: #fff;\n"]))),cee=Q9.a(tee||(tee=o8(["\n  color: #ff3705;\n  text-decoration: none;\n  font-weight: bold;\n  font-size: 2.2em;\n  margin-top: 6px;\n"])));const hee=function(){const e=We({maxWidth:1250}),t=We({minWidth:1251,maxWidth:1600}),[i]=xc(Oc),{ref:n,inView:r}=bh({triggerOnce:!0,threshold:.1});return(0,He.jsxs)(ree,{children:[(0,He.jsx)("div",{style:{position:"absolute",left:"1%",top:"50%",transform:"translateY(-50%)",width:e?"50%":"40%",maxWidth:"600px",zIndex:2,opacity:r?1:0,transition:"opacity 1.25s ease-out 0.5s",pointerEvents:"none"},children:(0,He.jsx)("img",{src:"".concat("/Ujjawal-Portfolio","/images/Live%20chatbot.gif"),alt:"Live Chatbot",style:{width:"100%",height:"auto",objectFit:"contain",borderRadius:"10px",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"}})}),(0,He.jsx)("div",{className:"Test",style:{fontSize:iee?"2.8rem":nee?"3.8rem":"4.8rem",textAlign:"center",zIndex:"2",marginRight:iee?"1.5rem":nee?"2.8rem":"3rem",marginTop:nee?"5rem":"10rem",marginBottom:nee?"0.5rem":"2rem",opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 0.8s, transform 1.25s ease-out 0.8s"},children:"Portfolio Overview"}),!t&&(0,He.jsx)(aee,{ref:n,children:[{name:"About Me",description:"Creative developer dedicated to crafting functional, visually appealing web solutions.",link:"/about"},{name:"Tech Skills",description:"Explore my diverse skills and technologies for innovative digital solutions.",link:"/skills"},{name:"Education",description:"Explore my qualifications and achievements, showcasing the foundation of expertise.",link:"/education"},{name:"My Projects",description:"Discover projects showcasing my creativity, technical skills, and impactful results.",link:"/projects"},{name:"Experience",description:"See my experience and work history to understand my skills journey.",link:"/experience"},{name:"Certifications",description:"Explore my certifications and accomplishments, showcasing expertise and diverse skills gained.",link:"/certifications"}].map((e,t)=>(0,He.jsxs)(see,{style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out ".concat(1.1+t,"s, transform 1.25s ease-out ").concat(1.1+t,"s"),border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:[(0,He.jsx)(oee,{style:{fontFamily:"'Vidaloka', serif"},children:e.name}),(0,He.jsx)(lee,{children:e.description}),(0,He.jsx)(cee,{href:e.link,onClick:i,style:{fontFamily:"'Tangerine', cursive"},children:"Learn More"})]},t))}),!e&&(0,He.jsx)(aee,{ref:n,children:[{name:"About Me",description:"Passionate and innovative developer with a creative flair, dedicated to crafting visually appealing and functional web solutions.",link:"/about"},{name:"Tech Skills",description:"Explore the diverse skills and cutting-edge technologies I work with to create innovative and impactful digital solutions.",link:"/skills"},{name:"Education",description:"Explore my educational qualifications and achievements to see the foundation of my expertise and growth.",link:"/education"},{name:"My Projects",description:"Discover the projects I\u2019ve worked on to see my creativity and technical skills in action and impact fully.",link:"/projects"},{name:"Experience",description:"See my professional experience and work history to understand my journey and the skills I\u2019ve developed.",link:"/experience"},{name:"Certifications",description:"Showcasing my accomplishments and expertise in various fields\u2014explore my certifications and the skills I\u2019ve gained!",link:"/certifications"}].map((e,t)=>(0,He.jsxs)(see,{style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out ".concat(1.1+t,"s, transform 1.25s ease-out ").concat(1.1+t,"s"),border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:[(0,He.jsx)(oee,{style:{fontFamily:"'Vidaloka', serif"},children:e.name}),(0,He.jsx)(lee,{children:e.description}),(0,He.jsx)(cee,{href:e.link,onClick:i,style:{fontFamily:"'Tangerine', cursive"},children:"Learn More"})]},t))})]})};function uee(e){let{isExpanded:i}=e;const{ref:n,inView:r}=bh({triggerOnce:!0,threshold:.1}),a={container:{font:"monospace",fontSize:"14px",color:"white",padding:"1rem",marginLeft:"0",marginBottom:"1rem",textAlign:"left",display:"block",backgroundColor:"transparent",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",maxWidth:"100%",height:"auto",aspectRatio:"attr(width) / attr(height)",border:"0.1px solid rgb(100, 100, 100)",borderRadius:"10px",opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 3.5s, transform 1.25s ease-out 3.5s"}};return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .home3 {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 2.8rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    animation: gradient 1.5s infinite;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,He.jsx)(He.Fragment,{children:(0,He.jsxs)("div",{ref:n,style:i?{display:"none"}:a.container,children:[(0,He.jsx)("div",{className:"home3",ref:n,style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 4.2s, transform 1.25s ease-out 4.2s"},children:"About Me"}),(0,He.jsxs)("div",{ref:n,style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 5s, transform 1.25s ease-out 5s"},children:[(0,He.jsx)("br",{}),"B.Tech CSE graduate Engineering student passionate about computers and aiming to kickstart a career in Software Development and Salesforce Development. Currently based in Delhi, India, I Completed my Graduation in field of Computer Science at MERI-CET. Having basic knowledge of Data Structures and Algorithms (DSA) Eager to contribute my skills in a dynamic environment and continue growing as a software engineer and I also passionate about Web Development and AI-powered solutions.",(0,He.jsx)("br",{}),(0,He.jsx)("br",{}),"I have hands-on experience in frontend development & backend fundamentals (Node.js, Express.js, MongoDB) and proficient in GitHub for version control. Exploring AI automation and developing AI-powered products, with the ability to deploy projects on render, github  and also contribute my skills in a dynamic environment and I am to grow as a full-stack developer and AI innovator."]})]})})}function dee(e){const{ref:t,inView:i}=bh({triggerOnce:!0,threshold:.1}),n={display:"inline",font:"monospace",color:"white",fontSize:"13.5px",margin:"2px",marginTop:"5px",opacity:"0.8"};return(0,He.jsxs)("div",{style:{fontSize:"13.5px",padding:"15px",paddingTop:"15px",marginLeft:"0",marginTop:"0",textAlign:"left",backgroundColor:"transparent",maxWidth:"100%",height:"auto",aspectRatio:"attr(width) / attr(height)",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",border:"0.1px solid rgb(100, 100, 100)",borderRadius:"10px",transition:"0.5s all",boxShadow:"none"},children:[(0,He.jsx)("div",{ref:t,style:(0,ye.A)((0,ye.A)({},{color:"#e73e0d",fontSize:"18px",fontWeight:"bold",fontFamily:"'Vidaloka', serif"}),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1s, transform 1.25s ease-out 1s"}),children:e.title}),(0,He.jsx)("div",{ref:t,style:(0,ye.A)((0,ye.A)({},{color:"white",fontSize:"13.5px",marginTop:"5px",opacity:"0.8"}),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1.5s, transform 1.25s ease-out 1.5s"}),children:e.description}),(0,He.jsx)("div",{className:"points",ref:t,style:(0,ye.A)((0,ye.A)({},{color:"white",fontSize:"13.5px",marginTop:"5px",opacity:"0.8"}),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2.1s, transform 1.25s ease-out 2.1s"}),children:e.points.map((e,r)=>(0,He.jsx)("li",{className:"card-item",ref:t,style:(0,ye.A)((0,ye.A)({},n),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2.1s, transform 1.25s ease-out 2.1s"}),children:e},r))})]})}function pee(){const[e]=xc(Oc),{ref:t,inView:i}=bh({triggerOnce:!0,threshold:.1});return(0,He.jsx)("div",{style:{overflow:"hidden"},children:(0,He.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"20px"},className:"more-details",children:[(0,He.jsx)(pt,{to:"/education",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 5.5s, transform 1.25s ease-out 5.5s",border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(dee,(0,ye.A)({},{title:"My Education",description:"College and Degree",points:["Engineering College, MERI-CET-25, ","CSE"],content:[]}))}),(0,He.jsx)(pt,{to:"/skills",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 7s, transform 1.25s ease-out 7s",border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(dee,(0,ye.A)({},{title:"My Technical Skills",description:"",points:["React, ","Javascript, ","Python, ","Django, ","HTML, ","CSS, ","java, ","AI, ","NodeJs, ","ExpressJs, ","Others... "],content:[]}))}),(0,He.jsx)(pt,{to:"/certifications",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 9.4s, transform 1.25s ease-out 9.4s",border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(dee,(0,ye.A)({},{title:"My Certifications",description:"",points:["GSsoc Appreciation, ","Salesforce Developer, ","Accenture certifications, ","IBM Skill build Internship certifications, ","Postman API, ","Others..."],content:[]}))}),(0,He.jsx)(pt,{to:"/about",onClick:e,ref:t,style:{textDecoration:"none",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 11s, transform 1.25s ease-out 11s",border:"2px solid transparent"},onMouseEnter:e=>{e.currentTarget.style.border="2px solid #22d3ee",e.currentTarget.style.borderRadius="14px",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2px solid transparent",e.currentTarget.style.boxShadow="none"},children:(0,He.jsx)(dee,(0,ye.A)({},{title:"My Achievements",description:"",points:["Branch Topper, ","Tech & Github Advocate, ","GSsoc Ranker, ","College Ranker, ","Others..."],content:[]}))})]})})}function fee(e){let{isExpanded:t,setExpanded:i}=e;return(0,He.jsxs)("div",{style:{flex:4,padding:"1rem",display:"block",maxWidth:"100%",height:"auto",background:"transparent",borderRadius:"0 1.5rem 1.5rem 0",overflow:"hidden",zIndex:2},onMouseLeave:()=>i(!1),children:[(0,He.jsx)(uee,{isExpanded:t}),(0,He.jsx)(pee,{isExpanded:t,setExpanded:i})]})}const mee=__webpack_require__.p+"static/media/Img3.3a98cb6fd9d5923096a1.png";function gee(){const[e]=xc(Hc),{ref:t,inView:i}=bh({triggerOnce:!0,threshold:.1}),n={container:{display:"block",padding:"2rem",flex:1.05,backgroundColor:"black",maxWidth:"100%",height:"auto",background:"transparent",borderRadius:"1.5rem 0 0 1.5rem"},imgContainer:{textAlign:"left",height:"auto",background:"transparent",borderRadius:"50%"},dp:{borderRadius:"50%",textAlign:"center",border:"2px solid wheat",width:"280px",height:"230px",margin:"0 auto",display:"block"},details:{display:"block",textAlign:"left",maxWidth:"100%",height:"auto",color:"white",background:"transparent",borderRadius:"0 1.5rem 1.5rem 0"},name:{color:"white",marginTop:"1.8rem",fontSize:"4rem",marginLeft:"-5px",fontWeight:"bold"},greyFont:{color:"grey",fontSize:"1.6rem",fontFamily:"'Vidaloka', serif",marginTop:"-5px",margin:"0px"},desc:{textAlign:"left",color:"white",fontSize:"1.1rem",marginTop:"5px"}};return(0,He.jsxs)("div",{style:n.container,children:[(0,He.jsx)("div",{ref:t,style:(0,ye.A)((0,ye.A)({},n.imgContainer),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 0.4s, transform 1.25s ease-out 0.4s"}),children:(0,He.jsx)("img",{src:mee,alt:"Profile",style:n.dp,onMouseEnter:e=>{e.currentTarget.style.border="2.8px solid #22d3ee",e.currentTarget.style.boxShadow="0 0 10px #22d3ee"},onMouseLeave:e=>{e.currentTarget.style.border="2.8px solid transparent",e.currentTarget.style.boxShadow="none"}})}),(0,He.jsxs)("div",{style:n.details,children:[(0,He.jsx)("div",{ref:t,style:(0,ye.A)((0,ye.A)({},n.name),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1.1s, transform 1.25s ease-out 1.1s",fontFamily:"'Tangerine', cursive"}),children:"Ujjawal Shrivastava"}),(0,He.jsx)("h3",{ref:t,style:(0,ye.A)((0,ye.A)({},n.greyFont),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1.8s, transform 1.25s ease-out 1.8s"}),children:"ujjwalshriv3"}),(0,He.jsx)("div",{ref:t,style:(0,ye.A)((0,ye.A)({},n.desc),{},{opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2.4s, transform 1.25s ease-out 2.4s"}),children:"BTech-CSE' @MDU | FullStack Web Developer | Open Source | Learner | Tech Enthusiast | Software Developer |  AI Enthusiast | Salesforce Developer"}),(0,He.jsx)("div",{className:"glowbtn",children:(0,He.jsxs)("a",{href:"https://github.com/ujjwalshriv3",onClick:e,ref:t,style:{padding:"12px 60px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#33f403",border:"none",marginLeft:"1px",marginTop:"12px",fontSize:"16px",fontWeight:"bold",width:"100%",textAlign:"center",cursor:"pointer",opacity:i?1:0,transform:i?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 3s, transform 1.25s ease-out 3s, background-color 0.3s"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("button",{children:"Github"})]})})]})]})}function vee(){const{ref:e,inView:i}=bh({triggerOnce:!1,threshold:.1}),n={about:{margin:0,padding:0},laptopStyle:{display:"flex",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",margin:"auto",width:"100%",maxWidth:"120rem",overflow:"hidden",zIndex:10},laptopScreenStyle:{display:"flex",position:"relative",zIndex:10,padding:"12px",minHeight:"78vh",width:"100vw",marginTop:"50px",borderRadius:"2rem",background:"transparent",boxShadow:"0 0.1rem 0 #cfcfcf",border:"1px solid wheat"},laptopShadowStyle:{position:"absolute",right:"-10%",bottom:"-2.5rem",left:"-10%",zIndex:10,height:"2rem",background:"radial-gradient(ellipse closest-side,#000,transparent)",opacity:.5}},[r,a]=(0,t.useState)(!1);return(0,He.jsx)("main",{style:n.about,children:(0,He.jsx)("div",{className:"container",id:"about",children:(0,He.jsxs)("div",{className:"laptop",style:n.laptopStyle,children:[(0,He.jsxs)("div",{className:"laptop__screen",style:n.laptopScreenStyle,children:[(0,He.jsx)(gee,{}),(0,He.jsx)(fee,{isExpanded:r,setExpanded:a})]}),(0,He.jsx)("div",{className:"laptop__shadow",style:n.laptopShadowStyle})]})})})}class yee extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bee(e){let{children:i,isPresent:n}=e;const r=(0,t.useId)(),a=(0,t.useRef)(null),s=(0,t.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,t.useContext)(ol);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:i,left:l}=s.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=r;const c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(i,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[n]),(0,He.jsx)(yee,{isPresent:n,childRef:a,sizeRef:s,children:t.cloneElement(i,{ref:a})})}const xee=e=>{let{children:i,initial:n,isPresent:r,onExitComplete:a,custom:s,presenceAffectsLayout:o,mode:l}=e;const c=El(wee),h=(0,t.useId)(),u=(0,t.useCallback)(e=>{c.set(e,!0);for(const t of c.values())if(!t)return;a&&a()},[c,a]),d=(0,t.useMemo)(()=>({id:h,initial:n,isPresent:r,custom:s,onExitComplete:u,register:e=>(c.set(e,!1),()=>c.delete(e))}),o?[Math.random(),u]:[r,u]);return(0,t.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),t.useEffect(()=>{!r&&!c.size&&a&&a()},[r]),"popLayout"===l&&(i=(0,He.jsx)(bee,{isPresent:r,children:i})),(0,He.jsx)(Cs.Provider,{value:d,children:i})};function wee(){return new Map}const Aee=e=>e.key||"";function See(e){const i=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&i.push(e)}),i}const _ee=e=>{let{children:i,custom:n,initial:r=!0,onExitComplete:a,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1}=e;const[c,h]=Ms(l),u=(0,t.useMemo)(()=>See(i),[i]),d=l&&!c?[]:u.map(Aee),p=(0,t.useRef)(!0),f=(0,t.useRef)(u),m=El(()=>new Map),[g,v]=(0,t.useState)(u),[y,b]=(0,t.useState)(u);yl(()=>{p.current=!1,f.current=u;for(let e=0;e<y.length;e++){const t=Aee(y[e]);d.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[y,d.length,d.join("-")]);const x=[];if(u!==g){let e=[...u];for(let t=0;t<y.length;t++){const i=y[t],n=Aee(i);d.includes(n)||(e.splice(t,0,i),x.push(i))}return"wait"===o&&x.length&&(e=x),b(See(e)),void v(u)}const{forceRender:w}=(0,t.useContext)(Ts);return(0,He.jsx)(He.Fragment,{children:y.map(e=>{const t=Aee(e),i=!(l&&!c)&&(u===y||d.includes(t));return(0,He.jsx)(xee,{isPresent:i,initial:!(p.current&&!r)&&void 0,custom:i?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:i?void 0:()=>{if(!m.has(t))return;m.set(t,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(null===w||void 0===w||w(),b(f.current),l&&(null===h||void 0===h||h()),a&&a())},children:e},t)})})},Eee=t.memo(e=>{let{className:i,children:n,delay:r=2e3}=e;const[a,s]=(0,t.useState)(0),o=t.Children.toArray(n);(0,t.useEffect)(()=>{const e=setInterval(()=>{s(e=>(e+1)%o.length)},r);return()=>clearInterval(e)},[o.length,r]);const l=(0,t.useMemo)(()=>o.slice(0,a+1).reverse(),[a,o]);return(0,He.jsx)("div",{className:"flex flex-col items-center gap-4 ".concat(i),children:(0,He.jsx)(_ee,{children:l.map(e=>(0,He.jsx)(Cee,{children:e},e.key))})})});function Cee(e){let{children:t}=e;return(0,He.jsx)(vc.div,(0,ye.A)((0,ye.A)({},{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,originY:0},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:350,damping:40}}),{},{layout:!0,className:"mx-auto w-full",children:t}))}Eee.displayName="AnimatedList";const Mee={position:"absolute",width:"100%",height:"100vh",overflow:"hidden",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",position:"relative",zIndex:1},Tee={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:1},Pee=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}});const Dee=function(){return(0,He.jsxs)("div",{style:Mee,children:[(0,He.jsx)(n6,{style:Tee,scene:"https://prod.spline.design/QhiTZ1nWiX-4y93c/scene.splinecode"}),(0,He.jsx)("div",{className:"AboutCard",children:(0,He.jsx)(vc.div,{variants:Pee(1),initial:"hidden",animate:"show",children:(0,He.jsx)(vee,{})})})]})},Oee=()=>{const[e,i]=(0,t.useState)(0),[n,r]=(0,t.useState)(0),[a,s]=(0,t.useState)(0),[o,l]=(0,t.useState)(0),[c,h]=(0,t.useState)(0),[u,d]=(0,t.useState)(!1),p=(0,t.useRef)(null),f=5,m=2,g=1,v=1320,y=12,{ref:b,inView:x}=bh({triggerOnce:!0,threshold:.1});(0,t.useEffect)(()=>{const e=new IntersectionObserver(e=>{let[t]=e;return d(t.isIntersecting)},{threshold:.1});return p.current&&e.observe(p.current),()=>{p.current&&e.unobserve(p.current)}},[]),(0,t.useEffect)(()=>{const e=()=>{i(e=>e<f?e+1:e),r(e=>e<m?e+1:e),s(e=>e<g?e+1:e),l(e=>e<v?e+6:e),h(e=>e<y?e+1:e)},t=u&&"visible"===document.visibilityState?setInterval(e,100):null,n=()=>{"visible"===document.visibilityState&&u?setInterval(e,100):clearInterval(t)};return document.addEventListener("visibilitychange",n),()=>{clearInterval(t),document.removeEventListener("visibilitychange",n)}},[u]);const w={display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",color:"#fff",minHeight:"100vh",overflow:"hidden"},A={display:"flex",flexDirection:"column",alignItems:"center",margin:"10px",padding:"15px",borderRadius:"8px",backgroundColor:"rgba(255, 255, 255, 0)",color:"#fff",boxShadow:"0 6px 12px rgba(0, 0, 0, 0)",width:"160px",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out"},S={transform:"scale(1.05)",boxShadow:"0 8px 16px rgba(0,0,0,0.4)"},_={fontSize:"3rem",fontWeight:"bold",marginBottom:"0.2rem",fontFamily:"'Tangerine', cursive"},E={fontSize:"2.2rem",fontWeight:"bold",color:"#ff4500",fontFamily:"'Vidaloka', serif"};return(0,He.jsxs)("div",{style:w,ref:p,children:[(0,He.jsx)("style",{children:"\n    @media (max-width: 1024px) {\n      .ticker-row {\n        flex-wrap: nowrap;\n        justify-content: space-between;\n      }\n      .ticker-item {\n        width: 120px;\n        margin: 5px;\n        padding: 10px;\n      }\n      .ticker-label {\n        font-size: 14px;\n      }\n      .ticker-value {\n        font-size: 18px;\n      }\n    }\n\n    @media (max-width: 768px) {\n      .ticker-row {\n        justify-content: space-around;\n      }\n      .ticker-item {\n        width: 100px;\n        margin: 3px;\n        padding: 8px;\n      }\n      .ticker-label {\n        font-size: 12px;\n      }\n      .ticker-value {\n        font-size: 16px;\n      }\n    }\n  "}),(0,He.jsxs)("div",{className:"ticker-row",style:{display:"flex",justifyContent:"space-around",width:"100%",maxWidth:"1000px",flexWrap:"wrap",marginTop:"5.5rem"},children:[(0,He.jsxs)("div",{ref:b,className:"ticker-item",style:(0,ye.A)((0,ye.A)({},A),{},{":hover":S,opacity:x?1:0,transform:x?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 0.4s, transform 1.25s ease-out 0.4s"}),children:[(0,He.jsx)("div",{className:"ticker-label",style:_,children:"Projects:"}),(0,He.jsxs)("div",{className:"ticker-value",style:E,children:[e,"+"]})]}),(0,He.jsxs)("div",{className:"ticker-item",style:(0,ye.A)((0,ye.A)({},A),{},{":hover":S,opacity:x?1:0,transform:x?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 0.9s, transform 1.25s ease-out 0.9s"}),children:[(0,He.jsx)("div",{className:"ticker-label",style:_,children:"Happy Clients:"}),(0,He.jsx)("div",{className:"ticker-value",style:E,children:n})]}),(0,He.jsxs)("div",{className:"ticker-item",style:(0,ye.A)((0,ye.A)({},A),{},{":hover":S,opacity:x?1:0,transform:x?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1.4s, transform 1.25s ease-out 1.4s"}),children:[(0,He.jsx)("div",{className:"ticker-label",style:_,children:"Experience:"}),(0,He.jsxs)("div",{className:"ticker-value",style:E,children:[a,"+ yrs"]})]}),(0,He.jsxs)("div",{className:"ticker-item",style:(0,ye.A)((0,ye.A)({},A),{},{":hover":S,opacity:x?1:0,transform:x?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 1.9s, transform 1.25s ease-out 1.9s"}),children:[(0,He.jsx)("div",{className:"ticker-label",style:_,children:"Support Hours:"}),(0,He.jsxs)("div",{className:"ticker-value",style:E,children:[o,"+"]})]}),(0,He.jsxs)("div",{className:"ticker-item",style:(0,ye.A)((0,ye.A)({},A),{},{":hover":S,opacity:x?1:0,transform:x?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 2.4s, transform 1.25s ease-out 2.4s"}),children:[(0,He.jsx)("div",{className:"ticker-label",style:_,children:"Languages:"}),(0,He.jsxs)("div",{className:"ticker-value",style:E,children:[c,"+"]})]})]})]})},kee=__webpack_require__.p+"static/media/rocketemoji.9fe2f65d7cc74ae7d1ba.gif",Iee=__webpack_require__.p+"static/media/handshake.6c5331f3056c8f850658.gif",Ree={padding:"2rem 4rem",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",boxShadow:"0 -5px 15px rgba(0, 0, 0, 0.5)"},Lee={display:"flex",alignItems:"center",maxWidth:"50%",marginTop:"1.2rem"},zee={display:"flex",flexDirection:"column",justifyContent:"center"},Bee={display:"flex",gap:"1.5rem",flexDirection:"column",alignItems:"center",marginRight:"2rem"},jee={height:"3.5rem",width:"3.5rem",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",fontSize:"1.9rem",background:"linear-gradient(135deg, #ffae00, #ffcc33)",color:"#020213",boxShadow:"0 0 10px rgba(255, 174, 0, 0.7)",transition:"transform 0.3s ease, box-shadow 0.3s ease"},Fee={transform:"scale(1.1)",boxShadow:"0 0 15px rgba(255, 174, 0, 0.5)",backgroundColor:"transparent",color:"#fff"},Nee={textAlign:"center",fontSize:"1.5rem",fontFamily:"'Nunito', sans-serif",fontWeight:"600",borderTop:".1rem solid #fff3",paddingTop:"1rem",marginTop:"2rem",width:"100%"},Uee={color:"#ffae00",textDecoration:"none",transition:"color 0.3s ease",fontSize:"1.75rem",fontFamily:"'Dancing Script', cursive"},Vee={color:"#E90606",margin:"0 .3rem",fontSize:"1.5rem",animation:"pound .35s infinite alternate",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},Wee=()=>{const[e,i]=(0,t.useState)(!1),[n]=xc(Oc),[r]=xc(Hc),{ref:a,inView:s}=bh({triggerOnce:!0,threshold:.1}),o={height:"auto",width:"51px",marginRight:"1.2rem",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 4.4s, transform 1.25s ease-out 4.4s"},l={fontSize:"2.5rem",fontWeight:"bold",color:"#ffcc33",fontFamily:"'Vidaloka', serif",textShadow:"1px 1px 3px rgba(0, 0, 0, 0.5)",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 4.6s, transform 1.25s ease-out 4.6s"},c={fontSize:"1.8rem",color:"#e0e0e0",marginRight:"1rem",fontFamily:"'Beau Rivage', cursive",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 5s, transform 1.25s ease-out 5s"},h={fontSize:"2rem",color:"#e0e0e0",marginRight:"1rem",fontFamily:"'Dancing Script', cursive",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 6s, transform 1.25s ease-out 6s"};return(0,t.useEffect)(()=>{const e=()=>{i(window.innerWidth<=767)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,He.jsxs)("footer",{style:Ree,children:[(0,He.jsxs)("div",{style:Lee,children:[(0,He.jsx)("img",{src:Dc,alt:"UjjawalS Portfolio Logo",onClick:n,ref:a,style:o}),(0,He.jsxs)("div",{style:zee,children:[(0,He.jsx)("h3",{ref:a,style:l,onClick:()=>{n(),window.scrollTo({top:0,behavior:"smooth"})},children:"Ujjawal Portfolio"}),(0,He.jsxs)("p",{ref:a,style:c,children:["Thanks for visiting! Let's connect and elevate together."," ",(0,He.jsx)("img",{src:kee,alt:"Rocket Emoji",ref:a,style:{width:"20px",verticalAlign:"middle",display:"inline",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 5.6s, transform 1.25s ease-out 5.6s"}})]})]})]}),(0,He.jsxs)("div",{style:Bee,children:[(0,He.jsxs)("p",{style:h,children:["Let's Connect "," ",(0,He.jsx)("img",{src:Iee,alt:"HandShake Emoji",ref:a,style:{width:"24px",verticalAlign:"middle",display:"inline",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 6.5s, transform 1.25s ease-out 6.5s"}})]}),(0,He.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",className:"fab fa-linkedin",ref:a,style:(0,ye.A)((0,ye.A)({},jee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 7s, transform 1.25s ease-out 7s"}),target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>Object.assign(e.target.style,Fee),onMouseLeave:e=>Object.assign(e.target.style,jee),onClick:r}),(0,He.jsx)("a",{href:"https://github.com/ujjwalshriv3",className:"fab fa-github",ref:a,style:(0,ye.A)((0,ye.A)({},jee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 7.4s, transform 1.25s ease-out 7.4s"}),target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>Object.assign(e.target.style,Fee),onMouseLeave:e=>Object.assign(e.target.style,jee),onClick:r}),(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava698@gmail.com",className:"fas fa-envelope",ref:a,style:(0,ye.A)((0,ye.A)({},jee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 7.8s, transform 1.25s ease-out 7.8s"}),target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>Object.assign(e.target.style,Fee),onMouseLeave:e=>Object.assign(e.target.style,jee),onClick:r}),(0,He.jsx)("a",{href:"https://x.com/ujjawal_shri123",className:"fab fa-twitter",ref:a,style:(0,ye.A)((0,ye.A)({},jee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 8.2s, transform 1.25s ease-out 8.2s"}),target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>Object.assign(e.target.style,Fee),onMouseLeave:e=>Object.assign(e.target.style,jee),onClick:r}),(0,He.jsx)("a",{href:"tel:+8743917011",className:"fas fa-phone",ref:a,style:(0,ye.A)((0,ye.A)({},jee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 8.8s, transform 1.25s ease-out 8.8s"}),target:"_blank",rel:"noopener noreferrer",onMouseEnter:e=>Object.assign(e.target.style,Fee),onMouseLeave:e=>Object.assign(e.target.style,jee),onClick:r})]})]}),(0,He.jsxs)("h1",{className:"credit",ref:a,style:(0,ye.A)((0,ye.A)({},Nee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 9.2s, transform 1.25s ease-out 9.2s"}),children:["Designed with ",(0,He.jsx)("i",{className:"fa fa-heart pulse",style:Vee})," ","by"," ",(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",ref:a,style:(0,ye.A)((0,ye.A)({},Uee),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 9.8s, transform 1.25s ease-out 9.8s"}),onMouseEnter:e=>e.target.style.color="#ffcc33",onMouseLeave:e=>e.target.style.color="#ffae00",onClick:n,children:"Ujjawal Shrivastava"})]})]})},Hee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAATiElEQVR4nO2aV7NkSXWF58yLvPfeexPyDu8ZGLz3brwBeW/+lLyEBBIgQIAEEvLeS0ggAQLemvXt6nXurbWzT3ZXm9vdUw9ffGv2Op2VkRmn4lbELK/72CecO3fLcsst55Zb0uDcLG5xTovWCWbpeXdrZc/2DM5pcE4L72s0s7c6G5zT4NwsWL9yWrROMEvPuuW1H/vEc4R1ofMG52bhBdaZLVonmKXn3fFyy4JZet7dqgv+6Ce1Nxicm8W6QFq0TjBLz7vj5ZYFs/S8253f8uBHP3nvDQbnZsE/qpwWrRPM0vNutznP9gzOaXBOC+9rNLO3Ohuc0+DcLFi/clq0TjBLz7uT81se/MinrG8wODcL/lHltGidYJaedyebawbnNDinhfc1mtlbnQ3OaXBuFqxfOS1aJ5il593++S0PfORT6w2GdfG04OHKadE6wSw97/Y3t2dwToNzWnhfo5m91dngnAbnZsH6ldOidYJZet7181se+P9PqwteF08LHq6cFq0TzNLzrm9uNTinwTktvK/RzN7qbHBOg3OzYP3KadE6wSw978bntzzw4U9fv6KbBQ9VTovWCWbpeTfeXBmc0+CcFt7XaGZvdTY4p8G5WbB+5bRonWCWnncXPr/l/g9/xvgNFjxUOS1aJ5il592FN0e/5jQ4p4X3NZrZW50NzmlwbhasXzktWieYpefd9vkt93/oM/sbLHioclq0TjBLz7vtza05Dc5p4X2NZvZWZ4NzGpybBetXTovWCWbpeTc/v+W+D33W/hssKCqnResEs/S8m2+uchqc08L7Gs3src4G5zQ4NwvWr5wWrRPM0vPu4s5vue+Dn33yBguKymnROsEsPe8ubnPN4JwW3tdoZm91NjinwblZsH7ltGidYJbe7m5d89DgLC/3fvBzdm+wYFA5LVonmKXn3fFyy4JZet5d2vkt9/7f554jMOCBdQO2aJ1glp53l7a51eCcFt7XaGZvdTY4p8G5WbB+5bRonWCWnneXfn7LPf/7eecIPLBuwBatE8zS8+7SN1cG57TwvkYze6uzwTkNzs2C9SunResEs/S8O+z8dMGfv/uK1mDPgocq24JZet4dtrlZ532NZvZWZ4NzGpybBetXTovWCWbpeXf4+S33fOALTv7IsgUPVbYFs/S8O3xza04L72s0s7c6G5zT4NwsWL9yWrROMEvPu8s7v+XuD3zh/hssKCrbgll63l3e5iqnhfc1mtlbnQ3OaXBuFqxfOS1aJ5il593ln99y9/u/6OQNFhSVbcEsPe8uf3PNwvsazeytzgbnNDg3C9avnBatE8zS8+7KnN9y1/u/ePcGCwaVbcEsPe+uzOb2LLyv0cze6mxwToNzs2D9ymnROsEsvd1d2u/cPYPzeS93/c+XjH8mCWbpeXe83LJglp53V/b8ljv/+0v7zyTBLD3vruzmysL7Gs3src4G5zQ4NwvWr5wWrRPM0vPuyp+fLvjLdl/RGpSFy9Oed1d+c3Te12hmb3U2OKfBuVmwfuW0aJ1glp53V+f8ljvf9+Xtj6z0vLs6m/O+RjN7q7PBOQ3OzYL1K6dF6wSz9Ly7eue33PG+r9i9wWItT3neXb3N4dHM3upscE6Dc7Ng/cpp0TrBLD3vru75LXf811euf2SlecA5veuu7uZGM3urs8E5Dc7NgvUrp0XrBLP0vLv657e85j+/qv7IqvKUecA5veuu/uZyZm91NjinwblZsH7ltGidYJaed9fm/HTBX93eYB5wTu+6a7M5smf2VmeDcxqcmwXrV06L1glm6e3uyv7OXS28r9Oz5dX/8TV7bzBD5/SuO15uWTBLz7tre3664K9d3+AaCnJ6113bzZ32VmeDcxqcmwXrV06L1glm6Xl37c9vedW/f129wfxHlcrpXXftN2dvdTY4p8G5WbB+5bRonWCWnndnc3664K+/iJ9JZ7M5vNXZ4JwG52bB+pXTonWCWXrend35La/6t29Yv6LTPHCWm9vqbHBOg3OzYP3KadE6wSw9787u/PDyyn/9xvqKrodOuR44w81tdTY4p8G5WbB+5bRonWCWnndnd362Lvib2htMcZab2+pscE6Dc7Ng/cpp0TrBLL3dXdufQp6lYXnFv3zz3hvM8Hi55y2Ypbe76+dyybrgb1nf4Bpqg2TP9gzOaXBOCz4Mj2b2VmeDcxqcmwXrV06L1glm6Xl3fZ3f8vJ//tZ6g/mP621zaXBOg3OzYP3KadE6wSw9766/89MFf9v5n0nX3+ZOG5zT4NwsWL9yWrROMEvPu7M7Pxuc7eXl//Tt+oo+u81tdTY4p8G5WbB+5bRonWCWnndnd342OJ/28rJ//I76iq4F0uCcBue0YHE8mtlbnQ3OaXBuFqxfOS1aJ5il5931e7lYF/ydeoP1HxrsGZzT4JwWXnw0s7c6G5zT4NwsWL9yWrROMEvPu+v7cmF56T98V3+DwTkNzmmxLi7nzN7qbHBOg3OzYP3KadE6wSy93V1fP4VGBrIu+Lv332BwToNzWrAgHs3src4G5zQ4NwvWr5wWrRPM0tvdjXO5eHnJ33/PyRsMzmlwTgsvOJrZW50NzmlwbhasXzktWieYpefd2X0tb3U2OGNd8Pfu3mDQoHIanNOChfBoZm91NjinwblZsH7ltGidYJaedzfW5eLlxX/3ffU7eF0gDc5p4YVGM3urs8E5Dc7NgvUrp0XrBLP0vDu7y7XBOQ3Op728+G+//+QrOg3OacECeDSztzobnNPg3CxYv3JatE4wS8+7G/NysS74B3Zf0RrsGZzTwguMZvZWZ4NzGpybBetXTovWCWbpeXfjXi4sL/qbH+xvMDinxbqAnDN7q7PBOQ3OzYL1K6dF6wSz9Ly7sS+XrAv+of03GJzTgn+ERzN7q7PBOQ3OzYL1K6dF6wSz9HZ3Y/0UahasT15e+NcPO3mDwTktvMBoZm91NjinwblZsH7ltGidYJbe7m6ey2WmC3747g0GDSqnBQ/j0cze6mxwToNzs2D9ymnROsEsPe/O7mt5q7PBOQ3O9vKCv3rE9GeSHx7N7K3OBuc0ODcL1q+cFq0TzNLz7ua6XLy84C8fefIVnRY8hEcze6uzwTkNzs2C9SunResEs/S8O7vLtcE5Dc5pcE7rgh91rj5Ygz0LPzSa2VudDc5pcG4WrF85LVonmKXn3c15uXzm8vy/eHR/g4UfGs3src4G5zQ4NwvWr5wWrRPM0vPu5r1cPlsX/Jj9N1j4odHM3upscE6Dc7Ng/cpp0TrBLD3vbu7LJS/P+/PHnrzBwg+NZvZWZ4NzGpybBetXTovWCWbp7e7m+im0Z3G60wU/bvcGCwaYB3Jmb3U2OKfBuVmwfuW0aJ1glt7uHjqXi5fn/tnj62eSBzxQDwrP7K3OBuc0ODcL1q+cFq0TzNLb3Y19ueDcLPjsyqe8PPe9TzhHYMAD9aDwzN7qbHBOg3OzYP3KadE6wSy93T30Lhcvz3nvE+sN5oF6ULi0tzobnNPg3CxYv3JatE4wS8+7m/8PqnVmi+U5f/qk4R9Z9lZng3ManJsF61dOi9YJZul599C8XDpd8JPbH1k2D1yos8E5Dc7NgvUrp0XrBLP0vHvoXi5env0nt9VX9Fqetx8ge5YG5zQ4NwvWr5wWrRPM0vPuoX25eHn2e56y/pFlU9QDwrM0OKfBuVmwfuW0aJ1glp53x8tltjzrPU/de4Mp6gHhWRqc0+DcLFi/clq0TjBLz7vj5Xq2POvdt69vMAVDsmdpcE6Dc7Ng/cpp0TrBLL3dPTR/CrmzT8+WZ777afUG8x81FOs/DINzGpybBetXTovWCWbp7e54uThnyzP/+OmbP5NscE6Dc7Ng/cpp0TrBLD3vjl/Lo5ku+BkX/Jlkg3ManJsFH1I5LVonmKXn3fFyRzO8POOPnllf0es/DINzGpybBR9SOS1aJ5il593xckcze3nGu561/pGVBuc0ODcLFq+cFq0TzNLz7ni5o5lNtzz9Xc8evsHgnAbnZuHF15ktWieYpefd8XJHM9vd8vR3Pqe9weCcBudmsS6eFq0TzNLz7ni5o5l9ulue9s7n7r3B4JwG52bBgpXTonWCWXq7O/4UwqOZnd3ytHc8b32DwTkNzs2CBSunResEs/R2d7xcPJrZo265/R3PrzcY1kXD4NwsWKhyWrROMEvPu+PX8mhmX6hbbv/DF9QFr4uGwblZsFDltGidYJaed8fLHc3srW65/e0vXL+i0+DcLFigclq0TjBLz7vj5Y5m9qxbnvr2Fw3fYHBuFl5gndmidYJZet4dL3c0s+fdrbrgt724vcHg3CzWBdKidYJZet4dL3c0s+fd7vyWp7ztJXtvMDg3C/5R5bRonWCWnne7zXm2Z3BOg3NaeF+jWRqc0+CcBudmwWdXTgs6ezSz593J+S1PeetL1zcYnJsF/6hyWrROMEtvd8efQng0s+fdyeXi5ba3vqzeYFg/MC14uHJatE4wS293x8vFo5k97/YvFy+3/cHL64LXD0wLHq6cFq0TzNLzrm9uNTinwTktvK/RLA3OaXBOg3Oz4LMrpwWdPZrZ8258fsttb3nF+hXdLHioclq0TjBLz7vx5srgnAbntPC+RrM0OKfBOQ3OzYLPrpwWdPZoZs+7C5/f8uS3vHL8BgseqpwWrRPM0vPuwpujX3ManNPC+xrN0uCcBuc0ODcLPrtyWtDZo5k977bPb3nym1/V32DBQ5XTonWCWXrebW9uzWlwTgvvazRLg3ManNPg3Cz47MppQWePZva8m5/f8qQ3v3r/DRYUldOidYJZet7NN1c5Dc5p4X2NZmlwToNzGpybBZ9dOS3o7NHMnncXd37Lk970mpM3WFBUTovWCWbpeXdxm2sG57TwvkazNDinwTkNzs2Cz66cFnT2aGbPu4s/v+WJb7pj9wYLBpXTonWCWXq7O/4UwqOZPe8u/nLx8sTfv/McgQEPrJuyResEs/S8u7TNrQbntPC+RrM0OKfBOQ3OzYLPrpwWdPZoZs+7Sz+/5Qm/d1f9f9E8sG7KFq0TzNLz7tI3VwbntPC+RrM0OKfBOQ3OzYLPrpwWdPZoZs+7w85PF3z37itagz0LHqpsC2bpeXfY5mad9zWapcE5Dc5pcG4WfHbltKCzRzN73h1+fssT3njPyR9ZtuChyrZglp53h29uzWnhfY1maXBOg3ManJsFn105Lejs0cyed4efH/tZHv/Ge/ffYMFDlW3BLD3vDt/cmtPC+xrN0uCcBuc0ODcLPrtyWtDZo5k97w4/P+9nefwb7jt5gwUPVbYFs/S8O3xza04L72s0s7c6G5zT4NwsWL9yWtDZo5k97w4/P++H2fK4N9y/e4MFg8q2YJaed4dvbs1p4X2NZvZWZ4NzGpybBetXTgs6ezSz593h5+f9eLY87ncfGP9MEszS293xdy4ezex5d+UuFy+P/Z0H+88kwSw97w7f3JrTwvsazdLgnAbnNDg3Cz67clrQ2aOZPe8OPz/vZ52dty74tbuvaA3KwuVpz7vDN7fmtPC+RrM0OKfBOQ3OzYLPrpwWdPZoZs+7w8/P+1lntlge+/rXtT+y0vPu8M2tOS28r9EsDc5pcE6Dc7PgsyunBZ09mtnz7vDz837WmS3olse8/od3b7BYy1Oed4dvbs1pwebwaJYG5zQ4p8G5WfDZldOCzh7N7Hl3+Pl5P+vMFu6Wx/z2j6x/ZKV5wDm96w7f3JrTwpsbzdLgnAbnNDg3Cz67clrQ2aOZPe8OPz/vZ53Z4nS3PPq3frT+yKrylHnAOb3rDt/cmtPi9OZyZm91NjinwblZsH7ltKCzRzN73h1+ft7POrNFdrrgH2tvMA84p3fd4Ztbc1rk5sie2VudDc5pcG4WrF85Lejs0cyed4efn/ezzmzROrE86jd/fO8NZuicvtF/59a6zmkx6+zRzJ531+5ymemCf2J9g2soyOldd/jm1pwWbASPZmlwToNzs2D9ymkx6+zRzJ53h5+f97PObNE64dnyyN/4yXqD+Y8qldO77vDNrTktvJHRLA3OaXBOg3Oz4LMrpwWdPZrZ8+7w8/N+1pktWic8w7rgn7qIn0mHb27NacEG8GiWBuc0OKfBuVnw2ZXTgs4ezex5d/j5eT/rzBatE57ZyyN//afXr+g0D1zO5tacFt7AaJYG5zQ4p8G5WfDZldOCzh7N7Hl3+Pl5P+vMFq0Tntl0yyN+7WfqK7oeOmUeuJzNrTktTm8gZ2lwToNzGpybBZ9dOS3o7NHMnneHn5/3s85s0Trhme1OF/yz7Q3mgcvZ3JrTIjdA9sze6mxwToNzs2D9ymlBZ49m9rw7/Py8n3Vmi9YJz+zT3fLwX/25vTeY4eVsbs1pMdqAZ/ZWZ4NzGpybBetXTgs6ezSz593h5+f9rDNbtE54ZmenC/759Q2u4WVsbs1pwYfh0SwNzmlwbhasXzktZp09mtnz7vDz837WmS1aJzyzR93ysF/5hXqD+Y/L2dya08IfNpqlwTkNzs2C9SunxayzRzN73h1+ft7POrNF64Rn9oU6XfAvnv+ZdPjm1pwWfAgezdLgnAbnNDg3Cz67clrQ2aOZPe8OPz/vZ53ZonXCM3urWx72y7907nI2t+a08IeMZmlwToNzGpybBZ9dOS3o7NHMnneHn5/3s85s0Trhmb3V4Y8DzW2k87nrRqsAAAAASUVORK5CYII=",Gee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAQa0lEQVR4nO2XVbckxxGEb72YmZmZme3fZbYlmdkyiJmZwcxMx8zMzPCkdUROR3Z3Ttdkinf39kOcryYjYqrP5OmVbvvfS29z4MBe2zvQ9vZSNnBviZAykZ7JSOk88rqB+rxF9nSXZj1aJiPErGizIpm3HqRZRu9EQsqI7lW5t9f++9LbHuDBv6RHL0VCykR6JiOl88h1uRO6V+Xe3nU4t/+8DAvWl/SI4KYUCSkT6ZmMlM4j1+VO6F6Vm+Xy3P79stvtfoOH4DYhZSI9k5HSeeS63Andq3JcLmftXy/HgvVlkQgoOCekTKRnMlI6j1yXO6F7Vc6XS7Z/vvz2y2/wENgmpEykZzJSOo9clzuhe1VuL5ds/3gFFqwvFWEoMCekTKRnMlI6j1yXO6F7VS4vl2x/f8Ud5m/wYGwTUibSMxkpnUeuy53QvSr7yyXb316JBadfDikT6ZmMlM4j1+VO6F6Vu5dLtr++8o6bN3gYbBPSA0R6JiOl88h1uRO6V2W+XLL95VVc8DiYE9IDRHomI6XzyHW5E7pXZW25ZPvzq++Ef6LHwUhIDxDpmYyUziPX5U7oXp3XsTecM7Y/ccE4aLAhpAeI9ExGSueR63IndK/K+psrtj++5s7hDYb0AJGeyUjpPHJd7oTuVXn9l0u2P3DBOGwGkB4g0jMZKZ1Hrsud0L0qb9hy2Wu/f+1dhjcY0gNEMmyZjJTOI9flTuhelTd8ubyz/Y4LHj4skmGVdpLSeeS63Andq/LGLZdsvz0CCx4+bJFhlXaS0nnkutwJ3avyxi+XbL854q7LbzDDKu0kpfPIdbkTulflTbNcsv36SCx4+OBkWKWdpHQeuS53QvfqvD5/5zqtE4kF/+rIu83fYIZh5KR0Hrkud0L3qrzp3lx57ZdHYcEaYiBjNymdR67LndC9Km/65ZLtF0fdffMGD4OclM4j1+VO6F6VN89yyfbz13HB42A3KZ1Hrsud0L0qb77lku1nr78H/okeB31SOo9clzuhe1XevMsl20+5YBw0WCal88h1uRO6V+XNv1x67SdvuGfyBlM6j1yXO6F7Ve7dIstlpv2YC+ZAxoyUziPX5U7oXp035d+55kWat2H70Rvv1XmDKZ1Hrsud0L0qb7k3V2w/5IJpKGCkdB65LndC96q85ZdLth+86d7hDaZ0Hrkud0L3qrx1lku273PBDFiQ0nnkutwJ3avy1lsu2b735vsMbzCFoZ1Hrsud0L0qb93lku27XDA/MKzSwHW5E7pX5a2/XLJ95y1cMD6oNHBd7oTu1XlL/im0i+3bb73v8E80hgPX5U7oXp0Hy3LJ9i0umKWhvC53QveqPDj+WXZC7Ztvu5+/wetyJ3SvyoNvuTy3b3DBKK/LndC9Kg/O5ZLt62+//4F1uRO6V+XBu1yyfQ0Lti/Rl0UOwQ0hznq0TEaIWdFmRTJvPUizjN6JhJQR3avy4F4u2b76jgf4f4O3iICCPuvRMhkhZkWbFcm89SDNMnonElJGdK/Kg3+5ZPsKF8wv05eKQ2BDiLMeLZMRYla0WZHMWw/SLKN3IiFlRPfqPJj+FDLpHNi+/M4Hbr/BMBTwWY+WyQgxK9qsSOatB2mW0TuRkDKie3UeKssl25e4YH7p4pdDnPVomYwQs6LNimTeepBmGb0TCSkjulflofHP8pTti+960PgGYyDDZz1aJiPErGizIpm3HqRZRu9EQsqI7lV56C2XbF/ggre+HOKsR8tkhJgVbVYk89aDNMvonUhIGdG9Kg/N5ZLt8+9+MBY8DvzCHi2TEWJWtFmRzFsP0iyjdyIhZUT3qjx0l0u2zx2NBeOwGUC8sEfLZISYFW1WJPPWgzTL6J1ISBnRvSoP7eWS7bNHP2R4gyFe2KNlMkLMijYrknnrQZpl9E4kpIzoXpWH/nJ5R/vMe7BgXdgjwyp1CTEr2qxI5q0HaZbRO5GQMqJ7dR5KfwotknfgrvZpLnj4sEiGVeoSYla0WZHMWw/SLKN3IiFlRPfqPFyWS7ZPvfeh/TeYYZW6hJgVbVYk89aDNMvonUhIGdG9Kg+Pf5b9LrB9kgsePszIsEpdQsyKNiuSeetBmmX0TiSkjOhelYffcjlrn3jfw7bfYBhe6hJiVrRZkcxbD9Iso3ciIWVE96o8PJdLr32cC/YhOBi7CTEr2qxI5q0HaZbRO5GQMqJ7VR6+yyXbx97/8PENxkBGnxCzos2KZN56kGYZvRMJKSO6V+XhvVyyfZQLpjkMdhNiVrRZkcxbD9Iso3ciIWVE96o8/JdLto8c8wgseBz0CfkXgTYrknnrQZpl9E4kpIzoXp2H059CG0LyJmwfPhYLxkGDZUL+RaDNimTeepBmGb0TCSkjulfnflku2T507COTNxjyLwJtViTz1oM0y+idSEgZ0b0699NymWkfPA4L1mCLEEJOmxXJvPUgzTJ6JxJSRnSvzv22XGbaB457VOcNhoaQ0WZFMm89SLOM3omElBHdq3J//A+V0zN4g689HguW4YRgOm1WJPPWgzTL6J1ISBnRvSr373LJds3xjw5vMDSYRpsVybz1IM0yeicSUkZ0r8p9tlzRs3iDrz4BC5YxDJ02K5J560GaZfROJKSM6F6V63LJdtUJjxneYGgYGm1WJPPWgzTL6J1ISBnRvSrX5YrtyhOx4OGDk2GVMjJvPUizjN6JhJQR3atyXe6U7QouePhgZFiljMxbD9Iso3ciIWVE9+rcj38K7WK7/KTHjm8wSypnZN56kGYZvRMJKSO6V+e63G22y7hgfmBJ5YzMo2xnzTJ6JxJSRnSvyn32z7JnMmLBl578OCwYH1TOOCn7LKN3IiFlRPeqXJe7TAiddskpWDAOGuxkKJfonUhIGdG9KvfZckXP9ggN2XbxKY+vvcEL5ZTeiYSUEd2rcl3uMqFJtl10KhasQY8IbpUzeicSUkZ0r8p1ucuEQrZdeOoTdr/BQ9DOmmX0TiSkjOheletylwktZNsFp2HBMiIR2AQhzTJ6JxJSRnSvzvVPoSVCnU47/7QnLr/BQ8DOmmX0TiSkjOhenetylwjt6LTzTseCFRBhbAKQZhm9EwkpI7pX5T77Z9kzGaGk0849/UnzN3gw7KxZRu9EQsqI7lW5LneZUKHTzjkDC94KQppl9E4kpIzoXpX7bLmiZ3uEitl29hlP3rzBw8DOKmf0TiSkjOheletylwkVs/z92llncsGbgZVUzuidSEgZ0b0qNw+3OV8Poud3OiF6keYVSelcJe/QXUZIXo+e7REqZvX7tTPPegr+iaYBqZxxKG8TUkZ0r8rx4cZZgej5nU6IXqR5RVI6V8k7dJcRktejZ3uEitnp79fO4IJZUjkjSirPCSkjulfn+qfQEqFiZ7pc5tvpZ2PBKmdkSeUZIWVE9+pcl7tEqNiJy2WvnXb2U2tvMEsqzwgpI7pXZXi4KtHzO50QvUjziqR0rpJ36C4jJC/SMxmhYmf2+zE/9Nqp52DBw4cuWVJ5RkgZ0b0qw8NViZ7f6YToRZpXJKVzlbxDdxkheZGeyQgVO7Pfj3n1MGunnPO03W8wSwhuE1JGdK/K8HBVoud3OiF6keYVSelcJe/QXUZIXo+e7REqZhd/P/aGczv5XCxYXxaJgIJzQsqI7lXZebiM6PmdTohepHlFUjpXyTt0lxGS16Nne4SK2cXfjz2dwXbSuU9ffoOHwDYhZUT3quw8XEb0/E4nRC/SvCIpnavkHbrLCMnr0bM9QsXs4u/Hns4D24nnYcH6UhGGAnNCyojuVdl5uIzo+Z1OiF6keUVSOlfJO3SXEZLXo2d7hIrZxd+PPZ0nbCec94z5GzwY24SUEd2rc/1TaIlQsTNbLvPqaRbYjj8fC1YIAxlzQsqI7lUZHq5K9PxOJ0Qv0rwiKZ2r5B26ywjJi/RMRqjYmf1+zKun2QLbcec/c/MGD4NtQv5FA92rMjxclej5nU6IXqR5RVI6V8k7dJcRkhfpmYxQsTP7/ZhXT7MO27EXcMHjYE7Iv2ige1WGh6sSPb/TCdGLNK9ISucqeYfuMkLyIj2TESp2Zr8f8+pptoPtmAufhX+ix8FIyL9ooHtVhoerEj2/0wnRizSvSErnKnmH7jJC8nr0bI9QMbv4+7Gnc8L2fi4YBw02hPQAontVdh4uI3p+pxOiF2lekZTOVfIO3WWE5PXo2R6hYnbx92NP54zItvdd9OzwBkN6ANG9KjsPlxE9v9MJ0Ys0r0hK5yp5h+4yQvJ69GyPUDG7+Puxp3NGy+INfi8XzIEZEIYzuldl5+Eyoud3OiF6keYVSelcJe/QXUZIXo+e7REqZhd/P/Z0zmjZDdt7Ln7O8AZDw9DJsHl1rn/nLhEqdmbLZV49zTJadmQ7mgsePszIsEolhoerEj2/0wnRizSvSErnKnmH7jJC8iI9kxEqdma/H/PqaZbRsnO2d1+CBQ8fnAyrVGJ4uCrR8zudEL1I84qkdK6Sd+guIyQv0jMZoWJn9vsxr55mGS27zfauS547f4MZVqnE8HBVoud3OiF6keYVSelcJe/QXUZIXqRnMkLFzuz3Y149zTJadpntnZdiwcMHC6tUYni4KtHzO50QvUjziqR0rpJ36C4jJK9Hz/YIFbOLvx97Ome0bI9Y8Dsufd7mDWYYgzo7D5cRvfEBRIhepHlFUjpXyTt0lxGS16Nne4SK2cXfjz2dM1q2RwiZ9vbLuGAMh0GNnYfLiN74ACJEL9K8Iimdq+QdussIyevRsz1Cxezi78eezhkt2yPEDNjedvnz8U/0OMjZebiM6I0PIEL0Is0rktK5St6hu4yQvB492yNUzC7+fuzpnNGyPULMDGxv5YJx0CDj+nfuEqFiZ7Zc5tXTLKNle4SYmbC95YoXFN/g8HBVojc+gAjRizSvSErnKnmH7jJC8iI9kxEqdma/H/PqaZbRsj1CzAS2N3PBOGiwzPBwVaI3PoAI0Ys0r0hK5yp5h+4yQvIiPZMRKnZmvx/z6mmW0bI9QsxEwmtvuvKFyRscHq5K9MYHECF6keYVSelcJe/QXUZIXqRnMkLFzuz3Y149zTJatkeImUjz8Aa/kQvmQMaM4eGqRI9fPidEL9K8Iimdq+QdussIyevRsz1Cxezi78eezhkt2yPETKR5G7Y3XPWizhvcebiM6OnLR0L0Is0rktK5St6hu4yQvB492yNUzC7+fuzpnNGyPULMRJo3sr2eC6ahgLHzcBnR45fOCdGLNK9ISucqeYfuMkLyevRsj1Axu/j7sadzRsv2CDETad6c7XVXvzi8wZ2Hy4ievnQkRC/SvCIpnavkHbrLCMnr0bM9QsXs4u/Hns4ZLdsjxEykedtsR3HBDFiw83AZ0eOXzQnRizSvSErnKnmH7jJC8iI9kxEqdma/H/PqaZbRsj1CzESat8x25DUvGd7g8HBVoqcvGwnRizSvSErnKnmH7jJC8iI9kxEqdma/H/PqaZbRsj1CzESa12c7ggvGh9nDVYkev2ROiF6keUVSOlfJO3SXEZIX6ZmMULEz+/2YV0+zjJbtEWIm0rzdbK+99iUHZg9XJcr6kpEQvUjziqR0rpJ36C4jJC/SMxmhYmf2+zGvnmYZLdsjxEykeTn/D7588pIJAMJ9AAAAAElFTkSuQmCC",qee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAPeUlEQVR4nO3V1bcl1REG8OmnuDsSJEiAIEGCBAgSJP9VXHF3d3d34rri7u4uT0zq29Vf1+265ysaOAwzc/qh1q92VZ3NrK61L92L/nfSxg0buw3dxg0blJ25oRm1bMzQqpdFME8+1WtnzDFX+gz1WtZ72ao3FsFcibv8zqhlY4ZWvSyCubZ70X9P3ohhXpzFkA9HLRsztOplEcyT83KFCOba7inzxf85Wb5gDPlw1LIxQ6teFsE8OS9XiGCuxXJb/uJ/n7LwBWOoDViwlo0ZWvWyCObJeblCBHPtsFzkL/nXKeteMBo+ELVszNCql0UwT87LFSKYa9cut/mSf546esFDw4K1bMzQqpdFME/OyxUimGvXLdfsXvqPU4cXjII3MOi1bMzQqpdFME/OyxUimGsXLbf50r+f1l7wULDgfzwbM7TqZRHMk/NyhQjmWrlcs3vZ37BgFjBoxQXGDK16WQTz5LxcIYK5tlpu8+V/Pd3+RFtiwf94dhgerHpZBPPkEpfrNeWUGRfBXIm7/M6oZWOGVr0sgrn2aZdrdi//y+n2gjFohwViiMNu1csimCeXuFzqvWzVG4tgrsRdfmfUsjFDq14WwVw7abnwFX/GC/ZDFkMcdqteFsE8OS9XiGCunbrclr/iT2csfMEYagODVS+LYJ6clytEMNc+o+Uif+Ufz1j3gtHggFv1sgjmySUu12vKKTMugrkSd/mdUcvGDK16WQRz7TNdbvOVfzhz9IKHxmDVyyKYJ5e4XOq9bNUbi2CuxF1+Z9SyMUOrXhbBXPuslmt2r/r9mcMLRoENFz9QvSyCeXJerhDBXPtsl9t81e/Oai94KAziB/7DqCkRzJPzcoUI5trntFyze/VvseAouPiBNc2oKRHMk0tcrteUU2ZcBHMl7vI7o5aNGVr1sgjm2ue63OZrfnO2/Ym2hAWLpfxDl7hc6r1s1RuLYK7EXX5n1LIxQ6teFsFcu5Tlmt1rfn32mheMH1jRjJoSwTw5L1eIYK5d2nLha391Tv+C8YO+aHpNiWCenJcrRDDXLnO57d/22l+eYy+4P5hocmixCObJJS7Xa8opMy6CuRJ3+Z1Ry8YMrXpZBHPt0pdrdq/7BV5wfzA5tFgE8+QSl0u9l616YxHMlbjL74xaNmZo1csimGufj+W22ut+fm57wWi2ghTBPDkvV4hgrn3elov89T/DgmNosQjmyXm5QgRz7fO53OYbfnqe/Ym2hIV1Ipgnl7hcrymnzLgI5krc5XdGLRsztOplEcy1z/tyze4NPzmveMEI5sklLpd6L1v1xiKYK3GX3xm1bMzQqpdFMNdukuXCN/74fPGCEcyT83KFCObaTbXc1nvjj85f8IIRzJPzcoUI5tpNulyze9MPL0gvGME8ucTlek05ZcZFMFfiLr8zatmYoVUvi2Cu3dTLbb7pBxesecEI5sl5uUIEc+0Lslyze/P3L+xfMCKGRy5xudR72ao3FsFcibv8zqhlY4ZWvSyCufaFWm7zzd+70F6wD3F45LxcIYK59gVdrtm95btYcAyPnJcrRDDXvtDLbTPbfOei/k90/Ki5xOV6TTllxkUwV+IuvzNq2ZihVS+LYK7dLJaLfJtvX7T+BS9xudR72ao3FsFcibv8zqhlY4ZWvSyCuXazWS7c9lsXj1/wvFwhgrl2c1puq237zYvjBc/LFSKYaze75Zrddt+4xF/wEpfrNeWUGRfBXIm7/M6oZWOGVr0sgrl2c1xuc7uvX7Jxmcul3stWvbEI5krc5XdGLRsztOplEcy1m+1yzW77r13qL7gvMFf6DPVa1nvZqjcWwVyJu/zOqGVjhla9LIK5dnNebnP7r17a/h/sBR9W+gz1WtZ72ao3FsFcibv8zqhlY4ZWvSyCuXazX67ZvfUrl9mCUbCDFZU+Q71GvaacMuMimCtxl98ZtWzM0KqXRTDXbgnLbe7w5cuGP9HKYbjptaz3slVvLIK5Enf5nVHLxgytelkEc+0Ws1yz2+FLl9kLjouzGNow6LWs97JVbyyCuRJ3+Z1Ry8YMrXpZBHPtFrVcxI5fvFy+4M7kMGtZ72Wr3lgEcyXu8jujlo0ZWvWyCObaLW25Ld/xC5cvfMHDQNNr1GvKKTMugrkSd/mdUcvGDK16WQRz7Ra5XLPb6fNXrHvBaHCAtaz3slVvLIK5Enf5nVHLxgytelkEc+2WutzmTp+7YvSCh0bTa1nvZaveWARzJe7yO6OWjRla9bII5toterlmt/NnrxxeMApssJb1XrbqjUUwV+IuvzNq2ZihVS+LYK7d0pfb3PkzV7YXPBSa+MEm/EesEXf5nVHLxgytelkEc+1WsVyze9unr7IFR4EXZ72XrXpjEcyVuMvvjFo2ZmjVyyKYa7eW5TZ3efIq+xNtSSvgB/GPoN7LVr2xCOZK3OV3Ri0bM7TqZRHMtVvVcs1ulyeu7l+wHayY9V626o1FMFfiLr8zatmYoVUvi2Cu3eqWC3d9/Gp7wX7IYojDYdUbi2CuxF1+Z9SyMUOrXhbBXLs1LrfduetjeMH9YY0Y4nBY9cYimCtxl98ZtWzM0KqXRTDXbrXLRez26DXrXjAaHA6r3lgEcyXu8jujlo0ZWvWyCObarXm5rbbbI9eMXvDQGFn1xiKYK3GX3xm1bMzQqpdFMNdu9cs1u90fvnZ4wSiwEVa9sQjmStzld0YtGzO06mURzLWrsNzm7g9d217wUBiJHzCvRTBX4i6/M2rZmKFVL4tgrl2Z5Zrd2x+8zhYchdCaQ16LYK7EXX5n1LIxQ6teFsFcu1LLhXs8cJ39ibbECmHfNKO2WARzJe7yO6OWjRla9bII5tpVW27r7XH/9ekFW3HIaxHMlbjL74xaNmZo1csimGtXcrlmt+d91695wX3RjNpiEcyVuMvvjFo2ZmjVyyKYa1d1uc09772hf8F2sKLntQjmStzld0YtGzO06mURzLWrtFwaM3be654b7AX3B5NDSgRzJe7yO6OWjRla9bII5tpVX25zr7vxgr3JISWCuRJ3tYstWMvGDK16WQRz7bxcaPGOu260BceQEsFcufZi1rIxQ6teFsFcOy8X9r2977zR/kRbwsICEcyV6y5eYMzQqpdFMNeu0nKjl10zs/cdN5UvGMFcuejibMzQqpdFMNfOy4XjmW6f22+SLxjBXIlL8sXZmKFVL4tgrp2XCxfM7HPbzQtfMIK5crjEgrVszNCql0Uw187LhYtnun1vvXndC0YwV+LHfknUsjFDq14WwVy7SsulMUOL3r633DJ6wQjmyuHHFqxlY4ZWvSyCuXZeLqx6Vt/v5luGF4xgrsSP/MdRy8YMrXpZBHPtvFxY9Xr3u+nW9oIRHFYOP7JgLRsztOplEcy183Jh1Qu7d97oC+awEsP+o6hlY4ZWvSyCuXaVlhu97JSZ3v1vuHX4E60chi1Yy8YMrXpZBHPtvFw4ZYZa7H/9beULXjvMWjZmaNXLIphr5+XCKTMUYbMHXHebfMEY4DBr2ZihVS+LYK6dlwunzFBEnx9w7e0LX/AwYMFaNmZo1csimGtXabk0ZmjVyyKY228OvOb2dS8YDR+IWjZmaNXLIphr5+XCqpdFMDft+3UHXn3H6AW3RjNq2ZihVS+LYK6dlwurXhbB3LTvB7uDrrpjeMEo+EBcnI0ZWvWyCObaebmw6mURzE37fk2cD7ryzvaCh4IFL87GDK16WQRz7SotN3rZKTMUwdy079fsz927rsCCWYiLszFDq14WwVw7LxdOmaEI5qZ9vybP8ODL77I/0ZZY8OLsMDxY9bII5tp5uXDKDEUwN+37NXnu7Q6+7C57wXFxFkMcdqteFsFcOy8XTpmhCOamfb8mz71t7pBL8YL9kMUQh92ql0Uw167ScmnM0KqXRTA37fs1ee7FXMsPueTuhS8YQ21gsOplEcy183Jh1csimJv2/Zo892JuyA+9+O51LxgNDrhVL4tgrp2XC6teFsHctO/X5LkXc8ybh150z+gFD43BqpdFMNfOy4VVL4tgbtr3a/LciznmtDvswnuGF4wCGy5+oHpZBHPtKi03etkpMxTB3LTv1+S5F3PMRx52wb3tBQ+FQfzAfxg1JYK5dl4unDJDEcxN+35Nnnsxxzzbvft8LDgKLn5gTTNqSgRz7bxcOGWGIpib9v2aPPdijvlCDz/vPvsTbQkLFs/6HyGclwunzFAEc9O+X5PnXswxV3aHn3vfmheMH1jRjJoSwVy7SsulMUOrXhbB3LTv1+S5F3PMlZjpjjjn/v4F4wd90fSaEsFcOy8XVr0sgrlp36/Jcy/mmCt9xjzi7PvtBfcHE00OLRbBXDsvF1a9LIK5ad+vyXMv5pgrfcbtjjwLL7g/mBxaLIK5dl4urHpZBHPTvl+T517MMVf6DLXakWc+0F4wmq0gRTDXrtJyo5edMkMRzE37fk2eezHHXOkztK+95wwsOIYWi2CunZcLp8xQBHPTvl+T517MMVf6DPVa86jTH7Q/0ZawsE4Ec+28XDhlhiKYm/b9mjz3Yo650meo12h31GkPFi8YwVw7LxdOmaEI5qZ9vybPvZhjrvQZ6jWKWnf0qQ+JF4xgrl2l5dKYoVUvi2Bu2vdr8tyLOeZKn6Feo14zjz7loQUvGMFcOy8XVr0sgrlp36/Jcy/mmCt9hnqNes3tjjn54fSCEcy183Jh1csimJv2/Zo892KOudJnqNeo19Z4zEkPr3nBCObaebmw6mURzE37fk2eezHHXOkz1GvUa2O7Yz/1SP+CETGsXKXlRi87ZYYimJv2/Zo892KOudJnqNeo1xZ47CcfsRfsQxxWzsuFU2Yogrlp36/Jcy/mmCt9hnqNem2x3Xs/gQXHsHJeLpwyQxHMTft+TZ57Mcdc6TPUa9RrSps57uOP9n+i40fZeblwygxFMDft+zV57sUcc6XPUK9Rryn7meM+9mj5gldpuTRmaNXLIpib9v2aPPdijrnSZ6jXqNeUMdMd/9HH5AuelwurXhbB3LTv1+S5F3PMlT5DvUa9pkwzx3/ksYUveF4urHpZBHPTvl+T517MMVf6DPUa9Zpy/Ux3wocfX/eC5+XCqpdFMDft+zV57sUcc6XPUK9RrynFzAkfenz0gldpudHLTpmhCOamfb8mz72YY670Geo16jWlnulO/OATwwuelwunzFAEc9O+X5PnXswxV/oM9Rr1mvJpZk78wBPtBc/LhVNmKIK5ad+vyXMv5pgrfYZ6jXpN+fQz3fve/+TGeblwygxFMDft+zV57sUcc6XPUK9RrymnzHQb/g93XPxnljnrbgAAAABJRU5ErkJggg==",Yee=[{name:"Aman",username:"@aman",body:"I've never seen anything like this before. It's amazing. I love it.",img:Hee},{name:"Sonu",username:"@sonu",body:"I don't know what to say. I'm speechless. This is amazing.",img:Gee},{name:"Krishna Singh",username:"@krishna",body:"I'm at a loss for words. This is amazing. I love it.",img:qee},{name:"Tushar Bharti",username:"@tushar",body:"I'm at a loss for words. This is amazing. I love it.",img:qee},{name:"Preety",username:"@preety",body:"I'm at a loss for words. This is amazing. I love it.",img:Gee},{name:"Tushar Pal",username:"@tushar",body:"I'm at a loss for words. This is amazing. I love it.",img:Hee}],Xee=e=>{let{children:t,reverse:i=!1,pauseOnHover:n=!1,className:r=""}=e;const{ref:a,inView:s}=bh({triggerOnce:!0,threshold:.1}),o=(0,ye.A)((0,ye.A)({display:"flex",animation:"marquee 20s linear infinite",whiteSpace:"nowrap"},i&&{animationDirection:"reverse"}),{},{opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 4s, transform 1.25s ease-out 4s"}),l={overflow:"hidden",display:"flex",opacity:s?1:0,transform:s?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out 4s, transform 1.25s ease-out 4s"};return(0,He.jsx)("div",{style:l,className:r,ref:a,children:(0,He.jsx)("div",{ref:a,style:o,children:t})})},Qee=e=>{let{img:i,name:n,username:r,body:a}=e;const[s,o]=(0,t.useState)(!1),l={position:"relative",width:"35rem",height:"8rem",margin:"0.2px 0.5rem 1.2rem",cursor:"pointer",overflow:"hidden",borderRadius:"1rem",border:"1px solid rgba(0, 0, 0, 0.1)",padding:"1.2rem",backgroundColor:"rgba(0, 0, 0, 0.4)",transition:"transform 0.3s, box-shadow 0.3s",boxShadow:s?"0 8px 16px rgba(0, 0, 0, 0.2)":"0 4px 8px rgba(0, 0, 0, 0.1)",transform:s?"scale(1.02)":"scale(1)",backdropFilter:"blur(5px)"};return(0,He.jsxs)("figure",{style:(0,ye.A)((0,ye.A)({},l),{borderColor:"rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.1)"}),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,He.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[(0,He.jsx)("img",{style:{borderRadius:"50%"},width:"32",height:"32",alt:"",src:i}),(0,He.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,He.jsx)("figcaption",{style:{fontSize:"0.875rem",fontWeight:"500",color:"white"},children:n}),(0,He.jsx)("p",{style:{fontSize:"0.75rem",fontWeight:"500",color:"rgba(255, 255, 255, 0.4)"},children:r})]})]}),(0,He.jsx)("blockquote",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"white"},children:a})]})};function Kee(){(0,t.useEffect)(()=>{const e=document.styleSheets[0];e.insertRule("\n      @keyframes marquee {\n        0% { transform: translateX(100%); }\n        100% { transform: translateX(-100%); }\n      }\n    ",e.cssRules.length);const t=document.createElement("style");return t.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .Test {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #0cffc5, #a939ff, #0cffc5, #a939ff);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.5), \n        0 0 0 rgba(169, 57, 255, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(0, 255, 197, 1), \n        0 0 2px rgba(0, 255, 197, 1), \n        0 0 5px rgba(169, 57, 255, 1), \n        0 0 8px rgba(169, 57, 255, 1), \n        0 0 12px rgba(0, 255, 197, 0.7), \n        0 0 15px rgba(169, 57, 255, 0.7);\n    }\n  }\n",document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const e=Yee.slice(0,Math.ceil(Yee.length/2)),i=Yee.slice(Math.ceil(Yee.length/2)),n={position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",overflow:"hidden",borderRadius:"0.75rem",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",color:"white"},r={pointerEvents:"none",position:"absolute",top:0,bottom:0,left:0,width:"18%"},a=(0,ye.A)((0,ye.A)({},r),{},{left:"auto",right:0}),{ref:s,inView:o}=bh({triggerOnce:!0,threshold:.1});return(0,He.jsxs)("div",{style:n,children:[(0,He.jsx)("div",{className:"Test",ref:s,style:{textAlign:"center",marginBottom:"2.5rem",marginTop:"1rem",opacity:o?1:0,transform:o?"translateY(0)":"translateY(50px)",transition:"opacity 1.25s ease-out 3.2s, transform 1.25s ease-out 3.2s"},children:"Testimonials"}),(0,He.jsx)(Xee,{pauseOnHover:!0,className:"[--duration:20s]",children:e.map(e=>(0,He.jsx)(Qee,(0,ye.A)({},e),e.username))}),(0,He.jsx)(Xee,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",children:i.map(e=>(0,He.jsx)(Qee,(0,ye.A)({},e),e.username))}),(0,He.jsx)("div",{style:r}),(0,He.jsx)("div",{style:a})]})}const Zee=__webpack_require__.p+"static/media/snap.e2c46e0c8b7eb41d3af7.wav",Jee=()=>{const[e,i]=(0,t.useState)(!0),[n,r]=(0,t.useState)(!1),a=(0,t.useRef)(null),s=(0,t.useRef)(null),o=(0,t.useRef)(null),l=(0,t.useRef)(null),[c]=xc(Zee);(0,t.useEffect)(()=>{const e=()=>{const e=window.scrollY,t=window.innerHeight,n=l.current.offsetTop;i(e<t/2),r(e+t>=n)};return window.addEventListener("scroll",e),e(),()=>{window.removeEventListener("scroll",e)}},[]);const h=e=>{const t=window.scrollY,i=window.innerHeight;"down"===e?t<s.current.offsetTop-i/2?s.current.scrollIntoView({behavior:"smooth"}):t>=s.current.offsetTop-i/2&&t<o.current.offsetTop-i/2?o.current.scrollIntoView({behavior:"smooth"}):t>=o.current.offsetTop-i/2&&l.current.scrollIntoView({behavior:"smooth"}):"up"===e&&(t>=l.current.offsetTop?o.current.scrollIntoView({behavior:"smooth"}):t>=o.current.offsetTop-i/2?s.current.scrollIntoView({behavior:"smooth"}):t>=s.current.offsetTop-i/2&&a.current.scrollIntoView({behavior:"smooth"}))};return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"Home | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,He.jsx)("div",{ref:a,style:{height:"100vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(s8,{})}),(0,He.jsx)("div",{ref:s,style:{height:"100vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(Dee,{})}),(0,He.jsx)("div",{ref:o,style:{height:"100vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(hee,{})}),(0,He.jsx)("div",{ref:l,style:{height:"30vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(Oee,{})}),(0,He.jsx)("div",{ref:l,style:{height:"46vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(Kee,{})}),(0,He.jsx)("div",{ref:l,style:{height:"24vh",border:"none",margin:"0",padding:"0"},children:(0,He.jsx)(Wee,{})})]}),(0,He.jsxs)("div",{style:{position:"fixed",bottom:"20px",left:n?"-40%":"50%",transform:n?"none":"translateX(-50%)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,He.jsx)(vc.i,{className:"fa-solid fa-arrow-up ".concat(e||n?"hidden":""),onClick:()=>{h("up"),c()},style:{fontSize:"30px",color:"#fff",cursor:"pointer",marginBottom:"10px",transition:"transform 0.3s ease"},whileHover:{scale:1.2,rotate:-10},whileTap:{scale:.9}}),(0,He.jsx)(vc.i,{className:"fa-solid fa-arrow-down ".concat(!e||n?"hidden":""),onClick:()=>{h("down"),c()},style:{fontSize:"30px",color:"#fff",cursor:"pointer",transition:"transform 0.3s ease"},whileHover:{scale:1.2,rotate:10},whileTap:{scale:.9}})]})]})},$ee=()=>{const e=We({maxWidth:767});return(0,t.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"Home | Portfolio - Ujjawal"})}),(0,He.jsx)("div",{children:e?(0,He.jsx)(bf,{}):(0,He.jsx)(Jee,{})})]})},ete=__webpack_require__.p+"static/media/Img1.c616d2ecf495e1e42333.png",tte=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),ite=[{name:"AI/ML",width:"70%"},{name:"React",width:"75%"},{name:"Java",width:"60%"},{name:"Python",width:"50%"},{name:"SQL",width:"65%"},{name:"Web Dev",width:"88%"},{name:"Git/Github",width:"70%"},{name:"Salesforce CRM",width:"60%"}],nte=()=>{const[e]=xc(Oc),[i,n]=(Up({from:{transform:"translate3d(0, -180px, 0)"},to:{transform:"translate3d(0, 0, 0)"},config:{tension:150,friction:3}}),(0,t.useState)(!1)),r=(0,t.useRef)(null),a=e=>{r.current&&!r.current.contains(e.target)&&n(!1)},{ref:s,inView:o}=bh({triggerOnce:!0,threshold:.1}),{ref:l,inView:c}=bh({triggerOnce:!0,threshold:.1}),{ref:h,inView:u}=bh({triggerOnce:!1,threshold:.1}),d={width:"8px",height:"8px",backgroundColor:"#fff",borderRadius:"50%",marginRight:"10px",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.6s ease-out, transform 2.2s ease-out"},p={display:"flex",alignItems:"center",marginTop:"5px",marginBottom:"10px"},f={background:"rgba(255, 255, 255, 0.2)",borderRadius:"5px",height:"10px",flex:"1",position:"relative",marginLeft:"-5px",overflow:"hidden",marginRight:"10px",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 4s ease-out, transform 4.5s ease-out"},m={height:"100%",backgroundColor:"#ff00ff",borderRadius:"5px",position:"relative",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 4.2s ease-out, transform 6s ease-out"},g={width:"10px",height:"10px",backgroundColor:"#ff00ff",borderRadius:"50%",position:"absolute",top:"50%",transform:"translateY(-50%)",right:"-5px"},v={backgroundImage:"url(".concat(sh,")"),backgroundPosition:"center"};return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .about-me {\n    font-family: 'Spaceboards', sans-serif;\n    font-weight: bold;\n    background: linear-gradient(90deg, #0cffc5, #a939ff, #0cffc5, #a939ff);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(0, 255, 197, 0.7), \n      0 0 5px rgba(0, 255, 197, 0.7), \n      0 0 7px rgba(169, 57, 255, 0.7), \n      0 0 9px rgba(169, 57, 255, 0.7), \n      0 0 12px rgba(0, 255, 197, 0.5), \n      0 0 15px rgba(169, 57, 255, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.8s infinite, glow 1.5s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.5), \n        0 0 0 rgba(169, 57, 255, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(0, 255, 197, 1), \n        0 0 2px rgba(0, 255, 197, 1), \n        0 0 5px rgba(169, 57, 255, 1), \n        0 0 8px rgba(169, 57, 255, 1), \n        0 0 12px rgba(0, 255, 197, 0.7), \n        0 0 15px rgba(169, 57, 255, 0.7);\n    }\n  }\n",document.head.appendChild(e),document.addEventListener("click",a),()=>{document.head.removeChild(e),document.removeEventListener("click",a)}},[]),(0,He.jsxs)("section",{className:"about",id:"about",style:v,children:[(0,He.jsx)(vc.div,{variants:tte(.2),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"about-me",style:{textAlign:"center",marginRight:"3.5rem",fontSize:"4rem",marginBottom:"1.2rem"},children:"About Me"})}),(0,He.jsxs)("div",{className:"row",children:[(0,He.jsx)("div",{style:{display:"grid",gridTemplateColumns:"70% 0%",marginTop:"1.6rem",marginBottom:"1.6rem",alignItems:"center",justifyContent:"center"},children:(0,He.jsx)(vc.div,{variants:tte(.8),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{ref:r,style:{width:"110%",aspectRatio:"1/1",borderRadius:"2rem",background:"linear-gradient(45deg, transparent, #6C63FF, transparent)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.2)",transition:"transform 0.3s ease-in-out",transform:i?"scale(1.1)":"scale(1.05)",margin:"0 auto"},children:(0,He.jsx)("div",{style:{borderRadius:"2rem",overflow:"hidden",transform:i?"rotate(0deg)":"rotate(15deg)",transition:"transform 0.6s ease-in-out",cursor:"pointer",position:"relative",boxShadow:i?"0 15px 30px rgba(0, 0, 0, 0.3)":"0 5px 10px rgba(0, 0, 0, 0.15)"},onClick:()=>{n(!i)},children:(0,He.jsx)(vc.div,{variants:tte(1.6),initial:"hidden",animate:"show",children:(0,He.jsx)("img",{src:ete,alt:"Profile",style:{width:"95%",height:"95%",objectFit:"cover",filter:i?"grayscale(0%)":"grayscale(50%)",transform:i?"scale(1.1)":"scale(1.05)",transition:"filter 0.3s ease-in-out, transform 0.6s ease-in-out",borderRadius:"2rem",position:"relative",border:"3px solid rgba(255, 255, 255, 0.1)"}})})})})})}),(0,He.jsxs)("div",{className:"content",children:[(0,He.jsxs)(vc.div,{variants:tte(2.8),initial:"hidden",animate:"show",children:[(0,He.jsx)("h3",{style:{fontSize:"3.2rem"},children:"Hi, I'm Ujjawal Shrivastava"}),(0,He.jsx)("span",{className:"tag",style:{fontSize:"1.9rem",color:"#ff00ff",fontFamily:"'Vidaloka', serif"},children:"MERN Stack Developer | AI Enthusiast "}),(0,He.jsx)(vc.div,{variants:tte(3.6),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{style:{fontSize:"1.7rem",color:"#ffffff",marginTop:"1.6rem",fontFamily:"'Open Sans', sans-serif",fontStyle:"italic",fontWeight:400,lineHeight:1.7},children:["I am Ujjawal, an B.TECH CSE Graduate Engineering student passionate about computers and aiming to kickstart a career in Software Development and Web Development. Currently based in Delhi, India, I am completed my undergraduate studies in Bachelor of  Technology at MERI-CET. My enthusiasm lies in enhancing my coding abilities and crafting applications and AI Enthusiast, website developer. As a well-organised & collaborative individual, I thrive in team environments and enjoy bringing innovative solutions to the table.",(0,He.jsx)("br",{}),(0,He.jsx)("br",{}),"Awesome!! Let's Build the Next Big Thing..."]})})]}),(0,He.jsx)("div",{className:"box-container",children:(0,He.jsxs)(vc.div,{variants:tte(1),initial:"hidden",animate:"show",children:[(0,He.jsxs)("div",{className:"box",children:[(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.5s ease-out, transform 1.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-person-badge-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Age : "})," 22"]}),(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(70px) scale(0.7)",transition:"opacity 4.5s ease-out, transform 3.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-telephone-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Phone : "}),(0,He.jsx)("a",{href:"tel:+8743917011",target:"_blank",rel:"noopener noreferrer",style:{color:"#fcfcfc"},children:"+91 8743917011"})]}),(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(70px) scale(0.7)",transition:"opacity 5s ease-out, transform 4.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-cake-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Birthday : "})," 12th october"]})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(70px) scale(0.7)",transition:"opacity 6s ease-out, transform 5.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-envelope-at-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Email : "}),(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava698@gmail.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#fcfcfc"},children:"ujjawalshrivastava698@gmail.com"})]}),(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 6.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Place : "})," Delhi, India - 110059"]}),(0,He.jsxs)("p",{ref:s,style:{opacity:o?1:0,transform:o?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 7.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-globe",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Language Known : "})," English, Hindi"]})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsxs)("p",{ref:l,style:{opacity:c?1:0,transform:c?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 5.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-star-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Hobbies : "})," Cricket, Writing, Try to Learn New SKills, Travelling, Listening Music"]}),(0,He.jsxs)("p",{ref:l,style:{opacity:c?1:0,transform:c?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 6.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-linkedin",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Linkedin : "}),(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218/",target:"_blank",rel:"noopener noreferrer",style:{color:"#fcfcfc"},children:"Connect Here"})]}),(0,He.jsxs)("p",{ref:l,style:{opacity:c?1:0,transform:c?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 7.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-mortarboard-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Degree : "})," Bachelor's of Technology - Computer Science Engineering'2025"]}),(0,He.jsxs)("p",{ref:l,style:{opacity:c?1:0,transform:c?"translateY(0) scale(1)":"translateY(70px) scale(0.6)",transition:"opacity 6s ease-out, transform 8.5s ease-out"},children:[(0,He.jsx)("i",{className:"bi bi-bank2",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" University : "}),"MDU"]})]})]})}),(0,He.jsxs)("div",{style:{marginTop:"20px",marginBottom:"12px",color:"#fff"},children:[(0,He.jsx)("div",{ref:h,style:{marginBottom:"20px",textAlign:"left",borderBottom:"1px solid #ff00ff",width:"100px",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.6s ease-out, transform 0.8s ease-out"},children:(0,He.jsx)("h2",{ref:h,style:{fontFamily:"'Vidaloka', serif",textTransform:"uppercase",margin:0,fontSize:"18px",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 2s ease-out, transform 1.8s ease-out"},children:"Skills"})}),(0,He.jsx)("div",{style:{flex:"1",marginLeft:"20px"},children:(0,He.jsx)("ul",{style:{listStyleType:"none",padding:"0",margin:"0"},children:ite.map((e,t)=>(0,He.jsxs)("li",{style:p,children:[(0,He.jsx)("div",{ref:h,style:d}),(0,He.jsx)("div",{ref:h,style:{fontFamily:"'Vidaloka', serif",fontSize:"13.5px",width:"80px",flexShrink:0,opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 2s ease-out, transform 3s ease-out"},children:e.name}),(0,He.jsx)("div",{ref:h,style:f,children:(0,He.jsx)("div",{ref:h,style:(0,ye.A)((0,ye.A)({},m),{},{width:e.width}),children:(0,He.jsx)("div",{style:g})})})]},t))})})]}),(0,He.jsx)("div",{className:"glowbtnAbt",children:(0,He.jsx)(vc.div,{variants:tte(1.2),initial:"hidden",animate:"show",children:(0,He.jsxs)("a",{href:"https://drive.google.com/file/d/1FSn4Er9NH-Qs4ZwZu1ZHWFyMP2Pm4s1K/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",onClick:e,className:"btn",ref:h,style:{padding:"12px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#f40388",border:"none",marginBottom:"-10px",marginLeft:"1px",marginTop:"25px",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"50%",textAlign:"center",cursor:"pointer",opacity:u?1:0,transform:u?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.6s ease-out, transform 4s ease-out"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),"Resume"]})})}),(0,He.jsx)("div",{className:"glowbtnAbt",children:(0,He.jsx)(vc.div,{variants:tte(2.5),initial:"hidden",animate:"show",children:(0,He.jsxs)("a",{href:"/certifications",onClick:e,className:"btn",ref:h,style:{padding:"12px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#f40388",border:"none",marginBottom:"-10px",marginLeft:"1px",marginTop:"25px",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"90%",textAlign:"center",cursor:"pointer",opacity:u?1:0,transform:u?"translateY(0)":"translateY(-70px)",transition:"transform 2s ease-out"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),"My Certifications"]})})})]})]})]})},rte=__webpack_require__.p+"static/media/img.6635cd44b0f1467c80f5.png",ate=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),ste={width:"40rem",height:"46.5rem",marginLeft:"3rem",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},ote=()=>((0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .about-me {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #0cffc5, #a939ff, #0cffc5, #a939ff);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(0, 255, 197, 0.7), \n      0 0 5px rgba(0, 255, 197, 0.7), \n      0 0 7px rgba(169, 57, 255, 0.7), \n      0 0 9px rgba(169, 57, 255, 0.7), \n      0 0 12px rgba(0, 255, 197, 0.5), \n      0 0 15px rgba(169, 57, 255, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.8s infinite, glow 1.5s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.5), \n        0 0 0 rgba(169, 57, 255, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(0, 255, 197, 1), \n        0 0 2px rgba(0, 255, 197, 1), \n        0 0 5px rgba(169, 57, 255, 1), \n        0 0 8px rgba(169, 57, 255, 1), \n        0 0 12px rgba(0, 255, 197, 0.7), \n        0 0 15px rgba(169, 57, 255, 0.7);\n    }\n  }\n  \n  .about-me{\n    font-size: 6.2rem;\n  }\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)("section",{className:"aboutPC",style:{position:"relative",padding:"35px 10px",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",color:"#e2e8f0",overflow:"hidden",marginTop:"-0.1rem",zIndex:"10",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all 0.3s ease"},id:"aboutPC",children:[(0,He.jsx)("div",{style:{marginTop:"4rem"}}),(0,He.jsxs)("div",{style:{backdropFilter:"blur(1px)",borderRadius:"30px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"20px",maxWidth:"1380px",minHeight:"720px",width:"100%",margin:"5px auto",display:"flex",flexDirection:"column",Top:"5%",gap:"5px",zIndex:"1",pointerEvents:"none"},children:[(0,He.jsx)(vc.div,{variants:ate(.2),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"about-me",style:{textAlign:"left",marginRight:"3.4rem",marginLeft:"4rem",marginBottom:"-2rem"},children:"About Me"})}),(0,He.jsxs)("div",{className:"row",children:[(0,He.jsx)(vc.div,{style:ste,initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},children:(0,He.jsx)("img",{src:rte,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease",":hover":{transform:"scale(1.05)"}}})}),(0,He.jsxs)("div",{className:"content",children:[(0,He.jsxs)(vc.div,{variants:ate(.6),initial:"hidden",animate:"show",children:[(0,He.jsx)("h3",{style:{fontFamily:"'Great Vibes', cursive",color:"#ffffff",fontSize:"4.6rem"},children:"I'm Ujjawal Shrivastava"}),(0,He.jsx)("span",{style:{fontSize:"2.2rem",color:"#ff00ff",fontWeight:600,fontFamily:"'Vidaloka', serif",marginTop:"1rem"},children:"Full Stack Developer | AI Enthusiast "})]}),(0,He.jsx)(vc.div,{variants:ate(.9),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{style:{fontSize:"1.5rem",color:"#ffffff",marginTop:"1.5rem",fontFamily:"'Open Sans', sans-serif",fontStyle:"italic",fontWeight:400,lineHeight:1.5},children:["I am Ujjawal, an CSE Engineering student passionate about computers and aiming to kickstart a career in Software Development and Web Development. Currently based in Delhi, India, I am completed my undergraduate studies in Computer Science and Engineering at MERI-CET. My enthusiasm lies in enhancing my coding abilities and crafting applications and websites. As Well-organised & collaborative individual.",(0,He.jsx)("br",{})," I thrive in team environemnts and enjoy bringing inovative solutions to table.",(0,He.jsx)("br",{})," Awesome!! Let's Build the Next Big Thing..."]})}),(0,He.jsxs)("div",{className:"box-container",children:[(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)(vc.div,{variants:ate(1.4),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-person-badge-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Age : "})," 22"]})}),(0,He.jsx)(vc.div,{variants:ate(1.8),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-telephone-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Phone : "}),(0,He.jsx)("a",{href:"tel:+8743917011",target:"_blank",rel:"noopener noreferrer",style:{color:"#fcfcfc"},children:"+91 8743917011"})]})}),(0,He.jsx)(vc.div,{variants:ate(2.2),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-cake-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Birthday : "})," 12th october"]})})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)(vc.div,{variants:ate(2.6),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-globe",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Nationality : "})," Indian"]})}),(0,He.jsx)(vc.div,{variants:ate(3),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-mortarboard-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Degree : "})," BTech- CSE'25"]})}),(0,He.jsx)(vc.div,{variants:ate(3.4),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-bank2",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" University : "})," MDU"]})})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)(vc.div,{variants:ate(3.8),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-envelope-at-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Email : "}),(0,He.jsx)("a",{href:"mailto:Ujjawalshrivastava698@gmail.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#fcfcfc"},children:"Ujjawalshrivastava698@gmail.com"})]})}),(0,He.jsx)(vc.div,{variants:ate(4.2),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Place : "})," Delhi, India - 110059"]})}),(0,He.jsx)(vc.div,{variants:ate(4.5),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-translate",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Language Known : "})," English, Hindi"]})})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)(vc.div,{variants:ate(4.9),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-star-fill",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Hobbies : "})," Cricket, Writing, Try to Learn New Skills, Travelling, Listenig Music"]})}),(0,He.jsx)(vc.div,{variants:ate(5.2),initial:"hidden",animate:"show",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"bi bi-linkedin",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Linkedin : "}),(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218/",target:"_blank",rel:"noopener noreferrer",style:{color:"#17fc03",pointerEvents:"auto"},children:"Connect Here"}),(0,He.jsx)("i",{className:"bi bi-github",style:{fontSize:"1.7rem",color:"#ff00ff",marginRight:"0.5rem",marginLeft:"4rem"}}),(0,He.jsx)("span",{style:{color:"#ff00ff",fontFamily:"'Vidaloka', serif",fontWeight:500,marginTop:"1rem"},children:" Github : "}),(0,He.jsx)("a",{href:"https://github.com/ujjwalshriv3",target:"_blank",rel:"noopener noreferrer",style:{color:"#17fc03",pointerEvents:"auto"},children:"Follow Here"})]})})]})]}),(0,He.jsx)("div",{className:"glowbtnAbt",children:(0,He.jsxs)(vc.div,{variants:ate(6),initial:"hidden",animate:"show",children:[(0,He.jsxs)("a",{href:"https://drive.google.com/file/d/1FSn4Er9NH-Qs4ZwZu1ZHWFyMP2Pm4s1K/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",className:"btn",style:{padding:"12px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#f40388",border:"none",marginBottom:"-10px",marginLeft:"1px",marginTop:"25px",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"40%",textAlign:"center",cursor:"pointer",pointerEvents:"auto"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),"Resume"]}),(0,He.jsxs)("a",{href:"/certifications",className:"btn",style:{padding:"12px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#f40388",border:"none",marginBottom:"-10px",marginLeft:"15px",marginTop:"25px",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"40%",textAlign:"center",pointerEvents:"auto",cursor:"pointer"},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),"My Certifications"]})]})})]})]})]})]})),lte=()=>{const e=We({maxWidth:767});return(0,t.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"About Me | Portfolio - Ujjawal"})}),(0,He.jsx)("div",{children:e?(0,He.jsx)(nte,{}):(0,He.jsx)(ote,{})})]})};var cte=["light","dark"],hte="(prefers-color-scheme: dark)",ute=t.createContext(void 0),dte={setTheme:e=>{},themes:[]},pte=(t.memo(e=>{let{forcedTheme:i,storageKey:n,attribute:r,enableSystem:a,enableColorScheme:s,defaultTheme:o,value:l,attrs:c,nonce:h}=e,u="system"===o,d="class"===r?"var d=document.documentElement,c=d.classList;".concat("c.remove(".concat(c.map(e=>"'".concat(e,"'")).join(","),")"),";"):"var d=document.documentElement,n='".concat(r,"',s='setAttribute';"),p=s?cte.includes(o)&&o?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'".concat(o,"'"):"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=l?l[e]:e,a=t?e+"|| ''":"'".concat(n,"'"),o="";return s&&i&&!t&&cte.includes(e)&&(o+="d.style.colorScheme = '".concat(e,"';")),"class"===r?o+=t||n?"c.add(".concat(a,")"):"null":n&&(o+="d[s](n,".concat(a,")")),o},m=i?"!function(){".concat(d).concat(f(i),"}()"):a?"!function(){try{".concat(d,"var e=localStorage.getItem('").concat(n,"');if('system'===e||(!e&&").concat(u,")){var t='").concat(hte,"',m=window.matchMedia(t);if(m.media!==t||m.matches){").concat(f("dark"),"}else{").concat(f("light"),"}}else if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(f(l?"x[e]":"e",!0),"}").concat(u?"":"else{"+f(o,!1,!1)+"}").concat(p,"}catch(e){}}()"):"!function(){try{".concat(d,"var e=localStorage.getItem('").concat(n,"');if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(f(l?"x[e]":"e",!0),"}else{").concat(f(o,!1,!1),";}").concat(p,"}catch(t){}}();");return t.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:m}})}),__webpack_require__(3360));const fte={containerProps:{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",paddingTop:40}},options:{reverse:!0,depth:1,wheelZoom:!1,imageScale:2,activeCursor:"default",tooltip:"native",initial:[.1,-.1],clickToFront:500,tooltipDelay:0,outlineColour:"#0000",maxSpeed:.04,minSpeed:.02}};function mte(e){let{iconSlugs:i}=e;const[n,r]=(0,t.useState)(null),{theme:a}=(()=>{var e;return null!=(e=t.useContext(ute))?e:dte})();(0,t.useEffect)(()=>{(0,pte.fB)({slugs:i}).then(r)},[i]);const s=(0,t.useMemo)(()=>n?Object.values(n.simpleIcons).map(e=>((e,t)=>{const i="light"===t?"#f3f2ef":"#080510",n="light"===t?"#6e6e73":"#ffffff",r="dark"===t?2:1.2;return(0,pte.ci)({icon:e,bgHex:i,fallbackHex:n,minContrastRatio:r,size:42,aProps:{href:void 0,target:void 0,rel:void 0,onClick:e=>e.preventDefault()}})})(e,a||"light")):null,[n,a]);return(0,He.jsx)(pte.Es,(0,ye.A)((0,ye.A)({},fte),{},{children:s}))}const gte=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),vte=(e,t,i,n)=>({hidden:{x:"left"===e?100:"right"===e?-100:0,y:"up"===e?100:"down"===e?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:t,delay:i,duration:n,ease:"easeOut"}}}),yte={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},bte={zIndex:"1",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all 0.3s ease",position:"relative"},xte=[{name:"HTML 5",icon:"https://cdn.pixabay.com/photo/2017/08/05/11/16/logo-2582748_1280.png"},{name:"CSS 3",icon:"https://cdn.pixabay.com/photo/2017/08/05/11/16/logo-2582747_640.png"},{name:"JavaScript",icon:"https://i.pinimg.com/736x/b4/de/20/b4de205cb6d4e7cad43c2971f780cfd9.jpg"},{name:"React JS",icon:"https://www.svgrepo.com/show/355190/reactjs.svg"},{name:"Tailwind CSS",icon:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSk03fpMxbjzvgaDz2z3gu5G-9UeqgnNfUdd7gzSo9-er843XxKIG3g46lO1GRUF-L9UWs&usqp=CAU"},{name:"Python",icon:"https://cdn-icons-png.flaticon.com/512/5968/5968286.png"},{name:"Django",icon:"https://www.opengis.ch/wp-content/uploads/2020/04/django-python-logo.png"},{name:"Cpp",icon:"https://cpp-lang.net/img/cpp.svg"},{name:"Node JS",icon:"https://academyclass.com/wp-content/uploads/2021/11/ACCL-NodeJS-1200x1200.png"},{name:"MySQL",icon:"https://wallpapers.com/images/hd/my-s-q-l-development-services-circle-logo-xkzj685lk8e3zego.jpg"},{name:"MongoDB*",icon:"https://x5h8w2v3.rocketcdn.me/wp-content/uploads/2021/10/Logo-MongoDB.png"},{name:"Mongoose",icon:"https://w7.pngwing.com/pngs/948/837/png-transparent-mongoose-hd-logo.png"},{name:"Express",icon:"https://w7.pngwing.com/pngs/925/447/png-transparent-express-js-node-js-javascript-mongodb-node-js-text-trademark-logo.png"},{name:"Salesforce",icon:"https://banner2.cleanpng.com/20180712/lpe/aaw8929hy.webp",dark:!0},{name:"Git",icon:"https://cdn-icons-png.flaticon.com/512/4494/4494740.png"},{name:"Github",icon:"https://cdn-icons-png.flaticon.com/256/25/25231.png"},{name:"VS Code",icon:"https://e1.pngegg.com/pngimages/947/906/png-clipart-clay-os-6-a-macos-icon-visual-studio-code-blue-and-white-illustration.png"},{name:"Java",icon:"https://banner2.cleanpng.com/20180710/yfj/aawrirzz9.webp"},{name:"Bootstrap",icon:"https://upload.wikimedia.org/wikipedia/commons/b/b2/Bootstrap_logo.svg"},{name:"Google Cloud*",icon:"https://bcassetcdn.com/public/blog/wp-content/uploads/2022/08/29150705/Google-Cloud.png"}],wte=["javascript","java","react","html5","css3","nodedotjs","vercel","git","github","visualstudiocode","bootstrap","cpp","python","django","Salesforce","mysql","GoogleCloud","figma"],Ate=()=>{const e=We({query:"(max-width: 767px)"}),[i,n]=(0,t.useState)(!1),{ref:r,inView:a}=bh({triggerOnce:!1,threshold:.1});return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .Tech {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(255, 127, 0, 0.7), \n      0 0 5px rgba(255, 127, 0, 0.7), \n      0 0 7px rgba(255, 0, 0, 0.7), \n      0 0 9px rgba(255, 0, 0, 0.7), \n      0 0 12px rgba(255, 127, 0, 0.5), \n      0 0 15px rgba(255, 0, 0, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite, glow 1.2s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n  .Tech-PC {\n    display: none;\n  }\n\n  .Tech-Mobile {\n    display: block;\n  }\n\n  @media (min-width: 768px) {\n    .Tech-PC {\n      display: block;\n    }\n    .Tech-Mobile {\n      display: none;\n    }\n  }\n",document.head.appendChild(e),window.scrollTo({top:0,behavior:"smooth"}),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"My Skills | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{style:bte,children:[e?"none":(0,He.jsx)(n6,{style:yte,scene:"https://prod.spline.design/z6sedxN3BKPCAM0N/scene.splinecode",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)}),(0,He.jsxs)("div",{className:"mt-1",style:{zIndex:"20",position:"relative",pointerEvents:"none"},children:[(0,He.jsxs)(vc.div,{variants:gte(.8),initial:"hidden",animate:"show",className:"text-center mb-16 px-4",children:[(0,He.jsx)("div",{className:"Tech Tech-PC",style:{textAlign:"center",marginBottom:"3rem",marginTop:"7.2rem"},children:"My Techincal Skills"}),(0,He.jsx)("div",{className:"Tech Tech-Mobile",style:{textAlign:"center",marginBottom:"3.5rem",marginTop:"8rem",marginRight:"2.8rem"},children:"My Tech Stack"})]}),(0,He.jsx)("div",{className:"flex flex-wrap justify-center gap-10 mt-12 px-4",children:xte.map((e,t)=>(0,He.jsxs)(vc.div,{variants:gte(.8),initial:"hidden",animate:"show",variants:vte("","",.1*t,.75),className:"relative w-64 h-64 p-6 rounded-lg bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-500 shadow-lg flex flex-col items-center justify-center transform transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-2xl overflow-hidden",children:[(0,He.jsx)(vc.div,{className:"absolute inset-0 bg-gradient-to-tl from-transparent to-black opacity-30",initial:{opacity:0},whileHover:{opacity:.5},transition:{duration:.3}}),(0,He.jsx)(vc.img,{src:e.icon,alt:e.name,className:"relative w-24 h-24 object-contain rounded-full shadow-lg border-4 border-white ".concat(e.dark?"bg-gray-700":""),initial:{scale:1},whileHover:{scale:1.2,rotate:15},transition:{duration:.3},style:{pointerEvents:"auto"}}),(0,He.jsx)("h3",{className:"relative text-white mt-4 text-center text-xl font-semibold tracking-tight",children:e.name})]},e.name))}),(0,He.jsx)("div",{className:"Tech Tech-Mobile",ref:r,style:{textAlign:"center",marginBottom:"1rem",marginTop:"3.5rem",marginRight:"3rem",fontSize:"5.2rem",opacity:a?1:0,transform:a?"translateY(0) scale(1)":"translateY(50px) scale(0.9)",transition:"opacity 1.5s ease-out, transform 2.5s ease-out"},children:"Skills in CLoud"}),(0,He.jsx)("div",{className:"block md:hidden px-4 py-6 flex items-center justify-center",ref:r,style:{opacity:a?1:0,transform:a?"translateY(0) scale(1)":"translateY(-50px) scale(0.9)",transition:"opacity 3s ease-out, transform 4.5s ease-out",pointerEvents:"auto"},children:(0,He.jsx)("div",{className:"relative w-full max-w-[90%] mx-auto bg-gradient-to-r from-blue-400 to-purple-500 rounded-lg shadow-xl p-4",children:(0,He.jsx)("div",{className:"bg-white rounded-lg border border-gray-300 shadow-md p-6 flex items-center justify-center",children:(0,He.jsx)("div",{className:"text-blue-600 font-bold",ref:r,style:{fontSize:"2rem",alignItems:"center",justifyContent:"center",opacity:a?1:0,transform:a?"translateY(0) scale(1)":"translateY(-50px) scale(0.9)",transition:"opacity 5s ease-out, transform 7.5s ease-out"},children:(0,He.jsx)(mte,{iconSlugs:wte})})})})})]})]})]})};var Ste=__webpack_require__(4120);const _te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAIAAADq+E5hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAA9DSURBVHhe7d1fiJVVvwfwrBEqLb1QZ8YZy0zKItTojwOaTjiYYZBQhETgSAWGdVKyN7E/M3pxmMOxU3BOp6hDeXNOQ3TRISKpoC6CuorBuhhKQcFCCyqwBI3pfRevv8LaOu2Z59l7P8/en8/V7D/PWr+1GPfXNTPPWucBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAGWzcuPH+cmpvb48xVNi6detgyQ0MDDzyyCMbNmxYvXr14sWLOzo6Ymy1N3/+/CiiSLZv3x71NUJ3d3fUUSQ7duyI+qA1nThx4u/ltGLFihhDhcOHD8ebmsgvv/zy8ccfp4+tNPC2trYYag309vZGlwWzaNGiKLHuUlREEUXy448/Rn3QmpoywA4dOhRvalI//fTTO++888ADD8SAc1XYAEvhHSXW3cjISBRRJAKMVmcFVmpHjhx59NFHL7roohh5HgobYKOjo1FifaWVX1RQMAKMVifAmsB33323c+fOGTNmxPizKWyAJUuXLo0q6yit/KL7ghFgtDoB1jS+/fbblStXxhRkUOQAGxoaiirrKK38ovuCEWC0OgHWTMbGxnbt2nX++efHRExKkQOs/j9FTGu+6Lt4BBitToA1n48++mjWrFkxFxNX5ABL6vxTxLTmi46LR4DR6t54443/L6drrrkmxlBheHg4fYi3sjQDs2fPjumYoCVLlnxYYBs3boxC6+KVV16Jjovn7bffjioBAAAAAAAAAAAAAAAAAIpn8+bNj5RTZ2dnjKFCExxoWSMDAwMxR+dWzAMtK6Vv3ag4b9OnT48+is2BlrQ6W0m1mi1btsQ0nUPBt5L63alTpya928j4+vv7o49is5UUrU6AtZpvvvlm6tSpMVNnU5YAS9JSO4rO1b59+6KDYhNgtDoB1oLG/+FbiQLs008/jaLzk1Z1aW0XHRSbAKPVCbAW9Pnnn8dMnU2JAuzXX39dsGBB1J2TtKqL1gtPgNHqBFhrWrhwYUxWhRIFWJL7HzKkVV00XXgCjFYnwFrT7t27Y7IqlCvARkZGou48pPVcWtVF04UnwGh1Aqw1ffnllzFZFcoVYEmOR1wODg5Go2UgwGh1e/fufb2crr766hhDBQdaVqO7uzvm64/Kch/Y73p6eqL0zPr7+6PRMnAfGAAAAAAAAAAAAAAAAADQZObMmfO3XN18883RdONMnz49qslJb29vNJ1ZT09P3Lmat3F2M5moNN5otHHuu+++qGaCBgYGoonG6ejoiGqA2rn++utjK5ucPPHEE9F043R1dUU1OdmzZ080nVnt9kfP8VDj9BEcjTbO8ePH29raoqCqFWTrrBw3xALOSYBVoxQBtmHDhugjsyIEWLJ+/fooqGp79+6NixtKgEE9CLBqlCLA1q5dG31kVpAAGx4ejoKqk1Zsad0WFzeUAIN6EGDVKEWA5bgNbkECLKXRtGnToqYqpBVbXNloAgzqQYBVoxQBluMfDhQkwJL+/v6oqQpvvfVWXNZoAgzqQYBVo/gBdvTo0eggD8UJsH379kVNfyWt1U6dOhWXNZoAg3oQYNUofoClxUd0kIfiBFjKpNmzZ0dZ40prtbimAAQY1MNll132aq5uv/32aLpxZs6cGdXk5J577ommM6vRfWB9fX3RQR6KcB/Y76677rooa1x33313XFAA7gMDAAAAAAAAAAAAAAAAAOjo6Ih7L3OyfPnyaLpxZs6cGdU0tQntEzghK1asiD5y8vTTT8dXGaxbty7qO8O2bdvi5QxyKe9Mc+bMifqA2mnKraTmz58f1TSvsbGxZcuWxYDztnPnzugmJ++//358lcGBAweivt9ceeWV8Vo27733XnyVk8WLF0eJQO0IsJIaGhqK0dZA7gG2adOm+CqbG264IUr8p7TWiRcyOHbs2FNPPRUPciLAoB4EWBnt379/6tSpMdoayD3AlixZktZP8SCDP+2qnEubzz77bO4BlsYbJQK1I8BK5+TJk1XubztptQiwXbt2xYMM0mopSjzvvJtuuimezSat6gQYlJIAK5exsbG77rorxlkzTz75ZPSXk6VLly5YsCAeZNPb23u6yOeeey6eyuD079UEGJSSACuRlF6bNm2KQdZSLQIsNfvZZ5/F4wxefvnl00Wm1Vg8lcHAwEBqSoBBKQmwsqhbeiU1CrDHH388Hmfw/ffft7W1rV69Oh5nk9aFqTABBqXU3d39X7nK92TFyWnK+8DWr18fw6u9W265JXrNyekDHjs7O+NxNl1dXSnA4kEG27ZtOz3elStXxlM5aW9vP90yAAAAAAAAAAAAAAAAAEDLmjt37r/latWqVdF04zTljcy13sD3TKtXr/6PXKVvs2j6Nw8//HAMrO7uuOOOKOI3fX19UWhOKscL5M9WUmXx9ddfX3HFFTHCGst9N/rTW0md6aWXXorX6q5yT5Pct86ylRTUgwArkYMHD3Z2dsYga6kOAdbb2xuv1dexY8fa2tqiiN8IMCglAVYuX3zxRR0yrA4BluRyHOVEpZVfdH8GAQalJMBK55NPPpkyZUoMtTbqE2BDQ0Pxch39fpzYmQQYlJIAK6MdO3bEUGujPgGWnoyX6+XgwYPR9x8JMCglAVZGJ0+eXLZsWYy2BuoTYMnIyEi8oy4GBwej4z8SYFBKAqyk0mLi4osvjgHnrW4BlpaS8Y66WLRoUXT8RwIMSmnu3Ln/nquz/o6hzpryPrBKPT09MeC8rVq16l9zda4/POnu7o7B1N727duj1wrpmzYKzcnpAzwBAAAAAAAAAAAAAAAAAFpZd3f3f+aqr68vmm6cGTNmRDU5qTxBatJ6enrixtpc5Tvtt91223/nKn2bRdPntnXr1hhMriqPr6y0du3aKDQnXV1d0TRQO025lVT6+IhqcrJnz55oOrP0MR2N5mp4eDg6yEPdtpI60969e+PduarmPx+2koJSEmDVKH6AjY6ORgd5aEiA1eKIy2PHjk2dOjU6ODcBBqUkwKpR/AAbGxubNm1a9JFZQwJsypQpKW/igpyc9fjKSgIMSkmAVaP4AZbkuLdvQwIsef755+OCnFS5tbQAg1ISYNUoRYBt2LAh+sisUQGW3hYX5OHgwYNVHl0twKCUBFg1ShFg/f390UdmjQqwZHR0NK7JbGhoKBr9KwIMSkmAVaMUAbZ58+boI7MGBtjg4GBck1n1nQowKKWOjo5duVq+fHk03TiXXHJJVJOTNWvWRNOZ1eg+sGTFihXRR2apqWdy1d7eHk3/lbyOuBzn+MpKDRwvAAAAAAAAAAAAAAAAAEApvPDCC/9TTgsXLowxVNham3MOm8y5ToxctGjRqwUwb968KGgitm/fHsOrWjXHV1Zat25dFNo4L774YlQDrenEiROxlU3ZjLOLxKFDh+JNnMPRo0fb2tpivv7o1ltvjTc1VPW7Op1pEkdcTu7s7Ny3kpqE9I83qoHWJMBa0zinXpU6wCZ6xOXx48erOb6ykgCDxhNgrWmcU69KHWATPeIyrdjiygkSYNB4AqwFHT16NGbqbEodYMmEjris8vjKSgIMGk+AtaDBwcGYqbMpe4ClC6OJv1L98ZWVBBg0ngBrNWn5demll8ZMnU3ZAyyp8ojL6o+vrCTAoPEEWKvZunVrTNM5NEGApSVmtDKuLF0IMGi8xx57bEc5nes2psR9YOO48MILY5rOYd68eX8rgDlz5kRBE1fNEZcTOr6yUk9PTxTaONu2bYtqAAAAAAAAAAAAAAAAAACK59VXX/3fcrrqqqtiDBWGh4c/am1pBtrb22M6Jujaa6/9vwK4/PLLo6BsXn/99Q/PsGXLlnghmzvvvDMKbZzXXnstqoHW1JRbSR0+fDje1JLefffdGTNmxFxMXBNsJXWmP21OP+nt5//EVlLQeAKsmfz888+bN2+OWZisJguwnp6eaPGfGxlPevv5PxFg0HgCrGns379/4cKFMQUZNFmApcT66quvTreZVmPxbGYCDBpPgDWBkZGRe++994ILLojxZ9NkAZYMDQ2dbjOtxuKpzAQYNJ4AK7UPPvhgzZo1MeycNF+ApaZSgwcOHMjr54eJAIPGE2Cl88MPP7z55psPPvjg3LlzY8C5ar4AS0ZHR7McX1lJgEHjNWWANd+BlkeOHPnwww937969fPnyGGTNNGWADQ4O5tugAIPGe+ihh/6lnDo7O2MMFZrgQMtnnnnm/vvv7+vry+XvMiakq6srprihZs2aFQXlId/WkhtvvDEKbZz0jzeqAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAI777x/AFaX1nyJAsMaAAAAAElFTkSuQmCC",Ete=__webpack_require__.p+"static/media/Gssoc_Logo.d8a6f90ac55497f4cb79.png",Cte=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),Mte={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},Tte={zIndex:"1",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all 0.3s ease",position:"relative"},Pte=[{date:"July 2025 - November 2025",company_name:"Galipia Molecules Pvt Ltd",title:"AI Full Stack Automation Developer",iconBg:"#fff",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAABGCAMAAACuXGXYAAAAqFBMVEVHcEw6qGknoFy328IKlkgYmlFJrnTwk0IAkDzvlj5mu4vE4cp6xJpWs37wjDGWz6zS5dIAkzuFxqCo2LvthynxqWbueg/zyJ6h1bTynFL3wJIBl0XwfxzwexICmUfwfxn+///7//8Akzzydgj7/fnrgR/tdwrsfRb1fhb1///69/L33cHztXj68ub1vIn559TvoVjvlkPzxpnyr2zxiSj107DtizLoeQ9ACtXDAAAAG3RSTlMAnrAmzb+OldeacRhdgaZBC+tSL7xwyDc2vb103KfaAAAJSklEQVR42tVaiXbiOhZkj0NCkkN3lhksvEqyvODd/v8/m7rCBrKdR5h+p03hxJuUlK7rLjIa/Umsf42uFo8TYzm6UjwtDNddja4Tb3N3s3EXo6vE0thsttsrZb8yttvttdp+bGwI26vU/dhwYXhSzv3o6rAwNkQev4zri/dw2B7z0bVhbWx78tcn++nM3Wr6CDrG4+i68DSHwxIwBHcy+nv4tRgvlsv1292Pwg0s37ns5i+b/o5KFXc2Hy8f775ts1qMj3HxHqLv2bvj0V/G4xz8NxsMYbL80pLTOcZnrPqhzDZgD+rAZoYR/20sDLIlNteYr94+39ZKmR900zssdDOITLU0yJ4EDGDykdL4lP26T1OAMZASZw05AFrKG3e2mr4rxzT72dM+3mwO7N3BJKpfKNU76AewOBH0m7E5UF2gWaf7zWw6GgruUDMesYX9n06kg/EstYcbB80PLE+hXj+hD/7ro9/OJ/uTiZaNFpmxHg0K66N6IB4Yd/xRGhTqgffkp883N7cPhNtbHH2PG9z9EW6A59enc0uAleEeEpE2/4fwM+/uwrF72bze/mbME2aeZXnVeoLR5xMk46bJmGVVnKPNTxC8PJ/L/9dY8z/KY3zac+nuPRaXe6d+fgEzkReJrxw/qeOqBU3Tsj5srEqTJG69Oklqi1nU4rzNlGbQ/r47/wUN+B9d051Pj44906PaHB8JyEvp8V3o+LbjO7ajklIwE5CnG3g0oVI7T0SOHUlmUYPzNo6fIHiZnl85jGeuq9nrFAaNHHIuriMdLw+meH2xOKtqx1fKAWw79J2dJPpW9wE4fliT+PYuAHsn6mzP6Rc11CBL65a011fplNMB5xV7+En0XOIBuF1Wcvty4NGYjyeT1WmcfCDbRMr3VbTLsrJI8ABUKQLOubQC1gqP8YALy2RV6Ni71iLvCCSsz6CmFv5C7HDbqixLonnbWhg8OktTStwWzEJzL2iffzYBuV9MZjO4J9DRv19+bPT6O5ByB+5hyVvPY15TK99JcguEuKyyMi5zZjZ53oA9bC+sqmkqaVW4wlkeF7usCiTMzFtT8jzexWUD7pxZUEtr6v5conXlPVyQwabT6S9s3827b1jAGmg+zD0JvlADr9MoLSVnzIpT+IIK6ybyw1Ls2bPa96H7OAxrXuOuUmkmSCmByKOQzpOiEibHJV6mylF2GDVFGO7al9fRn8Yt42JnKz/2LAoOElqWXFqwX8BrR0OpKHXs2NuzF5GC14pY+WkEV7HhL2FM9FmWKNvRSHOPS8YLdPUdeFSaKvSU//nj7B+g38j200aaULkFpUrtblBs4cAFwjQNlY9YVIqevaPZgzY+SeKTy2SeKfPQV11zJ4Wvip3j+3ZILXCAnubvf4G9rBLHrhnD/xOUhATBYywnMkVeNVmkws/swcipc7PKIhxFMDX2qsg5z2rc2TFZhUrZdV7RBUd7zOXs12tKxOunz+xZHoZO4QUWh4fFPTKYHnpinic9M3K+Ym9H3OOmJyEglYkcMtq1HsBqW6VVu8MzKFouW0ES1Owvf0k/oTRszO+/ZK8KwVnT6damrRDw2JQzzi0usq+Uo0KoG2P2mgQ0MVg/jLMSyHYQSiYi20F/E8HHy8P/h/104m7GdDB3USB8VA5Yg48JBdm2b+OHlLwTOCsYXACo0s/s4ZtVgNuc/MauRe0odAYwdPQvReo4tUepSsogVZezv6PCc9FNTNzZ2wevlRH4wo5NmuwRQriZBW8oPBOQgfySfcT3CVYgcEYsItoE7G2lSpZi9EJq+rh5OfsFyLtLna1cF4l3/Y4992KbqDDKQ9h4FiIa8lb7sqX/eRN+xT5pAl2F8dSGlWs8tOiIjOFqhHzb1RgXs7+jit7Vgp8aurxcvY+YTULhwmwts5VItggesHqLXZK3ZF0Rqz1755Q9qcvkSFIZhBJ7BQSTiUBKax+5MJwwyQWicCBKhN5L2a9cKnX2epnQ8cZYHNlLCa+kyB7lJgKGWSY6XhO/0E9zqh7KkGKO95G9g/yLHlni+2EjcugtzbzWE1ld1zvpZTBCmjHRSrS4mP3TDIzxOqEv7wFMuY7skV2ZTkx+WuyK1PapzPE4BKFAsI7jGuy+YG+r/d1Q0VPgXqHQri7jiKpVPCkdSdGiRLi/1PY94Xk3dTE0+82B/m0bILHKwlf74l7hIIUCOBSRqFCBiaPC0O7Ze8dcG4KmjS4I/NC2KWscOkr7bRGY0ssTfW4r9PcvrBRg+tOXlZO+aJ50VVorA86DNotAHtIFg6KRGFAAQaUwGi4mGdJV7DWhggVF2isnKUJbgbuqTQxWBrIIqb3jhHHAoX/qr2iESVk7xP6/l5h+S+yX/aT8MDOcdJMTrmcXEgkdETONipz1Ew7R7OhS0Yi4wOVmtysyFuC4tHTMqXSXOpMSjXnA2qxIQ7TPmakhzDhKQpyLsigy7wLh3M30DNF4O55vNXrtP3hgCgQeAwVTtqInzwVjFucUNSTzGM1VhOSmaFtG7G24KuPcbEWgW1tBwCQ9tZaZHWhSE+AcN5gUz5fEepodurOTCNTRd43F3vhE1dKzIYsFgT6TJsDxQcAHa67nsQHjOMMAJe/Yc26BObrQgAGTJmSHv4A9Tqgr9RcPF9QIen7eyf7ot53rLvezcm4dKEtOtDVzixNZfcgDfY0msrqpND2tHEF898MEOCfGfX8A7fWeeovfF8xNxu6nL2QnmwOMxz19wbv/BivS/gCio/f9WWfkALZXYZdr3wEdjkddN/BvLyE/7Qw9e/r0Mg3ov3l4fXhpW8F+AJPlcVlydh6koLdRl5geTD+uQ0DN1qOPm6/P9Ibv5mygMV4a3pzb4/ludAHodTHRp4jzzvgA2X7YX9VOYHrC5OPl7vp+YAPF2tAm/vSiG2EHNzS2w/2Wf77RCvlMcGkc2LvGQLVzT6rHx7j/emFOv0BkOF/+nGLSxfrJd/eAwS6MejS23/vlU+/QeDiDdFydZikmfj9TB8gBxqPBYapVD918dx/0t4TNEJdGrVzNbAZm39Lfku2HuKDxabbt4s33Tcb0eAgod4YFmkP94yqEFaUtktfQ1iEvXLL86h9XxridcwwLE/q6Z3nO69nNQNbonGI5nyyn5y0tcbeuO6j1Cj9dm3GNi2GPRds1sx89zq5WOYTpwLx22PgfeKj86bEEYc0AAAAASUVORK5CYII=",points:["Contributing to the development of AI-powered healthcare solutions designed to assist patients and doctors in day-to-day medical workflows.","Built frontend applications with React.js, ensuring responsive interfaces and smooth user experience.","Optimized Frontend services for scalability.","Deployed applications on Vercel, managed GitHub version control, and contributed to scalable system design."]},{date:"July 2023 - September 2023",company_name:"Cloud Counsulage Pvt. Ltd",title:"Cloud Computing Intern",iconBg:"#fff",icon:"data:image/png;base64,UklGRu4bAABXRUJQVlA4TOIbAAAvIUJoELflILZtVdlPPj0YMtG/gdvV93AquI5kt21Wzr/uvyq3kQ3QOQAOIklWnQkzOYiK+FcSD4/pwG1s26pyvrsURUQHNEBKLd4CIUNHHj+Xr3cdZjsBATjggIMXeAH+aVp/eDBAkweTB80GsMcwtla+Thr22fKwaNJQimmQaLAwLZUkjh6Z686Nwqs51yvr6pJkxeZpXTdJ8kHye6U1SaGd6V6JBiulMkSGVIR2gXTB8/rHdrtn1f1eXHbNB90b3cc2r6C5B316DyvvqXmExX5q7tHiiWK31Ne3w4bKtCE+u6FvNvk9RPrL/fwR211XSYOkhGW+2Vvqbfw9l6ukGpZbWhHD4MPgYYiLIvaGv9fN7gfQ/wG69f4vDpGm/SUuWRrtzwGnzMvuFKJjpOR0Tdn10ek2Gl2zlvGTo7/lII8BvQ8wbb4SYwULUGAGGkzAgBFYMAAHPPDAgQFYMAIDJqDBDBRYgAQrEIAAAwKs0mHQto2gmj/sbvt7BhExAXlsvP3qRrHpnE0wWA++SIIsiVqRVYTMpI3DW4wCAKtWIynj7u7uPhOXFsi4u7smaCCBdu8ed2WCbAvLstksy0P6/3hH6tQ5t07B2uHcy33XuDei/7Ig26paaR8dDdkhAj44cDyYO390Y9t2bUV5IHICU2sSwiZc+OfcJebZJlrTHdF/SWwbSZLk2Xu1NQvvWQlVdGf173FvycZ1vTTlnoCsF6vLhwvx6iZcYoyHh1VxsDuP7/DRONdhykHMV4pmt4y1Ko9bm7YkjXm1trtFcy2Pmy5IPNxv3MfwDTcO8/u96uGDziWpc8ffyo4djSd4PRV53bkodV64i7NxR25gdLxLaeeupKFqHMYZJutKKwud+7LkZMANfZxk8eelEIoDbu4jshf7S12yJOw7lmsCWt5e1fK0S57M5esu4SR3iTtXtaRKrNzBGdYSD5aV/CTSD5tdD3EtbCZfwvquhlgsdDTIUrFrIe4vdHRILHYlxFWhu4eUFSeIZxkaDzkrLhDZuUbRyppN3NTHMT7q1UubdEk4sE0cYmKvT97RJhbbZU70MWAhVtKOOplbtYXTXCQWWoskr3zHOYHIwU9RKXnDdeK1tKNT5gqWE5uljlYpG1tE5oVSK+m+JSL/QskNtEE8xcRQUqO0QDzON9WJbsktEId5ZpxUb1Iu9TomjvdRscy6YImd7J2dYhqxucFuPCF1KBAZR4OnOEvcV9DoKayvzThGXO78IatMJTah84kElhKbuvOLLDT8JK5pTOgPcXgs4gk+zVub/pF0DYvIpua5TS9Juo9FZNl80Pd4so9zXNKu/TWhEE9zCA93PpMVQwwEIs/mcy7IDAlEFs0+n44JRAbN/psQiPyZfThZIu4PDg8PB/ssmP042SDe0ERRTmacmP32PejEVliTV/b93v7iT1k1JLb60IOoloPW6y24Pp0M3ahBOhK1k79nv0qBODjFsG7d5415a5ueRbqG50atihA59LWZgXendSyPv8MRhONetmSb6/wrdYPk8fcGGOJNXjZ19LEsIBFzIA593ADjZwk4g1OcBMDPVrQrm76WVTgRAZ09DPLuHMk3bG36W9bARFcxfEN6jOhL4/qWx5FCIsDCGQsYCqcUJz7CY2BCBKnWFeMhEAEbbVD3KKV+jeFEEwnag3ig/lgLxD5uSHWc+M6C1c73Ark14ybdTeXHLb8zOH2g1b5uGKa/DdfDbbrm+xasoQ6vRhx1n88HwyXZJL9zEG40t8QeOqetWx+viHYS++gmB2TZ/BR0QgmsO3nas9ptbQ5bsl3XdDyQNfPpJPJ8k7ZGHLswRHg30BYTMIfgsSKoqrnHB4Y7MbhGTDeWOi7Io3jNsAdphl4jJt89WscHKUoHZCic0NeIFaYJ1IdxJgi5MU5fIw4KG1r6wzgThNoYd1xb5VHUiL0Qxr+g4Ru0NeKDNBv2iL0jM/APO1UezBox1W10vMCfvvhUF2rErXduumAF/vabI1n2bKvdxPFE8NA9oguswB++nO3gyZi4Qd8YN+SnG/sYgb/+8ogoz0DEcXWVB1oj3k02wfz990dkeSIiDlTdxD7zLsAG/PkXmUoKPJwVqjyV124sX+dD6G8ztTzhOYhvnA1Dvrtxiw+q9RGdPIURz5XABdX610cA8mw2YIENqjUEL2bDkg2qNQSv+NhtewbLNs1g8qmfF/czYckD1RqEz3/k5ztyOw+WLFCtIXjeJwtB6r2A5R+/CJs/d/7nO8KFRWSAag3BSz7+c4Xch44rl8vpSbVcKstydhe3/P2XYfOnz/9cKbei7ZEH9cToyM/gcqFtJy8R/S2RJar1zzVyrzme8516bCSgSTsx1eyeeoL+/juwat0XvMWznv6UJx751s/QZXRyepbQniCOqNYA3A0/Z/Xf68v3f2ZFRiYuE2mP4vHQ38DWXvSJn0Pk/MufA4v3qU9SbO6Pgi25MBYJjHaZH6o1CJ/Png4yh82U8jOrQl3AxuocL1TrjxUw+bTeyG3o3PGj8QNKfG0HlgOmCXvY6i12qNYwfCLbkWcqbZREjxTvUUHNtHeZm5ghyWT6KjdU64/+HChRY8H07LfJlrBvEWHCNJxWTVET9+EWM1Tr536qgMr5F2WCCORnPuXI+49KeG2WKZmOyMXJWULaXnyuWv8JrlqD8cpMxNN21p6cZe+OMmBMF6KenCFjjSOqNRifUdyQ0V/L3izNeqZTMj7D+rXuD18Cq9ZwfDLTyGtiHzCmYyuzJDwnIDtUazgOMg1e+KEdmDCdiibJK8tbXu89PmKiWoNjf54Gz//A0RjBTPdWphJrXzDndftGI9UaHvsrMg3eczRGKNNJGbmc2Id554Zq/cmfm8nnMg3eujObMt37jiR+iiOqtRk+lWnw+hijIdPFD11K3GMk8kO1/vjPDeUTmQav7scAZ7orozOJ8ijAD9X6s+dN548+V4MX9GMwYpIfuF5zRbU2i6HKNHhvjNGM6XJgMqJcZYhq/ani58b4fKbBO3dmQ6bTgdNJeMxIzqjWRo38KkiN/EZM52XC/W9jimqNHMNr+jEYMd2XkRmu0v70RQzVGm6Koovhg0djNGY6z7rMUue9f0NRrQ1MUTQQTFHMmMmQS+7+HgBueKnJPlvgzK+ENPIbMhMi49xUrv/6KxPV2k4MKMwkRDHr5GisvFGtkU1RTJnJma6414G8xYxb+L6gUa2xTVGQmImI3rVplTeqNbYpijmT6qlihmr9OY1qjW6KYpPJJjStcka1xjdFQWAmTKa4N/8B5RY+fFMUc+b3fkbzVDFGtbZhioLBJHla5YYjViVsmKIgMH8aKJ4qvqjWBhUFjA8q8ZUggtbvue5pR6ySU2uDigLH+5T4ZiB4WtviiGrtWuQ3wNs1THqn9dTL9o2KU2uLimKC15kwKewb2rjKFNXao6KY4FDDTOpk0ycrJxyxitM+T4d+7NaY1BkhPMoT1dqmothkoqlMq6xwxOo/Ah4zwXLZUuxsGGvkxhhVFGRmQiOf4c8jR7zdH8RqyMczDV7Wjx2ZSWcES1wYa+SmWFUUR5g81++s8MMRq1VFwWQmXKbRSdxQrb0qCjYz0ZxZXFxlwVgjnnw60+CNMUZcZtJlFNftBDNUa7eKYoNJYmvMmk+91GCo1nYVxQaTxq+6yoqxRuwqCjqTzKBl/6vWtmga+UVX4PhMKoPWuaBaZyzyW2HSGOECH8YaSVBRbDJp611e5cNYIwkqik0mbV2HG3NcUK0jVBSbTOL6hZaZMNZIhoriChPosoz1Lb+r1llHsMQk8SMPs8ARa4qKYoNJhkyafgULxhpJUVGsMIlcLDDAEWuMimKPSd83XGeAah2jothhUiIzRkvvjzWSo6JYYtK4WPO9ah2kothi0rh42PNjjSSpKG4wibKVXfe7ah2lolhkEhjJw+xwxGobBW4ivyuCuraYjS2Pq9ZJKoo2b1Dih9TgIvTGC087Yk1b5BfnpUr8RAZtvUJz3lato1QUcbpMha8GDaiyg7zGCkesvlHg4rxfiW8IIC/iJU+PNRKmoqjzDj2TvIg3/OyINU9FcZPURAxh+1S1Dj6Cm6SPfNU79o22U2vzKHArSRHG9O24HlatE1UUL0mSzGp9pXnXEWukiuImCXw551nVOlNFcZMEvlxjgCNW/yhwO0ngyxWvqtahKoqfJOqllz6tGcSaqqL4Sfpebnh0rJFYFSWDJK6xbtWfY43EqiiBJEH3Dj/sS9U6V0WJIWnrE9ry4Fgj2Yv8kSQ9d5ev+VG1TlZRQkjqIl2h30uN4tQ6WkUJJ8lw/rvkwbFGolWUEJK+N+a8p1pnqyhhJF02kOt+GmskM/d2jhBCUiayZaznxhpJV1EOR4ZwRXKI5TVHrPEqSjhJiV/XBZ+p1mEqys4ifw5JH3HOs2ONRI0CDyLJI274a6yRfBUliKSPeN1XjlgLVJRMkqobulY9NNZIyyJ/Gklbt/KyNx2xxo0CjyLp++CSh1TrDhUlmEQaYLLgn7FGGlQUf7RMvh/oHdW6REVJIh8gxoeOWONGgQfkXUo8+TBkjuy6X1TrDhUlIW9S4iVdQr8ZxieOWFtUlIS8Sok3eJnZgUdUayYVRfMEFPkWYlb85og1cxR4GomYZV+o1kUqShzJGD84Yq1SUU5LhskdeEG1rlJR8kjEPOoBR6xdKkogiZgF8lXrMhUlkCQS1P+ErjIVJZEkErSr1nUqSiJJJEgfTrNORYkkiQThqnWfipJJEglaHbEWfdxSUTJJKkG1al2oooSSVILmn9BVqaKEkkRiieThNCtVlFSSSCz7whFr/CjwWJJK+GGskfxR4LEkmaB2rJFSFeXkZJjaAbGqdamKkk0ieinXyP8JXRWjwINJKnGd+rFGKkaBn50MV3ZA53CavSpKAQk4loJK1bpYRYkm6QSBY42UL/IfnxwRxrSh0BFrtYpyfHJU8DlAoGpdraKcnxwXhuckb6yRbhVlAOSk4PuIyrFGOq/7nAA5LXjYI8kRK8MRMvMWEJNwfto6ZWONdKsooXktucxQCkLYWCP1KsoIyIuSt3CqVGt6FUW/7US4B3J9mKjhNOlVFOO2E6Gey9UKSao1gIpSQH6fUGZZrhHkiPUAKop824mAD8FIj2qNoKIMgpSIxDhiZVBRxkCOK57amhbVmkFFmQN5SfEIaIl3xFqeWzsqyiDIK4pHliBiOE2QRf5KEvBJSyxQ4YgVQ0UZBDmmfHx8GlRrDhVlEuSU8vGLyHLE2jkKvJmEe06KW8lXrUFUlFGQI5rH6k3qcJpER5gFOaF55NGEq9ZYKsoILuJSvyRnOM3aUeDtJNwzMH44wao1i4rSRFL5WvMysY5YYVSUaZD6n/2dJlS1hlFRpkEOAA8JT8dP6CoeBT4OclKP60kcawRHRRkHOQN5CPTEOWLlUVHqScSngb6SsLFGgFSUeZBToB+jQMxYI32PDl9HUmlwACAnRLWmWuQfCDkB/GlOyRlrBElFGQg5A/1tTgkZa4RJRRkIOQ7+JZvJUK2ZVBQWkm5Xm3MJUK2hVBQeEm0HxpWzY43QHaGRpHEJXyRkrBGS6z7vFn38IBYTcF+sldOqNZSKUpT30cqcKk1kzuGxRqhUlKK8Xc2k8H2jhbNjjRxLRcnbdiLj9pwPXHLECpT7eSqKb9uJ9C0Ncc3JsUbIVJRS8ivEL8tywb2xRk6moiRuOxFyl/DXnRtr5HAqSuL+aBnvaMPDCRhrhGMU+FDISZQ/68uWS6o1nIoyFPLiLM6fbcUN1ZpwkX8q5DTWHyjJFdUaT0UZCjmG9mcXcdcRK8socCwS8wa/LDugWgOqKFQk6c1buWrdESugioJFkt4AmjVLqjXpEdhIzPvZtOKcI1acUeDdJIkxYkVob6wRRhWlnKSymR+nvc7WWCOMKgogSXmH367bUa0hVRRCEvMu4S27OJwmxKPDj4WcKm3IErpqTamijIUct/X348MdTpNTRZkKOWLvj5SIqVpzqigAJL2t/JdVSDxHrKAqCiGJey8bV7HGGgFVUcZCTpU25S/GjlipbeRHIP0zl+VToGONUIj/t1QUXpLynjY/2VS1ptUUhYH00Vw+50lGY40Qa4oCQdI0J3wwUK2JNUWZCjn661fGB6dV66JtRU6FHJn9lfIBpFrTa4pCQZI0x3wAqNbEmqKU5w2UMcdnyzLog061JtcUpTwvtcJkvnXrHyZ0Pl/pYyjPh9RMr81lea8C9JqitOf9dDEnS/fkLgkeNkU51bYTp0oX5c6HlPDpfZ+V204EfxEKboNOvnMFfqhtJ45cKV2VWx7wsynKifZHOzZbOiz3EGyKgkJ+g6L4HY2CWlMUYph0xOG63ApmkTU6PM3MA7xqK/eQaorCEGZdJkNuf5BOUxRqmDTpTu5+7T6VpijkMOkITWAgYaPD08MkIzQ5gXcTaIrCDeaFyTJ5ctv95JmiMIM5NlMmUu5A+lDvtiJ5wbyY4P/+yPYhwkaHp5xZ8HKcJe47yDJF4QTzQvL/iwFvvZeCRn6IKQpNzGSvJX/lIYJMUWhiErCW8GgeosYUhX5m2EvYSMbKnQ+SYorCBOboVEmO3K6uCCX8Z0WygHlh/EpJkuR3PUCDKQoHmCOk/Z+t3nbPgwSYonifeVH+z9GkLSDhpiieZ45MXilplFvvui8pjfwgUxSfMy+MXZp5nFS5/e77k+kK3N/M0cnLj5Mst1f3PZg0UxQ/M0fGL6neo5p6z/0PJsYUxbvMi+3kFA6XyirR7Xfe3d53f127a4ry6g8RhFhytG3HJuvpyzOP74HI//uP//cf/184/mOzL/+WNCx2O/JP/5f1/zzDv/9rKDpR/iWE/yID1nKNowhNp5fHMhrgbG2YCR1MAg1wtnaK0LFGOkLXsRdxfpM2KFrjL7LtTkauqFmGsEgHXK2NMgPVsR61SklFBIytjTGtQuWgqx3G2doQ85+diPm6pAuq1viKXiEiJ60tV9QaY/GIXLREI5VnziKTLg492qBojbXIRcSSNiha4ywyuUWLOAhaYy1SAUXPMrLQyO1kLiBUUp/w55via+1qRzGnoEE8gcLbfGKQ6mhpGMB7wsW26BDwEOS0dFWozcowSGUol4yFhJc9+eC3irDdKWUx0+P9X5bd9TX9RtbqfuG/nxextKboSFyS5oiYFwtV6mgAba+8XWppBqZdWWnEQMg7jWzDD4lUnaD+StUvQ+yElwMRPZto804rTbSIoE3Cj2X0rUk6ckVKbk9r6FDUWkAMIQbGWdGaI+0AUojGFYZlmGdlOS/APOF7zTUlMozzqcszW+gtQnr8lpG3punImLaMBWAfiRrMbxqjAnVyYgN++oaUYRY7AcgJL8UdN1jEYgeUzA56RQeSZdStiTrypYqgjMqN1tH2soEVdAOMTN6uRCAnPHYCanuoFJfgWmNdltdWMC8XrlCf6338vhlxa6qObCnEjGqEI6NNITt6Jp8MWqke2vQByoqqFXJCyvg8IqAKYvJ6Knu+qMtkTRnGUCjLEDnhrbglpTW0gJ29lhI3bwMBcC3/83cv2tZUHVkCqkBluf5auwi5+LbpALDn5lGb9akpdFpTnYNOmi2gDNtCAeSEB7ForKG3rTr49YUW8BGl3SRqcngr2tZkHRmTt5BM6ik0PPPaWSGmGrLpEbkdJgUsegWkhbu3KAEp4cs01hCAVxepmaNn+sXOtTrNn+87kbam68iWIoLqHK2ulDMDDMQ0gq5KFXZLndSIos/kIgIbrZASvvzJprbQ01RQAZujTi8HlsHegaStCTsK+WMUxEToNrZnuix6oIzIsdHqM6sQ1WVoQpESvkyFDV3OF+Bjcl4V/cbaQGUEXUeGAIu+hgGhGGFn0xoZPe0bLbibPReAlfBVgi00Yq7BzxN/RNEmwgqCEYQdmVJqEXUbPTB9UUkXVuD5D7s/qNAhNSxDrISHfCIWas9gjxEnF7PJuX+EHYWk1KE1rcAXwMpbJualIcCFo89kMLASnvHNtZjxJtdjbWrJ/sgKUiMIO8pMT9ZhjS5JFfT819hFlDIZDOyEV1Y/1gLOHNqsEUWXCCwoWxN2lBWALp4GYCkaSW6OEKRGiRBqBbDKECvhGeswwaT2IeCnKLpEYEHZmrCj0ERlZxzg/vaBGQpD1NpehKrQYGBahlgJX67lWkWrgl7Lc2SABWVrwo5CU2ZG97cHiwjwbcUuw4+i1FJ/kE1kbiHDwro1PHztS1nn2otG7QKaDgmZKyil5m5qsW6NMpRlq92RMvuouqRB6hYl40WLhXVrOF/Zdwt1Z9pg2BdggEzVWSwZc4YCiBYLGVaRdT2LGLhFGcDha03YUXSkHaiQMG8bOczeahEWbAGGVYjgZkROfexya0gHumLKZuqkDNDRk6t8ZjD/GDjhhheI7V5yW+o0m9rAcb01mpW6qy1VmjZTdLRS0oDAK0OshGu18cqt1v5Kd/AUwGbaoDkIo6gww+FrTdmRqCR7ooBcfRaaR4O2bmOI2rwMjRJuUkPsWos9hvDdoNYcsgV0l4i6bc3A8LWm7EhUkixXP5vXnMkiErQZkOH0B9UGZahLON5iu7aAgNaT36hzQJsv+r4dMHytCTtSlWSL1qxWs5OlTqLBKsMKrzutkSfnLJf0FxBgjUSvPUaotY2kNbe5JCpJH+iukeuq95lDLwAmjHCgJRzSa9Hia3wplkVhBqvGNvqKSyFdjoEWe77WhB2JSvJFazCrVZijA5RKXzg5sAx78lEOSDjGN0jS1NiIaFbJBaRSHwA7ykBqgdIebe/H15quI1VJsuj+E5bJ95JhwOzGkwgpnNCBcqAuOgl4CYd1bDWtfn8P8yYoA+TOhkVFexRkp+vpm6ybEnKbTh5Bdw44WxN1JCtJlguXS+hPiyn0Ht2sCuYtdYW6XwlUOAWgDHupavNQEm7k5rJrQpDLSLz73whlA787CnpTZNWKN+nnsK2LncaMo96/+uiXuDVRR6qSDBGMDXoKxwSAE2VP0QuQB6k4MyG3jDCQC6eV/TPAUKvKQTxCU+XmYSZcd4YEijlK6PZu14BLC0xavTNFrDsYxa1pOpKV5AhI5jVJLNC8K5vm3rZKN8MwOilwE65JSo4J8z7wAlATqXMQBmVpPn3/83kn4tYkHclKsgfoxqu3aAGxgBROCymcFoJUbLFASjjYpQciTI+Spgfz543jSaGeh+w27zYibk3RkaykkKSgYwoHZrmyGEvY4VvrMy9IbVpYCYdKW4EOtmAAqIFDk4FPLwWON5ZQiFCptb83Im7teke6kiwpQ6Fdqw2zWlUXKfVlbZJ5eSur1YVh5jV1KQE34bDDNoRKVayhRbtbO+QoHqdquZ7WhMxs6xrZ7Hj3Tdra9Y7kJZmKKOTNH5i0zwRF/bkKquzG8XoVkTyBpf16ugyMhO/WRQlz+R8OKPZAIPpV39NALVoZ7ElAaze7hwADBxx7G8s9D2bW7Xm8HnR7DMtB2mpD5cb8du/gRKUZIyWougSrvYZLGczoYc8DodzrQL7H0ALTNoBPZXsRanVQDdMSLIWU",points:["As a Cloud Computing Intern at Cloud Counsulage Pvt. Ltd, I worked on automating database operations using AWS services.","I developed and implemented automation scripts for MongoDB backup and restore processes.","These efforts enhanced data reliability, storage efficiency, and system performance.","This experience strengthened my skills in cloud infrastructure management and automation."]},{date:"July 2024 - August 2024",company_name:"Salesforce Developer Virtual Internship - Online",title:"Salesforce Developer",iconBg:"#fff",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAG75JREFUeF7tnb2rJkd2h19pPAOCHYRtDAYjMIKNFTiwMyV24kihMSixAgeO9Bdo9BcocuBATgTC4UZO7ESZHRiseEEYBoPBeFfLLAxoGGHq6tadevutj1N1TlVXdT83We289XHqOad+faq6uvutC38QgAAEFiHw1iJ2YiYEIACBC4JFEEAAAssQQLCWcRWGQgACCBYxAAEILEMAwVrGVRgKAQggWMQABCCwDAEEaxlXYSgEIIBgEQMQgMAyBBCsZVyFoRCAAIJFDEAAAssQQLCWcRWGQgACCBYxAAEILEMAwVrGVRgKAQggWMQABCCwDAEEaxlXYSgEIIBgEQMQgMAyBBCsZVyFoRCAAIJFDEAAAssQQLCWcRWGQgACCBYxAAEILEMAwVrGVRgKAQggWMQABCCwDAEEaxlXYSgEIIBgEQMQgMAyBBCsZVyFoRCAAIJFDEAAAssQQLCWcRWGQgACCBYxAAEILEMAwVrGVRgKAQggWMQABCCwDAEEaxlXYSgEIIBgEQMQgMAyBBCsZVyFoRCAAIJFDEAAAssQQLCWcRWGQgACCBYxAAEILEMAwVrGVRgKAQggWMQABCCwDAEEaxlXYSgEIIBgEQMQgMAyBBCsZVyFoRCAAIJFDEAAAssQQLCWcRWGQgACCFYuBr787oOrn588/igbMj+8+sXD75+8/y3hBQEI2BJAsBxPL0yBID19dPk0hfrFq9fvPn386Df+f5PlXl++ePgNMbONXFo7JYHzCpYTqXuBCsXJiVCPSHAC59p94UXMCxiZWA/ctHlQAucSrHuRGiFQpXiJChjiVcLG7ycncHzB2mRSvTIoTRxdiReZlwYldQ9O4LiCFWRTM4pUKq7u9sbCZSNZ18GnIMOrIXA8wVpUqLZOu8m6EK6auKbsQQkcR7AOIlSHE67waEjkWEjsbuxDhhnCCO+yun9HwA8qSflhrS9YBxWqmHDdTWQ3cWefrMG+oRuH1U2OmxsVrvEVeJxSWvoMem3B+ur5Z34yrLRPpXHlwx7XTBM1OMdmJU4SRl7AHo6LcMNCgm3pMmsK1kmyqlxkPQjXx+99vlsETnhM5Eq8Zs9Ed3Pcuh2vJ1j3WdVZMiqRaI3Otha4YEyZia6rE9NYvo5gLTBJ9vLq3eR8+erD7ntbC/rg6pjIntnoXsFxsH7XECy/ifvj62cH4282nK5LxAWFaumbFmZRcbyG5hesL7/74Ok7j79hCVgOPnPROoBQIVzluFmpxNyCdcK7gNrgMdu7Ofheobm4ax1HfRGBeQXr4BNG5B1NobcfPWs6o3TArCqF0UzcNX6ibhWBOQULsapyYrJwrWidlDvZlk24jWhlPsE66aTp5myJaJ0oqyLb6hZpQxqeS7DYYO/j9JxocQf2gTlLxD7hZ9nqPIKFWFn69bYtJ1rbc0iIVZT5sHNtfT1+yNbnECzEqntw3ezTwDzLHNHqHpJNHewvWFzlmxzXUilc8nC2rUwQ0SozGl1if8H66vlnF06wD/P71RsOOn1wY9hgBnSEaA2AXNHFvoLFHcEKV1F0LwKI1l7kb/vdT7DYQ5knCrCkSADRKiIaUmA/wWIpOMTBdGJIQHKmzbA7mpolw2IpSCwuSIAT8fs7bXyGxVJwf69jQTOBIaIVfrijZOnJ3qo6XrBYCpZCkN8nJ2C2n9XwRaEQTfTrQq7Agd9tP1awyK4mn4qYJybQsp8VfKzD9bP9xJnFO9/CYyuuj6uP8rp/WDwjGytYZFfi+UDBuQmIloYJgbIQpho6N18XWjgLGydYZFc1MUbZBQgkl4abrwmNFigJuqt33Y/+iInEwESZcYJFdqVwE1WnJeCXhs7A+y9bu6XejCIVY3jzcdrJxWuMYJFdTTvfMExHwGcqR/ig75V4TSpcYwSL7Eo3K6gNgYEEZhau/oJFdjUw1OgKAnYEZhSu/oJFdmUXQbQEgR0IzCRc3QXr6dfPv19lA3KHWKBLCCxDYIZXSPcVLJaDywQjhkJASmBP4eorWCwHpTFAOQgsReBhmfjy1YcjT8/3Eyyyq6UCEGMh0EJAdOK/peFEHQTLECZNQeCMBEYuEfsJFu+8OmPsMuYTEzB7i0WGYVfB4uMSJ45ehn5KAr1Fq49gsX91ymBl0BBwBHruayFYxBgEIGBOoJdo9REsjjOYBwANQmA1Aj1EC8FaLQqwFwILEbAWLQRrIedjKgRWJGApWvaCxYb7ijGFzRDoSsBKtBCsrm6icQhAwBOwOPKAYBFPEIDAMAJa0UKwhrmKjiAAgTsCLZ9Iu0eHYBFDEIDAeAKNomUvWDxDON759AiBxQi0bsIjWIs5GnMhcBQCLftZCNZRvM84ILAigcqlIYK1opOxGQIHIVC7NESwDuJ4hgGBVQnULA0RrFW9jN0QOBIBtzT8+L3PS0NCsEqE+B0CEOhOQLo0RLC6u4IOIAABEQHBBry9YPHws8g3FIIABK4JSLIsBIuogQAEpiFQ2oBHsKZxFYZAAAJ3BDIb8AgWMQIBCExFIJdl2QuW+2rG18+/f/Hq9btTUcAYCEBgCQK5vawugnXhIxRLBAZGQmBaAollIYI1rccwDALnJZBaFvYRrC+/++DyO2//53lxM3IIQEBNIJJldROsp+88/oZ9LLXLaAACpyUQy7K6CdblyeOPLj++fnZa2gwcAhDQE9hkWX0Ey5nJxrveWbRwRcBdcd0//PUfv/NwB/rr/3p5929k8wcNlpGC9fTR5VMCKR1IbgK6yfc3P//Z5R9/+duL/183CeH2hlvIyf3rn/z+k4cf/+P/fnj47z//l/+F28F0a7ss7Jdh8UxhMXT+9uc/u/z9n/3eTbm/+7dfXf7hl78t1j9DAcfICXkoUrFxO+Fyog+3Y0XF9kxWP8FiWViMHAQrjyjFJyVYf/rP/1NkToEFCQTLwu6CxbIwHSAIVj2bVA2y0gWFSGhyuCzsK1gsC7MuQbDieFyA/utf/MG7sWWg37Pye36+BfavhLN/wWLjBItlIYLVMEFSQu7EKiZMdwHNs6sNpNeoEu5j9c2wHA+yrGRUkGHdokllVymxWmPKYaWawP0+FoKlJtneAIJ1yw4m7fF06Jr3r0/uK1jumcInjz9i4z0eSkxOmWCRXR1aikSD8/tY/QTrq+efIVR5XyBYt3z+/S//8ObMFYIlmtOHLtRPsHbOqvzjG6H3LDdkY+27vlr66CVYWxtbbCtFvyUH31fqkKjFkYXecVHipfm9B2tvz4hY0Yz9qu7bj57ZZlj3G+ytE7hlYP6xDVfXnYh2f6lHN9yt8Jpnz8K2w/a9na6f8NEQ1777kz5aYyVY20dXYhxrbdu20YOzG3/4lzrR7k+xx8aVO9nu2/dxkeNSc0J+Gxe+3dDvsb69D1z5Un+x+tt4c+3UtOnKx/y45aKNlZZ5LKpjKlg7LAGlj22EMMJzPKmgyT27JgErfUxEK1ihnaVHV7zdUtvCcfbiHFv+Sfj6MqnMK5zsEi4+JqRnuWJ+81ydaLkzZNsL5zYGU6fya22X+nVUrNT4r7qsmWAtIlbboEk9e6adSK4fiTBoBKtFRKTBrRUrCefc4VBpIMcEawSXnN8kzz3mhFZSP8Un1a6GtSSOpf5Sl1ML1k77VZqgDKGlHGwhWKUswP3eKlgW45cEokU/bpwpYYk9+C0N6thGfM2zh7l+Sntmmn5SNxA0bfoLZCxr04iVZK5I/WVRzo1Ft4e10zuvUoISLvccoHDvIrY0yF3pYpMp3K/aOiC19Mjd4WoRrFIAxh5dydmWe8NBT85aMdxyLbUX811uuZgTLY24ODu2wiJpLxV7fgwxey1jJXXhsRAiaRs6wdphGegG5oz+9V/90c0nxFIZg78L4l/65lPuWOB4cKGjww1fv2G/Bbxte/t7rTC2TJZwDyW8K1jau0hx6M05tnGdukiEG8uebbjBnZuYIRdX17EJYyK30Z/a06oRmJjt4d5pSWhdLLi/UuzFbvSk7Iwx8XPLv58t9RyndJ9PKkI15doFayex0iyjQjHyAiO5wyS945ezLSUKtRlWKQBz48lN6polW2m5VMvZl69lEQb6SC45P3ubJMttXzaXxWre75UTwpIPa2OlRnQ0ZdsEa0exSgXLTAcLUwcfY/sLtZO0tvw2OGrqp+6E9brC1tgWjsticuUELzbeXIZVE4saUSlN/Fae4QUkln3mViYlm7S/1wvWzmJlkWFpoZXq10z0mqBKTcyaq3muDem+SunqXOKT+r2GmzS7qhHXVKZTk306u2r45IRS8zJCCxF3Y5ntqYM6wZrkrQua9L91MtXUS9n3u//03zevQKkRrNTVuPaKJxWG0ZxrMlOJYNUIR+2FsDYji8WPlajE2u4ZK66/WCzXzJHWsnLBuj++MMNnu0rpuIPhT7RbPpLi+vV/25PT4cZqKo2uWVrUXNVdWe0+WyxLG8k5NXklolOTGeUmSk22U1M21Wcu263JDFOClfpWgDZWarPIVnFKibzsWMNOxxdSg5Wck9re3WsVL3+1crZITk2nbLbIsGqPWqRskR7xGMW5JtMMx2Q56WvaarVXkhnWZsw1gpU7lqONFUthyol8WbAmWQpunV1zIjgUr9IzXL6f3IZorXNqDwvGMguJeNTaFZa3ODXewrl2OXZ0wZJklSU/57LjUl3J7xY2SvrZlikvCSdaCm6NbxGU1Fkli7ZLDtBkWKUDgKW+Jb9bPi4i5RxeHLbZo+RmQk1WJGEg3WTumWFZiMEeFzcJX22ZsmBNcFcwN8jSochU3dxkKIlDKa2uOXAnDfySTdpAKIlDD86hzVKhiF1xYx+rqDla0GKH1G85v1i0kWr/nII14VIw5SC/IR57vUytaJXujrn2Sm95iO019cqwwmWYRrgkm7GWnCVCUbq1b5lh1bRlITYWbeTmQ81TA7VxI4mV2jZF5bMPP0+20S4ZUPi4h0S8thucFmedpMcG3HhqgtbqbpiEY6mMlnPYvuYOoYW/vC2zCFbPTXeL5WYpNrr+nhSshbKrFKDtpEot1cLHH1L7YjWO7nkOa8bP2rdwDn2mZW4l5DVHFWouNLn4tFzObpnOGCtqMUsK1oLZVWmvK/VhzlCMLAKxV4ZVM6HUgdHYQMthyBQv6XN0Fj6rzXYt+rTMDrfuWiFWmkIsKlgHyK5iMCRXcu3kyQW+Zg/LtVuzZGkKBqNKEs6lbKBm09xqctZkahaCVSuSNe5puXDUtL9HWTemFy9ffXh7DmuB7MoFTO3Gn2SvxCIQe2VYLkhqJpVFUPXi3LJvVLu0cuWlS/mUyFqcn8v5IdVvje2p9q2E3CKOLNqIC9YC2ZV3soMgXTZIr2a1gZvK5KzvEvp+UkHoA7xFxFNPAPTkLBGs0h3CUpbmfpdkai3ZiMWFzdu/1+tlLGPFQpBKbcQFa/JzVzHhkRxSlApRKXhLTvYb0L0EK5dl+Qmae44ydndP+pI6S84lwZJmRqV2Qiaxoyi5DCd3Ns1SsHI2+AuR+99t7Dlfun/373Zz/70dY+4Cl3qJX8g0bN/dddc+41gSpezv0U/VT74czAmKP9C5fcNj7nhD7BZyyck+s9vCLR2j0O5hhVlW6bGkmsOtta/WteIszXqlQV7jt9Krs71QpM7bWQpWjkM49pRP/d3vWCxLDhxrY0XqH3W5G8FaaDmoeQjZg0tdQSVOboFvJVg+wEuiJbUxJdqW7aeW7ntMfAmXUoZnbbdFzKXiuZTBSXiEc2aPLMsvBy+fvP/tm033BZaDrY+IbJ1SehTF0sm+b0vBshSt2D7PKM6tj+TkJlku0ypNTsmy1zozDJdgbnmn+ZJQSmgtBNHZWZo3Jb6tvycFa4b3XUkG5YLS/bVkAVLoFpM2XD6l9lA0B/y0NpYmaG/OrS/tK8VIywVHGhe5i0UpMyvZrb0Q5frvHSuSsTWXuV8Ouvo/ZVgLLAdjg41tIvtyqc96S18vs73y5T53HtoW7qFJN+m3YyvV25bPcYhxq/0UeQ/OkmMmzQF+XzEU3FRbnkVNXIQ8wnZr/VbKFP1FOVeux6fqY/FsObYav95lV68vX1w+fu/z5QUrN3H9b/7zSK0v8Av78Hdm3L+59H376SWLPmqcmSob3kFyNoa2WtgYm7C1nK33gUrctkxceQsWpX4tfo/ZbmV/71jRjj9cDr4RrAX2r7QDp/5cBEYL1lyjxxoxAbcc/OHVL9yG+5VgrbJ/JR4oBacm0GPDfeoBY1wbgWD/6ifBWnT/qm301JqBQGr/yuLVKjOMDxtsCGyXgwiWDVdaqSTAcrAS2FmLb5aDCNZZA2HHcUsfk9rRRLqegMD27qA36a3L5I/jTMAOExoI+DuJ/rhA6RyQxRmmBjOpMimB2HLwpwwLwZrUZeua5feoYiOo+UjHugSwXE1gs9lOhqUmSgMpArWPx5BdEUshgVR2RYZFnHQhUCNYiFUXF6zdaCK7QrDWduuU1ksftK15dm/KgWJUFwK57OpOsJ5+/fz7VR5R6EKIRs0JhG8r3TZe+xyjuXE0ODeBTHaFYM3tukNYFz5/yYXxEC7tNohSdoVgdUNPwxCAQA2B1LmrbRssCWuoUhYCEOhCQJJdseneBT2NQgACNQSk2RWCVUOVshCAQB8CkWcGUx1x0r2PC2gVAhAQEJAuBX1TCJYAKkUgAAF7AjVLwTeCxfuw7D1BixCAQJlA4cxVrAFe4FfGSgkIQMCYQO1SkAzL2AE0BwEIyAi0ipVr/afPfPGKGRlpSkEAAioCLftWYYcIlgo/lSEAASkBrVhdZVhPH10+5VkvKXrKQQACNQQexCr4ZFdN/Td7WO6/uFPYwo46EICAlEDF4dBckz8tCdnHkmKnHAQgUEvASKzeLAkRrFoXUB4CEJAQMBSra8FiWSjBTxkIQEBAwGrPatvVmyXh5XLh7aMCT1AEAhDIEuglVtcZFstCwhACEFAS6ClWt4LFslDpLqpD4LwELM5ZlehdLQnvCnPqvcSM3yEAgQ2BEWJ1m2G5fyHLIhghAIEaAsZ3AnNd32ZYZFk1rqIsBE5LoPd+VQxsXLDIsk4bhAwcAiUC/tNtL16++vDyyfvflspb/h4XLLIsS8a0BYHDENgjqwrhpQWLLOswQcZAIKAlsLdQefvTgkWWpfUx9SGwPIGH5d/ryxeXj9/7fO8B5QWLLGtv/9A/BHYjMOqoQs0A84J1n2XxrqwapJSFwLoEHkTKDUH57qoeFMqCxdKwB3fahMA0BK6WfU6k3N/gu39SGDLBYmko5Uk5CCxDYPZsKgZSJlgsDZcJQgyFQIrAVSbll3wTZ1M6wUK0mAkQMCPgxcM12ONbClftuzt8/m/CfakaqPIMy7fKw9E1fCkLgTgB//zdk8cf+QLu5ta2cErMQkHydV6EwrRoBlUKl3rB+vK7Dy4O8o+vn5Ua53cIQCBCIPawsJtXsb9A0K6ypBTYSTfLreKgXrBcz4iWFX/aORkBzVePT4YqOtw2wboXrafvPP6mx/obx0DgiARmPIi5Gud2wSLTWs3X2LszAbIrvQN0goVo6T1AC6cggFjZuFkvWIFo8QiPjVNo5VgEWAra+dNGsLw9Xz3/DNGycw4trU8AsbL1oa1gBZvx7j/ZkLd1Fq0tSGDg+84XpFNtsr1gsUSsdgIVDkoAsTJ3bB/B2iwRybbM/UaDsxNArLp4qK9gkW11cRqNzktgllcJz0tIZ1l/wfL23Z+OZ1Ne5zBqz0sAservm3GCFREulor9HUwPYwggVmM4jxcshGuMZ+llGAEOhQ5DfdlPsMIxBstFsq5xzqcnHQGyKh2/ltpzCFaYdbn/vn+lRvh+IO2Zrt4vTGuBT511CSBW+/huLsHaMvDvCCq85CyH7ualZpfLhY3/fYLtCL0iVPt6cW7BSrFJvewsVn77QjPe5bVvxC3a+9UHGyb4oOiiGNVmrylY2mHzzKOWoFn92ZfqK35Zxsw5EzZ0TsHis2VThOLVg8HuWwH3y/UZbryQUU0RIjdGnFOwHAY+prF7REaPA+x4x5hsaveQKBpwXsEiyyoGR88CxdeubG64WN4xvsvkHj/6jR/fw42Zyb963NMfq7R9XsEiy9o1RqsPW2YErGYgV3eNEagadFOUPbdgkWXtEoTF7EpqVe7TWF6Mtm0d/DNYUnSrlju3YN1nWZzLGhy+vHplMPDjdIdgcS5raDRXLwWHWkdnsxNAsJyHWBqOi1OXXXHwchzvg/WEYHmHcsyhe2iTXXVHfPgOECzvYpaGXYMdseqK9zSNI1ihq1kadgl8s7uCXayj0ZUIIFhbb/GcoX38clfQnulJW0SwYo5nP8tsOrAUNENJQ5fLJG8cnc0V7GeZeASxMsFIIwEBMqxUOCBaqonCvpUKH5UTBBCsXGiwCd80cRCrJmxUEhBAsEqQEK0SoavfEasqXBSuJIBgSYAhWhJKd69suXsbAifZRbwoVE8AwZIyY08rS4oNdmkgUU5DAMGqoRe8DVP72bGabmcvi1jN7qHj2Idg1foS0XogxievaoOH8loCCFYrwZOfiEesWgOHehoCCJaG3kn3tdhc1wQNdTUEECwNPVf3REtEsiptsFBfSwDB0hL09Q8sXP4LMxxZsAoW2mklgGC1kkvVu/8g6OXH18+sm96jPbKqPajTZ4oAgtUjNnb8GKjVcBAqK5K0Y0kAwbKkuW3Lb8rff4J99rNbV0s/95ksPonVMzpou4EAgtUAranKxHtcfKK9yaNU2oEAgjUa+ibrct2PzrxuPtPOF5BHRwH9NRJAsBrBmVSLiFcPAbsRKNcJImXiQhoZSwDBGss73Zv/7PqTxx+FhdxXqcP/n8rGQlG6Ez331oTwD4GaxdPYoSCAYCngda/qRWzb0UbUHrKlbTk2zbu7iA7GEkCwxvKmNwhAQEEAwVLAoyoEIDCWAII1lje9QQACCgIIlgIeVSEAgbEEEKyxvOkNAhBQEECwFPCoCgEIjCWAYI3lTW8QgICCAIKlgEdVCEBgLAEEayxveoMABBQEECwFPKpCAAJjCSBYY3nTGwQgoCCAYCngURUCEBhLAMEay5veIAABBQEESwGPqhCAwFgCCNZY3vQGAQgoCCBYCnhUhQAExhJAsMbypjcIQEBBAMFSwKMqBCAwlgCCNZY3vUEAAgoCCJYCHlUhAIGxBBCssbzpDQIQUBBAsBTwqAoBCIwlgGCN5U1vEICAggCCpYBHVQhAYCwBBGssb3qDAAQUBBAsBTyqQgACYwkgWGN50xsEIKAggGAp4FEVAhAYSwDBGsub3iAAAQUBBEsBj6oQgMBYAgjWWN70BgEIKAggWAp4VIUABMYSQLDG8qY3CEBAQQDBUsCjKgQgMJYAgjWWN71BAAIKAgiWAh5VIQCBsQQQrLG86Q0CEFAQQLAU8KgKAQiMJYBgjeVNbxCAgIIAgqWAR1UIQGAsAQRrLG96gwAEFAQQLAU8qkIAAmMJIFhjedMbBCCgIIBgKeBRFQIQGEsAwRrLm94gAAEFgf8H0qbn1LBohy0AAAAASUVORK5CYII=",points:["During The internship I completed the Trailhead Modules Which is Provided by TheSmartbridge I learn Salesforce fundamentals Organizational Setup Relationship & Process Automation Types of Flows & Security.","Apex, Testing, Debugging, Vscode Setup with CLI and Lighting and Web components (Lwc) & API.","I earned Superbadges such as Apex Specialist Process Automation Specialist and Developer Superset ."]},{date:"June 2025 - August 2025",company_name:"Edunet With IBM SkillsBuild - Internship",title:"AI Developer",iconBg:"#fff",icon:_te,points:["Designing and developing responsive and user-friendly web interfaces.","Optimizing website performance and ensuring cross-browser compatibility.","Contributing to code reviews and upholding code quality."]},{date:"May 2024 - July 2024",company_name:"GirlScript Summer of Code - Apprenticeship",title:"Gssoc Contributor",iconBg:"#fff",icon:Ete,points:["Contributed to open-source projects as part of the GirlScript Summer of Code apprenticeship.","Developed and implemented features and bug fixes in collaboration with project maintainers.","Gained hands-on experience in software development and project management through active participation."]},{date:"Aug 2025 - Oct 2025",company_name:"IBM Skillbuild - Internship (As a Learner)",title:"AI Internship",iconBg:"#fff",icon:_te,points:["Analyzed and interpreted complex data sets to inform business decisions.","Created visualizations and reports to communicate findings effectively to stakeholders.","Applied statistical techniques and data modeling to extract insights from data."]}],Dte=()=>{const e=We({query:"(max-width: 768px)"});return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .Work-Ex {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #0cffc5, #a939ff, #0cffc5, #a939ff);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(0, 255, 197, 0.7), \n      0 0 5px rgba(0, 255, 197, 0.7), \n      0 0 7px rgba(169, 57, 255, 0.7), \n      0 0 9px rgba(169, 57, 255, 0.7), \n      0 0 12px rgba(0, 255, 197, 0.5), \n      0 0 15px rgba(169, 57, 255, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite, glow 1.2s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.5), \n        0 0 0 rgba(169, 57, 255, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(0, 255, 197, 1), \n        0 0 2px rgba(0, 255, 197, 1), \n        0 0 5px rgba(169, 57, 255, 1), \n        0 0 8px rgba(169, 57, 255, 1), \n        0 0 12px rgba(0, 255, 197, 0.7), \n        0 0 15px rgba(169, 57, 255, 0.7);\n    }\n  }\n  .Work-Ex-PC {\n    display: none;\n  }\n\n  .Work-Ex-Mobile {\n    display: block;\n  }\n\n  @media (min-width: 768px) {\n    .Work-Ex-PC {\n      display: block;\n    }\n    .Work-Ex-Mobile {\n      display: none;\n    }\n  }\n",document.head.appendChild(e),window.scrollTo({top:0,behavior:"smooth"}),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"Experience | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{style:Tte,children:[e?(0,He.jsx)(n6,{style:Mte,scene:"https://prod.spline.design/tQH4xs3CwWIS7EtM/scene.splinecode"}):(0,He.jsx)(n6,{style:Mte,scene:"https://prod.spline.design/rBcaq3Xa97MnC3a4/scene.splinecode"}),(0,He.jsxs)("div",{className:"mt-20",style:{zIndex:"20",position:"relative",pointerEvents:"none"},children:[(0,He.jsxs)(vc.div,{variants:Cte(.3),initial:"hidden",animate:"show",children:[(0,He.jsx)("div",{className:"Work-Ex Work-Ex-PC",style:{textAlign:"center",marginBottom:"3.5rem",marginTop:"7.6rem"},children:"My Technical Experience"}),(0,He.jsx)("div",{className:"Work-Ex Work-Ex-Mobile",style:{textAlign:"center",marginBottom:"3.5rem",marginTop:"7.6rem"},children:"My Experience"})]}),(0,He.jsx)(Ste.VerticalTimeline,{children:Pte.map((e,t)=>(0,He.jsxs)(Ste.VerticalTimelineElement,{contentStyle:{background:"rgba(255, 255, 255, 0.09)",color:"#fff",borderRadius:"18px",boxShadow:"0 3px 5px rgba(0, 0, 0, 0.3)",backdropFilter:"blur(6px)"},contentArrowStyle:{borderRight:"7px solid  #232631"},date:e.date,dateClassName:"date",iconStyle:{background:e.iconBg},icon:(0,He.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,He.jsx)("img",{src:e.icon,alt:e.company_name,className:"w-full h-full object-cover rounded-full"})}),children:[(0,He.jsx)("h3",{className:"company-title",children:e.title}),(0,He.jsx)("p",{className:"company-name",children:e.company_name}),(0,He.jsx)("ul",{className:"mt-5 list-disc ml-5 space-y-3.5",children:e.points.map((e,t)=>(0,He.jsx)("li",{className:"text-[#d4d4d8] sm:text-[15px] text-[12px] pl-1 tracking-wider",children:e},"experience-point-".concat(t)))})]},"experience-".concat(t)))}),(0,He.jsx)("style",{jsx:!0,global:!0,children:"\n          .vertical-timeline-element-date {\n            font-size: 18px !important;\n            color: #fff !important;\n            font-weight: bold !important;\n          }\n          \n          .company-title {\n            color: white;\n            font-size: 25px;\n            font-weight: bold;\n          }\n\n          .company-name {\n            color: #e4e4e7 !important;\n            font-size: 13px !important;\n            font-weight: bold !important;\n          }\n\n          @media (max-width: 768px) {\n            .Work-Ex {\n              font-size: 34px;\n              margin-right: 2.4rem;\n            }\n            .company-title {\n            font-size: 18.5px;\n            }\n            .vertical-timeline-element-date {\n              font-size: 14px !important;\n            }\n          }\n        "})]})]})]})},Ote=__webpack_require__.p+"static/media/Class5_1.734ec6529e5691942d37.png",kte=__webpack_require__.p+"static/media/Class10_1.c34947526d43de1d6bf5.png",Ite=__webpack_require__.p+"static/media/Class12_1.edbd469770d26e34eb51.png",Rte=__webpack_require__.p+"static/media/College_1.c4734a5dfb039fdc3bae.png",Lte=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),zte={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},Bte={zIndex:"1",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all 0.3s ease",position:"relative"},jte=[{date:"2021 - 2025",cname:"Maharshi Dayanand University, Rohtak",title:"MERI college of engineering",iconBg:"#fff",icon:Rte,points:["College: MERI-CET","Specialisation: B.tech (Computer Science and Engineering)","CGPA: 8.78","Class Topper in Sem 7 or 8 of the CSE Department","Completed a Short-Term Course on Remote Sensing & GIS (MERI College in collaboration with IIT Bombay)","Completed multiple projects with excellence."]},{date:"April 2019 - March 2021",cname:"Holy Convent Senior Secondary School, Delhi",title:"High School, 11-12th",iconBg:"#fff",icon:Ite,points:["Board: Central Board of Secondary Education, New Delhi","Specialisation: Non-Medical - PCM","Percentage - 60%","Completed various projects with excellence.","Selected for science project and represented school at state level with my friend."]},{date:"April 2014 - March 2019",cname:"Central Public School, Uttar Pradesh",title:"Junior School, 6-10th",iconBg:"#fff",icon:kte,points:["Board: Central Board of Secondary Education, New Delhi","Percentage - 92%","Achive Citation for Excellency in Class 10th.","Taking Part in Many Competitions (Educational/Cultural)"]},{date:"April 2006 - March 2014",cname:"Oxford Public School, Uttar Pradesh",title:"Schooling till 5th",iconBg:"#fff",icon:Ote,points:["Completed foundational education and developed core academic skills.","Took part in sports and art activities.","Joined school events and fun activities.","Made new friends and worked on group projects."]}],Fte=()=>{const e=We({query:"(max-width: 768px)"}),[i,n]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .Edu {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(255, 127, 0, 0.7), \n      0 0 5px rgba(255, 127, 0, 0.7), \n      0 0 7px rgba(255, 0, 0, 0.7), \n      0 0 9px rgba(255, 0, 0, 0.7), \n      0 0 12px rgba(255, 127, 0, 0.5), \n      0 0 15px rgba(255, 0, 0, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite, glow 1.2s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n\n  .Edu-PC {\n    display: none;\n  }\n\n  .Edu-Mobile {\n    display: block;\n  }\n\n  @media (min-width: 768px) {\n    .Edu-PC {\n      display: block;\n    }\n    .Edu-Mobile {\n      display: none;\n    }\n  }\n",document.head.appendChild(e),window.scrollTo({top:0,behavior:"smooth"}),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"My Education | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{style:Bte,children:[e?(0,He.jsx)(n6,{style:zte,scene:"https://prod.spline.design/tQH4xs3CwWIS7EtM/scene.splinecode",onTouchStart:()=>n(!0),onTouchEnd:()=>n(!1)}):(0,He.jsx)(n6,{style:zte,scene:"https://prod.spline.design/rBcaq3Xa97MnC3a4/scene.splinecode",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)}),(0,He.jsxs)("div",{className:"mt-40",style:{zIndex:"20",position:"relative",pointerEvents:"none"},children:[(0,He.jsxs)(vc.div,{variants:Lte(.3),initial:"hidden",animate:"show",children:[(0,He.jsx)("div",{className:"Edu Edu-PC",style:{textAlign:"center",marginBottom:"3rem",marginTop:"-1.5rem"},children:"My Education & Qualification"}),(0,He.jsx)("div",{className:"Edu Edu-Mobile",style:{textAlign:"center",marginBottom:"3.5rem"},children:"Education"})]}),(0,He.jsx)(Ste.VerticalTimeline,{children:jte.map((e,t)=>(0,He.jsxs)(Ste.VerticalTimelineElement,{contentStyle:{background:"rgba(255, 255, 255, 0.09)",color:"#fff",borderRadius:"18px",boxShadow:"0 3px 5px rgba(0, 0, 0, 0.3)",backdropFilter:"blur(6px)"},contentArrowStyle:{borderRight:"10px solid  #232631"},date:e.date,dateClassName:"date",iconStyle:{background:e.iconBg},icon:(0,He.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,He.jsx)("img",{src:e.icon,alt:e.cname,className:"w-full h-full object-cover rounded-full"})}),children:[(0,He.jsx)("h3",{className:"edu-title",children:e.title}),(0,He.jsx)("p",{className:"edu-name",children:e.cname}),(0,He.jsx)("ul",{className:"mt-5 list-disc ml-5 space-y-3.5",children:e.points.map((e,t)=>(0,He.jsx)("li",{className:"text-[#d4d4d8] sm:text-[15px] text-[12px] pl-1 tracking-wider",children:e},"education-point-".concat(t)))})]},"education-".concat(t)))}),(0,He.jsx)("style",{jsx:!0,global:!0,children:"\n          .vertical-timeline-element-date {\n            font-size: 18px !important;\n            color: #fff !important;\n            font-weight: bold !important;\n          }\n          \n          .edu-title {\n            color: white;\n            font-size: 25px;\n            font-weight: bold;\n          }\n\n          .edu-name {\n            color: #e4e4e7 !important;\n            font-size: 13px !important;\n            font-weight: bold !important;\n          }\n\n          @media (max-width: 768px) {\n            .Edu {\n              font-size: 35px;\n              margin-right: 3.7rem;\n            }\n            .edu-title {\n              font-size: 18.5px;\n            }\n            .vertical-timeline-element-date {\n              font-size: 14px !important;\n            }\n          }\n        "})]})]})]})};var Nte=Object.defineProperty,Ute=Object.defineProperties,Vte=Object.getOwnPropertyDescriptors,Wte=Object.getOwnPropertySymbols,Hte=Object.prototype.hasOwnProperty,Gte=Object.prototype.propertyIsEnumerable,qte=(e,t,i)=>t in e?Nte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Yte=(e,t)=>{for(var i in t||(t={}))Hte.call(t,i)&&qte(e,i,t[i]);if(Wte)for(var i of Wte(t))Gte.call(t,i)&&qte(e,i,t[i]);return e},Xte=(e,t)=>Ute(e,Vte(t)),Qte=class extends t.Component{constructor(e){super(e),this.ref=t.createRef(),this.state={style:{}};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0},this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1?arguments[1]:void 0;return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Xte(Yte({},this.state.style),{willChange:"transform"})})),this.setTransition(),e(t)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Xte(Yte({},this.state.style),{transform:"perspective(".concat(this.settings.perspective,"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)")})}))})}onMouseMove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1?arguments[1]:void 0;return t.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.update.bind(this,t)),e(t)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Xte(Yte({},this.state.style),{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Xte(Yte({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1?arguments[1]:void 0;return this.setTransition(),this.settings.reset&&this.reset(),e(t)}getValues(e){const t=(e.nativeEvent.clientX-this.left)/this.width,i=(e.nativeEvent.clientY-this.top)/this.height,n=Math.min(Math.max(t,0),1),r=Math.min(Math.max(i,0),1);return{tiltX:(this.reverse*(this.settings.max/2-n*this.settings.max)).toFixed(2),tiltY:(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*n,percentageY:100*r}}updateElementPosition(){const e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(e){const t=this.getValues(e);this.setState(Object.assign({},this.state,{style:Xte(Yte({},this.state.style),{transform:"perspective(".concat(this.settings.perspective,"px) rotateX(").concat("x"===this.settings.axis?0:t.tiltY,"deg) rotateY(").concat("y"===this.settings.axis?0:t.tiltX,"deg) scale3d(").concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")})})),this.updateCall=null}render(){const e=Object.assign({},this.props.style,this.state.style);return(0,He.jsx)("div",{style:e,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const Kte=__webpack_require__.p+"static/media/github.ed1c06d925fff0b57e32.png",Zte=__webpack_require__.p+"static/media/orthobot_Ai.38328fa2c6b5e821fc2f.png",Jte=__webpack_require__.p+"static/media/USPortfolio.20b9ed503d8b68e3449d.png",$te=__webpack_require__.p+"static/media/medbrief-Ai.a4fea825b56732375d5c.png",eie=__webpack_require__.p+"static/media/Recode-hive.3276da856372652c61d1.png",tie=__webpack_require__.p+"static/media/flight-img.ed7fc21e97fd5c491cdb.png",iie=__webpack_require__.p+"static/media/Food-img.f185662da3bd303154ce.png",nie=__webpack_require__.p+"static/media/movie.3ffe29722c6197969eb6.webp",rie="sm:px-16 px-9 sm:py-16 py-10",aie=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),sie=(e,t,i,n)=>({hidden:{x:"left"===e?100:"right"===e?-100:0,y:"up"===e?100:"down"===e?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:t,delay:i,duration:n,ease:"easeOut"}}}),oie={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},lie={zIndex:"1",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",transition:"all 0.3s ease",position:"relative"},cie=[{name:"OrthoBot AI",description:"OrthoBot AI \u2013 A virtual healthcare assistant for post-op care, built with React and Node.js, featuring an AI-powered knowledge base, voice chat, and responsive UI for 24/7 recovery guidance.",tags:[{name:"HTML",color:"bg-orange-500"},{name:"CSS",color:"bg-white"},{name:"React.js",color:"bg-green-500"},{name:"nodejs",color:"bg-orange-500"},{name:"MongoDB",color:"bg-white"},{name:"Backend - Express.js",color:"bg-green-500"}],image:Zte,live_link:"https://orthobot-ai.vercel.app/",source_code_link:"https://github.com/ujjwalshriv3/OrthoBot-AI"},{name:"My Portfolio",description:"Explore my portfolio to see a diverse array of projects, showcasing my educational background, professional experience, and personal work. Each piece reflects a blend of creativity, skill, and dedication to excellence.",tags:[{name:"HTML",color:"bg-orange-500"},{name:"CSS",color:"bg-white"},{name:"Javascript",color:"bg-green-500"},{name:"React",color:"bg-orange-500"},{name:"Vanta.js",color:"bg-white"},{name:"Magic UI",color:"bg-green-500"}],image:Jte,live_link:"*",source_code_link:"*"},{name:"Medbrief-AI",description:"MedBrief AI helps patients by generating clear, structured summaries of medical reports for better understanding and faster decision-making.",tags:[{name:"Javascript",color:"bg-orange-500"},{name:"Nodejs",color:"bg-white"},{name:"Api",color:"bg-green-500"},{name:"React",color:"bg-orange-500"},{name:"MongoDB",color:"bg-white"}],image:$te,live_link:"https://medbrief-ai.vercel.app/",source_code_link:"https://github.com/ujjwalshriv3/MedBrief-AI-frontend"},{name:"Recode Hive",description:"I was Contributing to this project which is Creating a list of awesome github profiles under one roof",tags:[{name:"HTML",color:"bg-orange-500"},{name:"CSS",color:"bg-white"},{name:"Javascript",color:"bg-green-500"}],image:eie,live_link:"https://recodehive.github.io/awesome-github-profiles/",source_code_link:"https://github.com/ujjwalshriv3/awesome-github-profiles"},{name:"Flight Reservation System",description:"Flight Reservation System is a web application that allows users to search and book flights. The system includes features such as flight search, booking, and cancellation. The application is built using HTML, CSS, JavaScript, this is the Frontend use only not work in backend",tags:[{name:"HTML",color:"bg-orange-500"},{name:"CSS",color:"bg-green-500"},{name:"JavaScript",color:"bg-blue-500"}],image:tie,live_link:"https://flight-travel-tour.netlify.app/",source_code_link:"https://github.com/ujjwalshriv3/Flight-Reservation-System"},{name:"Food Order",description:"Food Order is a web application that allows users to order food from a restaurant. The system includes features such as food search, ordering, and payment. The application is built using HTML, CSS, JavaScript, this is the Frontend use only not work in backend",tags:[{name:"JavaScript",color:"bg-orange-500"},{name:"CSS",color:"bg-white"},{name:"HTML",color:"bg-green-500"}],image:iie,live_link:"*",source_code_link:"https://github.com/ujjwalshriv3/food-delievery-Website-"},{name:"Movie Website ",description:"Movie Website using HTML, CSS, and JavaScript. you can easily make a Movie Website using HTML, CSS, and JavaScript. You also make this Movie Website by following my youtube tutorial which, I have given below. This Movie Website is fully responsive all browsers compatible.",tags:[{name:"HTML",color:"bg-orange-500"},{name:"CSS",color:"bg-white"},{name:"JavaScript",color:"bg-green-500"}],image:nie,live_link:"*",source_code_link:"https://github.com/ujjwalshriv3/MOVIE-WEBISTE-PROJECT"}],hie=e=>{let{index:t,name:i,description:n,tags:r,image:a,live_link:s,source_code_link:o}=e;return(0,He.jsx)(vc.div,{variants:sie("up","spring",.5*t,.75),className:"w-full sm:w-[350px] h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-6 rounded-3xl shadow-lg transition-transform transform hover:scale-150",children:(0,He.jsxs)(Qte,{options:{max:25,scale:1,speed:300},children:[(0,He.jsxs)("div",{className:"relative w-full h-[220px] sm:mb-10",children:[(0,He.jsx)("img",{src:a,alt:"project_image",className:"w-full h-full object-cover rounded-3xl",style:{pointerEvents:"auto"}}),(0,He.jsxs)("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:[(0,He.jsx)("div",{onClick:()=>window.open(s,"_blank"),className:"w-14 h-14 bg-black bg-opacity-60 p-2.5 rounded-full flex justify-center items-center cursor-pointer transition-transform transform hover:scale-110",style:{pointerEvents:"auto"},children:(0,He.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAllJREFUaEPtWVFuwyAMhZOtPdnak607GasjXBHHxjYQWKXmq1IIvGc/mweN4c2f+Ob4w4fA6gwuzUBK6RJC+M5BgN/wPEIIv/AjxnjTArSEQAEcQUs470Aoxgik2Gc6gQz+R4sseX+VSEwl0AgeubAkphGogAd5gFRA84+UEuj+6ykdKi+Q0pVmbgqBCvi7VKiZCBa4mIVZBBKjeRE8jk0pQa2UmThk4XQCQvRV8ECC+XY+gQykjKQJvEAA6mQX9NMzUMjhUuvnXFvlsreMgLPvb8OZQl4joRbwmQAt/oP8pknIS2J6GxWMGeDGTUo1ZkW9wFi6B7DFPyQDTL+WAi56GgX8ofvg+C4CDldZEhJJCLKBb8ebuQ5jxnqaFvCbf/IWl7TB5Hk2Y4b9PpMsDy3bMNrLW8E3ERhgzHZy6AHvJtACvpbhXvAuAv8RvJmAFTyJqNfrV7uNlEm1iK3gpa0fD+V5HhgGGxR3mFf3CI5ElYAHvEDA2uSawFcl5AUvuEeNwK7taoNdGUhPQTMfqIcRx+7MbmheEqyEhPamgi8Xz3Og5vEVXlC9NjsvYDpeIqD68N6FR31/IGA5BY1afMQ8FgIu6YwA5ZmDI7C7i6HGyzI5FLL3AG+Z19SFmMOJuUcT+Q3pMhoxi4RMBKxnWA2Q9z1HALb58vpbjaTkKlvk100g76j0TnKKMfOCF62EdJ+5fRDj7SxjNoxAo6/B9U010wLW1IUYO0DvZ2prTwUvSqiBhFrooyJu8kLcYoU5g79/8Hn9NXQWQG1e9USmTbD6/YfAJwOdEfgDvh1dQCnkNuMAAAAASUVORK5CYII=",alt:"live link",className:"w-10 h-10 object-contain"})}),(0,He.jsx)("div",{onClick:()=>window.open(o,"_blank"),className:"w-14 h-14 bg-black bg-opacity-60 p-1.5 rounded-full flex justify-center items-center cursor-pointer transition-transform transform hover:scale-110",style:{pointerEvents:"auto"},children:(0,He.jsx)("img",{src:Kte,alt:"source code",className:"w-10 h-10 object-contain"})})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"text-white font-bold text-[22px] mb-2 mt-5",children:i}),(0,He.jsx)("p",{className:"text-white text-[13.5px] mb-9",children:n}),(0,He.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,He.jsxs)("span",{className:"text-[12.5px] ".concat(e.color," px-2 py-1.5 rounded-full"),children:["#",e.name]},"".concat(i,"-").concat(e.name)))})]})]})})},uie=()=>{const e=We({query:"(max-width: 768px)"}),[i,n]=(0,t.useState)(!1),[r]=xc(Hc);return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .Proj {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(255, 127, 0, 0.7), \n      0 0 5px rgba(255, 127, 0, 0.7), \n      0 0 7px rgba(255, 0, 0, 0.7), \n      0 0 9px rgba(255, 0, 0, 0.7), \n      0 0 12px rgba(255, 127, 0, 0.5), \n      0 0 15px rgba(255, 0, 0, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite, glow 1.2s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n\n  .Proj-PC {\n    display: none;\n  }\n\n  .Proj-Mobile {\n    display: block;\n  }\n\n  @media (min-width: 768px) {\n    .Proj-PC {\n      display: block;\n    }\n    .Proj-Mobile {\n      display: none;\n    }\n  }\n",document.head.appendChild(e),window.scrollTo({top:0,behavior:"smooth"}),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"My Projects | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{style:lie,children:[e?"none":(0,He.jsx)(n6,{style:oie,scene:"https://prod.spline.design/z6sedxN3BKPCAM0N/scene.splinecode",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)}),(0,He.jsx)("div",{className:"mt-1",style:{zIndex:"20",position:"relative",pointerEvents:"none"},children:(0,He.jsxs)(vc.section,{variants:(a=.5,s=.2,{hidden:{},show:{transition:{staggerChildren:a,delayChildren:s||0}}}),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:"".concat(rie," max-w-12xl mx-auto sm:h-full h-[100vh]"),children:[(0,He.jsx)("span",{className:"hash-span",id:"works",children:"\xa0"}),(0,He.jsxs)(vc.div,{variants:aie(.3),children:[(0,He.jsx)("div",{className:"Proj Proj-PC",style:{textAlign:"center",marginBottom:"3rem",marginTop:"2.5rem"},children:"My Innovative Development Works"}),(0,He.jsx)("div",{className:"Proj Proj-Mobile",style:{textAlign:"center",marginBottom:"2.4rem",marginLeft:"4rem",marginRight:"7rem",marginTop:"2.2rem"},children:"Projects"})]}),(0,He.jsx)("div",{className:"hidden md:grid md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-7 mt-3 overflow-hidden overflow-x-hidden overflow-y-hidden",children:cie.map((e,t)=>(0,He.jsx)(hie,(0,ye.A)((0,ye.A)({index:t},e),{},{onClick:()=>{r()}}),"project-".concat(t)))}),(0,He.jsx)("div",{className:"md:hidden mt-5 flex flex-col gap-4 overflow-hidden overflow-x-hidden overflow-y-hidden",children:cie.map((e,t)=>(0,He.jsx)(hie,(0,ye.A)((0,ye.A)({index:t},e),{},{onClick:()=>{r()}}),"project-".concat(t)))})]})})]})]});var a,s};var die,pie,fie=__webpack_require__(5047);function mie(e,t){return e+Math.random()*(t-e)}!function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"}(die||(die={})),function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"}(pie||(pie={}));const gie=1e3/60;class vie{constructor(e,t,i,n){this.getOptions=t;const{colors:r,initialVelocityX:a,initialVelocityY:s}=this.getOptions();var o,l;this.context=e,this.x=i,this.y=n,this.w=mie(5,20),this.h=mie(5,20),this.radius=mie(5,10),this.vx="number"===typeof a?mie(-a,a):mie(a.min,a.max),this.vy="number"===typeof s?mie(-s,0):mie(s.min,s.max),this.shape=(o=0,l=2,Math.floor(o+Math.random()*(l-o+1))),this.angle=function(e){return e*Math.PI/180}(mie(0,360)),this.angularSpin=mie(-.2,.2),this.color=r[Math.floor(Math.random()*r.length)],this.rotateY=mie(0,1),this.rotationDirection=mie(0,1)?pie.Positive:pie.Negative}update(e){const{gravity:t,wind:i,friction:n,opacity:r,drawShape:a}=this.getOptions(),s=e/gie;this.x+=this.vx*s,this.y+=this.vy*s,this.vy+=t*s,this.vx+=i*s,this.vx*=n**s,this.vy*=n**s,this.rotateY>=1&&this.rotationDirection===pie.Positive?this.rotationDirection=pie.Negative:this.rotateY<=-1&&this.rotationDirection===pie.Negative&&(this.rotationDirection=pie.Positive);const o=.1*this.rotationDirection*s;if(this.rotateY+=o,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=r,this.context.lineCap="round",this.context.lineWidth=2,a&&"function"===typeof a)a.call(this,this.context);else switch(this.shape){case die.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case die.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case die.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}class yie{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=e=>{this.particles.splice(e,1)},this.getParticle=()=>{const e=mie(this.x,this.w+this.x),t=mie(this.y,this.h+this.y);return new vie(this.context,this.getOptions,e,t)},this.animate=e=>{const{canvas:t,context:i,particlesGenerated:n,lastNumberOfPieces:r}=this,{run:a,recycle:s,numberOfPieces:o,debug:l,tweenFunction:c,tweenDuration:h}=this.getOptions();if(!a)return!1;const u=this.particles.length,d=s?u:n;if(d<o){r!==o&&(this.tweenProgress=0,this.tweenFrom=d,this.lastNumberOfPieces=o),this.tweenProgress=Math.min(h,Math.max(0,this.tweenProgress+e));const t=c(this.tweenProgress,this.tweenFrom,o,h),i=Math.round(t-d);for(let e=0;e<i;e++)this.particles.push(this.getParticle());this.particlesGenerated+=i}l&&(i.font="12px sans-serif",i.fillStyle="#333",i.textAlign="right",i.fillText("Particles: ".concat(u),t.width-10,t.height-20));for(let p=this.particles.length-1;p>=0;p--){const i=this.particles[p];i.update(e),(i.y>t.height||i.y<-100||i.x>t.width+100||i.x<-100)&&(s&&d<=o?this.particles[p]=this.getParticle():this.removeParticleAt(p))}return u>0||d<o},this.canvas=e;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=t}}const bie={width:"undefined"!==typeof window?window.innerWidth:300,height:"undefined"!==typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:fie.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class xie{constructor(e,t){var i=this;this.lastFrameTime=0,this.setOptionsWithDefaults=e=>{const t={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options=(0,ye.A)((0,ye.A)((0,ye.A)({},t),bie),e),Object.assign(this,e.confettiSource)},this.update=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{options:{run:t,onConfettiComplete:n,frameRate:r},canvas:a,context:s}=i,o=Math.min(e-i.lastFrameTime,50);r&&o<1e3/r?i.rafId=requestAnimationFrame(i.update):(i.lastFrameTime=e-(r?o%r:0),t&&(s.fillStyle="white",s.clearRect(0,0,a.width,a.height)),i.generator.animate(o)?i.rafId=requestAnimationFrame(i.update):(n&&"function"===typeof n&&i.generator.particlesGenerated>0&&n.call(i,i),i._options.run=!1))},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new yie(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){var t,i;const n=null===(t=this._options)||void 0===t?void 0:t.run,r=null===(i=this._options)||void 0===i?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"===typeof e.recycle&&e.recycle&&!1===r&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"===typeof e.run&&e.run&&!1===n&&this.update()}}const wie=t.createRef();class Aie extends t.Component{constructor(e){super(e),this.canvas=t.createRef(),this.canvas=e.canvasRef||wie}componentDidMount(){if(this.canvas.current){const e=Sie(this.props)[0];this.confetti=new xie(this.canvas.current,e)}}componentDidUpdate(){const e=Sie(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=Sie(this.props),i=(0,ye.A)({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},t.style);return(0,He.jsx)("canvas",(0,ye.A)((0,ye.A)({width:e.width,height:e.height,ref:this.canvas},t),{},{style:i}))}}function Sie(e){const t={},i={},n=[...Object.keys(bie),"confettiSource","drawShape","onConfettiComplete","frameRate"],r=["canvasRef"];for(const a in e){const s=e[a];n.includes(a)?t[a]=s:r.includes(a)?r[a]=s:i[a]=s}return[t,i,{}]}Aie.defaultProps=(0,ye.A)({},bie),Aie.displayName="ReactConfetti";const _ie=t.forwardRef((e,t)=>(0,He.jsx)(Aie,(0,ye.A)({canvasRef:t},e))),Eie=()=>{const[e,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)({width:window.innerWidth,height:window.innerHeight});return(0,t.useEffect)(()=>{i(!0);const e=setTimeout(()=>{i(!1)},8e3),t=()=>{r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),()=>{clearTimeout(e),window.removeEventListener("resize",t)}},[]),(0,He.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100vw",height:"120vh",pointerEvents:"none"},children:e&&(0,He.jsx)(_ie,{width:n.width,height:n.height})})},Cie=__webpack_require__.p+"static/media/Gif_Basic.96e863c8b8094cdf03e7.gif",Mie=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.5,delay:e}}}),Tie=()=>{const[e,i]=(0,t.useState)(!1),[n,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c]=xc(Oc),[h]=xc(Hc),u=Up({from:{transform:"translate3d(0, -180px, 0)"},to:{transform:"translate3d(0, 0, 0)"},config:{tension:120,friction:4}});(0,t.useEffect)(()=>{const e=()=>{i(window.innerWidth<=767)};e(),window.addEventListener("resize",e),window.scrollTo({top:0,behavior:"smooth"});const t=document.createElement("style");return t.innerHTML="\n    @font-face {\n      font-family: 'Spaceboards';\n      src: url('/fonts/Spaceboards.otf') format('opentype');\n    }\n  \n  .Cont {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 5rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #0cffc5, #a939ff, #0cffc5, #a939ff);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(0, 255, 197, 0.7), \n      0 0 5px rgba(0, 255, 197, 0.7), \n      0 0 7px rgba(169, 57, 255, 0.7), \n      0 0 9px rgba(169, 57, 255, 0.7), \n      0 0 12px rgba(0, 255, 197, 0.5), \n      0 0 15px rgba(169, 57, 255, 0.5);\n    margin-left: 4rem;\n    animation: gradient 1.5s infinite, glow 1.2s infinite alternate;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(169, 57, 255, 0.7), \n        0 0 0 rgba(0, 255, 197, 0.5), \n        0 0 0 rgba(169, 57, 255, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(0, 255, 197, 1), \n        0 0 2px rgba(0, 255, 197, 1), \n        0 0 5px rgba(169, 57, 255, 1), \n        0 0 8px rgba(169, 57, 255, 1), \n        0 0 12px rgba(0, 255, 197, 0.7), \n        0 0 15px rgba(169, 57, 255, 0.7);\n    }\n  }\n\n  @media (max-width: 767px) {\n    .map {\n      display: none;\n    }\n    .Cont{\n      font-size: 2.8rem;\n      margin-right: -5px;\n      align-items: center;\n    }\n  }\n  @media (max-width: 998px) {\n    .Cont{\n      font-size: 1.5rem;\n    }\n  }\n  @media (max-width: 1050px) {\n    .Cont{\n      font-size: 3.5rem;\n      margin-right: -1px;\n    }\n  }\n",document.head.appendChild(t),()=>{window.removeEventListener("resize",e),document.head.removeChild(t)}},[]);const d=[{icon:(0,He.jsx)("i",{className:"fa-solid fa-envelopes-bulk"}),description:"Ujjawalshrivastava698@gmail.com",href:"mailto:Ujjawalshrivastava698@gmail.com"},{icon:(0,He.jsx)("i",{className:"fa-brands fa-linkedin"}),description:"My Profile",href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218"},{icon:(0,He.jsx)("i",{className:"fa-brands fa-github"}),description:"My Profile",href:"https://github.com/ujjwalshriv3"}],[p,f]=(0,t.useState)(null);return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"Contact Me | Portfolio - Ujjawal"})}),(0,He.jsxs)("section",{style:{position:"relative",padding:"60px 20px",fontFamily:"Arial, sans-serif",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",color:"#e2e8f0",overflow:"hidden",backgroundImage:"url(".concat(Cie,")"),backgroundSize:"cover",backgroundPosition:"center"},children:[(0,He.jsx)("div",{style:{marginTop:"3rem"}}),(0,He.jsxs)("div",{style:{backdropFilter:"blur(1px)",borderRadius:"30px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",border:e?"none":"1px solid rgba(255, 255, 255, 0.3)",padding:e?"0":"30px",maxWidth:e?"1600px":"1250px",width:e?"105%":"90%",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:e?"left":"center",gap:"10px"},children:[(0,He.jsx)("div",{style:{textAlign:"left",marginBottom:"30px",width:"100%"},children:(0,He.jsx)("div",{className:"Cont",style:{textAlign:"left",marginBottom:"1rem",marginLeft:"5rem",marginTop:e?"1rem":"0"},children:(0,He.jsx)(vc.div,{variants:Mie(.4),initial:"hidden",animate:"show",children:"Contact Me"})})}),(0,He.jsxs)("div",{style:{display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",width:"100%",gap:"20px"},children:[(0,He.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:(0,He.jsxs)("form",{id:"form",style:{display:"flex",flexDirection:"column",gap:"20px",backdropFilter:"blur(1px)",padding:"30px",borderRadius:"15px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",marginTop:"-25px",width:"100%"},onSubmit:e=>{e.preventDefault(),r(!0)},children:[(0,He.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",marginBottom:"20px"},children:[(0,He.jsx)("label",{htmlFor:"name",style:{position:"absolute",top:"10px",left:"15px",color:"#e2e8f0",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",pointerEvents:"none",transform:"translateY(0)",transformOrigin:"top left",opacity:.7},children:(0,He.jsx)(vc.div,{variants:Mie(.64),initial:"hidden",animate:"show",children:"Name*"})}),(0,He.jsx)("input",{style:{padding:"12px 15px",borderRadius:"10px",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.3)",fontSize:"16px",backgroundColor:"transparent",color:"#e2e8f0",outline:"none",transition:"border-color 0.3s",minHeight:"40px",width:"100%",boxSizing:"border-box",paddingBottom:"2px"},type:"text",id:"name",name:"name",onFocus:e=>e.target.previousElementSibling.style.transform="translateY(-32px)",onBlur:e=>{e.target.value||(e.target.previousElementSibling.style.transform="translateY(0)")}})]}),(0,He.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",marginBottom:"20px"},children:[(0,He.jsx)("label",{htmlFor:"email",style:{position:"absolute",top:"10px",left:"15px",color:"#e2e8f0",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",pointerEvents:"none",transform:"translateY(0)",transformOrigin:"top left",opacity:.7},children:(0,He.jsx)(vc.div,{variants:Mie(.64),initial:"hidden",animate:"show",children:"Email*"})}),(0,He.jsx)("input",{style:{padding:"12px 15px",borderRadius:"10px",border:"none",borderBottom:"2px solid rgba(255, 255, 255, 0.3)",fontSize:"16px",backgroundColor:"transparent",color:"#e2e8f0",outline:"none",transition:"border-color 0.3s",minHeight:"40px",width:"100%",boxSizing:"border-box",paddingBottom:"5px"},type:"email",id:"email",name:"email",onFocus:e=>e.target.previousElementSibling.style.transform="translateY(-35px)",onBlur:e=>{e.target.value||(e.target.previousElementSibling.style.transform="translateY(0)")}})]}),(0,He.jsxs)("div",{style:{position:"relative",display:"flex",flexDirection:"column",marginBottom:"20px"},children:[(0,He.jsx)("label",{htmlFor:"message",style:{position:"absolute",top:"10px",left:"15px",color:"#e2e8f0",fontSize:"16px",fontWeight:"bold",transition:"all 0.2s ease",pointerEvents:"none",transform:"translateY(0)",transformOrigin:"top left",opacity:.7},children:(0,He.jsx)(vc.div,{variants:Mie(.64),initial:"hidden",animate:"show",children:"Message*"})}),(0,He.jsx)("textarea",{style:{padding:"15px 20px",borderRadius:"10px",border:"none",fontSize:"12.5px",backgroundColor:"transparent",borderBottom:"2px solid rgba(255, 255, 255, 0.3)",color:"#e2e8f0",outline:"none",transition:"border-color 0.3s, background-color 0.3s, box-shadow 0.3s",minHeight:"100px",resize:"vertical",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",width:"100%",boxSizing:"border-box"},id:"message",name:"message",rows:4,onFocus:e=>e.target.previousElementSibling.style.transform="translateY(-36px)",onBlur:e=>{e.target.value||(e.target.previousElementSibling.style.transform="translateY(0)")}})]}),(0,He.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",alignItems:"center",width:"100%"},children:(0,He.jsxs)("div",{className:"glowbtn",children:[(0,He.jsx)(cf.h1,{style:u,children:(0,He.jsxs)("a",{style:{padding:e?"10px 50px":"12px 60px",borderRadius:"10px",backgroundColor:"transparent",textDecoration:"none",color:"#33f403",border:"none",marginBottom:e?"-5px":"-10px",marginLeft:"1px",marginTop:e?"-22px":"-10px",fontSize:e?"13.5px":"16px",fontWeight:"bold",transition:"background-color 0.3s",width:"100%",textAlign:"center",cursor:"pointer"},onClick:()=>{n||(console.log("Button clicked, setting sendingMsg to true"),r(!0),setTimeout(()=>{console.log("Resetting sendingMsg to false"),r(!1),s(!0),setTimeout(()=>{s(!1)},1e4)},3800)),c()},children:[(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),(0,He.jsx)("span",{}),n?"Sending...":"Send"]})}),a&&(0,He.jsx)(Eie,{})]})})]})}),(0,He.jsxs)("div",{style:{flex:1},children:[(0,He.jsx)("div",{style:{flexDirection:"column",alignItems:"center",gap:"20px",marginTop:e?"-70px":"-75px"},children:d.map((t,i)=>(0,He.jsxs)("div",{style:{fontFamily:"arial",display:"flex",alignItems:"center",gap:"15px",fontSize:e?"16px":"17px",marginLeft:e?"40px":"20px",marginTop:e?"8px":"0",marginBottom:"8px"},children:[(0,He.jsx)(vc.div,{variants:Mie(.84),initial:"hidden",animate:"show",children:t.icon}),(0,He.jsx)(vc.div,{variants:Mie(1.4),initial:"hidden",animate:"show",children:(0,He.jsx)("a",{href:t.href,onMouseEnter:()=>f(i),onMouseLeave:()=>f(null),onClick:h,style:{textDecoration:"none",color:p===i?"#0a4ff0":"inherit",transition:"color 0.18s ease"},children:(0,He.jsx)("span",{children:t.description})})})]},i))}),(0,He.jsx)("div",{className:"map",style:{width:"95%",height:"380px",padding:"1px",borderRadius:"20px",overflow:"hidden",boxShadow:"0 10px 20px rgba(0, 0, 0, 0.2)",marginTop:"40px",marginLeft:"12px"},children:(0,He.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d13918.39004592845!2d77.2088282!3d28.6139298!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390cfd5b347eb62d%3A0x52c2b7494e204dce!2sNew%20Delhi%2C%20Delhi!5e0!3m2!1sen!2sin!4v1698004002035!5m2!1sen!2sin",style:{border:0,width:"100%",height:"100%",filter:"invert(90%)"},allowFullScreen:"",loading:"lazy"})})]})]})]})]})]})},Pie=()=>(0,He.jsxs)("div",{style:{textAlign:"center",background:"linear-gradient(135deg, #161626, #070721)",padding:"20px",marginTop:"68px",borderRadius:"15px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)",color:"#fff",fontFamily:"'Roboto', sans-serif",transition:"transform 0.2s",maxWidth:"100%",boxSizing:"border-box"},children:[(0,He.jsx)("h1",{style:{color:"#E73E0D",fontWeight:"bold",fontSize:"45px",marginBottom:"20px",letterSpacing:"2px"},children:"Character Fighting"}),(0,He.jsx)("p",{style:{color:"#E73E0D",fontWeight:"300",fontSize:"18px",marginBottom:"40px",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Character Fighting: Experience epic battles with dynamic 3D models, showcasing detailed characters and thrilling combat action."}),(0,He.jsx)("div",{className:"sketchfab-embed-wrapper",style:{width:"100%",height:"300px",margin:"0 auto",border:"3px solid #E73E0D",borderRadius:"10px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s, box-shadow 0.3s"},children:(0,He.jsx)("iframe",{title:"Character Fight",frameBorder:"0",mozallowfullscreen:"true",webkitallowfullscreen:"true",allow:"autoplay; fullscreen; xr-spatial-tracking",src:"https://sketchfab.com/models/9ef2f6bd1346475885ce22ea971f8e4e/embed?autostart=1&ui_theme=dark&ui_controls=0&ui_infos=0&ui_stop=0",style:{width:"100%",height:"100%"}})}),(0,He.jsx)("style",{children:"\n          @media (max-width: 768px) {\n            h1 {\n              font-size: 35px;\n            }\n            p {\n              font-size: 16px;\n            }\n            .sketchfab-embed-wrapper {\n              height: 250px;\n            }\n          }\n          @media (max-width: 480px) {\n            h1 {\n              font-size: 25px;\n            }\n            p {\n              font-size: 14px;\n            }\n            .sketchfab-embed-wrapper {\n              height: 200px;\n            }\n          }\n        "})]});function Die(e){let{certification:t,index:i}=e;const n=window.innerWidth<798,{ref:r,inView:a}=bh({triggerOnce:!0,threshold:.1});return(0,He.jsxs)("div",{className:"certificate-card",ref:r,style:{position:"relative",width:"335px",height:n?"265px":"280px",perspective:"1000px",margin:"10px",cursor:"pointer",transform:"scale(1)",transition:"transform 0.3s ease",opacity:a?1:0,transform:a?"translateY(0)":"translateY(-50px)",transition:"opacity 1.25s ease-out ${1.7 + index}s, transform 1.25s ease-out ${1.7 + index}s",pointerEvents:"auto"},children:[(0,He.jsxs)("div",{className:"certificate-card__inner",style:{position:"relative",width:"100%",height:"100%",transition:"transform 0.8s",transformStyle:"preserve-3d"},children:[(0,He.jsx)("div",{className:"certificate-card__front",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",borderRadius:"20px",background:"linear-gradient(135deg, #4a148c, #f06292)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",padding:"15px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)",transform:"rotateY(0deg)"},children:(0,He.jsxs)("div",{style:{textAlign:"center"},children:[(0,He.jsx)("div",{style:{fontSize:n?"15.4px":"17px",fontWeight:"bold"},children:t.certification}),(0,He.jsx)("div",{style:{fontSize:"14px",color:"#dcdcdc"},children:t.year}),(0,He.jsx)("div",{style:{fontSize:n?"13px":"14px",color:"#c9c9c9"},children:t.institution})]})}),(0,He.jsx)("div",{className:"certificate-card__back",style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",borderRadius:"20px",background:"linear-gradient(135deg, #cfd9df, #e2ebf0)",transform:"rotateY(180deg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,He.jsx)("img",{src:t.image,alt:"certificate",style:{width:"92%",height:"88%",objectFit:"contain",borderRadius:"10px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.2)"}})})]}),(0,He.jsx)("style",{children:"\n          .certificate-card:hover .certificate-card__inner {\n            transform: rotateY(180deg);\n          }\n          .certificate-card:hover {\n            transform: scale(1.05);\n          }\n        "})]},i)}const Oie=__webpack_require__.p+"static/media/GSSoC24_Stats.d185e4f5ec0f89e9a890.png",kie=__webpack_require__.p+"static/media/postman Api certificate .0c1eb304e9fb776d0edb.jpg",Iie=__webpack_require__.p+"static/media/IBM certification.83988c21d7c5f719a491.png",Rie=__webpack_require__.p+"static/media/Gen-ai.75c017cff52cccdd138f.png",Lie=__webpack_require__.p+"static/media/IBM_GenAI.ffd2924de4930ac773fe.png",zie=__webpack_require__.p+"static/media/Certificate of participation.e552e16c8898271b8afa.jpg",Bie=__webpack_require__.p+"static/media/AI Certification.f636e528c728ceb57471.jpg",jie=__webpack_require__.p+"static/media/Accenture-completion.2d85d057b47fdec984e4.png",Fie=__webpack_require__.p+"static/media/Sf-admin infosys.a6fab2827d31bcb92dfe.png",Nie=__webpack_require__.p+"static/media/sf-progrss .3f61e00839d028ceb057.jpg",Uie=__webpack_require__.p+"static/media/Naukri-campus.23b6f4f893bc754c2191.png",Vie=__webpack_require__.p+"static/media/Salesforce_Certificate.dc250a1ddfdf2ca55d0b.jpeg",Wie=__webpack_require__.p+"static/media/AI.61e226e10f702ecec9b2.png",Hie=window.innerWidth<798,Gie={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1"},qie={zIndex:"1",backgroundImage:"url(".concat(sh,")"),backgroundSize:"cover",backgroundPosition:"center",position:"relative"},Yie=e=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),Xie=(e,t,i,n)=>({hidden:{x:"left"===e?100:"right"===e?-100:0,y:"up"===e?100:"down"===e?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:t,delay:i,duration:n,ease:"easeOut"}}}),Qie={width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.7)"},Kie={position:"absolute",top:"1.5rem",right:"1.6rem",fontSize:"2.2rem",fontWeight:"bold",color:"#000000",cursor:"pointer",background:"rgba(255, 255, 255, 0)",padding:"1rem",borderRadius:"60%"},Zie=(0,ye.A)((0,ye.A)({},{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:100,backgroundColor:"rgba(0, 0, 0, 0.6)",padding:"1.2rem",borderRadius:"15px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.2)",maxWidth:"100vw",maxHeight:"90vh",display:"flex",marginTop:"2.8rem",justifyContent:"center",alignItems:"center",overflow:"hidden"}),{},{width:Hie?"100vw":"60vw",height:"auto"});function Jie(){const e={title:"Certifications",content:[{certification:"GSsoc'24: Recognizes open-source contribution to significant projects",year:"2024",institution:"GirlScript Summer of Code",image:Oie},{certification:"Postman certification validates expertise in API testing and development skills",year:"2024",institution:"Postman",image:kie},{certification:"Learning Certification of Fundamentals of Ai india 2.0 ",year:"2025",institution:"GUvi By Skill india",image:Bie},{certification:"Learning Certification of Fundamental of ibmskillbuild",year:"2025",institution:"Edunet foundation by IBM SkillBuild",image:Iie},{certification:"genrative ai trailblazer in just 30 minutes hands-on expericence ",year:"2025",institution:"Udemy",image:Rie},{certification:"IBM SkillBuild AI Internship certifies form edunet foundation and AI skills",year:"2025",institution:"IBM SkillBuild",image:Lie},{certification:"GSsoc'24: My 1st Open-source Competition",year:"2024",institution:"GirlScript Summer of Code",image:zie},{certification:"Accenture Certification",year:"2025",institution:"Accenture",image:jie},{certification:"Salesforce Admin Certification",year:"2025",institution:"Infosys",image:Fie},{certification:"Salesforce Progress Certification",year:"2025",institution:"Salesforce",image:Nie},{certification:"Naukri Campus Certification",year:"2025",institution:"Naukri.com",image:Uie},{certification:"Salesforce Developer virtual internship Certificate",year:"2025",institution:"TheSmartbeidge By Salesforce ",image:Vie},{certification:"AI Certification",year:"2025",institution:"IBM",image:Wie}]},{ref:i,inView:n}=bh({triggerOnce:!0,threshold:.1}),r=We({query:"(max-width: 767px)"}),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,h]=(0,t.useState)(null);return(0,t.useEffect)(()=>{const e=document.createElement("style");return e.innerHTML="\n  @font-face {\n    font-family: 'Spaceboards';\n    src: url('/fonts/Spaceboards.otf') format('opentype');\n  }\n\n  .cert {\n    font-family: 'Spaceboards', sans-serif;\n    font-size: 4.6rem;\n    font-weight: bold;\n    background: linear-gradient(90deg, #ff7f00, #ff0000, #ff7f00, #ff0000);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: \n      0 0 3px rgba(255, 127, 0, 0.7), \n      0 0 5px rgba(255, 127, 0, 0.7), \n      0 0 7px rgba(255, 0, 0, 0.7), \n      0 0 9px rgba(255, 0, 0, 0.7), \n      0 0 12px rgba(255, 127, 0, 0.5), \n      0 0 15px rgba(255, 0, 0, 0.5);\n    animation: gradient 1.5s infinite;\n    letter-spacing: 0.1rem;\n    background-size: 200% 200%;\n  }\n\n  @keyframes gradient {\n    0% {\n      background-position: 0% 50%;\n    }\n    50% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0% 50%;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      text-shadow: \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 0, 0, 0.7), \n        0 0 0 rgba(255, 127, 0, 0.5), \n        0 0 0 rgba(255, 0, 0, 0.5);\n    }\n    100% {\n      text-shadow: \n        0 0 1px rgba(255, 127, 0, 1), \n        0 0 2px rgba(255, 127, 0, 1), \n        0 0 5px rgba(255, 0, 0, 1), \n        0 0 8px rgba(255, 0, 0, 1), \n        0 0 12px rgba(255, 127, 0, 0.7), \n        0 0 15px rgba(255, 0, 0, 0.7);\n    }\n  }\n\n  .cert-PC {\n    display: none;\n  }\n\n  .cert-Mobile {\n    display: block;\n    font-size: 3.25rem;\n  }\n\n  @media (min-width: 768px) {\n    .cert-PC {\n      display: block;\n    }\n    .cert-Mobile {\n      display: none;\n    }\n  }\n",document.head.appendChild(e),window.scrollTo({top:0,behavior:"smooth"}),()=>{document.head.removeChild(e)}},[]),(0,He.jsxs)("div",{style:qie,children:[r?"none":(0,He.jsx)(n6,{style:Gie,scene:"https://prod.spline.design/z6sedxN3BKPCAM0N/scene.splinecode",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)}),(0,He.jsx)("div",{className:"mt-1",style:{zIndex:"20",position:"relative",pointerEvents:"none"},children:(0,He.jsxs)("div",{style:{backgroundColor:"transaprent",padding:"12px",alignItems:"center",justifyContent:"center",borderRadius:"20px",maxWidth:r?"800px":"1800px",height:"auto",margin:"auto",color:"white",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[(0,He.jsx)(vc.div,{variants:Yie(1),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"cert cert-PC",style:{textAlign:"center",fontWeight:"bold",marginTop:"6.4rem"},children:"My Achievements & Certifications"})}),(0,He.jsx)(vc.div,{variants:Yie(1),initial:"hidden",animate:"show",children:(0,He.jsx)("div",{className:"cert cert-Mobile",style:{textAlign:"center",fontWeight:"bold",marginTop:"6.4rem"},children:"My Certifications"})}),(0,He.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",marginTop:"20px",justifyContent:"center"},children:e.content.map((e,t)=>(0,He.jsx)(vc.div,{variants:Yie(6.8),initial:"hidden",animate:"show",variants:Xie("","",.5*t,1.8),onDoubleClick:()=>{return t=e.image,h(t),void l(!0);var t},style:{cursor:"pointer"},children:(0,He.jsx)(Die,{index:t,certification:e},t)}))})]})}),o&&(0,He.jsxs)("div",{style:Zie,children:[(0,He.jsx)("img",{src:c,alt:"Certificate",style:Qie}),(0,He.jsx)("div",{style:Kie,onClick:()=>{l(!1)},children:"\u2715"})]})]})}const $ie=__webpack_require__.p+"static/media/US_LogoTransparent.e20371c981bee51da326.png",ene=()=>((0,t.useEffect)(()=>{const e=()=>{tt()("#menu").toggleClass("fa-times"),tt()(".navbar").toggleClass("nav-toggle")};tt()("#menu").on("click",e),window.scrollTo({top:0,behavior:"smooth"});const t=e=>{(123===e.keyCode||e.ctrlKey&&e.shiftKey&&(e.keyCode==="I".charCodeAt(0)||e.keyCode==="C".charCodeAt(0)||e.keyCode==="J".charCodeAt(0))||e.ctrlKey&&e.keyCode==="U".charCodeAt(0))&&e.preventDefault()};return document.addEventListener("keydown",t),()=>{tt()("#menu").off("click",e),document.removeEventListener("keydown",t)}},[]),(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Am,{children:(0,He.jsx)("title",{children:"Error 404 | Portfolio - Ujjawal"})}),(0,He.jsxs)("div",{onContextMenu:e=>e.preventDefault(),children:[(0,He.jsxs)("header",{children:[(0,He.jsxs)(pt,{to:"/",className:"logo",style:{display:"flex",alignItems:"center"},children:[(0,He.jsx)("img",{src:$ie,alt:"Logo",style:{height:"45px",marginleft:"5px"}}),"Ujjawal Shrivastava"]}),(0,He.jsx)("div",{id:"menu",className:"fas fa-bars"}),(0,He.jsx)("nav",{className:"navbar",children:(0,He.jsxs)("ul",{children:[(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/",children:"Home"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/about",children:"About"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/skills",children:"Skills"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/education",children:"Education"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/projects",children:"Projects"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/experience",children:"Experience"})}),(0,He.jsx)("li",{children:(0,He.jsx)(pt,{to:"/contact",children:"Contact"})})]})})]}),(0,He.jsx)("section",{className:"page_404",children:(0,He.jsxs)("div",{className:"container",children:[(0,He.jsx)("div",{className:"wrapper",children:(0,He.jsx)("h1",{className:"text-center",children:"Error 404"})}),(0,He.jsxs)("div",{className:"msg",children:[(0,He.jsx)("h3",{children:"Looks like you're lost"}),(0,He.jsx)("p",{children:"Enter the Celestial Realm: Error 404, Lost in Cosmic Beauty"}),(0,He.jsx)("div",{className:"backbtn",children:(0,He.jsxs)(pt,{to:"/",className:"btn",children:[(0,He.jsx)("i",{className:"fas fa-arrow-left"}),(0,He.jsx)("span",{children:"Back to Home"})]})})]})]})}),(0,He.jsxs)("section",{className:"footer",children:[(0,He.jsxs)("div",{className:"box-container",children:[(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)("h3",{className:"MainPort",children:"Ujjawal Portfolio"}),(0,He.jsxs)("p",{children:["Thank you for visiting. Let's connect over socials and elevate together. \ud83d\ude80 ",(0,He.jsx)("br",{})," ",(0,He.jsx)("br",{})," Keep Rising \ud83d\ude80",(0,He.jsx)("br",{}),"Connect with me over live Meeting!"]})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)("h3",{children:"Quick Links"}),(0,He.jsxs)(pt,{to:"/",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," Home"]}),(0,He.jsxs)(pt,{to:"/about",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," About"]}),(0,He.jsxs)(pt,{to:"/skills",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," Skills"]}),(0,He.jsxs)(pt,{to:"/education",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," Education"]}),(0,He.jsxs)(pt,{to:"/projects",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," Project"]}),(0,He.jsxs)(pt,{to:"/experience",children:[(0,He.jsx)("i",{className:"fas fa-chevron-circle-right"})," Experience"]})]}),(0,He.jsxs)("div",{className:"box",children:[(0,He.jsx)("h3",{children:"Contact Info"}),(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"fas fa-envelope"})," ujjawalshrivastava698@gmail.com"]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("i",{className:"fas fa-map-marked-alt"})," Delhi, India-110059"]}),(0,He.jsxs)("div",{className:"share",children:[(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",className:"fab fa-linkedin fa-bounce",target:"_blank",rel:"noopener noreferrer"}),(0,He.jsx)("a",{href:"https://github.com/ujjwalshriv3",className:"fab fa-github fa-bounce",target:"_blank",rel:"noopener noreferrer"}),(0,He.jsx)("a",{href:"mailto:ujjawalshrivastava698@gmail.com",className:"fas fa-envelope  fa-bounce",target:"_blank",rel:"noopener noreferrer"}),(0,He.jsx)("a",{href:"https://x.com/ujjawal_shri123",className:"fab fa-twitter fa-bounce",target:"_blank",rel:"noopener noreferrer"}),(0,He.jsx)("a",{href:"tel:+8743917011",className:"fas fa-phone fa-bounce",target:"_blank",rel:"noopener noreferrer"})]})]})]}),(0,He.jsxs)("h1",{className:"credit",children:["Designed with ",(0,He.jsx)("i",{className:"fa fa-heart pulse"})," by ",(0,He.jsx)("a",{href:"https://www.linkedin.com/in/ujjawal-shrivastava-81a384218",children:" Ujjawal Shrivastava"})]})]})]})]})),tne=()=>{const[e,i]=(0,t.useState)(!0),n=We({maxWidth:767});return(0,t.useEffect)(()=>{setTimeout(()=>{i(!1)},3400)},[]),(0,He.jsx)("div",{className:"App",children:e?(0,He.jsx)($e,{}):(0,He.jsxs)(He.Fragment,{children:[n?(0,He.jsx)(Gc,{}):(0,He.jsx)(Ic,{}),(0,He.jsxs)(ge,{children:[(0,He.jsxs)(fe,{element:(0,He.jsx)(Ge,{}),children:[(0,He.jsx)(fe,{path:"/",element:(0,He.jsx)($ee,{})}),(0,He.jsx)(fe,{path:"/about",element:(0,He.jsx)(lte,{})}),(0,He.jsx)(fe,{path:"/skills",element:(0,He.jsx)(Ate,{})}),(0,He.jsx)(fe,{path:"/experience",element:(0,He.jsx)(Dte,{})}),(0,He.jsx)(fe,{path:"/education",element:(0,He.jsx)(Fte,{})}),(0,He.jsx)(fe,{path:"/projects",element:(0,He.jsx)(uie,{})}),(0,He.jsx)(fe,{path:"/contact",element:(0,He.jsx)(Tie,{})}),(0,He.jsx)(fe,{path:"/fight",element:(0,He.jsx)(Pie,{})}),(0,He.jsx)(fe,{path:"/certifications",element:(0,He.jsx)(Jie,{})})]}),(0,He.jsx)(fe,{path:"*",element:(0,He.jsx)(ene,{})})]})]})})};n.createRoot(document.getElementById("root")).render((0,He.jsx)(ht,{basename:"/Ujjawal-Portfolio",children:(0,He.jsx)(t.StrictMode,{children:(0,He.jsx)(tne,{})})}))})()})();
//# sourceMappingURL=main.56994b0f.js.map